Object GondorBeaconExpansion

	SelectPortrait = SPGondorBeaconExpansion
	ButtonImage = BIGondorBeaconExpansion

  Draw = W3DScriptedModelDraw ModuleTag_Draw
  
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode = Yes

        DefaultModelConditionState
            Model = GBBeacon_SKN
        ParticleSysBone = NONE StatueHeroFX
        ParticleSysBone FIRE FireBuildingLarge
        ParticleSysBone FIRE SmokeBuildingLarge
        ParticleSysBone = FXBONEFIRE SignalFirelowNB FollowBone:Yes
        ParticleSysBone = FXBONEFIRE SignalFireEmbers FollowBone:Yes
        End

		ModelConditionState = AWAITING_CONSTRUCTION 
			Model	= GBBeacon_BLD
		End
		AnimationState = AWAITING_CONSTRUCTION
			Animation	= GBBeacon_BLD
				AnimationName		= GBBeacon_BLD.GBBeacon_BLD
				AnimationMode		= MANUAL
				AnimationBlendTime	= 0
			End
			Flags	= START_FRAME_FIRST
		End

		ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Model		= GBBeacon_BLD
			ParticleSysBone	= CONSTDUSTBONE01 BuildingContructDust FollowBone:Yes
		End

		AnimationState = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Animation	= GBBeacon_BLD
				AnimationName		= GBBeacon_BLD.GBBeacon_BLD
				AnimationMode		= MANUAL
				AnimationBlendTime	= 0
			End
			Flags		= START_FRAME_FIRST
			StateName	= BeingConstructed
			BeginScript
				CurDrawablePlaySound("GondorBarracksBeginConstruction")
			EndScript
		End

        ModelConditionState     = DAMAGED
            Model               = GBBeacon_D1
		Texture	= gbbeacon_d.tga gbbeacon_d1.tga
		Texture	= gbbeacon_glow.tga gbbeacon_glow.tga
		Texture	= gbbeacon_bib.tga gbbeacon_bib.tga
            ParticleSysBone FIRE FireBuildingLarge
            ParticleSysBone FIRE SmokeBuildingLarge
        End  
        AnimationState = DAMAGED
            EnteringStateFX    = FX_StatueDamaged
        End

        ModelConditionState     = REALLYDAMAGED
            Model               = GBBeacon_D2
		Texture	= gbbeacon_d.tga gbbeacon_d2.tga
		Texture	= gbbeacon_glow.tga gbbeacon_glow.tga
		Texture	= gbbeacon_bib.tga gbbeacon_bib.tga
            ParticleSysBone FIRE FireBuildingLarge
            ParticleSysBone FIRE SmokeBuildingLarge
        End  
        AnimationState = REALLYDAMAGED
            EnteringStateFX    = FX_StatueDamaged
        End

        ModelConditionState  = RUBBLE
            Model         = GBBeacon_D2
		Texture	= gbbeacon_d.tga gbbeacon_d2.tga
		Texture	= gbbeacon_glow.tga gbbeacon_glow.tga
		Texture	= gbbeacon_bib.tga gbbeacon_bib.tga
            ParticleSysBone SmokeLarge01 SmokeBuildingLarge
            ParticleSysBone FIRE FireBuildingLarge
            ParticleSysBone FIRE SmokeBuildingLarge
        End
        AnimationState = RUBBLE
        End

        ModelConditionState  = POST_RUBBLE
            Model         = None
            ParticleSysBone NONE SmokeBuildingMediumRubble
        End

        ModelConditionState  = POST_COLLAPSE
            Model         = None
            ParticleSysBone NONE SmokeBuildingMediumRubble
        End

		ModelConditionState = SNOW
			Model	= gbbeacon_skn
			Texture	= gbbeacon.tga gbbeacon_s.tga
			Texture	= gbbeacon_glow.tga gbbeacon_glow.tga
			Texture	= gbbeacon_bib.tga gbbeacon_bib.tga
		End
 End

    Draw = W3DFloorDraw ModuleTag_DrawFloor    
        StaticModelLODMode = Yes
     ModelName = GBBeacon_Bib
    End

  PlacementViewAngle  = 135

	DisplayName     = OBJECT:GondorBeaconExpansion
	Description 	= OBJECT:GondorBeaconExpansionDescription
	Side                	= Men
	EditorSorting       	= STRUCTURE
	ThreatLevel		= 1.0
	CommandPointBonus	= 100 
    BuildCost           = MEN_DORMITORYEXPANSION_BUILDCOST
    BuildTime           = MEN_DORMITORYEXPANSION_BUILDTIME
    VisionRange         = VISION_BASE_DEFENSE
    ShroudClearingRange = SHROUD_CLEAR_BASE_DEFENSE
    BountyValue         = GONDOR_KEEP_BOUNTY_VALUE

	ArmorSet
		Conditions	= None
		Armor		= FortressExpansionArmor
	End

	CommandSet = GondorBeaconExpansionCommandSet
	
	#include "..\..\..\Includes\StandardBuildingEvaEvents.inc"

	VoiceSelect			= DwarfHallExpansionSelect

	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	UnitSpecificSounds
		UnderConstruction	= BuildingConstructionLoop
		UnderRepairFromRubble	= BuildingConstructionLoop
	End
	CampnessValue = CAMPNESS_FORTRESS_EXPANSION

	RadarPriority = STRUCTURE
	KindOf = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE NEED_BASE_FOUNDATION

	Behavior = AIUpdateInterface ModuleTag_AI
		AILuaEventsList		= DormitoryFunctions
		AutoAcquireEnemiesWhenIdle	= No
	End

    Behavior = GettingBuiltBehavior ModuleTag_04
        WorkerName = GondorWorkerNoSelect
        SpawnTimer = DEFAULT_STRUCTURE_HEALDELAY
    End

    Body = StructureBody ModuleTag_05
        MaxHealth              = MEN_DORMITORYEXPANSION_HEALTH
        MaxHealthDamaged       = MEN_DORMITORYEXPANSION_HEALTH_DAMAGED
        MaxHealthReallyDamaged = MEN_DORMITORYEXPANSION_HEALTH_REALLY_DAMAGED
    End

	Behavior  = BuildingBehavior BuildingModuleTag
		NightWindowName = WINDOW_N01
	End
 
	Behavior = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
		DestructionDelay  = 5000
	End
	  
	Behavior                  = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		CollapseHeight		= 140
	End

    Behavior = TerrainResourceBehavior ModuleTag_NewMoneyDeadSpot
        Radius          = 30
        MaxIncome       = 0
        IncomeInterval  = 999999
        HighPriority    = Yes
        Visible 	= No
    End

	Behavior = CastleMemberBehavior ModuleTag_CMB
	End

    Behavior = CommandSetUpgrade ModueTag_CommandSetLossarnachAllies
        TriggeredBy   = Upgrade_LossarnachFiefdom
        CommandSet    = GondorBeaconExpansionLossarnachCommandSet
    End

    Behavior = CommandSetUpgrade ModueTag_CommandSetPelargirAllies
        TriggeredBy   = Upgrade_PelargirFiefdom
        CommandSet    = GondorBeaconExpansionPelargirCommandSet
    End
	
	Behavior = CommandSetUpgrade ModueTag_CommandSetRingoValeAllies
        TriggeredBy   = Upgrade_RingoValeFiefdom
        CommandSet    = GondorBeaconExpansionRingoValeCommandSet
    End

    Behavior = CommandSetUpgrade ModueTag_CommandSetBlackrootValeAllies
        TriggeredBy   = Upgrade_MorthrondFiefdom
        CommandSet    = GondorBeaconExpansionBlackrootValeCommandSet
    End

    Behavior = AttributeModifierUpgrade ModuleTag_Reinforced
        TriggeredBy       = Upgrade_MenFortressNumenorStonework
        AttributeModifier = NumenorStoneworkKeep_Bonus
    End

    Behavior = ModelConditionUpgrade ModuleTag_ShowTheStones
        TriggeredBy       = Upgrade_MenFortressNumenorStonework
        AddConditionFlags = UPGRADE_NUMENOR_STONEWORK
        Permanent         = Yes
    End



	Behavior                   = UnpauseSpecialPowerUpgrade ModuleTag_LossarnachAllies
		SpecialPowerTemplate    = SpecialAbilityLossarnachFiefdomAllies
		TriggeredBy             = Upgrade_LossarnachFiefdom
	End
	
	Behavior                   = OCLSpecialPower ModuleTag_OCL_LossarnachAllies
		SpecialPowerTemplate     = SpecialAbilityLossarnachFiefdomAllies
		OCL                      = OCL_LossarnachAllies
		TriggerFX                = FX_SummonTowerGuards
		CreateLocation           = CREATE_AT_LOCATION
		StartsPaused             = Yes
		SetModelCondition        = ModelConditionState:LEVELED
		SetModelConditionTime    = 8.1
	End
	
	Behavior = SpecialAbilityUpdate ModuleTag_LossarnachAlliesUpdate
        SpecialPowerTemplate         = SpecialAbilityLossarnachFiefdomAllies
        UnpackTime                   = 0
        PreparationTime              = 0
        PackTime                     = 0
        AwardXPForTriggering         = 0
    End



	Behavior                   = UnpauseSpecialPowerUpgrade ModuleTag_PelargirAllies
		SpecialPowerTemplate    = SpecialAbilityPelargirFiefdomAllies
		TriggeredBy             = Upgrade_PelargirFiefdom
	End
	
	Behavior                   = OCLSpecialPower ModuleTag_OCL_PelargirAllies
		SpecialPowerTemplate     = SpecialAbilityPelargirFiefdomAllies
		OCL                      = OCL_PelargirAllies
		TriggerFX                = FX_SummonTowerGuards
		CreateLocation           = CREATE_AT_LOCATION
		StartsPaused             = Yes
		SetModelCondition        = ModelConditionState:LEVELED
		SetModelConditionTime    = 8.1
	End
	
	Behavior = SpecialAbilityUpdate ModuleTag_PelargirAlliesUpdate
        SpecialPowerTemplate         = SpecialAbilityPelargirFiefdomAllies
        UnpackTime                   = 0
        PreparationTime              = 0
        PackTime                     = 0
        AwardXPForTriggering         = 0
    End



	Behavior                   = UnpauseSpecialPowerUpgrade ModuleTag_MorthrondAllies
		SpecialPowerTemplate    = SpecialAbilityMorthrondFiefdomAllies
		TriggeredBy             = Upgrade_MorthrondFiefdom
	End
	
	Behavior                   = OCLSpecialPower ModuleTag_OCL_MorthrondAllies
		SpecialPowerTemplate     = SpecialAbilityMorthrondFiefdomAllies
		OCL                      = OCL_MorthrondAllies
		TriggerFX                = FX_SummonTowerGuards
		CreateLocation           = CREATE_AT_LOCATION
		StartsPaused             = Yes
		SetModelCondition        = ModelConditionState:LEVELED
		SetModelConditionTime    = 8.1
	End
	
	Behavior = SpecialAbilityUpdate ModuleTag_MorthrondAlliesUpdate
        SpecialPowerTemplate         = SpecialAbilityMorthrondFiefdomAllies
        UnpackTime                   = 0
        PreparationTime              = 0
        PackTime                     = 0
        AwardXPForTriggering         = 0
    End



	Behavior                   = UnpauseSpecialPowerUpgrade ModuleTag_RingoValeAllies
		SpecialPowerTemplate    = SpecialAbilityRingoValeFiefdomAllies
		TriggeredBy             = Upgrade_RingoValeFiefdom
	End
	
	Behavior                   = OCLSpecialPower ModuleTag_OCL_RingoValeAllies
		SpecialPowerTemplate     = SpecialAbilityRingoValeFiefdomAllies
		OCL                      = OCL_RingoValeAllies
		TriggerFX                = FX_SummonTowerGuards
		CreateLocation           = CREATE_AT_LOCATION
		StartsPaused             = Yes
		SetModelCondition        = ModelConditionState:LEVELED
		SetModelConditionTime    = 8.1
	End
	
	Behavior = SpecialAbilityUpdate ModuleTag_RingoValeAlliesUpdate
        SpecialPowerTemplate         = SpecialAbilityRingoValeFiefdomAllies
        UnpackTime                   = 0
        PreparationTime              = 0
        PackTime                     = 0
        AwardXPForTriggering         = 0
    End

    Behavior = ProductionUpdate ModuleTag_UpgradeProducer
    End

    AttackContactPoint = X:-24 Y:-24 Z:99
    GeometryContactPoint = X:-39 Y:-39 Z:0 Repair
    GeometryContactPoint = X: 39 Y:-39 Z:0 Repair
    GeometryContactPoint = X:-39 Y: 39 Z:0 Repair
    GeometryContactPoint = X:10 Y: 10 Z:0 Bomb

    Behavior = GeometryUpgrade Geom_ModuleTag_HideAll
        TriggeredBy        = Upgrade_StructureLevel1
        ShowGeometry    = Geom_Orig
        HideGeometry    = Geom_V2 
    End
    Behavior = GeometryUpgrade Geom_ModuleTag_ShowWalls 
        TriggeredBy        = Upgrade_StructureLevel2
        ShowGeometry    = Geom_Orig
        HideGeometry    = Geom_V2 
    End
      Behavior = GeometryUpgrade Geom_ModuleTag_ShowFlagsAndTower 
        TriggeredBy        = Upgrade_StructureLevel3
        ShowGeometry    = Geom_V2
        HideGeometry    = Geom_Orig
    End

  Geometry              = CYLINDER
  GeometryMajorRadius   = 8.0
  GeometryMinorRadius   = 8.0
  GeometryHeight        = 10

  Geometry              = CYLINDER
  GeometryMajorRadius   = 8.0
  GeometryMinorRadius   = 8.0
  GeometryHeight        = 10

  AdditionalGeometry    = BOX
  GeometryName            = Geom_Orig
  GeometryMajorRadius   = 20.0
  GeometryMinorRadius   = 20.0
  GeometryHeight        = 75.0
  GeometryOffset        = X:0 Y:0 Z:0

  AdditionalGeometry    = BOX
  GeometryName            = Geom_Orig
  GeometryMajorRadius   = 25.0
  GeometryMinorRadius   = 30.0
  GeometryHeight        = 20.0
  GeometryOffset        = X:0 Y:0 Z:0

  AdditionalGeometry    = BOX
  GeometryName            = Geom_V2
  GeometryMajorRadius   = 20.0
  GeometryMinorRadius   = 20.0
  GeometryHeight        = 105.0
  GeometryOffset        = X:-22 Y:-30 Z:0

  AdditionalGeometry    = BOX
  GeometryName            = Geom_V2
  GeometryMajorRadius   = 45.0
  GeometryMinorRadius   = 50.0
  GeometryHeight        = 60.0
  GeometryOffset        = X:0 Y:0 Z:0

  GeometryIsSmall       = No
  
  Shadow                = SHADOW_VOLUME
  BuildCompletion        = PLACED_BY_PLAYER

  GeometryContactPoint = X:-49.644    Y:19.165    Z:0        Repair
  GeometryContactPoint = X:49.096    Y:-20.653    Z:0        Repair
  GeometryContactPoint = X:-9.861    Y:51.413    Z:0
  GeometryContactPoint = X:-33.314    Y:-54.902    Z:0
  GeometryContactPoint = X:-20.106    Y:-25.298    Z:89.3    Swoop
End