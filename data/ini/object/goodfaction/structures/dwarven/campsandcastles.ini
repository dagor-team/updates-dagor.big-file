Object DwarvenCastleCorn
  SelectPortrait = BRCastleWall


  Draw = W3DScriptedModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    WallBoundsMesh = P1

    DefaultModelConditionState
      Model = dbcastcorn
    End











    ModelConditionState   = BASE_BUILD
      Model               = dbcastcorn_a

      ParticleSysBone     = NONE BuildingContructDust
    End
    AnimationState          = BASE_BUILD
        Animation
            AnimationName = dbcastcorn_a.dbcastcorn_a
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 2.0 2.5
        End
    End

    AnimationState          = JUST_BUILT
        Animation
            AnimationName = dbcastcorn_a.dbcastcorn_a
            AnimationMode = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
    End

    ModelConditionState  = DAMAGED
      Model         = dbcastcorn
    End

    AnimationState = DAMAGED
    EnteringStateFX    = FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = dbcastcorn
    End
    AnimationState = REALLYDAMAGED
           Animation                =    ReallyDamagedanimation
            AnimationName        =     dbcastcorn.dbcastcorn
            AnimationMode        =    ONCE
           End
    EnteringStateFX    = FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model         = dbcastcorn
    End

    AnimationState = RUBBLE
        Animation                =    Death
            AnimationName        =    dbcastcorn.dbcastcorn
            AnimationMode        =    ONCE
        End
    EnteringStateFX = FX_WallDie
    End

    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
    End


  End




    SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged        = BuildingHeavyDamageStone

    CampnessValue = CAMPNESS_WALL



  DisplayName      = OBJECT:DwarvenCastleWall
  Side = Dwarves
  EditorSorting = STRUCTURE

    BuildTime = CASTLE_WALL_REBUILD_TIME
    BuildCost = CASTLE_WALL_REBUILD_COST

  VisionRange         = 160.0
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = RohanCastleWall
    DamageFX          = RohanWallDamageFX
  End



    KindOf                    = STRUCTURE IMMOBILE WALK_ON_TOP_OF_WALL MADE_OF_WOOD SELECTABLE NOT_AUTOACQUIRABLE
    RadarPriority            = NOT_ON_RADAR
    KeepSelectableWhenDead    = Yes
    CommandSet                = GenericSelfRepairCommandSet

  Body                = StructureBody ModuleTag_03
    MaxHealth         = ROHAN_CASTLE_WALL_HEALTH
  End

  Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
  End

     Behavior = GettingBuiltBehavior ModuleTag_GettingBuilt
        SelfBuildingLoop = BuildingConstructionLoop
        SelfRepairFromDamageLoop  = NoSound
        SelfRepairFromRubbleLoop  = BuildingConstructionLoop
        SpawnTimer = -1.0
        RebuildTimeSeconds = CASTLE_WALL_REBUILD_TIME
    End








    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes
        BonusName        = WallBonus
        RefreshDelay    = 2000


    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
    End

     Behavior = FireWeaponWhenDeadBehavior FireDeadTag2
        DeathTypes        = ALL
        StartsActive    = Yes
        DeathWeapon        = StandardWallDeath
        DelayTime        = 1
    End

  Geometry              = BOX
  GeometryMajorRadius   = 43.0
  GeometryMinorRadius   = 43.0
  GeometryHeight        = 55.0
  GeometryOffset        = X:7 Y:7 Z:0

  GeometryIsSmall       = No

  Shadow                = SHADOW_VOLUME

  AttackContactPoint    = X:3 Y:48 Z:27.5
  AttackContactPoint    = X:3 Y:3 Z:27.5
  AttackContactPoint    = X:48 Y:3 Z:27.5
End


Object DwarvenWallFoundation



  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = GBFoundationL
    End

    ModelConditionState = WORLD_BUILDER
        Model = RBWalls
    End
  End




  DisplayName         = OBJECT:DwarvenWallFoundation
  Side                = Dwarves
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0

  BuildCost           = 1
  BuildTime           = 5.0
  VisionRange         = 160.0
  ShroudClearingRange = 160

  CommandSet = RohanWallFoundationCommandSet




  VoiceSelect    = Gui_PlotSelect




  RadarPriority       = STRUCTURE
  KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY

  Behavior            = FoundationAIUpdate ModuleTag_foundationAI
  End

  Behavior = CastleMemberBehavior ModuleTag_CMB
  End

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 15000.0
  End

  Geometry              = BOX
  GeometryMajorRadius   = 24.0
  GeometryMinorRadius   = 16.0
  GeometryHeight        = 0.8
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion        = PLACED_BY_PLAYER
End



Object DwarvenWall


    SelectPortrait = BRCastleWall

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = dbcastwall
    End

    WallBoundsMesh = P1


    ModelConditionState   = BASE_BUILD
      Model               = dbcastwall_a

      ParticleSysBone     = NONE BuildingContructDust
    End
    AnimationState          = BASE_BUILD
        Animation
            AnimationName = dbcastwall_a.dbcastwall_a
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 2.0 2.5
        End
    End

    AnimationState          = JUST_BUILT
        Animation
            AnimationName = dbcastwall_a.dbcastwall_a
            AnimationMode = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
    End

  End

  PlacementViewAngle  = 0


  DisplayName         = OBJECT:DwarvenWall
  Side                = Dwarves
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0

  BuildCost           = 1
  BuildTime           = 5.0
  VisionRange         = 160.0
  ShroudClearingRange = 160


  ArmorSet
    Armor = StructureArmor
  End






    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood







    CampnessValue = CAMPNESS_WALL



  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE MADE_OF_WOOD

  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
  End

  Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
  End

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0

    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  Behavior            = DestroyDie ModuleTag_07

  End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes
        BonusName        = WallBonus
        RefreshDelay    = 2000


    End

  Geometry              = BOX
  GeometryMajorRadius   = 50.0
  GeometryMinorRadius   = 35.0
  GeometryHeight        = 60.0

  GeometryContactPoint =    X:-50            Y:-40                Z:0 Grab
  GeometryContactPoint =    X:0                Y:-40                Z:40 Grab
  GeometryContactPoint =    X:50            Y:-40                Z:0 Grab
  GeometryContactPoint =    X:-50            Y:40                Z:0 Grab
  GeometryContactPoint =    X:0                Y:40                Z:40 Grab
  GeometryContactPoint =    X:50            Y:40                Z:0 Grab

  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End


Object DwarvenGate






  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    RaisedWallMesh = P1

    DefaultModelConditionState
      Model = dbcastgate
    End

    ModelConditionState = ACTIVELY_BEING_CONSTRUCTED
        Model = None
    End

  End

    Draw = W3DScriptedModelDraw ModuleTag_DrawDoor
        OkToChangeModelColor      = Yes
        UseStandardModelNames     = Yes
        StaticModelLODMode    = Yes

        DefaultModelConditionState
            Model = CBAmnGN_CLS
        End

        IdleAnimationState
             StateName = STATE_None
        End


        ModelConditionState   = DAMAGED
            Model               = CBAmnGN_CLS
            Texture                = AmonSulCentralTower_D.tga AmonSul_D1.tga
        End




        ModelConditionState   = REALLYDAMAGED
            Model               = CBAmnGN_CLS
            Texture                = AmonSulCentralTower_D.tga AmonSul_D1.tga
        End









        ModelConditionState  = COLLAPSING
            Model         = None
        End








        ModelConditionState  = RUBBLE
            Model         = None
        End

        ModelConditionState  = POST_RUBBLE
            Model         = NONE
            ParticleSysBone NONE SmokeBuildingMediumRubble
        End
        AnimationState = POST_RUBBLE
        End

        ModelConditionState  = POST_COLLAPSE
        Model         = None
            ParticleSysBone NONE SmokeBuildingMediumRubble
        End
        AnimationState = POST_COLLAPSE
        End


        ModelConditionState = ACTIVELY_BEING_CONSTRUCTED
            Model    = None
        End


        AnimationState = DOOR_1_OPENING
            Flags = START_FRAME_LAST
            StateName = Door_Open
            Animation                =    Death
                AnimationName        =    CBAmnGN_OPSKL.CBAmnGN_CLS
                AnimationMode        =    ONCE
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Door_Close" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
            EndScript
        End
        TransitionState = TRANS_Closed_To_Open
            Animation = Open
                AnimationName    =    CBAmnGN_OPSKL.CBAmnGN_OPAN
                AnimationMode    =    ONCE
            End
        End

        AnimationState = DOOR_1_CLOSING
            Flags = START_FRAME_LAST
            StateName = Door_Close
            Animation                =    Death
                AnimationName        =    CBAmnGN_OPSKL.CBAmnGN_OP
                AnimationMode        =    ONCE
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Door_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
            EndScript
        End
        TransitionState = TRANS_Open_To_Closed
            Animation = Open
                AnimationName    =    CBAmnGN_OPSKL.CBAmnGN_CLSAN
                AnimationMode    =    ONCE
            End
        End
    End



  PlacementViewAngle  = 0



  DisplayName         = OBJECT:DwarvenGate
  Side                = Dwarves
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0
  BuildCost           = 1
  BuildTime           = 30.0
  VisionRange         = 160.0
  ShroudClearingRange = 160

  ArmorSet
    Conditions        = None
    Armor             = DefaultWallArmor
    DamageFX          = GateDamageFX
  End



    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood








    CampnessValue = CAMPNESS_WALL



    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_PlayCollapseSound
        ModelCondition = REQUIRED:RUBBLE Sound:BuildingSink
    End



    RadarPriority       = STRUCTURE
    KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE WALL_GATE MADE_OF_STONE BLOCKING_GATE IGNORE_FOR_VICTORY DONT_HIDE_IF_FOGGED NEVER_CULL_FOR_MP WALK_ON_TOP_OF_WALL


    CommandSet            = CastleGateCommandSe

  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
  End


  Body                = StructureBody ModuleTag_05
    MaxHealth         = 2500.0

    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  Behavior            = DestroyDie ModuleTag_07

  End


    Behavior = AIUpdateInterface ModuleTag_AIForSequentialScriptsToWork

    End


    Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
        ResetTimeInMilliseconds            = 4000
        OpenByDefault                    = No
        PercentOpenForPathing            = 50
        SoundOpeningGateLoop            = GateOpenStart
        SoundClosingGateLoop            = GateCloseStart
        SoundFinishedOpeningGate        = GateOpenEnd
        SoundFinishedClosingGate        = GateCloseEnd
        TimeBeforePlayingOpenSound        = 3000
        TimeBeforePlayingClosedSound    = 3000
    End

    Behavior                  = StructureCollapseUpdate ModuleTag_Collapse
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureMediumCollapse
        FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
        DestroyObjectWhenDone    = Yes
        CollapseHeight        = 126
    End

    Behavior = FakePathfindPortalBehaviour ModuleTag_FAKEPATHFIND
        AllowEnemies            = No
        AllowNonSkirmishAIUnits    = No
    End

    Behavior = AIGateUpdate ModuleTage_AIGateUpdate
        TriggerWidthX = 450.0
        TriggerWidthY = 225.0
    End



      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes
        BonusName        = WallBonus
        RefreshDelay    = 2000


    End


    GeometryIsSmall          = No


    Geometry              = CYLINDER
    GeometryMajorRadius   = 15.0
    GeometryHeight        = 100
    GeometryOffset        = X:0 Y:60 Z:0


    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius   = 15.0
    GeometryHeight        = 100
    GeometryOffset        = X:0 Y:-60 Z:0


    AdditionalGeometry    = BOX
    GeometryName        = "Closed"
    GeometryMajorRadius   = 16.0
    GeometryMinorRadius   = 115.0
    GeometryHeight        = 50


    AdditionalGeometry    = BOX
    GeometryName         = "OpenLeft"
    GeometryMajorRadius   = 16.0
    GeometryMinorRadius   = 40
    GeometryHeight        = 40
    GeometryOffset        = X:0 Y:-75  Z:0


    AdditionalGeometry    = BOX
    GeometryName          = "OpenRight"
    GeometryMajorRadius   = 16.0
    GeometryMinorRadius   = 40
    GeometryHeight        = 40
    GeometryOffset        = X:0 Y:75 Z:0


    Shadow                = SHADOW_VOLUME
    BuildCompletion     = PLACED_BY_PLAYER
End


Object DwarvenCastleFloor


    Draw = W3DFloorDraw ModuleTag_01
        ModelName = dwarfboden
        ForceToBack = Yes
    End




  DisplayName       = OBJECT:CastFloor
  Side              = Dwarves
  EditorSorting     = STRUCTURE


  ArmorSet
    Conditions      = None
    Armor           = NoArmor
    DamageFX        = None
  End





  KindOf            = STRUCTURE IMMOBILE NO_COLLIDE UNATTACKABLE INERT
  RadarPriority     = NOT_ON_RADAR

  Body              = ImmortalBody ModuleTag_03
    MaxHealth       = 2000.0
  End

  Behavior          = CastleMemberBehavior ModuleTag_CMB
  End




  Behavior          = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
      DestructionDelay  = 1000
  End

  Geometry              = BOX
  GeometryMajorRadius   = 0.8
  GeometryMinorRadius   = 0.8
  GeometryHeight        = 0.8
  GeometryIsSmall       = Yes
End



Object DwarvenWallElevator_R


    SelectPortrait = BRCastleWall

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = dbcasterev
    End

    WallBoundsMesh = P1
    RampMesh1 = P3


    ModelConditionState   = BASE_BUILD
      Model               = dbcasterev_a

      ParticleSysBone     = NONE BuildingContructDust
    End
    AnimationState          = BASE_BUILD
        Animation
            AnimationName = dbcasterev_a.dbcasterev_a
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 2.0 2.5
        End
    End

    AnimationState          = JUST_BUILT
        Animation
            AnimationName = dbcasterev_a.dbcasterev_a
            AnimationMode = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
    End

  End

  PlacementViewAngle  = 0


  DisplayName         = OBJECT:DwarvenWall
  Side                = Dwarves
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0

  BuildCost           = 1
  BuildTime           = 5.0
  VisionRange         = 160.0
  ShroudClearingRange = 160


  ArmorSet
    Armor = StructureArmor
  End






    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood







    CampnessValue = CAMPNESS_WALL



  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE MADE_OF_WOOD

  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
  End

  Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
  End

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0

    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  Behavior            = DestroyDie ModuleTag_07

  End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes
        BonusName        = WallBonus
        RefreshDelay    = 2000


    End

  Geometry              = BOX
  GeometryMajorRadius   = 55.2
  GeometryMinorRadius   = 55.6
  GeometryHeight        = 54.2
  GeometryIsSmall       = No

  AdditionalGeometry                = BOX
  GeometryMajorRadius               = 55.2
  GeometryMinorRadius               = 55.6
  GeometryHeight                    = 54.2
  GeometryName                      = Bookend

  GeometryContactPoint =    X:-50            Y:-40                Z:0 Grab
  GeometryContactPoint =    X:0                Y:-40                Z:40 Grab
  GeometryContactPoint =    X:50            Y:-40                Z:0 Grab
  GeometryContactPoint =    X:-50            Y:40                Z:0 Grab
  GeometryContactPoint =    X:0                Y:40                Z:40 Grab
  GeometryContactPoint =    X:50            Y:40                Z:0 Grab

  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End


Object DwarvenWallElevator_L


    SelectPortrait = BRCastleWall

  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    DefaultModelConditionState
      Model = dbcastelev
    End

    WallBoundsMesh = P1
    RampMesh1 = P3


    ModelConditionState   = BASE_BUILD
      Model               = dbcastelev_a

      ParticleSysBone     = NONE BuildingContructDust
    End
    AnimationState          = BASE_BUILD
        Animation
            AnimationName = dbcastelev_a.dbcastelev_a
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 2.0 2.5
        End
    End

    AnimationState          = JUST_BUILT
        Animation
            AnimationName = dbcastelev_a.dbcastelev_a
            AnimationMode = MANUAL
            AnimationBlendTime = 0
        End
        Flags = START_FRAME_FIRST
    End

  End

  PlacementViewAngle  = 0


  DisplayName         = OBJECT:DwarvenWall
  Side                = Dwarves
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0

  BuildCost           = 1
  BuildTime           = 5.0
  VisionRange         = 160.0
  ShroudClearingRange = 160


  ArmorSet
    Armor = StructureArmor
  End






    SoundOnDamaged        = BuildingLightDamageWood
    SoundOnReallyDamaged    = BuildingHeavyDamageWood







    CampnessValue = CAMPNESS_WALL



  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE IMMOBILE SCORE WALK_ON_TOP_OF_WALL CHUNK_VENDOR NOT_AUTOACQUIRABLE MADE_OF_WOOD

  Behavior = CastleMemberBehavior ModuleTag_CMB
        CountsForEvaCastleBreached = Yes
  End

  Behavior = SiegeDockingBehavior ModuleTag_SiegeDocking
  End

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0

    GrabObject = EntThrownBuildingRock
    GrabFX = FX_WallGrab
    GrabDamage = 490
    GrabOffset = X:16 Y:0
  End

  Behavior            = DestroyDie ModuleTag_07

  End

      Behavior = AttributeModifierAuraUpdate ModuleTag_WallBonus
        StartsActive    = Yes
        BonusName        = WallBonus
        RefreshDelay    = 2000


    End

  Geometry              = BOX
  GeometryMajorRadius   = 55.2
  GeometryMinorRadius   = 55.6
  GeometryHeight        = 54.2
  GeometryIsSmall       = No

  AdditionalGeometry                = BOX
  GeometryMajorRadius               = 55.2
  GeometryMinorRadius               = 55.6
  GeometryHeight                    = 54.2
  GeometryName                      = Bookend

  GeometryContactPoint =    X:-50            Y:-40                Z:0 Grab
  GeometryContactPoint =    X:0                Y:-40                Z:40 Grab
  GeometryContactPoint =    X:50            Y:-40                Z:0 Grab
  GeometryContactPoint =    X:-50            Y:40                Z:0 Grab
  GeometryContactPoint =    X:0                Y:40                Z:40 Grab
  GeometryContactPoint =    X:50            Y:40                Z:0 Grab

  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End



Object EreborMountainForCastle

    Draw = W3DScriptedModelDraw ModuleTag_01
      DefaultModelConditionState
        Model = ebberg
      End

       StaticSortLevelWhileFading = 2
       AlphaCameraFadeOuterRadius = 600
       AlphaCameraFadeInnerRadius = 200
       AlphaCameraAtInnerRadius = 10%
    End


    DisplayName      = OBJECT:mountainopen
    EditorSorting    = STRUCTURE
    Side             = Dwarves


    Behavior = CastleMemberBehavior ModuleTag_CMB
    End

	#include "..\..\..\includes\DwarvenRunesStructures.inc"

    KindOf                = IMMOBILE UNATTACKABLE INERT INERT_SHROUD_REVEALER NO_COLLIDE

    Geometry                        = BOX
    GeometryMajorRadius             = 228
    GeometryMinorRadius             = 166
    GeometryHeight                  = 380.0
    GeometryIsSmall                 = No
End




Object EreborDwarvenGate_Edain

    SelectPortrait = BPCFornostGate






  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    RandomTexture = stonewall_edain.tga  0 stonewall2.tga

    DefaultModelConditionState
      Model = FBGate2
    End

    ModelConditionState = SNOW
      Model   = FBGate2
      Texture = stonewall_edain.tga stonewall2.tga
    End





  End



     Draw = W3DScriptedModelDraw ModuleTag_Draw_Door
         OkToChangeModelColor  = Yes
         UseStandardModelNames = Yes
         DefaultModelConditionState
             Model = FBGate_Door_SKN
         End

         ModelConditionState  = DYING DOOR_1_OPENING
            Model         = FBGDoorOpen_D3
        End

        AnimationState = DYING DOOR_1_OPENING
              Animation                =    RubbleAnimation
                AnimationName        =    FBGDoorOpen_D3.FBGDoorOpen_D3
                AnimationMode        =    ONCE
              End
        End

        ModelConditionState  = DYING
            Model         = FBGate_Door_D3
        End

        AnimationState = DYING
              Animation                =    RubbleAnimation
                AnimationName        =    FBGate_Door_D3.FBGate_Door_D3
                AnimationMode        =    ONCE
              End
        End


        AnimationState = DOOR_1_OPENING
            Flags = START_FRAME_LAST
            StateName = Door_Open
            Animation                =    Death
                AnimationName        =    FBGate_Door_SKL.FBGate_Door_OP
                AnimationMode        =    ONCE
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Door_Close" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
            EndScript
        End
        TransitionState = TRANS_Closed_To_Open
            Animation = Open
                AnimationName    =    FBGate_Door_SKL.FBGate_Door_OPN
                AnimationMode    =    ONCE
            End
        End

        AnimationState = DOOR_1_CLOSING
            Flags = START_FRAME_LAST
            StateName = Door_Close
            Animation                =    Death
                AnimationName        =    FBGate_Door_SKL.FBGate_Door_CL
                AnimationMode        =    ONCE
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Door_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
            EndScript
        End
        TransitionState = TRANS_Open_To_Closed
            Animation = Open
                AnimationName    =    FBGate_Door_SKL.FBGate_Door_CLS
                AnimationMode    =    ONCE
            End
        End

        ModelConditionState  = DAMAGED
            Model         = FBGate_Door_D1
        End
        AnimationState = DAMAGED
        End

        ModelConditionState  = REALLYDAMAGED
            Model         = FBGate_Door_D2
        End

        AnimationState = REALLYDAMAGED
            EnteringStateFX    = FX_BuildingReallyDamaged
        End

         ModelConditionState  = COLLAPSING
            Model         = FBGate_Door_D2
        End

        AnimationState = COLLAPSING
              Animation                =    RubbleAnimation
                AnimationName        =    FBGate_Door_D3.FBGate_Door_D3
                AnimationMode        =    ONCE
              End

        End

     End


  DisplayName         = OBJECT:DwarvenGate
  Side                = Dwarves
  EditorSorting       = STRUCTURE
  ThreatLevel         = 1.0

  BuildCost           = 500
  BuildTime           = 15.0
  VisionRange         = 160.0
  ShroudClearingRange = 160

   CommandSet            = CastleGateCommandSet



      SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone

    UnitSpecificSounds
        UnderConstruction        = BuildingConstructionLoop

        UnderRepairFromRubble    = BuildingConstructionLoop
    End

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_PlayCollapseSound
        ModelCondition = REQUIRED:RUBBLE Sound:BuildingSink
    End



    RadarPriority       = NOT_ON_RADAR
    KindOf              = PRELOAD STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE SELECTABLE


    Body                        = ActiveBody ModuleTag_05
        MaxHealth                = 2500.0
        MaxHealthDamaged        = 1500.0
        MaxHealthReallyDamaged  = 700.0
    End

    ArmorSet
        Conditions        = None
        Armor             = FornostGates
        DamageFX          = GateDamageFX
    End

    Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
        ResetTimeInMilliseconds            = 2000
        RepelCollidingUnits                = No
        OpenByDefault                    = No
        PercentOpenForPathing            = 50
        SoundOpeningGateLoop            = GateOpenStart
        SoundClosingGateLoop            = GateCloseStart
        SoundFinishedOpeningGate        = GateOpenEnd
        SoundFinishedClosingGate        = GateCloseEnd
        TimeBeforePlayingOpenSound        = 9500
        TimeBeforePlayingClosedSound    = 9500
    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
    End

    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End


    Behavior = ObjectCreationUpgrade MakeTheGeom
        TriggeredBy      = Upgrade_MenFaction
        Delay            = 1000
        GrantUpgrade     = Upgrade_PlantShield
    End

    Behavior = GeometryUpgrade ModueTag_TowerGeom
        TriggeredBy      = Upgrade_PlantShield
        ShowGeometry     = Geom_Orig1 Geom_Orig2 Geom_Orig3 Bookend1 Bookend2
        HideGeometry     = DummyGeom
    End

    Geometry              = BOX
    GeometryMajorRadius   = 1.0
    GeometryMinorRadius   = 1.0
    GeometryHeight        = 1.0
    GeometryName          = DummyGeom
    GeometryActive         = Yes



    AdditionalGeometry    = BOX
    GeometryName          = Geom_Orig1
    GeometryMajorRadius   = 50.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 50.0
    GeometryActive        = No
    GeometryRotationAnchorOffset = X:0.0 Y:0.0



    Geometry              = BOX
    GeometryName          = Geom_Orig1
    GeometryMajorRadius   = 80.0
    GeometryMinorRadius   = 25.0
    GeometryHeight        = 90.0
    GeometryOffset        = X:26 Y:100 Z:0
    GeometryActive        = No


    AdditionalGeometry    = BOX
    GeometryName          = Geom_Orig2
    GeometryMajorRadius   = 80.0
    GeometryMinorRadius   = 25.0
    GeometryHeight        = 90.0
    GeometryActive        = No
    GeometryOffset        = X:26 Y:-100 Z:0




    AdditionalGeometry    = BOX
    GeometryName          = "Closed"
    GeometryMajorRadius   = 5.0
    GeometryMinorRadius   = 100.0
    GeometryHeight        = 85.0
    GeometryOffset        = X:-30 Y:0 Z:0


    AdditionalGeometry    = BOX
    GeometryName          = "OpenLeft"
    GeometryMajorRadius   = 50.0
    GeometryMinorRadius   = 5.0
    GeometryHeight        = 85
    GeometryOffset        = X:20 Y:95 Z:0


    AdditionalGeometry    = BOX
    GeometryName          = "OpenRight"
    GeometryMajorRadius   = 50.0
    GeometryMinorRadius   = 5.0
    GeometryHeight        = 85
    GeometryOffset        = X:20 Y:-95 Z:0

    GeometryIsSmall       = No

    Shadow                = SHADOW_VOLUME
    Scale = 0.9
End



Object EreborDwarvenWall1_Edain








  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    RandomTexture = stonewall_edain.tga  0 stonewall2.tga

    DefaultModelConditionState
      Model = ForBWall1
    End

    ModelConditionState = SNOW
      Model   = ForBWall1
      Texture = stonewall_edain.tga stonewall2.tga
    End

    WallBoundsMesh = P1



  End


  DisplayName         = OBJECT:DwarvenWall
  Side                = Dwarves
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0

  BuildCost           = 500
  BuildTime           = 15.0
  VisionRange         = 160.0
  ShroudClearingRange = 160





      SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone

    UnitSpecificSounds
        UnderConstruction        = WallConstructionLoop

        UnderRepairFromRubble    = WallConstructionLoop
    End



    RadarPriority       = NOT_ON_RADAR
    KindOf              = PRELOAD STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE SELECTABLE  IGNORED_IN_GUI WALK_ON_TOP_OF_WALL  WALL_SEGMENT IGNORED_IN_GUI

    Body                        = ActiveBody ModuleTag_05
        MaxHealth                = 3500.0
        MaxHealthDamaged        = 1700.0
        MaxHealthReallyDamaged  = 800.0
    End

    ArmorSet
        Conditions        = None
        Armor             = FornostWalls
        DamageFX          = GateDamageFX
    End

    Behavior = ProductionUpdate ModuleTag_06

    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
    End

    Behavior                  = StructureCollapseUpdate ModuleTag_08
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureMediumCollapse
        FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
        DestroyObjectWhenDone    = Yes
        CollapseHeight            = 155
    End


    Behavior = ObjectCreationUpgrade MakeTheGeom
        TriggeredBy      = Upgrade_MenFaction
        Delay            = 1000
        GrantUpgrade     = Upgrade_PlantShield
    End

    Behavior = GeometryUpgrade ModueTag_TowerGeom
        TriggeredBy      = Upgrade_PlantShield
        ShowGeometry     = Geom_Orig1 Geom_Orig2 Geom_Orig3 Bookend1 Bookend2
        HideGeometry     = DummyGeom
    End

    Geometry              = BOX
    GeometryMajorRadius   = 1.0
    GeometryMinorRadius   = 1.0
    GeometryHeight        = 1.0
    GeometryName          = DummyGeom
    GeometryActive         = Yes



    AdditionalGeometry    = BOX
    GeometryName          = Geom_Orig1
    GeometryMajorRadius   = 70.0
    GeometryMinorRadius   = 70.0
    GeometryHeight        = 50.0
    GeometryActive        = No
    GeometryRotationAnchorOffset = X:0.0 Y:0.0

    GeometryIsSmall       = No

    Shadow                = SHADOW_VOLUME

End





Object EreborDwarvenWall2_Edain








  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    RandomTexture = stonewall_edain.tga  0 stonewall2.tga

    DefaultModelConditionState
      Model = ForBWall2
    End

    ModelConditionState = SNOW
      Model   = ForBWall2
      Texture = stonewall_edain.tga stonewall2.tga
    End

    WallBoundsMesh = P1



  End


  DisplayName         = OBJECT:DwarvenWall
  Side                = Dwarves
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0

  BuildCost           = 500
  BuildTime           = 15.0
  VisionRange         = 160.0
  ShroudClearingRange = 160





      SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone

    UnitSpecificSounds
        UnderConstruction        = WallConstructionLoop

        UnderRepairFromRubble    = WallConstructionLoop
    End



    RadarPriority       = NOT_ON_RADAR
    KindOf              = PRELOAD STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE SELECTABLE  IGNORED_IN_GUI WALK_ON_TOP_OF_WALL  WALL_SEGMENT

    Body                        = ActiveBody ModuleTag_05
        MaxHealth                = 3500.0
        MaxHealthDamaged        = 1700.0
        MaxHealthReallyDamaged  = 800.0
    End

    ArmorSet
        Conditions        = None
        Armor             = FornostWalls
        DamageFX          = GateDamageFX
    End

    Behavior = ProductionUpdate ModuleTag_06

    End

    Behavior                  = StructureCollapseUpdate ModuleTag_08
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureMediumCollapse
        FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
        DestroyObjectWhenDone    = Yes
        CollapseHeight            = 155
    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
    End


    Behavior = ObjectCreationUpgrade MakeTheGeom
        TriggeredBy      = Upgrade_MenFaction
        Delay            = 1000
        GrantUpgrade     = Upgrade_PlantShield
    End

    Behavior = GeometryUpgrade ModueTag_TowerGeom
        TriggeredBy      = Upgrade_PlantShield
        ShowGeometry     = Geom_Orig1 Geom_Orig2 Geom_Orig3 Bookend1 Bookend2
        HideGeometry     = DummyGeom
    End

    Geometry              = BOX
    GeometryMajorRadius   = 1.0
    GeometryMinorRadius   = 1.0
    GeometryHeight        = 1.0
    GeometryName          = DummyGeom
    GeometryActive         = Yes



    AdditionalGeometry    = BOX
    GeometryName          = Geom_Orig1
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 50.0
    GeometryActive        = No
    GeometryRotationAnchorOffset = X:0.0 Y:0.0

    GeometryIsSmall       = No

    Shadow                = SHADOW_VOLUME

End







Object EreborDwarvenWall3_Edain








  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    RandomTexture = stonewall_edain.tga  0 stonewall2.tga

    DefaultModelConditionState
      Model = ForBWall3
    End

    ModelConditionState = SNOW
      Model   = ForBWall3
      Texture = stonewall_edain.tga stonewall2.tga
    End

    WallBoundsMesh = P1



  End


  DisplayName         = OBJECT:DwarvenWall
  Side                = Dwarves
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0

  BuildCost           = 500
  BuildTime           = 15.0
  VisionRange         = 160.0
  ShroudClearingRange = 160





      SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone

    UnitSpecificSounds
        UnderConstruction        = WallConstructionLoop

        UnderRepairFromRubble    = WallConstructionLoop
    End



    RadarPriority       = NOT_ON_RADAR
    KindOf              = PRELOAD STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE SELECTABLE   IGNORED_IN_GUI WALK_ON_TOP_OF_WALL  WALL_SEGMENT

    Body                        = ActiveBody ModuleTag_05
        MaxHealth                = 3500.0
        MaxHealthDamaged        = 1700.0
        MaxHealthReallyDamaged  = 800.0
    End

    ArmorSet
        Conditions        = None
        Armor             = FornostWalls
        DamageFX          = GateDamageFX
    End

    Behavior = ProductionUpdate ModuleTag_06

    End

    Behavior                  = StructureCollapseUpdate ModuleTag_08
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureMediumCollapse
        FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
        DestroyObjectWhenDone    = Yes
        CollapseHeight            = 155
    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
    End


    Behavior = ObjectCreationUpgrade MakeTheGeom
        TriggeredBy      = Upgrade_MenFaction
        Delay            = 1000
        GrantUpgrade     = Upgrade_PlantShield
    End

    Behavior = GeometryUpgrade ModueTag_TowerGeom
        TriggeredBy      = Upgrade_PlantShield
        ShowGeometry     = Geom_Orig1 Geom_Orig2 Geom_Orig3 Bookend1 Bookend2
        HideGeometry     = DummyGeom
    End

    Geometry              = BOX
    GeometryMajorRadius   = 1.0
    GeometryMinorRadius   = 1.0
    GeometryHeight        = 1.0
    GeometryName          = DummyGeom
    GeometryActive         = Yes



    AdditionalGeometry    = BOX
    GeometryName          = Geom_Orig1
    GeometryMajorRadius   = 50.0
    GeometryMinorRadius   = 50.0
    GeometryHeight        = 50.0
    GeometryActive        = No
    GeometryRotationAnchorOffset = X:0.0 Y:0.0

    GeometryIsSmall       = No

    Shadow                = SHADOW_VOLUME

End









Object EreborDwarvenWall4_Edain








  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    RandomTexture = stonewall_edain.tga  0 stonewall2.tga

    DefaultModelConditionState
      Model = ForBWall4
    End

    ModelConditionState = SNOW
      Model   = ForBWall4
      Texture = stonewall_edain.tga stonewall2.tga
    End

    WallBoundsMesh = P1



  End


  DisplayName         = OBJECT:DwarvenWall
  Side                = Dwarves
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0

  BuildCost           = 500
  BuildTime           = 15.0
  VisionRange         = 160.0
  ShroudClearingRange = 160





      SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone

    UnitSpecificSounds
        UnderConstruction        = WallConstructionLoop

        UnderRepairFromRubble    = WallConstructionLoop
    End



    RadarPriority       = NOT_ON_RADAR
    KindOf              = PRELOAD STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE SELECTABLE IGNORED_IN_GUI WALK_ON_TOP_OF_WALL  WALL_SEGMENT

    Body                        = ActiveBody ModuleTag_05
        MaxHealth                = 3500.0
        MaxHealthDamaged        = 1700.0
        MaxHealthReallyDamaged  = 800.0
    End

    ArmorSet
        Conditions        = None
        Armor             = FornostWalls
        DamageFX          = GateDamageFX
    End

    Behavior = ProductionUpdate ModuleTag_06

    End

    Behavior                  = StructureCollapseUpdate ModuleTag_08
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureMediumCollapse
        FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
        DestroyObjectWhenDone    = Yes
        CollapseHeight            = 155
    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
    End


    Behavior = ObjectCreationUpgrade MakeTheGeom
        TriggeredBy      = Upgrade_MenFaction
        Delay            = 1000
        GrantUpgrade     = Upgrade_PlantShield
    End

    Behavior = GeometryUpgrade ModueTag_TowerGeom
        TriggeredBy      = Upgrade_PlantShield
        ShowGeometry     = Geom_Orig1 Geom_Orig2 Geom_Orig3 Bookend1 Bookend2
        HideGeometry     = DummyGeom
    End

    Geometry              = BOX
    GeometryMajorRadius   = 1.0
    GeometryMinorRadius   = 1.0
    GeometryHeight        = 1.0
    GeometryName          = DummyGeom
    GeometryActive         = Yes



    AdditionalGeometry    = BOX
    GeometryName          = Geom_Orig1
    GeometryMajorRadius   = 70.0
    GeometryMinorRadius   = 70.0
    GeometryHeight        = 50.0
    GeometryActive        = No
    GeometryRotationAnchorOffset = X:0.0 Y:0.0

    GeometryIsSmall       = No

    Shadow                = SHADOW_VOLUME

End







Object EreborDwarvenWall5_Edain








  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    RandomTexture = stonewall_edain.tga  0 stonewall2.tga

    DefaultModelConditionState
      Model = ForBWall5
    End





  End


  DisplayName         = OBJECT:DwarvenWall
  Side                = Dwarves
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0

  BuildCost           = 500
  BuildTime           = 15.0
  VisionRange         = 160.0
  ShroudClearingRange = 160





      SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone

    UnitSpecificSounds
        UnderConstruction        = WallConstructionLoop

        UnderRepairFromRubble    = WallConstructionLoop
    End



    RadarPriority       = NOT_ON_RADAR
    KindOf              = PRELOAD STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE SELECTABLE  IGNORED_IN_GUI WALL_SEGMENT SCALEABLE_WALL

    Body                        = ActiveBody ModuleTag_05
        MaxHealth                = 3500.0
        MaxHealthDamaged        = 1700.0
        MaxHealthReallyDamaged  = 800.0
    End

    ArmorSet
        Conditions        = None
        Armor             = FornostWalls
        DamageFX          = GateDamageFX
    End

    Behavior = ProductionUpdate ModuleTag_06

    End

    Behavior                  = StructureCollapseUpdate ModuleTag_08
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureMediumCollapse
        FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
        DestroyObjectWhenDone    = Yes
        CollapseHeight            = 155
    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
    End

    AttackContactPoint = X:-24 Y:-24 Z:92

    Geometry              = BOX
    GeometryMajorRadius   = 10.0
    GeometryMinorRadius   = 70.0
    GeometryHeight        = 50.0

    GeometryRotationAnchorOffset = X:0.0 Y:0.0


    GeometryIsSmall       = No

    Shadow                = SHADOW_VOLUME

End





Object EreborDwarvenPosternGate_Edain








  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    RandomTexture = stonewall_edain.tga  0 stonewall2.tga

        ExtraPublicBone = Post01
        ExtraPublicBone = Post02
        ExtraPublicBone = Post03
        ExtraPublicBone = Post04

    DefaultModelConditionState
      Model = ForBWall5_PG
    End





  End

  Draw = W3DScriptedModelDraw ModuleTag_WallDraw


        AffectedByStealth        = No
        OkToChangeModelColor  = Yes
        UseStandardModelNames = Yes

        RandomTexture = stonewall_edain.tga  0 stonewall2.tga

        DefaultModelConditionState
            Model = ForBWall5
        End

    End





  DisplayName         = OBJECT:DwarvenGatePosternGate
  DisplayNameInvisibleForEnemy         = OBJECT:DwarvenWall
  Side                = Dwarves
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0

  BuildCost           = 500
  BuildTime           = 15.0
  VisionRange         = 160.0
  ShroudClearingRange = 160





      SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone

    UnitSpecificSounds
        UnderConstruction        = WallConstructionLoop

        UnderRepairFromRubble    = WallConstructionLoop
    End



    RadarPriority       = NOT_ON_RADAR
    KindOf              = PRELOAD STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE SELECTABLE  WALL_HUB WALL_SEGMENT SCALEABLE_WALL

    Body                        = ActiveBody ModuleTag_05
        MaxHealth                = 2500.0
        MaxHealthDamaged        = 1500.0
        MaxHealthReallyDamaged  = 750.0
    End

    ArmorSet
        Conditions        = None
        Armor             = FornostWalls
        DamageFX          = GateDamageFX
    End

    Behavior = ProductionUpdate ModuleTag_06

    End

    Behavior = DynamicPortalBehaviour PosternGatePortal
        ActivationDelaySeconds    = 0.0
        GenerateNow                = Yes

        ObjectFilter    = POSTERNGATE_ALLOWABLE_OBJECTFILTER
        BonePrefix        = Post
        NumberOfBones    = 4
        WayPoint        = Index:0    Type:Walk
        WayPoint        = Index:1    Type:Walk
        WayPoint        = Index:2    Type:Walk
        WayPoint        = Index:3    Type:Walk
        WayPoint        = Index:2    Type:Walk
        WayPoint        = Index:1    Type:Walk
        Link            = From:0 Via:4 Via:5 To:3
        Link            = From:3 Via:1 Via:2 To:0
    End

    Behavior                  = StructureCollapseUpdate ModuleTag_08
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureMediumCollapse
        FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
        DestroyObjectWhenDone    = Yes
        CollapseHeight            = 155
    End


    Behavior = CastleMemberBehavior ModuleTag_CMB
    End



    AttackContactPoint = X:-24 Y:-24 Z:92

    Geometry              = BOX
    GeometryMajorRadius   = 10.0
    GeometryMinorRadius   = 70.0
    GeometryHeight        = 50.0

    GeometryRotationAnchorOffset = X:0.0 Y:0.0


    GeometryIsSmall       = No

    Shadow                = SHADOW_VOLUME

End




Object EreborDwarvenRamp1_Edain








  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    RandomTexture = stonewall_edain.tga  0 stonewall2.tga

    DefaultModelConditionState
      Model = ForBRamp1
    End

    ModelConditionState = SNOW
      Model   = ForBRamp1
      Texture = stonewall_edain.tga stonewall2.tga
    End

    WallBoundsMesh = P1
    RampMesh1 = P2


  End


  DisplayName         = OBJECT:DwarvenWall
  Side                = Dwarves
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0

  BuildCost           = 500
  BuildTime           = 15.0
  VisionRange         = 160.0
  ShroudClearingRange = 160





      SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone

    UnitSpecificSounds
        UnderConstruction        = WallConstructionLoop

        UnderRepairFromRubble    = WallConstructionLoop
    End



    RadarPriority       = NOT_ON_RADAR
    KindOf              = PRELOAD STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE SELECTABLE  IGNORED_IN_GUI WALK_ON_TOP_OF_WALL  WALL_SEGMENT

    Body                        = ActiveBody ModuleTag_05
        MaxHealth                = 3500.0
        MaxHealthDamaged        = 1700.0
        MaxHealthReallyDamaged  = 800.0
    End

    ArmorSet
        Conditions        = None
        Armor             = FornostWalls
        DamageFX          = GateDamageFX
    End

    Behavior = ProductionUpdate ModuleTag_06

    End

    Behavior                  = StructureCollapseUpdate ModuleTag_08
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureMediumCollapse
        FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
        DestroyObjectWhenDone    = Yes
        CollapseHeight            = 155
    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
    End

    Behavior = ObjectCreationUpgrade MakeTheGeom
        TriggeredBy      = Upgrade_MenFaction
        Delay            = 1000
        GrantUpgrade     = Upgrade_PlantShield
    End

    Behavior = GeometryUpgrade ModueTag_TowerGeom
        TriggeredBy      = Upgrade_PlantShield
        ShowGeometry     = Geom_Orig1 Geom_Orig2 Geom_Orig3 Bookend1 Bookend2
        HideGeometry     = DummyGeom
    End

    Geometry              = BOX
    GeometryMajorRadius   = 1.0
    GeometryMinorRadius   = 1.0
    GeometryHeight        = 1.0
    GeometryName          = DummyGeom
    GeometryActive         = Yes



    AdditionalGeometry    = BOX
    GeometryName          = Geom_Orig1
    GeometryMajorRadius   = 40.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 50.0
    GeometryActive        = No
    GeometryRotationAnchorOffset = X:0.0 Y:0.0


    GeometryIsSmall       = No

    Shadow                = SHADOW_VOLUME

End






Object EreborDwarvenRamp2_Edain








  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes

    RandomTexture = stonewall_edain.tga  0 stonewall2.tga

    DefaultModelConditionState
      Model = ForBRamp2
    End

    ModelConditionState = SNOW
      Model   = ForBRamp2
      Texture = stonewall_edain.tga stonewall2.tga
    End

    WallBoundsMesh = P1
    RampMesh1 = P2


  End


  DisplayName         = OBJECT:DwarvenWall
  Side                = Dwarves
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0

  BuildCost           = 500
  BuildTime           = 15.0
  VisionRange         = 160.0
  ShroudClearingRange = 160





      SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone

    UnitSpecificSounds
        UnderConstruction        = WallConstructionLoop

        UnderRepairFromRubble    = WallConstructionLoop
    End



    RadarPriority       = NOT_ON_RADAR
    KindOf              = PRELOAD STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE SELECTABLE  IGNORED_IN_GUI WALK_ON_TOP_OF_WALL  WALL_SEGMENT

    Body                        = ActiveBody ModuleTag_05
        MaxHealth                = 3500.0
        MaxHealthDamaged        = 1700.0
        MaxHealthReallyDamaged  = 800.0
    End

    ArmorSet
        Conditions        = None
        Armor             = FornostWalls
        DamageFX          = GateDamageFX
    End

    Behavior = ProductionUpdate ModuleTag_06

    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
    End

    Behavior                  = StructureCollapseUpdate ModuleTag_08
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureMediumCollapse
        FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
        DestroyObjectWhenDone    = Yes
        CollapseHeight            = 155
    End


    Behavior = ObjectCreationUpgrade MakeTheGeom
        TriggeredBy      = Upgrade_MenFaction
        Delay            = 1000
        GrantUpgrade     = Upgrade_PlantShield
    End

    Behavior = GeometryUpgrade ModueTag_TowerGeom
        TriggeredBy      = Upgrade_PlantShield
        ShowGeometry     = Geom_Orig1 Geom_Orig2 Geom_Orig3 Bookend1 Bookend2
        HideGeometry     = DummyGeom
    End

    Geometry              = BOX
    GeometryMajorRadius   = 1.0
    GeometryMinorRadius   = 1.0
    GeometryHeight        = 1.0
    GeometryName          = DummyGeom
    GeometryActive         = Yes



    AdditionalGeometry    = BOX
    GeometryName          = Geom_Orig1
    GeometryMajorRadius   = 50.0
    GeometryMinorRadius   = 40.0
    GeometryHeight        = 50.0
    GeometryActive        = No
    GeometryRotationAnchorOffset = X:0.0 Y:0.0

    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME

End


Object EreborDwarvenSuperWeapon_Edain

    SelectPortrait = BPCSuperweapon






  Draw = W3DScriptedModelDraw ModuleTag_Draw
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes


    DefaultModelConditionState
      Model = ForBSuper
    End

    IdleAnimationState
    End


    ModelConditionState  = DAMAGED
      Model         = ForBSuper_D1
        ParticleSysBone FireSmall01 FireBuildingLarge
        ParticleSysBone FireSmall02 FireBuildingMedium
        ParticleSysBone FireSmall03 FireBuildingMedium
        ParticleSysBone FireSmall04 FireBuildingMedium
        ParticleSysBone FireSmall05 SmokeBuildingLarge
    End
    AnimationState = DAMAGED
    EnteringStateFX    = FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = ForBSuper_D2
        ParticleSysBone FireSmall01 FireBuildingLarge
        ParticleSysBone FireSmall02 FireBuildingLarge
        ParticleSysBone FireSmall03 FireBuildingMedium
        ParticleSysBone FireSmall04 FireBuildingMedium
        ParticleSysBone FireSmall05 SmokeBuildingLarge

    End
    AnimationState = REALLYDAMAGED
    EnteringStateFX    = FX_BuildingReallyDamaged
      Animation                =    RubbleAnimation
            AnimationName        =    ForBSuper_D2.ForBSuper_D2
            AnimationMode        =    ONCE
        End
    End

    ModelConditionState  = RUBBLE
      Model         = ForBSuper_D3
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = RUBBLE
      Animation                =    RubbleAnimation
            AnimationName        =    ForBSuper_D3.ForBSuper_D3
            AnimationMode        =    ONCE
        End
    End

    ModelConditionState  = POST_RUBBLE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End


    ModelConditionState = USER_1
        Model = ForBSuper
    End

    AnimationState = USER_1
        StateName                =   STATE_Idle
        Animation = IdleA
            AnimationName        =    ForBSuper.ForBSuper
            AnimationMode        =    ONCE
        End
        FXEvent    = Frame:9 Name:FX_SuperWeaponAttack
    End
  End





  Draw = W3DScriptedModelDraw ModuleTag_Draw_Weapon
    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes


    DefaultModelConditionState
      Model = ForBSuper2_SKN
    End

    IdleAnimationState
        Animation = IdleA
            AnimationName        =    ForBSuper2_SKL.ForBSuper2_IDLA
            AnimationMode        =    ONCE
        End
    End


    ModelConditionState  = DAMAGED
      Model         = ForBSuper2_SKND
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = ForBSuper2_SKND
    End

    ModelConditionState  = RUBBLE
      Model         = None
    End

    AnimationState = RUBBLE
    End

    ModelConditionState  = POST_RUBBLE
        Model         = None
    End

    ModelConditionState  = POST_COLLAPSE
         Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End






    AnimationState = USER_1
        StateName                =   STATE_Idle
        Animation = IdleA
            AnimationName        =    ForBSuper2_SKL.ForBSuper2_ATKA
            AnimationMode        =    ONCE
        End
        FXEvent    = Frame:9 Name:FX_SuperWeaponAttack
    End

  End


  DisplayName         = OBJECT:FornostSuperWeapon
  Side                = Dwarves
  EditorSorting       = STRUCTURE
  ThreatLevel = 1.0

  BuildCost           = 500
  BuildTime           = 15.0
  VisionRange         = 160.0
  ShroudClearingRange = 160

  CommandSet          = EmptyCommandSet



      SoundOnDamaged            = BuildingLightDamageStone
    SoundOnReallyDamaged    = BuildingHeavyDamageStone

    UnitSpecificSounds
        UnderConstruction        = BuildingConstructionLoop

        UnderRepairFromRubble    = BuildingConstructionLoop
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:EarthHammerImpactMS        Animation:ForBSuper2_SKL.ForBSuper2_ATKA    Frames:8
        AnimationSound = Sound:EarthHammerClickStart    Animation:ForBSuper2_SKL.ForBSuper2_ATKA    Frames:45
        AnimationSound = Sound:EarthHammerRelease        Animation:ForBSuper2_SKL.ForBSuper2_ATKA    Frames:0
        AnimationSound = Sound:EarthHammerWinchUp        Animation:ForBSuper2_SKL.ForBSuper2_ATKA    Frames:70
    End



    RadarPriority       = NOT_ON_RADAR
    KindOf              = PRELOAD STRUCTURE IMMOBILE CHUNK_VENDOR  NOT_AUTOACQUIRABLE SELECTABLE

    Body                        = ActiveBody ModuleTag_05
        MaxHealth                = 5000.0
        MaxHealthDamaged        = 2500.0
        MaxHealthReallyDamaged  = 1200.0
    End

    ArmorSet
        Conditions        = None
        Armor            = StructureArmor
    End

    Behavior = ProductionUpdate ModuleTag_06

    End

    Behavior                  = StructureCollapseUpdate ModuleTag_08
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureMediumCollapse
        FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
        DestroyObjectWhenDone    = Yes
        CollapseHeight            = 155
    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
    End

	#include "..\..\..\includes\DwarvenRunesStructures.inc"
	
    AttackContactPoint = X:-24 Y:-24 Z:92

    Geometry              = BOX
    GeometryMajorRadius   = 100.0
    GeometryMinorRadius   = 25.0
    GeometryHeight        = 160.0
    GeometryOffset          = X:-50.0 Y:0 Z:0

    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 15.0
    GeometryMinorRadius   = 32.5
    GeometryHeight        = 145.0
    GeometryOffset          = X:-3.3 Y:60 Z:0

    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 15.0
    GeometryMinorRadius   = 32.5
    GeometryHeight        = 145.0
    GeometryOffset          = X:-3.3 Y:-60 Z:0

    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
End


