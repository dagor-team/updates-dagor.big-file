


Object DwarvenThalZitadelle

   SelectPortrait = BRCenterThal



  Draw = W3DScriptedModelDraw ModuleTag_Draw

    ExtraPublicBone = ARROW_01
    ExtraPublicBone = ARROW_02
    ExtraPublicBone = ARROW_03
    ExtraPublicBone = ARROW_04
    ExtraPublicBone = ARROW_05
    ExtraPublicBone = ARROW_06
    ExtraPublicBone = ARROW_07
    ExtraPublicBone = ARROW_08
    ExtraPublicBone = FXBONE01
    ExtraPublicBone = FXBONE02

    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode    = Yes

    DefaultModelConditionState
        Model = dbthalmark_cen
        WeaponLaunchBone = PRIMARY ARROW_
    End


    IdleAnimationState
        StateName                =   STATE_Idle
        Animation = IdleA
            AnimationName        =    NBOutpost_SKL.NBOutpost_IDLA
            AnimationMode        =    ONCE
            AnimationPriority        =    30
        End
    End

        ModelConditionState = SNOW AWAITING_CONSTRUCTION
            Model   = dbthalmark_cena
            Texture = dbdale01.tga dbdale01_snow.tga
            Texture = dbdale02.tga dbdale02_snow.tga
            Texture = dbdale03.tga dbdale03_snow.tga
            Texture = GBMarketPlace.tga GBMarketPlace_snow.tga
        End

        ModelConditionState   = AWAITING_CONSTRUCTION
            Model               = dbthalmark_cena
        End
        AnimationState        = AWAITING_CONSTRUCTION
            Animation           =  dbthalmark_cena
                AnimationName     =  dbthalmark_cena.dbthalmark_cena
                AnimationMode     = MANUAL
                AnimationBlendTime = 0
            End
            Flags                  = START_FRAME_FIRST
        End

        ModelConditionState = SNOW ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Model    = dbthalmark_cena
            ParticleSysBone   = NONE BuildingContructDust FollowBone:Yes
            Texture = dbdale01.tga dbdale01_snow.tga
            Texture = dbdale02.tga dbdale02_snow.tga
            Texture = dbdale03.tga dbdale03_snow.tga
            Texture = GBMarketPlace.tga GBMarketPlace_snow.tga
        End

        ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Model             = dbthalmark_cena
            ParticleSysBone   = NONE BuildingContructDust FollowBone:Yes
        End

        AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Animation           = dbthalmark_cena
                AnimationName     = dbthalmark_cena.dbthalmark_cena
                AnimationMode     = MANUAL
                AnimationBlendTime = 0
            End
            Flags                  = START_FRAME_FIRST
            StateName              = BeingConstructed
            BeginScript
                CurDrawablePlaySound("GondorBarracksBeginConstruction")
            EndScript
        End


    ModelConditionState  = DAMAGED
      Model         = dbthalmark_cen
      Texture = dbdale01.tga dbdale01_d.tga
      Texture = dbdale02.tga dbdale02_d.tga
      Texture = dbdale03.tga dbdale03_d.tga
        ParticleSysBone FireSmall01 FireBuildingLarge
        ParticleSysBone FireSmall02 FireBuildingMedium
        ParticleSysBone FireSmall03 FireBuildingMedium
        ParticleSysBone FireSmall04 FireBuildingMedium
        ParticleSysBone FireSmall05 SmokeBuildingLarge
    End

    AnimationState = DAMAGED
    EnteringStateFX    = FX_BuildingDamaged
    End

    ModelConditionState  = REALLYDAMAGED
      Model         = dbthalmark_cen
      Texture = dbdale01.tga dbdale01_d.tga
      Texture = dbdale02.tga dbdale02_d.tga
      Texture = dbdale03.tga dbdale03_d.tga
        ParticleSysBone FireSmall01 FireBuildingLarge
        ParticleSysBone FireSmall02 FireBuildingLarge
        ParticleSysBone FireSmall03 FireBuildingLarge
        ParticleSysBone FireSmall04 FireBuildingMedium
        ParticleSysBone FireSmall05 SmokeBuildingLarge
    End

    AnimationState = REALLYDAMAGED
    EnteringStateFX    = FX_BuildingReallyDamaged
    End

    ModelConditionState  = RUBBLE
      Model   = dbthalmark_cen
      Texture = dbdale01.tga dbdale01_d.tga
      Texture = dbdale02.tga dbdale02_d.tga
      Texture = dbdale03.tga dbdale03_d.tga
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = RUBBLE
    End

    ModelConditionState  = POST_RUBBLE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End
    ModelConditionState  = POST_COLLAPSE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState = SNOW
        Model    = dbthalmark_cen
        Texture = dbdale01.tga dbdale01_snow.tga
        Texture = dbdale02.tga dbdale02_snow.tga
        Texture = dbdale03.tga dbdale03_snow.tga
        Texture = GBMarketPlace.tga GBMarketPlace_snow.tga
    End
  End


  Draw = W3DScriptedModelDraw ModuleTag_DrawBarracks

    ExtraPublicBone = ARROW_01
    ExtraPublicBone = ARROW_02
    ExtraPublicBone = ARROW_03
    ExtraPublicBone = ARROW_04
    ExtraPublicBone = ARROW_05
    ExtraPublicBone = ARROW_06
    ExtraPublicBone = ARROW_07
    ExtraPublicBone = ARROW_08
    ExtraPublicBone = FXBONE01
    ExtraPublicBone = FXBONE02

    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode    = Yes

        DefaultModelConditionState
            Model = NONE
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_1 USER_1 DAMAGED
            Model           = dbthal_bara
            Texture = dbdale01.tga dbdale01_d.tga
            Texture = dbdale02.tga dbdale02_d.tga
            Texture = dbdale03.tga dbdale03_d.tga
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_1 USER_1 REALLYDAMAGED
            Model           = dbthal_bara
            Texture = dbdale01.tga dbdale01_d.tga
            Texture = dbdale02.tga dbdale02_d.tga
            Texture = dbdale03.tga dbdale03_d.tga
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_1 USER_1
            Model           = dbthal_bara
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_1 USER_1 SNOW
            Model           = dbthal_bara
            Texture = dbdale01.tga dbdale01_snow.tga
            Texture = dbdale02.tga dbdale02_snow.tga
            Texture = dbdale03.tga dbdale03_snow.tga
        End

        AnimationState = FORTRESS_IMPROVEMENT_1 USER_1
            Animation                    = RiseUp
                AnimationName            = dbthal_bara.dbthal_bara
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 2 2
            End
            Flags = START_FRAME_FIRST
            BeginScript
                CurDrawablePlaySound("BuildingTopple")
            EndScript
        End

    ModelConditionState  = FORTRESS_IMPROVEMENT_1 RUBBLE
      Model         = dbthal_barr
            Texture = dbdale01.tga dbdale01_d.tga
            Texture = dbdale02.tga dbdale02_d.tga
            Texture = dbdale03.tga dbdale03_d.tga
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = FORTRESS_IMPROVEMENT_1 RUBBLE
      Animation                =    RubbleAnimation
            AnimationName        =    dbthal_barr.dbthal_barr
            AnimationMode        =    ONCE
        End
        EnteringStateFX    = FX_StructureMediumCollapse
    End

    ModelConditionState  = FORTRESS_IMPROVEMENT_1 POST_RUBBLE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = FORTRESS_IMPROVEMENT_1 POST_COLLAPSE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End

        ModelConditionState = FORTRESS_IMPROVEMENT_1
            Model = dbthal_barr
        End

        AnimationState = FORTRESS_IMPROVEMENT_1
            Animation = IdleA
                AnimationName        = dbthal_barr.dbthal_barr
                AnimationMode        = ONCE
                AnimationPriority    = 30
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_1 SNOW
            Model           = dbthal_barr
            Texture = dbdale01.tga dbdale01_snow.tga
            Texture = dbdale02.tga dbdale02_snow.tga
            Texture = dbdale03.tga dbdale03_snow.tga
        End
  End


  Draw = W3DScriptedModelDraw ModuleTag_DrawFlat

    ExtraPublicBone = ARROW_01
    ExtraPublicBone = ARROW_02
    ExtraPublicBone = ARROW_03
    ExtraPublicBone = ARROW_04
    ExtraPublicBone = ARROW_05
    ExtraPublicBone = ARROW_06
    ExtraPublicBone = ARROW_07
    ExtraPublicBone = ARROW_08
    ExtraPublicBone = FXBONE01
    ExtraPublicBone = FXBONE02

    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode    = Yes

        DefaultModelConditionState
            Model = NONE
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_2 USER_2 DAMAGED
            Model           = dbthal_flaa
            Texture = dbdale01.tga dbdale01_d.tga
            Texture = dbdale02.tga dbdale02_d.tga
            Texture = dbdale03.tga dbdale03_d.tga
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_2 USER_2 REALLYDAMAGED
            Model           = dbthal_flaa
            Texture = dbdale01.tga dbdale01_d.tga
            Texture = dbdale02.tga dbdale02_d.tga
            Texture = dbdale03.tga dbdale03_d.tga
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_2 USER_2
            Model           = dbthal_flaa
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_2 USER_2 SNOW
            Model           = dbthal_flaa
            Texture = dbdale01.tga dbdale01_snow.tga
            Texture = dbdale02.tga dbdale02_snow.tga
            Texture = dbdale03.tga dbdale03_snow.tga
        End

        AnimationState = FORTRESS_IMPROVEMENT_2 USER_2
            Animation                    = RiseUp
                AnimationName            = dbthal_flaa.dbthal_flaa
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 2 2
            End
            Flags = START_FRAME_FIRST
            BeginScript
                CurDrawablePlaySound("BuildingTopple")
            EndScript
        End

    ModelConditionState  = FORTRESS_IMPROVEMENT_2 RUBBLE
      Model         = dbthal_flat
            Texture = dbdale01.tga dbdale01_d.tga
            Texture = dbdale02.tga dbdale02_d.tga
            Texture = dbdale03.tga dbdale03_d.tga
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = FORTRESS_IMPROVEMENT_2 RUBBLE
      Animation                =    RubbleAnimation
            AnimationName        =    dbthal_flat.dbthal_flat
            AnimationMode        =    ONCE
        End
        EnteringStateFX    = FX_StructureMediumCollapse
    End

    ModelConditionState  = FORTRESS_IMPROVEMENT_2 POST_RUBBLE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = FORTRESS_IMPROVEMENT_2 POST_COLLAPSE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End

        ModelConditionState = FORTRESS_IMPROVEMENT_2
            Model = dbthal_flat
        End

        AnimationState = FORTRESS_IMPROVEMENT_2
            Animation = IdleA
                AnimationName        = dbthal_flat.dbthal_flat
                AnimationMode        = ONCE
                AnimationPriority    = 30
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
            ParticleSysBone          = FXBONE01 ElvenForgeSmoke FollowBone:Yes Persist:SPAWN PersistID:101
            ParticleSysBone          = FXBONE02 ElvenForgeSmoke FollowBone:Yes Persist:SPAWN PersistID:101
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_2 SNOW
            Model           = dbthal_flat
            Texture = dbdale01.tga dbdale01_snow.tga
            Texture = dbdale02.tga dbdale02_snow.tga
            Texture = dbdale03.tga dbdale03_snow.tga
        End
  End


  Draw = W3DScriptedModelDraw ModuleTag_DrawWell

    ExtraPublicBone = ARROW_01
    ExtraPublicBone = ARROW_02
    ExtraPublicBone = ARROW_03
    ExtraPublicBone = ARROW_04
    ExtraPublicBone = ARROW_05
    ExtraPublicBone = ARROW_06
    ExtraPublicBone = ARROW_07
    ExtraPublicBone = ARROW_08
    ExtraPublicBone = FXBONE01
    ExtraPublicBone = FXBONE02

    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode    = Yes

        DefaultModelConditionState
            Model = NONE
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_3 USER_3 DAMAGED
            Model           = dbthal_wela
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_3 USER_3 REALLYDAMAGED
            Model           = dbthal_wela
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_3 USER_3
            Model           = dbthal_wela
        End

        AnimationState = FORTRESS_IMPROVEMENT_3 USER_3
            Animation                    = RiseUp
                AnimationName            = dbthal_wela.dbthal_wela
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 2 2
            End
            Flags = START_FRAME_FIRST
            BeginScript
                CurDrawablePlaySound("BuildingTopple")
            EndScript
        End

    ModelConditionState  = FORTRESS_IMPROVEMENT_3 RUBBLE
      Model         = dbthal_well
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = FORTRESS_IMPROVEMENT_3 RUBBLE
      Animation                =    RubbleAnimation
            AnimationName        =    dbthal_well.dbthal_well
            AnimationMode        =    ONCE
        End
        EnteringStateFX    = FX_StructureMediumCollapse
    End

    ModelConditionState  = FORTRESS_IMPROVEMENT_3 POST_RUBBLE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = FORTRESS_IMPROVEMENT_3 POST_COLLAPSE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End

        ModelConditionState = FORTRESS_IMPROVEMENT_3
            Model = dbthal_well
        End

        AnimationState = FORTRESS_IMPROVEMENT_3
            Animation = IdleA
                AnimationName        = dbthal_well.dbthal_well
                AnimationMode        = ONCE
                AnimationPriority    = 30
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_3 SNOW
            Model           = dbthal_well
        End
  End


  Draw = W3DScriptedModelDraw ModuleTag_DrawWatchtower

    ExtraPublicBone = ARROW_01
    ExtraPublicBone = ARROW_02
    ExtraPublicBone = ARROW_03
    ExtraPublicBone = ARROW_04
    ExtraPublicBone = ARROW_05
    ExtraPublicBone = ARROW_06
    ExtraPublicBone = ARROW_07
    ExtraPublicBone = ARROW_08
    ExtraPublicBone = FXBONE01
    ExtraPublicBone = FXBONE02

    OkToChangeModelColor  = Yes
    UseStandardModelNames = Yes
    StaticModelLODMode    = Yes

        DefaultModelConditionState
            Model = NONE
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_4 USER_4 DAMAGED
            Model           = dbthal_towa
            WeaponLaunchBone = PRIMARY ARROW_
            Texture = dbdale01.tga dbdale01_d.tga
            Texture = dbdale02.tga dbdale02_d.tga
            Texture = dbdale03.tga dbdale03_d.tga
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_4 USER_4 REALLYDAMAGED
            Model           = dbthal_towa
            WeaponLaunchBone = PRIMARY ARROW_
            Texture = dbdale01.tga dbdale01_d.tga
            Texture = dbdale02.tga dbdale02_d.tga
            Texture = dbdale03.tga dbdale03_d.tga
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_4 USER_4
            Model           = dbthal_towa
            WeaponLaunchBone = PRIMARY ARROW_
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_4 USER_4 SNOW
            Model           = dbthal_towa
            WeaponLaunchBone = PRIMARY ARROW_
            Texture = dbdale01.tga dbdale01_snow.tga
            Texture = dbdale02.tga dbdale02_snow.tga
            Texture = dbdale03.tga dbdale03_snow.tga
        End

        AnimationState = FORTRESS_IMPROVEMENT_4 USER_4
            Animation                    = RiseUp
                AnimationName            = dbthal_towa.dbthal_towa
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 2 2
            End
            Flags = START_FRAME_FIRST
            BeginScript
                CurDrawablePlaySound("BuildingTopple")
            EndScript
        End

    ModelConditionState  = FORTRESS_IMPROVEMENT_4 RUBBLE
      Model         = dbthal_tow
            Texture = dbdale01.tga dbdale01_d.tga
            Texture = dbdale02.tga dbdale02_d.tga
            Texture = dbdale03.tga dbdale03_d.tga
      ParticleSysBone SmokeLarge01 SmokeBuildingLarge
    End

    AnimationState = FORTRESS_IMPROVEMENT_4 RUBBLE
      Animation                =    RubbleAnimation
            AnimationName        =    dbthal_tow.dbthal_tow
            AnimationMode        =    ONCE
        End
        EnteringStateFX    = FX_StructureMediumCollapse
    End

    ModelConditionState  = FORTRESS_IMPROVEMENT_3 POST_RUBBLE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End

    ModelConditionState  = FORTRESS_IMPROVEMENT_3 POST_COLLAPSE
        Model         = None
        ParticleSysBone NONE SmokeBuildingMediumRubble
    End

        ModelConditionState = FORTRESS_IMPROVEMENT_4
            Model = dbthal_tow
            WeaponLaunchBone = PRIMARY ARROW_
        End

        AnimationState = FORTRESS_IMPROVEMENT_4
            Animation = IdleA
                AnimationName        = dbthal_tow.dbthal_tow
                AnimationMode        = ONCE
                AnimationPriority    = 30
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_4 SNOW
            Model           = dbthal_tow
            WeaponLaunchBone = PRIMARY ARROW_
            Texture = dbdale01.tga dbdale01_snow.tga
            Texture = dbdale02.tga dbdale02_snow.tga
            Texture = dbdale03.tga dbdale03_snow.tga
        End
    End


    Draw = W3DFloorDraw DrawFloorV1
        StaticModelLODMode     = Yes
        ModelName              = dbthal_bib
        WeatherTexture         = SNOWY dbdale_bib_snow.tga
        HideIfModelConditions  = AWAITING_CONSTRUCTION
        HideIfModelConditions  = PARTIALLY_CONSTRUCTED
    End




    DisplayName         = OBJECT:DwarvenThalZitadelle
    Description         = OBJECT:DwarvenThalZitadelleDescription
    EditorSorting       = STRUCTURE
    Side                = Dwarves
    ThreatLevel         = FACTORY_THREAT_LEVEL
    CommandSet          = ThalZitadelleCommandSet
    RefundValue         = 750
    BuildCost               = 1500
    BuildTime               = 55
    BountyValue             = 300
    VisionRange             = 160
    ShroudClearingRange     = 180
    CommandPointBonus       = 100

    PlacementViewAngle        = -45

    MaxSimultaneousOfType     = 1

    WeaponSet
        Conditions        = None
    End

    WeaponSet
        Conditions        = PLAYER_UPGRADE
        Weapon            = PRIMARY FortressArrowTowerBow
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions        = None
        Armor             = CitadelFortressArmor
    End



    #include "..\..\..\Includes\StandardBuildingEvaEvents.inc"


   VoiceSelect                   = CivilianOutpostSelect

    SoundOnDamaged               = BuildingLightDamageWood
    SoundOnReallyDamaged         = BuildingHeavyDamageWood

    SoundAmbient                 = GondorMarketVenderAmbience
    VoiceFullyCreated            = EVA:GenericBuildingComplete-Builder-Dwarf

    SoundOnDamaged               = BuildingLightDamageWood
    SoundOnReallyDamaged         = BuildingHeavyDamageWood

    UnitSpecificSounds
        UnderConstruction        = BuildingConstructionLoop
        UnderRepairFromRubble    = BuildingConstructionLoop
    End



    RadarPriority       = STRUCTURE
    KindOf              = CASTLE_KEEP AUTO_RALLYPOINT ATTACK_NEEDS_LINE_OF_SIGHT CAN_ATTACK FS_FACTORY SELECTABLE IMMOBILE STRUCTURE SCORE MADE_OF_WOOD CAN_ATTACK MP_COUNT_FOR_VICTORY NEED_BASE_FOUNDATION


    Body = StructureBody ModuleTag_Body
        MaxHealth       = MINIFORT_DAG_HEALTH
    End

    Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
        AutoAcquireEnemiesWhenIdle = Yes
        MoodAttackCheckRate        = 250
    End


  Behavior = QueueProductionExitUpdate ModuleTag_07
    UnitCreatePoint          = X:-90 Y:-135 Z:0.0
    NaturalRallyPoint        = X:-142 Y:-182.0 Z:0.0
    ExitDelay                = STANDARD_HORDE_EXIT_DELAY
    UseReturnToFormation     = No
  End


    Behavior = GettingBuiltBehavior ModuleTag_04
       SelfBuildingLoop         = BuildingBigConstructionLoop
       SelfRepairFromDamageLoop = NoSound
       SelfRepairFromRubbleLoop = BuildingBigConstructionLoop
    End


    Behavior = WeaponSetUpgrade ModuleTag_BuildingArrows
        TriggeredBy          = Upgrade_SeestadtWatchtower
        ConflictsWith        = Upgrade_EasyAIMultiPlayer
    End


    Behavior = CommandSetUpgrade ModuleTag_CommandsetBrracks
        TriggeredBy          = Upgrade_SeestadtBarracks
        CommandSet           = ThalZitadelleCommandSet_Barracks
    End


    Behavior = ObjectCreationUpgrade CreateTheHealPing
        TriggeredBy          = Upgrade_SeestadtWell
        Delay                = 0.0
        ThingToSpawn         = ThalWellReplenishPing
        FadeInTime           = 0
        Offset               = X:151 Y:-5 Z:0
    End


    Behavior = ModelConditionUpgrade ModuleTag_ShowSeestadtBarracks
        TriggeredBy          = Upgrade_SeestadtBarracks
        AddConditionFlags    = FORTRESS_IMPROVEMENT_1
        AddTempConditionFlag = ModelConditionState:USER_1
        TempConditionTime    = 7.0
    End

    Behavior = ModelConditionUpgrade ModuleTag_ShowSeestadtFlat
        TriggeredBy          = Upgrade_SeestadtFlat
        AddConditionFlags    = FORTRESS_IMPROVEMENT_2
        AddTempConditionFlag = ModelConditionState:USER_2
        TempConditionTime    = 7.0
    End

    Behavior = ModelConditionUpgrade ModuleTag_ShowSeestadtWell
        TriggeredBy          = Upgrade_SeestadtWell
        AddConditionFlags    = FORTRESS_IMPROVEMENT_3
        AddTempConditionFlag = ModelConditionState:USER_3
        TempConditionTime    = 7.0
    End

    Behavior = ModelConditionUpgrade ModuleTag_ShowSeestadtWatchtower
        TriggeredBy          = Upgrade_SeestadtWatchtower
        AddConditionFlags    = FORTRESS_IMPROVEMENT_4
        AddTempConditionFlag = ModelConditionState:USER_4
        TempConditionTime    = 7.0
    End

    Behavior = ObjectCreationUpgrade CreateTheRessourceFlat1
        TriggeredBy          = Upgrade_SeestadtFlat
        Delay                = 0.0
        ThingToSpawn         = SeestadtRessourcePingObject
        FadeInTime           = 0
        Offset               = X:129 Y:114 Z:0
    End

    Behavior = ObjectCreationUpgrade CreateTheRessourceFlat2
        TriggeredBy          = Upgrade_SeestadtFlat
        Delay                = 0.0
        ThingToSpawn         = SeestadtRessourcePingObject
        FadeInTime           = 0
        Offset               = X:-8 Y:123 Z:0
    End

    Behavior = ObjectCreationUpgrade CreateTheRessourceFlat3
        TriggeredBy          = Upgrade_SeestadtFlat
        Delay                = 0.0
        ThingToSpawn         = SeestadtRessourcePingObject
        FadeInTime           = 0
        Offset               = X:91 Y:-120 Z:0
    End

    Behavior = ObjectCreationUpgrade CreateTheRessource
        TriggeredBy          = Upgrade_SeestadtBarracks
        Delay                = 0.0
        ThingToSpawn         = SeestadtRessourcePingObject
        FadeInTime           = 0
        Offset               = X:-108 Y:-80 Z:0
    End

    Behavior = ObjectCreationUpgrade CreateTheRessource2
        TriggeredBy          = Upgrade_SeestadtWatchtower
        Delay                = 0.0
        ThingToSpawn         = SeestadtRessourcePingObject
        FadeInTime           = 0
        Offset               = X:-101 Y:-59 Z:0
    End

    Behavior = GrantUpgradeCreate ModuleTag_ActLikeAnOldUpgrade
        UpgradeToGrant          = Upgrade_TrebuchetTurret
        GiveOnBuildComplete     = Yes
    End

    Behavior = ObjectCreationUpgrade ModuleTag_MaketheHuman1
        TriggeredBy       = Upgrade_TrebuchetTurret
        Delay             = 0.0
        ThingToSpawn      = ThalPeasent01
        Offset            = X:47 Y:40 Z:0.0
        FadeInTime        = 100
    End

    Behavior = ObjectCreationUpgrade ModuleTag_MaketheHuman2
        TriggeredBy       = Upgrade_TrebuchetTurret
        Delay             = 0.0
        ThingToSpawn      = ThalPeasent02
        Offset            = X:79 Y:-13 Z:0.0
        FadeInTime        = 100
    End

    Behavior = ObjectCreationUpgrade ModuleTag_MaketheHuman3
        TriggeredBy       = Upgrade_TrebuchetTurret
        Delay             = 0.0
        ThingToSpawn      = ThalPeasent03
        Offset            = X:55 Y:10 Z:0.0
        FadeInTime        = 100
    End

    Behavior = ObjectCreationUpgrade ModuleTag_MaketheHuman5
        TriggeredBy       = Upgrade_SeestadtBarracks
        Delay             = 0.0
        ThingToSpawn      = ThalPeasent02
        Offset            = X:8 Y:-160 Z:0.0
        FadeInTime        = 100
    End

    Behavior = ObjectCreationUpgrade ModuleTag_MaketheHuman6
        TriggeredBy       = Upgrade_SeestadtBarracks
        Delay             = 0.0
        ThingToSpawn      = ThalPeasent03
        Offset            = X:-84 Y:-34 Z:0.0
        FadeInTime        = 100
    End

    Behavior = ObjectCreationUpgrade ModuleTag_MaketheHuman7
        TriggeredBy       = Upgrade_SeestadtFlat
        Delay             = 0.0
        ThingToSpawn      = ThalPeasent01
        Offset            = X:-49 Y:69 Z:0.0
        FadeInTime        = 100
    End

    Behavior = ObjectCreationUpgrade ModuleTag_MaketheHuman8
        TriggeredBy       = Upgrade_SeestadtFlat
        Delay             = 0.0
        ThingToSpawn      = ThalPeasent02
        Offset            = X:44 Y:83 Z:0.0
        FadeInTime        = 100
    End

    Behavior = ObjectCreationUpgrade ModuleTag_MaketheHuman9
        TriggeredBy       = Upgrade_SeestadtFlat
        Delay             = 0.0
        ThingToSpawn      = ThalPeasent03
        Offset            = X:16 Y:-127 Z:0.0
        FadeInTime        = 100
    End

    Behavior = ObjectCreationUpgrade ModuleTag_MaketheHuman10
        TriggeredBy       = Upgrade_SeestadtFlat
        Delay             = 0.0
        ThingToSpawn      = ThalPeasent01
        Offset            = X:121 Y:-57 Z:0.0
        FadeInTime        = 100
    End

    Behavior = ObjectCreationUpgrade ModuleTag_MaketheHuman11
        TriggeredBy       = Upgrade_SeestadtWatchtower
        Delay             = 0.0
        ThingToSpawn      = ThalPeasent02
        Offset            = X:-86 Y:86 Z:0.0
        FadeInTime        = 100
    End

    Behavior = GeometryUpgrade Geom_ModuleTag_HideAll
        TriggeredBy        = Upgrade_StructureLevel1
        ShowGeometry       = Geom_Orig
        HideGeometry       = Geom_V1 Geom_V2 Geom_V3 Geom_V4 Geom_V5 Geom_V6
    End

    Behavior = GeometryUpgrade Geom_ModuleTag_ShowSeestadtBarracks
        TriggeredBy        = Upgrade_SeestadtBarracks
        ShowGeometry       = Geom_V1
    End

    Behavior = GeometryUpgrade Geom_ModuleTag_ShowSeestadtFlat
        TriggeredBy        = Upgrade_SeestadtFlat
        ShowGeometry       = Geom_V2 Geom_V3 Geom_V4
    End

    Behavior = GeometryUpgrade Geom_ModuleTag_ShowSeestadtWell
        TriggeredBy        = Upgrade_SeestadtWell
        ShowGeometry       = Geom_V5
    End

    Behavior = GeometryUpgrade Geom_ModuleTag_ShowSeestadtWatchtower
        TriggeredBy        = Upgrade_SeestadtWatchtower
        ShowGeometry       = Geom_V6
    End


    Behavior = AttributeModifierUpgrade ModuleTag_SeestadtBarracksBonus
        TriggeredBy        = Upgrade_SeestadtBarracks
        AttributeModifier  = SeestadtBarracksModifier
    End

    Behavior = AttributeModifierUpgrade ModuleTag_SeestadtFlatBonus
        TriggeredBy        = Upgrade_SeestadtFlat
        AttributeModifier  = SeestadtFlatModifier
    End

    Behavior = AttributeModifierUpgrade ModuleTag_SeestadtWellBonus
        TriggeredBy        = Upgrade_SeestadtWell
        AttributeModifier  = SeestadtWellModifier
    End

    Behavior = AttributeModifierUpgrade ModuleTag_SeestadtWatchtowerBonus
        TriggeredBy        = Upgrade_SeestadtWatchtower
        AttributeModifier  = SeestadtWatchtowerModifier
    End


    Behavior                    = StructureCollapseUpdate ModuleTag_08
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_StructureMediumCollapse
        FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
        DestroyObjectWhenDone   = Yes
        CollapseHeight          = 155
    End


    Behavior                  = BuildingBehavior BuildingModuleTag
        NightWindowName       = N_Window N_Glow
    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
    End

    Behavior = ProductionUpdate ModuleTag_06
       GiveNoXP = No
    End

    Behavior = ObjectCreationUpgrade ModuleTag_IamAI1
        TriggeredBy  = Upgrade_EasyAISinglePlayer Upgrade_EasyAIMultiPlayer Upgrade_MediumAISinglePlayer Upgrade_MediumAIMultiPlayer Upgrade_HardAISinglePlayer Upgrade_HardAIMultiPlayer Upgrade_BrutalAISinglePlayer Upgrade_BrutalAIMultiPlayer
        Delay        = 220000
        GrantUpgrade = Upgrade_SeestadtFlat
    End

    Behavior = ObjectCreationUpgrade ModuleTag_IamAI2
        TriggeredBy  = Upgrade_EasyAISinglePlayer Upgrade_EasyAIMultiPlayer Upgrade_MediumAISinglePlayer Upgrade_MediumAIMultiPlayer Upgrade_HardAISinglePlayer Upgrade_HardAIMultiPlayer Upgrade_BrutalAISinglePlayer Upgrade_BrutalAIMultiPlayer
        Delay        = 400000
        GrantUpgrade = Upgrade_SeestadtBarracks
    End

    Behavior = ObjectCreationUpgrade ModuleTag_IamAI3
        TriggeredBy  = Upgrade_EasyAISinglePlayer Upgrade_EasyAIMultiPlayer Upgrade_MediumAISinglePlayer Upgrade_MediumAIMultiPlayer Upgrade_HardAISinglePlayer Upgrade_HardAIMultiPlayer Upgrade_BrutalAISinglePlayer Upgrade_BrutalAIMultiPlayer
        Delay        = 590000
        GrantUpgrade = Upgrade_SeestadtWell
    End

    Behavior = ObjectCreationUpgrade ModuleTag_IamAI4
        TriggeredBy  = Upgrade_EasyAISinglePlayer Upgrade_EasyAIMultiPlayer Upgrade_MediumAISinglePlayer Upgrade_MediumAIMultiPlayer Upgrade_HardAISinglePlayer Upgrade_HardAIMultiPlayer Upgrade_BrutalAISinglePlayer Upgrade_BrutalAIMultiPlayer
        Delay        = 720000
        GrantUpgrade = Upgrade_SeestadtWatchtower
    End

    Scale                 = 0.92

    Geometry              = BOX
    GeometryName          = Geom_Orig
    GeometryMajorRadius   = 115.0
    GeometryMinorRadius   = 115.0
    GeometryHeight        = 75.0
    GeometryOffset        = X:6 Y:7 Z:0

    AdditionalGeometry    = BOX
    GeometryName          = Geom_Orig
    GeometryMajorRadius   = 115.0
    GeometryMinorRadius   = 115.0
    GeometryHeight        = 75.0
    GeometryOffset        = X:23 Y:-60 Z:0

    AdditionalGeometry    = BOX
    GeometryName          = Geom_Orig
    GeometryMajorRadius   = 60.0
    GeometryMinorRadius   = 60.0
    GeometryHeight        = 75
    GeometryOffset        = X:-54 Y:-40 Z:0

    AdditionalGeometry    = BOX
    GeometryActive        = No
    GeometryName          = Geom_V1
    GeometryMajorRadius   = 58
    GeometryMinorRadius   = 58
    GeometryHeight        = 115.0
    GeometryOffset        = X:-70 Y:-118 Z:0

    AdditionalGeometry    = BOX
    GeometryActive        = No
    GeometryName          = Geom_V2
    GeometryMajorRadius   = 47
    GeometryMinorRadius   = 47
    GeometryHeight        = 100.0
    GeometryOffset        = X:118 Y:-140 Z:0

    AdditionalGeometry    = BOX
    GeometryActive        = No
    GeometryName          = Geom_V3
    GeometryMajorRadius   = 45
    GeometryMinorRadius   = 45
    GeometryHeight        = 121.0
    GeometryOffset        = X:-15 Y:109 Z:0

    AdditionalGeometry    = BOX
    GeometryActive        = No
    GeometryName          = Geom_V4
    GeometryMajorRadius   = 36
    GeometryMinorRadius   = 36
    GeometryHeight        = 105.0
    GeometryOffset        = X:107 Y:107 Z:0

    AdditionalGeometry    = BOX
    GeometryActive        = No
    GeometryName          = Geom_V5
    GeometryMajorRadius   = 40
    GeometryMinorRadius   = 40
    GeometryHeight        = 77.0
    GeometryOffset        = X:152 Y:-3 Z:0

    AdditionalGeometry    = BOX
    GeometryActive        = No
    GeometryName          = Geom_V6
    GeometryMajorRadius   = 30.0
    GeometryMinorRadius   = 30.0
    GeometryHeight        = 137.0
    GeometryOffset        = X:-93 Y:27 Z:0

    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
    BuildCompletion       = PLACED_BY_PLAYER
End


Object ThalPeasent01


  Draw = W3DScriptedModelDraw ModuleTag_01

        RandomTexture = GuTownsman.tga 0 GuTownsman.tga
        RandomTexture = GuTownsman_A.tga 0 GuTownsman.tga
        RandomTexture = GuTownsman_B.tga 0 GuTownsman.tga
        RandomTexture = GUTownsman_C.tga 0 GuTownsman.tga
        RandomTexture = GUTownsman_D.tga 0 GuTownsman.tga
        RandomTexture = GUTownsman_E.tga 0 GuTownsman.tga
        RandomTexture = GUTownsman_F.tga 0 GuTownsman.tga
        RandomTexture = GUTownsman_G.tga 0 GuTownsman.tga

        StaticModelLODMode = Yes

        DefaultModelConditionState
            Model               = GUTownsmn_SKN
            Skeleton            = GUTownsmn_SKL
        End

        IdleAnimationState
            Animation           = IDLA
                AnimationName     = GUTownsmn_IDLA
                AnimationMode     = ONCE
                AnimationPriority = 15
            End
            Animation           = IDLB
                AnimationName     = GUTownsmn_TLKA
                AnimationMode     = ONCE
                AnimationPriority = 5
            End
            Animation           = IDLC
                AnimationName     = GUTownsmn_TLKB
                AnimationMode     = ONCE
                AnimationPriority = 5
            End
            Animation           = IDLD
                AnimationName     = GUTownsmn_TLKC
                AnimationMode     = ONCE
                AnimationPriority = 5
            End
        End

        AnimationState        = DYING DEATH_1 AFLAME
            Animation           = MFDA
                AnimationName     = GUTownsmn_MFDA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = DYING DEATH_1
            Animation           = DIEA
                AnimationName     = GUTownsmn_DIEA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = DYING DEATH_2
            Animation           = DIEB
                AnimationName     = GUTownsmn_DIEB
                AnimationMode     = ONCE
            End
        End

        AnimationState        = DYING SPLATTED
            Animation           = LNDA
                AnimationName     = GUTownsmn_LNDA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = STUNNED_FLAILING
            Animation           = FLYA
                AnimationName     = GUTownsmn_FLYA
                AnimationMode     = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED
            Animation           = LNDA
                AnimationName     = GUTownsmn_LNDA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = PASSENGER
            Animation           = FLLA
                AnimationName     = GUTownsmn_FLLA
                AnimationMode     = LOOP
            End
        End

        AnimationState        = THROWN_PROJECTILE
            Animation           = FLYA
                AnimationName     = GUTownsmn_FLYA
                AnimationMode     = LOOP
            End
        End

        AnimationState        = MOVING PANICKING
            Animation            = RUNA
                AnimationName    = GUTownsmn_RUNA
                AnimationMode    = ONCE
            End
            Animation            = RUNB
                AnimationName    = GUTownsmn_RUNB
                AnimationMode    = ONCE
            End
            Flags =            RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState        = MOVING EMOTION_AFRAID
            Animation            = RUNA
                AnimationName    = GUTownsmn_RUNA
                AnimationMode    = LOOP
            End
        End

        AnimationState        = MOVING WEAPONSET_ENRAGED
            Animation            = RUNA
                AnimationName    = GUTownsmn_RUNA
                AnimationMode    = LOOP
            End
        End

        AnimationState        = MOVING WANDER
            Animation           = WLKA
                AnimationName     = GUTownsmn_WLKA
                AnimationMode     = LOOP
            End

        End

        AnimationState                = MOVING
            Animation                = WLKA
                AnimationName        = GUTownsmn_WLKA
                AnimationMode        = LOOP
            End
            Flags               = RANDOMSTART

        End

    End


  Side = Dwarves
  EditorSorting =     UNIT
  TransportSlotCount = 1
  ShockwaveResistance   = SHOCKWAVE_RESISTANCE_ALWAYS

  ArmorSet
    Conditions      = None
    Armor           = NoArmor
    DamageFX        = None
  End

  VisionRange = 0
  DisplayName = OBJECT:GondorTownsman
  CrushableLevel = 2




  RadarPriority = NOT_ON_RADAR
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE CAN_BE_REPULSED CREEP

    Body = ActiveBody ModuleTag_02
        MaxHealth         = 10
        MaxHealthDamaged  = 5
        RecoveryTime      = 5000
    End


    Behavior = AnimalAIUpdate ModuleTagWanderAround
        FleeRange = 0
        FleeDistance = 0
        WanderPercentage = 5
        MaxWanderDistance = 15
        MaxWanderRadius = 30
        UpdateTimer = 99999999
    End


    Behavior = EntEnragedUpdate EnragedBehaviorModuleTag
        HatedObjectFilter     = ANY +INFANTRY +HERO +CAVALRY +MONSTER ENEMIES
        EnragedTime           = 10000
        TimeUntilCanRageAgain = 1000
        EnragedTransitionTime = 0
    End

    LocomotorSet
        Locomotor = GondorCivilianLocomotor
        Condition = SET_NORMAL
        Speed     = 17
    End

    LocomotorSet
        Locomotor = GondorCivilianLocomotor
        Condition = SET_PANIC
        Speed     = 45
    End

    LocomotorSet
        Locomotor = GondorCivilianLocomotor
        Condition = SET_ENRAGED
        Speed     = 45
    End


     Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AfraidOf          =    ANY +INFANTRY +HERO +CAVALRY +MONSTER ENEMIES
        AlwaysAfraidOf    =    ANY +INFANTRY +HERO +CAVALRY +MONSTER ENEMIES
        PointAt           =    EMOTION_POINTAT_OBJECTFILTER
        HeroScanDistance  =    150
        FearScanDistance  =    INFANTRY_FEAR_SCAN_RADIUS
        AddEmotion        =    Terror_Base
        AddEmotion        =    Doom_Base
        AddEmotion        =    UncontrollableFear_Base_Evil
        AddEmotion        =    FearIdle_Base
        AddEmotion        =    FearBusy_Base
    End



    Behavior = SlavedUpdate ModuleTag_Slave
        DieOnMastersDeath = Yes
    End


    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -CRUSHED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        DeathFlags = DEATH_1
        Sound = INITIAL CivilianManVoiceDie
    End

    Behavior = SlowDeathBehavior ModuleTag_05b
        DeathTypes = NONE +CRUSHED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        DeathFlags = DEATH_2
        Sound = INITIAL CivilianManVoiceDie
    End

  Behavior = SquishCollide ModuleTag_06

  End

    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes
    Shadow = SHADOW_DECAL

    ShadowSizeX = 12
    ShadowSizeY = 12
    ShadowTexture = ShadowI
End


Object ThalPeasent02


    Draw = W3DScriptedModelDraw ModuleTag_01

        RandomTexture = GUTownWmn.tga 0 GUTownWmn.tga
        RandomTexture = GUTownWmn_A.tga 0 GUTownWmn.tga
        RandomTexture = GUTownWmn_B.tga 0 GUTownWmn.tga
        RandomTexture = GUTownWmn_C.tga 0 GUTownWmn.tga
        RandomTexture = GUTownWmn_D.tga 0 GUTownWmn.tga
        RandomTexture = GUTownWmn_E.tga 0 GUTownWmn.tga
        RandomTexture = GUTownWmn_F.tga 0 GUTownWmn.tga

        DefaultModelConditionState
            Model               = GUTownWmn_SKN
            Skeleton            = GUTownWmn_SKL
        End

        IdleAnimationState
            Animation           = IDLA
                AnimationName     = GUTownWmn_IDLA
                AnimationMode     = ONCE
                AnimationPriority = 15
            End
            Animation           = IDLB
                AnimationName     = GUTownWmn_TLKA
                AnimationMode     = ONCE
                AnimationPriority = 5
            End
            Animation           = IDLC
                AnimationName     = GUTownWmn_TLKB
                AnimationMode     = ONCE
                AnimationPriority = 5
            End
            Animation           = IDLD
                AnimationName     = GUTownWmn_TLKC
                AnimationMode     = ONCE
                AnimationPriority = 5
            End
        End

        AnimationState        = ATTACKING PREATTACK_A
            Animation           = ATKA
                AnimationName     = GUTownWmn_ATKA
                AnimationMode     = LOOP
            End
        End

        AnimationState        = DYING
            Animation           = DIEA
                AnimationName     = GUTownWmn_DIEA
                AnimationMode     = ONCE
            End
            Animation           = DIEB
                AnimationName     = GUTownWmn_DIEB
                AnimationMode     = ONCE
            End
        End

        AnimationState        = THROWN_PROJECTILE
            Animation           = FLYA
                AnimationName     = GUTownWmn_FLYA
                AnimationMode     = LOOP
            End
        End


        AnimationState        = STUNNED
            Animation           = LNDA
                AnimationName     = GUTownWmn_LNDA
                AnimationMode     = ONCE
            End
        End

        AnimationState                = MOVING WANDER
            Animation                = WLKA
                AnimationName        = GUTownWmn_WLKA
                AnimationMode        = LOOP
            End

        End


        AnimationState                = MOVING PANICKING
            Animation                = RUNA
                AnimationName        = GUTownWmn_RUNB
                AnimationMode        = LOOP
            End
            Flags                    = RANDOMSTART
        End

        AnimationState                = MOVING WEAPONSET_ENRAGED
            Animation                = RUNA
                AnimationName        = GUTownWmn_RUNB
                AnimationMode        = LOOP
            End
            Flags                    = RANDOMSTART
        End

        AnimationState                = MOVING EMOTION_AFRAID
            Animation                = RUNA
                AnimationName        = GUTownWmn_RUNB
                AnimationMode        = LOOP
            End
            Flags                    = RANDOMSTART
        End

        AnimationState                = MOVING
            Animation                = WLKA
                AnimationName        = GUTownWmn_WLKA
                AnimationMode        = LOOP
            End
            Flags                    = RANDOMSTART

        End

    End


  Side = Dwarves
  EditorSorting =     UNIT
  TransportSlotCount = 1
  ShockwaveResistance   = SHOCKWAVE_RESISTANCE_ALWAYS

  ArmorSet
    Conditions      = None
    Armor           = NoArmor
    DamageFX        = None
  End

  VisionRange = 0
  DisplayName = OBJECT:GondorPeasant
  CrushableLevel = 2




  RadarPriority = NOT_ON_RADAR
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE CAN_BE_REPULSED CREEP

    Body = ActiveBody ModuleTag_02
        MaxHealth         = 10
        MaxHealthDamaged  = 5
        RecoveryTime      = 5000
    End


    Behavior = AnimalAIUpdate ModuleTagWanderAround
        FleeRange = 0
        FleeDistance = 0
        WanderPercentage = 5
        MaxWanderDistance = 15
        MaxWanderRadius = 30
        UpdateTimer = 99999999
    End


    Behavior = EntEnragedUpdate EnragedBehaviorModuleTag
        HatedObjectFilter     = ANY +INFANTRY +HERO +CAVALRY +MONSTER ENEMIES
        EnragedTime           = 10000
        TimeUntilCanRageAgain = 1000
        EnragedTransitionTime = 0
    End

    LocomotorSet
        Locomotor = GondorCivilianLocomotor
        Condition = SET_NORMAL
        Speed     = 17
    End

    LocomotorSet
        Locomotor = GondorCivilianLocomotor
        Condition = SET_PANIC
        Speed     = 45
    End

    LocomotorSet
        Locomotor = GondorCivilianLocomotor
        Condition = SET_ENRAGED
        Speed     = 45
    End


     Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AfraidOf          =    ANY +INFANTRY +HERO +CAVALRY +MONSTER ENEMIES
        AlwaysAfraidOf    =    ANY +INFANTRY +HERO +CAVALRY +MONSTER ENEMIES
        PointAt           =    EMOTION_POINTAT_OBJECTFILTER
        HeroScanDistance  =    150
        FearScanDistance  =    INFANTRY_FEAR_SCAN_RADIUS
        AddEmotion        =    Terror_Base
        AddEmotion        =    Doom_Base
        AddEmotion        =    UncontrollableFear_Base_Evil
        AddEmotion        =    FearIdle_Base
        AddEmotion        =    FearBusy_Base
    End


    Behavior = SlavedUpdate ModuleTag_Slave
        DieOnMastersDeath = Yes
    End


    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -EXPLODED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL CivilianWomanVoiceDie
    End

    Behavior = SlowDeathBehavior ModuleTag_FF
        DeathTypes = NONE +EXPLODED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL CivilianWomanVoiceDie
    End

  Behavior = SquishCollide ModuleTag_06

  End

    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes
    Shadow = SHADOW_DECAL

    ShadowSizeX = 12
    ShadowSizeY = 12
    ShadowTexture = ShadowI
End

Object ThalPeasent03


    Draw = W3DScriptedModelDraw ModuleTag_01

        RandomTexture = GUTownWmn.tga 0 GUTownWmn.tga
        RandomTexture = GUTownWmn_A.tga 0 GUTownWmn.tga
        RandomTexture = GUTownWmn_B.tga 0 GUTownWmn.tga
        RandomTexture = GUTownWmn_C.tga 0 GUTownWmn.tga
        RandomTexture = GUTownWmn_D.tga 0 GUTownWmn.tga
        RandomTexture = GUTownWmn_E.tga 0 GUTownWmn.tga
        RandomTexture = GUTownWmn_F.tga 0 GUTownWmn.tga

        DefaultModelConditionState
            Model               = GUTownWmn_SKN
            Skeleton            = GUTownWmn_SKL
        End

        IdleAnimationState
            Animation           = IDLA
                AnimationName     = GUTownWmn_IDLA
                AnimationMode     = ONCE
                AnimationPriority = 15
            End
            Animation           = IDLB
                AnimationName     = GUTownWmn_TLKA
                AnimationMode     = ONCE
                AnimationPriority = 5
            End
            Animation           = IDLC
                AnimationName     = GUTownWmn_TLKB
                AnimationMode     = ONCE
                AnimationPriority = 5
            End
            Animation           = IDLD
                AnimationName     = GUTownWmn_TLKC
                AnimationMode     = ONCE
                AnimationPriority = 5
            End
        End

        AnimationState        = ATTACKING PREATTACK_A
            Animation           = ATKA
                AnimationName     = GUTownWmn_ATKA
                AnimationMode     = LOOP
            End
        End

        AnimationState        = DYING
            Animation           = DIEA
                AnimationName     = GUTownWmn_DIEA
                AnimationMode     = ONCE
            End
            Animation           = DIEB
                AnimationName     = GUTownWmn_DIEB
                AnimationMode     = ONCE
            End
        End

        AnimationState        = THROWN_PROJECTILE
            Animation           = FLYA
                AnimationName     = GUTownWmn_FLYA
                AnimationMode     = LOOP
            End
        End


        AnimationState        = STUNNED
            Animation           = LNDA
                AnimationName     = GUTownWmn_LNDA
                AnimationMode     = ONCE
            End
        End

        AnimationState                = MOVING WANDER
            Animation                = WLKA
                AnimationName        = GUTownWmn_WLKA
                AnimationMode        = LOOP
            End

        End


        AnimationState                = MOVING PANICKING
            Animation                = RUNA
                AnimationName        = GUTownWmn_RUNB
                AnimationMode        = LOOP
            End
            Flags                    = RANDOMSTART
        End

        AnimationState                = MOVING WEAPONSET_ENRAGED
            Animation                = RUNA
                AnimationName        = GUTownWmn_RUNB
                AnimationMode        = LOOP
            End
            Flags                    = RANDOMSTART
        End

        AnimationState                = MOVING EMOTION_AFRAID
            Animation                = RUNA
                AnimationName        = GUTownWmn_RUNB
                AnimationMode        = LOOP
            End
            Flags                    = RANDOMSTART
        End

        AnimationState                = MOVING
            Animation                = WLKA
                AnimationName        = GUTownWmn_WLKA
                AnimationMode        = LOOP
            End
            Flags                    = RANDOMSTART

        End

    End



  Side = Dwarves
  EditorSorting =     UNIT
  TransportSlotCount = 1
  ShockwaveResistance   = SHOCKWAVE_RESISTANCE_ALWAYS

  ArmorSet
    Conditions      = None
    Armor           = NoArmor
    DamageFX        = None
  End

  VisionRange = 0
  DisplayName = OBJECT:GondorPeasant
  CrushableLevel = 2




  RadarPriority = NOT_ON_RADAR
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE CAN_BE_REPULSED CREEP

    Body = ActiveBody ModuleTag_02
        MaxHealth         = 10
        MaxHealthDamaged  = 5
        RecoveryTime      = 5000
    End


    Behavior = AnimalAIUpdate ModuleTagWanderAround
        FleeRange = 0
        FleeDistance = 0
        WanderPercentage = 5
        MaxWanderDistance = 15
        MaxWanderRadius = 30
        UpdateTimer = 99999999
    End


    Behavior = EntEnragedUpdate EnragedBehaviorModuleTag
        HatedObjectFilter     = ANY +INFANTRY +HERO +CAVALRY +MONSTER ENEMIES
        EnragedTime           = 10000
        TimeUntilCanRageAgain = 1000
        EnragedTransitionTime = 0
    End

    LocomotorSet
        Locomotor = GondorCivilianLocomotor
        Condition = SET_NORMAL
        Speed     = 17
    End

    LocomotorSet
        Locomotor = GondorCivilianLocomotor
        Condition = SET_PANIC
        Speed     = 45
    End

    LocomotorSet
        Locomotor = GondorCivilianLocomotor
        Condition = SET_ENRAGED
        Speed     = 45
    End


     Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AfraidOf          =    ANY +INFANTRY +HERO +CAVALRY +MONSTER ENEMIES
        AlwaysAfraidOf    =    ANY +INFANTRY +HERO +CAVALRY +MONSTER ENEMIES
        PointAt           =    EMOTION_POINTAT_OBJECTFILTER
        HeroScanDistance  =    150
        FearScanDistance  =    INFANTRY_FEAR_SCAN_RADIUS
        AddEmotion        =    Terror_Base
        AddEmotion        =    Doom_Base
        AddEmotion        =    UncontrollableFear_Base_Evil
        AddEmotion        =    FearIdle_Base
        AddEmotion        =    FearBusy_Base
    End


    Behavior = SlavedUpdate ModuleTag_Slave
        DieOnMastersDeath = Yes
    End


    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -EXPLODED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL CivilianWomanVoiceDie
    End

    Behavior = SlowDeathBehavior ModuleTag_FF
        DeathTypes = NONE +EXPLODED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL CivilianWomanVoiceDie
    End

  Behavior = SquishCollide ModuleTag_06

  End

    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes
    Shadow = SHADOW_DECAL

    ShadowSizeX = 12
    ShadowSizeY = 12
    ShadowTexture = ShadowI
End


Object ThalWellReplenishPing

    EvaEnemyObjectSightedEvent = None


    EditorSorting   = SYSTEM
    KindOf = NO_COLLIDE IMMOBILE UNATTACKABLE IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION


    Body = ImmortalBody ModuleTag_01
        MaxHealth = 10000
        InitialHealth = 10000
    End

    Behavior = SlavedUpdate ModuleTag_Slave
        DieOnMastersDeath = Yes
    End

    Behavior = PassiveAreaEffectBehavior ModuleTag_Leadership
        UpgradeRequired      = Upgrade_SeestadtWell
        EffectRadius         = 250
        PingDelay            = 2000
        ModifierName         = ZwergeStatueLeadership
        AllowFilter          = ANY +INFANTRY +CAVALRY -HERO -MONSTER -MACHINE -STRUCTURE -CREEP -DOZER -SHIP -ThalPeasent01 -ThalPeasent02 -ThalPeasent03 ALLIES
    End

    Behavior = PassiveAreaEffectBehavior ModuleTag_SplashOfHealingWater_Ahh
        EffectRadius          = 200
        PingDelay             = 3000
        HealPercentPerSecond  = 1%
        AllowFilter           = ANY +INFANTRY +CAVALRY -MACHINE -IMMOBILE +DOZER -MordorNekromantSauron -MordorSauron_mod -MordorAnnatar -MordorGorthaur
        NonStackable          = Yes
        HealFX                = FX_SpellHealUnitHealBuff
    End

    Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
        IdleSpawnRate            = 10000
        UnitSpawnFX              = FX_BannerCarrierSpawnUnit
        ReplenishNearbyHorde     = Yes
        ReplenishAllNearbyHordes = Yes
        ScanHordeDistance        = 200
    End
End


