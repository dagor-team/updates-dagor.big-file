Object RohanTreeBerd

	ButtonImage	= HITreebeard
	SelectPortrait	= HPTreeBeard

	Draw = W3DScriptedModelDraw ModuleTag_01

		StaticModelLODMode = Yes
		WadingParticleSys = EntRipples
		WadingParticleSys = EntSplash

		OkToChangeModelColor = Yes

		ExtraPublicBone = B_POINT1R
		ExtraPublicBone = PASSENGER
		ExtraPublicBone = IMPACT
		ExtraPublicBone = ROCK

		DefaultModelConditionState
			Model = RUTreeberd_SKN
			Skeleton	= RUTreeberd_SKL
			WeaponLaunchBone = PRIMARY Firepoint
			WeaponLaunchBone = SECONDARY Firepoint

			ParticleSysBone = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
   		End

 		ModelConditionState = AFLAME
			Model = RUTreeberd_SKN
			Skeleton	= RUTreeberd_SKL
			ParticleSysBone     = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
  			ParticleSysBone     = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
 			ParticleSysBone     = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
  			ParticleSysBone     = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
 			ParticleSysBone     = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
 			ParticleSysBone     = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
   		End

		IdleAnimationState
			StateName = Idle
			Animation = IDLA
				AnimationName = RUTreeberd_IDLA
				AnimationBlendTime  = 5
			End
			BeginScript
				CurDrawableHideSubObjectPermanently("ROCK")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25") return end
				if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
        if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
			EndScript
      ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: no
		End

		AnimationState	= SPECIAL_WEAPON_TWO
			Animation = FrontKick
				AnimationName		= RUTreeberd_ATKE
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
		End


		AnimationState = DYING BURNINGDEATH
			Animation
				AnimationName = RUTreeberd_DIEA
				AnimationMode = ONCE
				AnimationBlendTime = 10
			End





		End

		AnimationState			= BURNINGDEATH
			Animation
				AnimationName	= RUTreeberd_MFDA
				AnimationMode	= LOOP
				Distance		= 100
			End
			BeginScript
				CurDrawableHideSubObjectPermanently("ROCK")
			EndScript
		End

		AnimationState = DYING DEATH_2
			Animation = Die
				AnimationName = RUTreeberd_MOTC
				AnimationMode = ONCE_BACKWARDS
			End
      Flags = START_FRAME_LAST
		End

		AnimationState = AFLAME DYING SPLATTED
			Animation = DieSplat
				AnimationName = RUTreeberd_LNDA
				AnimationMode = ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
		End

		AnimationState = AFLAME DYING
			Animation = Die
				AnimationName = RUTreeberd_DIEA
				AnimationMode = ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
		End

		AnimationState = DYING SPLATTED
			Animation = DieSplat
				AnimationName	= RUTreeberd_LNDA
				AnimationMode	= ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
		End

		AnimationState = DYING WEAPONSET_TOGGLE_1
			Animation = Die
				AnimationName = RUTreeberd_DIEB
				AnimationMode = ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
		End

		AnimationState = DYING
			Animation = Die
				AnimationName = RUTreeberd_DIEA
				AnimationMode = ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
		End


		AnimationState   = JUST_BUILT
			StateName		= STATE_JustBuilt
			Animation = Sprout
				AnimationName = RUTreeberd_MOTC
				AnimationMode = ONCE
				AnimationBlendTime = 0
				AnimationSpeedFactorRange = 0.5 0.5
			End
			BeginScript
				CurDrawableShowSubObjectPermanently("ROCK")
			EndScript
			FXEvent	= Frame:25 Name:FX_EntSprout
			FXEvent = Frame:25 Name:FX_EntSproutButterflies
		End

    AnimationState = PREPARING
    StateName = STATE_Debate
      Animation = Debate
        AnimationName = RUTreeberd_MOTB
        AnimationMode = LOOP
        AnimationBlendTime = 30
        AnimationSpeedFactorRange = 0.8 1.1
      End
      Flags = RANDOMSTART
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

    TransitionState = TRANS_Sprout
      Animation = Sprout
        AnimationName = RUTreeberd_MOTA
        AnimationMode = ONCE
        AnimationBlendTime = 0
        AnimationSpeedFactorRange = 0.5 0.5
      End

      FXEvent = Frame:25 Name:FX_EntSprout
      FXEvent = Frame:25 Name:FX_EntSproutButterflies
    End


    AnimationState = AFLAME STUNNED_FLAILING
      Animation = StunFlail
        AnimationName = RUTreeberd_FLYA
        AnimationMode = LOOP
      End
      Flags = RANDOMSTART
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

    AnimationState = AFLAME STUNNED
      Animation = Stun
        AnimationName = RUTreeberd_LNDA
        AnimationMode = ONCE
      End
      ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

    AnimationState = AFLAME STUNNED_STANDING_UP
      Animation = Stun
        AnimationName = RUTreeberd_GTPA
        AnimationMode = ONCE
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

		AnimationState        = STUNNED_FLAILING
			Animation           = StunFlail
				AnimationName     = RUTreeberd_FLYA
				AnimationMode      = LOOP
			End
			Flags               = RANDOMSTART
		End

		AnimationState        = STUNNED
			Animation           = Stun
				AnimationName     = RUTreeberd_LNDA
				AnimationMode      = ONCE
			End
			ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
		End

		AnimationState        = STUNNED_STANDING_UP
			Animation           = Stun
				AnimationName     = RUTreeberd_GTPA
				AnimationMode      = ONCE
			End
		End



		AnimationState				= INITIAL_ENRAGED
			StateName				= Enraged
			Animation				= RUTreeBerd_MADA
				AnimationName		= RUTreeBerd_MADA
				AnimationMode		= ONCE
			End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
		End

		AnimationState = USER_3
			Animation = OnFire
				AnimationName = RUTreeberd_RCTD
				AnimationMode = ONCE
				AnimationBlendTime = 20
			End
			FXEvent	= Frame:54 Name:FX_EntRightFootStep
		End



		AnimationState = MOVING FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
			Animation = RunAndFire
				AnimationName       = RUTreeberd_ATRB
				AnimationMode       = LOOP
			End
		End



		AnimationState        = WEAPONSET_ENRAGED TURN_LEFT
			Animation           = Walk
				AnimationName     = RUTreeberd_TRNL
				AnimationMode     = LOOP
				AnimationSpeedFactorRange = 1.1 1.1
			End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
		End

		AnimationState        = WEAPONSET_ENRAGED TURN_RIGHT
			Animation           = Walk
				AnimationName     = RUTreeberd_TRNR
				AnimationMode     = LOOP
				AnimationSpeedFactorRange = 1.1 1.1
			End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
		End


		AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
			Animation = Punch
				AnimationName		= RUTreeberd_ATKA
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
			Animation = Punt
				AnimationName		= RUTreeberd_ATKD
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
			Animation = FrontKick
				AnimationName		= RUTreeberd_ATKE
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
			Animation = KirkPunch
				AnimationName		= RUTreeberd_ATKF
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
			BeginScript
				if CurDrawableIsCurrentTargetKindof("MONSTER") then
					if GetClientRandomNumberReal(0,1) > 0.50 then
						return ("FrontKick")
					else
						return ("KirkPunch")
					end
				else
					if GetClientRandomNumberReal(0,1) > 0.50 then
						return ("Punch")
					else
						return ("Punt")
					end
				end
			EndScript
		End

		AnimationState = FIRING_OR_PREATTACK_B WEAPONSET_ENRAGED
			Animation = FrontKickOnBuilding
				AnimationName		= RUTreeberd_ATKE
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
			Animation = KirkPunchOnBuilding
				AnimationName		= RUTreeberd_ATKF
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
		End



		AnimationState = WEAPONSET_ENRAGED MOVING PANICKING
			Animation = Jump
				AnimationName				= RUTreeberd_MFDA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.5 0.5
				AnimationBlendTime			= 5
				Distance					= 50
			End
			BeginScript
				CurDrawableHideSubObjectPermanently("ROCK")
			EndScript
			FXEvent	= Frame:4 Name:FX_EntLeftFootStep
			FXEvent	= Frame:18 Name:FX_EntRightFootStep
		End

    AnimationState = WEAPONSET_ENRAGED AFLAME WADING
      Animation = Splash
        AnimationName = RUTreeberd_SPLA
        AnimationMode = LOOP
        AnimationBlendTime = 5
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

		AnimationState        = WEAPONSET_ENRAGED MOVING
			Animation           = AngryStompWalk
				AnimationName     = RUTreeberd_WLKC
				AnimationMode      = LOOP
				AnimationBlendTime  = 5
				Distance			= 50
			End
			BeginScript
				CurDrawableHideSubObjectPermanently("ROCK")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_AccelerateENR") end
				if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_AccelerateENR") end
			EndScript
			Flags = MAINTAIN_FRAME_ACROSS_STATES
			FXEvent	= Frame:0 Name:FX_EntLeftFootStep
			FXEvent	= Frame:39 Name:FX_EntRightFootStep
			FXEvent	= Frame:79 Name:FX_EntLeftFootStep
			FXEvent	= Frame:129 Name:FX_EntRightFootStep
		End

		AnimationState		= WEAPONSET_ENRAGED HIT_REACTION HIT_LEVEL_1
			Animation	= Hit_Level_1_a
				AnimationName	= RUTreeberd_HITA
				AnimationMode	= ONCE
			End
		End

		AnimationState		= WEAPONSET_ENRAGED
			Animation	= AngryIdle
				AnimationName	= RUTreeberd_IDLC
				AnimationMode	= LOOP
			End
			BeginScript
				CurDrawableHideSubObjectPermanently("ROCK")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00ENR") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75ENR") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50ENR") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25ENR") return end
				if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
        if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
			EndScript
      ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: no
		End



    AnimationState = AFLAME TURN_LEFT
      Animation = Walk
        AnimationName = RUTreeberd_TRNL
        AnimationMode = LOOP
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End
    AnimationState = AFLAME TURN_RIGHT
      Animation = Walk
        AnimationName = RUTreeberd_TRNR
        AnimationMode = LOOP
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End
    AnimationState = AFLAME MOVING
      Animation = Jump
        AnimationName = RUTreeberd_MFDA
        AnimationMode = LOOP
        AnimationSpeedFactorRange = 0.5 0.5
        AnimationBlendTime  = 5
        Distance = 50
      End
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      FXEvent = Frame:4 Name:FX_EntLeftFootStep
      FXEvent = Frame:18 Name:FX_EntRightFootStep
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
        CurDrawablePlaySound("EntRunFire")
      EndScript
    End
    AnimationState = AFLAME WADING
      Animation = Splash
        AnimationName = RUTreeberd_SPLA
        AnimationMode = LOOP
        AnimationBlendTime = 5
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End



		AnimationState = RELOADING_A WEAPONSET_TOGGLE_1
			Animation
				AnimationName		= RUTreeberd_GRBA
				AnimationMode		= ONCE
				AnimationBlendTime	= 0
			End
			FXEvent	= Frame:20	Name: FX_EntRockGrab
			FXEvent	= Frame:24	Name: FX_EntRockYank
			BeginScript
				CurDrawableShowSubObjectPermanently("ROCK")
			EndScript
		End

		AnimationState		= TURN_RIGHT WEAPONSET_TOGGLE_1
			StateName	= Turn
			Animation
				AnimationName	= RUTreeberd_TNR2
				AnimationMode	= LOOP
				AnimationSpeedFactorRange = 1.1 1.1
			End
		End

		AnimationState		= TURN_LEFT WEAPONSET_TOGGLE_1
			StateName	= Turn
			Animation
				AnimationName	= RUTreeberd_TNL2
				AnimationMode	= LOOP
				AnimationSpeedFactorRange = 1.1 1.1
			End
		End

		AnimationState = FIRING_OR_PREATTACK_A AIM_NEAR WEAPONSET_TOGGLE_1
			Animation = CloseRock
				AnimationName		= RUTreeberd_THRC
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes

			End
			BeginScript
				CurDrawableShowSubObjectPermanently("ROCK")
			EndScript
			FrameForPristineBonePositions = 39
		End

		AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
			Animation = FarRock
				AnimationName		= RUTreeberd_THRB
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes

			End
			BeginScript
				CurDrawableShowSubObjectPermanently("ROCK")
			EndScript
			FrameForPristineBonePositions = 40
		End



		AnimationState = MOVING FIRING_OR_PREATTACK_A
			Animation = RunAndFire
				AnimationName       = RUTreeberd_ATRA
				AnimationMode       = LOOP
			End
		End

		AnimationState				= TURN_RIGHT
			StateName				= Turn
			Animation				= Walk
				AnimationName		= RUTreeberd_TRNR
				AnimationMode		= LOOP
			End
		End

		AnimationState				= TURN_LEFT
			StateName				= Turn
			Animation				= Walk
				AnimationName		= RUTreeberd_TRNL
				AnimationMode		= LOOP
			End
		End

		AnimationState = FIRING_OR_PREATTACK_A
			Animation = Punch
				AnimationName		= RUTreeberd_ATKA
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
			Animation = Punt
				AnimationName		= RUTreeberd_ATKD
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
			Animation = FrontKick
				AnimationName		= RUTreeberd_ATKE
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
			Animation = KirkPunch
				AnimationName		= RUTreeberd_ATKF
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
			BeginScript
				if CurDrawableIsCurrentTargetKindof("MONSTER") then
					if GetClientRandomNumberReal(0,1) > 0.50 then
						return ("FrontKick")
					else
						return ("KirkPunch")
					end
				else
					if GetClientRandomNumberReal(0,1) > 0.50 then
						return ("Punch")
					else
						return ("Punt")
					end
				end
			EndScript
		End

		AnimationState = FIRING_OR_PREATTACK_B
			Animation = FrontKickOnBuilding
				AnimationName		= RUTreeberd_ATKE
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
			Animation = KirkPunchOnBuilding
				AnimationName		= RUTreeberd_ATKF
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				UseWeaponTiming		= Yes
			End
		End



		AnimationState = PACKING GRAB_BUILDING_CHUNK
			Animation = Pack
				AnimationName		= RUTreeberd_GBB2
				AnimationMode		= ONCE
				AnimationBlendTime	= 0
			End
		End

		AnimationState = UNPACKING GRAB_BUILDING_CHUNK
			Animation = Pack
				AnimationName		= RUTreeberd_GBB1
				AnimationMode		= ONCE
				AnimationBlendTime	= 20
			End
			ParticleSysBone = ParticleNode01 TreeBeardAttackLeavesFir
		End

		AnimationState = PACKING
			Animation = Pack
				AnimationName	= RUTreeberd_GBA2
				AnimationMode	= ONCE
			End
		End

		AnimationState = UNPACKING
			Animation = Pack
				AnimationName	= RUTreeberd_GBA1
				AnimationMode	= ONCE
			End
		End


		AnimationState = MOVING PANICKING
			Animation = Jump
				AnimationName				= RUTreeberd_MFDA
				AnimationMode				= LOOP
				AnimationSpeedFactorRange	= 0.5 0.5
				AnimationBlendTime			= 5
				Distance					= 50
			End
			BeginScript
				CurDrawableHideSubObjectPermanently("ROCK")
			EndScript
			FXEvent	= Frame:4 Name:FX_EntLeftFootStep
			FXEvent	= Frame:18 Name:FX_EntRightFootStep
		End

		AnimationState				= MOVING WEAPONSET_TOGGLE_1
			StateName				= Moving
			Animation
				AnimationName		= RUTreeberd_WLKE
				Distance			= 50
				AnimationMode		= LOOP
				AnimationBlendTime	= 5
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
				if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
			EndScript
			Flags = MAINTAIN_FRAME_ACROSS_STATES
			FXEvent	= Frame:0 Name:FX_EntLeftFootStep
			FXEvent	= Frame:26 Name:FX_EntRightFootStep
		End

		AnimationState				= MOVING
			StateName				= Moving
			Animation				= Walk
				AnimationName		= RUTreeberd_WLKC
				Distance			= 50
				AnimationMode		= LOOP
				AnimationBlendTime	= 5
			End
			BeginScript
				CurDrawableHideSubObjectPermanently("ROCK")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
				if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
			EndScript
			Flags = MAINTAIN_FRAME_ACROSS_STATES
			FXEvent	= Frame:0 Name:FX_EntLeftFootStep
			FXEvent	= Frame:39 Name:FX_EntRightFootStep
			FXEvent	= Frame:79 Name:FX_EntLeftFootStep
			FXEvent	= Frame:129 Name:FX_EntRightFootStep
		End

		AnimationState						= HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
			Animation						= Hit_Level_1_a
				AnimationName				= RUTreeberd_HITB
				AnimationMode				= ONCE
			End
		End

		AnimationState						= HIT_REACTION HIT_LEVEL_1
			Animation						= Hit_Level_1_a
				AnimationName				= RUTreeberd_HITA
				AnimationMode				= ONCE
			End
		End

		AnimationState						= WEAPONSET_TOGGLE_1
			StateName						= Idle
			Animation
				AnimationName				= RUTreeberd_IDLB
				AnimationMode				= LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_JustBuilt" then CurDrawableShowSubObjectPermanently("ROCK") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75R") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50R") return end
				if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25R") return end
				if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
			EndScript
			ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: no
		End


		TransitionState = TRANS_Accelerate
			Animation = Transition
				AnimationName		= RUTreeberd_ACLA
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				AnimationSpeedFactorRange 0.75 0.75
			End
		End

		TransitionState = TRANS_Stop75
			Animation = Transition
				AnimationName		= RUTreeberd_DCLC
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				AnimationSpeedFactorRange 0.66 0.66
			End
		End

		TransitionState = TRANS_Stop50
			Animation = Transition
				AnimationName		= RUTreeberd_DCLB
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				AnimationSpeedFactorRange 0.66 0.66
			End
		End

		TransitionState = TRANS_Stop25
			Animation = Transition
				AnimationName		= RUTreeberd_DCLD
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				AnimationSpeedFactorRange 0.66 0.66
			End
		End

		TransitionState = TRANS_Stop00
			Animation = Transition
				AnimationName		= RUTreeberd_DCLA
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				AnimationSpeedFactorRange 0.66 0.66
			End
		End



		TransitionState = TRANS_AccelerateR
			Animation = Transition
				AnimationName		= RUTreeberd_ACLB
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				AnimationSpeedFactorRange 0.75 0.75
			End
		End

		TransitionState = TRANS_Stop75R
			Animation
				AnimationName		= RUTreeberd_DCLG
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				AnimationSpeedFactorRange 0.66 0.66
			End
		End

		TransitionState = TRANS_Stop50R
			Animation
				AnimationName		= RUTreeberd_DCLF
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				AnimationSpeedFactorRange 0.66 0.66
			End
		End

		TransitionState = TRANS_Stop25R
			Animation
				AnimationName		= RUTreeberd_DCLH
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				AnimationSpeedFactorRange 0.66 0.66
			End
		End

		TransitionState = TRANS_Stop00R
			Animation
				AnimationName		= RUTreeberd_DCLE
				AnimationMode		= ONCE
				AnimationBlendTime	= 5
				AnimationSpeedFactorRange 0.66 0.66
			End
		End



		TransitionState = TRANS_AccelerateENR
			Animation = Transition
				AnimationName		= RUTreeberd_ACLB
				AnimationMode		= ONCE
				AnimationBlendTime	= 5

			End
		End

		TransitionState = TRANS_Stop75ENR
			Animation
				AnimationName		= RUTreeberd_DCLG
				AnimationMode		= ONCE
				AnimationBlendTime	= 5

			End
		End

		TransitionState = TRANS_Stop50ENR
			Animation
				AnimationName		= RUTreeberd_DCLF
				AnimationMode		= ONCE
				AnimationBlendTime	= 5

			End
		End

		TransitionState = TRANS_Stop25ENR
			Animation
				AnimationName		= RUTreeberd_DCLH
				AnimationMode		= ONCE
				AnimationBlendTime	= 5

			End
		End

		TransitionState = TRANS_Stop00ENR
			Animation
				AnimationName		= RUTreeberd_DCLE
				AnimationMode		= ONCE
				AnimationBlendTime	= 5

			End
		End
	End

	Side			= Elves
	EditorSorting		= UNIT
	ThreatLevel		= TREEBEARD_THREAT_LEVEL
	ThingClass		= MEDIUM_MONSTER
	MaxSimultaneousOfType	= 1
	TransportSlotCount	= TRANSPORTSLOTCOUNT_MONSTER
	CommandPoints		= 0

	WeaponSet
		Conditions	= None
		Weapon		= PRIMARY	RohanTreeBeardPunch
		Weapon		= SECONDARY	RohanBuildingTeardown
		OnlyAgainst	= SECONDARY	STRUCTURE BLOCKING_GATE
	End

	WeaponSet
		Conditions	= WEAPONSET_TOGGLE_1
		Weapon		= PRIMARY	RohanEntRockThrow
	End

	ArmorSet
		Conditions      = None
		Armor           = EntArmor
		DamageFX        = EntDamageFX
	End

	ShockwaveResistance = SHOCKWAVE_RESISTANCE_IMMUNE

	BuildFadeInOnCreateTime = 20

	VisionRange	= VISION_ENT
	ShroudClearingRange = SHROUD_CLEAR_ENT

	MaxVisionBonusPercent = 300%
	VisionBonusTestRadius = 200
	VisionBonusPercentPerFoot = 1.0%

	BountyValue	= ROHAN_TREEBEARD_BOUNTY_VALUE
	DisplayName	= OBJECT:RohanTreeBeard

	CrusherLevel	= 1
	UseCrushAttack	= No
	CommandSet	= RohanTreeBeardCommandSet

	VoiceAttack		= TreebeardVoiceAttackMS
	VoiceAttackCharge	= TreebeardVoiceAttackChargeMS
	VoiceAttackMachine	= TreebeardVoiceAttackMS
	VoiceAttackStructure	= TreebeardVoiceAttackBuildingMS
	VoiceCreated		= TreebeardVoiceSaluteMS
	VoiceFullyCreated	= TreebeardVoiceSalute
	VoiceFear		= TreebeardVoiceHelpMeMS
	VoiceGuard		= TreebeardVoiceMove
	VoiceMove		= TreebeardVoiceMoveMS
	VoicePriority		= 72
	VoiceSelect		= TreebeardVoiceSelectMS
	VoiceSelectBattle	= TreebeardVoiceSelectBattleMS

	SoundMoveLoop		= EntVoxMoveLoop
	SoundImpact		= ImpactHorse

	UnitSpecificSounds
		VoiceInitiateCaptureBuilding	= TreebeardVoiceMoveMS
	End

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
	EvaEventDieOwner	= TreebeardDie

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:BuildingEntMootCouncil				Animation:RUTReeBerd_SKL.RUTreeberd_MOTA	Frames:1
		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_MOTA	Frames:225 253
		AnimationSound = Sound:BuildingEntMootCouncil				Animation:RUTReeBerd_SKL.RUTreeberd_MOTB	Frames:1

		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GBA1	Frames:9 13
		AnimationSound = Sound:TrollTreeSwingLight				Animation:RUTReeBerd_SKL.RUTreeBerd_GBA1	Frames:10
		AnimationSound = Sound:EntGrabRock					Animation:RUTReeBerd_SKL.RUTreeberd_GBA1	Frames:16
		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GBA2	Frames:28 34
		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GBB1	Frames:18
		AnimationSound = Sound:TrollTreeSwingLight				Animation:RUTReeBerd_SKL.RUTreeBerd_GBB1	Frames:16
		AnimationSound = Sound:EntGrabRock					Animation:RUTReeBerd_SKL.RUTreeBerd_GBB1	Frames:21
		AnimationSound = Sound:EntGrabBuildingChunk				Animation:RUTReeBerd_SKL.RUTreeberd_GBB1	Frames:37
		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GBB2	Frames:24

		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GRBC	Frames:13 26 117 179 223
		AnimationSound = Sound:EntGrabRock					Animation:RUTReeBerd_SKL.RUTreeberd_GRBC	Frames:48
		AnimationSound = Sound:EntVoxEfforts					Animation:RUTReeBerd_SKL.RUTreeberd_GRBC	Frames:160
		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GRBD	Frames:13 26 117 179 223
		AnimationSound = Sound:EntGrabRock					Animation:RUTReeBerd_SKL.RUTreeberd_GRBD	Frames:48
		AnimationSound = Sound:EntVoxEfforts					Animation:RUTReeBerd_SKL.RUTreeberd_GRBD	Frames:160
		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GRBE	Frames:13 26 117 179 223
		AnimationSound = Sound:EntGrabRock					Animation:RUTReeBerd_SKL.RUTreeberd_GRBE	Frames:48
		AnimationSound = Sound:EntVoxEfforts					Animation:RUTReeBerd_SKL.RUTreeberd_GRBE	Frames:160
		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GRBF	Frames:13 26 117 179 223
		AnimationSound = Sound:EntGrabRock					Animation:RUTReeBerd_SKL.RUTreeberd_GRBF	Frames:48
		AnimationSound = Sound:EntVoxEfforts					Animation:RUTReeBerd_SKL.RUTreeberd_GRBF	Frames:160

		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_ATKA	Frames:9 78
		AnimationSound = Sound:ImpactEntGenericPunch				Animation:RUTReeBerd_SKL.RUTreeberd_ATKA	Frames:31
 		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_ATKD	Frames:65
		AnimationSound = Sound:ImpactEntGenericKick				Animation:RUTReeBerd_SKL.RUTreeberd_ATKD	Frames:32
		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_ATKE	Frames:70
		AnimationSound = Sound:ImpactEntGenericKick				Animation:RUTReeBerd_SKL.RUTreeberd_ATKE	Frames:31
		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_ATKF	Frames:16 82
		AnimationSound = Sound:ImpactEntGenericPunch				Animation:RUTReeBerd_SKL.RUTreeberd_ATKF	Frames:32

		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_ACLA	Frames:9
		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_DCLA	Frames:17 42
		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_DCLB	Frames:17 44
		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_DCLC	Frames:11 41
		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_DCLD	Frames:32

		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_WLKA	Frames:33 76
		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_WLKC	Frames:22 48
		AnimationSound = Sound:EntRunStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_RUNA	Frames:4 24

		AnimationSound = Sound:EntRunStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_TRNL	Frames:12 27
		AnimationSound = Sound:EntRunStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_TRNR	Frames:12 27
		AnimationSound = Sound:EntRunStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_TNL2	Frames:18 38
		AnimationSound = Sound:EntRunStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_TNR2	Frames:18 38

		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_THRB	Frames:12 44
		AnimationSound = Sound:TrollTreeSwing					Animation:RUTReeBerd_SKL.RUTreeBerd_THRB	Frames:36
		AnimationSound = Sound:TrollTreeSwingLight				Animation:RUTReeBerd_SKL.RUTreeBerd_THRC	Frames:29

		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_MADA	Frames:75
		AnimationSound = Sound:EntPanic						Animation:RUTReeBerd_SKL.RUTreeBerd_MADA	Frames:17
		AnimationSound = Sound:EntRunStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_MFDA	Frames:2 14

		AnimationSound = Sound:EntRunStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD	Frames:5 120 206
		AnimationSound = Sound:EntSeeFirePart1					Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD	Frames:40
		AnimationSound = Sound:EntSeeFirePart2					Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD	Frames:70
		AnimationSound = Sound:TrollTreeSwing					Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD	Frames:121
		AnimationSound = Sound:EntPanic						Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD	Frames:150

		AnimationSound = Sound:EntSplashWater					Animation:RUTReeBerd_SKL.RUTreeBerd_SPLA	Frames:0

		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_HITA	Frames:11 52
		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_GTPA	Frames:14 24
		AnimationSound = Sound:EntFootStep		ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_DIEA	Frames:7
		AnimationSound = Sound:EntDieFall					Animation:RUTReeBerd_SKL.RUTreeBerd_DIEA	Frames:63
		AnimationSound = Sound:EntDieFall					Animation:RUTReeBerd_SKL.RUTreeBerd_LNDA	Frames:3
		AnimationSound = Sound:EntBodyfall					Animation:RUTReeBerd_SKL.RUTreeBerd_LNDA	Frames:24

		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_MOTA	Frames:225 253
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_GBA1	Frames:9 13
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_GBA2	Frames:28 34
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_GBB1	Frames:18
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_GBB2	Frames:24
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_GRBC	Frames:13 26 117 179 223
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_GRBD	Frames:13 26 117 179 223
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_GRBE	Frames:13 26 117 179 223
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_GRBF	Frames:13 26 117 179 223
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_ATKA	Frames:9 78
 		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_ATKD	Frames:65
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_ATKE	Frames:70
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_ATKF	Frames:16 82
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeberd_ACLA	Frames:9
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeberd_DCLA	Frames:17 42
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeberd_DCLB	Frames:17 44
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeberd_DCLC	Frames:11 41
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeberd_DCLD	Frames:32
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_WLKA	Frames:33 76
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_WLKC	Frames:22 48
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_THRB	Frames:12 44
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_MADA	Frames:75
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeberd_HITA	Frames:11 52
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeberd_GTPA	Frames:14 24
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeberd_DIEA	Frames:7

		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_RUNA	Frames:4 24
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_TRNL	Frames:12 27
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_TRNR	Frames:12 27
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_TNL2	Frames:18 38
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_TNR2	Frames:18 38
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_MFDA	Frames:2 14
		AnimationSound = Sound:EntFootstepWater		RequiredMC:WADING	Animation:RUTreeberd_SKL.RUTreeBerd_RCTD	Frames:5 120 206
	End

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key		= Ent Unit Infantry
		UnitWeight	= 2
	End

	RadarPriority	= UNIT
	KindOf		= PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_INFANTRY CAN_ATTACK_WALLS SCARY HERO BIG_MONSTER HEAVY_MELEE_HITTER SIEGEENGINE
	BuildCost	= MEDIUM_HERO_COST
	BuildTime	= MEDIUM_HERO_BUILDTIME

	Behavior = FlammableUpdate FlammableModuleTag_15
		AflameDuration		= 0
		AflameDamageDelay	= 500
		AflameDamageAmount	= 30
		FlameDamageLimit	= #MULTIPLY( ROHAN_TREEBEARD_HEALTH ROHAN_ENT_FIRE_THRESHOLD )
		FlameDamageExpiration	= 10000
		SetBurnedStatus		= No
	End

	Body = ActiveBody ModuleTag_ActiveBody
		CheerRadius		= EMOTION_CHEER_RADIUS
		MaxHealth		= ROHAN_TREEBEARD_HEALTH
		BurningDeathBehavior	= Yes
	End

	Behavior = AutoHealBehavior ModuleTag_EntHealing
		StartsActive		= Yes
		HealingAmount		= 50
		HealingDelay		= 1000
		StartHealingDelay	= 15000
		HealOnlyIfNotInCombat	= Yes
	End

	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	= Yes ATTACK_BUILDINGS
		AILuaEventsList		= EntFunctions
		BurningDeathTime	= BURNINGDEATH_DURATION_ENT
	End

	Behavior = FireWeaponWhenDeadBehavior FireDeadTag
		RequiredStatus	= DEATH_1
		StartsActive	= Yes
		DelayTime	= 2300
		DeathWeapon	= RohanEntDeath
		WeaponOffset	= X:-48 Y:0 Z:0
	End

	LocomotorSet
		Locomotor = RohanTreeBeardLocomotor
		Condition = SET_NORMAL
		Speed     = ROHAN_ENT_WALK_SPEED
	End

	LocomotorSet
		Locomotor = RohanTreeBeardLocomotor
		Condition = SET_ENRAGED
		Speed     = 50
	End

	LocomotorSet
		Locomotor = RohanTreeBeardFastTurnLocomotor
		Condition = SET_PANIC
		Speed	  = 80
	End

	LocomotorSet
		Locomotor = BurningDeathLocomotorCavalry
		Condition = SET_BURNINGDEATH
		Speed	  = BURNINGDEATH_WANDERSPEED_CAVALRY
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
	End

	Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
	End

	Behavior = SlowDeathBehavior ModuleTag_50
		DeathTypes	= ALL -KNOCKBACK
		DestructionDelay = 20000
		SinkDelay	= 5000
		SinkRate	= 0.8
		Sound		= INITIAL EntDie
		DeathFlags	= DEATH_1
	End

	Behavior = SlowDeathBehavior ModuleTag_52

		DeathTypes	= NONE +KNOCKBACK
		DestructionDelay = 20000
		SinkDelay	= 5000
		SinkRate	= 0.8
		DeathFlags	= DEATH_1
	End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
		DeathTypes	= NONE +FADED
		SinkRate	= 0.8
		DestructionDelay = 10000
        	DeathFlags	= DEATH_2
        	FX		= INITIAL   FX_UnSummonEntAllies
	End

	Behavior = SquishCollide ModuleTag_06

	End

	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 2500
		HitReactionThreshold1 = 50.0
	End

  	Behavior = AimWeaponBehavior AimWeaponModuleTag
		AimNearDistance = 40.0
	End


	Behavior = MonitorConditionUpdate ModuleTag_CommandSetSwapper
		ModelConditionFlags		= ATTACKING_POSITION
		ModelConditionCommandSet	= RohanTreeBeardRockCommandSetStopBombard
		WeaponSetFlags			= WEAPONSET_TOGGLE_1
		WeaponToggleCommandSet		= RohanTreeBeardRockCommandSet
	End

	Behavior = DoCommandUpgrade Module_DoCommandUpgrade
		TriggeredBy = Upgrade_SwitchToRockThrowing
		GetUpgradeCommandButtonName = Command_ToggleTreebeardRockThrow
	End



	Behavior = SpecialAbilityUpdate ModuleTag_Grab
    		SpecialPowerTemplate    = SpecialAbilityGrabPassenger3
    		StartAbilityRange       = 15.0
    		UnpackTime              = 300
    		PreparationTime         = 1
    		PersistentPrepTime      = 630
    		PackTime                = 1000
		CustomAnimAndDuration   = AnimState:FIRING_OR_PREATTACK_A AnimTime:0 TriggerTime:0
    		AwardXPForTriggering    = 0
  	End
	Behavior = GrabPassengerSpecialPower ModuleTag_Grab2
    		SpecialPowerTemplate      	= SpecialAbilityGrabPassenger3
    		UpdateModuleStartsAttack  	= Yes
		AllowTree			= No
  	End


	Behavior = TransportContain ModuleTag_TransportContainTag01
    		ObjectStatusOfContained 	= CAN_ATTACK UNSELECTABLE
    		PassengerFilter 		= NONE +RohanMerry_MM +RohanMerry_mod +RohanMerry +RohanPippin
     		ManualPickUpFilter		= NONE +RohanMerry_MM +RohanMerry_mod +RohanMerry +RohanPippin
    		Slots		 		= 2
    		ShowPips 			= No
    		AllowEnemiesInside 		= No
    		AllowNeutralInside 		= No
    		AllowAlliesInside  		= Yes
    		AllowOwnPlayerInsideOverride	= Yes
    		DamagePercentToUnits 		= 0%
    		PassengerBonePrefix 		= PassengerBone:Passenger KindOf:HOBBIT
    		EjectPassengersOnDeath 		= Yes
    		KillPassengersOnDeath		= No

        	TypeOneForWeaponSet          = HOBBIT
    		BoneSpecificConditionState 1 PASSENGER_VARIATION_1
    		BoneSpecificConditionState 2 PASSENGER_VARIATION_2

    		EnterSound = TreebeardVoiceJoinHobbit
		ExitDelay		= 0
		NumberOfExitPaths	= 2
		ForceOrientationContainer = Yes
		ShowPips 		= No
		FadeFilter		= ALL
		FadePassengerOnEnter 	= Yes
		EnterFadeTime 		= 2000
		FadePassengerOnExit 	= Yes
		ExitFadeTime 		= 2000
			
  	End




	Behavior = InvisibilityUpdate ModuleTag_Camouflage
		InvisibilityNugget
		InvisibilityType 	= CAMOUFLAGE
		ForbiddenConditions 	= AWAY_FROM_TREES MOVING TAKING_DAMAGE FIRING_ANY USING_ABILITY
		DetectionRange 		= 300
		Options 		= ALLOW_NEAR_TREES
	End
		UnitSpecificSoundNameToUseAsVoiceMoveToStealthyArea 		= VoiceMoveToTrees
		UnitSpecificSoundNameToUseAsVoiceEnterStateMoveToStealthyArea 	= VoiceEnterStateMoveToTrees
		StartsActive = Yes
		UpdatePeriod = 2000
	End


 	Behavior = SpecialPowerModule ModuleTag_TreeToggleStarter
 		SpecialPowerTemplate		= SpecialAbilityToggleTreeForm
 		UpdateModuleStartsAttack	= Yes
 		StartsPaused			= No
 	End
	Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_TreeToggle
 		SpecialPowerTemplate    = SpecialAbilityToggleTreeForm
 		MountedTemplate		= RohanTreeBerd_Tree
 		SynchronizeTimerOnSpecialPower = SpecialAbilityWildMountainGiantStomp
 		UnpackTime              = 2000
 		PreparationTime         = 0
 		PackTime                = 0
 		OpacityTarget		= .0
 		AwardXPForTriggering    = 0
 		IgnoreFacingCheck	= Yes
	End


	Behavior = SpecialPowerModule ModuleTag_StompStarter
		SpecialPowerTemplate      = SpecialAbilityWildMountainGiantStomp
		UpdateModuleStartsAttack  = Yes
		StartsPaused		  = No
	End
	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_StompWeaponFireUpdate
		SpecialPowerTemplate    = SpecialAbilityWildMountainGiantStomp
		WhichSpecialWeapon	= 2
		SkipContinue		= Yes
		UnpackTime              = 1367
		PackTime                = 1867
		AwardXPForTriggering    = 0
		StartAbilityRange	= 80.0
		SpecialWeapon		= WildMountainGiantStomp
	End


	Behavior = AISpecialPowerUpdate StompAI
		CommandButtonName = Command_SpecialAbilityTreebeardStomp
		SpecialPowerAIType = AI_SPECIAL_POWER_RANGED_AOE_ATTACK
		SpecialPowerRange = 50
	End

    Behavior = AISpecialPowerUpdate ToggleMountedAI
        CommandButtonName = Command_TreebeardToggleTreeForm
        SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_MOUNTED
    End

    Scale                   = 1.25
	Geometry		= CYLINDER
	GeometryMajorRadius = 17.6
	GeometryHeight		= 56.0
	GeometryIsSmall		= No
	Shadow			= SHADOW_VOLUME_NON_SELF_2
	ShadowSizeX		= 36
End



Object RohanTreeBerd_Tree

	ButtonImage	= HITreebeard
	SelectPortrait	= HPTreeBeard

	Draw = W3DScriptedModelDraw ModuleTag_Draw
        OkToChangeModelColor        = Yes
	NoRotate = Yes

        ExtraPublicBone = PASSENGER01
        ExtraPublicBone = PASSENGER02
	ExtraPublicBone = PASSENGER

        DefaultModelConditionState
            Model                   = rutreeberd_tr
            Shadow                      = SHADOW_ALPHA_DECAL_DYNAMIC
            ShadowSizeX                 = 180
            ShadowSizeY                 = 180
            ShadowTexture               = sccentmoot
            ShadowOpacityStart          = 0
            ShadowOpacityFadeInTime     = 1000
            ShadowOpacityPeak           = 200
            ShadowOpacityFadeOutTime    = 1000
            ShadowOpacityEnd            = 0
            ShadowOverrideLODVisibility = Yes
        End

        ModelConditionState = DAMAGED
            Model    = rutreeberd_tr
            Texture  = rutreebeard.tga rutreebeard_d.tga
            Texture  = ptreeironhills01.tga ptreeironhills01.tga
        End
        AnimationState = DAMAGED
            EnteringStateFX = FX_StatueDamaged
        End

        ModelConditionState = REALLYDAMAGED
            Model    = rutreeberd_tr
            Texture  = rutreebeard.tga rutreebeard_d.tga
            Texture  = ptreeironhills01.tga ptreeironhills01.tga
        End
        AnimationState = REALLYDAMAGED




            EnteringStateFX            = FX_StatueDamaged
        End

        ModelConditionState = RUBBLE
            Model    = rutreeberd_tr
            Texture  = rutreebeard.tga rutreebeard_d.tga
            Texture  = ptreeironhills01.tga ptreeironhills01.tga
            ParticleSysBone SmokeLarge01 SmokeBuildingLarge
        End
        AnimationState = RUBBLE




              EnteringStateFX            = FX_StatueDamaged
        End

        ModelConditionState = POST_RUBBLE
            Model = None
            ParticleSysBone NONE SmokeBuildingMediumRubble
        End

        ModelConditionState = POST_COLLAPSE
            Model = None
            ParticleSysBone NONE SmokeBuildingMediumRubble
        End

        ModelConditionState = SNOW
            Model = rutreeberd_tr
            Texture  = rutreebeard.tga rutreebeard.tga
            Texture  = ptreeironhills01.tga ptreeironhills04.tga
        End

    End

	Side		= Elves
	IsTrainable	= No
	EditorSorting	= UNIT

	ThreatLevel	= 4.0
	ThreatBreakdown RohanEntBase_DetailedThreat
		AIKindOf = SIEGEWEAPON
	End

	ThingClass	= MEDIUM_MONSTER

	ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS

	Behavior = GrantUpgradeCreate ModuleTag_ActLikeAnOldUpgrade
		UpgradeToGrant		=    Upgrade_MiniHordeLvl1
		GiveOnBuildComplete = Yes
	End

       Behavior = AttributeModifierUpgrade ModuleTag_knock
		TriggeredBy = Upgrade_MiniHordeLvl1
		AttributeModifier = TotalResistKnockback
	End

	TransportSlotCount	= 0

	WeaponSet
		Conditions	= None
		 Weapon		= PRIMARY FakeTreeWeapon
	End

	WeaponSet
		Conditions	= WEAPONSET_HERO_MODE
		 Weapon		= PRIMARY FakeTreeWeapon
	End

	ArmorSet
		Conditions      = None
		Armor           = YavannaLegendaryHeroArmor
		DamageFX        = EntDamageFX
	End

        VisionRange	= 540
	ShroudClearingRange = 600

	MaxVisionBonusPercent = 300%
	VisionBonusTestRadius = 200
	VisionBonusPercentPerFoot = 1.0%

	DisplayName	= OBJECT:RohanTreeBeard

	CrushableLevel = 4
	CrusherLevel = 0

	 EquivalentTo	= RohanTreeBerd

	CommandSet = RohanTreeBerd_TreeCommandSet
	CommandPoints = 90

	VoiceAttack		= TreebeardVoiceAttackMS
	VoiceAttackCharge	= TreebeardVoiceAttackChargeMS
	VoiceAttackMachine	= TreebeardVoiceAttackMS
	VoiceAttackStructure	= TreebeardVoiceAttackBuildingMS
	VoiceCreated		= TreebeardVoiceSaluteMS
	VoiceFullyCreated	= TreebeardVoiceSalute
	VoiceFear		= TreebeardVoiceHelpMeMS
	VoiceGuard		= TreebeardVoiceMove
	VoiceMove		= TreebeardVoiceMoveMS
	VoicePriority		= 72
	VoiceSelect		= TreebeardVoiceSelectMS
	VoiceSelectBattle	= TreebeardVoiceSelectBattleMS

    SoundImpact		= ImpactHorse

    CrowdResponseKey = ElfHero

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
		Key		= Ent Unit Infantry
		UnitWeight	= 2
	End

	ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
		MaxUpdateRangeCap = 800
		AnimationSound = Sound:BuildingEntMootCouncil				Animation:RUTReeBerd_SKL.RUTreeberd_MOTA	Frames:1
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_MOTA	Frames:225 253
		AnimationSound = Sound:BuildingEntMootCouncil				Animation:RUTReeBerd_SKL.RUTreeberd_MOTB	Frames:1

		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GBA1	Frames:9 13
		AnimationSound = Sound:TrollTreeSwingLight				Animation:RUTReeBerd_SKL.RUTreeBerd_GBA1	Frames:10
		AnimationSound = Sound:EntGrabRock						Animation:RUTReeBerd_SKL.RUTreeberd_GBA1	Frames:16
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GBA2	Frames:28 34
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GBB1	Frames:18
		AnimationSound = Sound:TrollTreeSwingLight				Animation:RUTReeBerd_SKL.RUTreeBerd_GBB1	Frames:16
		AnimationSound = Sound:EntGrabRock						Animation:RUTReeBerd_SKL.RUTreeBerd_GBB1	Frames:21
		AnimationSound = Sound:EntGrabBuildingChunk				Animation:RUTReeBerd_SKL.RUTreeberd_GBB1	Frames:37
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GBB2	Frames:24

		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GRBC	Frames:13 26 117 179 223
		AnimationSound = Sound:EntGrabRock						Animation:RUTReeBerd_SKL.RUTreeberd_GRBC	Frames:48
		AnimationSound = Sound:EntVoxEfforts					Animation:RUTReeBerd_SKL.RUTreeberd_GRBC	Frames:160
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GRBD	Frames:13 26 117 179 223
		AnimationSound = Sound:EntGrabRock						Animation:RUTReeBerd_SKL.RUTreeberd_GRBD	Frames:48
		AnimationSound = Sound:EntVoxEfforts					Animation:RUTReeBerd_SKL.RUTreeberd_GRBD	Frames:160
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GRBE	Frames:13 26 117 179 223
		AnimationSound = Sound:EntGrabRock						Animation:RUTReeBerd_SKL.RUTreeberd_GRBE	Frames:48
		AnimationSound = Sound:EntVoxEfforts					Animation:RUTReeBerd_SKL.RUTreeberd_GRBE	Frames:160
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_GRBF	Frames:13 26 117 179 223
		AnimationSound = Sound:EntGrabRock						Animation:RUTReeBerd_SKL.RUTreeberd_GRBF	Frames:48
		AnimationSound = Sound:EntVoxEfforts					Animation:RUTReeBerd_SKL.RUTreeberd_GRBF	Frames:160

		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_ATKA	Frames:9 78
		AnimationSound = Sound:ImpactEntGenericPunch				Animation:RUTReeBerd_SKL.RUTreeberd_ATKA	Frames:31
 		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_ATKD	Frames:65
		AnimationSound = Sound:ImpactEntGenericKick				Animation:RUTReeBerd_SKL.RUTreeberd_ATKD	Frames:32
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_ATKE	Frames:70
		AnimationSound = Sound:ImpactEntGenericKick				Animation:RUTReeBerd_SKL.RUTreeberd_ATKE	Frames:31
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_ATKF	Frames:16 82
		AnimationSound = Sound:ImpactEntGenericPunch				Animation:RUTReeBerd_SKL.RUTreeberd_ATKF	Frames:32

		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_ACLA	Frames:9
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_DCLA	Frames:17 42
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_DCLB	Frames:17 44
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_DCLC	Frames:11 41
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_DCLD	Frames:32

		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_WLKA	Frames:33 76
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_WLKC	Frames:22 48
		AnimationSound = Sound:EntRunStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_RUNA	Frames:4 24

		AnimationSound = Sound:EntRunStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_TRNL	Frames:12 27
		AnimationSound = Sound:EntRunStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_TRNR	Frames:12 27
		AnimationSound = Sound:EntRunStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_TNL2	Frames:18 38
		AnimationSound = Sound:EntRunStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_TNR2	Frames:18 38

		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_THRB	Frames:12 44
		AnimationSound = Sound:TrollTreeSwing					Animation:RUTReeBerd_SKL.RUTreeBerd_THRB	Frames:36
		AnimationSound = Sound:TrollTreeSwingLight				Animation:RUTReeBerd_SKL.RUTreeBerd_THRC	Frames:29

		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_MADA	Frames:75
		AnimationSound = Sound:EntPanic						Animation:RUTReeBerd_SKL.RUTreeBerd_MADA	Frames:17
		AnimationSound = Sound:EntRunStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_MFDA	Frames:2 14

		AnimationSound = Sound:EntRunStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD	Frames:5 120 206
		AnimationSound = Sound:EntSeeFirePart1					Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD	Frames:40
		AnimationSound = Sound:EntSeeFirePart2					Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD	Frames:70
		AnimationSound = Sound:TrollTreeSwing					Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD	Frames:121
		AnimationSound = Sound:EntPanic						Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD	Frames:150

		AnimationSound = Sound:EntSplashWater					Animation:RUTReeBerd_SKL.RUTreeBerd_SPLA	Frames:0

		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_HITA	Frames:11 52
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_GTPA	Frames:14 24
		AnimationSound = Sound:EntFootStep			ExcludedMC:WADING	Animation:RUTReeBerd_SKL.RUTreeberd_DIEA	Frames:7
		AnimationSound = Sound:EntDieFall						Animation:RUTReeBerd_SKL.RUTreeBerd_DIEA	Frames:63
		AnimationSound = Sound:EntDieFall						Animation:RUTReeBerd_SKL.RUTreeBerd_LNDA	Frames:3
		AnimationSound = Sound:EntBodyfall						Animation:RUTReeBerd_SKL.RUTreeBerd_LNDA	Frames:24
	End

	RadarPriority = UNIT
	KindOf = HERO PRELOAD NOT_AUTOACQUIRABLE IMMOBILE CAVALRY SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT ARMY_SUMMARY   NO_FREEWILL_ENTER HEAVY_MELEE_HITTER
	PathfindDiameter = 40.0

    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius                    = EMOTION_CHEER_RADIUS
        MaxHealth                      = ROHAN_TREEBEARD_HEALTH
        PermanentlyKilledByFilter      = NONE
        DodgePercent                   = HERO_DODGE_PERCENT
	BurningDeathBehavior	= Yes
    End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		GiveNoXP = Yes
	End

   	Behavior = AutoHealBehavior ModuleTag_EomerHealing
		StartsActive = Yes
		HealingAmount = 70
		HealingDelay = 1000
		StartHealingDelay = 10000
		HealOnlyIfNotInCombat = No
	End

	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    	End

	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		AILuaEventsList		=	EntFunctions
		BurningDeathTime	=	BURNINGDEATH_DURATION_ENT
	End

	LocomotorSet
		Locomotor = RohanTreeBeardLocomotor
		Condition = SET_NORMAL
		Speed     = 10
	End

	LocomotorSet
		Locomotor = BurningDeathLocomotorCavalry
		Condition = SET_BURNINGDEATH
		Speed	  = 10
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
		ShockStandingTime = 3800
	End

	Behavior = SlowDeathBehavior ModuleTag_50
		DeathTypes = ALL -KNOCKBACK
		DestructionDelay = 20000
		SinkDelay = 5000
		SinkRate = 0.8
		Sound = INITIAL EntDie
		DeathFlags = DEATH_1
	End

	Behavior = SlowDeathBehavior ModuleTag_52
		DeathTypes = NONE +KNOCKBACK
		DestructionDelay = 20000
		SinkDelay = 5000
		SinkRate = 0.8
		DeathFlags	= DEATH_1
	End

	Behavior = SquishCollide ModuleTag_06
	End

	Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
	End

	Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityBehavior
	End

  Behavior = TransportContain ModuleTag_TransportContainTag01
        ObjectStatusOfContained = CAN_ATTACK 
    	PassengerFilter 	= NONE +RohanMerry_MM +RohanMerry_mod +RohanMerry +RohanPippin
     	ManualPickUpFilter	= NONE +RohanMerry_MM +RohanMerry_mod +RohanMerry +RohanPippin
        Slots                   = 2
        ShowPips                = No
        AllowEnemiesInside      = No
        AllowNeutralInside           = No
        AllowAlliesInside            = Yes
        AllowOwnPlayerInsideOverride = Yes
        DamagePercentToUnits         = 0%
        TypeOneForWeaponSet          = HOBBIT
        PassengerBonePrefix          = PassengerBone:PASSENGER01 KindOf:HOBBIT
        PassengerBonePrefix          = PassengerBone:PASSENGER02 KindOf:HOBBIT
        EjectPassengersOnDeath       = Yes
   	KillPassengersOnDeath		= No
        ExitDelay                    = 0
        NumberOfExitPaths            = 2
		ForceOrientationContainer = Yes

        BoneSpecificConditionState 1 PASSENGER_VARIATION_1
        BoneSpecificConditionState 2 PASSENGER_VARIATION_2
        EnterSound                   = TreebeardVoiceJoinHobbit
        FadeFilter                   = ALL
        FadePassengerOnEnter         = Yes
        EnterFadeTime                = 2000
        FadePassengerOnExit          = Yes
        ExitFadeTime                 = 2000
		
  End


 	Behavior = SpecialPowerModule ModuleTag_TreeToggleStarter
 		SpecialPowerTemplate		= SpecialAbilityToggleTreeForm
 		UpdateModuleStartsAttack	= Yes
 		StartsPaused			= No
 	End
	Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_TreeToggle
 		SpecialPowerTemplate    = SpecialAbilityToggleTreeForm
 		MountedTemplate		= RohanTreeBerd
 		SynchronizeTimerOnSpecialPower = SpecialAbilityWildMountainGiantStomp
 		UnpackTime              = 2000
 		PreparationTime         = 0
 		PackTime                = 0
 		OpacityTarget		= .0
 		AwardXPForTriggering    = 0
 		IgnoreFacingCheck	= Yes
	End

	ClientUpdate = SwayClientUpdate ModuleTag_07x
  	End

    Behavior = AISpecialPowerUpdate ToggleMountedAI
        CommandButtonName = Command_TreebeardToggleTreeForm
        SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_MOUNTED
    End

    Scale = 1.25
	Geometry		= CYLINDER
	GeometryMajorRadius 	= 17.6
	GeometryHeight		= 65.0
	GeometryIsSmall		= No

	Shadow 			= SHADOW_VOLUME_NON_SELF_2
	ShadowSizeX 		= 36
End