Object RohanGenericEnt
    ButtonImage        = WOR_Ent

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_ElvenEnt

    Draw = W3DScriptedModelDraw ModuleTag_01
        StaticModelLODMode = Yes
        DefaultModelConditionState
            Model               = RUTreeberd_SKN
            Skeleton            = RUTreeberd_SKL
        End
    End


    Side            = Lothlorien
    EditorSorting   = UNIT
    CommandSet      = RohanGenericEntCommandSet
    CommandPoints   = 25
    MaxSimultaneousOfType = NEW_CATAPULT_MONSTER_RATIO
    BuildVariations = RohanEntFir RohanEntBirch
    KindOf          = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_ATTACK_WALLS SCARY HEAVY_MELEE_HITTER ARMY_SUMMARY SIEGEENGINE
    BuildCost       = ROHAN_ENT_BUILDCOST
    BuildTime       = ELITE_BUILDTIME
    BountyValue     = ROHAN_ENT_BOUNTY_VALUE


    AutoResolveUnitType         = AutoResolveUnit_Monster
    AutoResolveCombatChain      = AutoResolve_MonsterCombatChain
    AutoResolveBody             = AutoResolve_ElvenEntBody

    AutoResolveArmor
        Armor = AutoResolve_ElvenEntArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_ElvenEntWeapon
    End

End


Object RohanEntBase


    ButtonImage        = HIEnt
    SelectPortrait    = UPElven_Ent

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_ElvenEnt

    Draw = W3DScriptedModelDraw ModuleTag_01

        StaticModelLODMode = Yes
        WadingParticleSys = EntRipples
        WadingParticleSys = EntSplash

        OkToChangeModelColor = Yes

        ExtraPublicBone = B_POINT1R
        ExtraPublicBone = PASSENGER
        ExtraPublicBone = IMPACT
        ExtraPublicBone = ROCK

       DefaultModelConditionState
           Model               = RUEntFir_SKN
           Skeleton            = RUTreeberd_SKL
           WeaponLaunchBone    = PRIMARY Firepoint
           WeaponLaunchBone    = SECONDARY Firepoint
           ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
       End

       ModelConditionState = WADING AFLAME
           Model    = RUEntFirD_SKN
           Skeleton = RUTreeBerd_SKL
           WeaponLaunchBone = PRIMARY Firepoint
           WeaponLaunchBone = SECONDARY Firepoint
           ParticleSysBone = BAT_HEAD TreebeardSteam FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TreebeardSteam FollowBone:Yes
           ParticleSysBone = BAT_PELVIS TreebeardSteam1 FollowBone:Yes
           ParticleSysBone = BAT_CALFR TreebeardSteam FollowBone:Yes
           ParticleSysBone = B_POINT1L TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_POINT1R TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_THUMB1L TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_THUMB1R TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = NONE TrBrdWaterRipples FollowBone:No
           ParticleSysBone = NONE TrBrdWaterRipples FollowBone:No
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_HANDR TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_HANDL TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash3 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash3 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash4 FollowBone:Yes
       End


       ModelConditionState  = AFLAME
            Model           = RUEntFirD_SKN
            Skeleton        = RUTreeberd_SKL
            ParticleSysBone = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HANDR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HANDL TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
        End

        ModelConditionState  = AFLAME BURNED
            Model            = RUEntFirD_SKN
            Skeleton         = RUTreeberd_SKL
            WeaponLaunchBone = PRIMARY Firepoint
            WeaponLaunchBone = SECONDARY Firepoint
            ParticleSysBone  = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HANDR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HANDL TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
         End

         ModelConditionState = BURNED
            Model = RUEntFirD_SKN
            Skeleton = RUTreeBerd_SKL
            WeaponLaunchBone    = PRIMARY Firepoint
            WeaponLaunchBone    = SECONDARY Firepoint
         End


        IdleAnimationState
            StateName = Idle
            Animation = IDLA
                AnimationName = RUTreeberd_IDLA
                AnimationBlendTime  = 5
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
        if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
      ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End




        AnimationState = DYING BURNINGDEATH
            Animation
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
                AnimationBlendTime = 10
            End





        End

        AnimationState            = BURNINGDEATH
            Animation
                AnimationName    = RUTreeberd_MFDA
                AnimationMode    = LOOP
                Distance        = 100
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
        End

        AnimationState = DYING DEATH_2
            Animation = Die
                AnimationName = RUTreeberd_MOTC
                AnimationMode = ONCE_BACKWARDS
            End
      Flags = START_FRAME_LAST
        End

        AnimationState = AFLAME DYING SPLATTED
            Animation = DieSplat
                AnimationName = RUTreeberd_LNDA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState = AFLAME DYING
            Animation = Die
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState = DYING SPLATTED
            Animation = DieSplat
                AnimationName    = RUTreeberd_LNDA
                AnimationMode    = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState = DYING WEAPONSET_TOGGLE_1
            Animation = Die
                AnimationName = RUTreeberd_DIEB
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState = DYING
            Animation = Die
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End




        AnimationState   = JUST_BUILT
            StateName        = STATE_JustBuilt
            Animation = Sprout
                AnimationName = RUTreeberd_MOTC
                AnimationMode = ONCE
                AnimationBlendTime = 0
                AnimationSpeedFactorRange = 0.5 0.5
            End
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
        End

    AnimationState = PREPARING
    StateName = STATE_Debate
      Animation = Debate
        AnimationName = RUTreeberd_MOTB
        AnimationMode = LOOP
        AnimationBlendTime = 30
        AnimationSpeedFactorRange = 0.8 1.1
      End
      Flags = RANDOMSTART
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

    TransitionState = TRANS_Sprout
      Animation = Sprout
        AnimationName = RUTreeberd_MOTA
        AnimationMode = ONCE
        AnimationBlendTime = 0
        AnimationSpeedFactorRange = 0.5 0.5
      End

    End




    AnimationState = AFLAME STUNNED_FLAILING
      Animation = StunFlail
        AnimationName = RUTreeberd_FLYA
        AnimationMode = LOOP
      End
      Flags = RANDOMSTART
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

    AnimationState = AFLAME STUNNED
      Animation = Stun
        AnimationName = RUTreeberd_LNDA
        AnimationMode = ONCE
      End
      ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

    AnimationState = AFLAME STUNNED_STANDING_UP
      Animation = Stun
        AnimationName = RUTreeberd_GTPA
        AnimationMode = ONCE
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

        AnimationState        = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = RUTreeberd_FLYA
                AnimationMode      = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED
            Animation           = Stun
                AnimationName     = RUTreeberd_LNDA
                AnimationMode      = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName     = RUTreeberd_GTPA
                AnimationMode      = ONCE
            End
        End




        AnimationState                = INITIAL_ENRAGED
            StateName                = Enraged
            Animation                = RUTreeBerd_MADA
                AnimationName        = RUTreeBerd_MADA
                AnimationMode        = ONCE
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState = USER_3
            Animation = OnFire
                AnimationName = RUTreeberd_RCTD
                AnimationMode = ONCE
                AnimationBlendTime = 20
            End
            FXEvent    = Frame:54 Name:FX_EntRightFootStep
        End




        AnimationState = MOVING FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
            Animation = RunAndFire
                AnimationName       = RUTreeberd_ATRB
                AnimationMode       = LOOP
            End
        End



        AnimationState        = WEAPONSET_ENRAGED TURN_LEFT
            Animation           = Walk
                AnimationName     = RUTreeberd_TRNL
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState        = WEAPONSET_ENRAGED TURN_RIGHT
            Animation           = Walk
                AnimationName     = RUTreeberd_TRNR
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End


        AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
            Animation = Punch
                AnimationName        = RUTreeberd_ATKA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = Punt
                AnimationName        = RUTreeberd_ATKD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = FrontKick
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunch
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            BeginScript
                if CurDrawableIsCurrentTargetKindof("MONSTER") then
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("FrontKick")
                    else
                        return ("KirkPunch")
                    end
                else
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("Punch")
                    else
                        return ("Punt")
                    end
                end
            EndScript
        End

        AnimationState = FIRING_OR_PREATTACK_B WEAPONSET_ENRAGED
            Animation = FrontKickOnBuilding
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunchOnBuilding
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
        End



        AnimationState = WEAPONSET_ENRAGED MOVING PANICKING
            Animation = Jump
                AnimationName                = RUTreeberd_MFDA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.5 0.5
                AnimationBlendTime            = 5
                Distance                    = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
            FXEvent    = Frame:4 Name:FX_EntLeftFootStep
            FXEvent    = Frame:18 Name:FX_EntRightFootStep
        End

    AnimationState = WEAPONSET_ENRAGED AFLAME WADING
      Animation = Splash
        AnimationName = RUTreeberd_SPLA
        AnimationMode = LOOP
        AnimationBlendTime = 5
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

        AnimationState        = WEAPONSET_ENRAGED MOVING
            Animation           = AngryStompWalk
                AnimationName     = RUTreeberd_WLKC
                AnimationMode      = LOOP
                AnimationBlendTime  = 5
                Distance            = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_AccelerateENR") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_AccelerateENR") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:39 Name:FX_EntRightFootStep
            FXEvent    = Frame:79 Name:FX_EntLeftFootStep
            FXEvent    = Frame:129 Name:FX_EntRightFootStep
        End

        AnimationState                        = WEAPONSET_ENRAGED HIT_REACTION HIT_LEVEL_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = WEAPONSET_ENRAGED
            Animation                        = AngryIdle
                AnimationName                = RUTreeberd_IDLC
                AnimationMode                = LOOP
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25ENR") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
        if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
      ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End




    AnimationState = AFLAME TURN_LEFT
      Animation = Walk
        AnimationName = RUTreeberd_TRNL
        AnimationMode = LOOP
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End
    AnimationState = AFLAME TURN_RIGHT
      Animation = Walk
        AnimationName = RUTreeberd_TRNR
        AnimationMode = LOOP
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End
    AnimationState = AFLAME MOVING
      Animation = Jump
        AnimationName = RUTreeberd_MFDA
        AnimationMode = LOOP
        AnimationSpeedFactorRange = 0.5 0.5
        AnimationBlendTime  = 5
        Distance = 50
      End
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      FXEvent = Frame:4 Name:FX_EntLeftFootStep
      FXEvent = Frame:18 Name:FX_EntRightFootStep
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
        CurDrawablePlaySound("EntRunFire")
      EndScript
    End
    AnimationState = AFLAME WADING
      Animation = Splash
        AnimationName = RUTreeberd_SPLA
        AnimationMode = LOOP
        AnimationBlendTime = 5
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End




        AnimationState = RELOADING_A WEAPONSET_TOGGLE_1
            Animation
                AnimationName        = RUTreeberd_GRBA
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
            FXEvent    = Frame:20    Name: FX_EntRockGrab
            FXEvent    = Frame:24    Name: FX_EntRockYank
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
        End

        AnimationState                = TURN_RIGHT WEAPONSET_TOGGLE_1
            StateName                = Turn
            Animation
                AnimationName        = RUTreeberd_TNR2
                AnimationMode        = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState                = TURN_LEFT WEAPONSET_TOGGLE_1
            StateName                = Turn
            Animation
                AnimationName        = RUTreeberd_TNL2
                AnimationMode        = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState = FIRING_OR_PREATTACK_A AIM_NEAR WEAPONSET_TOGGLE_1
            Animation = CloseRock
                AnimationName        = RUTreeberd_THRC
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes

            End
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
            FrameForPristineBonePositions = 39
        End

        AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            Animation = FarRock
                AnimationName        = RUTreeberd_THRB
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes

            End
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
            FrameForPristineBonePositions = 40
        End




        AnimationState = MOVING FIRING_OR_PREATTACK_A
            Animation = RunAndFire
                AnimationName       = RUTreeberd_ATRA
                AnimationMode       = LOOP
            End
        End

        AnimationState                = TURN_RIGHT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUTreeberd_TRNR
                AnimationMode        = LOOP
            End
        End

        AnimationState                = TURN_LEFT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUTreeberd_TRNL
                AnimationMode        = LOOP
            End
        End

        AnimationState = FIRING_OR_PREATTACK_A
            Animation = Punch
                AnimationName        = RUTreeberd_ATKA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = Punt
                AnimationName        = RUTreeberd_ATKD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = FrontKick
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunch
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            BeginScript
                if CurDrawableIsCurrentTargetKindof("MONSTER") then
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("FrontKick")
                    else
                        return ("KirkPunch")
                    end
                else
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("Punch")
                    else
                        return ("Punt")
                    end
                end
            EndScript
        End

        AnimationState = FIRING_OR_PREATTACK_B
            Animation = FrontKickOnBuilding
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunchOnBuilding
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
        End




        AnimationState = PACKING GRAB_BUILDING_CHUNK
            Animation = Pack
                AnimationName        = RUTreeberd_GBB2
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
        End

        AnimationState = UNPACKING GRAB_BUILDING_CHUNK
            Animation = Pack
                AnimationName        = RUTreeberd_GBB1
                AnimationMode        = ONCE
                AnimationBlendTime    = 20
            End
            ParticleSysBone = ParticleNode01 TreeBeardAttackLeavesFir
        End

        AnimationState = PACKING
            Animation = Pack
                AnimationName    = RUTreeberd_GBA2
                AnimationMode    = ONCE
            End
        End

        AnimationState = UNPACKING
            Animation = Pack
                AnimationName    = RUTreeberd_GBA1
                AnimationMode    = ONCE
            End
        End



        AnimationState = MOVING PANICKING
            Animation = Jump
                AnimationName                = RUTreeberd_MFDA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.5 0.5
                AnimationBlendTime            = 5
                Distance                    = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
            FXEvent    = Frame:4 Name:FX_EntLeftFootStep
            FXEvent    = Frame:18 Name:FX_EntRightFootStep
        End

        AnimationState                = MOVING WEAPONSET_TOGGLE_1
            StateName                = Moving
            Animation
                AnimationName        = RUTreeberd_WLKB
                Distance            = 50
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:26 Name:FX_EntRightFootStep
        End

        AnimationState                = MOVING
            StateName                = Moving
            Animation                = Walk
                AnimationName        = RUTreeberd_WLKA
                Distance            = 50
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:39 Name:FX_EntRightFootStep
            FXEvent    = Frame:79 Name:FX_EntLeftFootStep
            FXEvent    = Frame:129 Name:FX_EntRightFootStep
        End


        AnimationState                        = HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITB
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = HIT_REACTION HIT_LEVEL_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = WEAPONSET_TOGGLE_1
            StateName                        = Idle
            Animation
                AnimationName                = RUTreeberd_IDLB
                AnimationMode                = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_JustBuilt" then CurDrawableShowSubObjectPermanently("ROCK") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25R") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
            EndScript
            ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End




        TransitionState = TRANS_Accelerate
            Animation = Transition
                AnimationName        = RUTreeberd_ACLA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.75 0.75
            End
        End

        TransitionState = TRANS_Stop75
            Animation = Transition
                AnimationName        = RUTreeberd_DCLC
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop50
            Animation = Transition
                AnimationName        = RUTreeberd_DCLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop25
            Animation = Transition
                AnimationName        = RUTreeberd_DCLD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop00
            Animation = Transition
                AnimationName        = RUTreeberd_DCLA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End




        TransitionState = TRANS_AccelerateR
            Animation = Transition
                AnimationName        = RUTreeberd_ACLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.75 0.75
            End
        End

        TransitionState = TRANS_Stop75R
            Animation
                AnimationName        = RUTreeberd_DCLG
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop50R
            Animation
                AnimationName        = RUTreeberd_DCLF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop25R
            Animation
                AnimationName        = RUTreeberd_DCLH
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop00R
            Animation
                AnimationName        = RUTreeberd_DCLE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End




        TransitionState = TRANS_AccelerateENR
            Animation = Transition
                AnimationName        = RUTreeberd_ACLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop75ENR
            Animation
                AnimationName        = RUTreeberd_DCLG
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop50ENR
            Animation
                AnimationName        = RUTreeberd_DCLF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop25ENR
            Animation
                AnimationName        = RUTreeberd_DCLH
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop00ENR
            Animation
                AnimationName        = RUTreeberd_DCLE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

    End


    Side                = Lothlorien
    Scale = 1.30
    IsTrainable            = Yes
    EditorSorting        = UNIT

    ThreatLevel            = ENT_INFANTRY_THREAT_LEVEL
    ThreatBreakdown RohanEntBase_DetailedThreat
        AIKindOf = SIEGEWEAPON
    End

    ThingClass            = MEDIUM_MONSTER
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_IMMUNE
    TransportSlotCount    = TRANSPORTSLOTCOUNT_MONSTER

    WeaponSet
        Conditions          = None
        Weapon              = PRIMARY      RohanTreeBeardPunchMod
        Weapon              = SECONDARY    RohanBuildingTeardown
        OnlyAgainst         = SECONDARY    STRUCTURE BLOCKING_GATE
    End

    WeaponSet
        Conditions          = WEAPONSET_TOGGLE_1
        Weapon              = PRIMARY    RohanEntRockThrowEdain
    End

    ArmorSet
        Conditions      = None
        Armor           = EntArmor
        DamageFX        = EntDamageFX
    End

    BuildFadeInOnCreateTime = 20

    VisionRange            = VISION_ENT
    ShroudClearingRange = SHROUD_CLEAR_ENT

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    DisplayName           = OBJECT:RohanEnt
    CrusherLevel          = 1
    CrushWeapon           = EntCrush
    MinCrushVelocityPercent = MINCRUSHVELOCITYPERCENT_TROLLS
    CrushDecelerationPercent = CRUSHDECELERATIONPERCENT_TROLLS
    UseCrushAttack        = No
    CommandSet            = RohanEntCommandSet
    CommandPoints         = 25
    MaxSimultaneousOfType = NEW_CATAPULT_MONSTER_RATIO
    EquivalentTo          = RohanGenericEnt



    AutoResolveUnitType               = AutoResolveUnit_Monster
    AutoResolveCombatChain            = AutoResolve_MonsterCombatChain
    AutoResolveBody         = AutoResolve_ElvenEntBody

    AutoResolveArmor
        Armor = AutoResolve_ElvenEntArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_ElvenEntWeapon
    End



    VoiceAttack                = EntVoiceSelect
    VoiceAttackCharge        = EntVoiceSelect
    VoiceAttackMachine        = EntVoiceSelect
    VoiceAttackStructure    = EntVoiceSelect
    VoiceCreated            = EntVoiceSelect
    VoiceFullyCreated        = EntVoiceSelect

    VoiceGuard                = EntVoiceSelect
    VoiceMove                = EntVoiceSelect
    VoicePriority            = 35
    VoiceSelect                = EntVoiceSelect
    VoiceSelectBattle        = EntVoiceSelect

    SoundMoveLoop            = EntVoxMoveLoop
    SoundImpact                = ImpactHorse

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Ent Unit Infantry
        UnitWeight = 2
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:BuildingEntMootCouncil                Animation:RUTReeBerd_SKL.RUTreeberd_MOTA    Frames:1
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_MOTA    Frames:225 253
        AnimationSound = Sound:BuildingEntMootCouncil                Animation:RUTReeBerd_SKL.RUTreeberd_MOTB    Frames:1

        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_GBA1    Frames:9 13
        AnimationSound = Sound:TrollTreeSwingLight                Animation:RUTReeBerd_SKL.RUTreeBerd_GBA1    Frames:10
        AnimationSound = Sound:EntGrabRock                        Animation:RUTReeBerd_SKL.RUTreeberd_GBA1    Frames:16
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_GBA2    Frames:28 34
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_GBB1    Frames:18
        AnimationSound = Sound:TrollTreeSwingLight                Animation:RUTReeBerd_SKL.RUTreeBerd_GBB1    Frames:16
        AnimationSound = Sound:EntGrabRock                        Animation:RUTReeBerd_SKL.RUTreeBerd_GBB1    Frames:21
        AnimationSound = Sound:EntGrabBuildingChunk                Animation:RUTReeBerd_SKL.RUTreeberd_GBB1    Frames:37
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_GBB2    Frames:24

        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_GRBC    Frames:13 26 117 179 223
        AnimationSound = Sound:EntGrabRock                        Animation:RUTReeBerd_SKL.RUTreeberd_GRBC    Frames:48
        AnimationSound = Sound:EntVoxEfforts                    Animation:RUTReeBerd_SKL.RUTreeberd_GRBC    Frames:160
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_GRBD    Frames:13 26 117 179 223
        AnimationSound = Sound:EntGrabRock                        Animation:RUTReeBerd_SKL.RUTreeberd_GRBD    Frames:48
        AnimationSound = Sound:EntVoxEfforts                    Animation:RUTReeBerd_SKL.RUTreeberd_GRBD    Frames:160
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_GRBE    Frames:13 26 117 179 223
        AnimationSound = Sound:EntGrabRock                        Animation:RUTReeBerd_SKL.RUTreeberd_GRBE    Frames:48
        AnimationSound = Sound:EntVoxEfforts                    Animation:RUTReeBerd_SKL.RUTreeberd_GRBE    Frames:160
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_GRBF    Frames:13 26 117 179 223
        AnimationSound = Sound:EntGrabRock                        Animation:RUTReeBerd_SKL.RUTreeberd_GRBF    Frames:48
        AnimationSound = Sound:EntVoxEfforts                    Animation:RUTReeBerd_SKL.RUTreeberd_GRBF    Frames:160

        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_ATKA    Frames:9 78
        AnimationSound = Sound:ImpactEntGenericPunch                Animation:RUTReeBerd_SKL.RUTreeberd_ATKA    Frames:31
         AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_ATKD    Frames:65
        AnimationSound = Sound:ImpactEntGenericKick                Animation:RUTReeBerd_SKL.RUTreeberd_ATKD    Frames:32
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_ATKE    Frames:70
        AnimationSound = Sound:ImpactEntGenericKick                Animation:RUTReeBerd_SKL.RUTreeberd_ATKE    Frames:31
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_ATKF    Frames:16 82
        AnimationSound = Sound:ImpactEntGenericPunch                Animation:RUTReeBerd_SKL.RUTreeberd_ATKF    Frames:32

        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeberd_ACLA    Frames:9
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeberd_DCLA    Frames:17 42
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeberd_DCLB    Frames:17 44
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeberd_DCLC    Frames:11 41
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeberd_DCLD    Frames:32

        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_WLKA    Frames:33 76
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_WLKC    Frames:22 48
        AnimationSound = Sound:EntRunStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_RUNA    Frames:4 24

        AnimationSound = Sound:EntRunStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_TRNL    Frames:12 27
        AnimationSound = Sound:EntRunStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_TRNR    Frames:12 27
        AnimationSound = Sound:EntRunStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_TNL2    Frames:18 38
        AnimationSound = Sound:EntRunStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_TNR2    Frames:18 38

        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_THRB    Frames:12 44
        AnimationSound = Sound:TrollTreeSwing                    Animation:RUTReeBerd_SKL.RUTreeBerd_THRB    Frames:36
        AnimationSound = Sound:TrollTreeSwingLight                Animation:RUTReeBerd_SKL.RUTreeBerd_THRC    Frames:29

        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_MADA    Frames:75
        AnimationSound = Sound:EntPanic                        Animation:RUTReeBerd_SKL.RUTreeBerd_MADA    Frames:17
        AnimationSound = Sound:EntRunStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_MFDA    Frames:2 14

        AnimationSound = Sound:EntRunStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD    Frames:5 120 206
        AnimationSound = Sound:EntSeeFirePart1                    Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD    Frames:40
        AnimationSound = Sound:EntSeeFirePart2                    Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD    Frames:70
        AnimationSound = Sound:TrollTreeSwing                    Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD    Frames:121
        AnimationSound = Sound:EntPanic                        Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD    Frames:150

        AnimationSound = Sound:EntSplashWater                    Animation:RUTReeBerd_SKL.RUTreeBerd_SPLA    Frames:0

        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeberd_HITA    Frames:11 52
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeberd_GTPA    Frames:14 24
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeberd_DIEA    Frames:7
        AnimationSound = Sound:EntDieFall                        Animation:RUTReeBerd_SKL.RUTreeBerd_DIEA    Frames:63
        AnimationSound = Sound:EntDieFall                        Animation:RUTReeBerd_SKL.RUTreeBerd_LNDA    Frames:3
        AnimationSound = Sound:EntBodyfall                        Animation:RUTReeBerd_SKL.RUTreeBerd_LNDA    Frames:24



        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_MOTA    Frames:225 253
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_GBA1    Frames:9 13
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_GBA2    Frames:28 34
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_GBB1    Frames:18
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_GBB2    Frames:24
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_GRBC    Frames:13 26 117 179 223
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_GRBD    Frames:13 26 117 179 223
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_GRBE    Frames:13 26 117 179 223
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_GRBF    Frames:13 26 117 179 223
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_ATKA    Frames:9 78
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_ATKD    Frames:65
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_ATKE    Frames:70
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_ATKF    Frames:16 82
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeberd_ACLA    Frames:9
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeberd_DCLA    Frames:17 42
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeberd_DCLB    Frames:17 44
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeberd_DCLC    Frames:11 41
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeberd_DCLD    Frames:32
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_WLKA    Frames:33 76
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_WLKC    Frames:22 48
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_THRB    Frames:12 44
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_MADA    Frames:75
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeberd_HITA    Frames:11 52
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeberd_GTPA    Frames:14 24
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeberd_DIEA    Frames:7

        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_RUNA    Frames:4 24
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_TRNL    Frames:12 27
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_TRNR    Frames:12 27
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_TNL2    Frames:18 38
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_TNR2    Frames:18 38
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_MFDA    Frames:2 14
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_RCTD    Frames:5 120 206
    End




    RadarPriority    = UNIT
    KindOf            = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_INFANTRY CAN_ATTACK_WALLS SCARY BIG_MONSTER HEAVY_MELEE_HITTER ARMY_SUMMARY SIEGEENGINE

    BuildCost = ROHAN_ENT_BUILDCOST
    BuildTime = ELITE_BUILDTIME





    Behavior = FlammableUpdate FlammableModuleTag_15
        AflameDuration               = 0
        AflameDamageDelay            = 500
        AflameDamageAmount           = 30
        FlameDamageLimit             = 130
        FlameDamageExpiration        = 10000
        SetBurnedStatus              = Yes
        SwapModelWhenAflame          = Yes
        SwapModelWhenQuenched        = Yes
        RunToWater                   = Yes
        RunToWaterDepth              = 0
        RunToWaterSearchRadius       = 10000
        RunToWaterSearchIncrement    = 50
        PanicLocomotorWhileAflame    = Yes
        CustomAnimAndDuration        = AnimState:USER_3 AnimTime:3400
        FireFXList                   = FX:FX_FireStartEnt
    End





    Behavior = EntEnragedUpdate EnragedBehaviorModuleTag
        HatedObjectFilter     = NONE +LumberMill +MordorLumberMill +IsengardLumberMill +WildLaborer +MordorWorker
        FriendlyDeadFilter    = NONE +RohanGenericEnt +RohanEntBase +RohanEntFir +RohanEntBirch +RohanEntAsh
        EnragedTime           = 30000
        TimeUntilCanRageAgain = 35000
        EnragedTransitionTime = 3000
    End

    Behavior = AimWeaponBehavior AimWeaponModuleTag
        AimNearDistance = 60.0
    End

    Body = ActiveBody ModuleTag_02
        CheerRadius             = EMOTION_CHEER_RADIUS
        MaxHealth                 = ROHAN_ENT_HEALTH
        BurningDeathBehavior    = Yes
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Artillery
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        AILuaEventsList                =    EntFunctions
        BurningDeathTime            =    BURNINGDEATH_DURATION_ENT
    End

    Behavior = FireWeaponWhenDeadBehavior FireDeadTag
        RequiredStatus    = DEATH_1
        StartsActive    = Yes
        DelayTime        = 2300
        DeathWeapon        = RohanEntDeath
        WeaponOffset    = X:-48 Y:0 Z:0
    End

    LocomotorSet
        Locomotor = RohanTreeBeardLocomotor
        Condition = SET_NORMAL
        Speed     = 22
    End

    LocomotorSet
        Locomotor = RohanTreeBeardLocomotor
        Condition = SET_ENRAGED
        Speed     = 62
    End

    LocomotorSet
        Locomotor = RohanTreeBeardFastTurnLocomotor
        Condition = SET_PANIC
        Speed      = 80
    End

    LocomotorSet
        Locomotor = BurningDeathLocomotorCavalry
        Condition = SET_BURNINGDEATH
        Speed      = BURNINGDEATH_WANDERSPEED_CAVALRY
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End

    Behavior = SlowDeathBehavior ModuleTag_50
        DeathTypes = ALL -KNOCKBACK -FADED
        DestructionDelay = 20000
        SinkDelay = 5000
        SinkRate = 0.8
        Sound = INITIAL EntDie
        DeathFlags            = DEATH_1
    End

    Behavior = SlowDeathBehavior ModuleTag_52

        DeathTypes = NONE +KNOCKBACK
        DestructionDelay = 20000
        SinkDelay = 5000
        SinkRate = 0.8
        DeathFlags            = DEATH_1
    End

      Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes            = NONE +FADED
        SinkRate            = 0.1
        FadeTime            = 9500
        DestructionDelay    = 10000
        DeathFlags            = DEATH_2

    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End

     Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 2500
        HitReactionThreshold1 = 50.0
     End

    Behavior = MonitorConditionUpdate ModuleTag_CommandSetSwapper
        ModelConditionFlags            = ATTACKING_POSITION
        ModelConditionCommandSet    = RohanEntRockCommandSetStopBombard
        WeaponSetFlags                = WEAPONSET_TOGGLE_1
        WeaponToggleCommandSet        = RohanEntRockCommandSet
    End


    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy = Upgrade_SwitchToRockThrowing
        GetUpgradeCommandButtonName = Command_ToggleEntRockThrow
    End






    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate ToggleSiegeModeAI
        CommandButtonName = Command_ToggleEntRockThrow
        SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_SIEGE
    End

    Geometry            = CYLINDER
    GeometryMajorRadius = 25
    GeometryHeight        = 70.0
    GeometryIsSmall        = No

    Shadow =SHADOW_VOLUME_NON_SELF_2
    ShadowSizeX = 36

End



ChildObject RohanEntFir RohanEntBase
    DisplayName       = OBJECT:RohanEntFire
    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion    = Terror_Base
    End
End


ChildObject RohanEntFir_Summoned RohanEntBase

    Draw = W3DScriptedModelDraw ModuleTag_01

        StaticModelLODMode   = Yes
        WadingParticleSys    = EntRipples
        WadingParticleSys    = EntSplash
        OkToChangeModelColor = Yes

        ExtraPublicBone = B_POINT1R
        ExtraPublicBone = PASSENGER
        ExtraPublicBone = IMPACT
        ExtraPublicBone = ROCK

       DefaultModelConditionState
           Model               = RUEntFir_SKN
           Skeleton            = RUTreeberd_SKL
           WeaponLaunchBone    = PRIMARY Firepoint
           WeaponLaunchBone    = SECONDARY Firepoint
           ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
       End

       ModelConditionState = WADING AFLAME
           Model    = RUEntFirD_SKN
           Skeleton = RUTreeBerd_SKL
           WeaponLaunchBone = PRIMARY Firepoint
           WeaponLaunchBone = SECONDARY Firepoint
           ParticleSysBone = BAT_HEAD TreebeardSteam FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TreebeardSteam FollowBone:Yes
           ParticleSysBone = BAT_PELVIS TreebeardSteam1 FollowBone:Yes
           ParticleSysBone = BAT_CALFR TreebeardSteam FollowBone:Yes
           ParticleSysBone = B_POINT1L TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_POINT1R TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_THUMB1L TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_THUMB1R TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = NONE TrBrdWaterRipples FollowBone:No
           ParticleSysBone = NONE TrBrdWaterRipples FollowBone:No
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_HANDR TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_HANDL TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash3 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash3 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash4 FollowBone:Yes
       End


       ModelConditionState  = AFLAME
            Model           = RUEntFirD_SKN
            Skeleton        = RUTreeberd_SKL
            ParticleSysBone = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HANDR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HANDL TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
        End

        ModelConditionState  = AFLAME BURNED
            Model            = RUEntFirD_SKN
            Skeleton         = RUTreeberd_SKL
            WeaponLaunchBone = PRIMARY Firepoint
            WeaponLaunchBone = SECONDARY Firepoint
            ParticleSysBone  = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HANDR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HANDL TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
         End

         ModelConditionState = BURNED
            Model = RUEntFirD_SKN
            Skeleton = RUTreeBerd_SKL
            WeaponLaunchBone    = PRIMARY Firepoint
            WeaponLaunchBone    = SECONDARY Firepoint
         End


        IdleAnimationState
            StateName = Idle
            Animation = IDLA
                AnimationName = RUTreeberd_IDLA
                AnimationBlendTime  = 5
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
        if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
      ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End




        AnimationState = DYING BURNINGDEATH
            Animation
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
                AnimationBlendTime = 10
            End





        End

        AnimationState            = BURNINGDEATH
            Animation
                AnimationName    = RUTreeberd_MFDA
                AnimationMode    = LOOP
                Distance        = 100
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
        End

        AnimationState = DYING DEATH_2
            Animation = Die
                AnimationName = RUTreeberd_MOTC
                AnimationMode = ONCE_BACKWARDS
            End
      Flags = START_FRAME_LAST
        End

        AnimationState = AFLAME DYING SPLATTED
            Animation = DieSplat
                AnimationName = RUTreeberd_LNDA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState = AFLAME DYING
            Animation = Die
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState = DYING SPLATTED
            Animation = DieSplat
                AnimationName    = RUTreeberd_LNDA
                AnimationMode    = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState = DYING WEAPONSET_TOGGLE_1
            Animation = Die
                AnimationName = RUTreeberd_DIEB
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState = DYING
            Animation = Die
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End




        AnimationState   = JUST_BUILT
            StateName        = STATE_JustBuilt
            Animation = Sprout
                AnimationName = RUTreeberd_MOTC
                AnimationMode = ONCE
                AnimationBlendTime = 0
                AnimationSpeedFactorRange = 0.5 0.5
            End
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
        End

    AnimationState = PREPARING
    StateName = STATE_Debate
      Animation = Debate
        AnimationName = RUTreeberd_MOTB
        AnimationMode = LOOP
        AnimationBlendTime = 30
        AnimationSpeedFactorRange = 0.8 1.1
      End
      Flags = RANDOMSTART
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

    TransitionState = TRANS_Sprout
      Animation = Sprout
        AnimationName = RUTreeberd_MOTA
        AnimationMode = ONCE
        AnimationBlendTime = 0
        AnimationSpeedFactorRange = 0.5 0.5
      End

    End




    AnimationState = AFLAME STUNNED_FLAILING
      Animation = StunFlail
        AnimationName = RUTreeberd_FLYA
        AnimationMode = LOOP
      End
      Flags = RANDOMSTART
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

    AnimationState = AFLAME STUNNED
      Animation = Stun
        AnimationName = RUTreeberd_LNDA
        AnimationMode = ONCE
      End
      ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

    AnimationState = AFLAME STUNNED_STANDING_UP
      Animation = Stun
        AnimationName = RUTreeberd_GTPA
        AnimationMode = ONCE
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

        AnimationState        = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = RUTreeberd_FLYA
                AnimationMode      = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED
            Animation           = Stun
                AnimationName     = RUTreeberd_LNDA
                AnimationMode      = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName     = RUTreeberd_GTPA
                AnimationMode      = ONCE
            End
        End




        AnimationState                = INITIAL_ENRAGED
            StateName                = Enraged
            Animation                = RUTreeBerd_MADA
                AnimationName        = RUTreeBerd_MADA
                AnimationMode        = ONCE
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState = USER_3
            Animation = OnFire
                AnimationName = RUTreeberd_RCTD
                AnimationMode = ONCE
                AnimationBlendTime = 20
            End
            FXEvent    = Frame:54 Name:FX_EntRightFootStep
        End




        AnimationState = MOVING FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
            Animation = RunAndFire
                AnimationName       = RUTreeberd_ATRB
                AnimationMode       = LOOP
            End
        End



        AnimationState        = WEAPONSET_ENRAGED TURN_LEFT
            Animation           = Walk
                AnimationName     = RUTreeberd_TRNL
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState        = WEAPONSET_ENRAGED TURN_RIGHT
            Animation           = Walk
                AnimationName     = RUTreeberd_TRNR
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End


        AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
            Animation = Punch
                AnimationName        = RUTreeberd_ATKA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = Punt
                AnimationName        = RUTreeberd_ATKD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = FrontKick
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunch
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            BeginScript
                if CurDrawableIsCurrentTargetKindof("MONSTER") then
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("FrontKick")
                    else
                        return ("KirkPunch")
                    end
                else
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("Punch")
                    else
                        return ("Punt")
                    end
                end
            EndScript
        End

        AnimationState = FIRING_OR_PREATTACK_B WEAPONSET_ENRAGED
            Animation = FrontKickOnBuilding
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunchOnBuilding
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
        End



        AnimationState = WEAPONSET_ENRAGED MOVING PANICKING
            Animation = Jump
                AnimationName                = RUTreeberd_MFDA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.5 0.5
                AnimationBlendTime            = 5
                Distance                    = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
            FXEvent    = Frame:4 Name:FX_EntLeftFootStep
            FXEvent    = Frame:18 Name:FX_EntRightFootStep
        End

    AnimationState = WEAPONSET_ENRAGED AFLAME WADING
      Animation = Splash
        AnimationName = RUTreeberd_SPLA
        AnimationMode = LOOP
        AnimationBlendTime = 5
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

        AnimationState        = WEAPONSET_ENRAGED MOVING
            Animation           = AngryStompWalk
                AnimationName     = RUTreeberd_WLKC
                AnimationMode      = LOOP
                AnimationBlendTime  = 5
                Distance            = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_AccelerateENR") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_AccelerateENR") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:39 Name:FX_EntRightFootStep
            FXEvent    = Frame:79 Name:FX_EntLeftFootStep
            FXEvent    = Frame:129 Name:FX_EntRightFootStep
        End

        AnimationState                        = WEAPONSET_ENRAGED HIT_REACTION HIT_LEVEL_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = WEAPONSET_ENRAGED
            Animation                        = AngryIdle
                AnimationName                = RUTreeberd_IDLC
                AnimationMode                = LOOP
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25ENR") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
        if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
      ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End




    AnimationState = AFLAME TURN_LEFT
      Animation = Walk
        AnimationName = RUTreeberd_TRNL
        AnimationMode = LOOP
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End
    AnimationState = AFLAME TURN_RIGHT
      Animation = Walk
        AnimationName = RUTreeberd_TRNR
        AnimationMode = LOOP
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End
    AnimationState = AFLAME MOVING
      Animation = Jump
        AnimationName = RUTreeberd_MFDA
        AnimationMode = LOOP
        AnimationSpeedFactorRange = 0.5 0.5
        AnimationBlendTime  = 5
        Distance = 50
      End
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      FXEvent = Frame:4 Name:FX_EntLeftFootStep
      FXEvent = Frame:18 Name:FX_EntRightFootStep
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
        CurDrawablePlaySound("EntRunFire")
      EndScript
    End
    AnimationState = AFLAME WADING
      Animation = Splash
        AnimationName = RUTreeberd_SPLA
        AnimationMode = LOOP
        AnimationBlendTime = 5
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End




        AnimationState = RELOADING_A WEAPONSET_TOGGLE_1
            Animation
                AnimationName        = RUTreeberd_GRBA
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
            FXEvent    = Frame:20    Name: FX_EntRockGrab
            FXEvent    = Frame:24    Name: FX_EntRockYank
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
        End

        AnimationState                = TURN_RIGHT WEAPONSET_TOGGLE_1
            StateName                = Turn
            Animation
                AnimationName        = RUTreeberd_TNR2
                AnimationMode        = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState                = TURN_LEFT WEAPONSET_TOGGLE_1
            StateName                = Turn
            Animation
                AnimationName        = RUTreeberd_TNL2
                AnimationMode        = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState = FIRING_OR_PREATTACK_A AIM_NEAR WEAPONSET_TOGGLE_1
            Animation = CloseRock
                AnimationName        = RUTreeberd_THRC
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes

            End
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
            FrameForPristineBonePositions = 39
        End

        AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            Animation = FarRock
                AnimationName        = RUTreeberd_THRB
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes

            End
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
            FrameForPristineBonePositions = 40
        End




        AnimationState = MOVING FIRING_OR_PREATTACK_A
            Animation = RunAndFire
                AnimationName       = RUTreeberd_ATRA
                AnimationMode       = LOOP
            End
        End

        AnimationState                = TURN_RIGHT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUTreeberd_TRNR
                AnimationMode        = LOOP
            End
        End

        AnimationState                = TURN_LEFT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUTreeberd_TRNL
                AnimationMode        = LOOP
            End
        End

        AnimationState = FIRING_OR_PREATTACK_A
            Animation = Punch
                AnimationName        = RUTreeberd_ATKA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = Punt
                AnimationName        = RUTreeberd_ATKD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = FrontKick
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunch
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            BeginScript
                if CurDrawableIsCurrentTargetKindof("MONSTER") then
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("FrontKick")
                    else
                        return ("KirkPunch")
                    end
                else
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("Punch")
                    else
                        return ("Punt")
                    end
                end
            EndScript
        End

        AnimationState = FIRING_OR_PREATTACK_B
            Animation = FrontKickOnBuilding
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunchOnBuilding
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
        End




        AnimationState = PACKING GRAB_BUILDING_CHUNK
            Animation = Pack
                AnimationName        = RUTreeberd_GBB2
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
        End

        AnimationState = UNPACKING GRAB_BUILDING_CHUNK
            Animation = Pack
                AnimationName        = RUTreeberd_GBB1
                AnimationMode        = ONCE
                AnimationBlendTime    = 20
            End
            ParticleSysBone = ParticleNode01 TreeBeardAttackLeavesFir
        End

        AnimationState = PACKING
            Animation = Pack
                AnimationName    = RUTreeberd_GBA2
                AnimationMode    = ONCE
            End
        End

        AnimationState = UNPACKING
            Animation = Pack
                AnimationName    = RUTreeberd_GBA1
                AnimationMode    = ONCE
            End
        End



        AnimationState = MOVING PANICKING
            Animation = Jump
                AnimationName                = RUTreeberd_MFDA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.5 0.5
                AnimationBlendTime            = 5
                Distance                    = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
            FXEvent    = Frame:4 Name:FX_EntLeftFootStep
            FXEvent    = Frame:18 Name:FX_EntRightFootStep
        End

        AnimationState                = MOVING WEAPONSET_TOGGLE_1
            StateName                = Moving
            Animation
                AnimationName        = RUTreeberd_WLKB
                Distance            = 50
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:26 Name:FX_EntRightFootStep
        End

        AnimationState                = MOVING
            StateName                = Moving
            Animation                = Walk
                AnimationName        = RUTreeberd_WLKA
                Distance            = 50
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:39 Name:FX_EntRightFootStep
            FXEvent    = Frame:79 Name:FX_EntLeftFootStep
            FXEvent    = Frame:129 Name:FX_EntRightFootStep
        End


        AnimationState                        = HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITB
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = HIT_REACTION HIT_LEVEL_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = WEAPONSET_TOGGLE_1
            StateName                        = Idle
            Animation
                AnimationName                = RUTreeberd_IDLB
                AnimationMode                = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_JustBuilt" then CurDrawableShowSubObjectPermanently("ROCK") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25R") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
            EndScript
            ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End




        TransitionState = TRANS_Accelerate
            Animation = Transition
                AnimationName        = RUTreeberd_ACLA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.75 0.75
            End
        End

        TransitionState = TRANS_Stop75
            Animation = Transition
                AnimationName        = RUTreeberd_DCLC
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop50
            Animation = Transition
                AnimationName        = RUTreeberd_DCLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop25
            Animation = Transition
                AnimationName        = RUTreeberd_DCLD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop00
            Animation = Transition
                AnimationName        = RUTreeberd_DCLA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End




        TransitionState = TRANS_AccelerateR
            Animation = Transition
                AnimationName        = RUTreeberd_ACLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.75 0.75
            End
        End

        TransitionState = TRANS_Stop75R
            Animation
                AnimationName        = RUTreeberd_DCLG
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop50R
            Animation
                AnimationName        = RUTreeberd_DCLF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop25R
            Animation
                AnimationName        = RUTreeberd_DCLH
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop00R
            Animation
                AnimationName        = RUTreeberd_DCLE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End




        TransitionState = TRANS_AccelerateENR
            Animation = Transition
                AnimationName        = RUTreeberd_ACLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop75ENR
            Animation
                AnimationName        = RUTreeberd_DCLG
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop50ENR
            Animation
                AnimationName        = RUTreeberd_DCLF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop25ENR
            Animation
                AnimationName        = RUTreeberd_DCLH
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop00ENR
            Animation
                AnimationName        = RUTreeberd_DCLE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
            End
        End

    End

    DisplayName             = OBJECT:RohanEntFire

    WeaponSet
        Conditions          = None
        Weapon              = PRIMARY      RohanTreeBeardPunchMod
        Weapon              = SECONDARY    RohanBuildingTeardown
        OnlyAgainst         = SECONDARY    STRUCTURE BLOCKING_GATE
    End

    WeaponSet
        Conditions          = WEAPONSET_TOGGLE_1
        Weapon              = PRIMARY    RohanEntRockThrowEdain_Summoned
    End


    KindOf        = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_INFANTRY CAN_ATTACK_WALLS SCARY BIG_MONSTER SUMMONED
    IsTrainable   = No
    CommandPoints = 0
    MaxSimultaneousOfType = NEW_CATAPULT_MONSTER_RATIO

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = 180000
        MaxLifetime        = 180000
        DeathType        = FADED
    End
    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion    = Terror_Base
    End
End


ChildObject RohanEntBirch RohanEntBase


    Draw = W3DScriptedModelDraw ModuleTag_01

        StaticModelLODMode = Yes

        WadingParticleSys = EntRipples
        WadingParticleSys = EntSplash

        OkToChangeModelColor = Yes
        ExtraPublicBone = IMPACT
        ExtraPublicBone = ROCK

       DefaultModelConditionState
           Model               = RUEntBirch_SKN
           Skeleton            = RUTreeberd_SKL
           WeaponLaunchBone    = PRIMARY Firepoint
           WeaponLaunchBone    = SECONDARY Firepoint
           ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
       End

       ModelConditionState = WADING AFLAME
           Model    = RUEntBirchD_SKN
           Skeleton = RUTreeBerd_SKL
           WeaponLaunchBone = PRIMARY Firepoint
           WeaponLaunchBone = SECONDARY Firepoint
           ParticleSysBone = BAT_HEAD TreebeardSteam FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TreebeardSteam FollowBone:Yes
           ParticleSysBone = BAT_PELVIS TreebeardSteam1 FollowBone:Yes
           ParticleSysBone = BAT_CALFR TreebeardSteam FollowBone:Yes
           ParticleSysBone = B_POINT1L TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_POINT1R TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_THUMB1L TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_THUMB1R TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = NONE TrBrdWaterRipples FollowBone:No
           ParticleSysBone = NONE TrBrdWaterRipples FollowBone:No
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_HANDR TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_HANDL TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash3 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash3 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash4 FollowBone:Yes
       End


       ModelConditionState  = AFLAME
            Model           = RUEntBirchD_SKN
            Skeleton        = RUTreeberd_SKL
            ParticleSysBone = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HANDR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HANDL TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
        End

        ModelConditionState  = AFLAME BURNED
            Model            = RUEntBirchD_SKN
            Skeleton         = RUTreeberd_SKL
            WeaponLaunchBone = PRIMARY Firepoint
            WeaponLaunchBone = SECONDARY Firepoint
            ParticleSysBone  = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HANDR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HANDL TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
         End

         ModelConditionState = BURNED
            Model = RUEntBirchD_SKN
            Skeleton = RUTreeBerd_SKL
            WeaponLaunchBone    = PRIMARY Firepoint
            WeaponLaunchBone    = SECONDARY Firepoint
         End


        IdleAnimationState
            StateName = Idle
            Animation = IDLA
                AnimationName = RUTreeberd_IDLA
                AnimationBlendTime  = 5
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
        if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
      ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End




        AnimationState = DYING BURNINGDEATH
            Animation
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
                AnimationBlendTime = 10
            End





        End

        AnimationState            = BURNINGDEATH
            Animation
                AnimationName    = RUTreeberd_MFDA
                AnimationMode    = LOOP
                Distance        = 100
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
        End

        AnimationState = DYING DEATH_2
            Animation = Die
                AnimationName = RUTreeberd_MOTC
                AnimationMode = ONCE_BACKWARDS
            End
      Flags = START_FRAME_LAST
        End

        AnimationState = AFLAME DYING SPLATTED
            Animation = DieSplat
                AnimationName = RUTreeberd_LNDA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState = AFLAME DYING
            Animation = Die
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState = DYING SPLATTED
            Animation = DieSplat
                AnimationName    = RUTreeberd_LNDA
                AnimationMode    = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState = DYING WEAPONSET_TOGGLE_1
            Animation = Die
                AnimationName = RUTreeberd_DIEB
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState = DYING
            Animation = Die
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End




        AnimationState   = JUST_BUILT
            StateName        = STATE_JustBuilt
            Animation = Sprout
                AnimationName = RUTreeberd_MOTC
                AnimationMode = ONCE
                AnimationBlendTime = 0
                AnimationSpeedFactorRange = 0.5 0.5
            End
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
        End

    AnimationState = PREPARING
    StateName = STATE_Debate
      Animation = Debate
        AnimationName = RUTreeberd_MOTB
        AnimationMode = LOOP
        AnimationBlendTime = 30
        AnimationSpeedFactorRange = 0.8 1.1
      End
      Flags = RANDOMSTART
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

    TransitionState = TRANS_Sprout
      Animation = Sprout
        AnimationName = RUTreeberd_MOTA
        AnimationMode = ONCE
        AnimationBlendTime = 0
        AnimationSpeedFactorRange = 0.5 0.5
      End

    End




    AnimationState = AFLAME STUNNED_FLAILING
      Animation = StunFlail
        AnimationName = RUTreeberd_FLYA
        AnimationMode = LOOP
      End
      Flags = RANDOMSTART
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

    AnimationState = AFLAME STUNNED
      Animation = Stun
        AnimationName = RUTreeberd_LNDA
        AnimationMode = ONCE
      End
      ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

    AnimationState = AFLAME STUNNED_STANDING_UP
      Animation = Stun
        AnimationName = RUTreeberd_GTPA
        AnimationMode = ONCE
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

        AnimationState        = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = RUTreeberd_FLYA
                AnimationMode      = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED
            Animation           = Stun
                AnimationName     = RUTreeberd_LNDA
                AnimationMode      = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName     = RUTreeberd_GTPA
                AnimationMode      = ONCE
            End
        End




        AnimationState                = INITIAL_ENRAGED
            StateName                = Enraged
            Animation                = RUTreeBerd_MADA
                AnimationName        = RUTreeBerd_MADA
                AnimationMode        = ONCE
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState = USER_3
            Animation = OnFire
                AnimationName = RUTreeberd_RCTD
                AnimationMode = ONCE
                AnimationBlendTime = 20
            End
            FXEvent    = Frame:54 Name:FX_EntRightFootStep
        End




        AnimationState = MOVING FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
            Animation = RunAndFire
                AnimationName       = RUTreeberd_ATRB
                AnimationMode       = LOOP
            End
        End



        AnimationState        = WEAPONSET_ENRAGED TURN_LEFT
            Animation           = Walk
                AnimationName     = RUTreeberd_TRNL
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState        = WEAPONSET_ENRAGED TURN_RIGHT
            Animation           = Walk
                AnimationName     = RUTreeberd_TRNR
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End


        AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
            Animation = Punch
                AnimationName        = RUTreeberd_ATKA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = Punt
                AnimationName        = RUTreeberd_ATKD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = FrontKick
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunch
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            BeginScript
                if CurDrawableIsCurrentTargetKindof("MONSTER") then
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("FrontKick")
                    else
                        return ("KirkPunch")
                    end
                else
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("Punch")
                    else
                        return ("Punt")
                    end
                end
            EndScript
        End

        AnimationState = FIRING_OR_PREATTACK_B WEAPONSET_ENRAGED
            Animation = FrontKickOnBuilding
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunchOnBuilding
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
        End



        AnimationState = WEAPONSET_ENRAGED MOVING PANICKING
            Animation = Jump
                AnimationName                = RUTreeberd_MFDA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.5 0.5
                AnimationBlendTime            = 5
                Distance                    = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
            FXEvent    = Frame:4 Name:FX_EntLeftFootStep
            FXEvent    = Frame:18 Name:FX_EntRightFootStep
        End

    AnimationState = WEAPONSET_ENRAGED AFLAME WADING
      Animation = Splash
        AnimationName = RUTreeberd_SPLA
        AnimationMode = LOOP
        AnimationBlendTime = 5
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

        AnimationState        = WEAPONSET_ENRAGED MOVING
            Animation           = AngryStompWalk
                AnimationName     = RUTreeberd_WLKC
                AnimationMode      = LOOP
                AnimationBlendTime  = 5
                Distance            = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_AccelerateENR") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_AccelerateENR") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:39 Name:FX_EntRightFootStep
            FXEvent    = Frame:79 Name:FX_EntLeftFootStep
            FXEvent    = Frame:129 Name:FX_EntRightFootStep
        End

        AnimationState                        = WEAPONSET_ENRAGED HIT_REACTION HIT_LEVEL_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = WEAPONSET_ENRAGED
            Animation                        = AngryIdle
                AnimationName                = RUTreeberd_IDLC
                AnimationMode                = LOOP
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25ENR") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
        if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
      ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End




    AnimationState = AFLAME TURN_LEFT
      Animation = Walk
        AnimationName = RUTreeberd_TRNL
        AnimationMode = LOOP
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End
    AnimationState = AFLAME TURN_RIGHT
      Animation = Walk
        AnimationName = RUTreeberd_TRNR
        AnimationMode = LOOP
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End
    AnimationState = AFLAME MOVING
      Animation = Jump
        AnimationName = RUTreeberd_MFDA
        AnimationMode = LOOP
        AnimationSpeedFactorRange = 0.5 0.5
        AnimationBlendTime  = 5
        Distance = 50
      End
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      FXEvent = Frame:4 Name:FX_EntLeftFootStep
      FXEvent = Frame:18 Name:FX_EntRightFootStep
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
        CurDrawablePlaySound("EntRunFire")
      EndScript
    End
    AnimationState = AFLAME WADING
      Animation = Splash
        AnimationName = RUTreeberd_SPLA
        AnimationMode = LOOP
        AnimationBlendTime = 5
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End




        AnimationState = RELOADING_A WEAPONSET_TOGGLE_1
            Animation
                AnimationName        = RUTreeberd_GRBA
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
            FXEvent    = Frame:20    Name: FX_EntRockGrab
            FXEvent    = Frame:24    Name: FX_EntRockYank
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
        End

        AnimationState                = TURN_RIGHT WEAPONSET_TOGGLE_1
            StateName                = Turn
            Animation
                AnimationName        = RUTreeberd_TNR2
                AnimationMode        = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState                = TURN_LEFT WEAPONSET_TOGGLE_1
            StateName                = Turn
            Animation
                AnimationName        = RUTreeberd_TNL2
                AnimationMode        = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState = FIRING_OR_PREATTACK_A AIM_NEAR WEAPONSET_TOGGLE_1
            Animation = CloseRock
                AnimationName        = RUTreeberd_THRC
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes

            End
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
            FrameForPristineBonePositions = 39
        End

        AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            Animation = FarRock
                AnimationName        = RUTreeberd_THRB
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes

            End
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
            FrameForPristineBonePositions = 40
        End




        AnimationState = MOVING FIRING_OR_PREATTACK_A
            Animation = RunAndFire
                AnimationName       = RUTreeberd_ATRA
                AnimationMode       = LOOP
            End
        End

        AnimationState                = TURN_RIGHT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUTreeberd_TRNR
                AnimationMode        = LOOP
            End
        End

        AnimationState                = TURN_LEFT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUTreeberd_TRNL
                AnimationMode        = LOOP
            End
        End

        AnimationState = FIRING_OR_PREATTACK_A
            Animation = Punch
                AnimationName        = RUTreeberd_ATKA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = Punt
                AnimationName        = RUTreeberd_ATKD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = FrontKick
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunch
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            BeginScript
                if CurDrawableIsCurrentTargetKindof("MONSTER") then
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("FrontKick")
                    else
                        return ("KirkPunch")
                    end
                else
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("Punch")
                    else
                        return ("Punt")
                    end
                end
            EndScript
        End

        AnimationState = FIRING_OR_PREATTACK_B
            Animation = FrontKickOnBuilding
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunchOnBuilding
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
        End




        AnimationState = PACKING GRAB_BUILDING_CHUNK
            Animation = Pack
                AnimationName        = RUTreeberd_GBB2
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
        End

        AnimationState = UNPACKING GRAB_BUILDING_CHUNK
            Animation = Pack
                AnimationName        = RUTreeberd_GBB1
                AnimationMode        = ONCE
                AnimationBlendTime    = 20
            End
            ParticleSysBone = ParticleNode01 TreeBeardAttackLeavesFir
        End

        AnimationState = PACKING
            Animation = Pack
                AnimationName    = RUTreeberd_GBA2
                AnimationMode    = ONCE
            End
        End

        AnimationState = UNPACKING
            Animation = Pack
                AnimationName    = RUTreeberd_GBA1
                AnimationMode    = ONCE
            End
        End



        AnimationState = MOVING PANICKING
            Animation = Jump
                AnimationName                = RUTreeberd_MFDA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.5 0.5
                AnimationBlendTime            = 5
                Distance                    = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
            FXEvent    = Frame:4 Name:FX_EntLeftFootStep
            FXEvent    = Frame:18 Name:FX_EntRightFootStep
        End

        AnimationState                = MOVING WEAPONSET_TOGGLE_1
            StateName                = Moving
            Animation
                AnimationName        = RUTreeberd_WLKB
                Distance            = 50
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:26 Name:FX_EntRightFootStep
        End

        AnimationState                = MOVING
            StateName                = Moving
            Animation                = Walk
                AnimationName        = RUTreeberd_WLKA
                Distance            = 50
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:39 Name:FX_EntRightFootStep
            FXEvent    = Frame:79 Name:FX_EntLeftFootStep
            FXEvent    = Frame:129 Name:FX_EntRightFootStep
        End


        AnimationState                        = HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITB
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = HIT_REACTION HIT_LEVEL_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = WEAPONSET_TOGGLE_1
            StateName                        = Idle
            Animation
                AnimationName                = RUTreeberd_IDLB
                AnimationMode                = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_JustBuilt" then CurDrawableShowSubObjectPermanently("ROCK") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25R") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
            EndScript
            ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End




        TransitionState = TRANS_Accelerate
            Animation = Transition
                AnimationName        = RUTreeberd_ACLA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.75 0.75
            End
        End

        TransitionState = TRANS_Stop75
            Animation = Transition
                AnimationName        = RUTreeberd_DCLC
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop50
            Animation = Transition
                AnimationName        = RUTreeberd_DCLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop25
            Animation = Transition
                AnimationName        = RUTreeberd_DCLD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop00
            Animation = Transition
                AnimationName        = RUTreeberd_DCLA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End




        TransitionState = TRANS_AccelerateR
            Animation = Transition
                AnimationName        = RUTreeberd_ACLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.75 0.75
            End
        End

        TransitionState = TRANS_Stop75R
            Animation
                AnimationName        = RUTreeberd_DCLG
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop50R
            Animation
                AnimationName        = RUTreeberd_DCLF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop25R
            Animation
                AnimationName        = RUTreeberd_DCLH
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop00R
            Animation
                AnimationName        = RUTreeberd_DCLE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End




        TransitionState = TRANS_AccelerateENR
            Animation = Transition
                AnimationName        = RUTreeberd_ACLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop75ENR
            Animation
                AnimationName        = RUTreeberd_DCLG
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop50ENR
            Animation
                AnimationName        = RUTreeberd_DCLF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop25ENR
            Animation
                AnimationName        = RUTreeberd_DCLH
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop00ENR
            Animation
                AnimationName        = RUTreeberd_DCLE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
            End
        End
    End

    WeaponSet
        Conditions          = None
        Weapon              = PRIMARY      RohanTreeBeardPunchMod
        Weapon              = SECONDARY    RohanBuildingTeardown
        OnlyAgainst         = SECONDARY    STRUCTURE BLOCKING_GATE
    End

    WeaponSet
        Conditions          = WEAPONSET_TOGGLE_1
        Weapon              = PRIMARY    RohanEntRockThrowEdain_Summoned
    End

    KindOf        = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_INFANTRY CAN_ATTACK_WALLS SCARY BIG_MONSTER SUMMONED
    IsTrainable   = No
    CommandPoints = 0
    MaxSimultaneousOfType = NEW_CATAPULT_MONSTER_RATIO

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime      = CREATE_A_HERO_REINFORCEMENT_LIFETIME
        MaxLifetime      = CREATE_A_HERO_REINFORCEMENT_LIFETIME
        DeathType        = FADED
    End
    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion    = Terror_Base
    End

    DisplayName       = OBJECT:RohanEntBirch
End


ChildObject RohanEntBirch_Summoned RohanEntBase
    Draw = W3DScriptedModelDraw ModuleTag_01

        StaticModelLODMode = Yes
        WadingParticleSys = EntRipples
        WadingParticleSys = EntSplash

        OkToChangeModelColor = Yes

        ExtraPublicBone = B_POINT1R
        ExtraPublicBone = PASSENGER
        ExtraPublicBone = IMPACT
        ExtraPublicBone = ROCK

       DefaultModelConditionState
           Model               = RUEntOak_SKN
           Skeleton            = RUTreeberd_SKL
           WeaponLaunchBone    = PRIMARY Firepoint
           WeaponLaunchBone    = SECONDARY Firepoint
           ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
       End

       ModelConditionState = WADING AFLAME
           Model    = RUEntOakD_SKN
           Skeleton = RUTreeBerd_SKL
           WeaponLaunchBone = PRIMARY Firepoint
           WeaponLaunchBone = SECONDARY Firepoint
           ParticleSysBone = BAT_HEAD TreebeardSteam FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TreebeardSteam FollowBone:Yes
           ParticleSysBone = BAT_PELVIS TreebeardSteam1 FollowBone:Yes
           ParticleSysBone = BAT_CALFR TreebeardSteam FollowBone:Yes
           ParticleSysBone = B_POINT1L TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_POINT1R TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_THUMB1L TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_THUMB1R TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = NONE TrBrdWaterRipples FollowBone:No
           ParticleSysBone = NONE TrBrdWaterRipples FollowBone:No
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_HANDR TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_HANDL TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash3 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash3 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash4 FollowBone:Yes
       End


       ModelConditionState  = AFLAME
            Model           = RUEntOakD_SKN
            Skeleton        = RUTreeberd_SKL
            ParticleSysBone = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HANDR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HANDL TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
        End

        ModelConditionState  = AFLAME BURNED
            Model            = RUEntOakD_SKN
            Skeleton         = RUTreeberd_SKL
            WeaponLaunchBone = PRIMARY Firepoint
            WeaponLaunchBone = SECONDARY Firepoint
            ParticleSysBone  = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HANDR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HANDL TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
         End

         ModelConditionState = BURNED
            Model = RUEntOakD_SKN
            Skeleton = RUTreeBerd_SKL
            WeaponLaunchBone    = PRIMARY Firepoint
            WeaponLaunchBone    = SECONDARY Firepoint
         End

         ModelConditionState = BURNT_MODEL DYING
            Model               = RUEntOakD_SKN
            Skeleton            = RUTreeBerd_SKL
            WeaponLaunchBone    = PRIMARY Firepoint
            WeaponLaunchBone    = SECONDARY Firepoint
         End


        IdleAnimationState
            StateName = Idle
            Animation = IDLA
                AnimationName = RUTreeberd_IDLA
                AnimationBlendTime  = 5
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
        if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
      ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End




        AnimationState = DYING BURNINGDEATH
            Animation
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
                AnimationBlendTime = 10
            End





        End

        AnimationState            = BURNINGDEATH
            Animation
                AnimationName    = RUTreeberd_MFDA
                AnimationMode    = LOOP
                Distance        = 100
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
        End

        AnimationState = DYING DEATH_2
            Animation = Die
                AnimationName = RUTreeberd_MOTC
                AnimationMode = ONCE_BACKWARDS
            End
      Flags = START_FRAME_LAST
        End

        AnimationState = AFLAME DYING SPLATTED
            Animation = DieSplat
                AnimationName = RUTreeberd_LNDA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState = AFLAME DYING
            Animation = Die
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState = DYING SPLATTED
            Animation = DieSplat
                AnimationName    = RUTreeberd_LNDA
                AnimationMode    = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState = DYING WEAPONSET_TOGGLE_1
            Animation = Die
                AnimationName = RUTreeberd_DIEB
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState = DYING
            Animation = Die
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End




        AnimationState   = JUST_BUILT
            StateName        = STATE_JustBuilt
            Animation = Sprout
                AnimationName = RUTreeberd_MOTC
                AnimationMode = ONCE
                AnimationBlendTime = 0
                AnimationSpeedFactorRange = 0.5 0.5
            End
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
        End

    AnimationState = PREPARING
    StateName = STATE_Debate
      Animation = Debate
        AnimationName = RUTreeberd_MOTB
        AnimationMode = LOOP
        AnimationBlendTime = 30
        AnimationSpeedFactorRange = 0.8 1.1
      End
      Flags = RANDOMSTART
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

    TransitionState = TRANS_Sprout
      Animation = Sprout
        AnimationName = RUTreeberd_MOTA
        AnimationMode = ONCE
        AnimationBlendTime = 0
        AnimationSpeedFactorRange = 0.5 0.5
      End

    End




    AnimationState = AFLAME STUNNED_FLAILING
      Animation = StunFlail
        AnimationName = RUTreeberd_FLYA
        AnimationMode = LOOP
      End
      Flags = RANDOMSTART
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

    AnimationState = AFLAME STUNNED
      Animation = Stun
        AnimationName = RUTreeberd_LNDA
        AnimationMode = ONCE
      End
      ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

    AnimationState = AFLAME STUNNED_STANDING_UP
      Animation = Stun
        AnimationName = RUTreeberd_GTPA
        AnimationMode = ONCE
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

        AnimationState        = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = RUTreeberd_FLYA
                AnimationMode      = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED
            Animation           = Stun
                AnimationName     = RUTreeberd_LNDA
                AnimationMode      = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName     = RUTreeberd_GTPA
                AnimationMode      = ONCE
            End
        End




        AnimationState                = INITIAL_ENRAGED
            StateName                = Enraged
            Animation                = RUTreeBerd_MADA
                AnimationName        = RUTreeBerd_MADA
                AnimationMode        = ONCE
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState = USER_3
            Animation = OnFire
                AnimationName = RUTreeberd_RCTD
                AnimationMode = ONCE
                AnimationBlendTime = 20
            End
            FXEvent    = Frame:54 Name:FX_EntRightFootStep
        End




        AnimationState = MOVING FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
            Animation = RunAndFire
                AnimationName       = RUTreeberd_ATRB
                AnimationMode       = LOOP
            End
        End



        AnimationState        = WEAPONSET_ENRAGED TURN_LEFT
            Animation           = Walk
                AnimationName     = RUTreeberd_TRNL
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState        = WEAPONSET_ENRAGED TURN_RIGHT
            Animation           = Walk
                AnimationName     = RUTreeberd_TRNR
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End


        AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
            Animation = Punch
                AnimationName        = RUTreeberd_ATKA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = Punt
                AnimationName        = RUTreeberd_ATKD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = FrontKick
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunch
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            BeginScript
                if CurDrawableIsCurrentTargetKindof("MONSTER") then
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("FrontKick")
                    else
                        return ("KirkPunch")
                    end
                else
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("Punch")
                    else
                        return ("Punt")
                    end
                end
            EndScript
        End

        AnimationState = FIRING_OR_PREATTACK_B WEAPONSET_ENRAGED
            Animation = FrontKickOnBuilding
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunchOnBuilding
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
        End



        AnimationState = WEAPONSET_ENRAGED MOVING PANICKING
            Animation = Jump
                AnimationName                = RUTreeberd_MFDA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.5 0.5
                AnimationBlendTime            = 5
                Distance                    = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
            FXEvent    = Frame:4 Name:FX_EntLeftFootStep
            FXEvent    = Frame:18 Name:FX_EntRightFootStep
        End

    AnimationState = WEAPONSET_ENRAGED AFLAME WADING
      Animation = Splash
        AnimationName = RUTreeberd_SPLA
        AnimationMode = LOOP
        AnimationBlendTime = 5
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

        AnimationState        = WEAPONSET_ENRAGED MOVING
            Animation           = AngryStompWalk
                AnimationName     = RUTreeberd_WLKC
                AnimationMode      = LOOP
                AnimationBlendTime  = 5
                Distance            = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_AccelerateENR") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_AccelerateENR") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:39 Name:FX_EntRightFootStep
            FXEvent    = Frame:79 Name:FX_EntLeftFootStep
            FXEvent    = Frame:129 Name:FX_EntRightFootStep
        End

        AnimationState                        = WEAPONSET_ENRAGED HIT_REACTION HIT_LEVEL_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = WEAPONSET_ENRAGED
            Animation                        = AngryIdle
                AnimationName                = RUTreeberd_IDLC
                AnimationMode                = LOOP
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25ENR") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
        if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
      ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End




    AnimationState = AFLAME TURN_LEFT
      Animation = Walk
        AnimationName = RUTreeberd_TRNL
        AnimationMode = LOOP
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End
    AnimationState = AFLAME TURN_RIGHT
      Animation = Walk
        AnimationName = RUTreeberd_TRNR
        AnimationMode = LOOP
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End
    AnimationState = AFLAME MOVING
      Animation = Jump
        AnimationName = RUTreeberd_MFDA
        AnimationMode = LOOP
        AnimationSpeedFactorRange = 0.5 0.5
        AnimationBlendTime  = 5
        Distance = 50
      End
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      FXEvent = Frame:4 Name:FX_EntLeftFootStep
      FXEvent = Frame:18 Name:FX_EntRightFootStep
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
        CurDrawablePlaySound("EntRunFire")
      EndScript
    End
    AnimationState = AFLAME WADING
      Animation = Splash
        AnimationName = RUTreeberd_SPLA
        AnimationMode = LOOP
        AnimationBlendTime = 5
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End




        AnimationState = RELOADING_A WEAPONSET_TOGGLE_1
            Animation
                AnimationName        = RUTreeberd_GRBA
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
            FXEvent    = Frame:20    Name: FX_EntRockGrab
            FXEvent    = Frame:24    Name: FX_EntRockYank
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
        End

        AnimationState                = TURN_RIGHT WEAPONSET_TOGGLE_1
            StateName                = Turn
            Animation
                AnimationName        = RUTreeberd_TNR2
                AnimationMode        = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState                = TURN_LEFT WEAPONSET_TOGGLE_1
            StateName                = Turn
            Animation
                AnimationName        = RUTreeberd_TNL2
                AnimationMode        = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState = FIRING_OR_PREATTACK_A AIM_NEAR WEAPONSET_TOGGLE_1
            Animation = CloseRock
                AnimationName        = RUTreeberd_THRC
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes

            End
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
            FrameForPristineBonePositions = 39
        End

        AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            Animation = FarRock
                AnimationName        = RUTreeberd_THRB
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes

            End
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
            FrameForPristineBonePositions = 40
        End




        AnimationState = MOVING FIRING_OR_PREATTACK_A
            Animation = RunAndFire
                AnimationName       = RUTreeberd_ATRA
                AnimationMode       = LOOP
            End
        End

        AnimationState                = TURN_RIGHT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUTreeberd_TRNR
                AnimationMode        = LOOP
            End
        End

        AnimationState                = TURN_LEFT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUTreeberd_TRNL
                AnimationMode        = LOOP
            End
        End

        AnimationState = FIRING_OR_PREATTACK_A
            Animation = Punch
                AnimationName        = RUTreeberd_ATKA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = Punt
                AnimationName        = RUTreeberd_ATKD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = FrontKick
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunch
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            BeginScript
                if CurDrawableIsCurrentTargetKindof("MONSTER") then
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("FrontKick")
                    else
                        return ("KirkPunch")
                    end
                else
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("Punch")
                    else
                        return ("Punt")
                    end
                end
            EndScript
        End

        AnimationState = FIRING_OR_PREATTACK_B
            Animation = FrontKickOnBuilding
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunchOnBuilding
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
        End




        AnimationState = PACKING GRAB_BUILDING_CHUNK
            Animation = Pack
                AnimationName        = RUTreeberd_GBB2
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
        End

        AnimationState = UNPACKING GRAB_BUILDING_CHUNK
            Animation = Pack
                AnimationName        = RUTreeberd_GBB1
                AnimationMode        = ONCE
                AnimationBlendTime    = 20
            End
            ParticleSysBone = ParticleNode01 TreeBeardAttackLeavesFir
        End

        AnimationState = PACKING
            Animation = Pack
                AnimationName    = RUTreeberd_GBA2
                AnimationMode    = ONCE
            End
        End

        AnimationState = UNPACKING
            Animation = Pack
                AnimationName    = RUTreeberd_GBA1
                AnimationMode    = ONCE
            End
        End



        AnimationState = MOVING PANICKING
            Animation = Jump
                AnimationName                = RUTreeberd_MFDA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.5 0.5
                AnimationBlendTime            = 5
                Distance                    = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
            FXEvent    = Frame:4 Name:FX_EntLeftFootStep
            FXEvent    = Frame:18 Name:FX_EntRightFootStep
        End

        AnimationState                = MOVING WEAPONSET_TOGGLE_1
            StateName                = Moving
            Animation
                AnimationName        = RUTreeberd_WLKB
                Distance            = 50
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:26 Name:FX_EntRightFootStep
        End

        AnimationState                = MOVING
            StateName                = Moving
            Animation                = Walk
                AnimationName        = RUTreeberd_WLKA
                Distance            = 50
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:39 Name:FX_EntRightFootStep
            FXEvent    = Frame:79 Name:FX_EntLeftFootStep
            FXEvent    = Frame:129 Name:FX_EntRightFootStep
        End


        AnimationState                        = HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITB
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = HIT_REACTION HIT_LEVEL_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = WEAPONSET_TOGGLE_1
            StateName                        = Idle
            Animation
                AnimationName                = RUTreeberd_IDLB
                AnimationMode                = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_JustBuilt" then CurDrawableShowSubObjectPermanently("ROCK") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25R") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
            EndScript
            ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End




        TransitionState = TRANS_Accelerate
            Animation = Transition
                AnimationName        = RUTreeberd_ACLA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.75 0.75
            End
        End

        TransitionState = TRANS_Stop75
            Animation = Transition
                AnimationName        = RUTreeberd_DCLC
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop50
            Animation = Transition
                AnimationName        = RUTreeberd_DCLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop25
            Animation = Transition
                AnimationName        = RUTreeberd_DCLD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop00
            Animation = Transition
                AnimationName        = RUTreeberd_DCLA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End




        TransitionState = TRANS_AccelerateR
            Animation = Transition
                AnimationName        = RUTreeberd_ACLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.75 0.75
            End
        End

        TransitionState = TRANS_Stop75R
            Animation
                AnimationName        = RUTreeberd_DCLG
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop50R
            Animation
                AnimationName        = RUTreeberd_DCLF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop25R
            Animation
                AnimationName        = RUTreeberd_DCLH
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop00R
            Animation
                AnimationName        = RUTreeberd_DCLE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End




        TransitionState = TRANS_AccelerateENR
            Animation = Transition
                AnimationName        = RUTreeberd_ACLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop75ENR
            Animation
                AnimationName        = RUTreeberd_DCLG
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop50ENR
            Animation
                AnimationName        = RUTreeberd_DCLF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop25ENR
            Animation
                AnimationName        = RUTreeberd_DCLH
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop00ENR
            Animation
                AnimationName        = RUTreeberd_DCLE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End
    End

    WeaponSet
        Conditions          = None
        Weapon              = PRIMARY      RohanTreeBeardPunchMod
        Weapon              = SECONDARY    RohanBuildingTeardown
        OnlyAgainst         = SECONDARY    STRUCTURE BLOCKING_GATE
    End

    WeaponSet
        Conditions          = WEAPONSET_TOGGLE_1
        Weapon              = PRIMARY    RohanEntRockThrowEdain_Summoned
    End

    KindOf        = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_INFANTRY CAN_ATTACK_WALLS SCARY BIG_MONSTER SUMMONED
    IsTrainable   = No
    CommandPoints = 0
    MaxSimultaneousOfType = NEW_CATAPULT_MONSTER_RATIO

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = 180000
        MaxLifetime        = 180000
        DeathType        = FADED
    End
    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion    = Terror_Base
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion    = Terror_Base
    End

    DisplayName       = OBJECT:RohanEntBirch
End


ChildObject RohanEntOak_Summoned RohanEntBase
    Draw = W3DScriptedModelDraw ModuleTag_01

    StaticModelLODMode = Yes

    WadingParticleSys = EntRipples
    WadingParticleSys = EntSplash

      OkToChangeModelColor = Yes
      ExtraPublicBone = IMPACT
        ExtraPublicBone = ROCK

       DefaultModelConditionState
           Model               = RUEntBirch_SKN
           Skeleton            = RUTreeberd_SKL
           WeaponLaunchBone    = PRIMARY Firepoint
           WeaponLaunchBone    = SECONDARY Firepoint
           ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
       End

       ModelConditionState = WADING AFLAME
           Model    = RUEntBirchD_SKN
           Skeleton = RUTreeBerd_SKL
           WeaponLaunchBone = PRIMARY Firepoint
           WeaponLaunchBone = SECONDARY Firepoint
           ParticleSysBone = BAT_HEAD TreebeardSteam FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TreebeardSteam FollowBone:Yes
           ParticleSysBone = BAT_PELVIS TreebeardSteam1 FollowBone:Yes
           ParticleSysBone = BAT_CALFR TreebeardSteam FollowBone:Yes
           ParticleSysBone = B_POINT1L TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_POINT1R TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_THUMB1L TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_THUMB1R TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = NONE TrBrdWaterRipples FollowBone:No
           ParticleSysBone = NONE TrBrdWaterRipples FollowBone:No
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_HANDR TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_HANDL TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash3 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash3 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash4 FollowBone:Yes
       End


       ModelConditionState  = AFLAME
            Model           = RUEntBirchD_SKN
            Skeleton        = RUTreeberd_SKL
            ParticleSysBone = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HANDR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HANDL TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
        End

        ModelConditionState  = AFLAME BURNED
            Model            = RUEntBirchD_SKN
            Skeleton         = RUTreeberd_SKL
            WeaponLaunchBone = PRIMARY Firepoint
            WeaponLaunchBone = SECONDARY Firepoint
            ParticleSysBone  = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HANDR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HANDL TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
         End

         ModelConditionState = BURNED
            Model = RUEntBirchD_SKN
            Skeleton = RUTreeBerd_SKL
            WeaponLaunchBone    = PRIMARY Firepoint
            WeaponLaunchBone    = SECONDARY Firepoint
         End

        IdleAnimationState
            StateName = Idle
            Animation = IDLA
                AnimationName = RUTreeberd_IDLA
                AnimationBlendTime  = 5
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
        if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
      ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End




        AnimationState = DYING BURNINGDEATH
            Animation
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
                AnimationBlendTime = 10
            End





        End

        AnimationState            = BURNINGDEATH
            Animation
                AnimationName    = RUTreeberd_MFDA
                AnimationMode    = LOOP
                Distance        = 100
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
        End

        AnimationState = DYING DEATH_2
            Animation = Die
                AnimationName = RUTreeberd_MOTC
                AnimationMode = ONCE_BACKWARDS
            End
      Flags = START_FRAME_LAST
        End

        AnimationState = AFLAME DYING SPLATTED
            Animation = DieSplat
                AnimationName = RUTreeberd_LNDA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState = AFLAME DYING
            Animation = Die
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState = DYING SPLATTED
            Animation = DieSplat
                AnimationName    = RUTreeberd_LNDA
                AnimationMode    = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState = DYING WEAPONSET_TOGGLE_1
            Animation = Die
                AnimationName = RUTreeberd_DIEB
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState = DYING
            Animation = Die
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End




        AnimationState   = JUST_BUILT
            StateName        = STATE_JustBuilt
            Animation = Sprout
                AnimationName = RUTreeberd_MOTC
                AnimationMode = ONCE
                AnimationBlendTime = 0
                AnimationSpeedFactorRange = 0.5 0.5
            End
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
        End

    AnimationState = PREPARING
    StateName = STATE_Debate
      Animation = Debate
        AnimationName = RUTreeberd_MOTB
        AnimationMode = LOOP
        AnimationBlendTime = 30
        AnimationSpeedFactorRange = 0.8 1.1
      End
      Flags = RANDOMSTART
      BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

    TransitionState = TRANS_Sprout
      Animation = Sprout
        AnimationName = RUTreeberd_MOTA
        AnimationMode = ONCE
        AnimationBlendTime = 0
        AnimationSpeedFactorRange = 0.5 0.5
      End

    End




    AnimationState = AFLAME STUNNED_FLAILING
      Animation = StunFlail
        AnimationName = RUTreeberd_FLYA
        AnimationMode = LOOP
      End
      Flags = RANDOMSTART
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

    AnimationState = AFLAME STUNNED
      Animation = Stun
        AnimationName = RUTreeberd_LNDA
        AnimationMode = ONCE
      End
      ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

    AnimationState = AFLAME STUNNED_STANDING_UP
      Animation = Stun
        AnimationName = RUTreeberd_GTPA
        AnimationMode = ONCE
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

        AnimationState        = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = RUTreeberd_FLYA
                AnimationMode      = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED
            Animation           = Stun
                AnimationName     = RUTreeberd_LNDA
                AnimationMode      = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName     = RUTreeberd_GTPA
                AnimationMode      = ONCE
            End
        End




        AnimationState                = INITIAL_ENRAGED
            StateName                = Enraged
            Animation                = RUTreeBerd_MADA
                AnimationName        = RUTreeBerd_MADA
                AnimationMode        = ONCE
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState = USER_3
            Animation = OnFire
                AnimationName = RUTreeberd_RCTD
                AnimationMode = ONCE
                AnimationBlendTime = 20
            End
            FXEvent    = Frame:54 Name:FX_EntRightFootStep
        End




        AnimationState = MOVING FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
            Animation = RunAndFire
                AnimationName       = RUTreeberd_ATRB
                AnimationMode       = LOOP
            End
        End



        AnimationState        = WEAPONSET_ENRAGED TURN_LEFT
            Animation           = Walk
                AnimationName     = RUTreeberd_TRNL
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState        = WEAPONSET_ENRAGED TURN_RIGHT
            Animation           = Walk
                AnimationName     = RUTreeberd_TRNR
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End


        AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
            Animation = Punch
                AnimationName        = RUTreeberd_ATKA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = Punt
                AnimationName        = RUTreeberd_ATKD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = FrontKick
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunch
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            BeginScript
                if CurDrawableIsCurrentTargetKindof("MONSTER") then
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("FrontKick")
                    else
                        return ("KirkPunch")
                    end
                else
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("Punch")
                    else
                        return ("Punt")
                    end
                end
            EndScript
        End

        AnimationState = FIRING_OR_PREATTACK_B WEAPONSET_ENRAGED
            Animation = FrontKickOnBuilding
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunchOnBuilding
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
        End



        AnimationState = WEAPONSET_ENRAGED MOVING PANICKING
            Animation = Jump
                AnimationName                = RUTreeberd_MFDA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.5 0.5
                AnimationBlendTime            = 5
                Distance                    = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
            FXEvent    = Frame:4 Name:FX_EntLeftFootStep
            FXEvent    = Frame:18 Name:FX_EntRightFootStep
        End

    AnimationState = WEAPONSET_ENRAGED AFLAME WADING
      Animation = Splash
        AnimationName = RUTreeberd_SPLA
        AnimationMode = LOOP
        AnimationBlendTime = 5
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End

        AnimationState        = WEAPONSET_ENRAGED MOVING
            Animation           = AngryStompWalk
                AnimationName     = RUTreeberd_WLKC
                AnimationMode      = LOOP
                AnimationBlendTime  = 5
                Distance            = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_AccelerateENR") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_AccelerateENR") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:39 Name:FX_EntRightFootStep
            FXEvent    = Frame:79 Name:FX_EntLeftFootStep
            FXEvent    = Frame:129 Name:FX_EntRightFootStep
        End

        AnimationState                        = WEAPONSET_ENRAGED HIT_REACTION HIT_LEVEL_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = WEAPONSET_ENRAGED
            Animation                        = AngryIdle
                AnimationName                = RUTreeberd_IDLC
                AnimationMode                = LOOP
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25ENR") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
        if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
      ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End




    AnimationState = AFLAME TURN_LEFT
      Animation = Walk
        AnimationName = RUTreeberd_TRNL
        AnimationMode = LOOP
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End
    AnimationState = AFLAME TURN_RIGHT
      Animation = Walk
        AnimationName = RUTreeberd_TRNR
        AnimationMode = LOOP
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End
    AnimationState = AFLAME MOVING
      Animation = Jump
        AnimationName = RUTreeberd_MFDA
        AnimationMode = LOOP
        AnimationSpeedFactorRange = 0.5 0.5
        AnimationBlendTime  = 5
        Distance = 50
      End
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      FXEvent = Frame:4 Name:FX_EntLeftFootStep
      FXEvent = Frame:18 Name:FX_EntRightFootStep
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
        CurDrawablePlaySound("EntRunFire")
      EndScript
    End
    AnimationState = AFLAME WADING
      Animation = Splash
        AnimationName = RUTreeberd_SPLA
        AnimationMode = LOOP
        AnimationBlendTime = 5
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
    End




        AnimationState = RELOADING_A WEAPONSET_TOGGLE_1
            Animation
                AnimationName        = RUTreeberd_GRBA
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
            FXEvent    = Frame:20    Name: FX_EntRockGrab
            FXEvent    = Frame:24    Name: FX_EntRockYank
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
        End

        AnimationState                = TURN_RIGHT WEAPONSET_TOGGLE_1
            StateName                = Turn
            Animation
                AnimationName        = RUTreeberd_TNR2
                AnimationMode        = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState                = TURN_LEFT WEAPONSET_TOGGLE_1
            StateName                = Turn
            Animation
                AnimationName        = RUTreeberd_TNL2
                AnimationMode        = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState = FIRING_OR_PREATTACK_A AIM_NEAR WEAPONSET_TOGGLE_1
            Animation = CloseRock
                AnimationName        = RUTreeberd_THRC
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes

            End
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
            FrameForPristineBonePositions = 39
        End

        AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            Animation = FarRock
                AnimationName        = RUTreeberd_THRB
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes

            End
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
            FrameForPristineBonePositions = 40
        End




        AnimationState = MOVING FIRING_OR_PREATTACK_A
            Animation = RunAndFire
                AnimationName       = RUTreeberd_ATRA
                AnimationMode       = LOOP
            End
        End

        AnimationState                = TURN_RIGHT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUTreeberd_TRNR
                AnimationMode        = LOOP
            End
        End

        AnimationState                = TURN_LEFT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUTreeberd_TRNL
                AnimationMode        = LOOP
            End
        End

        AnimationState = FIRING_OR_PREATTACK_A
            Animation = Punch
                AnimationName        = RUTreeberd_ATKA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = Punt
                AnimationName        = RUTreeberd_ATKD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = FrontKick
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunch
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            BeginScript
                if CurDrawableIsCurrentTargetKindof("MONSTER") then
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("FrontKick")
                    else
                        return ("KirkPunch")
                    end
                else
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("Punch")
                    else
                        return ("Punt")
                    end
                end
            EndScript
        End

        AnimationState = FIRING_OR_PREATTACK_B
            Animation = FrontKickOnBuilding
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunchOnBuilding
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
        End




        AnimationState = PACKING GRAB_BUILDING_CHUNK
            Animation = Pack
                AnimationName        = RUTreeberd_GBB2
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
        End

        AnimationState = UNPACKING GRAB_BUILDING_CHUNK
            Animation = Pack
                AnimationName        = RUTreeberd_GBB1
                AnimationMode        = ONCE
                AnimationBlendTime    = 20
            End
            ParticleSysBone = ParticleNode01 TreeBeardAttackLeavesFir
        End

        AnimationState = PACKING
            Animation = Pack
                AnimationName    = RUTreeberd_GBA2
                AnimationMode    = ONCE
            End
        End

        AnimationState = UNPACKING
            Animation = Pack
                AnimationName    = RUTreeberd_GBA1
                AnimationMode    = ONCE
            End
        End



        AnimationState = MOVING PANICKING
            Animation = Jump
                AnimationName                = RUTreeberd_MFDA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.5 0.5
                AnimationBlendTime            = 5
                Distance                    = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
            FXEvent    = Frame:4 Name:FX_EntLeftFootStep
            FXEvent    = Frame:18 Name:FX_EntRightFootStep
        End

        AnimationState                = MOVING WEAPONSET_TOGGLE_1
            StateName                = Moving
            Animation
                AnimationName        = RUTreeberd_WLKB
                Distance            = 50
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:26 Name:FX_EntRightFootStep
        End

        AnimationState                = MOVING
            StateName                = Moving
            Animation                = Walk
                AnimationName        = RUTreeberd_WLKA
                Distance            = 50
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:39 Name:FX_EntRightFootStep
            FXEvent    = Frame:79 Name:FX_EntLeftFootStep
            FXEvent    = Frame:129 Name:FX_EntRightFootStep
        End


        AnimationState                        = HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITB
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = HIT_REACTION HIT_LEVEL_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = WEAPONSET_TOGGLE_1
            StateName                        = Idle
            Animation
                AnimationName                = RUTreeberd_IDLB
                AnimationMode                = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_JustBuilt" then CurDrawableShowSubObjectPermanently("ROCK") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25R") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
            EndScript
            ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End




        TransitionState = TRANS_Accelerate
            Animation = Transition
                AnimationName        = RUTreeberd_ACLA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.75 0.75
            End
        End

        TransitionState = TRANS_Stop75
            Animation = Transition
                AnimationName        = RUTreeberd_DCLC
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop50
            Animation = Transition
                AnimationName        = RUTreeberd_DCLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop25
            Animation = Transition
                AnimationName        = RUTreeberd_DCLD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop00
            Animation = Transition
                AnimationName        = RUTreeberd_DCLA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End




        TransitionState = TRANS_AccelerateR
            Animation = Transition
                AnimationName        = RUTreeberd_ACLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.75 0.75
            End
        End

        TransitionState = TRANS_Stop75R
            Animation
                AnimationName        = RUTreeberd_DCLG
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop50R
            Animation
                AnimationName        = RUTreeberd_DCLF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop25R
            Animation
                AnimationName        = RUTreeberd_DCLH
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End

        TransitionState = TRANS_Stop00R
            Animation
                AnimationName        = RUTreeberd_DCLE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                AnimationSpeedFactorRange 0.66 0.66
            End
        End




        TransitionState = TRANS_AccelerateENR
            Animation = Transition
                AnimationName        = RUTreeberd_ACLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop75ENR
            Animation
                AnimationName        = RUTreeberd_DCLG
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop50ENR
            Animation
                AnimationName        = RUTreeberd_DCLF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop25ENR
            Animation
                AnimationName        = RUTreeberd_DCLH
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop00ENR
            Animation
                AnimationName        = RUTreeberd_DCLE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
            End
        End
    End

    WeaponSet
        Conditions          = None
        Weapon              = PRIMARY      RohanTreeBeardPunchMod
        Weapon              = SECONDARY    RohanBuildingTeardown
        OnlyAgainst         = SECONDARY    STRUCTURE BLOCKING_GATE
    End

    WeaponSet
        Conditions          = WEAPONSET_TOGGLE_1
        Weapon              = PRIMARY    RohanEntRockThrowEdain_Summoned
    End

    KindOf        = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_INFANTRY CAN_ATTACK_WALLS SCARY BIG_MONSTER SUMMONED
    IsTrainable   = No
    CommandPoints = 0
    MaxSimultaneousOfType = NEW_CATAPULT_MONSTER_RATIO

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = 180000
        MaxLifetime        = 180000
        DeathType        = FADED
    End
    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion    = Terror_Base
    End

    DisplayName       = OBJECT:RohanEntOak
End




ObjectReskin RohanEntAsh RohanEntBase


    DescriptionStrategic = CONTROLBAR:LW_ToolTip_ElvenEnt

    Draw = W3DScriptedModelDraw ModuleTag_01

    StaticModelLODMode = Yes

    WadingParticleSys = EntRipples
    WadingParticleSys = EntSplash

      OkToChangeModelColor = Yes
      ExtraPublicBone = IMPACT

        DefaultModelConditionState
            Model               = RUEntAsh_SKN
            Skeleton                  = RUEntAsh_SKL

        End


           ModelConditionState     = WADING AFLAME
               Model               = RUEntAshD_SKN
               Skeleton            = RUEntAsh_SKL
            ParticleSysBone     = BAT_HEAD TreebeardSteam FollowBone:Yes
            ParticleSysBone     = BAT_SPINE1 TreebeardSteam FollowBone:Yes
            ParticleSysBone     = BAT_PELVIS TreebeardSteam1 FollowBone:Yes
            ParticleSysBone     = BAT_CALFR TreebeardSteam FollowBone:Yes
            ParticleSysBone     = B_POINT1L TrBrdWaterDrips FollowBone:Yes
            ParticleSysBone     = B_POINT1R TrBrdWaterDrips FollowBone:Yes
            ParticleSysBone     = B_THUMB1L TrBrdWaterDrips FollowBone:Yes
            ParticleSysBone     = B_THUMB1R TrBrdWaterDrips FollowBone:Yes











           End

        AnimationState                = INITIAL_ENRAGED
            StateName                = Enraged
            Animation                = RUEntAsh_MADA
                AnimationName        = RUEntAsh_MADA
                AnimationMode        = ONCE
            End
        End

           ModelConditionState   = BURNED
               Model               = RUEntAshD_SKN
               Skeleton            = RUEntAsh_SKL
           End

           ModelConditionState   = BURNT_MODEL DYING
               Model               = RUEntAshD_SKN
               Skeleton            = RUEntAsh_SKL
           End

           ModelConditionState   = BURNT_MODEL
               Model               = RUEntAshD_SKN
               Skeleton            = RUEntAsh_SKL




            ParticleSysBone     = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone     = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN

            ParticleSysBone     = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN

            ParticleSysBone     = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone     = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone     = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN

            ParticleSysBone     = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN

            ParticleSysBone     = BAT_HANDR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone     = BAT_HANDL TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN


           End



        IdleAnimationState
            Animation = IDLA
                AnimationName = RUEntAsh_IDLA
                AnimationBlendTime  = 5
            End
            StateName = Idle
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
                if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
            ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End


        AnimationState   = JUST_BUILT
            StateName        = STATE_JustBuilt
            Animation = Sprout
                AnimationName = RUEntAsh_MOTA
                AnimationMode = MANUAL
                AnimationBlendTime = 0
            End
        End


        AnimationState        = PREPARING
            StateName            = STATE_Debate
            Animation           = Debate
                AnimationName     = RUEntAsh_MOTB
                AnimationMode      = LOOP
                AnimationBlendTime = 30
                AnimationSpeedFactorRange = 0.8 1.1
            End
            Flags               = RANDOMSTART

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
        End
        TransitionState   = TRANS_Sprout
            Animation = Sprout
                AnimationName = RUEntAsh_MOTA
                AnimationMode = ONCE
                AnimationBlendTime = 0
            End

                        FXEvent    = Frame:25 Name:FX_EntSprout
                        FXEvent = Frame:25 Name:FX_EntSproutButterflies
        End






        AnimationState        = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = RUEntAsh_FLYA
                AnimationMode      = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED
            Animation           = Stun
                AnimationName     = RUEntAsh_LNDA
                AnimationMode      = ONCE
            End
                ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName     = RUEntAsh_GTPA
                AnimationMode      = ONCE
            End
        End


        AnimationState        = DYING BURNINGDEATH
            Animation
                AnimationName     = RUEntAsh_DIEA
                AnimationMode      = ONCE
                AnimationBlendTime = 10
            End
        End


        AnimationState        = AFLAME DYING SPLATTED
            Animation           = DieSplat
                AnimationName     = RUEntAsh_LNDA
                AnimationMode      = ONCE
            End
                ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = AFLAME DYING
            Animation           = Die
                AnimationName     = RUEntAsh_DIEA
                AnimationMode      = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState        = BURNINGDEATH
            Animation
                AnimationName     = RUEntAsh_MFDA
                AnimationMode      = LOOP
                Distance            = 100
            End
        End

        AnimationState        = USER_3
            Animation           = OnFire
                AnimationName     = RUEntAsh_RCTA
                AnimationMode      = ONCE
                AnimationBlendTime = 20
            End
                FXEvent    = Frame:54 FireWhenSkipped Name:FX_EntRightFootStep
        End


        AnimationState        = FIRING_OR_PREATTACK_C AFLAME
            Animation           = Attack
                AnimationName     = RUEntAsh_ATKC
                AnimationMode       = ONCE
                AnimationBlendTime = 0
                UseWeaponTiming        = Yes
            End
        End


        AnimationState        = FIRING_OR_PREATTACK_A AIM_NEAR
            Animation       = CloseRock
                AnimationName     = RUEntAsh_THRC
                AnimationMode       = ONCE
                UseWeaponTiming        = Yes
                AnimationBlendTime  = 0
            End

            FrameForPristineBonePositions = 39
            ParticleSysBone     = ParticleNode01 TreeBeardAttackLeavesFir
        End

        AnimationState        = FIRING_OR_PREATTACK_A
            Animation       = FarRock
                AnimationName     = RUEntAsh_THRB
                AnimationMode       = ONCE
                UseWeaponTiming        = Yes
                AnimationBlendTime  = 0
            End

            FrameForPristineBonePositions = 39
            ParticleSysBone     = ParticleNode01 TreeBeardAttackLeavesFir
        End

        AnimationState        = FIRING_OR_PREATTACK_B
            Animation           = Punch
                AnimationName     = RUEntAsh_ATKA
                AnimationMode       = ONCE
                AnimationBlendTime = 5
                UseWeaponTiming        = Yes
            End
            Animation           = Punt
                AnimationName     = RUEntAsh_ATKD
                AnimationMode       = ONCE
                AnimationBlendTime = 5
                UseWeaponTiming        = Yes
            End
            Animation           = ShoulderBlock
                AnimationName     = RUEntAsh_ATKE
                AnimationMode       = ONCE
                AnimationBlendTime = 5
                UseWeaponTiming        = Yes
            End
            BeginScript
                if CurDrawableIsCurrentTargetKindof("MONSTER") then
                    return ("ShoulderBlock")
                else
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("Punch")
                    else
                        return ("Punt")
                    end
                end
            EndScript
        End

        AnimationState        = FIRING_OR_PREATTACK_C
            Animation           = ShoulderBlockForBuilding
                AnimationName     = RUEntAsh_ATKE
                AnimationMode       = ONCE
                AnimationBlendTime = 5
                UseWeaponTiming        = Yes
            End
            ParticleSysBone     = ParticleNode01 TreeBeardAttackLeavesFir
        End



        AnimationState        = WEAPONSET_ENRAGED TURN_LEFT
            Animation           = Walk
                AnimationName     = RUEntAsh_TRNL
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState        = WEAPONSET_ENRAGED TURN_RIGHT
            Animation           = Walk
                AnimationName     = RUEntAsh_TRNR
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState        = WEAPONSET_ENRAGED MOVING
            Animation           = AngryStompWalk
                AnimationName     = RUEntAsh_WLKC
                AnimationMode      = LOOP
                AnimationBlendTime  = 5
                Distance            = 50
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 FireWhenSkipped Name:FX_EntLeftFootStep
            FXEvent    = Frame:26 FireWhenSkipped Name:FX_EntRightFootStep
        End


        AnimationState        = AFLAME TURN_LEFT
            Animation           = Walk
                AnimationName     = RUEntAsh_TRNL
                AnimationMode     = LOOP
            End
        End

        AnimationState        = AFLAME TURN_RIGHT
            Animation           = Walk
                AnimationName     = RUEntAsh_TRNR
                AnimationMode     = LOOP
            End
        End

        AnimationState        = AFLAME MOVING
            Animation           = Jump
                AnimationName     = RUEntAsh_MFDA
                AnimationMode      = LOOP
                AnimationSpeedFactorRange = 0.5 0.5
                AnimationBlendTime  = 5
                Distance            = 50
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:4 FireWhenSkipped Name:FX_EntLeftFootStep
            FXEvent    = Frame:18 FireWhenSkipped Name:FX_EntRightFootStep
            BeginScript
                CurDrawablePlaySound("EntRunFire")
            EndScript
        End

        AnimationState        =  AFLAME WADING
            Animation           = Splash
                AnimationName     = RUEntAsh_SPLA
                AnimationMode      = LOOP
                AnimationBlendTime  = 5
            End
        End

        AnimationState        = AFLAME STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = RUEntAsh_FLYA
                AnimationMode      = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = AFLAME STUNNED
            Animation           = Stun
                AnimationName     = RUEntAsh_LNDA
                AnimationMode      = ONCE
            End
                ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = AFLAME STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName     = RUEntAsh_GTPA
                AnimationMode      = ONCE
            End
        End

        AnimationState        = DYING SPLATTED
            Animation           = DieSplat
                AnimationName     = RUEntAsh_LNDA
                AnimationMode      = ONCE
            End
                ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = DYING
            Animation           = Die
                AnimationName     = RUEntAsh_DIEA
                AnimationMode      = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState        = PACKING GRAB_BUILDING_CHUNK
            Animation           = Pack
                AnimationName     = RUEntAsh_GRB2
                AnimationMode      = ONCE
                AnimationBlendTime = 0
            End
        End

        AnimationState        = UNPACKING GRAB_BUILDING_CHUNK
            Animation           = Pack
                AnimationName     = RUEntAsh_GRB1
                AnimationMode      = ONCE
                AnimationBlendTime = 20
            End
            ParticleSysBone     = ParticleNode01 TreeBeardAttackLeavesFir
            ParticleSysBone    = BAT_HAND_R TrollRockBounceSmall FollowBone:No
            ParticleSysBone    = BAT_HAND_R TrollRockPickup FollowBone:No
        End

        AnimationState        = PACKING
            Animation           = Pack
                AnimationName     = RUEntAsh_GRC2
                AnimationMode      = ONCE
            End
        End

        AnimationState        = UNPACKING
            Animation           = Pack
                AnimationName     = RUEntAsh_GRC1
                AnimationMode      = ONCE
            End
        End



        AnimationState                = TURN_RIGHT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUEntAsh_TRNR
                AnimationMode        = LOOP
            End
        End

        AnimationState                = TURN_LEFT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUEntAsh_TRNL
                AnimationMode        = LOOP
            End
        End

        AnimationState                = MOVING
            StateName                = Moving
            Animation                = Walk
                AnimationName        = RUEntAsh_WLKA
                Distance            = 48.0
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 FireWhenSkipped Name:FX_AshEntLeftFootStep
            FXEvent    = Frame:41 FireWhenSkipped Name:FX_AshEntRightFootStep
        End

        TransitionState = TRANS_Accelerate
            Animation = Transition
                AnimationName = RUEntAsh_ACLA
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.75 0.75
                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop75
            Animation = Transition
                AnimationName = RUEntAsh_DCLC
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.66 0.66
                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop50
            Animation = Transition
                AnimationName = RUEntAsh_DCLB
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.66 0.66
                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop25
            Animation = Transition
                AnimationName = RUEntAsh_DCLD
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.66 0.66
                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop00
            Animation = Transition
                AnimationName = RUEntAsh_DCLA
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.66 0.66
                AnimationBlendTime = 5
            End
        End
    End

End

ChildObject ElvenVigilantEnt RohanEntBase

    CommandPoints = 0
    MaxSimultaneousOfType = NEW_CATAPULT_MONSTER_RATIO

    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_INFANTRY CAN_ATTACK_WALLS SCARY BIG_MONSTER IGNORES_SELECT_ALL SIEGEENGINE

    CommandSet = ElvenVigilantEntCommandSet

    Behavior = MonitorConditionUpdate ModuleTag_CommandSetSwapper
        ModelConditionFlags         = ATTACKING_POSITION
        ModelConditionCommandSet    = ElvenVigilantEntCommandSetStopBombard
    End

    WeaponSet
        Conditions          =  None
        Weapon              =  PRIMARY    ElvenVigilantEntRockThrow
    End

    Body = ActiveBody ModuleTag_02
        CheerRadius         = EMOTION_CHEER_RADIUS
        MaxHealth             = ROHAN_ENT_HEALTH
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle    = No
        AILuaEventsList               = EntFunctions
    End

    LocomotorSet
        Locomotor = CatapultLocomotor
        Condition = SET_NORMAL
        Speed     = 0
    End
End

Object ImladrisGenericEnt

    ButtonImage       = HIImladrisGenericEnt_Wotr
    SelectPortrait    = UPElven_Ent

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_ElvenEnt

    Draw = W3DScriptedModelDraw ModuleTag_01
        StaticModelLODMode = Yes
        DefaultModelConditionState
            Model               = RUTreeberd_SKN
            Skeleton            = RUTreeberd_SKL
        End
    End







    Side = Lothlorien
    EditorSorting = UNIT
    CommandSet = RohanGenericEntCommandSet
    CommandPoints = 30
    MaxSimultaneousOfType = NEW_CATAPULT_MONSTER_RATIO
    BuildVariations = ImladrisEntFir ImladrisEntOak ImladrisEntBirch
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_ATTACK_WALLS SCARY HEAVY_MELEE_HITTER ARMY_SUMMARY SIEGEENGINE
    BuildCost = 900
    BuildTime = ELITE_BUILDTIME
    BountyValue = ROHAN_ENT_BOUNTY_VALUE



    AutoResolveUnitType               = AutoResolveUnit_Monster
    AutoResolveCombatChain            = AutoResolve_MonsterCombatChain
    AutoResolveBody         = AutoResolve_ElvenEntBody

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key        = Ent Unit Infantry
        UnitWeight = 2
    End

    RadarPriority = UNIT
    KindOf = PRELOAD ARMY_SUMMARY SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_INFANTRY CAN_ATTACK_WALLS SCARY HERO BIG_MONSTER HEAVY_MELEE_HITTER TRANSPORT MOVE_FOR_NOONE

    Behavior = FlammableUpdate FlammableModuleTag_15
        AflameDuration               = 0
        AflameDamageDelay            = 500
        AflameDamageAmount           = 30
        FlameDamageLimit             = #MULTIPLY( ROHAN_ENT_HEALTH ROHAN_ENT_FIRE_THRESHOLD )
        FlameDamageExpiration        = 10000
        SetBurnedStatus              = Yes
        SwapModelWhenAflame          = Yes
        SwapModelWhenQuenched        = Yes
        RunToWater                   = Yes
        RunToWaterDepth              = 0
        RunToWaterSearchRadius       = 10000
        RunToWaterSearchIncrement    = 50
        PanicLocomotorWhileAflame    = Yes
        CustomAnimAndDuration        = AnimState:USER_3 AnimTime:3400
        FireFXList                   = FX:FX_FireStartEnt
    End

    Behavior = EntEnragedUpdate EnragedBehaviorModuleTag
        HatedObjectFilter     = NONE +LumberMill +MordorLumberMill +IsengardLumberMill +WildLaborer +MordorWorker
        FriendlyDeadFilter    = NONE +ImladrisEntFir +ImladrisEntBirch +ImladrisEntAsh +ImladrisEntOak +FangornFlinkbaum
        EnragedTime           = 1500000
        TimeUntilCanRageAgain = 0
        EnragedTransitionTime = 3000
    End

    Body = ActiveBody ModuleTag_ActiveBody
        CheerRadius             = EMOTION_CHEER_RADIUS
        MaxHealth               = VERY_STRONG_HERO_HEALTH
        BurningDeathBehavior    = Yes
    End

    Behavior = AutoHealBehavior ModuleTag_EntHealing
        StartsActive            = Yes
        HealingAmount           = 50
        HealingDelay            = 1000
        StartHealingDelay        = 15000
        HealOnlyIfNotInCombat   = Yes
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Artillery
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle  = Yes ATTACK_BUILDINGS
        AILuaEventsList             = EntFunctions
        BurningDeathTime            = BURNINGDEATH_DURATION_ENT
    End

    Behavior = FireWeaponWhenDeadBehavior FireDeadTag
        RequiredStatus  = DEATH_1
        StartsActive    = Yes
        DelayTime       = 2300
        DeathWeapon     = RohanEntDeath
        WeaponOffset    = X:-55 Y:0 Z:0
    End

    LocomotorSet
        Locomotor = RohanTreeBeardLocomotor
        Condition = SET_NORMAL
        Speed     = 45
    End

    LocomotorSet
        Locomotor = RohanTreeBeardLocomotor
        Condition = SET_ENRAGED
        Speed     = 62
    End

    LocomotorSet
        Locomotor = RohanTreeBeardFastTurnLocomotor
        Condition = SET_PANIC
        Speed      = 80
    End

    LocomotorSet
        Locomotor = BurningDeathLocomotorCavalry
        Condition = SET_BURNINGDEATH
        Speed      = BURNINGDEATH_WANDERSPEED_CAVALRY
    End

    AutoResolveArmor
        Armor = AutoResolve_ElvenEntArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_ElvenEntWeapon
    End
	
	    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End

    Behavior = SlowDeathBehavior ModuleTag_50
        DeathTypes = ALL -KNOCKBACK -FADED
        DestructionDelay = 20000
        SinkDelay = 5000
        SinkRate = 0.8
        Sound = INITIAL EntDie
        DeathFlags            = DEATH_1
    End

    Behavior = SlowDeathBehavior ModuleTag_52

        DeathTypes = NONE +KNOCKBACK
        DestructionDelay = 20000
        SinkDelay = 5000
        SinkRate = 0.8
        DeathFlags            = DEATH_1
    End

      Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes            = NONE +FADED
        SinkRate            = 0.1
        FadeTime            = 9500
        DestructionDelay    = 10000
        DeathFlags            = DEATH_2
        FX                    = INITIAL   FX_UnSummonEntAllies
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion    = Terror_Base
    End

    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End



     Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
         HitReactionLifeTimer1 = 2500
        HitReactionThreshold1 = 50.0
     End


    Behavior = ProductionUpdate ModuleTag_UpgradeProducer
        GiveNoXP = Yes
    End



    Behavior = InvisibilityUpdate ModuleTag_Camouflage
        InvisibilityNugget
        InvisibilityType = CAMOUFLAGE
        ForbiddenConditions = AWAY_FROM_TREES MOVING TAKING_DAMAGE FIRING_ANY USING_ABILITY
        DetectionRange = CAMOUFLAGE_RADIUS
        Options = ALLOW_NEAR_TREES
    End
        UnitSpecificSoundNameToUseAsVoiceMoveToStealthyArea = VoiceMoveToTrees
        UnitSpecificSoundNameToUseAsVoiceEnterStateMoveToStealthyArea = VoiceEnterStateMoveToTrees
        StartsActive = Yes
        UpdatePeriod = 2000
    End


    Behavior = MonitorConditionUpdate ModuleTag_CommandSetSwapper
        ModelConditionFlags            = ATTACKING_POSITION
        ModelConditionCommandSet    = RohanEntRockCommandSetStopBombard
        WeaponSetFlags                = WEAPONSET_TOGGLE_1
        WeaponToggleCommandSet        = RohanEntRockCommandSet
    End


    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy = Upgrade_SwitchToRockThrowing
        GetUpgradeCommandButtonName = Command_ToggleEntRockThrow
    End







    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate ToggleSiegeModeAI
        CommandButtonName = Command_ToggleEntRockThrow
        SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_SIEGE
    End

    Geometry            = CYLINDER
    GeometryMajorRadius = 25
    GeometryHeight        = 70.0
    GeometryIsSmall        = No

    Shadow =SHADOW_VOLUME_NON_SELF_2
    ShadowSizeX = 36
End

Object ImladrisEntFir


    ButtonImage       = HIImladrisGenericEnt_Wotr
    SelectPortrait    = UPElven_Ent

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_ElvenEnt

    Draw = W3DScriptedModelDraw ModuleTag_01

        StaticModelLODMode = Yes
        WadingParticleSys = EntRipples
        WadingParticleSys = EntSplash

        OkToChangeModelColor = Yes

        ExtraPublicBone = B_POINT1R
        ExtraPublicBone = PASSENGER
        ExtraPublicBone = IMPACT
        ExtraPublicBone = ROCK

       DefaultModelConditionState
           Model               = RUEntFir_SKN
           Skeleton            = RUTreeberd_SKL
           WeaponLaunchBone    = PRIMARY Firepoint
           WeaponLaunchBone    = SECONDARY Firepoint
           ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
       End

       ModelConditionState = WADING AFLAME
           Model    = RUEntFirD_SKN
           Skeleton = RUTreeBerd_SKL
           WeaponLaunchBone = PRIMARY Firepoint
           WeaponLaunchBone = SECONDARY Firepoint
           ParticleSysBone = BAT_HEAD TreebeardSteam FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TreebeardSteam FollowBone:Yes
           ParticleSysBone = BAT_PELVIS TreebeardSteam1 FollowBone:Yes
           ParticleSysBone = BAT_CALFR TreebeardSteam FollowBone:Yes
           ParticleSysBone = B_POINT1L TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_POINT1R TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_THUMB1L TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_THUMB1R TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = NONE TrBrdWaterRipples FollowBone:No
           ParticleSysBone = NONE TrBrdWaterRipples FollowBone:No
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_HANDR TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_HANDL TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash3 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash3 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash4 FollowBone:Yes
       End


       ModelConditionState  = AFLAME
            Model           = RUEntFirD_SKN
            Skeleton        = RUTreeberd_SKL
            ParticleSysBone = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HANDR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HANDL TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
        End

        ModelConditionState  = AFLAME BURNED
            Model            = RUEntFirD_SKN
            Skeleton         = RUTreeberd_SKL
            WeaponLaunchBone = PRIMARY Firepoint
            WeaponLaunchBone = SECONDARY Firepoint
            ParticleSysBone  = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HANDR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HANDL TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
         End

         ModelConditionState = BURNED
            Model = RUEntFirD_SKN
            Skeleton = RUTreeBerd_SKL
            WeaponLaunchBone    = PRIMARY Firepoint
            WeaponLaunchBone    = SECONDARY Firepoint
         End

         ModelConditionState = BURNT_MODEL DYING
            Model               = RUEntFirD_SKN
            Skeleton            = RUTreeBerd_SKL
            WeaponLaunchBone    = PRIMARY Firepoint
            WeaponLaunchBone    = SECONDARY Firepoint
         End


        IdleAnimationState
            StateName = Idle
            Animation = IDLA
                AnimationName = RUTreeberd_IDLA
                AnimationBlendTime  = 5
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")

                Prev = CurDrawablePrevAnimationState()
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
                if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
            ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End

        AnimationState = DYING BURNINGDEATH
            Animation
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
                AnimationBlendTime = 10
            End
            Animation
                AnimationName = RUTreeberd_DIE
                AnimationMode = ONCE
                AnimationBlendTime = 20
            End
        End

        AnimationState = DYING DEATH_2
            Animation = Die
                AnimationName = RUTreeberd_IDLA
                AnimationMode = ONCE
            End
        End

        AnimationState = DYING WEAPONSET_TOGGLE_1
            Animation = Die
                AnimationName = RUTreeberd_DIEB
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState = DYING
            Animation = Die
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState            = BURNINGDEATH
            Animation
                AnimationName    = RUTreeberd_MFDA
                AnimationMode    = LOOP
                Distance        = 100
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
        End


        AnimationState   = JUST_BUILT
            StateName        = STATE_JustBuilt
            Animation = Sprout
                AnimationName = RUTreeberd_MOTC
                AnimationMode = ONCE
                AnimationBlendTime = 0
                AnimationSpeedFactorRange = 0.5 0.5
            End



            FXEvent    = Frame:25 Name:FX_EntSprout
            FXEvent = Frame:25 Name:FX_EntSproutButterflies
        End



        AnimationState        = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = RUTreeberd_FLYA
                AnimationMode      = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED
            Animation           = Stun
                AnimationName     = RUTreeberd_LNDA
                AnimationMode      = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName     = RUTreeberd_GTPA
                AnimationMode      = ONCE
            End
        End



        AnimationState = AFLAME DYING SPLATTED
            Animation = DieSplat
                AnimationName = RUTreeberd_LNDA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState = AFLAME DYING
            Animation = Die
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState = USER_3
            Animation = OnFire
                AnimationName = RUTreeberd_RCTD
                AnimationMode = ONCE
                AnimationBlendTime = 20
            End
            FXEvent    = Frame:54 Name:FX_EntRightFootStep
        End







        AnimationState = RELOADING_A WEAPONSET_TOGGLE_1
            Animation
                AnimationName        = RUTreeberd_GRBA
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
            FXEvent    = Frame:20    Name: FX_EntRockGrab
            FXEvent    = Frame:24    Name: FX_EntRockYank
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
        End

        AnimationState = FIRING_OR_PREATTACK_A AIM_NEAR WEAPONSET_TOGGLE_1
            Animation = CloseRock
                AnimationName        = RUTreeberd_THRC
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes

            End

            FrameForPristineBonePositions = 39
        End

        AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            Animation = FarRock
                AnimationName        = RUTreeberd_THRB
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes

            End

            FrameForPristineBonePositions = 40
        End








        AnimationState = MOVING FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
            Animation = RunAndFire
                AnimationName       = RUTreeberd_ATRB
                AnimationMode       = LOOP
            End
        End

        AnimationState = MOVING FIRING_OR_PREATTACK_A
            Animation = RunAndFire
                AnimationName       = RUTreeberd_ATRA
                AnimationMode       = LOOP
            End
        End

        AnimationState = FIRING_OR_PREATTACK_A
            Animation = Punch
                AnimationName        = RUTreeberd_ATKA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = Punt
                AnimationName        = RUTreeberd_ATKD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = FrontKick
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunch
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            BeginScript
                if CurDrawableIsCurrentTargetKindof("MONSTER") then
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("FrontKick")
                    else
                        return ("KirkPunch")
                    end
                else
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("Punch")
                    else
                        return ("Punt")
                    end
                end
            EndScript
        End

        AnimationState = FIRING_OR_PREATTACK_B
            Animation           = Punch
                AnimationName     = RUTreeberd_ATKA
                AnimationMode       = ONCE
                AnimationBlendTime = 5
                UseWeaponTiming        = Yes
            End
            Animation           = Punt
                AnimationName     = RUTreeberd_ATKD
                AnimationMode       = ONCE
                AnimationBlendTime = 5
                UseWeaponTiming        = Yes
            End
            Animation           = FrontKick
                AnimationName     = RUTreeberd_ATKE
                AnimationMode       = ONCE
                AnimationBlendTime = 5
                UseWeaponTiming        = Yes
            End
            Animation           = KirkPunch
                AnimationName     = RUTreeberd_ATKF
                AnimationMode       = ONCE
                AnimationBlendTime = 5
                UseWeaponTiming        = Yes
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                if CurDrawableIsCurrentTargetKindof("MONSTER") then
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("FrontKick")
                    else
                        return ("KirkPunch")
                    end
                else
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("Punch")
                    else
                        return ("Punt")
                    end
                end
            EndScript
        End

        AnimationState                = INITIAL_ENRAGED
            StateName                = Enraged
            Animation                = RUTreeBerd_MADA
                AnimationName        = RUTreeBerd_MADA
                AnimationMode        = ONCE
            End
        End



        AnimationState        = WEAPONSET_ENRAGED TURN_LEFT
            Animation           = Walk
                AnimationName     = RUTreeberd_TNL2
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState        = WEAPONSET_ENRAGED TURN_RIGHT
            Animation           = Walk
                AnimationName     = RUTreeberd_TNR2
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState        = WEAPONSET_ENRAGED MOVING
            Animation           = AngryStompWalk
                AnimationName     = RUTreeberd_WLKC
                AnimationMode      = LOOP
                AnimationBlendTime  = 5
                Distance            = 50
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:26 Name:FX_EntRightFootStep
        End


        AnimationState        = AFLAME TURN_LEFT
            Animation           = Walk
                AnimationName     = RUTreeberd_TRNL
                AnimationMode     = LOOP
            End
        End

        AnimationState        = AFLAME TURN_RIGHT
            Animation           = Walk
                AnimationName     = RUTreeberd_TRNR
                AnimationMode     = LOOP
            End
        End

        AnimationState        = AFLAME MOVING
            Animation           = Jump
                AnimationName     = RUTreeberd_MFDA
                AnimationMode      = LOOP
                AnimationSpeedFactorRange = 0.5 0.5
                AnimationBlendTime  = 5
                Distance            = 50
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:4 Name:FX_EntLeftFootStep
            FXEvent    = Frame:18 Name:FX_EntRightFootStep
            BeginScript
                CurDrawablePlaySound("EntRunFire")
            EndScript
        End

        AnimationState        =  AFLAME WADING
            Animation           = Splash
                AnimationName     = RUTreeberd_SPLA
                AnimationMode      = LOOP
                AnimationBlendTime  = 5
            End
        End

        AnimationState        = AFLAME STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = RUTreeberd_FLYA
                AnimationMode      = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = AFLAME STUNNED
            Animation           = Stun
                AnimationName     = RUTreeberd_LNDA
                AnimationMode      = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = AFLAME STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName     = RUTreeberd_GTPA
                AnimationMode      = ONCE
            End
        End




        AnimationState = DYING SPLATTED
            Animation = DieSplat
                AnimationName    = RUTreeberd_LNDA
                AnimationMode    = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState = DYING SPLATTED
            Animation = DieSplat
                AnimationName    = RUTreeberd_LNDA
                AnimationMode    = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState = PACKING GRAB_BUILDING_CHUNK
            Animation = Pack
                AnimationName        = RUTreeberd_GBB2
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
        End

        AnimationState = UNPACKING GRAB_BUILDING_CHUNK
            Animation = Pack
                AnimationName        = RUTreeberd_GBB1
                AnimationMode        = ONCE
                AnimationBlendTime    = 20
            End
            ParticleSysBone = ParticleNode01 TreeBeardAttackLeavesFir
        End

        AnimationState = PACKING
            Animation = Pack
                AnimationName    = RUTreeberd_GBA2
                AnimationMode    = ONCE
            End
        End

        AnimationState = UNPACKING
            Animation = Pack
                AnimationName    = RUTreeberd_GBA1
                AnimationMode    = ONCE
            End
        End



        AnimationState                = TURN_RIGHT WEAPONSET_TOGGLE_1
            StateName                = Turn
            Animation
                AnimationName        = RUTreeberd_TNR2
                AnimationMode        = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState                = TURN_LEFT WEAPONSET_TOGGLE_1
            StateName                = Turn
            Animation
                AnimationName        = RUTreeberd_TNL2
                AnimationMode        = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState                = MOVING WEAPONSET_TOGGLE_1
            StateName                = Moving
            Animation
                AnimationName        = RUTreeberd_WLKB
                Distance            = 50
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:39 Name:FX_EntRightFootStep
            FXEvent    = Frame:79 Name:FX_EntLeftFootStep
            FXEvent    = Frame:129 Name:FX_EntRightFootStep
        End


        AnimationState                = TURN_RIGHT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUTreeberd_TRNR
                AnimationMode        = LOOP
            End
        End

        AnimationState                = TURN_LEFT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUTreeberd_TRNL
                AnimationMode        = LOOP
            End
        End

        AnimationState = MOVING PANICKING
            Animation = Jump
                AnimationName                = RUTreeberd_MFDA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.5 0.5
                AnimationBlendTime            = 5
                Distance                    = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
            FXEvent    = Frame:4 Name:FX_EntLeftFootStep
            FXEvent    = Frame:18 Name:FX_EntRightFootStep
        End

        AnimationState                = MOVING
            StateName                = Moving
            Animation                = Walk
                AnimationName        = RUTreeberd_WLKA
                Distance            = 48.0
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:39 Name:FX_EntRightFootStep
            FXEvent    = Frame:79 Name:FX_EntLeftFootStep
            FXEvent    = Frame:129 Name:FX_EntRightFootStep
        End


        AnimationState                        = HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITB
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = HIT_REACTION HIT_LEVEL_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = WEAPONSET_TOGGLE_1
            StateName                        = Idle
            Animation
                AnimationName                = RUTreeberd_IDLB
                AnimationMode                = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_JustBuilt" then CurDrawableShowSubObjectPermanently("ROCK") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25R") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
            EndScript
            ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End

        AnimationState                        = WEAPONSET_ENRAGED
            Animation                        = AngryIdle
                AnimationName                = RUTreeberd_IDLC
                AnimationMode                = LOOP
            End
        End



        TransitionState = TRANS_Accelerate
            Animation = Transition
                AnimationName        = RUTreeberd_ACLA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop75
            Animation = Transition
                AnimationName        = RUTreeberd_DCLC
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop50
            Animation = Transition
                AnimationName        = RUTreeberd_DCLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop25
            Animation = Transition
                AnimationName        = RUTreeberd_DCLD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop00
            Animation = Transition
                AnimationName        = RUTreeberd_DCLA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End



        TransitionState = TRANS_AccelerateR
            Animation = Transition
                AnimationName        = RUTreeberd_ACLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop75R
            Animation
                AnimationName        = RUTreeberd_DCLG
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop50R
            Animation
                AnimationName        = RUTreeberd_DCLF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop25R
            Animation
                AnimationName        = RUTreeberd_DCLH
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop00R
            Animation
                AnimationName        = RUTreeberd_DCLE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End
    End



    Side                = Lothlorien
    Scale               = 1.30
    IsTrainable         = Yes
    EditorSorting       = UNIT

    ThreatLevel            = ENT_INFANTRY_THREAT_LEVEL
    ThreatBreakdown RohanEntBase_DetailedThreat
        AIKindOf = SIEGEWEAPON
    End

    ThingClass            = MEDIUM_MONSTER
    ShockwaveResistance   = SHOCKWAVE_RESISTANCE_IMMUNE
    TransportSlotCount    = TRANSPORTSLOTCOUNT_MONSTER

    WeaponSet
        Conditions          = None
        Weapon              = PRIMARY    RohanTreeBeardPunch
        Weapon              = SECONDARY  RohanBuildingTeardown
        OnlyAgainst         = SECONDARY  STRUCTURE BLOCKING_GATE
    End

    WeaponSet
        Conditions          = WEAPONSET_TOGGLE_1
        Weapon              = PRIMARY    RohanEntRockThrowEdain
    End


    ArmorSet
        Conditions      = None
        Armor           = EntArmor
        DamageFX        = EntDamageFX
    End

    ArmorSet
        Conditions      = PLAYER_UPGRADE
        Armor           = EntArmorUpgrade
        DamageFX        = EntDamageFX
    End


    BuildFadeInOnCreateTime = 20

    VisionRange            = VISION_ENT
    ShroudClearingRange = SHROUD_CLEAR_ENT

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    DisplayName           = OBJECT:ElvenEnt
    CrusherLevel          = 1
    CrushWeapon           = EntCrush
    MinCrushVelocityPercent = MINCRUSHVELOCITYPERCENT_TROLLS
    CrushDecelerationPercent = CRUSHDECELERATIONPERCENT_TROLLS
    UseCrushAttack        = No
    CommandSet            = RohanEntCommandSet
    CommandPoints         = 30
    MaxSimultaneousOfType = NEW_CATAPULT_MONSTER_RATIO



    AutoResolveUnitType               = AutoResolveUnit_Monster
    AutoResolveCombatChain            = AutoResolve_MonsterCombatChain

    AutoResolveBody         = AutoResolve_ElvenEntBody

    AutoResolveArmor
        Armor = AutoResolve_ElvenEntArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_ElvenEntWeapon
    End



    VoiceAttack                = EntVoiceSelect
    VoiceAttackCharge        = EntVoiceSelect
    VoiceAttackMachine        = EntVoiceSelect
    VoiceAttackStructure    = EntVoiceSelect
    VoiceCreated            = EntVoiceSelect
    VoiceFullyCreated        = EntVoiceSelect
    VoiceGuard                = EntVoiceSelect
    VoiceMove                = EntVoiceSelect
    VoicePriority            = 50
    VoiceSelect                = EntVoiceSelect
    VoiceSelectBattle        = EntVoiceSelect

    SoundMoveLoop            = EntVoxMoveLoop
    SoundImpact                = ImpactHorse

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Ent Unit Infantry
        UnitWeight = 2
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:BuildingEntMootCouncil                Animation:RUTReeBerd_SKL.RUTreeberd_MOTA    Frames:1
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_MOTA    Frames:225 253
        AnimationSound = Sound:BuildingEntMootCouncil                Animation:RUTReeBerd_SKL.RUTreeberd_MOTB    Frames:1

        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_GBA1    Frames:9 13
        AnimationSound = Sound:TrollTreeSwingLight                Animation:RUTReeBerd_SKL.RUTreeBerd_GBA1    Frames:10
        AnimationSound = Sound:EntGrabRock                        Animation:RUTReeBerd_SKL.RUTreeberd_GBA1    Frames:16
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_GBA2    Frames:28 34
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_GBB1    Frames:18
        AnimationSound = Sound:TrollTreeSwingLight                Animation:RUTReeBerd_SKL.RUTreeBerd_GBB1    Frames:16
        AnimationSound = Sound:EntGrabRock                        Animation:RUTReeBerd_SKL.RUTreeBerd_GBB1    Frames:21
        AnimationSound = Sound:EntGrabBuildingChunk                Animation:RUTReeBerd_SKL.RUTreeberd_GBB1    Frames:37
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_GBB2    Frames:24

        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_GRBC    Frames:13 26 117 179 223
        AnimationSound = Sound:EntGrabRock                        Animation:RUTReeBerd_SKL.RUTreeberd_GRBC    Frames:48
        AnimationSound = Sound:EntVoxEfforts                    Animation:RUTReeBerd_SKL.RUTreeberd_GRBC    Frames:160
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_GRBD    Frames:13 26 117 179 223
        AnimationSound = Sound:EntGrabRock                        Animation:RUTReeBerd_SKL.RUTreeberd_GRBD    Frames:48
        AnimationSound = Sound:EntVoxEfforts                    Animation:RUTReeBerd_SKL.RUTreeberd_GRBD    Frames:160
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_GRBE    Frames:13 26 117 179 223
        AnimationSound = Sound:EntGrabRock                        Animation:RUTReeBerd_SKL.RUTreeberd_GRBE    Frames:48
        AnimationSound = Sound:EntVoxEfforts                    Animation:RUTReeBerd_SKL.RUTreeberd_GRBE    Frames:160
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_GRBF    Frames:13 26 117 179 223
        AnimationSound = Sound:EntGrabRock                        Animation:RUTReeBerd_SKL.RUTreeberd_GRBF    Frames:48
        AnimationSound = Sound:EntVoxEfforts                    Animation:RUTReeBerd_SKL.RUTreeberd_GRBF    Frames:160

        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_ATKA    Frames:9 78
        AnimationSound = Sound:ImpactEntGenericPunch                Animation:RUTReeBerd_SKL.RUTreeberd_ATKA    Frames:31
         AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_ATKD    Frames:65
        AnimationSound = Sound:ImpactEntGenericKick                Animation:RUTReeBerd_SKL.RUTreeberd_ATKD    Frames:32
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_ATKE    Frames:70
        AnimationSound = Sound:ImpactEntGenericKick                Animation:RUTReeBerd_SKL.RUTreeberd_ATKE    Frames:31
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_ATKF    Frames:16 82
        AnimationSound = Sound:ImpactEntGenericPunch                Animation:RUTReeBerd_SKL.RUTreeberd_ATKF    Frames:32

        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeberd_ACLA    Frames:9
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeberd_DCLA    Frames:17 42
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeberd_DCLB    Frames:17 44
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeberd_DCLC    Frames:11 41
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeberd_DCLD    Frames:32

        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_WLKA    Frames:33 76
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_WLKC    Frames:22 48
        AnimationSound = Sound:EntRunStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_RUNA    Frames:4 24

        AnimationSound = Sound:EntRunStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_TRNL    Frames:12 27
        AnimationSound = Sound:EntRunStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_TRNR    Frames:12 27
        AnimationSound = Sound:EntRunStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_TNL2    Frames:18 38
        AnimationSound = Sound:EntRunStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_TNR2    Frames:18 38

        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_THRB    Frames:12 44
        AnimationSound = Sound:TrollTreeSwing                    Animation:RUTReeBerd_SKL.RUTreeBerd_THRB    Frames:36
        AnimationSound = Sound:TrollTreeSwingLight                Animation:RUTReeBerd_SKL.RUTreeBerd_THRC    Frames:29

        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_MADA    Frames:75
        AnimationSound = Sound:EntPanic                        Animation:RUTReeBerd_SKL.RUTreeBerd_MADA    Frames:17
        AnimationSound = Sound:EntRunStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_MFDA    Frames:2 14

        AnimationSound = Sound:EntRunStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD    Frames:5 120 206
        AnimationSound = Sound:EntSeeFirePart1                    Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD    Frames:40
        AnimationSound = Sound:EntSeeFirePart2                    Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD    Frames:70
        AnimationSound = Sound:TrollTreeSwing                    Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD    Frames:121
        AnimationSound = Sound:EntPanic                        Animation:RUTReeBerd_SKL.RUTreeBerd_RCTD    Frames:150

        AnimationSound = Sound:EntSplashWater                    Animation:RUTReeBerd_SKL.RUTreeBerd_SPLA    Frames:0

        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeberd_HITA    Frames:11 52
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeberd_GTPA    Frames:14 24
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUTReeBerd_SKL.RUTreeberd_DIEA    Frames:7
        AnimationSound = Sound:EntDieFall                        Animation:RUTReeBerd_SKL.RUTreeBerd_DIEA    Frames:63
        AnimationSound = Sound:EntDieFall                        Animation:RUTReeBerd_SKL.RUTreeBerd_LNDA    Frames:3
        AnimationSound = Sound:EntBodyfall                        Animation:RUTReeBerd_SKL.RUTreeBerd_LNDA    Frames:24



        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_MOTA    Frames:225 253
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_GBA1    Frames:9 13
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_GBA2    Frames:28 34
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_GBB1    Frames:18
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_GBB2    Frames:24
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_GRBC    Frames:13 26 117 179 223
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_GRBD    Frames:13 26 117 179 223
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_GRBE    Frames:13 26 117 179 223
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_GRBF    Frames:13 26 117 179 223
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_ATKA    Frames:9 78
         AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_ATKD    Frames:65
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_ATKE    Frames:70
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_ATKF    Frames:16 82
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeberd_ACLA    Frames:9
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeberd_DCLA    Frames:17 42
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeberd_DCLB    Frames:17 44
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeberd_DCLC    Frames:11 41
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeberd_DCLD    Frames:32
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_WLKA    Frames:33 76
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_WLKC    Frames:22 48
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_THRB    Frames:12 44
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_MADA    Frames:75
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeberd_HITA    Frames:11 52
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeberd_GTPA    Frames:14 24
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeberd_DIEA    Frames:7

        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_RUNA    Frames:4 24
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_TRNL    Frames:12 27
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_TRNR    Frames:12 27
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_TNL2    Frames:18 38
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_TNR2    Frames:18 38
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_MFDA    Frames:2 14
        AnimationSound = Sound:EntFootstepWater        RequiredMC:WADING    Animation:RUTreeberd_SKL.RUTreeBerd_RCTD    Frames:5 120 206
    End




    RadarPriority    = UNIT
    KindOf            = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_INFANTRY CAN_ATTACK_WALLS SCARY BIG_MONSTER HEAVY_MELEE_HITTER ARMY_SUMMARY SIEGEENGINE

    BuildCost = 1100
    BuildTime = ELITE_BUILDTIME

    Behavior = FlammableUpdate FlammableModuleTag_15
        AflameDuration               = 0
        AflameDamageDelay            = 500
        AflameDamageAmount           = 30
        FlameDamageLimit             = 130
        FlameDamageExpiration        = 10000
        SetBurnedStatus              = Yes
        SwapModelWhenAflame          = Yes
        SwapModelWhenQuenched        = Yes
        RunToWater                   = Yes
        RunToWaterDepth              = 0
        RunToWaterSearchRadius       = 10000
        RunToWaterSearchIncrement    = 50
        PanicLocomotorWhileAflame    = Yes
        CustomAnimAndDuration        = AnimState:USER_3 AnimTime:3400
        FireFXList                   = FX:FX_FireStartEnt
    End

    Behavior = EntEnragedUpdate EnragedBehaviorModuleTag
        HatedObjectFilter     = NONE +LumberMill +MordorLumberMill +IsengardLumberMill +WildLaborer +MordorWorker
        FriendlyDeadFilter    = NONE +ImladrisEntFir +ImladrisEntBirch +ImladrisEntAsh +ImladrisEntOak +ImladrisTreeBerd +FangornFlinkbaum
        EnragedTime           = 1500000
        TimeUntilCanRageAgain = 0
        EnragedTransitionTime = 3000
    End

    Body = ActiveBody ModuleTag_02
        CheerRadius             = EMOTION_CHEER_RADIUS
        MaxHealth               = ROHAN_ENT_HEALTH
        BurningDeathBehavior    = Yes
    End

    Behavior = AimWeaponBehavior AimWeaponModuleTag
        AimNearDistance = 60.0
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Artillery
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        AILuaEventsList            = EntFirFunctions
        BurningDeathTime           = BURNINGDEATH_DURATION_ENT
    End

    Behavior = FireWeaponWhenDeadBehavior FireDeadTag
        RequiredStatus  = DEATH_1
        StartsActive    = Yes
        DelayTime       = 2300
        DeathWeapon     = RohanEntDeath
        WeaponOffset    = X:-48 Y:0 Z:0
    End

    LocomotorSet
        Locomotor = RohanTreeBeardLocomotor
        Condition = SET_NORMAL
        Speed     = 45
    End

    LocomotorSet
        Locomotor = RohanTreeBeardLocomotor
        Condition = SET_ENRAGED
        Speed     = 62
    End

    LocomotorSet
        Locomotor = RohanTreeBeardFastTurnLocomotor
        Condition = SET_PANIC
        Speed      = 80
    End

    LocomotorSet
        Locomotor = BurningDeathLocomotorCavalry
        Condition = SET_BURNINGDEATH
        Speed      = BURNINGDEATH_WANDERSPEED_CAVALRY
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End

    Behavior = SlowDeathBehavior ModuleTag_50
        DeathTypes = ALL -KNOCKBACK -FADED
        DestructionDelay = 20000
        SinkDelay = 5000
        SinkRate = 0.8
        Sound = INITIAL EntDie
        DeathFlags            = DEATH_1
    End

    Behavior = SlowDeathBehavior ModuleTag_52

        DeathTypes = NONE +KNOCKBACK
        DestructionDelay = 20000
        SinkDelay = 5000
        SinkRate = 0.8
        DeathFlags            = DEATH_1
    End

      Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes            = NONE +FADED
        SinkRate            = 0.1
        FadeTime            = 9500
        DestructionDelay    = 10000
        DeathFlags            = DEATH_2
        FX                    = INITIAL   FX_UnSummonEntAllies
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion    = Terror_Base
    End

    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End



     Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
         HitReactionLifeTimer1 = 2500
        HitReactionThreshold1 = 50.0
     End


    Behavior = ProductionUpdate ModuleTag_UpgradeProducer
        GiveNoXP = Yes
    End



    Behavior = InvisibilityUpdate ModuleTag_Camouflage
        InvisibilityNugget
        InvisibilityType = CAMOUFLAGE
        ForbiddenConditions = AWAY_FROM_TREES MOVING TAKING_DAMAGE FIRING_ANY USING_ABILITY
        DetectionRange = CAMOUFLAGE_RADIUS
        Options = ALLOW_NEAR_TREES
    End
        UnitSpecificSoundNameToUseAsVoiceMoveToStealthyArea = VoiceMoveToTrees
        UnitSpecificSoundNameToUseAsVoiceEnterStateMoveToStealthyArea = VoiceEnterStateMoveToTrees
        StartsActive = Yes
        UpdatePeriod = 2000
    End


    Behavior = MonitorConditionUpdate ModuleTag_CommandSetSwapper
        ModelConditionFlags            = ATTACKING_POSITION
        ModelConditionCommandSet    = RohanEntRockCommandSetStopBombard
        WeaponSetFlags                = WEAPONSET_TOGGLE_1
        WeaponToggleCommandSet        = RohanEntRockCommandSet
    End


    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy = Upgrade_SwitchToRockThrowing
        GetUpgradeCommandButtonName = Command_ToggleEntRockThrow
    End







    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate ToggleSiegeModeAI
        CommandButtonName = Command_ToggleEntRockThrow
        SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_SIEGE
    End

    Geometry            = CYLINDER
    GeometryMajorRadius = 25
    GeometryHeight        = 70.0
    GeometryIsSmall        = No

    Shadow =SHADOW_VOLUME_NON_SELF_2
    ShadowSizeX = 36

End

ChildObject ImladrisEntFir_Summoned ImladrisEntFir
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_INFANTRY CAN_ATTACK_WALLS SCARY BIG_MONSTER SUMMONED
    IsTrainable = No
    CommandPoints = 0
    MaxSimultaneousOfType = NEW_CATAPULT_MONSTER_RATIO

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime      = CREATE_A_HERO_REINFORCEMENT_LIFETIME
        MaxLifetime      = CREATE_A_HERO_REINFORCEMENT_LIFETIME
        DeathType        = FADED
    End
    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion    = Terror_Base
    End
End

ChildObject ImladrisEntFirChild ImladrisEntFir

    CommandPoints     = 0
    MaxSimultaneousOfType = NEW_CATAPULT_MONSTER_RATIO

    Behavior = SlavedUpdate ModuleTag_Slave
        GuardMaxRange       = 300
        GuardWanderRange    = 100
        UseSlaverAsControlForEvaObjectSightedEvents = Yes
    End
End

ChildObject ImladrisEntFir_Slaved ImladrisEntFir

    KindOf = +CREEP

    Behavior = SlavedUpdate ModuleTag_Slave
        GuardMaxRange       = 300
        GuardWanderRange    = 100
        UseSlaverAsControlForEvaObjectSightedEvents = Yes
    End
End


ChildObject ImladrisEntOak ImladrisEntFir



    ButtonImage       = HIEnt
    SelectPortrait    = UPElven_Ent


    Draw = W3DScriptedModelDraw ModuleTag_01

        StaticModelLODMode = Yes
        WadingParticleSys = EntRipples
        WadingParticleSys = EntSplash

        OkToChangeModelColor = Yes

        ExtraPublicBone = B_POINT1R
        ExtraPublicBone = PASSENGER
        ExtraPublicBone = IMPACT
        ExtraPublicBone = ROCK

       DefaultModelConditionState
           Model               = RUEntOak_SKN
           Skeleton            = RUTreeberd_SKL
           WeaponLaunchBone    = PRIMARY Firepoint
           WeaponLaunchBone    = SECONDARY Firepoint
           ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
       End

       ModelConditionState = WADING AFLAME
           Model    = RUEntOakD_SKN
           Skeleton = RUTreeBerd_SKL
           WeaponLaunchBone = PRIMARY Firepoint
           WeaponLaunchBone = SECONDARY Firepoint
           ParticleSysBone = BAT_HEAD TreebeardSteam FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TreebeardSteam FollowBone:Yes
           ParticleSysBone = BAT_PELVIS TreebeardSteam1 FollowBone:Yes
           ParticleSysBone = BAT_CALFR TreebeardSteam FollowBone:Yes
           ParticleSysBone = B_POINT1L TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_POINT1R TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_THUMB1L TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_THUMB1R TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = NONE TrBrdWaterRipples FollowBone:No
           ParticleSysBone = NONE TrBrdWaterRipples FollowBone:No
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_HANDR TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_HANDL TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash3 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash3 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash4 FollowBone:Yes
       End


       ModelConditionState  = AFLAME
            Model           = RUEntOakD_SKN
            Skeleton        = RUTreeberd_SKL
            ParticleSysBone = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HANDR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HANDL TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
        End

        ModelConditionState  = AFLAME BURNED
            Model            = RUEntOakD_SKN
            Skeleton         = RUTreeberd_SKL
            WeaponLaunchBone = PRIMARY Firepoint
            WeaponLaunchBone = SECONDARY Firepoint
            ParticleSysBone  = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HANDR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HANDL TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
         End

         ModelConditionState = BURNED
            Model = RUEntOakD_SKN
            Skeleton = RUTreeBerd_SKL
            WeaponLaunchBone    = PRIMARY Firepoint
            WeaponLaunchBone    = SECONDARY Firepoint
         End

         ModelConditionState = BURNT_MODEL DYING
            Model               = RUEntOakD_SKN
            Skeleton            = RUTreeBerd_SKL
            WeaponLaunchBone    = PRIMARY Firepoint
            WeaponLaunchBone    = SECONDARY Firepoint
         End


        IdleAnimationState
            StateName = Idle
            Animation = IDLA
                AnimationName = RUTreeberd_IDLA
                AnimationBlendTime  = 5
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")

                Prev = CurDrawablePrevAnimationState()
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
                if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
            ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End

        AnimationState = DYING BURNINGDEATH
            Animation
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
                AnimationBlendTime = 10
            End
            Animation
                AnimationName = RUTreeberd_DIE
                AnimationMode = ONCE
                AnimationBlendTime = 20
            End
        End

        AnimationState = DYING DEATH_2
            Animation = Die
                AnimationName = RUTreeberd_IDLA
                AnimationMode = ONCE
            End
        End

        AnimationState = DYING WEAPONSET_TOGGLE_1
            Animation = Die
                AnimationName = RUTreeberd_DIEB
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState = DYING
            Animation = Die
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState            = BURNINGDEATH
            Animation
                AnimationName    = RUTreeberd_MFDA
                AnimationMode    = LOOP
                Distance        = 100
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
        End


        AnimationState   = JUST_BUILT
            StateName        = STATE_JustBuilt
            Animation = Sprout
                AnimationName = RUTreeberd_MOTC
                AnimationMode = ONCE
                AnimationBlendTime = 0
                AnimationSpeedFactorRange = 0.5 0.5
            End



            FXEvent    = Frame:25 Name:FX_EntSprout
            FXEvent = Frame:25 Name:FX_EntSproutButterflies
        End



        AnimationState        = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = RUTreeberd_FLYA
                AnimationMode      = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED
            Animation           = Stun
                AnimationName     = RUTreeberd_LNDA
                AnimationMode      = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName     = RUTreeberd_GTPA
                AnimationMode      = ONCE
            End
        End



        AnimationState = AFLAME DYING SPLATTED
            Animation = DieSplat
                AnimationName = RUTreeberd_LNDA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState = AFLAME DYING
            Animation = Die
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState = USER_3
            Animation = OnFire
                AnimationName = RUTreeberd_RCTD
                AnimationMode = ONCE
                AnimationBlendTime = 20
            End
            FXEvent    = Frame:54 Name:FX_EntRightFootStep
        End

        AnimationState = RELOADING_A WEAPONSET_TOGGLE_1
            Animation
                AnimationName        = RUTreeberd_GRBA
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
            FXEvent    = Frame:20    Name: FX_EntRockGrab
            FXEvent    = Frame:24    Name: FX_EntRockYank
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
        End

        AnimationState = FIRING_OR_PREATTACK_A AIM_NEAR WEAPONSET_TOGGLE_1
            Animation = CloseRock
                AnimationName        = RUTreeberd_THRC
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes

            End

            FrameForPristineBonePositions = 39
        End

        AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            Animation = FarRock
                AnimationName        = RUTreeberd_THRB
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes

            End

            FrameForPristineBonePositions = 40
        End

        AnimationState = MOVING FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
            Animation = RunAndFire
                AnimationName       = RUTreeberd_ATRB
                AnimationMode       = LOOP
            End
        End

        AnimationState = MOVING FIRING_OR_PREATTACK_A
            Animation = RunAndFire
                AnimationName       = RUTreeberd_ATRA
                AnimationMode       = LOOP
            End
        End

        AnimationState = FIRING_OR_PREATTACK_A
            Animation = Punch
                AnimationName        = RUTreeberd_ATKA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = Punt
                AnimationName        = RUTreeberd_ATKD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = FrontKick
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunch
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            BeginScript
                if CurDrawableIsCurrentTargetKindof("MONSTER") then
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("FrontKick")
                    else
                        return ("KirkPunch")
                    end
                else
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("Punch")
                    else
                        return ("Punt")
                    end
                end
            EndScript
        End

        AnimationState = FIRING_OR_PREATTACK_B
            Animation           = Punch
                AnimationName     = RUTreeberd_ATKA
                AnimationMode       = ONCE
                AnimationBlendTime = 5
                UseWeaponTiming        = Yes
            End
            Animation           = Punt
                AnimationName     = RUTreeberd_ATKD
                AnimationMode       = ONCE
                AnimationBlendTime = 5
                UseWeaponTiming        = Yes
            End
            Animation           = FrontKick
                AnimationName     = RUTreeberd_ATKE
                AnimationMode       = ONCE
                AnimationBlendTime = 5
                UseWeaponTiming        = Yes
            End
            Animation           = KirkPunch
                AnimationName     = RUTreeberd_ATKF
                AnimationMode       = ONCE
                AnimationBlendTime = 5
                UseWeaponTiming        = Yes
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                if CurDrawableIsCurrentTargetKindof("MONSTER") then
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("FrontKick")
                    else
                        return ("KirkPunch")
                    end
                else
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("Punch")
                    else
                        return ("Punt")
                    end
                end
            EndScript
        End

        AnimationState                = INITIAL_ENRAGED
            StateName                = Enraged
            Animation                = RUTreeBerd_MADA
                AnimationName        = RUTreeBerd_MADA
                AnimationMode        = ONCE
            End
        End

        AnimationState        = WEAPONSET_ENRAGED TURN_LEFT
            Animation           = Walk
                AnimationName     = RUTreeberd_TNL2
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState        = WEAPONSET_ENRAGED TURN_RIGHT
            Animation           = Walk
                AnimationName     = RUTreeberd_TNR2
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState        = WEAPONSET_ENRAGED MOVING
            Animation           = AngryStompWalk
                AnimationName     = RUTreeberd_WLKC
                AnimationMode      = LOOP
                AnimationBlendTime  = 5
                Distance            = 50
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:26 Name:FX_EntRightFootStep
        End


        AnimationState        = AFLAME TURN_LEFT
            Animation           = Walk
                AnimationName     = RUTreeberd_TRNL
                AnimationMode     = LOOP
            End
        End

        AnimationState        = AFLAME TURN_RIGHT
            Animation           = Walk
                AnimationName     = RUTreeberd_TRNR
                AnimationMode     = LOOP
            End
        End

        AnimationState        = AFLAME MOVING
            Animation           = Jump
                AnimationName     = RUTreeberd_MFDA
                AnimationMode      = LOOP
                AnimationSpeedFactorRange = 0.5 0.5
                AnimationBlendTime  = 5
                Distance            = 50
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:4 Name:FX_EntLeftFootStep
            FXEvent    = Frame:18 Name:FX_EntRightFootStep
            BeginScript
                CurDrawablePlaySound("EntRunFire")
            EndScript
        End

        AnimationState        =  AFLAME WADING
            Animation           = Splash
                AnimationName     = RUTreeberd_SPLA
                AnimationMode      = LOOP
                AnimationBlendTime  = 5
            End
        End

        AnimationState        = AFLAME STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = RUTreeberd_FLYA
                AnimationMode      = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = AFLAME STUNNED
            Animation           = Stun
                AnimationName     = RUTreeberd_LNDA
                AnimationMode      = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = AFLAME STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName     = RUTreeberd_GTPA
                AnimationMode      = ONCE
            End
        End




        AnimationState = DYING SPLATTED
            Animation = DieSplat
                AnimationName    = RUTreeberd_LNDA
                AnimationMode    = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState = DYING SPLATTED
            Animation = DieSplat
                AnimationName    = RUTreeberd_LNDA
                AnimationMode    = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState = PACKING GRAB_BUILDING_CHUNK
            Animation = Pack
                AnimationName        = RUTreeberd_GBB2
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
        End

        AnimationState = UNPACKING GRAB_BUILDING_CHUNK
            Animation = Pack
                AnimationName        = RUTreeberd_GBB1
                AnimationMode        = ONCE
                AnimationBlendTime    = 20
            End
            ParticleSysBone = ParticleNode01 TreeBeardAttackLeavesFir
        End

        AnimationState = PACKING
            Animation = Pack
                AnimationName    = RUTreeberd_GBA2
                AnimationMode    = ONCE
            End
        End

        AnimationState = UNPACKING
            Animation = Pack
                AnimationName    = RUTreeberd_GBA1
                AnimationMode    = ONCE
            End
        End



        AnimationState                = TURN_RIGHT WEAPONSET_TOGGLE_1
            StateName                = Turn
            Animation
                AnimationName        = RUTreeberd_TNR2
                AnimationMode        = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState                = TURN_LEFT WEAPONSET_TOGGLE_1
            StateName                = Turn
            Animation
                AnimationName        = RUTreeberd_TNL2
                AnimationMode        = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState                = MOVING WEAPONSET_TOGGLE_1
            StateName                = Moving
            Animation
                AnimationName        = RUTreeberd_WLKB
                Distance            = 50
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:39 Name:FX_EntRightFootStep
            FXEvent    = Frame:79 Name:FX_EntLeftFootStep
            FXEvent    = Frame:129 Name:FX_EntRightFootStep
        End


        AnimationState                = TURN_RIGHT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUTreeberd_TRNR
                AnimationMode        = LOOP
            End
        End

        AnimationState                = TURN_LEFT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUTreeberd_TRNL
                AnimationMode        = LOOP
            End
        End

        AnimationState = MOVING PANICKING
            Animation = Jump
                AnimationName                = RUTreeberd_MFDA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.5 0.5
                AnimationBlendTime            = 5
                Distance                    = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
            FXEvent    = Frame:4 Name:FX_EntLeftFootStep
            FXEvent    = Frame:18 Name:FX_EntRightFootStep
        End

        AnimationState                = MOVING
            StateName                = Moving
            Animation                = Walk
                AnimationName        = RUTreeberd_WLKA
                Distance            = 48.0
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:39 Name:FX_EntRightFootStep
            FXEvent    = Frame:79 Name:FX_EntLeftFootStep
            FXEvent    = Frame:129 Name:FX_EntRightFootStep
        End


        AnimationState                        = HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITB
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = HIT_REACTION HIT_LEVEL_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = WEAPONSET_TOGGLE_1
            StateName                        = Idle
            Animation
                AnimationName                = RUTreeberd_IDLB
                AnimationMode                = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_JustBuilt" then CurDrawableShowSubObjectPermanently("ROCK") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25R") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
            EndScript
            ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End

        AnimationState                        = WEAPONSET_ENRAGED
            Animation                        = AngryIdle
                AnimationName                = RUTreeberd_IDLC
                AnimationMode                = LOOP
            End
        End



        TransitionState = TRANS_Accelerate
            Animation = Transition
                AnimationName        = RUTreeberd_ACLA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop75
            Animation = Transition
                AnimationName        = RUTreeberd_DCLC
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop50
            Animation = Transition
                AnimationName        = RUTreeberd_DCLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop25
            Animation = Transition
                AnimationName        = RUTreeberd_DCLD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop00
            Animation = Transition
                AnimationName        = RUTreeberd_DCLA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End



        TransitionState = TRANS_AccelerateR
            Animation = Transition
                AnimationName        = RUTreeberd_ACLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop75R
            Animation
                AnimationName        = RUTreeberd_DCLG
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop50R
            Animation
                AnimationName        = RUTreeberd_DCLF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop25R
            Animation
                AnimationName        = RUTreeberd_DCLH
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop00R
            Animation
                AnimationName        = RUTreeberd_DCLE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
            End
        End
    End
    DisplayName            = OBJECT:RohanEntOak
End

ChildObject ImladrisEntOak_Summoned ImladrisEntOak
    KindOf        = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_INFANTRY CAN_ATTACK_WALLS SCARY BIG_MONSTER SUMMONED
    IsTrainable   = No
    CommandPoints = 0
    MaxSimultaneousOfType = NEW_CATAPULT_MONSTER_RATIO

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime      = CREATE_A_HERO_REINFORCEMENT_LIFETIME
        MaxLifetime      = CREATE_A_HERO_REINFORCEMENT_LIFETIME
        DeathType        = FADED
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion    = Terror_Base
    End
End

ChildObject ImladrisEntOak_Slaved ImladrisEntOak

    KindOf = +CREEP

    VisionRange = CREEP_VISION

    Behavior = SlavedUpdate ModuleTag_Slave
        GuardMaxRange       = 300
        GuardWanderRange    = 100
        UseSlaverAsControlForEvaObjectSightedEvents = Yes
    End
End


Object ImladrisEntAsh


    DescriptionStrategic = CONTROLBAR:LW_ToolTip_ElvenEnt

    ButtonImage       = HIImladrisEntAsh_Wotr
    SelectPortrait    = UPElven_Ent

    Draw = W3DScriptedModelDraw ModuleTag_01

        StaticModelLODMode   = Yes
        WadingParticleSys    = EntRipples
        WadingParticleSys    = EntSplash
        OkToChangeModelColor = Yes

        ExtraPublicBone = B_POINT1R
        ExtraPublicBone = PASSENGER
        ExtraPublicBone = BAT_PELVIS
        ExtraPublicBone = NDEX2R01
        ExtraPublicBone = IMPACT
        ExtraPublicBone = ROCK

        DefaultModelConditionState
            Model            = RUEntAsh_SKN
            Skeleton         = RUEntAsh_SKL
            WeaponLaunchBone = PRIMARY NDEX2R
            WeaponLaunchBone = SECONDARY BAT_HAND_R
            ParticleSysBone  = BAT_SPINE_1 TreeBeardIdleLeaves FollowBone:No
        End

        ModelConditionState  = WADING AFLAME
            Model            = RUEntAshD_SKN
            Skeleton         = RUEntAsh_SKL
            WeaponLaunchBone = PRIMARY NDEX2R
            WeaponLaunchBone = SECONDARY BAT_HAND_R
            ParticleSysBone  = BAT_HEAD TreebeardSteam FollowBone:Yes
            ParticleSysBone  = BAT_SPINE_1 TreebeardSteam FollowBone:Yes
            ParticleSysBone  = BAT_PELVIS TreebeardSteam1 FollowBone:Yes
            ParticleSysBone  = BAT_CALFR TreebeardSteam FollowBone:Yes
            ParticleSysBone  = NDEX_2_L TrBrdWaterDrips FollowBone:Yes
            ParticleSysBone  = NDEX2R TrBrdWaterDrips FollowBone:Yes
            ParticleSysBone  = THUMB_2_L TrBrdWaterDrips FollowBone:Yes
            ParticleSysBone  = THUMB_2_R TrBrdWaterDrips FollowBone:Yes
            ParticleSysBone  = NONE TrBrdWaterRipples FollowBone:No
            ParticleSysBone  = NONE TrBrdWaterRipples FollowBone:No
            ParticleSysBone  = BAT_SPINE_1 TrBrdWaterSplash2 FollowBone:Yes
            ParticleSysBone  = BAT_HAND_R TrBrdWaterSplash2 FollowBone:Yes
            ParticleSysBone  = BAT_HAND_L TrBrdWaterSplash2 FollowBone:Yes
            ParticleSysBone  = BAT_SPINE_1 TrBrdWaterSplash3 FollowBone:Yes
            ParticleSysBone  = BAT_SPINE_1 TrBrdWaterSplash3 FollowBone:Yes
            ParticleSysBone  = BAT_SPINE_1 TrBrdWaterSplash4 FollowBone:Yes
        End

        ModelConditionState  = AFLAME BURNED
            Model            = RUEntAshD_SKN
            Skeleton         = RUEntAsh_SKL
            WeaponLaunchBone = PRIMARY NDEX2R
            WeaponLaunchBone = SECONDARY BAT_HAND_R
            ParticleSysBone  = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HAND_R TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HAND_L TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
        End

        ModelConditionState  = AFLAME
            Model            = RUEntAsh_SKN
            Skeleton         = RUEntAsh_SKL
            WeaponLaunchBone = PRIMARY NDEX2R
            WeaponLaunchBone = SECONDARY BAT_HAND_R
            ParticleSysBone  = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HAND_R TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HAND_L TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
        End

        ModelConditionState  = BURNED
            Model            = RUEntAshD_SKN
            Skeleton         = RUEntAsh_SKL
            WeaponLaunchBone = PRIMARY NDEX2R
            WeaponLaunchBone = SECONDARY BAT_HAND_R
        End

        ModelConditionState = BURNT_MODEL DYING
            Model            = RUEntAshD_SKN
            Skeleton         = RUEntAsh_SKL
            WeaponLaunchBone = PRIMARY NDEX2R
            WeaponLaunchBone = SECONDARY BAT_HAND_R
        End


        IdleAnimationState
            Animation = IDLA
                AnimationName = RUEntAsh_IDLA
                AnimationBlendTime  = 5
            End
            StateName = Idle
            BeginScript

                Prev = CurDrawablePrevAnimationState()
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
                if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
            ParticleSysBone     = BAT_SPINE_1 TreeBeardIdleLeaves FollowBone: No
        End




        AnimationState        = DYING BURNINGDEATH
            Animation
                AnimationName     = RUEntAsh_DIEA
                AnimationMode      = ONCE
                AnimationBlendTime = 10
            End
        End

    AnimationState        = BURNINGDEATH
            Animation
                AnimationName     = RUEntAsh_MFDA
                AnimationMode      = LOOP
                Distance            = 100
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
        End

    AnimationState = DYING DEATH_2
      Animation = Die
        AnimationName = RUEntAsh_MOTA
        AnimationMode = ONCE_BACKWARDS
        AnimationBlendTime = 5
      End
      Flags = START_FRAME_LAST
    End

        AnimationState        = AFLAME DYING SPLATTED
            Animation           = DieSplat
                AnimationName     = RUEntAsh_LNDA
                AnimationMode      = ONCE
            End
      ParticleSysBone = BAT_SPINE_1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = AFLAME DYING
            Animation           = Die
                AnimationName     = RUEntAsh_DIEA
                AnimationMode      = ONCE
        AnimationBlendTime = 5
            End
            ParticleSysBone = BAT_SPINE_1 AshSplatDust_SEE FollowBone:Yes
        End

        AnimationState        = DYING SPLATTED
            Animation           = DieSplat
                AnimationName     = RUEntAsh_LNDA
                AnimationMode      = ONCE
            End
                ParticleSysBone = BAT_SPINE_1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = DYING
            Animation           = Die
                AnimationName     = RUEntAsh_DIEA
                AnimationMode      = ONCE
                AnimationBlendTime = 5

            End
            ParticleSysBone = BAT_SPINE_1 AshSplatDust_SEE FollowBone:Yes
        End




        AnimationState   = JUST_BUILT
            StateName        = STATE_JustBuilt
            Animation = Sprout
                AnimationName = RUEntAsh_MOTA
                AnimationMode = ONCE

                AnimationSpeedFactorRange = 0.5 0.5
            End
            FXEvent    = Frame:25 Name:FX_EntSprout
            FXEvent = Frame:25 Name:FX_EntSproutButterflies
        End

        AnimationState        = PREPARING
            StateName            = STATE_Debate
            Animation           = Debate
                AnimationName     = RUEntAsh_IDLA
                AnimationMode      = LOOP
                AnimationBlendTime = 30
                AnimationSpeedFactorRange = 0.8 1.1
            End
            Flags               = RANDOMSTART
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
        End

        TransitionState   = TRANS_Sprout
            Animation = Sprout
                AnimationName = RUEntAsh_MOTA
                AnimationMode = ONCE
                AnimationBlendTime = 0
        AnimationSpeedFactorRange = 0.5 0.5
            End
      FXEvent    = Frame:25 Name:FX_EntSprout
      FXEvent = Frame:25 Name:FX_EntSproutButterflies
        End




        AnimationState        = AFLAME STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = RUEntAsh_FLYA
                AnimationMode      = LOOP
        AnimationBlendTime = 5
            End
            Flags               = RANDOMSTART
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState        = AFLAME STUNNED
            Animation           = Stun
                AnimationName     = RUEntAsh_LNDA
                AnimationMode      = ONCE
        AnimationBlendTime = 5
            End
            ParticleSysBone = BAT_SPINE_1 TreebeardSplatDust1 FollowBone:Yes
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState        = AFLAME STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName     = RUEntAsh_GTPA
                AnimationMode      = ONCE
            AnimationBlendTime = 5
        End
        BeginScript
            CurDrawableHideSubObjectPermanently("ROCK")
        EndScript
        End

        AnimationState        = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = RUEntAsh_FLYA
                AnimationMode      = LOOP
        AnimationBlendTime = 5
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED
            Animation           = Stun
                AnimationName     = RUEntAsh_LNDA
                AnimationMode      = ONCE
        AnimationBlendTime = 5
            End
                ParticleSysBone = BAT_SPINE_1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName     = RUEntAsh_GTPA
                AnimationMode      = ONCE
        AnimationBlendTime = 5
            End
        End




    AnimationState = USER_6
      StateName = Enraged
      Animation = RUEntAsh_RCTA
        AnimationName = RUEntAsh_RCTA
        AnimationMode = ONCE
                AnimationBlendTime = 20
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
            FXEvent    = Frame:54 Name:FX_AshEntRightFootStep
    End

    AnimationState = INITIAL_ENRAGED
      StateName = Enraged
      Animation = RUEntAsh_RCTA
        AnimationName = RUEntAsh_RCTA
        AnimationMode = ONCE

      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
             FXEvent    = Frame:54 Name:FX_AshEntRightFootStep
   End

        AnimationState        = USER_3
            Animation           = OnFire
                AnimationName     = RUEntAsh_RCTA
                AnimationMode      = ONCE
                AnimationBlendTime = 20
            End
            FXEvent    = Frame:54 Name:FX_AshEntRightFootStep
        End

        AnimationState = SPECIAL_WEAPON_TWO
      Animation = Punt
        AnimationName = RUEntAsh_ATKC
        AnimationMode = ONCE
        AnimationBlendTime = 5

      End
            ParticleSysBone     = BAT_SPINE_1 TreeBeardAttackLeavesFir
        End





        AnimationState = MOVING FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
            Animation = RunAndFire
                AnimationName       = RUEntAsh_WLKC
                AnimationMode       = LOOP
        AnimationBlendTime = 5
            End
        End

        AnimationState        = WEAPONSET_ENRAGED TURN_LEFT
            Animation           = Walk
                AnimationName     = RUEntAsh_TRNL
                AnimationMode     = LOOP
        AnimationBlendTime = 5
                AnimationSpeedFactorRange = 1.1 1.1
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState        = WEAPONSET_ENRAGED TURN_RIGHT
            Animation           = Walk
                AnimationName     = RUEntAsh_TRNR
                AnimationMode     = LOOP
        AnimationBlendTime = 5
                AnimationSpeedFactorRange = 1.1 1.1
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState        = FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
      Animation = Punch
        AnimationName = RUEntAsh_ATKA
        AnimationMode = ONCE
        AnimationBlendTime = 5
        UseWeaponTiming = Yes
      End
      Animation = FrontKick
        AnimationName = RUEntAsh_ATKD
        AnimationMode = ONCE
        AnimationBlendTime = 5
        UseWeaponTiming = Yes
      End
      Animation = KirkPunch
        AnimationName = RUEntAsh_ATKE
        AnimationMode = ONCE
        AnimationBlendTime = 5
        UseWeaponTiming = Yes
      End
      BeginScript
        if CurDrawableIsCurrentTargetKindof("MONSTER") then
          if GetClientRandomNumberReal(0,1) > 0.66 then
            return ("FrontKick")
          else
            return ("KirkPunch")
          end
        else
        end
      EndScript
            ParticleSysBone     = ParticleNode01 TreeBeardAttackLeavesFir
        End

    AnimationState = FIRING_OR_PREATTACK_B WEAPONSET_ENRAGED
      Animation = FrontKickOnBuilding
        AnimationName = RUEntAsh_ATKD
        AnimationMode = ONCE
        AnimationBlendTime = 5
        UseWeaponTiming = Yes
      End
      Animation = KirkPunchOnBuilding
        AnimationName = RUEntAsh_ATKE
        AnimationMode = ONCE
        AnimationBlendTime = 5
        UseWeaponTiming = Yes
      End
            ParticleSysBone     = BAT_SPINE_1 TreeBeardAttackLeavesFir
    End

        AnimationState = WEAPONSET_ENRAGED MOVING PANICKING
            Animation = Jump
                AnimationName                = RUEntAsh_MFDA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.5 0.5
                AnimationBlendTime            = 5
                Distance                    = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
            FXEvent    = Frame:4 Name:FX_AshEntLeftFootStep
            FXEvent    = Frame:18 Name:FX_AshEntRightFootStep
        End

        AnimationState        = WEAPONSET_ENRAGED AFLAME WADING
            Animation           = Splash
                AnimationName     = RUEntAsh_SPLA
                AnimationMode      = LOOP
                AnimationBlendTime  = 5
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState        = WEAPONSET_ENRAGED MOVING
            Animation           = AngryStompWalk
                AnimationName     = RUEntAsh_WLKC
                AnimationMode      = LOOP
                AnimationBlendTime  = 5
                Distance            = 50
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES
      FXEvent = Frame:0 Name:FX_AshEntLeftFootStep
      FXEvent = Frame:13 Name:FX_AshEntRightFootStep
      FXEvent = Frame:26 Name:FX_AshEntLeftFootStep
      FXEvent = Frame:43 Name:FX_AshEntRightFootStep
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_AccelerateENR") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_AccelerateENR") end
      EndScript
        End

    AnimationState = WEAPONSET_ENRAGED HIT_REACTION HIT_LEVEL_1
      Animation = Hit_Level_1_a
        AnimationName = RUEntAsh_IDLA
        AnimationMode = ONCE
      End
    End

    AnimationState = WEAPONSET_ENRAGED
      Animation = AngryIdle
                AnimationName = RUEntAsh_IDLA
        AnimationMode = LOOP
        AnimationBlendTime = 5

      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25ENR") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
        if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
      ParticleSysBone     = BAT_SPINE_1 TreeBeardIdleLeaves FollowBone: No
    End




        AnimationState        = AFLAME TURN_LEFT
            Animation           = Walk
                AnimationName     = RUEntAsh_TRNL
                AnimationMode     = LOOP
        AnimationBlendTime = 5
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState        = AFLAME TURN_RIGHT
            Animation           = Walk
                AnimationName     = RUEntAsh_TRNR
                AnimationMode     = LOOP
        AnimationBlendTime = 5
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState        = AFLAME MOVING
            Animation           = Jump
                AnimationName     = RUEntAsh_MFDA
                AnimationMode      = LOOP
                AnimationSpeedFactorRange = 0.5 0.5
                AnimationBlendTime  = 5
                Distance            = 50
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:4 FireWhenSkipped Name:FX_AshEntLeftFootStep
            FXEvent    = Frame:18 FireWhenSkipped Name:FX_AshEntRightFootStep
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
                CurDrawablePlaySound("EntRunFire")
          EndScript
        End

        AnimationState        =  AFLAME WADING
            Animation           = Splash
                AnimationName     = RUEntAsh_SPLA
                AnimationMode      = LOOP
                AnimationBlendTime  = 5
            End
        BeginScript
           CurDrawableHideSubObjectPermanently("ROCK")
        EndScript
        End





        AnimationState = MOVING FIRING_OR_PREATTACK_A
            Animation = RunAndFire
                AnimationName       = RUEntAsh_WLKC
                AnimationMode       = LOOP
        AnimationBlendTime = 5
            End
        End


        AnimationState                = TURN_RIGHT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUEntAsh_TRNR
                AnimationMode        = LOOP
        AnimationBlendTime = 5
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState                = TURN_LEFT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUEntAsh_TRNL
                AnimationMode        = LOOP
        AnimationBlendTime = 5
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

  AnimationState        = FIRING_OR_PREATTACK_A
      Animation = Punch
        AnimationName = RUEntAsh_ATKA
        AnimationMode = ONCE
        AnimationBlendTime = 5
        UseWeaponTiming = Yes
      End
      Animation = FrontKick
        AnimationName = RUEntAsh_ATKD
        AnimationMode = ONCE
        AnimationBlendTime = 5
        UseWeaponTiming = Yes
      End
      Animation = KirkPunch
        AnimationName = RUEntAsh_ATKE
        AnimationMode = ONCE
        AnimationBlendTime = 5
        UseWeaponTiming = Yes
      End
      BeginScript
        if CurDrawableIsCurrentTargetKindof("MONSTER") then
          if GetClientRandomNumberReal(0,1) > 0.66 then
            return ("FrontKick")
          else
            return ("KirkPunch")
          end
        else



            return ("Punch")

        end
      EndScript
            ParticleSysBone     = BAT_SPINE_1 TreeBeardAttackLeavesFir
        End

    AnimationState = FIRING_OR_PREATTACK_B
      Animation = FrontKickOnBuilding
        AnimationName = RUEntAsh_ATKD
        AnimationMode = ONCE
        AnimationBlendTime = 5
        UseWeaponTiming = Yes
      End
      Animation = KirkPunchOnBuilding
        AnimationName = RUEntAsh_ATKE
        AnimationMode = ONCE
        AnimationBlendTime = 5
        UseWeaponTiming = Yes
      End
            ParticleSysBone     = BAT_SPINE_1 TreeBeardAttackLeavesFir
    End



        AnimationState = MOVING PANICKING
            Animation = Jump
                AnimationName                = RUEntAsh_MFDA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.5 0.5
                AnimationBlendTime            = 5
                Distance                    = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
            FXEvent    = Frame:4 Name:FX_AshEntLeftFootStep
            FXEvent    = Frame:18 Name:FX_AshEntRightFootStep
        End

        AnimationState                = MOVING
            StateName                = Moving
            Animation                = Walk
                AnimationName        = RUEntAsh_WLKA
                Distance            = 48.0
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
      FXEvent = Frame:0 Name:FX_AshEntLeftFootStep
      FXEvent = Frame:13 Name:FX_AshEntRightFootStep
      FXEvent = Frame:26 Name:FX_AshEntLeftFootStep
      FXEvent = Frame:43 Name:FX_AshEntRightFootStep
        End

    AnimationState = HIT_REACTION HIT_LEVEL_1
      Animation = Hit_Level_1_a
        AnimationName = RUEntAsh_IDLA
        AnimationMode = ONCE
      End
    End

        AnimationState                        = WEAPONSET_TOGGLE_1
            StateName                        = Idle
            Animation
                AnimationName                = RUEntAsh_IDLA
                AnimationMode                = LOOP
        AnimationBlendTime = 5
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_JustBuilt" then CurDrawableShowSubObjectPermanently("ROCK") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25R") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
            EndScript
            ParticleSysBone     = BAT_SPINE_1 TreeBeardIdleLeaves FollowBone: No
        End




    TransitionState = TRANS_Accelerate
            Animation = Transition
                AnimationName = RUEntAsh_ACLA
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.75 0.75
                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop75
            Animation = Transition
                AnimationName = RUEntAsh_DCLC
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.66 0.66
                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop50
            Animation = Transition
                AnimationName = RUEntAsh_DCLB
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.66 0.66
                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop25
            Animation = Transition
                AnimationName = RUEntAsh_DCLD
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.66 0.66
                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop00
            Animation = Transition
                AnimationName = RUEntAsh_DCLA
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.66 0.66
                AnimationBlendTime = 5
            End
        End




    TransitionState = TRANS_AccelerateR
            Animation = Transition
                AnimationName = RUEntAsh_ACLA
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.75 0.75
                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop75R
            Animation = Transition
                AnimationName = RUEntAsh_DCLC
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.66 0.66
                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop50R
            Animation = Transition
                AnimationName = RUEntAsh_DCLB
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.66 0.66
                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop25R
            Animation = Transition
                AnimationName = RUEntAsh_DCLD
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.66 0.66
                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop00R
            Animation = Transition
                AnimationName = RUEntAsh_DCLA
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.66 0.66
                AnimationBlendTime = 5
            End
        End




    TransitionState = TRANS_AccelerateENR
            Animation = Transition
                AnimationName = RUEntAsh_ACLA
                AnimationMode = ONCE

                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop75ENR
            Animation = Transition
                AnimationName = RUEntAsh_DCLC
                AnimationMode = ONCE

                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop50ENR
            Animation = Transition
                AnimationName = RUEntAsh_DCLB
                AnimationMode = ONCE

                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop25ENR
            Animation = Transition
                AnimationName = RUEntAsh_DCLD
                AnimationMode = ONCE

                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop00ENR
            Animation = Transition
                AnimationName = RUEntAsh_DCLA
                AnimationMode = ONCE
                AnimationBlendTime = 5
            End
        End
  End


    Side                = Lothlorien
    Scale 		= 1.30
    IsTrainable         = Yes
    EditorSorting       = UNIT

    ThreatLevel            = ENT_INFANTRY_THREAT_LEVEL
    ThreatBreakdown RohanEntBase_DetailedThreat
        AIKindOf = SIEGEWEAPON
    End

    ThingClass            = MEDIUM_MONSTER
    ShockwaveResistance   = SHOCKWAVE_RESISTANCE_IMMUNE
    TransportSlotCount    = TRANSPORTSLOTCOUNT_MONSTER

    WeaponSet
        Conditions          = None
        Weapon              = PRIMARY      EntAshPunch
        Weapon              = SECONDARY    EntAshBuildingTeardown
        OnlyAgainst         = SECONDARY    STRUCTURE BLOCKING_GATE
    End


    ArmorSet
        Conditions      = None
        Armor           = EntArmor
        DamageFX        = EntDamageFX
    End

    ArmorSet
        Conditions      = PLAYER_UPGRADE
        Armor           = EntArmorUpgrade
        DamageFX        = EntDamageFX
    End

    BuildFadeInOnCreateTime = 20

    VisionRange             = VISION_ENT
    ShroudClearingRange     = SHROUD_CLEAR_ENT

    MaxVisionBonusPercent   = 300%
    VisionBonusTestRadius   = 200
    VisionBonusPercentPerFoot = 1.0%

    DisplayName              = OBJECT:RohanEntAsh
    CrushWeapon              = EntCrush
    MinCrushVelocityPercent = MINCRUSHVELOCITYPERCENT_TROLLS
    CrushDecelerationPercent = CRUSHDECELERATIONPERCENT_TROLLS
    CrusherLevel             = 1
    UseCrushAttack           = No
    CommandSet               = ImladrisEntAshCommandSet
    CommandPoints            = 30


    AutoResolveUnitType               = AutoResolveUnit_Monster
    AutoResolveCombatChain            = AutoResolve_MonsterCombatChain

    AutoResolveBody         = AutoResolve_ElvenEntBody

    AutoResolveArmor
        Armor = AutoResolve_ElvenEntArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_ElvenEntWeapon
    End



    VoiceAttack                = EntVoiceSelect
    VoiceAttackCharge          = EntVoiceSelect
    VoiceAttackMachine         = EntVoiceSelect
    VoiceAttackStructure       = EntVoiceSelect
    VoiceCreated               = EntVoiceSelect
    VoiceFullyCreated          = EntVoiceSelect
    VoiceGuard                 = EntVoiceSelect
    VoiceMove                  = EntVoiceSelect
    VoicePriority              = 50
    VoiceSelect                = EntVoiceSelect
    VoiceSelectBattle          = EntVoiceSelect

    SoundMoveLoop              = EntVoxMoveLoop
    SoundImpact                = ImpactHorse

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Ent Unit Infantry
        UnitWeight = 2
    End

  ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
    MaxUpdateRangeCap = 800
        AnimationSound = Sound:BuildingEntMootCouncil                Animation:RUEntAsh_SKL.RUEntAsh_MOTA    Frames:1
        AnimationSound = Sound:EntFootStep            ExcludedMC:WADING    Animation:RUEntAsh_SKL.RUEntAsh_MOTA    Frames:225 253

    AnimationSound = Sound:EntFootStep ExcludedMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_ACLA Frames:9
    AnimationSound = Sound:ImpactEntGenericPunch Animation:RUEntAsh_SKL.RUEntAsh_ATKA Frames:20
    AnimationSound = Sound:EntFootStep ExcludedMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_ATKC Frames:29
    AnimationSound = Sound:ImpactEntGenericKick Animation:RUEntAsh_SKL.RUEntAsh_ATKD Frames:35
    AnimationSound = Sound:EntFootStep ExcludedMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_ATKD Frames:72
    AnimationSound = Sound:EntFootStep ExcludedMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_ATKE Frames:17 81
    AnimationSound = Sound:ImpactEntGenericPunch Animation:RUEntAsh_SKL.RUEntAsh_ATKE Frames:31

    AnimationSound = Sound:EntFootStep ExcludedMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_DCLA Frames:13 30
    AnimationSound = Sound:EntFootStep ExcludedMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_DCLB Frames:22 44
    AnimationSound = Sound:EntFootStep ExcludedMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_DCLC Frames:10 30
    AnimationSound = Sound:EntFootStep ExcludedMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_DCLD Frames:13 26


    AnimationSound = Sound:TrollTreeSwingLight Animation:RUEntAsh_SKL.RUEntAsh_GRB1 Frames:16
    AnimationSound = Sound:EntGrabBuildingChunk Animation:RUEntAsh_SKL.RUEntAsh_GRB1 Frames:27
    AnimationSound = Sound:EntFootStep ExcludedMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_GRB1 Frames:27
    AnimationSound = Sound:EntVoxEfforts Animation:RUEntAsh_SKL.RUEntAsh_GRB1 Frames:28
    AnimationSound = Sound:EntGrabRock Animation:RUEntAsh_SKL.RUEntAsh_GRB2 Frames:3
    AnimationSound = Sound:EntFootStep ExcludedMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_GRB2 Frames:52
    AnimationSound = Sound:TrollTreeSwingLight Animation:RUEntAsh_SKL.RUEntAsh_GRC1 Frames:16
    AnimationSound = Sound:EntGrabRock Animation:RUEntAsh_SKL.RUEntAsh_GRC1 Frames:1
    AnimationSound = Sound:EntVoxEfforts Animation:RUEntAsh_SKL.RUEntAsh_GRC1 Frames:20
    AnimationSound = Sound:EntFootStep ExcludedMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_GRC1 Frames:21
    AnimationSound = Sound:EntFootStep ExcludedMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_GRC2 Frames:26

    AnimationSound = Sound:EntFootStep ExcludedMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_GTPA Frames:17 37 74 91
    AnimationSound = Sound:EntDieFall Animation:RUEntAsh_SKL.RUEntAsh_LNDA Frames:63
    AnimationSound = Sound:EntBodyfall Animation:RUEntAsh_SKL.RUEntAsh_LNDA Frames:84
    AnimationSound = Sound:EntDieFall Animation:RUEntAsh_SKL.RUEntAsh_DIEA Frames:120

    AnimationSound = Sound:EntRunStep ExcludedMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_MFDA Frames:4 17
    AnimationSound = Sound:EntRunStep ExcludedMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_RCTA Frames:133 193 254
    AnimationSound = Sound:EntSeeFirePart1 Animation:RUEntAsh_SKL.RUEntAsh_RCTA Frames:94
    AnimationSound = Sound:EntSeeFirePart2 Animation:RUEntAsh_SKL.RUEntAsh_RCTA Frames:107
    AnimationSound = Sound:TrollTreeSwing Animation:RUEntAsh_SKL.RUEntAsh_RCTA Frames:140
    AnimationSound = Sound:EntPanic Animation:RUEntAsh_SKL.RUEntAsh_RCTA Frames:128
    AnimationSound = Sound:EntSplashWater Animation:RUEntAsh_SKL.RUEntAsh_SPLA Frames:0

    AnimationSound = Sound:EntFootStep ExcludedMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_THRB Frames:20 62 101
    AnimationSound = Sound:TrollTreeSwing Animation:RUEntAsh_SKL.RUEntAsh_THRB Frames:50
    AnimationSound = Sound:EntRunStep ExcludedMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_TRNL Frames:12 27
    AnimationSound = Sound:EntRunStep ExcludedMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_TRNR Frames:12 27
    AnimationSound = Sound:EntFootStep ExcludedMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_WLKA Frames:40 80
    AnimationSound = Sound:EntFootStep ExcludedMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_WLKC Frames:26 50
    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_ACLA Frames:9

    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_ATKC Frames:29
    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_ATKD Frames:72
    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_ATKE Frames:17 81

    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_DCLA Frames:13 30
    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_DCLB Frames:22 44
    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_DCLC Frames:10 30
    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_DCLD Frames:13 26
    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_GRB1 Frames:27
    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_GRB2 Frames:52
    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_GRC1 Frames:21
    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_GRC2 Frames:26
    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_GTPA Frames:17 37 74 91
    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_MFDA Frames:4 17
    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_MOTA Frames:228 258
    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_RCTA Frames:133 193 254
    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_THRB Frames:20 62 101
    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_TRNL Frames:12 27
    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_TRNR Frames:12 27
    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_WLKA Frames:40 80
    AnimationSound = Sound:EntFootstepWater RequiredMC:WADING Animation:RUEntAsh_SKL.RUEntAsh_WLKC Frames:26 50
  End



    RadarPriority = UNIT
    KindOf 	  = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_INFANTRY CAN_ATTACK_WALLS SCARY BIG_MONSTER HEAVY_MELEE_HITTER ARMY_SUMMARY SIEGEENGINE

    BuildCost 	= 900
    BuildTime 	= ELITE_BUILDTIME


    Behavior = FlammableUpdate FlammableModuleTag_15
        AflameDuration              = 0
        AflameDamageDelay           = 500
        AflameDamageAmount          = 30
        FlameDamageLimit            = 130
        FlameDamageExpiration       = 10000
        SetBurnedStatus             = Yes
        SwapModelWhenAflame         = Yes
        SwapModelWhenQuenched       = Yes
        RunToWater                  = Yes
        RunToWaterDepth             = 0
        RunToWaterSearchRadius      = 10000
        RunToWaterSearchIncrement   = 50
        PanicLocomotorWhileAflame   = Yes
        CustomAnimAndDuration       = AnimState:USER_3 AnimTime:4800
        FireFXList                  = FX:FX_FireStartEnt
    End

    Behavior = EntEnragedUpdate EnragedBehaviorModuleTag
        HatedObjectFilter     = NONE +LumberMill +MordorLumberMill +IsengardLumberMill +WildLaborer +MordorWorker
        FriendlyDeadFilter    = NONE +ImladrisEntFir +ImladrisEntBirch +ImladrisEntAsh +ImladrisEntOak +ImladrisTreeBerd +FangornFlinkbaum
        EnragedTime           = 1500000
        TimeUntilCanRageAgain = 0
        EnragedTransitionTime = 4800
    End

    Body = ActiveBody ModuleTag_02
        CheerRadius             = EMOTION_CHEER_RADIUS
        MaxHealth               = 3000
        BurningDeathBehavior    = Yes
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Artillery
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        AILuaEventsList            = EntFunctions
        BurningDeathTime           = BURNINGDEATH_DURATION_ENT
    End

    Behavior = AimWeaponBehavior AimWeaponModuleTag
        AimNearDistance = 60.0
    End

    Behavior = FireWeaponWhenDeadBehavior FireDeadTag
        RequiredStatus    = DEATH_1
        StartsActive      = Yes
        DelayTime         = 2300
        DeathWeapon       = RohanEntDeath
        WeaponOffset      = X:-48 Y:0 Z:0
    End

    LocomotorSet
        Locomotor = RohanTreeBeardLocomotor
        Condition = SET_NORMAL
        Speed     = 45
    End

    LocomotorSet
        Locomotor = RohanTreeBeardLocomotor
        Condition = SET_ENRAGED
        Speed     = 62
    End

    LocomotorSet
        Locomotor = RohanTreeBeardFastTurnLocomotor
        Condition = SET_PANIC
        Speed      = 80
    End

    LocomotorSet
        Locomotor = BurningDeathLocomotorCavalry
        Condition = SET_BURNINGDEATH
        Speed      = BURNINGDEATH_WANDERSPEED_CAVALRY
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End

    Behavior = SlowDeathBehavior ModuleTag_50
        DeathTypes = ALL -KNOCKBACK -FADED
        DestructionDelay = 20000
        SinkDelay = 5000
        SinkRate = 0.8
        Sound = INITIAL EntDie
        DeathFlags            = DEATH_1
    End

    Behavior = SlowDeathBehavior ModuleTag_52

        DeathTypes = NONE +KNOCKBACK
        DestructionDelay = 20000
        SinkDelay = 5000
        SinkRate = 0.8
        DeathFlags            = DEATH_1
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes            = NONE +FADED
        SinkRate            = 0.1
        FadeTime            = 9500
        DestructionDelay    = 10000
        DeathFlags            = DEATH_2
        FX                    = INITIAL   FX_UnSummonEntAllies
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End

     Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
         HitReactionLifeTimer1 = 2500
        HitReactionThreshold1 = 50.0
     End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion    = Terror_Base
    End


    Behavior = ProductionUpdate ModuleTag_UpgradeProducer
        GiveNoXP = Yes
    End


    Behavior = InvisibilityUpdate ModuleTag_Camouflage
        InvisibilityNugget
        InvisibilityType = CAMOUFLAGE
        ForbiddenConditions = AWAY_FROM_TREES MOVING TAKING_DAMAGE FIRING_ANY USING_ABILITY
        DetectionRange = CAMOUFLAGE_RADIUS
        Options = ALLOW_NEAR_TREES
    End
        UnitSpecificSoundNameToUseAsVoiceMoveToStealthyArea = VoiceMoveToTrees
        UnitSpecificSoundNameToUseAsVoiceEnterStateMoveToStealthyArea = VoiceEnterStateMoveToTrees
        StartsActive = Yes
        UpdatePeriod = 2000
    End


    Behavior = SpecialPowerModule ModuleTag_StompStarter
        SpecialPowerTemplate       = SpecialAbilityWildMountainGiantStomp
        UpdateModuleStartsAttack   = Yes
        StartsPaused               = No
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_StompWeaponFireUpdate
        SpecialPowerTemplate       = SpecialAbilityWildMountainGiantStomp
        WhichSpecialWeapon         = 2
        SkipContinue               = Yes
        UnpackTime                 = 1000
        PackTime                   = 2000
        FreezeAfterTriggerDuration = 2000
        AwardXPForTriggering       = 0
        StartAbilityRange          = 25
        SpecialWeapon              = EntAshStomp
    End






    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Geometry             = CYLINDER
    GeometryMajorRadius  = 25
    GeometryHeight       = 70.0
    GeometryIsSmall      = No
    Scale 		 = 1.30
    Shadow 		 = SHADOW_VOLUME_NON_SELF_2
    ShadowSizeX 	 = 36
End

ChildObject ImladrisEntAsh_Summoned ImladrisEntAsh

    Draw = W3DScriptedModelDraw ModuleTag_01

        StaticModelLODMode = Yes
        WadingParticleSys = EntRipples
        WadingParticleSys = EntSplash

        OkToChangeModelColor = Yes

        ExtraPublicBone = B_POINT1R
        ExtraPublicBone = PASSENGER
        ExtraPublicBone = BAT_PELVIS
        ExtraPublicBone = NDEX2R01
        ExtraPublicBone = IMPACT
        ExtraPublicBone = ROCK

        DefaultModelConditionState
            Model            = RUEntAsh_SKN
            Skeleton         = RUEntAsh_SKL
            WeaponLaunchBone = PRIMARY NDEX2R
            WeaponLaunchBone = SECONDARY BAT_HAND_R
            ParticleSysBone  = BAT_SPINE_1 TreeBeardIdleLeaves FollowBone:No
        End

        ModelConditionState  = WADING AFLAME
            Model            = RUEntAshD_SKN
            Skeleton         = RUEntAsh_SKL
            WeaponLaunchBone = PRIMARY NDEX2R
            WeaponLaunchBone = SECONDARY BAT_HAND_R
            ParticleSysBone  = BAT_HEAD TreebeardSteam FollowBone:Yes
            ParticleSysBone  = BAT_SPINE_1 TreebeardSteam FollowBone:Yes
            ParticleSysBone  = BAT_PELVIS TreebeardSteam1 FollowBone:Yes
            ParticleSysBone  = BAT_CALFR TreebeardSteam FollowBone:Yes
            ParticleSysBone  = NDEX_2_L TrBrdWaterDrips FollowBone:Yes
            ParticleSysBone  = NDEX2R TrBrdWaterDrips FollowBone:Yes
            ParticleSysBone  = THUMB_2_L TrBrdWaterDrips FollowBone:Yes
            ParticleSysBone  = THUMB_2_R TrBrdWaterDrips FollowBone:Yes
            ParticleSysBone  = NONE TrBrdWaterRipples FollowBone:No
            ParticleSysBone  = NONE TrBrdWaterRipples FollowBone:No
            ParticleSysBone  = BAT_SPINE_1 TrBrdWaterSplash2 FollowBone:Yes
            ParticleSysBone  = BAT_HAND_R TrBrdWaterSplash2 FollowBone:Yes
            ParticleSysBone  = BAT_HAND_L TrBrdWaterSplash2 FollowBone:Yes
            ParticleSysBone  = BAT_SPINE_1 TrBrdWaterSplash3 FollowBone:Yes
            ParticleSysBone  = BAT_SPINE_1 TrBrdWaterSplash3 FollowBone:Yes
            ParticleSysBone  = BAT_SPINE_1 TrBrdWaterSplash4 FollowBone:Yes
        End

        ModelConditionState  = AFLAME BURNED
            Model            = RUEntAshD_SKN
            Skeleton         = RUEntAsh_SKL
            WeaponLaunchBone = PRIMARY NDEX2R
            WeaponLaunchBone = SECONDARY BAT_HAND_R
            ParticleSysBone  = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HAND_R TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HAND_L TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
        End

        ModelConditionState  = AFLAME
            Model            = RUEntAsh_SKN
            Skeleton         = RUEntAsh_SKL
            WeaponLaunchBone = PRIMARY NDEX2R
            WeaponLaunchBone = SECONDARY BAT_HAND_R
            ParticleSysBone  = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HAND_R TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HAND_L TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
        End

        ModelConditionState  = BURNED
            Model            = RUEntAshD_SKN
            Skeleton         = RUEntAsh_SKL
            WeaponLaunchBone = PRIMARY NDEX2R
            WeaponLaunchBone = SECONDARY BAT_HAND_R
        End

        ModelConditionState = BURNT_MODEL DYING
            Model            = RUEntAshD_SKN
            Skeleton         = RUEntAsh_SKL
            WeaponLaunchBone = PRIMARY NDEX2R
            WeaponLaunchBone = SECONDARY BAT_HAND_R
        End


        IdleAnimationState
            Animation = IDLA
                AnimationName = RUEntAsh_IDLA
                AnimationBlendTime  = 5
            End
            StateName = Idle
            BeginScript

                Prev = CurDrawablePrevAnimationState()
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
                if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
            ParticleSysBone     = BAT_SPINE_1 TreeBeardIdleLeaves FollowBone: No
        End




        AnimationState        = DYING BURNINGDEATH
            Animation
                AnimationName     = RUEntAsh_DIEA
                AnimationMode      = ONCE
                AnimationBlendTime = 10
            End
        End

    AnimationState        = BURNINGDEATH
            Animation
                AnimationName     = RUEntAsh_MFDA
                AnimationMode      = LOOP
                Distance            = 100
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
        End

    AnimationState = DYING DEATH_2
      Animation = Die
        AnimationName = RUEntAsh_MOTA
        AnimationMode = ONCE_BACKWARDS
        AnimationBlendTime = 5
      End
      Flags = START_FRAME_LAST
    End

        AnimationState        = AFLAME DYING SPLATTED
            Animation           = DieSplat
                AnimationName     = RUEntAsh_LNDA
                AnimationMode      = ONCE
            End
      ParticleSysBone = BAT_SPINE_1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = AFLAME DYING
            Animation           = Die
                AnimationName     = RUEntAsh_DIEA
                AnimationMode      = ONCE
        AnimationBlendTime = 5
            End
            ParticleSysBone = BAT_SPINE_1 AshSplatDust_SEE FollowBone:Yes
        End

        AnimationState        = DYING SPLATTED
            Animation           = DieSplat
                AnimationName     = RUEntAsh_LNDA
                AnimationMode      = ONCE
            End
                ParticleSysBone = BAT_SPINE_1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = DYING
            Animation           = Die
                AnimationName     = RUEntAsh_DIEA
                AnimationMode      = ONCE
                AnimationBlendTime = 5

            End
            ParticleSysBone = BAT_SPINE_1 AshSplatDust_SEE FollowBone:Yes
        End




        AnimationState   = JUST_BUILT
            StateName        = STATE_JustBuilt
            Animation = Sprout
                AnimationName = RUEntAsh_MOTA
                AnimationMode = ONCE

                AnimationSpeedFactorRange = 0.5 0.5
            End



        End

        AnimationState        = PREPARING
            StateName            = STATE_Debate
            Animation           = Debate
                AnimationName     = RUEntAsh_IDLA
                AnimationMode      = LOOP
                AnimationBlendTime = 30
                AnimationSpeedFactorRange = 0.8 1.1
            End
            Flags               = RANDOMSTART
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
        End

        TransitionState   = TRANS_Sprout
            Animation = Sprout
                AnimationName = RUEntAsh_MOTA
                AnimationMode = ONCE
                AnimationBlendTime = 0
        AnimationSpeedFactorRange = 0.5 0.5
            End
        End




        AnimationState        = AFLAME STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = RUEntAsh_FLYA
                AnimationMode      = LOOP
        AnimationBlendTime = 5
            End
            Flags               = RANDOMSTART
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState        = AFLAME STUNNED
            Animation           = Stun
                AnimationName     = RUEntAsh_LNDA
                AnimationMode      = ONCE
        AnimationBlendTime = 5
            End
            ParticleSysBone = BAT_SPINE_1 TreebeardSplatDust1 FollowBone:Yes
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState        = AFLAME STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName     = RUEntAsh_GTPA
                AnimationMode      = ONCE
            AnimationBlendTime = 5
        End
        BeginScript
            CurDrawableHideSubObjectPermanently("ROCK")
        EndScript
        End

        AnimationState        = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = RUEntAsh_FLYA
                AnimationMode      = LOOP
        AnimationBlendTime = 5
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED
            Animation           = Stun
                AnimationName     = RUEntAsh_LNDA
                AnimationMode      = ONCE
        AnimationBlendTime = 5
            End
                ParticleSysBone = BAT_SPINE_1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName     = RUEntAsh_GTPA
                AnimationMode      = ONCE
        AnimationBlendTime = 5
            End
        End




    AnimationState = USER_6
      StateName = Enraged
      Animation = RUEntAsh_RCTA
        AnimationName = RUEntAsh_RCTA
        AnimationMode = ONCE
                AnimationBlendTime = 20
      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
            FXEvent    = Frame:54 Name:FX_AshEntRightFootStep
    End

    AnimationState = INITIAL_ENRAGED
      StateName = Enraged
      Animation = RUEntAsh_RCTA
        AnimationName = RUEntAsh_RCTA
        AnimationMode = ONCE

      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
             FXEvent    = Frame:54 Name:FX_AshEntRightFootStep
   End

        AnimationState        = USER_3
            Animation           = OnFire
                AnimationName     = RUEntAsh_RCTA
                AnimationMode      = ONCE
                AnimationBlendTime = 20
            End
            FXEvent    = Frame:54 Name:FX_AshEntRightFootStep
        End

        AnimationState = SPECIAL_WEAPON_TWO
      Animation = Punt
        AnimationName = RUEntAsh_ATKC
        AnimationMode = ONCE
        AnimationBlendTime = 5

      End
            ParticleSysBone     = BAT_SPINE_1 TreeBeardAttackLeavesFir
        End





        AnimationState = MOVING FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
            Animation = RunAndFire
                AnimationName       = RUEntAsh_WLKC
                AnimationMode       = LOOP
        AnimationBlendTime = 5
            End
        End

        AnimationState        = WEAPONSET_ENRAGED TURN_LEFT
            Animation           = Walk
                AnimationName     = RUEntAsh_TRNL
                AnimationMode     = LOOP
        AnimationBlendTime = 5
                AnimationSpeedFactorRange = 1.1 1.1
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState        = WEAPONSET_ENRAGED TURN_RIGHT
            Animation           = Walk
                AnimationName     = RUEntAsh_TRNR
                AnimationMode     = LOOP
        AnimationBlendTime = 5
                AnimationSpeedFactorRange = 1.1 1.1
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState        = FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
      Animation = Punch
        AnimationName = RUEntAsh_ATKA
        AnimationMode = ONCE
        AnimationBlendTime = 5
        UseWeaponTiming = Yes
      End
      Animation = FrontKick
        AnimationName = RUEntAsh_ATKD
        AnimationMode = ONCE
        AnimationBlendTime = 5
        UseWeaponTiming = Yes
      End
      Animation = KirkPunch
        AnimationName = RUEntAsh_ATKE
        AnimationMode = ONCE
        AnimationBlendTime = 5
        UseWeaponTiming = Yes
      End
      BeginScript
        if CurDrawableIsCurrentTargetKindof("MONSTER") then
          if GetClientRandomNumberReal(0,1) > 0.66 then
            return ("FrontKick")
          else
            return ("KirkPunch")
          end
        else



            return ("Punch")

        end
      EndScript
            ParticleSysBone     = ParticleNode01 TreeBeardAttackLeavesFir
        End

    AnimationState = FIRING_OR_PREATTACK_B WEAPONSET_ENRAGED
      Animation = FrontKickOnBuilding
        AnimationName = RUEntAsh_ATKD
        AnimationMode = ONCE
        AnimationBlendTime = 5
        UseWeaponTiming = Yes
      End
      Animation = KirkPunchOnBuilding
        AnimationName = RUEntAsh_ATKE
        AnimationMode = ONCE
        AnimationBlendTime = 5
        UseWeaponTiming = Yes
      End
            ParticleSysBone     = BAT_SPINE_1 TreeBeardAttackLeavesFir
    End



        AnimationState = WEAPONSET_ENRAGED MOVING PANICKING
            Animation = Jump
                AnimationName                = RUEntAsh_MFDA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.5 0.5
                AnimationBlendTime            = 5
                Distance                    = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
            FXEvent    = Frame:4 Name:FX_AshEntLeftFootStep
            FXEvent    = Frame:18 Name:FX_AshEntRightFootStep
        End

        AnimationState        = WEAPONSET_ENRAGED AFLAME WADING
            Animation           = Splash
                AnimationName     = RUEntAsh_SPLA
                AnimationMode      = LOOP
                AnimationBlendTime  = 5
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState        = WEAPONSET_ENRAGED MOVING
            Animation           = AngryStompWalk
                AnimationName     = RUEntAsh_WLKC
                AnimationMode      = LOOP
                AnimationBlendTime  = 5
                Distance            = 50
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES
      FXEvent = Frame:0 Name:FX_AshEntLeftFootStep
      FXEvent = Frame:13 Name:FX_AshEntRightFootStep
      FXEvent = Frame:26 Name:FX_AshEntLeftFootStep
      FXEvent = Frame:43 Name:FX_AshEntRightFootStep
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_AccelerateENR") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_AccelerateENR") end
      EndScript
        End

    AnimationState = WEAPONSET_ENRAGED HIT_REACTION HIT_LEVEL_1
      Animation = Hit_Level_1_a
        AnimationName = RUEntAsh_IDLA
        AnimationMode = ONCE
      End
    End

    AnimationState = WEAPONSET_ENRAGED
      Animation = AngryIdle
                AnimationName = RUEntAsh_IDLA
        AnimationMode = LOOP
        AnimationBlendTime = 5

      End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50ENR") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25ENR") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
        if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
      ParticleSysBone     = BAT_SPINE_1 TreeBeardIdleLeaves FollowBone: No
    End




        AnimationState        = AFLAME TURN_LEFT
            Animation           = Walk
                AnimationName     = RUEntAsh_TRNL
                AnimationMode     = LOOP
        AnimationBlendTime = 5
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState        = AFLAME TURN_RIGHT
            Animation           = Walk
                AnimationName     = RUEntAsh_TRNR
                AnimationMode     = LOOP
        AnimationBlendTime = 5
            End
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
      EndScript
        End

        AnimationState        = AFLAME MOVING
            Animation           = Jump
                AnimationName     = RUEntAsh_MFDA
                AnimationMode      = LOOP
                AnimationSpeedFactorRange = 0.5 0.5
                AnimationBlendTime  = 5
                Distance            = 50
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:4 FireWhenSkipped Name:FX_AshEntLeftFootStep
            FXEvent    = Frame:18 FireWhenSkipped Name:FX_AshEntRightFootStep
      BeginScript
        CurDrawableHideSubObjectPermanently("ROCK")
                CurDrawablePlaySound("EntRunFire")
          EndScript
        End

        AnimationState        =  AFLAME WADING
            Animation           = Splash
                AnimationName     = RUEntAsh_SPLA
                AnimationMode      = LOOP
                AnimationBlendTime  = 5
            End
        BeginScript
           CurDrawableHideSubObjectPermanently("ROCK")
        EndScript
        End





        AnimationState = MOVING FIRING_OR_PREATTACK_A
            Animation = RunAndFire
                AnimationName       = RUEntAsh_WLKC
                AnimationMode       = LOOP
        AnimationBlendTime = 5
            End
        End






















        AnimationState                = TURN_RIGHT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUEntAsh_TRNR
                AnimationMode        = LOOP
        AnimationBlendTime = 5
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState                = TURN_LEFT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUEntAsh_TRNL
                AnimationMode        = LOOP
        AnimationBlendTime = 5
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

  AnimationState        = FIRING_OR_PREATTACK_A
      Animation = Punch
        AnimationName = RUEntAsh_ATKA
        AnimationMode = ONCE
        AnimationBlendTime = 5
        UseWeaponTiming = Yes
      End
      Animation = FrontKick
        AnimationName = RUEntAsh_ATKD
        AnimationMode = ONCE
        AnimationBlendTime = 5
        UseWeaponTiming = Yes
      End
      Animation = KirkPunch
        AnimationName = RUEntAsh_ATKE
        AnimationMode = ONCE
        AnimationBlendTime = 5
        UseWeaponTiming = Yes
      End
      BeginScript
        if CurDrawableIsCurrentTargetKindof("MONSTER") then
          if GetClientRandomNumberReal(0,1) > 0.66 then
            return ("FrontKick")
          else
            return ("KirkPunch")
          end
        else



            return ("Punch")

        end
      EndScript
            ParticleSysBone     = BAT_SPINE_1 TreeBeardAttackLeavesFir
        End

    AnimationState = FIRING_OR_PREATTACK_B
      Animation = FrontKickOnBuilding
        AnimationName = RUEntAsh_ATKD
        AnimationMode = ONCE
        AnimationBlendTime = 5
        UseWeaponTiming = Yes
      End
      Animation = KirkPunchOnBuilding
        AnimationName = RUEntAsh_ATKE
        AnimationMode = ONCE
        AnimationBlendTime = 5
        UseWeaponTiming = Yes
      End
            ParticleSysBone     = BAT_SPINE_1 TreeBeardAttackLeavesFir
    End



        AnimationState = MOVING PANICKING
            Animation = Jump
                AnimationName                = RUEntAsh_MFDA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.5 0.5
                AnimationBlendTime            = 5
                Distance                    = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
            FXEvent    = Frame:4 Name:FX_AshEntLeftFootStep
            FXEvent    = Frame:18 Name:FX_AshEntRightFootStep
        End

        AnimationState                = MOVING
            StateName                = Moving
            Animation                = Walk
                AnimationName        = RUEntAsh_WLKA
                Distance            = 48.0
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
      FXEvent = Frame:0 Name:FX_AshEntLeftFootStep
      FXEvent = Frame:13 Name:FX_AshEntRightFootStep
      FXEvent = Frame:26 Name:FX_AshEntLeftFootStep
      FXEvent = Frame:43 Name:FX_AshEntRightFootStep
        End

    AnimationState = HIT_REACTION HIT_LEVEL_1
      Animation = Hit_Level_1_a
        AnimationName = RUEntAsh_IDLA
        AnimationMode = ONCE
      End
    End

        AnimationState                        = WEAPONSET_TOGGLE_1
            StateName                        = Idle
            Animation
                AnimationName                = RUEntAsh_IDLA
                AnimationMode                = LOOP
        AnimationBlendTime = 5
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_JustBuilt" then CurDrawableShowSubObjectPermanently("ROCK") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25R") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
            EndScript
            ParticleSysBone     = BAT_SPINE_1 TreeBeardIdleLeaves FollowBone: No
        End




    TransitionState = TRANS_Accelerate
            Animation = Transition
                AnimationName = RUEntAsh_ACLA
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.75 0.75
                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop75
            Animation = Transition
                AnimationName = RUEntAsh_DCLC
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.66 0.66
                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop50
            Animation = Transition
                AnimationName = RUEntAsh_DCLB
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.66 0.66
                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop25
            Animation = Transition
                AnimationName = RUEntAsh_DCLD
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.66 0.66
                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop00
            Animation = Transition
                AnimationName = RUEntAsh_DCLA
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.66 0.66
                AnimationBlendTime = 5
            End
        End




    TransitionState = TRANS_AccelerateR
            Animation = Transition
                AnimationName = RUEntAsh_ACLA
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.75 0.75
                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop75R
            Animation = Transition
                AnimationName = RUEntAsh_DCLC
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.66 0.66
                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop50R
            Animation = Transition
                AnimationName = RUEntAsh_DCLB
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.66 0.66
                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop25R
            Animation = Transition
                AnimationName = RUEntAsh_DCLD
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.66 0.66
                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop00R
            Animation = Transition
                AnimationName = RUEntAsh_DCLA
                AnimationMode = ONCE
                AnimationSpeedFactorRange 0.66 0.66
                AnimationBlendTime = 5
            End
        End




    TransitionState = TRANS_AccelerateENR
            Animation = Transition
                AnimationName = RUEntAsh_ACLA
                AnimationMode = ONCE

                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop75ENR
            Animation = Transition
                AnimationName = RUEntAsh_DCLC
                AnimationMode = ONCE

                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop50ENR
            Animation = Transition
                AnimationName = RUEntAsh_DCLB
                AnimationMode = ONCE

                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop25ENR
            Animation = Transition
                AnimationName = RUEntAsh_DCLD
                AnimationMode = ONCE

                AnimationBlendTime = 5
            End
        End

        TransitionState = TRANS_Stop00ENR
            Animation = Transition
                AnimationName = RUEntAsh_DCLA
                AnimationMode = ONCE
                AnimationBlendTime = 5
            End
        End
     End

    KindOf        = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_INFANTRY CAN_ATTACK_WALLS SCARY BIG_MONSTER SUMMONED
    IsTrainable   = No
    CommandPoints = 0

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime      = CREATE_A_HERO_REINFORCEMENT_LIFETIME
        MaxLifetime      = CREATE_A_HERO_REINFORCEMENT_LIFETIME
        DeathType        = FADED
    End
    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion    = Terror_Base
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes            = NONE +FADED
        SinkRate              = 0.1
        FadeTime              = 9500
        DestructionDelay      = 10000
        DeathFlags            = DEATH_2
    End

End

ChildObject ImladrisEntAsh_Slaved ImladrisEntAsh

    KindOf = +CREEP

    VisionRange = CREEP_VISION

    Behavior = SlavedUpdate ModuleTag_Slave
        GuardMaxRange       = 300
        GuardWanderRange    = 100
        UseSlaverAsControlForEvaObjectSightedEvents = Yes
    End
End


ChildObject ImladrisEntBirch ImladrisEntFir



    ButtonImage       = HIEnt
    SelectPortrait    = UPElven_Ent

    Draw = W3DScriptedModelDraw ModuleTag_01

        StaticModelLODMode = Yes

        WadingParticleSys = EntRipples
        WadingParticleSys = EntSplash

        OkToChangeModelColor = Yes
        ExtraPublicBone = IMPACT
        ExtraPublicBone = ROCK

       DefaultModelConditionState
           Model               = RUEntBirch_SKN
           Skeleton            = RUTreeberd_SKL
           WeaponLaunchBone    = PRIMARY Firepoint
           WeaponLaunchBone    = SECONDARY Firepoint
           ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
       End

       ModelConditionState = WADING AFLAME
           Model    = RUEntBirchD_SKN
           Skeleton = RUTreeBerd_SKL
           WeaponLaunchBone = PRIMARY Firepoint
           WeaponLaunchBone = SECONDARY Firepoint
           ParticleSysBone = BAT_HEAD TreebeardSteam FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TreebeardSteam FollowBone:Yes
           ParticleSysBone = BAT_PELVIS TreebeardSteam1 FollowBone:Yes
           ParticleSysBone = BAT_CALFR TreebeardSteam FollowBone:Yes
           ParticleSysBone = B_POINT1L TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_POINT1R TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_THUMB1L TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = B_THUMB1R TrBrdWaterDrips FollowBone:Yes
           ParticleSysBone = NONE TrBrdWaterRipples FollowBone:No
           ParticleSysBone = NONE TrBrdWaterRipples FollowBone:No
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_HANDR TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_HANDL TrBrdWaterSplash2 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash3 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash3 FollowBone:Yes
           ParticleSysBone = BAT_SPINE1 TrBrdWaterSplash4 FollowBone:Yes
       End


       ModelConditionState  = AFLAME
            Model           = RUEntBirchD_SKN
            Skeleton        = RUTreeberd_SKL
            ParticleSysBone = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HANDR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone = BAT_HANDL TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
        End

        ModelConditionState  = AFLAME BURNED
            Model            = RUEntBirchD_SKN
            Skeleton         = RUTreeberd_SKL
            WeaponLaunchBone = PRIMARY Firepoint
            WeaponLaunchBone = SECONDARY Firepoint
            ParticleSysBone  = BAT_HEAD TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HEAD TreebeardSmoke FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_SPINE1 TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardEmbers FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_PELVIS TreebeardFlare FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_CALFR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HANDR TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
            ParticleSysBone  = BAT_HANDL TreebeardFire FollowBone:Yes FXTrigger:NONE Persist:SPAWN
         End

         ModelConditionState = BURNED
            Model            = RUEntBirchD_SKN
            Skeleton         = RUTreeBerd_SKL
            WeaponLaunchBone = PRIMARY Firepoint
            WeaponLaunchBone = SECONDARY Firepoint
         End

         ModelConditionState = BURNT_MODEL DYING
            Model            = RUEntBirchD_SKN
            Skeleton         = RUTreeBerd_SKL
            WeaponLaunchBone = PRIMARY Firepoint
            WeaponLaunchBone = SECONDARY Firepoint
         End


        IdleAnimationState
            StateName = Idle
            Animation = IDLA
                AnimationName = RUTreeberd_IDLA
                AnimationBlendTime  = 5
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")

                Prev = CurDrawablePrevAnimationState()
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00") return end
                if Prev == "STATE_JustBuilt" then CurDrawableSetTransitionAnimState("TRANS_Sprout") end
            EndScript
            ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End

        AnimationState = DYING BURNINGDEATH
            Animation
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
                AnimationBlendTime = 10
            End
            Animation
                AnimationName = RUTreeberd_DIE
                AnimationMode = ONCE
                AnimationBlendTime = 20
            End
        End

        AnimationState = DYING DEATH_2
            Animation = Die
                AnimationName = RUTreeberd_IDLA
                AnimationMode = ONCE
            End
        End

        AnimationState = DYING WEAPONSET_TOGGLE_1
            Animation = Die
                AnimationName = RUTreeberd_DIEB
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState = DYING
            Animation = Die
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState            = BURNINGDEATH
            Animation
                AnimationName    = RUTreeberd_MFDA
                AnimationMode    = LOOP
                Distance        = 100
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
        End


        AnimationState   = JUST_BUILT
            StateName        = STATE_JustBuilt
            Animation = Sprout
                AnimationName = RUTreeberd_MOTC
                AnimationMode = ONCE
                AnimationBlendTime = 0
                AnimationSpeedFactorRange = 0.5 0.5
            End



            FXEvent    = Frame:25 Name:FX_EntSprout
            FXEvent = Frame:25 Name:FX_EntSproutButterflies
        End



        AnimationState        = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = RUTreeberd_FLYA
                AnimationMode      = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED
            Animation           = Stun
                AnimationName     = RUTreeberd_LNDA
                AnimationMode      = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName     = RUTreeberd_GTPA
                AnimationMode      = ONCE
            End
        End



        AnimationState = AFLAME DYING SPLATTED
            Animation = DieSplat
                AnimationName = RUTreeberd_LNDA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState = AFLAME DYING
            Animation = Die
                AnimationName = RUTreeberd_DIEA
                AnimationMode = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust FollowBone:Yes
        End

        AnimationState = USER_3
            Animation = OnFire
                AnimationName = RUTreeberd_RCTD
                AnimationMode = ONCE
                AnimationBlendTime = 20
            End
            FXEvent    = Frame:54 Name:FX_EntRightFootStep
        End







        AnimationState = RELOADING_A WEAPONSET_TOGGLE_1
            Animation
                AnimationName        = RUTreeberd_GRBA
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
            FXEvent    = Frame:20    Name: FX_EntRockGrab
            FXEvent    = Frame:24    Name: FX_EntRockYank
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
        End

        AnimationState = FIRING_OR_PREATTACK_A AIM_NEAR WEAPONSET_TOGGLE_1
            Animation = CloseRock
                AnimationName        = RUTreeberd_THRC
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes

            End

            FrameForPristineBonePositions = 39
        End

        AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            Animation = FarRock
                AnimationName        = RUTreeberd_THRB
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes

            End

            FrameForPristineBonePositions = 40
        End








        AnimationState = MOVING FIRING_OR_PREATTACK_A WEAPONSET_ENRAGED
            Animation = RunAndFire
                AnimationName       = RUTreeberd_ATRB
                AnimationMode       = LOOP
            End
        End

        AnimationState = MOVING FIRING_OR_PREATTACK_A
            Animation = RunAndFire
                AnimationName       = RUTreeberd_ATRA
                AnimationMode       = LOOP
            End
        End

        AnimationState = FIRING_OR_PREATTACK_A
            Animation = Punch
                AnimationName        = RUTreeberd_ATKA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = Punt
                AnimationName        = RUTreeberd_ATKD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = FrontKick
                AnimationName        = RUTreeberd_ATKE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            Animation = KirkPunch
                AnimationName        = RUTreeberd_ATKF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5
                UseWeaponTiming        = Yes
            End
            BeginScript
                if CurDrawableIsCurrentTargetKindof("MONSTER") then
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("FrontKick")
                    else
                        return ("KirkPunch")
                    end
                else
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("Punch")
                    else
                        return ("Punt")
                    end
                end
            EndScript
        End

        AnimationState = FIRING_OR_PREATTACK_B
            Animation           = Punch
                AnimationName     = RUTreeberd_ATKA
                AnimationMode       = ONCE
                AnimationBlendTime = 5
                UseWeaponTiming        = Yes
            End
            Animation           = Punt
                AnimationName     = RUTreeberd_ATKD
                AnimationMode       = ONCE
                AnimationBlendTime = 5
                UseWeaponTiming        = Yes
            End
            Animation           = FrontKick
                AnimationName     = RUTreeberd_ATKE
                AnimationMode       = ONCE
                AnimationBlendTime = 5
                UseWeaponTiming        = Yes
            End
            Animation           = KirkPunch
                AnimationName     = RUTreeberd_ATKF
                AnimationMode       = ONCE
                AnimationBlendTime = 5
                UseWeaponTiming        = Yes
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                if CurDrawableIsCurrentTargetKindof("MONSTER") then
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("FrontKick")
                    else
                        return ("KirkPunch")
                    end
                else
                    if GetClientRandomNumberReal(0,1) > 0.50 then
                        return ("Punch")
                    else
                        return ("Punt")
                    end
                end
            EndScript
        End

        AnimationState                = INITIAL_ENRAGED
            StateName                = Enraged
            Animation                = RUTreeBerd_MADA
                AnimationName        = RUTreeBerd_MADA
                AnimationMode        = ONCE
            End
        End



        AnimationState        = WEAPONSET_ENRAGED TURN_LEFT
            Animation           = Walk
                AnimationName     = RUTreeberd_TNL2
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState        = WEAPONSET_ENRAGED TURN_RIGHT
            Animation           = Walk
                AnimationName     = RUTreeberd_TNR2
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState        = WEAPONSET_ENRAGED MOVING
            Animation           = AngryStompWalk
                AnimationName     = RUTreeberd_WLKC
                AnimationMode      = LOOP
                AnimationBlendTime  = 5
                Distance            = 50
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:26 Name:FX_EntRightFootStep
        End


        AnimationState        = AFLAME TURN_LEFT
            Animation           = Walk
                AnimationName     = RUTreeberd_TRNL
                AnimationMode     = LOOP
            End
        End

        AnimationState        = AFLAME TURN_RIGHT
            Animation           = Walk
                AnimationName     = RUTreeberd_TRNR
                AnimationMode     = LOOP
            End
        End

        AnimationState        = AFLAME MOVING
            Animation           = Jump
                AnimationName     = RUTreeberd_MFDA
                AnimationMode      = LOOP
                AnimationSpeedFactorRange = 0.5 0.5
                AnimationBlendTime  = 5
                Distance            = 50
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:4 Name:FX_EntLeftFootStep
            FXEvent    = Frame:18 Name:FX_EntRightFootStep
            BeginScript
                CurDrawablePlaySound("EntRunFire")
            EndScript
        End

        AnimationState        =  AFLAME WADING
            Animation           = Splash
                AnimationName     = RUTreeberd_SPLA
                AnimationMode      = LOOP
                AnimationBlendTime  = 5
            End
        End

        AnimationState        = AFLAME STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = RUTreeberd_FLYA
                AnimationMode      = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = AFLAME STUNNED
            Animation           = Stun
                AnimationName     = RUTreeberd_LNDA
                AnimationMode      = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState        = AFLAME STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName     = RUTreeberd_GTPA
                AnimationMode      = ONCE
            End
        End




        AnimationState = DYING SPLATTED
            Animation = DieSplat
                AnimationName    = RUTreeberd_LNDA
                AnimationMode    = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState = DYING SPLATTED
            Animation = DieSplat
                AnimationName    = RUTreeberd_LNDA
                AnimationMode    = ONCE
            End
            ParticleSysBone = BAT_SPINE1 TreebeardSplatDust1 FollowBone:Yes
        End

        AnimationState = PACKING GRAB_BUILDING_CHUNK
            Animation = Pack
                AnimationName        = RUTreeberd_GBB2
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
        End

        AnimationState = UNPACKING GRAB_BUILDING_CHUNK
            Animation = Pack
                AnimationName        = RUTreeberd_GBB1
                AnimationMode        = ONCE
                AnimationBlendTime    = 20
            End
            ParticleSysBone = ParticleNode01 TreeBeardAttackLeavesFir
        End

        AnimationState = PACKING
            Animation = Pack
                AnimationName    = RUTreeberd_GBA2
                AnimationMode    = ONCE
            End
        End

        AnimationState = UNPACKING
            Animation = Pack
                AnimationName    = RUTreeberd_GBA1
                AnimationMode    = ONCE
            End
        End



        AnimationState                = TURN_RIGHT WEAPONSET_TOGGLE_1
            StateName                = Turn
            Animation
                AnimationName        = RUTreeberd_TNR2
                AnimationMode        = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState                = TURN_LEFT WEAPONSET_TOGGLE_1
            StateName                = Turn
            Animation
                AnimationName        = RUTreeberd_TNL2
                AnimationMode        = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
        End

        AnimationState                = MOVING WEAPONSET_TOGGLE_1
            StateName                = Moving
            Animation
                AnimationName        = RUTreeberd_WLKB
                Distance            = 50
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_AccelerateR") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:39 Name:FX_EntRightFootStep
            FXEvent    = Frame:79 Name:FX_EntLeftFootStep
            FXEvent    = Frame:129 Name:FX_EntRightFootStep
        End


        AnimationState                = TURN_RIGHT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUTreeberd_TRNR
                AnimationMode        = LOOP
            End
        End

        AnimationState                = TURN_LEFT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = RUTreeberd_TRNL
                AnimationMode        = LOOP
            End
        End

        AnimationState = MOVING PANICKING
            Animation = Jump
                AnimationName                = RUTreeberd_MFDA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.5 0.5
                AnimationBlendTime            = 5
                Distance                    = 50
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
            FXEvent    = Frame:4 Name:FX_EntLeftFootStep
            FXEvent    = Frame:18 Name:FX_EntRightFootStep
        End

        AnimationState                = MOVING
            StateName                = Moving
            Animation                = Walk
                AnimationName        = RUTreeberd_WLKA
                Distance            = 48.0
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
            End
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
                if Prev == "Turn" then CurDrawableSetTransitionAnimState("TRANS_Accelerate") end
            EndScript
            Flags = MAINTAIN_FRAME_ACROSS_STATES
            FXEvent    = Frame:0 Name:FX_EntLeftFootStep
            FXEvent    = Frame:39 Name:FX_EntRightFootStep
            FXEvent    = Frame:79 Name:FX_EntLeftFootStep
            FXEvent    = Frame:129 Name:FX_EntRightFootStep
        End


        AnimationState                        = HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITB
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = HIT_REACTION HIT_LEVEL_1
            Animation                        = Hit_Level_1_a
                AnimationName                = RUTreeberd_HITA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = WEAPONSET_TOGGLE_1
            StateName                        = Idle
            Animation
                AnimationName                = RUTreeberd_IDLB
                AnimationMode                = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_JustBuilt" then CurDrawableShowSubObjectPermanently("ROCK") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.875 then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.625 then CurDrawableSetTransitionAnimState("TRANS_Stop75R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.375 then CurDrawableSetTransitionAnimState("TRANS_Stop50R") return end
                if Prev == "Moving" and CurDrawablePrevAnimFraction()>0.125 then CurDrawableSetTransitionAnimState("TRANS_Stop25R") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Stop00R") return end
            EndScript
            ParticleSysBone     = BAT_SPINE1 TreeBeardIdleLeaves FollowBone: No
        End

        AnimationState                        = WEAPONSET_ENRAGED
            Animation                        = AngryIdle
                AnimationName                = RUTreeberd_IDLC
                AnimationMode                = LOOP
            End
        End



        TransitionState = TRANS_Accelerate
            Animation = Transition
                AnimationName        = RUTreeberd_ACLA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop75
            Animation = Transition
                AnimationName        = RUTreeberd_DCLC
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop50
            Animation = Transition
                AnimationName        = RUTreeberd_DCLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop25
            Animation = Transition
                AnimationName        = RUTreeberd_DCLD
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop00
            Animation = Transition
                AnimationName        = RUTreeberd_DCLA
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End



        TransitionState = TRANS_AccelerateR
            Animation = Transition
                AnimationName        = RUTreeberd_ACLB
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop75R
            Animation
                AnimationName        = RUTreeberd_DCLG
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop50R
            Animation
                AnimationName        = RUTreeberd_DCLF
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop25R
            Animation
                AnimationName        = RUTreeberd_DCLH
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End

        TransitionState = TRANS_Stop00R
            Animation
                AnimationName        = RUTreeberd_DCLE
                AnimationMode        = ONCE
                AnimationBlendTime    = 5

            End
        End
    End

    DisplayName          = OBJECT:RohanEntBirke
End

