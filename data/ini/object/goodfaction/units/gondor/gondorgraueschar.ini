Object GondorRangerGraueSchar

    SelectPortrait         = UPDunedainRanger
    ButtonImage            = HSDunedainRanger

    Draw = W3DHordeModelDraw ModuleTag_01
        OkToChangeModelColor = Yes
        StaticModelLODMode = Yes
        ParticlesAttachedToAnimatedBones = Yes


        LodOptions    = LOW
            AllowMultipleModels        =    ALLOW_MULTIPLE_MODELS_LOW
            MaxRandomTextures        =    MAX_RANDOM_TEXTURES_LOW
            MaxRandomAnimations        =    MAX_RANDOM_ANIMATIONS_LOW
            MaxAnimFrameDelta        =    MAX_ANIM_FRAME_DELTA_LOW
        End

        LodOptions    = MEDIUM
            AllowMultipleModels        =    ALLOW_MULTIPLE_MODELS_MED
            MaxRandomTextures        =    MAX_RANDOM_TEXTURES_MED
            MaxRandomAnimations        =    MAX_RANDOM_ANIMATIONS_MED
            MaxAnimFrameDelta        =    MAX_ANIM_FRAME_DELTA_MED
        End

        LodOptions    = HIGH
            AllowMultipleModels        =    ALLOW_MULTIPLE_MODELS_HIGH
            MaxRandomTextures        =    MAX_RANDOM_TEXTURES_HIGH
            MaxRandomAnimations        =    MAX_RANDOM_ANIMATIONS_HIGH
            MaxAnimFrameDelta        =    MAX_ANIM_FRAME_DELTA_HIGH
        End



        DefaultModelConditionState
            Model                        = gudunerngr_skn
            Skeleton                     = GUFaramir_SKL
            WeaponLaunchBone             = PRIMARY ARROW
            WeaponLaunchBone             = SECONDARY ARROWNOCK
        End


        ModelConditionState              = WEAPONSET_TOGGLE_1
            Model                        = gudunerngr_skn
            Skeleton                     = GUFaramir_SKL
        End





        AnimationState                    = PASSENGER WEAPONSET_TOGGLE_1
            StateName                    = STATE_Grabbed
            Animation                    = Sword
                AnimationName            = GUFaramir_FLYB
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = PASSENGER
            StateName                    = STATE_Grabbed
            Animation                    = Bow
                AnimationName            = GUFaramir_FLYA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = FREEFALL WEAPONSET_TOGGLE_1
            StateName                    = STATE_Falling
            Animation                    = Sword
                AnimationName            = GUFaramir_FLYB
                AnimationMode            = LOOP
                AnimationBlendTime        = 10
                AnimationSpeedFactorRange    = 0.24    0.24
            End
        End

        AnimationState                    = FREEFALL
            StateName                    = STATE_Falling
            Animation                    = Bow
                AnimationName            = GUFaramir_FLYA
                AnimationMode            = LOOP
                AnimationBlendTime        = 10
                AnimationSpeedFactorRange    = 0.5    0.5
            End
        End

        AnimationState                    = STUNNED_FLAILING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Fly
            Animation                   = Sword
                AnimationName           = GUFaramir_FLYB
                AnimationMode           = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES2
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "Ready_Bow" or PrevState == "Moving_Bow" or PrevState == "Bored_Bow"
                then
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "WantSword"
                elseif PrevState == "STATE_Fly"
                then
                    if PrevAnim == "Bow" or PrevAnim == "WantSword"
                    then
                        CurDrawableShowSubObject("arrow")
                        CurDrawableShowSubObject("arrownock")
                        return "WantSword"
                    end
                end

                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                return "Sword"
            EndScript
        End

        AnimationState                    = STUNNED_FLAILING
            StateName                    = STATE_Fly
            Animation
                AnimationName           = GUFaramir_FLYA
                AnimationMode           = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES2
        End

        AnimationState                    = DYING DEATH_1 SPLATTED WEAPONSET_TOGGLE_1
            StateName                    = STATE_Dead
            Animation                    = Sword
                AnimationName            = GUFaramir_LNDB
                AnimationMode            = ONCE
            End
        End

        AnimationState                    = DYING DEATH_1 SPLATTED
            StateName                    = STATE_Dead
            Animation                    = Bow
                AnimationName            = GUFaramir_LNDA
                AnimationMode            = ONCE
            End
        End



        AnimationState                    = DYING DEATH_1
            Animation                   = Sword1
                AnimationName           = GUFaramir_DIEA
                AnimationMode           = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                   = Sword2
                AnimationName           = GUFaramir_DIEB
                AnimationMode           = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                   = WantSword
                AnimationName           = GUFaramir_LNDA
                AnimationMode           = ONCE
            End

            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_Fly"
                then
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "WantSword"
                end

                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if GetClientRandomNumberReal(0,2) < 1
                then
                    return "Sword1"
                else
                    return "Sword2"
                end
            EndScript
        End




        AnimationState                       = DYING DEATH_5  WEAPONSET_TOGGLE_1
            Animation                   = Sword1
                AnimationName           = GUFaramir_DIEA
                AnimationMode           = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                   = Sword2
                AnimationName           = GUFaramir_DIEB
                AnimationMode           = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                   = WantSword
                AnimationName           = GUFaramir_LNDA
                AnimationMode           = ONCE
            End

            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_Fly"
                then
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "WantSword"
                end

                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if GetClientRandomNumberReal(0,2) < 1
                then
                    return "Sword1"
                else
                    return "Sword2"
                end
            EndScript
            EnteringStateFX                  = FX_UndeadModule
        End


        AnimationState                    = DYING DEATH_2 WEAPONSET_TOGGLE_1
            Animation                   = FadeOut
                AnimationName           = RURoyalGrd_IDLB
                AnimationMode           = LOOP
            End
        End

        AnimationState                    = DYING DEATH_1
            Animation                   = Bow1
                AnimationName           = GUFaramir_DIEC
                AnimationMode           = ONCE
            End
            Animation                   = Bow2
                AnimationName           = GUFaramir_DIEC
                AnimationMode           = ONCE
            End
            Animation                   = WantBow
                AnimationName           = GUFaramir_LNDB
                AnimationMode           = ONCE
            End
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()

                if PrevState == "STATE_Fly"
                then
                    CurDrawableHideSubObject("ArrowNock")
                    CurDrawableHideSubObject("arrow")
                    return "WantBow"
                end

                if GetClientRandomNumberReal(0,2) < 1
                then
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "Bow1"
                else
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "Bow2"
                end
            EndScript
        End


        AnimationState                       = DYING DEATH_5
            Animation                   = Bow1
                AnimationName           = GUFaramir_DIEC
                AnimationMode           = ONCE
            End
            Animation                   = Bow2
                AnimationName           = GUFaramir_DIEC
                AnimationMode           = ONCE
            End
            Animation                   = WantBow
                AnimationName           = GUFaramir_LNDB
                AnimationMode           = ONCE
            End
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()

                if PrevState == "STATE_Fly"
                then
                    CurDrawableHideSubObject("ArrowNock")
                    CurDrawableHideSubObject("arrow")
                    return "WantBow"
                end

                if GetClientRandomNumberReal(0,2) < 1
                then
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "Bow1"
                else
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "Bow2"
                end
            EndScript
            EnteringStateFX                  = FX_UndeadModule
        End


        AnimationState                    = DYING DEATH_2
            Animation                    = FadeOut
                AnimationName            = GUFaramir_IDLC
                AnimationMode            = ONCE
            End
        End


        AnimationState                    = STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
            StateName                    = STATE_GetUp
            Animation                   = Sword
                AnimationName           = GUFaramir_GTPB
                AnimationMode           = ONCE
            End
            Animation                   = WantSword
                AnimationName           = GUFaramir_GTPA
                AnimationMode           = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_GetUp" or PrevState == "STATE_Land"
                then
                    if PrevAnim == "Bow" or PrevAnim == "WantSword"
                    then
                        CurDrawableShowSubObject("arrow")
                        CurDrawableShowSubObject("arrownock")
                        return "WantSword"
                    end
                end

                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                return "Sword"
            EndScript
        End



        AnimationState                    = STUNNED_STANDING_UP
            StateName                    = STATE_GetUp
            Animation                   = Bow
                AnimationName           = GUFaramir_GTPA
                AnimationMode           = ONCE
            End
            Animation                   = WantBow
                AnimationName           = GUFaramir_GTPB
                AnimationMode           = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_GetUp" or PrevState == "STATE_Land"
                then
                    if PrevAnim == "WantBow" or PrevAnim == "Sword"
                    then
                        CurDrawableHideSubObject("ArrowNock")
                        CurDrawableHideSubObject("arrow")
                        return "WantBow"
                    end
                else
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "Bow"
                end
            EndScript
        End

        AnimationState                    = STUNNED WEAPONSET_TOGGLE_1
            StateName                    = STATE_Land
            Animation                   = Sword
                AnimationName           = GUFaramir_LNDB
                AnimationMode           = ONCE
            End
            Animation                   = WantSword
                AnimationName           = GUFaramir_LNDA
                AnimationMode           = ONCE
            End
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_Fly"
                then
                    if PrevAnim == "WantSword" or PrevAnim == "Bow"
                    then
                        CurDrawableShowSubObject("arrow")
                        CurDrawableShowSubObject("arrownock")
                        return "WantSword"
                    end
                end
                Flags                        = MAINTAIN_FRAME_ACROSS_STATES3
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                return "Sword"
            EndScript
        End

        AnimationState                    = STUNNED
            StateName                    = STATE_Land
            Animation                   = Bow
                AnimationName           = GUFaramir_LNDA
                AnimationMode           = ONCE
            End
            Animation                   = WantBow
                AnimationName           = GUFaramir_LNDB
                AnimationMode           = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES3
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_Fly"
                then
                    if PrevAnim == "WantBow" or PrevAnim == "Sword"
                    then
                        CurDrawableHideSubObject("ArrowNock")
                        CurDrawableHideSubObject("arrow")
                        return "WantBow"
                    end
                end

                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                return "Bow"
            EndScript
        End





        AnimationState                    = MOVING EMOTION_TERROR WEAPONSET_TOGGLE_1
            StateName                    = Moving_Sword
            Animation                    = Terror
                AnimationName            = GUFaramir_RUNB
                AnimationMode            = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
                Distance                = 40
            End
            Animation                    = finishrun_b
                AnimationName           = GUFaramir_RUNA
                AnimationMode           = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Animation                    = runtrans_bs
                AnimationName           = GUFaramir_STHD
                AnimationMode           = ONCE
                AnimationBlendTime        = 5
                Distance                = 70
            End
            Animation                    = runtrans_sb_finish
                AnimationName           = GUFaramir_STHC
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = runnoblend_s
                AnimationName           = GUFaramir_RUNB
                AnimationMode           = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE MAINTAIN_FRAME_ACROSS_STATES
            BeginScript
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")

                if PrevState == "Moving_Bow"
                then
                    if PrevAnim == "runtrans_sb"
                    then
                        return "runtrans_sb_finish"
                    elseif PrevAnim == "finishrun_s"
                    then
                        return "runnoblend_s"
                    else
                        return "finishrun_b"
                    end
                elseif PrevAnim == "finishrun_b" or PrevAnim == "runtrans_sb_finish"
                then
                    return "runtrans_bs"
                elseif PrevAnim == "runtrans_bs" or PrevAnim == "run_s" or PrevAnim == "runnoblend_s"
                then
                    return "runnoblend_s"
                else
                    return "Terror"
                end
            EndScript
        End
        AnimationState                    = MOVING EMOTION_TERROR
            StateName                    = Moving_Bow
            Animation                    = RunAway_3
                AnimationName            = GUFaramir_RUNA
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
                Distance                = 40
            End
            Animation                    = RunAway_2
                AnimationName            = GUFaramir_RUNA
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
                Distance                = 40
            End
            Animation                    = RunAway
                AnimationName            = GUFaramir_RUNA
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
                Distance                = 40
            End
            Animation                    = finishrun_s
                AnimationName           = GUFaramir_RUNA
                AnimationMode           = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Animation                    = runtrans_sb
                AnimationName           = GUFaramir_STHC
                AnimationMode           = ONCE
                AnimationBlendTime        = 5
                Distance                = 70
            End
            Animation                    = runtrans_bs_finish
                AnimationName           = GUFaramir_STHD
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = RunAway_noblend
                AnimationName            = GUFaramir_RUNA
                AnimationMode            = ONCE
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE MAINTAIN_FRAME_ACROSS_STATES
            BeginScript
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "Moving_Sword"
                then
                    if PrevAnim == "runtrans_bs"
                    then
                        return "runtrans_bs_finish"
                    elseif PrevAnim == "finishrun_b"
                    then
                        return "RunAway_noblend"
                    else
                        return "finishrun_s"
                    end
                elseif PrevAnim == "finishrun_s" or PrevAnim == "runtrans_bs_finish"
                then
                    return "runtrans_sb"
                elseif PrevAnim == "runtrans_sb" or PrevAnim == "run_b" or PrevAnim == "runnoblend_b"
                then
                    return "RunAway_noblend"
                else
                    Num = GetClientRandomNumberReal(0,7)
                    if Num < 1
                    then
                        return "RunAway_2"
                    elseif Num > 6
                    then
                        return "RunAway_3"
                    else
                        return "RunAway"
                    end
                end
            EndScript
        End




        AnimationState                    = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            StateName                    = Ready_Sword

            Animation                   = AttackWithSwordA
                AnimationName           = GUFaramir_ATKE
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            Animation                   = AttackWithSwordB
                AnimationName           = GUFaramir_ATKD
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            Animation                   = AttackWithSwordD
                AnimationName           = GUFaramir_ATKF
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            BeginScript
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState                    = PREATTACK_A
            Animation                    = ReadyToDrawn
                AnimationName            = GUFaramir_ATKA1
                AnimationMode            = ONCE
                AnimationBlendTime        = 20
            End

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("ArrowNock")
            EndScript
        End

        AnimationState                    = FIRING_OR_RELOADING_A
            StateName                    = STATE_Firing
            Animation                    = OneFrameOfShooting
                AnimationName            = GUFaramir_ATKA2
                AnimationMode            = ONCE
                AnimationBlendTime        = 0
                AnimationSpeedFactorRange    = 1 1.2
            End
            Flags                        = START_FRAME_FIRST
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("ArrowNock")
            EndScript
        End






        AnimationState                    = MOVING BACKING_UP WEAPONSET_TOGGLE_1
            StateName                    = STATE_BackingUp
            Animation                    = Sword
                AnimationName            = RURoyalGrd_RUNB
                AnimationMode            = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                    = WantSword
                AnimationName            = GUFaramir_RUNA
                AnimationMode            = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                if PrevState == "STATE_BackingUp"
                then
                    if PrevAnim == "Bow" or PrevAnim == "WantSword"
                    then
                        return "WantSword"
                    end
                end

                return "Sword"
            EndScript
        End
        AnimationState                    = MOVING BACKING_UP
            StateName                    = STATE_BackingUp
            Animation                    = Bow
                AnimationName            = GUFaramir_RUNA
                AnimationMode            = LOOP
            End
            Animation                    = WantBow
                AnimationName            = GUFaramir_RUNB
                AnimationMode            = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                if PrevState == "STATE_BackingUp"
                then
                    if PrevAnim == "WantBow" or PrevAnim == "Sword"
                    then
                        return "WantBow"
                    end
                end

                return "Bow"
            EndScript
        End



        AnimationState                    = MOVING WEAPONSET_TOGGLE_1
            StateName                    = Moving_Sword
            SimilarRestart                = Yes
            Animation                   = run_s
                AnimationName           = RURoyalGrd_RUNB
                AnimationMode           = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
                Distance                = 40
            End
            Animation                    = finishrun_b
                AnimationName           = GUFaramir_RUNA
                AnimationMode           = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Animation                    = runtrans_bs
                AnimationName           = GUFaramir_STHD
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = runtrans_sb_finish
                AnimationName           = GUFaramir_STHC
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = runnoblend_s
                AnimationName           = RURoyalGrd_RUNB
                AnimationMode           = LOOP
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")

                if PrevState == "Moving_Bow"
                then
                    if PrevAnim == "runtrans_sb"
                    then
                        return "runtrans_sb_finish"
                    elseif PrevAnim == "finishrun_s"
                    then
                        return "runnoblend_s"
                    else
                        return "finishrun_b"
                    end
                elseif PrevAnim == "finishrun_b" or PrevAnim == "runtrans_sb_finish" or PrevAnim == "WantSword"
                then
                    return "runtrans_bs"
                elseif PrevAnim == "runtrans_bs" or PrevAnim == "run_s" or PrevAnim == "runnoblend_s"
                then
                    return "runnoblend_s"
                else
                    return "run_s"
                end
            EndScript
        End

        AnimationState                    = MOVING
            StateName                    = Moving_Bow
            SimilarRestart                = Yes
            Animation                   = run_b
                AnimationName           = GUFaramir_RUNA
                AnimationMode           = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
                Distance                = 40
            End
            Animation                    = finishrun_s
                AnimationName           = RURoyalGrd_RUNB
                AnimationMode           = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Animation                    = runtrans_sb
                AnimationName           = GUFaramir_STHC
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = runtrans_bs_finish
                AnimationName           = GUFaramir_STHD
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = runnoblend_b
                AnimationName           = GUFaramir_RUNA
                AnimationMode           = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()

                if PrevState == "Moving_Sword"
                then
                    if PrevAnim == "runtrans_bs"
                    then
                        return "runtrans_bs_finish"
                    elseif PrevAnim == "finishrun_b"
                    then
                        return "runnoblend_b"
                    else
                        return "finishrun_s"
                    end
                elseif PrevAnim == "finishrun_s" or PrevAnim == "runtrans_bs_finish" or PrevAnim == "WantBow"
                then
                    return "runtrans_sb"
                elseif PrevAnim == "runtrans_sb" or PrevAnim == "run_b" or PrevAnim == "runnoblend_b"
                then
                    return "runnoblend_b"
                else
                    return "run_b"
                end
            EndScript
        End



        AnimationState  = COMING_OUT_OF_FACTORY
            Animation = Being_Built
                AnimationName        = GUFaramir_RUNA
                AnimationMode        = LOOP
                AnimationBlendTime    = 0
            End
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
            EndScript
        End





























        AnimationState                    = CONTINUOUS_FIRE_MEAN
            Animation                    = HangFrameWhileCoasting
                AnimationName            = GUFaramir_ATKA2
                AnimationMode            = MANUAL
                AnimationBlendTime        = 0
            End
            Flags                        = START_FRAME_LAST

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("ARROWNOCK")
                if CurDrawablePrevAnimationState() == "STATE_Firing" then CurDrawableAllowToContinue() end
            EndScript









        End

        AnimationState                    = CONTINUOUS_FIRE_SLOW
            StateName                    = Ready_Bow
            Animation                    = PutAwayArrow
                AnimationName            = GUFaramir_ATKA3
                AnimationMode            = ONCE
            End

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("ARROWNOCK")
            EndScript
        End


        AnimationState                    = EMOTION_UNCONTROLLABLY_AFRAID WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = GUFaramir_IDLA
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                    = Sword2
                AnimationName            = GUFaramir_IDLA
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                end
            EndScript
        End
        AnimationState                    = EMOTION_UNCONTROLLABLY_AFRAID
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = GUFaramir_IDLC
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                    = Bow2
                AnimationName            = GUFaramir_IDLC
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
                AnimationBlendTime        = 15
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then

                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                end
            EndScript
        End




        AnimationState                    = EMOTION_ALERT WEAPONSET_TOGGLE_1
            StateName                    = Ready_Sword

            Animation                    = Alert_1
                AnimationName            = GUFaramir_IDLA
                AnimationMode            = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
            End

            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if Prev == "Bored_Sword"        then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")            end
                if Prev == "Selected_Sword"        then CurDrawableSetTransitionAnimState("TRANS_SR_Sword")            end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                end
            EndScript
        End
        AnimationState                    = ENGAGED WEAPONSET_TOGGLE_1
            StateName                    = Ready_Sword

            Animation                    = Alert_1
                AnimationName            = GUFaramir_IDLA
                AnimationMode            = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
            End

            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if Prev == "Bored_Sword"        then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")            end
                if Prev == "Selected_Sword"        then CurDrawableSetTransitionAnimState("TRANS_SR_Sword")            end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                end
            EndScript
        End
        AnimationState                    = ATTACKING WEAPONSET_TOGGLE_1
            StateName                    = Ready_Sword

            Animation                    = Alert_1
                AnimationName            = GUFaramir_IDLA
                AnimationMode            = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
            End

            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if Prev == "Bored_Sword"        then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")            end
                if Prev == "Selected_Sword"        then CurDrawableSetTransitionAnimState("TRANS_SR_Sword")            end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                end
            EndScript
        End

        AnimationState                    = EMOTION_ALERT
            StateName                    = Ready_Bow

            Animation                    = IDLB
                AnimationName            = GUFaramir_IDLC
                AnimationMode            = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
            End

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Bored_Bow"        then CurDrawableSetTransitionAnimState("TRANS_BR_Bow")                end
                if Prev == "Selected_Bow"    then CurDrawableSetTransitionAnimState("TRANS_SR_Bow")                end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                end
            EndScript
        End
        AnimationState                    = ENGAGED
            StateName                    = Ready_Bow

            Animation                    = IDLB
                AnimationName            = GUFaramir_IDLC
                AnimationMode            = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
            End

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Bored_Bow"        then CurDrawableSetTransitionAnimState("TRANS_BR_Bow")                end
                if Prev == "Selected_Bow"    then CurDrawableSetTransitionAnimState("TRANS_SR_Bow")                end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                end
            EndScript
        End
        AnimationState                    = ATTACKING
            StateName                    = Ready_Bow

            Animation                    = IDLB
                AnimationName            = GUFaramir_IDLC
                AnimationMode            = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
            End

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Bored_Bow"        then CurDrawableSetTransitionAnimState("TRANS_BR_Bow")                end
                if Prev == "Selected_Bow"    then CurDrawableSetTransitionAnimState("TRANS_SR_Bow")                end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                end
            EndScript
        End






        AnimationState                    = EMOTION_AFRAID WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = GUFaramir_IDLA
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = GUFaramir_IDLA
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                end
            EndScript
        End
        AnimationState                    = EMOTION_AFRAID
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = GUFaramir_IDLC
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
            End
            Animation                    = Bow2
                AnimationName            = GUFaramir_IDLC
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                end
            EndScript
        End



        AnimationState                    = EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = GUFaramir_CHRC
                AnimationSpeedFactorRange = 0.8 1.2
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = GUFaramir_CHRC
                AnimationSpeedFactorRange = 0.8 1.2
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Sword")
                elseif PrevState == "Bored_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
                end
            EndScript
        End
        AnimationState                    = EMOTION_CELEBRATING
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = GUFaramir_CHRD
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                    = Bow2
                AnimationName            = GUFaramir_CHRD
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Bow")



                end
            EndScript
        End



        AnimationState                    = EMOTION_TAUNTING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = RURoyalGrd_IDLB
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                    = Sword2
                AnimationName            = RURoyalGrd_IDLB
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Sword"
                    then
                        CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Sword")
                elseif PrevState == "Bored_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
                end
            EndScript
        End
        AnimationState                    = EMOTION_TAUNTING
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow1
                AnimationName            = GUFaramir_IDLC
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                    = Bow2
                AnimationName            = GUFaramir_IDLC
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Bow")
                elseif PrevState == "Bored_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Bow")
                end
            EndScript
        End



        AnimationState                    = EMOTION_POINTING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = RURoyalGrd_IDLB
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = RURoyalGrd_IDLB
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Sword")
                elseif PrevState == "Bored_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
                end
            EndScript
        End
        AnimationState                    = EMOTION_POINTING
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = GUFaramir_IDLC
                AnimationMode            = ONCE
            End
            Animation                    = Bow2
                AnimationName            = GUFaramir_IDLC
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Bow")
                elseif PrevState == "Bored_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Bow")
                end
            EndScript
        End



        AnimationState                =    SELECTED WEAPONSET_TOGGLE_1
            StateName                =    Selected_Sword

            Animation                =    ATNA
                AnimationName        =    GUFaramir_ATNE
                AnimationMode        =    LOOP
            End

            BeginScript
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")

                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Emotion_Bow" or Prev == "STATE_Emotion_Sword" then CurDrawableAllowToContinue() end
                if Prev == "Bored_Sword"        then CurDrawableSetTransitionAnimState("TRANS_BS_Sword")        end
                if Prev == "Ready_Sword"        then CurDrawableSetTransitionAnimState("TRANS_RS_Sword")        end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Selected")
                end

            EndScript
        End


        AnimationState                =    SELECTED
            StateName               =    Selected_Bow

            Animation                =    ATNE
                AnimationName        =    GUFaramir_ATNB
                AnimationMode        =    LOOP
            End

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Emotion_Bow" or Prev == "STATE_Emotion_Sword" then CurDrawableAllowToContinue() end
                if Prev == "Bored_Bow" then CurDrawableSetTransitionAnimState("TRANS_BS_Bow")                end
                if Prev == "Ready_Bow" then CurDrawableSetTransitionAnimState("TRANS_RS_Bow")                end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Selected")
                end
            EndScript
        End




        AnimationState                        = HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
            StateName                        = Bored_Sword
            Animation                        = Hit_Level_1_a
                AnimationName                = GUFaramir_HITB
                AnimationMode                = ONCE
            End
            Animation                        = Hit_Level_1_b
                AnimationName                = GUFaramir_HITD
                AnimationMode                = ONCE
            End
        End

        AnimationState                         = HIT_REACTION HIT_LEVEL_1
            StateName                        = Bored_Bow
            Animation                         = Hit_Level_1_a
                AnimationName                = GUFaramir_HITC
                AnimationMode                 = ONCE
                AnimationSpeedFactorRange    = .9 .9
            End
        End




        AnimationState                    = WEAPONSET_TOGGLE_1
            StateName                    = Bored_Sword

            Animation                   = Idle_Sword1
                AnimationName           = GUFaramir_IDLF
                AnimationMode           = ONCE
            End
            Animation                    = IdleNoFidget
                AnimationName            = RURoyalGrd_IDLB
                AnimationMode            = ONCE
                AnimationPriority        = 20
            End
            Animation                    = IdleNoFidget2
                AnimationName            = RURoyalGrd_IDLB
                AnimationMode            = ONCE
                AnimationPriority        = 0
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")

                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "TRANS_SB_Sword" or Prev == "TRANS_RB_Sword" then return "IdleNoFidget" end
                if Prev == "Selected_Sword"        then CurDrawableSetTransitionAnimState("TRANS_SB_Sword")        end
                if Prev == "Ready_Sword"        then CurDrawableSetTransitionAnimState("TRANS_RB_Sword")        end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Selected")
                end
            EndScript
        End

        IdleAnimationState
            StateName                    = Bored_Bow

            Animation                    = IdleBowB
                AnimationName            = GUFaramir_IDLC
                AnimationMode            = ONCE
            End
            Animation                    = IdleBowD
                AnimationName            = GUFaramir_IDLC
                AnimationMode            = ONCE
            End
            Animation                    = IdleNoFidget
                AnimationName            = GUFaramir_IDLC
                AnimationMode            = ONCE
                AnimationPriority        = 20
            End
            Animation                    = IdleNoFidget2
                AnimationName            = GUFaramir_IDLC
                AnimationMode            = ONCE
                AnimationPriority        = 10
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "TRANS_SB_Bow" or Prev == "TRANS_RB_Bow" then return "IdleNoFidget" end
                if Prev == "Selected_Bow"        then CurDrawableSetTransitionAnimState("TRANS_SB_Bow")        end
                if Prev == "Ready_Bow"            then CurDrawableSetTransitionAnimState("TRANS_RB_Bow")        end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Selected")
                end
            EndScript
        End




        TransitionState                   = TRANS_BS_Bow
            Animation                   = ATND
                AnimationName             = GUFaramir_ATNC
                AnimationMode             = ONCE
                AnimationBlendTime        = 10
            End
        End

        TransitionState                   = TRANS_SR_Bow
            Animation                   = ATNE
                AnimationName             = GUFaramir_ATND
                AnimationMode             = ONCE
            End
        End

        TransitionState                   = TRANS_SB_Bow
            Animation                   = ATND
                AnimationName             = GUFaramir_ATNC
                AnimationMode             = ONCE_BACKWARDS
            End
            Flags                        = START_FRAME_LAST
        End

        TransitionState                   = TRANS_RS_Bow
            Animation                   = ATNF
                AnimationName             = GUFaramir_ATND
                AnimationMode             = ONCE_BACKWARDS
            End
            Flags                        = START_FRAME_LAST
        End

        TransitionState                   = TRANS_BR_Bow
            Animation                   = IDLB
                AnimationName             = GUFaramir_IDLC
                AnimationMode             = ONCE
                AnimationBlendTime        = 20
            End
        End

        TransitionState                   = TRANS_RB_Bow
            Animation                   = IDLD
                AnimationName             = GUFaramir_IDLC
                AnimationMode             = ONCE
                AnimationBlendTime        = 20
            End
        End



        TransitionState                   = TRANS_BS_Sword
            Animation                   = ATNA
                AnimationName             = GUFaramir_ANTD
                AnimationMode             = ONCE
            End

            Animation                   = ATNAX1
                AnimationName             = GUFaramir_ATNX1
                AnimationMode             = ONCE
            End
        End

        TransitionState                   = TRANS_SR_Sword
            Animation                   = ATNC
                AnimationName             = GUFaramir_ATNF
                AnimationMode             = ONCE
            End
        End

        TransitionState                   = TRANS_SB_Sword
            Animation                   = ATNA
                AnimationName             = GUFaramir_ANTD
                AnimationMode             = ONCE_BACKWARDS
            End
            Flags                        = START_FRAME_LAST
        End

        TransitionState                   = TRANS_RS_Sword
            Animation                   = ATNC
                AnimationName             = GUFaramir_ATNF
                AnimationMode             = ONCE_BACKWARDS
            End
            Flags                        = START_FRAME_LAST
        End

        TransitionState                   = TRANS_BR_Sword
            Animation                   = ATNS
                AnimationName             = GUFaramir_ATNE
                AnimationMode             = ONCE
                AnimationBlendTime        = 20
            End
        End

        TransitionState                   = TRANS_RB_Sword
            Animation                   = IDLG
                AnimationName             = GUFaramir_IDLF
                AnimationMode             = ONCE
                AnimationBlendTime        = 20
            End
        End




        TransitionState                   = TRANS_BowToSword_Ready
            Animation                   = DrawSwords
                AnimationName           = GUFaramir_STHA
                AnimationMode           = ONCE
            End
        End

        TransitionState                   = TRANS_SwordToBow_Ready
            Animation                   = DrawBow
                AnimationName           = GUFaramir_STHB
                AnimationMode           = ONCE
            End
        End

        TransitionState                   = TRANS_BowToSword_Selected
            Animation                   = DrawSwords
                AnimationName           = GUFaramir_STHA
                AnimationMode           = ONCE
            End
        End

        TransitionState                   = TRANS_SwordToBow_Selected
            Animation                   = DrawBow
                AnimationName           = GUFaramir_STHB
                AnimationMode           = ONCE
            End
        End

    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End


    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side            = Men
    EditorSorting        = UNIT
    ThreatLevel        = 1.0
    ThingClass        = HORDE_UNIT
    CommandPoints        = 5
    BountyValue        = 8
    TransportSlotCount    = TRANSPORTSLOTCOUNT_UNIT
    ShockwaveResistance          = 30

    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY    GondorRangerBowEdain
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions = WEAPONSET_TOGGLE_1
        Weapon = PRIMARY    GraueScharSword
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End


    ArmorSet
        Conditions      = None
        Armor           = EdainHybridInfantryArmor
        DamageFX        = NormalDamageFX
    End

    ArmorSet
        Conditions      = PLAYER_UPGRADE
        Armor           = EdainHybridInfantryHeavyArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange        = 425
    ShroudClearingRange     = 475

    VisionSide = 35%
    VisionRear = 25%

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 2.0%


    DisplayName            = OBJECT:GraueSchar
    CrushableLevel        = 0
    CrushRevengeWeapon    = RangedInfantryCrushRevenge

    CommandSet            = GondorWachterVesteCommandSet




    VoiceAttack                                = DunedainVoiceAttack
    VoiceAttackAir                            = DunedainVoiceAttack
    VoiceAttackCharge                        = DunedainVoiceAttack
    VoiceAttackMachine                        = DunedainVoiceAttack
    VoiceAttackStructure                    = DunedainVoiceAttack
    VoiceCreated                            = DunedainVoiceSalute
    VoiceFullyCreated                         = DunedainVoiceSalute
    VoiceGuard                                = DunedainVoiceMove
    VoiceMove                                = DunedainVoiceMove
    VoiceMoveToCamp                            = DunedainVoiceMove
    VoiceMoveWhileAttacking                    = DunedainVoiceMove
    VoicePriority                            = 43
    VoiceRetreatToCastle                    = DunedainVoiceRetreat
    VoiceSelect                                = DunedainVoiceSelectMS
    VoiceSelectBattle                         = DunedainVoiceSelectBattle

    VoiceEnterStateAttack                    = DunedainVoiceEnterStateAttack
    VoiceEnterStateAttackCharge                = DunedainVoiceEnterStateAttack
    VoiceEnterStateAttackMachine            = DunedainVoiceEnterStateAttack
    VoiceEnterStateAttackStructure            = DunedainVoiceEnterStateAttack
    VoiceEnterStateMove                        = DunedainVoiceEnterStateMove
    VoiceEnterStateMoveToCamp                = DunedainVoiceEnterStateMove
    VoiceEnterStateMoveWhileAttacking        = DunedainVoiceEnterStateMove
    VoiceEnterStateRetreatToCastle            = DunedainVoiceEnterStateRetreat

    SoundImpact                                = ImpactHorse

    CrowdResponseKey = GoodMen

    UnitSpecificSounds
        VoiceCreatedFromInn                    = DunedainVoiceSalute-Inn
        VoiceEnterUnitElvenTransportShip    = DunedainVoiceMoveShip
        VoiceFullyCreatedFromInn             = DunedainVoiceSalute-Inn
        VoiceGarrison                        = DunedainVoiceMoveGarrison
        VoiceInitiateCaptureBuilding        = DunedainVoiceCaptureBuilding

        VoiceMoveToTrees                    = DunedainVoiceMoveForest
        VoiceEnterStateMoveToTrees            = DunedainVoiceEnterStateMoveForest

    End

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Man Man_Male Unit Infantry Ranger
    End

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:RAISING_FLAG            Excluded:DYING ENGAGED    Sound:EmotionMenGoodCompilationBFME1and2VoxTauntSinglesLoop
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:FootstepDirtA        Animation:GUFaramir_SKL.GUFaramir_RUNA        Frames:2 12
        AnimationSound = Sound:FootstepDirtA        Animation:GUFaramir_SKL.GUFaramir_RUNB        Frames:2 12

        AnimationSound = Sound:WeaponSwitchBow        Animation:GUFaramir_SKL.GUFaramir_ATKC        Frames:18

        AnimationSound = Sound:SwordShingClean1        Animation:GUFaramir_SKL.GUFaramir_STHA        Frames:21
        AnimationSound = Sound:SwordIntoScabbard1        Animation:GUFaramir_SKL.GUFaramir_STHB        Frames:11
        AnimationSound = Sound:WeaponSwitchBow        Animation:GUFaramir_SKL.GUFaramir_STHB        Frames:28

        AnimationSound = Sound:SwordIntoScabbard1        Animation:GUFaramir_SKL.GUFaramir_STHC        Frames:2
        AnimationSound = Sound:WeaponSwitchBow        Animation:GUFaramir_SKL.GUFaramir_STHC        Frames:3
        AnimationSound = Sound:SwordShingClean1        Animation:GUFaramir_SKL.GUFaramir_STHD        Frames:6

        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:GUFaramir_SKL.GUFaramir_DIEA        Frames:88
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:GUFaramir_SKL.GUFaramir_DIEB        Frames:85
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:GUFaramir_SKL.GUFaramir_DIEC        Frames:49
        AnimationSound = Sound:BodyFallSoldier        Animation:GUFaramir_SKL.GUFaramir_LNDA        Frames:3
        AnimationSound = Sound:BodyFallSoldier        Animation:GUFaramir_SKL.GUFaramir_LNDB        Frames:2
    End



    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP ATTACK_NEEDS_LINE_OF_SIGHT ARCHER
    CamouflageDetectionMultiplier = CAMOUFLAGE_DETECTION_DISTANCE_LONG

    Body = ActiveBody ModuleTag_02
        CheerRadius       = EMOTION_CHEER_RADIUS
        MaxHealth         = 500
        MaxHealthDamaged  = 250
        BurningDeathBehavior = Yes
        BurningDeathFX       = FX_InfantryBurningFlame
    End






    Behavior = SubObjectsUpgrade FireArrows_Upgrade
          TriggeredBy        = Upgrade_FireArrows
          ShowSubObjects    = FireArowTip ArrowNock
          HideSubObjects    = arrow
    End


    Behavior = SubObjectsUpgrade FireArrows_UpgradeHide
          TriggeredBy        = Upgrade_ObjectLevel1 Upgrade_GondorFaction
          HideSubObjects     = FORGED_BLADE
    End

    Behavior = SubObjectsUpgrade ForgedBlade_Upgrade
        TriggeredBy        = Upgrade_ForgedBlades
        ShowSubObjects     = Forged_Blade
    End

    Behavior = WeaponSetUpgrade ModuleTag_WeaponSetUpgradeTag
        TriggeredBy = Upgrade_ForgedBlades
    End


    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle        = Yes ATTACK_BUILDINGS STEALTHED
        StopChaseDistance                = 562
        MoodAttackCheckRate                = 500
        HoldGroundCloseRangeDistance    = 40
        CanAttackWhileContained            = Yes
        AILuaEventsList                    =    RangerFunctions
        MinCowerTime                    =    4000
        MaxCowerTime                    =    6000
        AttackPriority                    =     AttackPriority_Archer
        BurningDeathTime                =    BURNINGDEATH_DURATION_INFANTRY
    End













    LocomotorSet
        Locomotor = HumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_FOOT_MED_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = HumanWanderLocomotor
        Condition = SET_WANDER
        Speed     = NORMAL_FOOT_MED_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = BurningDeathLocomotorInfantry
        Condition = SET_BURNINGDEATH
        Speed      = BURNINGDEATH_WANDERSPEED_INFANTRY
    End

    Behavior = DualWeaponBehavior ModuleTag_13
        SwitchWeaponOnCloseRangeDistance = 24
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes            = ALL -KNOCKBACK -FADED
        SinkDelay            = 3000
        SinkRate            = 0.40
        DestructionDelay    = 15000
        Sound                = INITIAL HumanVoiceDie
        DeathFlags            = DEATH_1
    End

    Behavior = SlowDeathBehavior ModuleTag_Undead
        DeathTypes = NONE +EXTRA_3
        SinkDelay = 0
        SinkRate = 0
        DestructionDelay = 0
        DeathFlags = DEATH_5
        Sound = INITIAL HumanVoiceDie
        Weapon = FINAL EdainDeathforUndeadModule
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes            = NONE +FADED
        FadeDelay            = 0
        FadeTime            = 5000
        DestructionDelay    = 5000
        DeathFlags            = DEATH_2
        FX                    = INITIAL FX_UnSummonElvenAllies
    End

    Behavior = SlowDeathBehavior ModuleTag_07

        DeathTypes            = NONE +KNOCKBACK
        SinkDelay            = 3000
        SinkRate            = 0.40
        DestructionDelay    = 15000
    End




    Behavior = SlowDeathBehavior ModuleTag_GrabandDrop
        DeathTypes       = NONE +EXTRA_8
        SinkDelay        = 3000
        SinkRate         = 0.60
        DestructionDelay = 10000
        DeathFlags       = DEATH_4
        ShadowWhenDead   = Yes
    End

    Behavior = FireWeaponWhenDeadBehavior ModuleTag_GrabandDropImpact
        RequiredStatus  = DEATH_4
        StartsActive    = Yes
        DelayTime       = 0
        DeathWeapon     = GrabandDropInfantryImpactWarhead
        WeaponOffset    = X:0 Y:0 Z:0
    End

    Behavior = BezierProjectileBehavior ModuleTag_BodyHitHuman
       FirstHeight               = 24
       SecondHeight              = 24
       FirstPercentIndent        = 30%
       SecondPercentIndent       = 70%
       TumbleRandomly            = Yes
       CrushStyle                = Yes
       DieOnImpact               = Yes
       BounceCount               = 1
       BounceDistance            = 40
       BounceFirstHeight         = 24
       BounceSecondHeight        = 24
       BounceFirstPercentIndent  = 20%
       BounceSecondPercentIndent = 80%
       GroundHitFX               = FX_GrabandDropInfantryGroundHit
       GroundBounceFX            = FX_GrabandDropInfantryGroundHit
    End



    Behavior = SquishCollide ModuleTag_06

    End


    Behavior = HordeMemberCollide ModuleTag_HMC

    End



    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes

    Shadow                    = SHADOW_DECAL
    ShadowSizeX                = 19
    ShadowSizeY                = 19
    ShadowTexture            = ShadowI
End



ChildObject GondorRangerGraueSchar_Summoned GondorRangerGraueSchar


    EquivalentTo                    = GondorRangerGraueSchar
    IsTrainable                     = No
    KindOf                          = +SUMMONED
    CommandPoints = 0


    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate

        MinLifetime      = 120000
        MaxLifetime      = 120000
        DeathType        = FADED
    End

      Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes          = NONE +FADED
        FadeDelay           = 0
        FadeTime            = 5000
        DestructionDelay    = 5000
        DeathFlags          = DEATH_2
        FX                  = INITIAL FX_UnSummonElvenAllies
        Sound               = INITIAL SpellGenericUnsummonFasterMS
    End

End

