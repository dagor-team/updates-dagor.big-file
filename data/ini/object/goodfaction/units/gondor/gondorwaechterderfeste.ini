


Object GondorWachterderVeste


    ButtonImage            = HSWachterderVeste
    SelectPortrait         = UPWachterderVeste

    Draw = W3DHordeModelDraw ModuleTag_01
        OkToChangeModelColor = Yes

        StaticModelLODMode = Yes
        
        ; specify options for static LODs
        LodOptions    = LOW
            AllowMultipleModels        =    ALLOW_MULTIPLE_MODELS_MED
            MaxRandomTextures        =    3
            MaxRandomAnimations        =    MAX_RANDOM_ANIMATIONS_LOW
            MaxAnimFrameDelta        =    MAX_ANIM_FRAME_DELTA_LOW
        End
        
        LodOptions    = MEDIUM
            AllowMultipleModels        =    ALLOW_MULTIPLE_MODELS_HIGH
            MaxRandomTextures        =    3
            MaxRandomAnimations        =    3
            MaxAnimFrameDelta        =    MAX_ANIM_FRAME_DELTA_MED
        End
        
        LodOptions    = HIGH
            AllowMultipleModels        =    ALLOW_MULTIPLE_MODELS_HIGH
            MaxRandomTextures        =    MAX_RANDOM_TEXTURES_HIGH
            MaxRandomAnimations        =    MAX_RANDOM_ANIMATIONS_HIGH
            MaxAnimFrameDelta        =    MAX_ANIM_FRAME_DELTA_HIGH
        End

        DefaultModelConditionState
            Model               = guosgvet_skn ;auforngu_skn
        End
        
        ModelConditionState = WEAPONSET_HERO_MODE USER_3
            ParticleSysBone = BAT_RIBS BladeMaster FollowBone:Yes
            ParticleSysBone = BAT_HEAD AragornElendill FollowBone:Yes
        End

        ModelConditionState = USER_7
            ParticleSysBone = NONE BladeMaster FollowBone:Yes
        End

        ModelConditionState = USER_3
            ParticleSysBone = BAT_HEAD AragornElendill FollowBone:Yes
        End

        TransitionState                = TRANS_boredToAttention_Elendil
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND 
                AnimationMode        = ONCE
            End
            FXEvent    = Name: FX_ElendilGlowEvent
        End
        
        TransitionState                = TRANS_attentionToBored_Elendil
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE_BACKWARDS
            End
            FXEvent                    = Name: FX_ElendilGlowEvent
            Flags                    = START_FRAME_LAST
        End

        TransitionState                = TRANS_boredToAttention
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND 
                AnimationMode        = ONCE
            End
        End
        
        TransitionState                = TRANS_attentionToBored
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE_BACKWARDS
            End
            Flags                    = START_FRAME_LAST
        End

    ; --- Idle Anims
        IdleAnimationState
            StateName                = STATE_bored
            
            Animation                = GUAragorn_IDLE        ;no_fidget
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLE
                AnimationMode        = ONCE
                AnimationPriority    = 12
            End
            
            Animation                = GUAragorn_IDLF        ;fidget
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLF
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if    Prev == "STATE_attention" or
                    Prev == "STATE_running" or
                    Prev == "OATH_BREAKERS" then CurDrawableSetTransitionAnimState("TRANS_attentionToBored") end
            EndScript
        End
        
        AnimationState            = THROWN_PROJECTILE
            Animation            = FLYA
                AnimationName    = GUAragorn_SKL.GUAragorn_FLYA
                AnimationMode    = LOOP
            End
        End
        
        AnimationState            = STUNNED_FLAILING
            Animation            = FLYA
                AnimationName    = GUAragorn_SKL.GUAragorn_FLYA
                AnimationMode    = LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
        End
        
        AnimationState             = DYING SPLATTED
            Animation         = Splatted_On_Ground
                AnimationName    = GUAragorn_SKL.GUAragorn_LNDA
                AnimationMode    = ONCE
            End
            EnteringStateFX        = FX_SoldierHitGround
        End
        
        ; --- Dying anims
        AnimationState                = DYING
            Animation                = GUAragorn_DIEA
                AnimationName        = GUAragorn_SKL.GUAragorn_DIEA
                AnimationMode        = ONCE
            End
            Animation                = GUAragorn_DIEB
                AnimationName        = GUAragorn_SKL.GUAragorn_DIEB
                AnimationMode        = ONCE
            End
        End
        
        AnimationState                        = PARALYZED
            Animation
                AnimationName                = GUAragorn_IDLE
                AnimationMode                = LOOP
            End
        End

        AnimationState                = STUNNED_STANDING_UP
            Animation                = GUAragorn_GTPB
                AnimationName        = GUAragorn_SKL.GUAragorn_GTPB
                AnimationMode        = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState            = STUNNED
            Animation            = LNDA
                AnimationName    = GUAragorn_SKL.GUAragorn_LNDA
                AnimationMode    = ONCE
            End
            EnteringStateFX        = FX_SoldierHitGround
        End    
    
    


    ; --- Attacking Anims [Weapon_A]
    
    
    
        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = GUAragorn_SKL.GUAragorn_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART  
        End
        
        AnimationState                = FIRING_OR_PREATTACK_A WEAPONSET_HERO_MODE ; Blademaster Mode
            StateName                = STATE_ready
            Animation                = ATKF
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKF
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
            FXEvent    = Frame:25 Name: FX_BladeMasterHitOrient
            FXEvent    = Frame:45 Name: FX_BladeMasterHitOrient
        End

        AnimationState                = FIRING_OR_PREATTACK_A
            StateName                = STATE_ready
            Animation                = ATKD
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKD
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
                AnimationPriority    = 3
            End
            Animation                = ATKE
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKE
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
                AnimationPriority    = 2
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End
        
        
        
        
        

    ; --- Moving Anims    
        AnimationState                = MOVING
            StateName                = STATE_running
            
            Animation                = GUAragorn_RUNB
                AnimationName        = GUAragorn_SKL.GUAragorn_RUNB
                AnimationMode        = LOOP
            End
        End

        AnimationState                = LEVELED    ; This state clears itself in 3 seconds
            Animation                = LevelUp
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKO
                AnimationMode        = ONCE
            End
        End

        AnimationState                = SPECIAL_POWER_1                            ; Aragorn shouting Elendil anim
            StateName                = STATE_ready
            Animation                = GUAragorn_ATKL
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKL
                AnimationMode        = ONCE
            End
            ParticleSysBone            = B_SWORDBONE ElendilFlare FollowBone:yes
            ParticleSysBone            = B_SWORDBONE ElendilSwordFlare FollowBone:yes
;            FXEvent    = Name: FX_ElendilGlowEvent
        End
        
        AnimationState                = USER_2
            StateName                = ATHELAS
            Animation                = ATKP
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKP
                AnimationMode        = ONCE
            End
        End
        
        AnimationState                = USER_1
            StateName                = OATH_BREAKERS
            Animation                = ATKN
                AnimationName        = GUAragorn_SKL.GUAragorn_CHRB
                AnimationMode        = ONCE
            End
        End
        
        
        
    ; --------- Click and Hit Reactions ------------

        AnimationState                = HIT_REACTION HIT_LEVEL_3
            StateName                = STATE_bored
            Animation                = Hit_Level_1_b
                AnimationName        = GUAragorn_SKL.GUAragorn_HITB
                AnimationMode        = ONCE
            End
        End
        
    ;----Emotion Animations

        AnimationState                = EMOTION_CELEBRATING
            StateName                = STATE_ready
            Animation                = CHRB
                AnimationName        = GUAragorn_SKL.GUAragorn_CHRB
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE                
        End
        
        AnimationState                = EMOTION_TAUNTING
            StateName                = STATE_ready
            Animation                = CHRB
                AnimationName        = GUAragorn_SKL.GUAragorn_CHRB
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE                
        End
        
        AnimationState                = EMOTION_ALERT
            StateName                = STATE_ready
            Animation                = IDLA
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLA
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
        End

        AnimationState                = EMOTION_MORALE_HIGH
            StateName                = STATE_ready
            Animation                = ATKN
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKN
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Animation                = ATKP
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKP
                AnimationMode        = ONCE
                AnimationPriority    = 15
            End
            Animation                = TNTC
                AnimationName        = GUAragorn_SKL.GUAragorn_TNTD
                AnimationMode        = ONCE
                AnimationPriority    = 30
            End
            Animation                = TNTD
                AnimationName        = GUAragorn_SKL.GUAragorn_TNTD
                AnimationMode        = ONCE
                AnimationPriority    = 30
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE                
        End
        
        AnimationState                = ENGAGED
            StateName                = STATE_ready
            Animation                = IDLA
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLA
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
                AnimationPriority    = 1
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = RAISING_FLAG
            StateName                = STATE_ready
            Animation                = CHRB
                AnimationName        = GUAragorn_SKL.GUAragorn_CHRB
                AnimationMode        = LOOP
            End
        End

        AnimationState                = SELECTED
            StateName                = STATE_attention
            Animation                = ATNE
                AnimationName        = GUAragorn_SKL.GUAragorn_ATNE
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
                AnimationMustCompleteBlend = yes
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_bored" then CurDrawableSetTransitionAnimState("TRANS_boredToAttention") end
            EndScript
        End
                
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side 	  = Men
    EditorSorting = UNIT
    ThreatLevel   = 1.0
    ThingClass    = HORDE_UNIT
    CommandPoints = 10
    Scale 	  = 1.02
    TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT

    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY  WachterVesteSword
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ;WeaponSet
        ;Conditions        = WEAPONSET_TOGGLE_1
        ;Weapon            = PRIMARY  WachterVesteTowerShieldGuard
        ;AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    ;End

    ArmorSet
        Conditions        = None
        Armor             = EdainVesteArmor
        DamageFX          = NormalDamageFX
    End

    VisionRange = 200
    ShroudClearingRange = 475

    VisionSide = 50%
    VisionRear = 25%

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    BountyValue = 15
    DisplayName = OBJECT:GondorWachterderVeste
    CrushableLevel = 0

    ;CrushRevengeWeapon = VesteGuardCrushRevenge
    CommandSet = GondorWachterVesteCommandSet




    VoiceAttack                       = WachterderVesteVoiceAttack
    VoiceAttackCharge                 = WachterderVesteVoiceAttack
    VoiceAttackMachine                = WachterderVesteVoiceAttackBuilding
    VoiceAttackStructure              = WachterderVesteVoiceAttackBuilding
    VoiceEnterStateAttack             = WachterderVesteVoiceAttack
    VoiceEnterStateAttackCharge       = WachterderVesteVoiceAttack
    VoiceEnterStateAttackMachine      = WachterderVesteVoiceAttackBuilding
    VoiceEnterStateAttackStructure    = WachterderVesteVoiceAttackBuilding
    VoiceCreated                      = WachterderVesteVoiceRecruit
    VoiceFullyCreated                 = WachterderVesteVoiceRecruit
    VoiceGuard                        = WachterderVesteVoiceMove
    VoiceMove                         = WachterderVesteVoiceMove
    VoiceMoveToCamp                   = WachterderVesteVoiceMove
    VoiceMoveWhileAttacking           = WachterderVesteVoiceMove
    VoicePriority                     = 70
    VoiceRetreatToCastle              = WachterderVesteVoiceMove
    VoiceSelect                       = WachterderVesteVoiceSelect
    VoiceSelectBattle                 = WachterderVesteVoiceSelect
    VoiceEnterStateMove               = WachterderVesteVoiceMove
    VoiceEnterStateMoveToCamp         = WachterderVesteVoiceMove
    VoiceEnterStateMoveWhileAttacking = WachterderVesteVoiceMove
    VoiceEnterStateRetreatToCastle    = WachterderVesteVoiceMove

    SoundImpact                       = ImpactHorse

    UnitSpecificSounds
        VoiceGarrison                    = WachterderVesteVoiceMove
        VoiceDesperateAttack             = WachterderVesteVoiceMove
        VoiceEnterUnitElvenTransportShip = WachterderVesteVoiceMove
        VoiceInitiateCaptureBuilding     = WachterderVesteVoiceMove
    End


    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:RAISING_FLAG            Excluded:DYING ENGAGED    Sound:EmotionMenGoodCompilationBFME1and2VoxTauntSinglesLoop
    End

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Man Man_Male Unit Infantry Gondor_Guard
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:FootstepDirtA              Animation:GUFaramir_SKL.GUFaramir_RUNA        Frames:2 12
        AnimationSound = Sound:FootstepDirtA              Animation:GUFaramir_SKL.GUFaramir_RUNB        Frames:2 12
        AnimationSound = Sound:FootstepDirtA              Animation:GUFaramir_SKL.RURoyalGrd_RUNB    Frames:4 12 20 27
        AnimationSound = Sound:SwordShingClean1           Animation:GUFaramir_SKL.GUFaramir_ATKC        Frames:18
        AnimationSound = Sound:SwordShingClean1           Animation:GUFaramir_SKL.GUFaramir_STHA        Frames:21
        AnimationSound = Sound:SwordIntoScabbard1         Animation:GUFaramir_SKL.GUFaramir_STHB        Frames:11
        AnimationSound = Sound:SwordShingClean1           Animation:GUFaramir_SKL.GUFaramir_STHB        Frames:28
        AnimationSound = Sound:SwordIntoScabbard1         Animation:GUFaramir_SKL.GUFaramir_STHC        Frames:2
        AnimationSound = Sound:SwordShingClean1           Animation:GUFaramir_SKL.GUFaramir_STHC        Frames:3
        AnimationSound = Sound:SwordShingClean1           Animation:GUFaramir_SKL.GUFaramir_STHD        Frames:6
        AnimationSound = Sound:BodyFallGenericNoArmor     Animation:GUFaramir_SKL.GUFaramir_DIEA        Frames:88
        AnimationSound = Sound:BodyFallGenericNoArmor     Animation:GUFaramir_SKL.GUFaramir_DIEB        Frames:85
        AnimationSound = Sound:BodyFallGenericNoArmor     Animation:GUFaramir_SKL.GUFaramir_DIEC        Frames:49
        AnimationSound = Sound:BodyFallSoldier            Animation:GUFaramir_SKL.GUFaramir_LNDA        Frames:3
        AnimationSound = Sound:BodyFallSoldier            Animation:GUFaramir_SKL.GUFaramir_LNDB        Frames:2
        AnimationSound = Sound:TauntHitShieldPitchShifted Animation:GUTwrGrd_SKL.GUTwrGrd_TNTB    Frames: 23 43
        AnimationSound = Sound:BodyFallGeneric1           Animation:GUTWRGRD_SKL.GUTWRGRD_DIEA    Frames:30 51
        AnimationSound = Sound:BodyFallGeneric1           Animation:GUTWRGRD_SKL.GUTWRGRD_DIEB    Frames:57
        AnimationSound = Sound:BodyFallGeneric1           Animation:GUTWRGRD_SKL.GUTWRGRD_DIEC    Frames:38
        AnimationSound = Sound:BodyFallSoldier            Animation:GUTWRGRD_SKL.GUTWRGRD_LNDA    Frames:4
        AnimationSound = Sound:BodyFallSoldier            Animation:GUTwrGrd_SKL.GUTwrGrd_LNDB    Frames:2
    End





    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT ATTACK_NEEDS_LINE_OF_SIGHT NOTIFY_OF_PREATTACK GRAB_AND_DROP

    Body = ActiveBody ModuleTag_02
        CheerRadius       = EMOTION_CHEER_RADIUS
        MaxHealth         = 1900
        MaxHealthDamaged  = 725
    End

    Behavior = SubObjectsUpgrade Everything_Upgrade
        TriggeredBy    = Upgrade_AllFactionUpgrade
        HideSubObjects = Forged_Blade
        UpgradeTexture = gucitadelguardnew.tga 0 gucitadelguardnew_ha.tga
    End
	
	Behavior = SubObjectsUpgrade Armor_Upgrade
        TriggeredBy        = Upgrade_HeavyArmor
        ShowSubObjects    = AS AD
        RecolorHouse    = Yes
        ExcludeSubobjects = Forged_Blade
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle         = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate                = 500
        CanAttackWhileContained            = Yes
    End

    LocomotorSet
        Locomotor = GondorTowerShieldGuardLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_FOOT_MED_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = HumanWanderLocomotor
        Condition = SET_WANDER
        Speed     = NORMAL_FOOT_MED_MEMBER_SPEED
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_DefendStructureUnpause
        SpecialPowerTemplate        = SpecialAbilityDefendStructure
        TriggeredBy                 = Upgrade_MiniHordeLvl3
    End

    Behavior = SpecialPowerModule DefendStructure_ModuleTag
        SpecialPowerTemplate        = SpecialAbilityDefendStructure
        AttributeModifier           = DefendStructureModifier
        AttributeModifierRange      = 55
        AttributeModifierAffects    = ANY +STRUCTURE ALLIES
        UpdateModuleStartsAttack    = No
        StartsPaused                = Yes
    End



    Behavior = AttributeModifierUpgrade ModuleTag_CrushDecelerateBonus
        TriggeredBy       = Upgrade_AllFactionUpgrade
        AttributeModifier = Crushed_Decelerate_Pikes
    End


    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -EXTRA_8 -FADED
        SinkDelay = 3000
        SinkRate = 0.5
        DestructionDelay = 15000
        Sound = INITIAL HumanVoiceDie
        DeathFlags = DEATH_1
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 5000
        DestructionDelay = 5000
        DeathFlags = DEATH_2
        FX = INITIAL FX_UnSummonElvenAllies
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = HordeMemberCollide ModuleTag_HMC

    End

    Behavior = SlowDeathBehavior ModuleTag_GrabandDrop
        DeathTypes       = NONE +EXTRA_8
        SinkDelay        = 3000
        SinkRate         = 0.60
        DestructionDelay = 10000
        DeathFlags       = DEATH_4
        ShadowWhenDead   = Yes
    End

    Behavior = FireWeaponWhenDeadBehavior ModuleTag_GrabandDropImpact
        RequiredStatus  = DEATH_4
        StartsActive    = Yes
        DelayTime       = 0
        DeathWeapon     = GrabandDropInfantryImpactWarhead
        WeaponOffset    = X:0 Y:0 Z:0
    End

    Behavior = BezierProjectileBehavior ModuleTag_BodyHitHuman
       FirstHeight               = 24
       SecondHeight              = 24
       FirstPercentIndent        = 30%
       SecondPercentIndent       = 70%
       TumbleRandomly            = Yes
       CrushStyle                = Yes
       DieOnImpact               = Yes
       BounceCount               = 1
       BounceDistance            = 40
       BounceFirstHeight         = 24
       BounceSecondHeight        = 24
       BounceFirstPercentIndent  = 20%
       BounceSecondPercentIndent = 80%
       GroundHitFX               = FX_GrabandDropInfantryGroundHit
       GroundBounceFX            = FX_GrabandDropInfantryGroundHit
    End

    Behavior = AttributeModifierUpgrade ModuleTag_Fearless
        TriggeredBy       = Upgrade_AllFactionUpgrade
        AttributeModifier = FearlessForever
    End

    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes
    Shadow = SHADOW_DECAL
    ShadowSizeX = 14
    ShadowSizeY = 14
    ShadowTexture = ShadowI
End

ChildObject GondorWachterderVesteBoromirRing_Summoned GondorWachterderVeste

    CommandPoints = 0
    EquivalentTo = GondorWachterderVeste

    Behavior = GrantUpgradeCreate ModuleTag_GrantMithrilMail
        UpgradeToGrant = Upgrade_ForgedBlades
    End
    Behavior = GrantUpgradeCreate ModuleTag_GrantBasicTraining
        UpgradeToGrant = Upgrade_HeavyArmor
    End
End

ChildObject GondorWachterderVeste_Summoned GondorWachterderVeste
    IsTrainable   = No
    CommandPoints = 0
    EquivalentTo  = GondorWachterderVeste
    Behavior      = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = CREATE_A_HERO_REINFORCEMENT_LIFETIME
        MaxLifetime        = CREATE_A_HERO_REINFORCEMENT_LIFETIME
        DeathType          = FADED
    End
End

ChildObject GondorWachterderVeste_Denethor GondorWachterderVeste
    EquivalentTo  = GondorWachterderVeste

    Behavior = SubObjectsUpgrade Everything_Upgrade
        TriggeredBy    = Upgrade_AllFactionUpgrade
        HideSubObjects = Forged_Blade
        UpgradeTexture = gucitadelguardnew.tga 0 gucitadelguardnew.tga
        UpgradeTexture = gucitadelguardnew_ha.tga 0 gucitadelguardnew.tga
    End
End

ChildObject GondorWachterderVesteCreep1 GondorWachterderVeste
    CrushableLevel = 1
    CommandPoints = 0
    Behavior = SlavedUpdate ModuleTag_Slave
        LeashRange                                  = 400
        GuardMaxRange                               = 0
        GuardWanderRange                            = 0
        AttackRange                                 = 400
        UseSlaverAsControlForEvaObjectSightedEvents = No
        GuardPositionOffset                         = X:10.0 Y:-2 Z:0
        DieOnMastersDeath                           = Yes
    End
    Behavior = LifetimeUpdate ModuleTag_HatchTrigger
        MinLifetime = 30000.0
        MaxLifetime = 30000.0
        DeathType   = FADED
    End
End

ChildObject GondorWachterderVesteCreep2 GondorWachterderVeste
    CrushableLevel = 1
    CommandPoints = 0
    Behavior = SlavedUpdate ModuleTag_Slave
        LeashRange                                  = 400
        GuardMaxRange                               = 0
        GuardWanderRange                            = 0
        AttackRange                                 = 400
        UseSlaverAsControlForEvaObjectSightedEvents = No
        GuardPositionOffset                         = X:0.0 Y:13 Z:0
        DieOnMastersDeath                           = Yes
    End
    Behavior = LifetimeUpdate ModuleTag_HatchTrigger
        MinLifetime = 30000.0
        MaxLifetime = 30000.0
        DeathType   = FADED
    End
End

ChildObject GondorWachterderVesteCreep3 GondorWachterderVeste
    CrushableLevel = 1
    CommandPoints = 0
    Behavior = SlavedUpdate ModuleTag_Slave
        LeashRange                                  = 400
        GuardMaxRange                               = 0
        GuardWanderRange                            = 0
        AttackRange                                 = 400
        UseSlaverAsControlForEvaObjectSightedEvents = No
        GuardPositionOffset                         = X:-3.0 Y:-10 Z:0
        DieOnMastersDeath                           = Yes
    End
    Behavior = LifetimeUpdate ModuleTag_HatchTrigger
        MinLifetime = 30000.0
        MaxLifetime = 30000.0
        DeathType   = FADED
    End
End

ChildObject GondorWachterderVesteCreep4 GondorWachterderVeste
    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy = Upgrade_AllFactionUpgrade
        GetUpgradeCommandButtonName = Command_ToggleWachterVesteWeapon
    End
    CrushableLevel = 1
    CommandPoints = 0
    Behavior = SlavedUpdate ModuleTag_Slave
        LeashRange                                  = 400
        GuardMaxRange                               = 0
        GuardWanderRange                            = 0
        AttackRange                                 = 400
        UseSlaverAsControlForEvaObjectSightedEvents = No
        GuardPositionOffset                         = X:10.0 Y:4 Z:0
        DieOnMastersDeath                           = Yes
    End
    Behavior = LifetimeUpdate ModuleTag_HatchTrigger
        MinLifetime = 30000.0
        MaxLifetime = 30000.0
        DeathType   = FADED
    End
End

ChildObject GondorWachterderVesteCreep5 GondorWachterderVeste
    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy = Upgrade_AllFactionUpgrade
        GetUpgradeCommandButtonName = Command_ToggleWachterVesteWeapon
    End
    CrushableLevel = 1
    CommandPoints = 0
    Behavior = SlavedUpdate ModuleTag_Slave
        LeashRange                                  = 400
        GuardMaxRange                               = 0
        GuardWanderRange                            = 0
        AttackRange                                 = 400
        UseSlaverAsControlForEvaObjectSightedEvents = No
        GuardPositionOffset                         = X:-10.0 Y:15 Z:0
        DieOnMastersDeath                           = Yes
    End
    Behavior = LifetimeUpdate ModuleTag_HatchTrigger
        MinLifetime = 30000.0
        MaxLifetime = 30000.0
        DeathType   = FADED
    End
End

ChildObject GondorWachterderVesteCreep6 GondorWachterderVeste
    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy = Upgrade_AllFactionUpgrade
        GetUpgradeCommandButtonName = Command_ToggleWachterVesteWeapon
    End
    CrushableLevel = 1
    CommandPoints = 0
    Behavior = SlavedUpdate ModuleTag_Slave
        LeashRange                                  = 400
        GuardMaxRange                               = 0
        GuardWanderRange                            = 0
        AttackRange                                 = 400
        UseSlaverAsControlForEvaObjectSightedEvents = No
        GuardPositionOffset                         = X:12.0 Y:3 Z:0
        DieOnMastersDeath                           = Yes
    End
    Behavior = LifetimeUpdate ModuleTag_HatchTrigger
        MinLifetime = 30000.0
        MaxLifetime = 30000.0
        DeathType   = FADED
    End
End

ChildObject GondorWachterderVesteCreep7 GondorWachterderVeste
    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy = Upgrade_AllFactionUpgrade
        GetUpgradeCommandButtonName = Command_ToggleWachterVesteWeapon
    End
    CrushableLevel = 1
    CommandPoints = 0
    Behavior = SlavedUpdate ModuleTag_Slave
        LeashRange                                  = 400
        GuardMaxRange                               = 0
        GuardWanderRange                            = 0
        AttackRange                                 = 400
        UseSlaverAsControlForEvaObjectSightedEvents = No
        GuardPositionOffset                         = X:14.0 Y:-16 Z:0
        DieOnMastersDeath                           = Yes
    End
    Behavior = LifetimeUpdate ModuleTag_HatchTrigger
        MinLifetime = 30000.0
        MaxLifetime = 30000.0
        DeathType   = FADED
    End
End

ChildObject GondorWachterderVesteCreep8 GondorWachterderVeste
    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy = Upgrade_AllFactionUpgrade
        GetUpgradeCommandButtonName = Command_ToggleWachterVesteWeapon
    End
    CrushableLevel = 1
    CommandPoints = 0
    Behavior = SlavedUpdate ModuleTag_Slave
        LeashRange                                  = 400
        GuardMaxRange                               = 0
        GuardWanderRange                            = 0
        AttackRange                                 = 400
        UseSlaverAsControlForEvaObjectSightedEvents = No
        GuardPositionOffset                         = X:-6.0 Y:-8 Z:0
        DieOnMastersDeath                           = No
    End
    Behavior = LifetimeUpdate ModuleTag_HatchTrigger
        MinLifetime = 30000.0
        MaxLifetime = 30000.0
        DeathType   = FADED
    End
End





Object GondorWachterderKompanie


    ButtonImage            = HSWachterderVeste
    SelectPortrait         = UPWachterderVeste

    Draw = W3DHordeModelDraw ModuleTag_01

        OkToChangeModelColor = Yes
        StaticModelLODMode   = Yes


        LodOptions                            = LOW
            AllowMultipleModels                = ALLOW_MULTIPLE_MODELS_LOW
            MaxRandomTextures                = MAX_RANDOM_TEXTURES_LOW
            MaxRandomAnimations                = MAX_RANDOM_ANIMATIONS_LOW
            MaxAnimFrameDelta                = MAX_ANIM_FRAME_DELTA_LOW
        End

        LodOptions                            = MEDIUM
            AllowMultipleModels                = ALLOW_MULTIPLE_MODELS_MED
            MaxRandomTextures                = MAX_RANDOM_TEXTURES_MED
            MaxRandomAnimations                = MAX_RANDOM_ANIMATIONS_MED
            MaxAnimFrameDelta                = MAX_ANIM_FRAME_DELTA_MED
        End

        LodOptions                            = HIGH
            AllowMultipleModels                = ALLOW_MULTIPLE_MODELS_HIGH
            MaxRandomTextures                = MAX_RANDOM_TEXTURES_HIGH
            MaxRandomAnimations                = MAX_RANDOM_ANIMATIONS_HIGH
            MaxAnimFrameDelta                = MAX_ANIM_FRAME_DELTA_HIGH
        End

        WadingParticleSys = WaterRipplesTrail



        DefaultModelConditionState
            Model               = gugonkom_skd
            WeaponLaunchBone    = PRIMARY arrow
        End


        ModelConditionState     = WEAPONSET_TOGGLE_1
            Model               = gugonkom_skc
        End








        AnimationState        = STUNNED_FLAILING WEAPONSET_TOGGLE_1
            StateName           = STATE_Sword
            Animation           = GUFaramir_FLYB
                AnimationName     = GUTwrGrd_SKL.GUTwrGrd_FLYA
                AnimationMode     = LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED_FLAILING
            StateName           = STATE_Bow
            Animation           = GUFaramir_FLYA
                AnimationName     = GUFaramir_SKL.GUFaramir_FLYA
                AnimationMode     = LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
            Flags               = RANDOMSTART
        End


        AnimationState        = DYING SPLATTED WEAPONSET_TOGGLE_1 DEATH_1
            StateName           = STATE_Sword
            Animation           = GUFaramir_LNDB
                AnimationName     = GUTwrGrd_SKL.GUTwrGrd_LNDA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = DYING SPLATTED DEATH_1
            StateName           = STATE_Bow
            Animation           = GUFaramir_LNDA
                AnimationName     = GUFaramir_SKL.GUFaramir_LNDA
                AnimationMode     = ONCE
            End
        End


        AnimationState        = DYING WEAPONSET_TOGGLE_1 DEATH_1
            StateName           = STATE_Sword
            Animation           = GUFaramir_DIEA
                AnimationName     = GUTwrGrd_SKL.GUTwrGrd_DIEA
                AnimationMode     = ONCE
            End
            Animation           = GUFaramir_DIEB
                AnimationName     = GUTwrGrd_SKL.GUTwrGrd_DIEB
                AnimationMode     = ONCE
            End
            Animation           = GUFaramir_DIEC
                AnimationName     = GUTwrGrd_SKL.GUTwrGrd_DIEC
                AnimationMode     = ONCE
            End
        End

        AnimationState        = DYING WEAPONSET_TOGGLE_1 DEATH_2
            StateName           = STATE_Sword
            Animation           = GUFaramir_DIEA
                AnimationName     = GUTwrGrd_SKL.GUTwrGrd_IDLA
                AnimationMode     = LOOP
            End
        End


        AnimationState        = DYING DEATH_1
            StateName           = STATE_Bow
            Animation           = GUFaramir_DIEC
                AnimationName     = GUFaramir_SKL.GUFaramir_DIEC
                AnimationMode     = ONCE
            End
        End

        AnimationState        = DYING DEATH_2
            StateName           = STATE_Bow
            Animation           = GUFaramir_DIEC
                AnimationName     = GUFaramir_SKL.GUFaramir_IDLA
                AnimationMode     = LOOP
            End
        End

        AnimationState                        = PARALYZED WEAPONSET_TOGGLE_1
            Animation
                AnimationName                = GUTwrGrd_SKL.GUTwrGrd_IDLA
                AnimationMode                = LOOP
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = GUFaramir_SKL.GUFaramir_IDLC
                AnimationMode                = LOOP
            End
        End





        AnimationState        = STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
            StateName           = STATE_Sword
            Animation           = GUFaramir_GTPB
                AnimationName     = GUTwrGrd_SKL.GUTwrGrd_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState        = STUNNED_STANDING_UP
            StateName           = STATE_Bow
            Animation           = GUFaramir_GTPA
                AnimationName     = GUFaramir_SKL.GUFaramir_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState        = STUNNED WEAPONSET_TOGGLE_1
            StateName           = STATE_Sword

            Animation           = GUFaramir_LNDB
                AnimationName     = GUTwrGrd_SKL.GUTwrGrd_LNDA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = STUNNED
            StateName           = STATE_Bow

            Animation           = GUFaramir_LNDA
                AnimationName     = GUFaramir_SKL.GUFaramir_LNDA
                AnimationMode     = ONCE
            End
        End







        AnimationState        = MOVING WEAPONSET_TOGGLE_1 FIRING_OR_PREATTACK_A
            Animation           = TrotAndFire
                AnimationName       = GUTwrGrd_SKL.GUTwrGrd_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
            StateName = RunAndSwing
        End

        AnimationState        = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            StateName           = STATE_Sword
            Animation           = ATKA
                AnimationName     = GUTwrGrd_SKL.GUTwrGrd_ATKA
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKA
                AnimationName     = GUTwrGrd_SKL.GUTwrGrd_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
        End




        AnimationState        = MOVING WEAPONSET_TOGGLE_1
            StateName           = STATE_RunningSword
            ShareAnimation = Yes
            Animation           = RUNA
                AnimationName     = GUTwrGrd_SKL.GUTwrGrd_RUNA
                AnimationMode     = LOOP
            End
            Animation
                AnimationName     = GUTwrGrd_SKL.GUTwrGrd_RUNB
                AnimationMode     = LOOP
            End
            Flags               = RANDOMSTART
        End



        AnimationState        = ATTACKING WEAPONSET_TOGGLE_1
            StateName           = STATE_Sword
            Animation           = ATKD
                AnimationName     = GUTwrGrd_SKL.GUTwrGrd_IDLA
                AnimationMode     = MANUAL
            End
        End



        AnimationState            = MOVING
            StateName           = STATE_RunningBow
            Flags               = RANDOMSTART
            Animation           = GUFaramir_RUNA
                AnimationName   = GUFaramir_SKL.GUFaramir_RUNA
                AnimationSpeedFactorRange = 0.85 0.85
                Distance = 28
            End
        End



        AnimationState                    =    PREATTACK_A
            StateName                    =    STATE_Firing
            Animation                    =    ReadyToDrawn
                AnimationName            =    GUFaramir_SKL.GUFaramir_ATKA1
                AnimationMode            =    ONCE


            End
        End

        AnimationState                    =    FIRING_OR_RELOADING_A
            StateName                    =    STATE_Firing
            Animation                    =    LooseReloadDraw
                AnimationName            =    GUFaramir_SKL.GUFaramir_ATKA2
                AnimationMode            =    ONCE

                AnimationSpeedFactorRange = 1.1 1.1

            End
        End


        AnimationState                    =    CONTINUOUS_FIRE_MEAN
            Animation                    =    HangFrameWhileCoasting
                AnimationName            =    GUFaramir_SKL.GUFaramir_ATKA2
                AnimationMode            =    MANUAL
            End
        End

        AnimationState                        = CONTINUOUS_FIRE_SLOW

            Animation                        = PutAwayArrow
                AnimationName                = GUFaramir_SKL.GUFaramir_ATKA3
                AnimationMode                = ONCE
            End
        End






    AnimationState = ALTERNATE_FORMATION WEAPONSET_TOGGLE_1 FIRING_OR_PREATTACK_A
         Animation = ATKC
            AnimationName        = GUTwrGrd_SKL.GUTwrGrd_ATKA
            AnimationMode        = LOOP
            UseWeaponTiming        = Yes
        End
    End

    AnimationState = ALTERNATE_FORMATION WEAPONSET_TOGGLE_1 FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE
        Animation = ATKC
            AnimationName        = GUTwrGrd_SKL.GUTwrGrd_ATKA
            AnimationMode        = ONCE
            UseWeaponTiming        = Yes
        End
        StateName = PikeUp
    End



     AnimationState = ALTERNATE_FORMATION WEAPONSET_TOGGLE_1 PORCUPINE
         Animation = ATKC
            AnimationName        = GUTwrGrd_SKL.GUTwrGrd_PLTB
            AnimationMode        = LOOP
        End
        StateName = STATE_Planted
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev ~= "STATE_Planted"    and Prev ~= "Trans_Up_To_Down" then CurDrawableSetTransitionAnimState("Trans_Up_To_Down") return end
        EndScript
    End

     AnimationState = ALTERNATE_FORMATION WEAPONSET_TOGGLE_1
         Animation = ATKC
            AnimationName        = GUTwrGrd_SKL.GUTwrGrd_PLTB
            AnimationMode        = LOOP
        End
    End

     AnimationState = ALTERNATE_FORMATION WEAPONSET_TOGGLE_1 SELECTED
         Animation = ATKC
            AnimationName        = GUTwrGrd_SKL.GUTwrGrd_PLTB
            AnimationMode        = LOOP
        End
    End





        AnimationState = EMOTION_ALERT HIT_REACTION WEAPONSET_TOGGLE_1
            Animation = Hit_Level_1_d
                AnimationName = GUTwrGrd_SKL.GUTwrGrd_HITA
                AnimationMode = ONCE
            End
        End


        AnimationState = HIT_REACTION WEAPONSET_TOGGLE_1
            Animation = Hit_Level_1_b
                AnimationName = GUTwrGrd_SKL.GUTwrGrd_HITA
                AnimationMode = ONCE
            End
        End

        AnimationState = HIT_REACTION
            Animation = Hit_Level_1_c
                AnimationName = GUFaramir_SKL.GUFaramir_HITC
                AnimationMode = ONCE
            End
        End





        AnimationState                = LEVELED WEAPONSET_TOGGLE_1
            Animation                = LevelUp
                AnimationName        = GUTwrGrd_SKL.GUTwrGrd_CHRC
                AnimationMode        = ONCE
            End
        End

        AnimationState                = LEVELED
            Animation                = LevelUp
                AnimationName        = GUFaramir_SKL.GUFaramir_CHRD
                AnimationMode        = ONCE
            End
        End



        AnimationState                =    EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
            Animation                    = CHRA
                AnimationName            = GUTwrGrd_SKL.GUTwrGrd_CHRA
                AnimationMode            = LOOP
            End
            Animation                    = CHRA
                AnimationName            = GUTwrGrd_SKL.GUTwrGrd_CHRB
                AnimationMode            = LOOP
            End
            Animation                    = CHRA
                AnimationName            = GUTwrGrd_SKL.GUTwrGrd_CHRC
                AnimationMode            = LOOP
            End
        End

        AnimationState                =    EMOTION_CELEBRATING
            Animation
                AnimationName        =    GUFaramir_SKL.GUFaramir_CHRD
                AnimationMode        =    LOOP
            End
        End



        AnimationState                =    EMOTION_TAUNTING WEAPONSET_TOGGLE_1
            Animation                    = Taunting
                AnimationName            = GUTwrGrd_SKL.GUTwrGrd_TNTA
                AnimationMode            = ONCE
            End
            Animation                    = Taunting2
                AnimationName            = GUTwrGrd_SKL.GUTwrGrd_TNTB
                AnimationMode            = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                =    EMOTION_TAUNTING
            Animation
                AnimationName        =    GUFaramir_SKL.GUFaramir_CHRD
                AnimationMode        =    LOOP
            End
        End




        AnimationState                    = SELECTED WEAPONSET_TOGGLE_1
            StateName                    = STATE_Selected_Sword

            Animation                    = ATNE
                AnimationName            = GUTwrGrd_SKL.GUTwrGrd_ATNB
                AnimationMode            = LOOP
                AnimationBlendTime        = 15
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                CurDrawableHideSubObject("arrow")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_BoredToSelectedSword") return end
            EndScript
        End


        AnimationState                =    EMOTION_ALERT WEAPONSET_TOGGLE_1
            StateName                =    STATE_READY
            Animation                =    ready
                AnimationName        =    GUTwrGrd_SKL.GUTwrGrd_IDLA
                AnimationMode        =    LOOP
                AnimationBlendTime    =    20
            End
        End

        AnimationState                =    RAISING_FLAG
            Animation
                AnimationName        =    GUFaramir_SKL.GUFaramir_CHRD
                AnimationMode        =    LOOP
            End
        End

        AnimationState                =    SELECTED
            StateName                =    STATE_Selected_Bow

            Animation                =    ATNB
                AnimationName        =    GUFaramir_SKL.GUFaramir_ATNB
                AnimationMode        =    LOOP
                AnimationBlendTime  = 15
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Idle_Bow"    then CurDrawableSetTransitionAnimState("TRANS_BoredToSelectedBow") return end
            EndScript
        End





        AnimationState                    = WEAPONSET_TOGGLE_1
            StateName                    = STATE_Idle_Sword
            Animation                    = IDLB
                AnimationName            = GUTwrGrd_SKL.GUTwrGrd_IDLB
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                    = IDLC
                AnimationName            = GUTwrGrd_SKL.GUTwrGrd_IDLC
                AnimationMode            = ONCE
                AnimationBlendTime        = 9
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                    = IDLD
                AnimationName            = GUTwrGrd_SKL.GUTwrGrd_IDLD
                AnimationMode            = ONCE
                AnimationBlendTime        = 9
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                    = IDLE
                AnimationName            = GUTwrGrd_SKL.GUTwrGrd_IDLE
                AnimationMode            = ONCE
                AnimationBlendTime        = 9
                AnimationSpeedFactorRange = 0.8 1.2
            End
            BeginScript
                CurDrawableHideSubObject("arrow")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoredSword") end
            EndScript
        End

        IdleAnimationState
            StateName           = STATE_Idle_Bow
            Animation           = IdleBow
                AnimationName     = GUFaramir_SKL.GUFaramir_IDLC
                AnimationMode     = ONCE
                AnimationBlendTime  = 15
            End
            BeginScript
                CurDrawableShowSubObject("arrow")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Selected_Bow" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoredBow") end
            EndScript
        End



        TransitionState = TRANS_BoredToSelectedSword
            Animation = ANTD
                AnimationName        = GUTwrGrd_SKL.GUTwrGrd_ANTA
                AnimationMode        = ONCE
            End
        End

        TransitionState = TRANS_SelectedToBoredSword
            Animation            = ATNF
                AnimationName    = GUTwrGrd_SKL.GUTwrGrd_ATNC
                AnimationMode    = ONCE
            End
        End

        TransitionState = TRANS_BoredToSelectedBow
            Animation = ATNC
                AnimationName        = GUFaramir_SKL.GUFaramir_ATNC
                AnimationMode        = ONCE
            End
        End

        TransitionState = TRANS_SelectedToBoredBow
            Animation            = ATNA
                AnimationName    = GUFaramir_SKL.GUFaramir_ATND
                AnimationMode    = ONCE
            End
        End

        TransitionState       = TRANS_Plant
            Animation           = PLTA
                AnimationName     = GUTwrGrd_SKL.GUTwrGrd_PLTA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
        End

        TransitionState       = TRANS_Unplant
            Animation           = PLTB
                AnimationName     = GUTwrGrd_SKL.GUTwrGrd_PLTC
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 0.5 1.2
            End
        End
    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side 	  	= Men
    EditorSorting 	= UNIT
    ThreatLevel   	= 1.0
    ThingClass    	= HORDE_UNIT
    CommandPoints 	= 10
    TransportSlotCount  = 1


    WeaponSet
        Conditions    = None
        Weapon        = PRIMARY    WachterVesteBow
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions    = WEAPONSET_TOGGLE_1
        Weapon        = PRIMARY    WachterVesteKompanieWeapon
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End



    ArmorSet
        Conditions      = None
        Armor           = EdainBowPikeHeavyArmor
        DamageFX        = NormalDamageFX
    End


    VisionRange = 395
    ShroudClearingRange = 475
    VisionSide = 50%
    VisionRear = 25%
    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    BountyValue = 15
    DisplayName = OBJECT:GondorWachterderKompanie
    CrushableLevel = 0

    ;CrushRevengeWeapon = VesteGuardCrushRevenge
    CommandSet = GondorWachterVesteCommandSet




    VoiceAttack                       = WachterderVesteVoiceAttack
    VoiceAttackCharge                 = WachterderVesteVoiceAttack
    VoiceAttackMachine                = WachterderVesteVoiceAttackBuilding
    VoiceAttackStructure              = WachterderVesteVoiceAttackBuilding
    VoiceEnterStateAttack             = WachterderVesteVoiceAttack
    VoiceEnterStateAttackCharge       = WachterderVesteVoiceAttack
    VoiceEnterStateAttackMachine      = WachterderVesteVoiceAttackBuilding
    VoiceEnterStateAttackStructure    = WachterderVesteVoiceAttackBuilding
    VoiceCreated                      = WachterderVesteVoiceRecruit
    VoiceFullyCreated                 = WachterderVesteVoiceRecruit
    VoiceGuard                        = WachterderVesteVoiceMove
    VoiceMove                         = WachterderVesteVoiceMove
    VoiceMoveToCamp                   = WachterderVesteVoiceMove
    VoiceMoveWhileAttacking           = WachterderVesteVoiceMove
    VoicePriority                     = 70
    VoiceRetreatToCastle              = WachterderVesteVoiceMove
    VoiceSelect                       = WachterderVesteVoiceSelect
    VoiceSelectBattle                 = WachterderVesteVoiceSelect
    VoiceEnterStateMove               = WachterderVesteVoiceMove
    VoiceEnterStateMoveToCamp         = WachterderVesteVoiceMove
    VoiceEnterStateMoveWhileAttacking = WachterderVesteVoiceMove
    VoiceEnterStateRetreatToCastle    = WachterderVesteVoiceMove

    SoundImpact                       = ImpactHorse

    UnitSpecificSounds
        VoiceGarrison                    = WachterderVesteVoiceMove
        VoiceDesperateAttack             = WachterderVesteVoiceMove
        VoiceEnterUnitElvenTransportShip = WachterderVesteVoiceMove
        VoiceInitiateCaptureBuilding     = WachterderVesteVoiceMove
    End

    EvaEventDamagedOwner = UnitUnderAttack

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:RAISING_FLAG            Excluded:DYING ENGAGED    Sound:EmotionMenGoodCompilationBFME1and2VoxTauntSinglesLoop
    End

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Unit Infantry
    End


    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:FootstepDirtA        Animation:GUFaramir_SKL.GUFaramir_RUNA        Frames:2 12
        AnimationSound = Sound:FootstepDirtA        Animation:GUFaramir_SKL.GUFaramir_RUNB        Frames:2 12

        AnimationSound = Sound:WeaponSwitchBow        Animation:GUFaramir_SKL.GUFaramir_ATKC        Frames:18

        AnimationSound = Sound:SwordShingClean1        Animation:GUFaramir_SKL.GUFaramir_STHA        Frames:21
        AnimationSound = Sound:SwordIntoScabbard1        Animation:GUFaramir_SKL.GUFaramir_STHB        Frames:11
        AnimationSound = Sound:WeaponSwitchBow        Animation:GUFaramir_SKL.GUFaramir_STHB        Frames:28

        AnimationSound = Sound:SwordIntoScabbard1        Animation:GUFaramir_SKL.GUFaramir_STHC        Frames:2
        AnimationSound = Sound:WeaponSwitchBow        Animation:GUFaramir_SKL.GUFaramir_STHC        Frames:3
        AnimationSound = Sound:SwordShingClean1        Animation:GUFaramir_SKL.GUFaramir_STHD        Frames:6

        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:GUFaramir_SKL.GUFaramir_DIEA        Frames:88
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:GUFaramir_SKL.GUFaramir_DIEB        Frames:85
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:GUFaramir_SKL.GUFaramir_DIEC        Frames:49
        AnimationSound = Sound:BodyFallSoldier        Animation:GUFaramir_SKL.GUFaramir_LNDA        Frames:3
        AnimationSound = Sound:BodyFallSoldier        Animation:GUFaramir_SKL.GUFaramir_LNDB        Frames:2
    End




    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY SCORE THROWN_OBJECT PATH_THROUGH_EACH_OTHER PIKE ATTACK_NEEDS_LINE_OF_SIGHT GRAB_AND_DROP PIKE MADE_OF_DIRT


    Body = ActiveBody ModuleTag_02
        CheerRadius       = EMOTION_CHEER_RADIUS
        MaxHealth         = 1400
        MaxHealthDamaged  = 550
    End

    Behavior = SubObjectsUpgrade Everything_Upgrade
        TriggeredBy    = Upgrade_AllFactionUpgrade
        HideSubObjects = Forged_Blade
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle         = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate                = 500
        CanAttackWhileContained            = Yes
    End

    LocomotorSet
        Locomotor = HumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_FOOT_MED_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = HumanWanderLocomotor
        Condition = SET_WANDER
        Speed     = NORMAL_FOOT_MED_MEMBER_SPEED
    End


    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -EXTRA_8 -FADED
        SinkDelay = 3000
        SinkRate = 0.5
        DestructionDelay = 15000
        Sound = INITIAL HumanVoiceDie
        DeathFlags = DEATH_1
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 5000
        DestructionDelay = 5000
        DeathFlags = DEATH_2
        FX = INITIAL FX_UnSummonElvenAllies
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = SlowDeathBehavior ModuleTag_GrabandDrop
        DeathTypes       = NONE +EXTRA_8
        SinkDelay        = 3000
        SinkRate         = 0.60
        DestructionDelay = 10000
        DeathFlags       = DEATH_4
        ShadowWhenDead   = Yes
    End

    Behavior = FireWeaponWhenDeadBehavior ModuleTag_GrabandDropImpact
        RequiredStatus  = DEATH_4
        StartsActive    = Yes
        DelayTime       = 0
        DeathWeapon     = GrabandDropInfantryImpactWarhead
        WeaponOffset    = X:0 Y:0 Z:0
    End

    Behavior = BezierProjectileBehavior ModuleTag_BodyHitHuman
       FirstHeight               = 24
       SecondHeight              = 24
       FirstPercentIndent        = 30%
       SecondPercentIndent       = 70%
       TumbleRandomly            = Yes
       CrushStyle                = Yes
       DieOnImpact               = Yes
       BounceCount               = 1
       BounceDistance            = 40
       BounceFirstHeight         = 24
       BounceSecondHeight        = 24
       BounceFirstPercentIndent  = 20%
       BounceSecondPercentIndent = 80%
       GroundHitFX               = FX_GrabandDropInfantryGroundHit
       GroundBounceFX            = FX_GrabandDropInfantryGroundHit
    End

    Behavior = AttributeModifierUpgrade ModuleTag_Fearless
        TriggeredBy       = Upgrade_AllFactionUpgrade
        AttributeModifier = FearlessForever
    End

    Geometry 		= CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight 	= 19.2
    GeometryIsSmall 	= Yes
    Shadow 		= SHADOW_DECAL
    ShadowSizeX 	= 14
    ShadowSizeY 	= 14
    ShadowTexture 	= ShadowI
End

ChildObject GondorWachterderKompanieCreep1 GondorWachterderKompanie
    CrushableLevel = 1
    CommandPoints = 0
    Behavior = SlavedUpdate ModuleTag_Slave
        LeashRange                                  = 400
        GuardMaxRange                               = 0
        GuardWanderRange                            = 0
        AttackRange                                 = 400
        UseSlaverAsControlForEvaObjectSightedEvents = No
        GuardPositionOffset                         = X:10.0 Y:-2 Z:0
        DieOnMastersDeath                           = Yes
    End
    Behavior = LifetimeUpdate ModuleTag_HatchTrigger
        MinLifetime = 30000.0
        MaxLifetime = 30000.0
        DeathType   = FADED
    End
End

ChildObject GondorWachterderKompanieCreep2 GondorWachterderKompanie
    CrushableLevel = 1
    CommandPoints = 0
    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy = Upgrade_AllFactionUpgrade
        GetUpgradeCommandButtonName = Command_ToggleWachterVesteWeapon
    End
    Behavior = SlavedUpdate ModuleTag_Slave
        LeashRange                                  = 400
        GuardMaxRange                               = 0
        GuardWanderRange                            = 0
        AttackRange                                 = 400
        UseSlaverAsControlForEvaObjectSightedEvents = No
        GuardPositionOffset                         = X:0.0 Y:13 Z:0
        DieOnMastersDeath                           = Yes
    End
    Behavior = LifetimeUpdate ModuleTag_HatchTrigger
        MinLifetime = 30000.0
        MaxLifetime = 30000.0
        DeathType   = FADED
    End
End

