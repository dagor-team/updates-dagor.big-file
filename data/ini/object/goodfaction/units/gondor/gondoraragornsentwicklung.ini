Object GondorAragornEntwicklung1

    SelectPortrait = HPStreicher
    ButtonImage    = HIAragorn2

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_Aragorn


    Draw = W3DScriptedModelDraw ModuleTag_DRAW

        DefaultModelConditionState
            Model               = guaragorn_ra
        End

        ModelConditionState     = INVISIBLE_STEALTH
            ParticleSysBone     = NONE Predator FollowBone:Yes Persist:SPAWN PersistID:100
            ParticleSysBone     = NONE Predator FollowBone:Yes Persist:HOLD PersistID:100
        End

        ModelConditionState = WEAPONSET_HERO_MODE USER_3
            ParticleSysBone = B_SWORDBONE AndurilGreen FollowBone:Yes
            ParticleSysBone = BAT_HEAD AragornElendill FollowBone:Yes
        End
		
		
		ModelConditionState          = USER_6
            Model               = guaragorn_ra
            ParticleSysBone = B_SWORDBONE ElendilNarsilLightMode FollowBone:Yes
            ParticleSysBone = NONE ElendilCoat FOLLOWBONE:YES
        End
		
	
		
		
        ModelConditionState = WEAPONSET_HERO_MODE
            ParticleSysBone = B_SWORDBONE AndurilGreen FollowBone:Yes
        End

        ModelConditionState = USER_3
            ParticleSysBone = BAT_HEAD AragornElendill FollowBone:Yes
        End


        TransitionState                = TRANS_boredToAttention_Elendil
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE
            End
            FXEvent    = Name: FX_ElendilGlowEvent
        End

        TransitionState                = TRANS_attentionToBored_Elendil
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE_BACKWARDS
            End
            FXEvent                    = Name: FX_ElendilGlowEvent
            Flags                    = START_FRAME_LAST
        End

        TransitionState                = TRANS_boredToAttention
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE
            End
        End

        TransitionState                = TRANS_attentionToBored
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE_BACKWARDS
            End
            Flags                    = START_FRAME_LAST
        End


        IdleAnimationState
            StateName                = STATE_bored

            Animation                = GUAragorn_IDLE
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLE
                AnimationMode        = ONCE
                AnimationPriority    = 12
            End

            Animation                = GUAragorn_IDLF
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLF
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if    Prev == "STATE_attention" or
                    Prev == "STATE_running" or
                    Prev == "OATH_BREAKERS" then CurDrawableSetTransitionAnimState("TRANS_attentionToBored") end
            EndScript
        End

        AnimationState            = THROWN_PROJECTILE
            Animation            = FLYA
                AnimationName    = GUAragorn_SKL.GUAragorn_FLYA
                AnimationMode    = LOOP
            End
        End

        AnimationState            = STUNNED_FLAILING
            Animation            = FLYA
                AnimationName    = GUAragorn_SKL.GUAragorn_FLYA
                AnimationMode    = LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
        End

        AnimationState             = DYING SPLATTED
            Animation         = Splatted_On_Ground
                AnimationName    = GUAragorn_SKL.GUAragorn_LNDA
                AnimationMode    = ONCE
            End
            EnteringStateFX        = FX_SoldierHitGround
        End

        AnimationState                = DYING
            Animation                = GUAragorn_DIEA
                AnimationName        = GUAragorn_SKL.GUAragorn_DIEA
                AnimationMode        = ONCE
            End
            Animation                = GUAragorn_DIEB
                AnimationName        = GUAragorn_SKL.GUAragorn_DIEB
                AnimationMode        = ONCE
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = GUAragorn_IDLE
                AnimationMode                = LOOP
            End
        End

        AnimationState                = STUNNED_STANDING_UP
            Animation                = GUAragorn_GTPB
                AnimationName        = GUAragorn_SKL.GUAragorn_GTPB
                AnimationMode        = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState            = STUNNED
            Animation            = LNDA
                AnimationName    = GUAragorn_SKL.GUAragorn_LNDA
                AnimationMode    = ONCE
            End
            EnteringStateFX        = FX_SoldierHitGround
        End






        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = GUAragorn_SKL.GUAragorn_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState                = FIRING_OR_PREATTACK_A WEAPONSET_HERO_MODE
            StateName                = STATE_ready
            Animation                = ATKF
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKF
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
            FXEvent    = Frame:25 Name: FX_BladeMasterHitOrient
            FXEvent    = Frame:45 Name: FX_BladeMasterHitOrient
        End



        AnimationState                = FIRING_OR_PREATTACK_A
            StateName                = STATE_ready
            Animation                = ATKD
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKD
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
                AnimationPriority    = 3
            End
            Animation                = ATKE
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKE
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
                AnimationPriority    = 2
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End







        AnimationState                = MOVING
            StateName                = STATE_running

            Animation                = GUAragorn_RUNB
                AnimationName        = GUAragorn_SKL.GUAragorn_RUNB
                AnimationMode        = LOOP
            End
        End

        AnimationState                = LEVELED
            Animation                = LevelUp
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKO
                AnimationMode        = ONCE
            End
        End

        AnimationState                = SPECIAL_POWER_1
            StateName                = STATE_ready
            Animation                = GUAragorn_ATKL
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKL
                AnimationMode        = ONCE
            End
            ParticleSysBone            = B_SWORDBONE ElendilFlare FollowBone:Yes
            ParticleSysBone            = B_SWORDBONE ElendilSwordFlare FollowBone:Yes

        End

        AnimationState                = USER_2
            StateName                = ATHELAS
            Animation                = ATKP
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKP
                AnimationMode        = ONCE
            End
        End




        AnimationState                = HIT_REACTION HIT_LEVEL_3
            StateName                = STATE_bored
            Animation                = Hit_Level_1_b
                AnimationName        = GUAragorn_SKL.GUAragorn_HITB
                AnimationMode        = ONCE
            End
        End



        AnimationState                = EMOTION_CELEBRATING
            StateName                = STATE_ready
            Animation                = CHRB
                AnimationName        = GUAragorn_SKL.GUAragorn_CHRB
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = EMOTION_TAUNTING
            StateName                = STATE_ready
            Animation                = CHRB
                AnimationName        = GUAragorn_SKL.GUAragorn_CHRB
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = EMOTION_ALERT
            StateName                = STATE_ready
            Animation                = IDLA
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLA
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
        End

        AnimationState                = EMOTION_MORALE_HIGH
            StateName                = STATE_ready
            Animation                = ATKN
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKN
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Animation                = ATKP
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKP
                AnimationMode        = ONCE
                AnimationPriority    = 15
            End
            Animation                = TNTC
                AnimationName        = GUAragorn_SKL.GUAragorn_TNTD
                AnimationMode        = ONCE
                AnimationPriority    = 30
            End
            Animation                = TNTD
                AnimationName        = GUAragorn_SKL.GUAragorn_TNTD
                AnimationMode        = ONCE
                AnimationPriority    = 30
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = ENGAGED
            StateName                = STATE_ready
            Animation                = IDLA
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLA
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
                AnimationPriority    = 1
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = RAISING_FLAG
            StateName                = STATE_ready
            Animation                = CHRB
                AnimationName        = GUAragorn_SKL.GUAragorn_CHRB
                AnimationMode        = LOOP
            End
        End

        AnimationState                = SELECTED
            StateName                = STATE_attention
            Animation                = ATNE
                AnimationName        = GUAragorn_SKL.GUAragorn_ATNE
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
                AnimationMustCompleteBlend = Yes
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_bored" then CurDrawableSetTransitionAnimState("TRANS_boredToAttention") end
            EndScript
        End
    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side 	   	= Men
    EditorSorting 	= UNIT
    ThreatLevel 	= ARAGORN_THREAT_LEVEL
    ThingClass 	 	= CHARACTER_UNIT
    TransportSlotCount  = TRANSPORTSLOTCOUNT_HERO
    DisplayMeleeDamage = 450
    HeroSortOrder = 20
    BuildCost = STRONG_HERO_COST
    BuildTime = STRONG_HERO_BUILDTIME

    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY    GondorAragornSwordMod
    End
    WeaponSet
        Conditions        = WEAPONSET_HERO_MODE
        Weapon            = PRIMARY    GondorAragornHeroSwordMod
    End

    ArmorSet
        Conditions        = None
        Armor             = VeryStrongHeroArmor
        DamageFX          = NormalDamageFX
    End

    VisionRange = 250
    ShroudClearingRange = 500
    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    BountyValue = GONDOR_ARAGORN_BOUNTY_VALUE
    DisplayName = OBJECT:GondorAragornsEntwicklung
    RecruitText = CONTROLBAR:GondorAragornsEntwicklungRecruit
    ReviveText    = CONTROLBAR:GondorAragornRevive
    Hotkey        = CONTROLBAR:GondorAragornsEntwicklungHotkey
    CrushableLevel = 3

    CommandSet = GondorAragornsEntwicklung1CommandSet
    CommandPoints = 0


    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_AragornBody

    AutoResolveArmor
        Armor = AutoResolve_AragornArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_AragornWeapon
    End

    AutoResolveLeadership = AutoResolve_AragornBonus



    VoiceAttack                        = AragornVoiceAttack
    VoiceAttackStructure               = AragornVoiceAttackBuilding
    VoiceAttackMachine                 = AragornVoiceAttack
    VoiceAttackCharge                  = AragornVoiceAttackCharge
    VoiceEnterStateAttack              = AragornVoiceEnterStateAttack
    VoiceEnterStateAttackStructure     = AragornVoiceEnterStateAttackBuilding
    VoiceEnterStateAttackMachine       = AragornVoiceEnterStateAttackBuilding
    VoiceEnterStateAttackCharge        = AragornVoiceEnterStateAttackCharge
    VoiceCreated                       = AragornVoiceSalute
    VoiceFullyCreated                  = AragornVoiceSalute
    VoiceFear                          = AragornVoiceHelpMe
    VoiceMove                          = AragornVoiceMove
    VoiceMoveToCamp                    = AragornVoiceMoveCamp
    VoiceMoveWhileAttacking            = AragornVoiceDisengage
    VoiceEnterStateMove                = AragornVoiceEnterStateMove
    VoiceEnterStateMoveToCamp          = AragornVoiceEnterStateMoveCamp
    VoiceEnterStateMoveWhileAttacking  = AragornVoiceEnterStateDisengage
    VoicePriority                      = 90
    VoiceRetreatToCastle               = AragornVoiceRetreat
    VoiceEnterStateRetreatToCastle     = AragornVoiceEnterStateRetreat
    VoiceSelect                        = AragornVoiceSelectMS
    VoiceSelectBattle                  = AragornVoiceSelectBattle
    VoiceGuard                         = AragornVoiceMove

    SoundImpact                        = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitElvenTransportShip    = AragornVoiceMove
        VoiceGarrison                       = AragornVoiceGarrison
        VoiceInitiateCaptureBuilding        = AragornVoiceMove
    End

    CrowdResponseKey = GoodMen

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
    EvaEventDieOwner     = AragornDie

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Man Man_Male Unit Infantry Hero
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:AragornVoiceElendil                          Animation:GUAragorn_SKL.GUAragorn_ATKL    Frames:21
        AnimationSound = Sound:AragornVoiceEnterStateElendil                Animation:GUAragorn_SKL.GUAragorn_ATKL    Frames:21
        AnimationSound = Sound:FootstepDirtA                                Animation:GUAragorn_SKL.GUAragorn_RUNB    Frames:8 17 26 36

        AnimationSound = Sound:BodyFallGenericNoArmor                       Animation:GUAragorn_SKL.GUAragorn_DIEA    Frames:55
        AnimationSound = Sound:BodyFallGenericNoArmor                       Animation:GUAragorn_SKL.GUAragorn_DIEB    Frames:70
        AnimationSound = Sound:BodyFallSoldier                              Animation:GUAragorn_SKL.GUAragorn_LNDA    Frames:1
    End


    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE HERO ARMY_SUMMARY ARAGORN HEAVY_MELEE_HITTER
    PathfindDiameter = 40.0

    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius               = EMOTION_CHEER_RADIUS
        MaxHealth                 = ARAGORNDAG_HEALTH
        PermanentlyKilledByFilter = NONE
        DodgePercent              = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                  = DYING
        DeathAnimationTime         = 3933
        RespawnAnim                = LEVELED
        RespawnAnimationTime       = 2000
        AutoRespawnAtObjectFilter  = NONE +CASTLE_KEEP
        ButtonImage                = HIAragorn2

        RespawnRules =    AutoSpawn:No           Cost:STRONG_HERO_COST       Time:STRONG_HERO_RESPAWNTIME        Health:100%
   End

    Behavior = SubObjectsUpgrade ModuleTag_PlaneHidden
        TriggeredBy       = Upgrade_AllFactionUpgrade
        HideSubObjects    = MANTEL
    End

    Behavior = SubObjectsUpgrade ModuleTag_ShowAnduril
        TriggeredBy       = Upgrade_Anduril
        HideSubObjects    = SWORD
        ShowSubObjects    = ANDURIL ANDURIL02
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    #include "..\..\..\includes\CaptureBuilding.inc"

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        AILuaEventsList            = AragornFunctions
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance               = 300
        TauntAndPointUpdateDelay            = 10000
        AddEmotion            =    Doom_Base
        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
        AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base
        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_GOOD_HERO_SPEED
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 2133
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL AragornVoiceDie
    End

    Behavior = SquishCollide ModuleTag_06
    End

    Behavior = AttributeModifierUpgrade ModuleTag_FinrodBonus
        TriggeredBy       = Upgrade_RaiseShield
        AttributeModifier = FinarfinRingModifierHero
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
        SpecialPowerTemplate 	= SpecialAbilityAragornBladeMaster
        TriggeredBy 		= Upgrade_Level_2
        ObeyRechageOnTrigger    = Yes
    End

      Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        StartsPaused            = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        HeroAttributeModifier   = AragornBladeMasterMod
        HeroEffectDuration      = 30000
        UnpackTime              = 1
        TriggerSound            = AragornBladeMaster
    End

    Behavior = AutoAbilityBehavior ModuleTag_AragornBladeMasterAutoAbility
	SpecialAbility		= SpecialAbilityAragornBladeMaster
	ForbiddenStatus 	= INSIDE_GARRISON
	MaxScanRange		= 150
	Query			= 15 ALL ENEMIES
	Query			= 1 ANY ENEMIES +HERO +MONSTER
   End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 100
        HitReactionLifeTimer2 = 1000
        HitReactionLifeTimer3 = 1993

        HitReactionThreshold1 = 0.0
        HitReactionThreshold2 = 25.0
        HitReactionThreshold3 = 50.0
    End








    Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership
        StartsActive     = No
        BonusName        = AragornGeschenkdesAbendsternsNew
        TriggeredBy      = Upgrade_Level_4
        RefreshDelay     = 2000
        Range            = 1
        AllowSelf        = Yes
        ObjectFilter     = NONE +GondorAragornEntwicklung1 +GondorAragornEntwicklung2 +GondorAragornEntwicklung3 +GondorAragornEntwicklung4
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy = Upgrade_Level_4
    End

    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = No
        StartsPaused = Yes
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornAthelas2
        SpecialPowerTemplate = SpecialAbilityAragornAthelas
        TriggeredBy = Upgrade_Level_3
        ObeyRechageOnTrigger    = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_AragornAthelas
        SpecialPowerTemplate     = SpecialAbilityAragornAthelas
        UpdateModuleStartsAttack = Yes
        TriggerFX                = FX_StreicherAthelas
        SetModelCondition        = ModelConditionState:USER_2
        SetModelConditionTime    = 2.1
        StartsPaused             = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_AragornAthelasUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornAthelas
        StartAbilityRange       = 1.6
        UnpackTime              = 1
        PreparationTime         = 3
        PackTime                = 2096
        AwardXPForTriggering    = 0
    End

    Behavior = AutoAbilityBehavior ModuleTag_AthelasAutoAbility
        SpecialAbility    = SpecialAbilityAragornAthelas
        MaxScanRange      = 150
        Query             = 1 NONE +HERO ALLIES
    End

    Behavior = AutoHealBehavior ModuleTag_AthelasHealing
        StartsActive                = Yes
        ButtonTriggered             = Yes
        HealingAmount               = 1500
        Radius                      = 150
        HealOnlyOthers              = No
        SingleBurst                 = Yes
        UnitHealPulseFX             = FX_StreicherAthelas
        KindOf                      = HERO
    End






    Behavior = InvisibilityUpdate ModuleTag_ElvenCloak
        InvisibilityNugget
            InvisibilityType    = STEALTH
            ForbiddenConditions    = MOVING FIRING_ANY TAKING_DAMAGE
            BecomeStealthedFX       = FX_ElvenCloakOn
            ExitStealthFX           = FX_ElvenCloakOff
            Options            = UNTOGGLE_HIDDEN_WHEN_LEAVING_STEALTH
        End
        StartsActive            = No
        UpdatePeriod            = 2000
    End

    Behavior     = InvisibilityUpdate ModuleTag_ElvenCamouflage
        InvisibilityNugget
            InvisibilityType    = CAMOUFLAGE
            DetectionRange        = CAMOUFLAGE_RADIUS
            ForbiddenConditions    = MOVING FIRING_ANY
            Options                = ALLOW_NEAR_TREES
        End
        UpdatePeriod            = 2000
        StartsActive            = Yes
        UnitSpecificSoundNameToUseAsVoiceMoveToStealthyArea = VoiceMoveToTrees
        UnitSpecificSoundNameToUseAsVoiceEnterStateMoveToStealthyArea = VoiceEnterStateMoveToTrees
    End

    Behavior = SpecialPowerModule ModuleTag_ElfCloakStarter
        SpecialPowerTemplate      = SpecialAbilityElfCloak
        UpdateModuleStartsAttack  = Yes
        StartsPaused              = No
    End

    Behavior = ToggleHiddenSpecialAbilityUpdate ModuleTag_ElfCloakUpdate
        SpecialPowerTemplate = SpecialAbilityElfCloak
    End






     Behavior = SpecialPowerModule ModuleTag_HorseToggleStarter
         SpecialPowerTemplate           = SpecialAbilityToggleMounted
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = No
         InitiateSound                  = UpgradeImlaFortressDunedain
     End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_HorseToggle
         SpecialPowerTemplate           = SpecialAbilityToggleMounted
         MountedTemplate                = GondorAragornEntwicklung2
         SynchronizeTimerOnSpecialPower = SpecialAbilityAragornBladeMaster SpecialAbilityAragornAthelas SpecialAbilityElfCloak
         UnpackTime                     = OBJECT_TOGGLE_TIME
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End

    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy 			= Upgrade_Level_4 Upgrade_ObjectUnderAIControl
        RequiresAllTriggers  		= Yes
        GetUpgradeCommandButtonName     = Command_AragornEntwicklung2
    End

    Behavior = AutoHealBehavior ModuleTag_ElvenGiftHealing
        StartsActive          = No
        TriggeredBy           = Upgrade_Level_4
        HealingAmount         = ELVEN_GIFT_REGEN_AMOUNT
        HealingDelay          = ELVEN_GIFT_REGEN_DELAY
        StartHealingDelay     = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = AutoHealBehavior ModuleTag_AragornHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 1000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = GrantUpgradeCreate ModuleTag_EnableUpgradeZD
        UpgradeToGrant      = Upgrade_MyHour
        GiveOnBuildComplete = Yes
    End


    Behavior = StealthDetectorUpdate StealthDetectorUpdateModuleTag
        DetectionRate        = 10
        DetectionRange       = 200
        CancelOneRingEffect  = No
    End







    Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag
        FireWeaponNugget
            WeaponName = AragornRetterObjectDestroyWeapon
            FireDelay = 2000
            OneShot = Yes
        End
    End

    Behavior = ObjectCreationUpgrade ModuleTag_RetterObject
        TriggeredBy     = Upgrade_RaiseSchmiedekunst
        Delay           = 0
        ThingToSpawn    = RetterObjectAragorn
    End







    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate EscapeAI
        CommandButtonName = Command_SpecialAbilityStreicherHasCloak
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate GimliAxeThrowAI
        CommandButtonName = Command_SpecialAbilityStreicherKnifeThrow
        SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
    End

    Behavior = AISpecialPowerUpdate AragornBladeMasterAI
        CommandButtonName = Command_SpecialAbilityStreicherBladeMaster2
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate SpecialPowerAragornAthelas
        CommandButtonName = Command_SpecialAbilityStreicherAthelasMod2
        SpecialPowerAIType = AI_SPECIAL_POWER_SELFAOEHEALHEROS
        SpecialPowerRadius = 30.0
    End

    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes
    Shadow = SHADOW_DECAL
    ShadowSizeX = 20
    ShadowSizeY = 20
    ShadowTexture = ShadowI
End







Object GondorAragornEntwicklung2



    SelectPortrait = HPAragornHD
    ButtonImage = HIAragorn2

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_Aragorn

    Draw = W3DScriptedModelDraw ModuleTag_DRAW

        DefaultModelConditionState
            Model               = guaragorn_hd
        End

        ModelConditionState = WEAPONSET_HERO_MODE USER_3
            ParticleSysBone = B_SWORDBONE ElendilNarsilLightMode FollowBone:Yes
            ParticleSysBone = NONE ElendilCoat FOLLOWBONE:YES
            ParticleSysBone = BAT_HEAD AragornElendill FollowBone:Yes
        End

        ModelConditionState = WEAPONSET_HERO_MODE
            ParticleSysBone = B_SWORDBONE ElendilNarsilLightMode FollowBone:Yes
            ParticleSysBone = NONE ElendilCoat FOLLOWBONE:YES
        End

        ModelConditionState = USER_3
            ParticleSysBone = BAT_HEAD AragornElendill FollowBone:Yes
        End

		ModelConditionState          = USER_6
            Model               = guaragorn_ra
            ParticleSysBone = B_SWORDBONE ElendilNarsilLightMode FollowBone:Yes
            ParticleSysBone = NONE ElendilCoat FOLLOWBONE:YES
        End

        TransitionState                = TRANS_boredToAttention_Elendil
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE
            End
            FXEvent    = Name: FX_ElendilGlowEvent
        End

        TransitionState                = TRANS_attentionToBored_Elendil
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE_BACKWARDS
            End
            FXEvent                    = Name: FX_ElendilGlowEvent
            Flags                    = START_FRAME_LAST
        End

        TransitionState                = TRANS_boredToAttention
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE
            End
        End

        TransitionState                = TRANS_attentionToBored
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE_BACKWARDS
            End
            Flags                    = START_FRAME_LAST
        End


        IdleAnimationState
            StateName                = STATE_bored

            Animation                = GUAragorn_IDLE
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLE
                AnimationMode        = ONCE
                AnimationPriority    = 12
            End

            Animation                = GUAragorn_IDLF
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLF
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if    Prev == "STATE_attention" or
                    Prev == "STATE_running" or
                    Prev == "OATH_BREAKERS" then CurDrawableSetTransitionAnimState("TRANS_attentionToBored") end
            EndScript
        End

        AnimationState            = THROWN_PROJECTILE
            Animation            = FLYA
                AnimationName    = GUAragorn_SKL.GUAragorn_FLYA
                AnimationMode    = LOOP
            End
        End

        AnimationState            = STUNNED_FLAILING
            Animation            = FLYA
                AnimationName    = GUAragorn_SKL.GUAragorn_FLYA
                AnimationMode    = LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
        End

        AnimationState             = DYING SPLATTED DEATH_1
            Animation         = Splatted_On_Ground
                AnimationName    = GUAragorn_SKL.GUAragorn_LNDA
                AnimationMode    = ONCE
            End
            EnteringStateFX        = FX_SoldierHitGround
        End


        AnimationState                = DYING DEATH_1
            Animation                = GUAragorn_DIEA
                AnimationName        = GUAragorn_SKL.GUAragorn_DIEA
                AnimationMode        = ONCE
            End
            Animation                = GUAragorn_DIEB
                AnimationName        = GUAragorn_SKL.GUAragorn_DIEB
                AnimationMode        = ONCE
            End
        End

        AnimationState                = DYING DEATH_2
            Animation                = FadeOut
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLE
                AnimationMode        = LOOP
            End
        End


        AnimationState                        = PARALYZED
            Animation
                AnimationName                = GUAragorn_IDLE
                AnimationMode                = LOOP
            End
        End

        AnimationState                = STUNNED_STANDING_UP
            Animation                = GUAragorn_GTPB
                AnimationName        = GUAragorn_SKL.GUAragorn_GTPB
                AnimationMode        = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState            = STUNNED
            Animation            = LNDA
                AnimationName    = GUAragorn_SKL.GUAragorn_LNDA
                AnimationMode    = ONCE
            End
            EnteringStateFX        = FX_SoldierHitGround
        End








        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = GUAragorn_SKL.GUAragorn_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End



        AnimationState                = FIRING_OR_PREATTACK_A WEAPONSET_HERO_MODE
            StateName                = STATE_ready
            Animation                = ATKF
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKF
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
            FXEvent    = Frame:25 Name: FX_BladeMasterHitOrient
            FXEvent    = Frame:45 Name: FX_BladeMasterHitOrient
        End



        AnimationState                = FIRING_OR_PREATTACK_A
            StateName                = STATE_ready
            Animation                = ATKD
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKD
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
                AnimationPriority    = 3
            End
            Animation                = ATKE
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKE
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
                AnimationPriority    = 2
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End







        AnimationState                = MOVING
            StateName                = STATE_running

            Animation                = GUAragorn_RUNB
                AnimationName        = GUAragorn_SKL.GUAragorn_RUNB
                AnimationMode        = LOOP
            End
        End

        AnimationState                = LEVELED
            Animation                = LevelUp
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKO
                AnimationMode        = ONCE
            End
        End

        AnimationState                = SPECIAL_POWER_1
            StateName                = STATE_ready
            Animation                = GUAragorn_ATKL
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKL
                AnimationMode        = ONCE
            End
            ParticleSysBone            = B_SWORDBONE ElendilFlare FollowBone:Yes
            ParticleSysBone            = B_SWORDBONE ElendilSwordFlare FollowBone:Yes

        End

        AnimationState                = USER_2
            StateName                = ATHELAS
            Animation                = ATKP
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKP
                AnimationMode        = ONCE
            End
        End





        AnimationState                = HIT_REACTION HIT_LEVEL_3
            StateName                = STATE_bored
            Animation                = Hit_Level_1_b
                AnimationName        = GUAragorn_SKL.GUAragorn_HITB
                AnimationMode        = ONCE
            End
        End



        AnimationState                = EMOTION_CELEBRATING
            StateName                = STATE_ready
            Animation                = CHRB
                AnimationName        = GUAragorn_SKL.GUAragorn_CHRB
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = EMOTION_TAUNTING
            StateName                = STATE_ready
            Animation                = CHRB
                AnimationName        = GUAragorn_SKL.GUAragorn_CHRB
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = EMOTION_ALERT
            StateName                = STATE_ready
            Animation                = IDLA
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLA
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
        End

        AnimationState                = EMOTION_MORALE_HIGH
            StateName                = STATE_ready
            Animation                = ATKN
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKN
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Animation                = ATKP
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKP
                AnimationMode        = ONCE
                AnimationPriority    = 15
            End
            Animation                = TNTC
                AnimationName        = GUAragorn_SKL.GUAragorn_TNTD
                AnimationMode        = ONCE
                AnimationPriority    = 30
            End
            Animation                = TNTD
                AnimationName        = GUAragorn_SKL.GUAragorn_TNTD
                AnimationMode        = ONCE
                AnimationPriority    = 30
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = ENGAGED
            StateName                = STATE_ready
            Animation                = IDLA
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLA
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
                AnimationPriority    = 1
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = RAISING_FLAG
            StateName                = STATE_ready
            Animation                = CHRB
                AnimationName        = GUAragorn_SKL.GUAragorn_CHRB
                AnimationMode        = LOOP
            End
        End

        AnimationState                = SELECTED
            StateName                = STATE_attention
            Animation                = ATNE
                AnimationName        = GUAragorn_SKL.GUAragorn_ATNE
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
                AnimationMustCompleteBlend = Yes
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_bored" then CurDrawableSetTransitionAnimState("TRANS_boredToAttention") end
            EndScript
        End

    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End


    Draw = W3DScriptedModelDraw ModuleTag_LightController
        DefaultModelConditionState
            Model = None
        End
        ModelConditionState = USER_8
            Model           = exldrspimla
        End
    End


    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side = Men
    EditorSorting = UNIT
    ThreatLevel = ARAGORN_THREAT_LEVEL
    ThingClass = CHARACTER_UNIT
    TransportSlotCount = TRANSPORTSLOTCOUNT_HERO
    DisplayMeleeDamage = 450
    HeroSortOrder = 20
    BuildCost = STRONG_HERO_COST
    BuildTime = STRONG_HERO_BUILDTIME

    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY    GondorAragornNarsilSwordMod
        Weapon            = QUINARY    MenLongShotFakeWeapon
        AutoChooseSources = QUINARY FROM_PLAYER FROM_SCRIPT
    End
    WeaponSet
        Conditions        = WEAPONSET_HERO_MODE
        Weapon            = PRIMARY    GondorAragornHeroSwordMod
        Weapon            = QUINARY    MenLongShotFakeWeapon
        AutoChooseSources = QUINARY FROM_PLAYER FROM_SCRIPT
    End
    WeaponSet
        Conditions        = PASSENGER_TYPE_ONE
        Weapon            = SECONDARY    GondorAragornDwarfToss
        Weapon            = QUINARY      MenLongShotFakeWeapon
        AutoChooseSources = QUINARY FROM_PLAYER FROM_SCRIPT
    End

    ArmorSet
        Conditions      = None
        Armor           = VeryStrongHeroArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange = 250
    ShroudClearingRange = 500
    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    BountyValue = GONDOR_ARAGORN_BOUNTY_VALUE
    DisplayName = OBJECT:GondorAragornsEntwicklung2
    RecruitText = CONTROLBAR:GondorAragornsEntwicklungRecruit
    ReviveText    = CONTROLBAR:GondorAragornRevive
    Hotkey        = CONTROLBAR:GondorAragornsEntwicklungHotkey2
    CrushableLevel = 3



    CommandSet = GondorAragornsEntwicklung2CommandSet
    CommandPoints = 0

    Behavior = CommandSetUpgrade ModuleTag_BerenHerbs
        TriggeredBy        =  Upgrade_Mornamarth_Arrive
        CommandSet        = GondorAragornsEntwicklung2HerbsCommandSet
    End

    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_AragornBody

    AutoResolveArmor
        Armor = AutoResolve_AragornArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_AragornWeapon
    End

    AutoResolveLeadership = AutoResolve_AragornBonus




    VoiceAttack                    = AragornVoiceAttack
    VoiceAttackStructure            = AragornVoiceAttackBuilding
    VoiceAttackMachine            = AragornVoiceAttack
    VoiceAttackCharge                = AragornVoiceAttackCharge
    VoiceEnterStateAttack            = AragornVoiceEnterStateAttack
    VoiceEnterStateAttackStructure    = AragornVoiceEnterStateAttackBuilding
    VoiceEnterStateAttackMachine        = AragornVoiceEnterStateAttackBuilding
    VoiceEnterStateAttackCharge        = AragornVoiceEnterStateAttackCharge

    VoiceFear                     = AragornVoiceHelpMe
    VoiceMove                    = AragornVoiceMove
    VoiceMoveToCamp                = AragornVoiceMoveCamp
    VoiceMoveWhileAttacking            = AragornVoiceDisengage
    VoiceEnterStateMove            = AragornVoiceEnterStateMove
    VoiceEnterStateMoveToCamp        = AragornVoiceEnterStateMoveCamp
    VoiceEnterStateMoveWhileAttacking    = AragornVoiceEnterStateDisengage
    VoicePriority                = 90
    VoiceRetreatToCastle            = AragornVoiceRetreat
    VoiceEnterStateRetreatToCastle    = AragornVoiceEnterStateRetreat
    VoiceSelect                    = AragornVoiceSelectMS
    VoiceSelectBattle                = AragornVoiceSelectBattle
    VoiceGuard                    = AragornVoiceMove

    SoundImpact                    = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitElvenTransportShip    = AragornVoiceMove
        VoiceGarrison                        = AragornVoiceGarrison
        VoiceInitiateCaptureBuilding        = AragornVoiceMove
    End

    CrowdResponseKey = GoodMen

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
    EvaEventDieOwner                = AragornDie


    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Man Man_Male Unit Infantry Hero

    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:AragornVoiceElendil                 Animation:GUAragorn_SKL.GUAragorn_ATKL    Frames:21

        AnimationSound = Sound:AragornVoiceEnterStateElendil             Animation:GUAragorn_SKL.GUAragorn_ATKL    Frames:21

        AnimationSound = Sound:FootstepDirtA                    Animation:GUAragorn_SKL.GUAragorn_RUNB    Frames:8 17 26 36

        AnimationSound = Sound:BodyFallGenericNoArmor                Animation:GUAragorn_SKL.GUAragorn_DIEA    Frames:55
        AnimationSound = Sound:BodyFallGenericNoArmor                Animation:GUAragorn_SKL.GUAragorn_DIEB    Frames:70
        AnimationSound = Sound:BodyFallSoldier                    Animation:GUAragorn_SKL.GUAragorn_LNDA    Frames:1
    End



    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE HERO ARMY_SUMMARY ARAGORN HEAVY_MELEE_HITTER
    PathfindDiameter = 40.0

    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius               = EMOTION_CHEER_RADIUS
        MaxHealth                 = ARAGORNDAG_HEALTH
        PermanentlyKilledByFilter = NONE
        DodgePercent              = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                 = DYING
        DeathAnimationTime        = 3933
        RespawnAnim               = LEVELED
        RespawnAnimationTime      = 2000
        AutoRespawnAtObjectFilter = NONE +CASTLE_KEEP
        ButtonImage               = HIAragorn2
        RespawnAsTemplate         = GondorAragornEntwicklung1

        RespawnRules =    AutoSpawn:No           Cost:STRONG_HERO_COST       Time:STRONG_HERO_RESPAWNTIME        Health:100%
   End


    Behavior = SubObjectsUpgrade ModuleTag_ShowAnduril
        TriggeredBy       = Upgrade_Anduril
        HideSubObjects    = SWORD
        ShowSubObjects    = ANDURIL ANDURIL02
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    #include "..\..\..\includes\CaptureBuilding.inc"


    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        AILuaEventsList                = AragornFunctions
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance                = 300
        TauntAndPointUpdateDelay            = 10000
        AddEmotion            =    Doom_Base
        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
        AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base
        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_GOOD_HERO_SPEED
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 2133
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -FADED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL AragornVoiceDie
        DeathFlags = DEATH_1
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 2500
        DestructionDelay = 2500
        Sound = INITIAL SpellGenericUnsummonFasterMS
        DeathFlags = DEATH_2
    End

    Behavior = SquishCollide ModuleTag_06
    End

    Behavior = AttributeModifierUpgrade ModuleTag_FinrodBonus
        TriggeredBy       = Upgrade_RaiseShield
        AttributeModifier = FinarfinRingModifierHero
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
        SpecialPowerTemplate = SpecialAbilityAragornBladeMaster
        TriggeredBy = Upgrade_Level_2
        ObeyRechageOnTrigger    = Yes
    End

      Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        StartsPaused            = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        HeroAttributeModifier    = AragornBladeMasterMod
        HeroEffectDuration        = 30000
        UnpackTime              = 1
        TriggerSound            = AragornBladeMaster
    End

    Behavior = AutoAbilityBehavior ModuleTag_AragornBladeMasterAutoAbility

	SpecialAbility		= SpecialAbilityAragornBladeMaster
	ForbiddenStatus 	= INSIDE_GARRISON

	MaxScanRange		= 150
	Query			= 15 ALL ENEMIES
	Query			= 1 ANY ENEMIES +HERO +MONSTER

   End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 100
        HitReactionLifeTimer2 = 1000
        HitReactionLifeTimer3 = 1993

        HitReactionThreshold1 = 0.0
        HitReactionThreshold2 = 25.0
        HitReactionThreshold3 = 50.0
    End





    Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership
        StartsActive     = No
        BonusName        = AragornGeschenkdesAbendsternsNew
        TriggeredBy      = Upgrade_Level_4
        RefreshDelay     = 2000
        Range            = 1
        AllowSelf        = Yes
        ObjectFilter     = NONE +GondorAragornEntwicklung1 +GondorAragornEntwicklung2 +GondorAragornEntwicklung3 +GondorAragornEntwicklung4
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy = Upgrade_Level_4
    End

    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = No
        StartsPaused = Yes
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ArrowVolleyEvilEnabler
        SpecialPowerTemplate          = SpecialAbilityMenLongShot
        TriggeredBy                   = Upgrade_Level_4
        ObeyRechageOnTrigger          = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_ArrowVolleyEvil
        SpecialPowerTemplate          = SpecialAbilityMenLongShot
        OCL                           = OCL_LongShotAbility
        CreateLocation                = CREATE_AT_LOCATION
        UpdateModuleStartsAttack      = No
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FireballUpdate
        SpecialPowerTemplate          = SpecialAbilityMenLongShot
        PackTime                      = 5000
        MustFinishAbility             = Yes
        SpecialWeapon                 = MenLongShotWeapon
        NeedLivingTargets             = No

        ApproachRequiresLOS           = No
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EnableElendil
        SpecialPowerTemplate        = SpecialAbilityAragornElendil
        TriggeredBy                 = Upgrade_Level_6
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_ElendilStarter
        SpecialPowerTemplate        = SpecialAbilityAragornElendil
        UpdateModuleStartsAttack    = Yes
        AntiCategory                = LEADERSHIP INNATE_ARMOR
        AttributeModifier           = AragornElendilAntiCategory
        AttributeModifierRange      = 200.0
        StartsPaused                = Yes
        SetModelCondition           = ModelConditionState:USER_3
        SetModelConditionTime       = 10.0
    End

    Behavior = ModelConditionSpecialAbilityUpdate ModuleTag_ElendilUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornElendil
        UnpackTime              = 1400
        PreparationTime         = 1
        PersistentPrepTime      = 1000
        PackTime                = 1000

        GenerateTerror            = Yes
        EmotionPulseRadius        = 180
        ObjectFilter            = ELENDIL_OBJECT_FILTER
        AwardXPForTriggering    = 0
    End








    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornAthelas2
        SpecialPowerTemplate = SpecialAbilityAragornAthelas
        TriggeredBy             = Upgrade_Level_3
        ObeyRechageOnTrigger    = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_AragornAthelas
        SpecialPowerTemplate    = SpecialAbilityAragornAthelas
        UpdateModuleStartsAttack  = Yes
        TriggerFX                = FX_AragornAthelas
        SetModelCondition        = ModelConditionState:USER_2
        SetModelConditionTime    = 2.1
        StartsPaused             = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_AragornAthelasUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornAthelas
        StartAbilityRange       = 1.6
        UnpackTime              = 1
        PreparationTime         = 3
        PackTime                = 2096
        AwardXPForTriggering    = 0
    End

    Behavior = AutoAbilityBehavior ModuleTag_AthelasAutoAbility
        SpecialAbility    = SpecialAbilityAragornAthelas
        MaxScanRange    = 150
        Query            = 1 NONE +HERO ALLIES
    End


    Behavior = AutoHealBehavior ModuleTag_AthelasHealing
        StartsActive              = Yes
        ButtonTriggered           = Yes
        HealingAmount             = 1750
        Radius                    = 150
        HealOnlyOthers            = No
        SingleBurst               = Yes
        UnitHealPulseFX           = FX_AragornAthelas
        KindOf                    = HERO
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornSuperAthelas2
        SpecialPowerTemplate = SpecialAbilityAragornSuperAthelas
        TriggeredBy = Upgrade_Level_3
        ObeyRechageOnTrigger    = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_AragornSuperAthelas
        SpecialPowerTemplate     = SpecialAbilityAragornSuperAthelas
        UpdateModuleStartsAttack = Yes
        TriggerFX                = FX_AragornAthelas
        SetModelCondition        = ModelConditionState:USER_5
        SetModelConditionTime    = 2.1
        StartsPaused             = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_AragornSuperAthelasUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornSuperAthelas
        StartAbilityRange       = 1.6
        UnpackTime              = 1
        PreparationTime         = 3
        PackTime                = 2096
        AwardXPForTriggering    = 0
    End

    Behavior = AutoAbilityBehavior ModuleTag_SuperAthelasAutoAbility
        SpecialAbility    = SpecialAbilityAragornSuperAthelas
        MaxScanRange    = 200
        Query            = 1 NONE +HERO ALLIES
    End


    Behavior = AutoHealBehavior ModuleTag_SuperAthelasHealing
        StartsActive                = Yes
        ButtonTriggered             = Yes
        HealingAmount               = 2500
        Radius                      = 200
        HealOnlyOthers              = No
        SingleBurst                 = Yes
        UnitHealPulseFX             = FX_AragornAthelas
        KindOf                      = HERO
    End








    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_Entwicklung
        SpecialPowerTemplate            = SpecialAbilityToggleMounted
        TriggeredBy                     = Upgrade_Level_7
        RequiresAllTriggers             = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_EntwicklungToggleStarter
         SpecialPowerTemplate           = SpecialAbilityToggleMounted
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = Yes
         InitiateSound                  = AragornRedeMod
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_EntwicklungToggle
         SpecialPowerTemplate           = SpecialAbilityToggleMounted
         MountedTemplate                = GondorAragornEntwicklung3
         SynchronizeTimerOnSpecialPower = SpecialAbilityAragornBladeMaster SpecialAbilityAragornAthelas SpecialAbilityAragornElendil
         UnpackTime                     = OBJECT_TOGGLE_TIME
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes

    End


    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy = Upgrade_Level_7 Upgrade_ObjectUnderAIControl
        RequiresAllTriggers  = Yes
        GetUpgradeCommandButtonName = Command_AragornEntwicklung3
    End

    Behavior = AutoHealBehavior ModuleTag_ElvenGiftHealing
        StartsActive          = No
        TriggeredBy           = Upgrade_Level_4
        HealingAmount         = ELVEN_GIFT_REGEN_AMOUNT
        HealingDelay          = ELVEN_GIFT_REGEN_DELAY
        StartHealingDelay     = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = AttributeModifierUpgrade ModuleTag_ElvenGiftBonus
        TriggeredBy = Upgrade_ElvenGift
        AttributeModifier = SpellBookElvenGifts
    End


    Behavior = AutoHealBehavior ModuleTag_AragornHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 1000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag
        FireWeaponNugget
            WeaponName = AragornRetterObjectDestroyWeapon
            FireDelay = 2000
            OneShot = Yes
        End
    End

    Behavior = ObjectCreationUpgrade ModuleTag_RetterObject
        TriggeredBy     = Upgrade_RaiseSchmiedekunst
        Delay           = 0
        ThingToSpawn    = RetterObjectAragorn
    End








    Behavior = AISpecialPowerUpdate AragornBladeMaster2AI
        CommandButtonName = Command_SpecialAbilityAragornBladeMaster2
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate GimliAxeThrowAI
        CommandButtonName = Command_SpecialAbilityAragornKnifeThrow
        SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
    End

    Behavior = AISpecialPowerUpdate AragornBladeMasterAI
        CommandButtonName = Command_SpecialAbilityAragornAnduril
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate SpecialPowerAragornAthelas
        CommandButtonName = Command_SpecialAbilityAragornAthelasMod2
        SpecialPowerAIType = AI_SPECIAL_POWER_SELFAOEHEALHEROS
        SpecialPowerRadius = 30.0
    End

    Behavior = AISpecialPowerUpdate AragornElendilAI
        CommandButtonName = Command_SpecialAbilityElendilMod
        SpecialPowerAIType = AI_SPECIAL_POWER_ELENDIL
        SpecialPowerRadius = 200
    End


    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes
    Shadow = SHADOW_DECAL
    ShadowSizeX = 20
    ShadowSizeY = 20
    ShadowTexture = ShadowI
End







Object GondorAragornEntwicklung3



    SelectPortrait = HPThronfolger


    ButtonImage = HIGondorAragorn

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_Aragorn

    Draw = W3DScriptedModelDraw ModuleTag_DRAW



     RandomTexture = guaragorn_rotk.tga  0 guaragorn_2trs.tga


        DefaultModelConditionState
            Model            = guaragorn_tron
        End

        ModelConditionState  = MOUNTED
            Model            = guaragorn_thrs
            WeaponLaunchBone = PRIMARY PASSENGERBONE
        End

        ModelConditionState = WEAPONSET_HERO_MODE USER_3
			ParticleSysBone = B_SWORDBONE ElendilNarsilLightMode FollowBone:Yes
            ParticleSysBone = NONE ElendilCoat FOLLOWBONE:YES
            ParticleSysBone = B_SWORDBONE AndurilGold FollowBone:Yes
            ParticleSysBone = BAT_HEAD AragornElendill FollowBone:Yes
        End

        ModelConditionState = WEAPONSET_HERO_MODE
			ParticleSysBone = B_SWORDBONE ElendilNarsilLightMode FollowBone:Yes
            ParticleSysBone = NONE ElendilCoat FOLLOWBONE:YES
            ParticleSysBone = B_SWORDBONE AndurilGold FollowBone:Yes
        End

        ModelConditionState = USER_3
            ParticleSysBone = B_SWORDBONE AndurilGold FollowBone:Yes
        End

		ModelConditionState          = USER_6
            Model               = guaragorn_ra
            ParticleSysBone = B_SWORDBONE ElendilNarsilLightMode FollowBone:Yes
            ParticleSysBone = NONE ElendilCoat FOLLOWBONE:YES
        End

        TransitionState                = TRANS_boredToAttention_Elendil
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE
            End
            FXEvent    = Name: FX_ElendilGlowEvent
        End

        TransitionState                = TRANS_attentionToBored_Elendil
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE_BACKWARDS
            End
            FXEvent                    = Name: FX_ElendilGlowEvent
            Flags                    = START_FRAME_LAST
        End

        TransitionState                = TRANS_boredToAttention
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE
            End
        End

        TransitionState                = TRANS_attentionToBored
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE_BACKWARDS
            End
            Flags                    = START_FRAME_LAST
        End






        AnimationState                =    MOUNTED FREEFALL
            Animation                =    freefall
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_FLYC
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState                =    MOUNTED STUNNED_FLAILING
            Animation                =    JustDie
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_FLYC
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState                =    MOUNTED DYING SPLATTED
            Animation                =    Land
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_LNDA
                AnimationMode        =    ONCE
            End
        End


        AnimationState                =    MOUNTED DYING
            Animation                =    JustDie
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_DIEA
                AnimationMode        =    ONCE
            End
        End

        AnimationState                =    MOUNTED STUNNED_STANDING_UP
            Animation                =    StandUp
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_GTPA
                AnimationMode        =    ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState                =    MOUNTED STUNNED
            Animation                =    Land
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_LNDA
                AnimationMode        =    ONCE
            End
        End



        AnimationState        =  MOUNTED FIRING_OR_PREATTACK_A ATTACKING_STRUCTURE
            StateName = Attacking
            Animation = attackinga  building while mounted.
                AnimationName           = RUHHs_Theo_SKL.RUHHs_Theo_ATKA
                AnimationMode       = ONCE
                UseWeaponTiming = Yes
            End
        End



        AnimationState        = MOUNTED MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = MountedRunAndFire
                AnimationName       = RUHHs_Theo_SKL.RUHHs_Theo_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState                =    MOUNTED FIRING_OR_PREATTACK_A
            Animation                =    AttackA
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_ATKA
                AnimationMode        =    ONCE
                UseWeaponTiming        = Yes
            End
            Animation                =    AttackB
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_ATKB

                AnimationMode        =    ONCE
                UseWeaponTiming        = Yes
            End
        End


        AnimationState                =    MOUNTED TURN_LEFT_HIGH_SPEED
            Animation                =    TurnLeft
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_TNL1
                AnimationMode        =    LOOP
                AnimationSpeedFactorRange= 1.2 1.2
                AnimationBlendTime    =    20
            End
        End

        AnimationState                =    MOUNTED TURN_RIGHT_HIGH_SPEED
            Animation                =    TurnLeft
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_TNR1
                AnimationMode        =    LOOP
                AnimationSpeedFactorRange= 1.2 1.2
                AnimationBlendTime    =    20
            End
        End




        AnimationState                =    MOUNTED MOVING TURN_LEFT
            Animation                =    TurnLeft
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_TRNL
                AnimationMode        =    LOOP
                AnimationSpeedFactorRange= 1.5 1.5
            End

        End

        AnimationState                =    MOUNTED MOVING TURN_RIGHT
            Animation                =    TurnRight
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_TRNR
                AnimationMode        =    LOOP
                AnimationSpeedFactorRange= 1.5 1.5
            End

        End

        AnimationState                =    MOUNTED MOVING ACCELERATE
            Animation                =    Accelerate
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_ACCL
                AnimationMode        =    LOOP
            End

        End

        AnimationState                =    MOUNTED MOVING DECELERATE
            Animation                =    Decelerate
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_DECL
                AnimationMode        =    ONCE
            End

        End

        AnimationState                =    MOUNTED MOVING WALKING
            Animation                =    Walk
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_WLKA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART

        End

        AnimationState                =    MOUNTED MOVING BACKING_UP
            Animation                =    BackingUp
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_BAKA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART

        End


        AnimationState                =    MOUNTED MOVING
            Animation                =    RunA
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_RUNA
                AnimationMode        =    LOOP
            End
             Flags                    =    RANDOMSTART

        End


        AnimationState                =    MOUNTED SELECTED
            SimilarRestart            =   Yes
            StateName                =    AtAttentionIdle
            Animation                =    ATNB
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_IDLH
                AnimationMode        =    LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
                if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
                if Prev == "STATE_CaptainMounted" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
            EndScript
        End

        TransitionState                =    TRANS_MountedSelect
            Animation                =    ATNA
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_ATNA
                AnimationMode        =    ONCE
            End
        End










        AnimationState = MOUNTED
            StateName = Idle
            Animation    =    IdleA
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_IDLA
                AnimationPriority    =    30
                AnimationMode        =    ONCE
                AnimationBlendTime    =    15
            End
            Animation                =    IdleC
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_IDLC
                AnimationMode        =    ONCE
                AnimationBlendTime    =    15
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End





        IdleAnimationState
            StateName                = STATE_bored

            Animation                = GUAragorn_IDLE
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLE
                AnimationMode        = ONCE
                AnimationPriority    = 12
            End

            Animation                = GUAragorn_IDLF
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLF
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if    Prev == "STATE_attention" or
                    Prev == "STATE_running" or
                    Prev == "OATH_BREAKERS" then CurDrawableSetTransitionAnimState("TRANS_attentionToBored") end
            EndScript
        End

        AnimationState            = THROWN_PROJECTILE
            Animation            = FLYA
                AnimationName    = GUAragorn_SKL.GUAragorn_FLYA
                AnimationMode    = LOOP
            End
        End

        AnimationState            = STUNNED_FLAILING
            Animation            = FLYA
                AnimationName    = GUAragorn_SKL.GUAragorn_FLYA
                AnimationMode    = LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
        End

        AnimationState             = DYING SPLATTED
            Animation         = Splatted_On_Ground
                AnimationName    = GUAragorn_SKL.GUAragorn_LNDA
                AnimationMode    = ONCE
            End
            EnteringStateFX        = FX_SoldierHitGround
        End


        AnimationState                = DYING
            Animation                = GUAragorn_DIEA
                AnimationName        = GUAragorn_SKL.GUAragorn_DIEA
                AnimationMode        = ONCE
            End
            Animation                = GUAragorn_DIEB
                AnimationName        = GUAragorn_SKL.GUAragorn_DIEB
                AnimationMode        = ONCE
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = GUAragorn_IDLE
                AnimationMode                = LOOP
            End
        End

        AnimationState                = STUNNED_STANDING_UP
            Animation                = GUAragorn_GTPB
                AnimationName        = GUAragorn_SKL.GUAragorn_GTPB
                AnimationMode        = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState            = STUNNED
            Animation            = LNDA
                AnimationName    = GUAragorn_SKL.GUAragorn_LNDA
                AnimationMode    = ONCE
            End
            EnteringStateFX        = FX_SoldierHitGround
        End








        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = GUAragorn_SKL.GUAragorn_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End



        AnimationState                = FIRING_OR_PREATTACK_A WEAPONSET_HERO_MODE
            StateName                = STATE_ready
            Animation                = ATKF
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKF
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
            FXEvent    = Frame:25 Name: FX_BladeMasterHitOrient
            FXEvent    = Frame:45 Name: FX_BladeMasterHitOrient
        End



        AnimationState                = FIRING_OR_PREATTACK_A
            StateName                = STATE_ready
            Animation                = ATKD
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKD
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
                AnimationPriority    = 3
            End
            Animation                = ATKE
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKE
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
                AnimationPriority    = 2
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End





        AnimationState                = MOVING
            StateName                = STATE_running

            Animation                = GUAragorn_RUNB
                AnimationName        = GUAragorn_SKL.GUAragorn_RUNB
                AnimationMode        = LOOP
            End
        End

        AnimationState                = LEVELED
            Animation                = LevelUp
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKO
                AnimationMode        = ONCE
            End
        End

        AnimationState                = SPECIAL_POWER_1
            StateName                = STATE_ready
            Animation                = GUAragorn_ATKL
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKL
                AnimationMode        = ONCE
            End
            ParticleSysBone            = B_SWORDBONE ElendilFlare FollowBone:Yes
            ParticleSysBone            = B_SWORDBONE ElendilSwordFlare FollowBone:Yes

        End

        AnimationState                = USER_2
            StateName                = ATHELAS
            Animation                = ATKP
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKP
                AnimationMode        = ONCE
            End
        End













        AnimationState                = HIT_REACTION HIT_LEVEL_3
            StateName                = STATE_bored
            Animation                = Hit_Level_1_b
                AnimationName        = GUAragorn_SKL.GUAragorn_HITB
                AnimationMode        = ONCE
            End
        End



        AnimationState                = EMOTION_CELEBRATING
            StateName                = STATE_ready
            Animation                = CHRB
                AnimationName        = GUAragorn_SKL.GUAragorn_CHRB
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = EMOTION_TAUNTING
            StateName                = STATE_ready
            Animation                = CHRB
                AnimationName        = GUAragorn_SKL.GUAragorn_CHRB
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = EMOTION_ALERT
            StateName                = STATE_ready
            Animation                = IDLA
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLA
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
        End

        AnimationState                = EMOTION_MORALE_HIGH
            StateName                = STATE_ready
            Animation                = ATKN
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKN
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Animation                = ATKP
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKP
                AnimationMode        = ONCE
                AnimationPriority    = 15
            End
            Animation                = TNTC
                AnimationName        = GUAragorn_SKL.GUAragorn_TNTD
                AnimationMode        = ONCE
                AnimationPriority    = 30
            End
            Animation                = TNTD
                AnimationName        = GUAragorn_SKL.GUAragorn_TNTD
                AnimationMode        = ONCE
                AnimationPriority    = 30
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = ENGAGED
            StateName                = STATE_ready
            Animation                = IDLA
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLA
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
                AnimationPriority    = 1
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = RAISING_FLAG
            StateName                = STATE_ready
            Animation                = CHRB
                AnimationName        = GUAragorn_SKL.GUAragorn_CHRB
                AnimationMode        = LOOP
            End
        End

        AnimationState                = SELECTED
            StateName                = STATE_attention
            Animation                = ATNE
                AnimationName        = GUAragorn_SKL.GUAragorn_ATNE
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
                AnimationMustCompleteBlend = Yes
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_bored" then CurDrawableSetTransitionAnimState("TRANS_boredToAttention") end
            EndScript
        End

    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    Draw = W3DScriptedModelDraw ModuleTag_LightController
        DefaultModelConditionState
            Model = None
        End
        ModelConditionState = USER_8
            Model           = exldrspimla
        End
    End


    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side = Men
    EditorSorting = UNIT
    ThreatLevel = ARAGORN_THREAT_LEVEL
    ThingClass = CHARACTER_UNIT
    TransportSlotCount = TRANSPORTSLOTCOUNT_HERO
    DisplayMeleeDamage = 450
    HeroSortOrder = 20
    BuildCost = STRONG_HERO_COST
    BuildTime = STRONG_HERO_BUILDTIME


    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY    GondorAragornNarsilSwordMod
    End

    WeaponSet
        Conditions        = WEAPONSET_HERO_MODE
        Weapon            = PRIMARY    GondorAragornHeroSwordMod
    End

    WeaponSet
        Conditions        = PASSENGER_TYPE_ONE
        Weapon            = SECONDARY    GondorAragornDwarfToss
    End

    ArmorSet
        Conditions        = None
        Armor             = VeryStrongHeroArmor
        DamageFX          = NormalDamageFX
    End

    ArmorSet
        Conditions        = MOUNTED
        Armor             = VeryStrongHeroArmorMounted
        DamageFX          = NormalDamageFX
    End


    VisionRange = 250
    ShroudClearingRange = 500
    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    BountyValue = GONDOR_ARAGORN_BOUNTY_VALUE
    DisplayName = OBJECT:GondorAragornsEntwicklungBG
    RecruitText = CONTROLBAR:GondorAragornsEntwicklungRecruit
    ReviveText  = CONTROLBAR:GondorAragornRevive
    Hotkey      = CONTROLBAR:GondorAragornsEntwicklungHotkeyBG
    CrusherLevel          = 0
    MountedCrusherLevel   = 1
    CrushableLevel        = 3
    MountedCrushableLevel = 3

    CrushWeapon        = HeroCrush

    MinCrushVelocityPercent     = MINCRUSHVELOCITYPERCENT_HERO
    CrushDecelerationPercent    = CRUSHDECELERATIONPERCENT_HERO

    CrushKnockback = 40
    CrushZFactor   = 1.0


    CommandSet = GondorAragornsEntwicklung3CommandSet
    CommandPoints = 0

    Behavior = CommandSetUpgrade ModuleTag_BerenHerbs
        TriggeredBy        =  Upgrade_Mornamarth_Arrive
        CommandSet        = GondorAragornsEntwicklung3HerbsCommandSet
    End


    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_AragornBody

    AutoResolveArmor
        Armor = AutoResolve_AragornArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_AragornWeapon
    End

    AutoResolveLeadership = AutoResolve_AragornBonus




    VoiceAttack                    = AragornVoiceAttack
    VoiceAttackStructure            = AragornVoiceAttackBuilding
    VoiceAttackMachine            = AragornVoiceAttack
    VoiceAttackCharge                = AragornVoiceAttackCharge
    VoiceEnterStateAttack            = AragornVoiceEnterStateAttack
    VoiceEnterStateAttackStructure    = AragornVoiceEnterStateAttackBuilding
    VoiceEnterStateAttackMachine        = AragornVoiceEnterStateAttackBuilding
    VoiceEnterStateAttackCharge        = AragornVoiceEnterStateAttackCharge

    VoiceFear                     = AragornVoiceHelpMe
    VoiceMove                    = AragornVoiceMove
    VoiceMoveToCamp                = AragornVoiceMoveCamp
    VoiceMoveWhileAttacking            = AragornVoiceDisengage
    VoiceEnterStateMove            = AragornVoiceEnterStateMove
    VoiceEnterStateMoveToCamp        = AragornVoiceEnterStateMoveCamp
    VoiceEnterStateMoveWhileAttacking    = AragornVoiceEnterStateDisengage
    VoicePriority                = 90
    VoiceRetreatToCastle            = AragornVoiceRetreat
    VoiceEnterStateRetreatToCastle    = AragornVoiceEnterStateRetreat
    VoiceSelect                    = AragornVoiceSelectMS
    VoiceSelectBattle                = AragornVoiceSelectBattle
    VoiceGuard                    = AragornVoiceMove

    SoundImpact                    = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitElvenTransportShip    = AragornVoiceMove
        VoiceGarrison                        = AragornVoiceGarrison
        VoiceInitiateCaptureBuilding        = AragornVoiceMove
    End

    CrowdResponseKey = GoodMen

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
    EvaEventDieOwner                = AragornDie


    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Man Man_Male Unit Infantry Hero

    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:AragornVoiceElendil                 Animation:GUAragorn_SKL.GUAragorn_ATKL    Frames:21

        AnimationSound = Sound:AragornVoiceEnterStateElendil             Animation:GUAragorn_SKL.GUAragorn_ATKL    Frames:21

        AnimationSound = Sound:FootstepDirtA                    Animation:GUAragorn_SKL.GUAragorn_RUNB    Frames:8 17 26 36

        AnimationSound = Sound:BodyFallGenericNoArmor                Animation:GUAragorn_SKL.GUAragorn_DIEA    Frames:55
        AnimationSound = Sound:BodyFallGenericNoArmor                Animation:GUAragorn_SKL.GUAragorn_DIEB    Frames:70
        AnimationSound = Sound:BodyFallSoldier                    Animation:GUAragorn_SKL.GUAragorn_LNDA    Frames:1
    End



    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE HERO ARMY_SUMMARY ARAGORN HEAVY_MELEE_HITTER
    PathfindDiameter = 40.0

    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius                  = EMOTION_CHEER_RADIUS
        MaxHealth                    = ARAGORNDAG_HEALTH
        PermanentlyKilledByFilter    = NONE
        DodgePercent                 = HERO_DODGE_PERCENT
    End
    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                  = DYING
        DeathAnimationTime         = 3933
        RespawnAnim                = LEVELED
        RespawnAnimationTime       = 2000
        AutoRespawnAtObjectFilter  = NONE +CASTLE_KEEP
        ButtonImage                = HIGondorAragorn
        RespawnAsTemplate          = GondorAragornEntwicklung1

        RespawnRules =    AutoSpawn:No           Cost:STRONG_HERO_COST       Time:STRONG_HERO_RESPAWNTIME        Health:100%
   End


    Behavior = SubObjectsUpgrade ModuleTag_ShowAnduril
        TriggeredBy       = Upgrade_Anduril
        HideSubObjects    = SWORD
        ShowSubObjects    = ANDURIL ANDURIL02
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    #include "..\..\..\includes\CaptureBuilding.inc"


    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        AILuaEventsList                = AragornFunctions
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance               = 300
        TauntAndPointUpdateDelay            = 10000
        AddEmotion            =    Doom_Base
        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
        AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base
        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_GOOD_HERO_SPEED
    End

    LocomotorSet
        Locomotor = HeroHorseLocomotor
        Condition = SET_MOUNTED
        Speed     = 80
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 2133
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL AragornVoiceDie
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = AttributeModifierUpgrade ModuleTag_FinrodBonus
        TriggeredBy       = Upgrade_RaiseShield
        AttributeModifier = FinarfinRingModifierHero
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
        SpecialPowerTemplate = SpecialAbilityAragornBladeMaster
        TriggeredBy = Upgrade_Level_2
        ObeyRechageOnTrigger    = Yes
    End

      Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        StartsPaused            = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        HeroAttributeModifier    = AragornBladeMasterMod
        HeroEffectDuration        = 30000
        UnpackTime              = 1
        TriggerSound            = AragornBladeMaster
    End

    Behavior = AutoAbilityBehavior ModuleTag_AragornBladeMasterAutoAbility

	SpecialAbility		= SpecialAbilityAragornBladeMaster
	ForbiddenStatus 	= INSIDE_GARRISON

	MaxScanRange		= 150
	Query			= 15 ALL ENEMIES
	Query			= 1 ANY ENEMIES +HERO +MONSTER

   End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 100
        HitReactionLifeTimer2 = 1000
        HitReactionLifeTimer3 = 1993

        HitReactionThreshold1 = 0.0
        HitReactionThreshold2 = 25.0
        HitReactionThreshold3 = 50.0
    End







    Behavior = AttributeModifierAuraUpdate ModuleTag_LeadershipAbendstern
        StartsActive     = No
        BonusName        = AragornGeschenkdesAbendsternsNew
        TriggeredBy      = Upgrade_Level_4
        RefreshDelay     = 2000
        Range            = 1
        AllowSelf        = Yes

        ObjectFilter     = NONE +GondorAragornEntwicklung1 +GondorAragornEntwicklung2 +GondorAragornEntwicklung3 +GondorAragornEntwicklung4
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AbendsternLeadership
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy = Upgrade_Level_4
    End

    Behavior = SpecialPowerModule ModuleTag_AbendsternLeadershipUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = No
        StartsPaused = Yes
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EnableElendil
        SpecialPowerTemplate        = SpecialAbilityAragornElendil
        TriggeredBy                 = Upgrade_Level_6
        ObeyRechageOnTrigger        = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_ElendilStarter
        SpecialPowerTemplate        = SpecialAbilityAragornElendil
        UpdateModuleStartsAttack    = Yes
        AntiCategory                = LEADERSHIP INNATE_ARMOR
        AttributeModifier           = AragornElendilAntiCategory
        AttributeModifierRange      = 200.0
        StartsPaused                = Yes
        SetModelCondition           = ModelConditionState:USER_3
        SetModelConditionTime       = 10.0
    End

    Behavior = ModelConditionSpecialAbilityUpdate ModuleTag_ElendilUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornElendil
        UnpackTime              = 1400
        PreparationTime         = 1
        PersistentPrepTime      = 1000
        PackTime                = 1000

        GenerateTerror            = Yes
        EmotionPulseRadius        = 180
        ObjectFilter            = ELENDIL_OBJECT_FILTER
        AwardXPForTriggering    = 0
    End








    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornOathbreakersEnabler
        SpecialPowerTemplate    = SuperweaponSpawnOathbreakers
        TriggeredBy 		= Upgrade_Level_10
        RequiresAllTriggers     = Yes
        ObeyRechageOnTrigger    = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLSpecialPower
        SpecialPowerTemplate    = SuperweaponSpawnOathbreakers
        OCL                     = OCL_GondorArmyofTheDeadEggSmall
        CreateLocation          = CREATE_AT_LOCATION
        StartsPaused            = Yes
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornAthelas2
        SpecialPowerTemplate     = SpecialAbilityAragornAthelas
        TriggeredBy              = Upgrade_Level_3
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_AragornAthelas
        SpecialPowerTemplate     = SpecialAbilityAragornAthelas
        UpdateModuleStartsAttack = Yes
        TriggerFX                = FX_ElessarAthelas
        SetModelCondition        = ModelConditionState:USER_2
        SetModelConditionTime    = 2.1
    End

    Behavior = SpecialAbilityUpdate ModuleTag_AragornAthelasUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornAthelas
        StartAbilityRange       = 1.6
        UnpackTime              = 1
        PreparationTime         = 3
        PackTime                = 2096
        AwardXPForTriggering    = 0
    End

    Behavior = AutoAbilityBehavior ModuleTag_AthelasAutoAbility
        SpecialAbility    = SpecialAbilityAragornAthelas
        MaxScanRange      = 150
        Query             = 1 NONE +HERO ALLIES
    End


    Behavior = AutoHealBehavior ModuleTag_AthelasHealing
        StartsActive              = Yes
        ButtonTriggered           = Yes
        HealingAmount             = 2000
        Radius                    = 200
        HealOnlyOthers            = No
        SingleBurst               = Yes
        UnitHealPulseFX           = FX_ElessarAthelas
        KindOf                    = HERO
    End


Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornSuperAthelas2
        SpecialPowerTemplate = SpecialAbilityAragornSuperAthelas
        TriggeredBy = Upgrade_Level_5
        ObeyRechageOnTrigger    = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_AragornSuperAthelas
        SpecialPowerTemplate     = SpecialAbilityAragornSuperAthelas
        UpdateModuleStartsAttack = Yes
        TriggerFX                = FX_AragornAthelas
        SetModelCondition        = ModelConditionState:USER_5
        SetModelConditionTime    = 2.1
        StartsPaused             = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_AragornSuperAthelasUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornSuperAthelas
        StartAbilityRange       = 1.6
        UnpackTime              = 1
        PreparationTime         = 3
        PackTime                = 2096
        AwardXPForTriggering    = 0
    End

    Behavior = AutoAbilityBehavior ModuleTag_SuperAthelasAutoAbility
        SpecialAbility    = SpecialAbilityAragornSuperAthelas
        MaxScanRange    = 200
        Query            = 1 NONE +HERO ALLIES
    End


    Behavior = AutoHealBehavior ModuleTag_SuperAthelasHealing
        StartsActive                = Yes
        ButtonTriggered             = Yes
        HealingAmount               = 3000
        Radius                      = 200
        HealOnlyOthers              = No
        SingleBurst                 = Yes
        UnitHealPulseFX             = FX_AragornAthelas
        KindOf                      = HERO
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_UnpauseHorseToggle
        SpecialPowerTemplate        = SpecialAbilityToggleMounted
        TriggeredBy                    = Upgrade_Level_1
    End

     Behavior = SpecialPowerModule ModuleTag_HorseToggleStarter
         SpecialPowerTemplate      = SpecialAbilityToggleMounted
         UpdateModuleStartsAttack  = Yes
         StartsPaused = Yes
     End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_HorseToggle
         SpecialPowerTemplate    = SpecialAbilityToggleMounted
         UnpackTime              = GOOD_MOUNT_TIME
         PreparationTime         = 1
         PersistentPrepTime      = 250
         PackTime                = GOOD_MOUNT_TIME
         OpacityTarget            = .3





         AwardXPForTriggering    = 0
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_Entwicklung
        SpecialPowerTemplate            = SpecialAbilityGandalfVerfuhrte
        TriggeredBy                     = Upgrade_Level_10
    End

    Behavior = SpecialPowerModule ModuleTag_EntwicklungToggleStarterKrone
         SpecialPowerTemplate           = SpecialAbilityGandalfVerfuhrte
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = Yes
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_EntwicklungToggleKrone
         SpecialPowerTemplate           = SpecialAbilityGandalfVerfuhrte
         MountedTemplate                = GondorAragornEntwicklung4
         SynchronizeTimerOnSpecialPower = SpecialAbilityAragornBladeMaster SpecialAbilityAragornAthelas SpecialAbilityAragornElendil
         UnpackTime                     = OBJECT_TOGGLE_TIME
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes

    End

    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy = Upgrade_Level_10 Upgrade_ObjectUnderAIControl
        RequiresAllTriggers  = Yes
        GetUpgradeCommandButtonName = Command_AragornEntwicklung4
    End

    Behavior = AutoHealBehavior ModuleTag_ElvenGiftHealing
        StartsActive          = No
        TriggeredBy           = Upgrade_Level_4
        HealingAmount         = ELVEN_GIFT_REGEN_AMOUNT
        HealingDelay          = ELVEN_GIFT_REGEN_DELAY
        StartHealingDelay     = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = AttributeModifierUpgrade ModuleTag_ElvenGiftBonus
        TriggeredBy = Upgrade_ElvenGift
        AttributeModifier = SpellBookElvenGifts
    End


    Behavior = AutoHealBehavior ModuleTag_AragornHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 1000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag
        FireWeaponNugget
            WeaponName = AragornRetterObjectDestroyWeapon
            FireDelay = 2000
            OneShot = Yes
        End
    End

    Behavior = ObjectCreationUpgrade ModuleTag_RetterObject
        TriggeredBy     = Upgrade_RaiseSchmiedekunst
        Delay           = 0
        ThingToSpawn    = RetterObjectAragorn
    End







    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate AragornBladeMasterAI
        CommandButtonName = Command_SpecialAbilityAragornBladeMaster3
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate AragornElendilAI
        CommandButtonName = Command_SpecialAbilityElendil
        SpecialPowerAIType = AI_SPECIAL_POWER_ELENDIL
        SpecialPowerRadius = 200
    End

    Behavior = AISpecialPowerUpdate SpecialPowerAragornAthelas
        CommandButtonName = Command_SpecialAbilityAthelasElessar
        SpecialPowerAIType = AI_SPECIAL_POWER_SELFAOEHEALHEROS
        SpecialPowerRadius = 30.0
    End

    Behavior = AISpecialPowerUpdate SpecialPowerAragornOathBreakers
        CommandButtonName = Command_SpawnOathbreakersMod
        SpecialPowerAIType = AI_SPECIAL_POWER_TARGETAOE_SUMMON
        SpecialPowerRadius = 30.0
    End


    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes
    Shadow = SHADOW_DECAL
    ShadowSizeX = 20
    ShadowSizeY = 20
    ShadowTexture = ShadowI
End


ChildObject GondorAragornEntwicklung3_forMM GondorAragornEntwicklung3
    CommandSet = GondorAragornsEntwicklung3CommandSet_forMM
    MaxSimultaneousOfType    = 1
    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
    End
End








Object GondorAragornEntwicklung4

    SelectPortrait = HPElessar
    ButtonImage    = HIElessar

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_Aragorn

    Draw = W3DScriptedModelDraw ModuleTag_DRAW

     RandomTexture = guelessar.tga  0 guaragorn_2trs.tga
     RandomTexture = guelessar.tga  0 guaragorn_rotk.tga


        DefaultModelConditionState
            Model            = guaragorn_eless
        End

        ModelConditionState  = MOUNTED
            Model            = guaragorn_ehrs
            WeaponLaunchBone = PRIMARY PASSENGERBONE
        End


        ModelConditionState = WEAPONSET_HERO_MODE USER_3
			ParticleSysBone = B_SWORDBONE ElendilNarsilLightMode FollowBone:Yes
            ParticleSysBone = NONE ElendilCoat FOLLOWBONE:YES
            ParticleSysBone = B_SWORDBONE AndurilGold FollowBone:Yes
            ParticleSysBone = BAT_HEAD AragornElendill FollowBone:Yes
        End

        ModelConditionState = WEAPONSET_HERO_MODE
			ParticleSysBone = B_SWORDBONE ElendilNarsilLightMode FollowBone:Yes
            ParticleSysBone = NONE ElendilCoat FOLLOWBONE:YES
            ParticleSysBone = B_SWORDBONE AndurilGold FollowBone:Yes
        End

        ModelConditionState = USER_3
            ParticleSysBone = BAT_HEAD AragornElendill FollowBone:Yes
        End

		ModelConditionState          = USER_6
            Model               = guaragorn_ra
            ParticleSysBone = B_SWORDBONE ElendilNarsilLightMode FollowBone:Yes
            ParticleSysBone = NONE ElendilCoat FOLLOWBONE:YES
        End


        TransitionState                = TRANS_boredToAttention_Elendil
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE
            End
            FXEvent    = Name: FX_ElendilGlowEvent
        End

        TransitionState                = TRANS_attentionToBored_Elendil
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE_BACKWARDS
            End
            FXEvent                    = Name: FX_ElendilGlowEvent
            Flags                    = START_FRAME_LAST
        End

        TransitionState                = TRANS_boredToAttention
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE
            End
        End

        TransitionState                = TRANS_attentionToBored
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE_BACKWARDS
            End
            Flags                    = START_FRAME_LAST
        End







        AnimationState                =    MOUNTED FREEFALL
            Animation                =    freefall
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_FLYC
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState                =    MOUNTED STUNNED_FLAILING
            Animation                =    JustDie
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_FLYC
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState                =    MOUNTED DYING SPLATTED
            Animation                =    Land
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_LNDA
                AnimationMode        =    ONCE
            End
        End


        AnimationState                =    MOUNTED DYING
            Animation                =    JustDie
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_DIEA
                AnimationMode        =    ONCE
            End
        End

        AnimationState                =    MOUNTED STUNNED_STANDING_UP
            Animation                =    StandUp
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_GTPA
                AnimationMode        =    ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState                =    MOUNTED STUNNED
            Animation                =    Land
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_LNDA
                AnimationMode        =    ONCE
            End
        End



        AnimationState        =  MOUNTED FIRING_OR_PREATTACK_A ATTACKING_STRUCTURE
            StateName = Attacking
            Animation = attackinga  building while mounted.
                AnimationName           = RUHHs_Theo_SKL.RUHHs_Theo_ATKA
                AnimationMode       = ONCE
                UseWeaponTiming = Yes
            End
        End



        AnimationState        = MOUNTED MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = MountedRunAndFire
                AnimationName       = RUHHs_Theo_SKL.RUHHs_Theo_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState                =    MOUNTED FIRING_OR_PREATTACK_A
            Animation                =    AttackA
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_ATKA
                AnimationMode        =    ONCE
                UseWeaponTiming        = Yes
            End
            Animation                =    AttackB
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_ATKB

                AnimationMode        =    ONCE
                UseWeaponTiming        = Yes
            End
        End


        AnimationState                =    MOUNTED TURN_LEFT_HIGH_SPEED
            Animation                =    TurnLeft
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_TNL1
                AnimationMode        =    LOOP
                AnimationSpeedFactorRange= 1.2 1.2
                AnimationBlendTime    =    20
            End
        End

        AnimationState                =    MOUNTED TURN_RIGHT_HIGH_SPEED
            Animation                =    TurnLeft
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_TNR1
                AnimationMode        =    LOOP
                AnimationSpeedFactorRange= 1.2 1.2
                AnimationBlendTime    =    20
            End
        End




        AnimationState                =    MOUNTED MOVING TURN_LEFT
            Animation                =    TurnLeft
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_TRNL
                AnimationMode        =    LOOP
                AnimationSpeedFactorRange= 1.5 1.5
            End

        End

        AnimationState                =    MOUNTED MOVING TURN_RIGHT
            Animation                =    TurnRight
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_TRNR
                AnimationMode        =    LOOP
                AnimationSpeedFactorRange= 1.5 1.5
            End

        End

        AnimationState                =    MOUNTED MOVING ACCELERATE
            Animation                =    Accelerate
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_ACCL
                AnimationMode        =    LOOP
            End

        End

        AnimationState                =    MOUNTED MOVING DECELERATE
            Animation                =    Decelerate
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_DECL
                AnimationMode        =    ONCE
            End

        End

        AnimationState                =    MOUNTED MOVING WALKING
            Animation                =    Walk
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_WLKA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART

        End

        AnimationState                =    MOUNTED MOVING BACKING_UP
            Animation                =    BackingUp
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_BAKA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART

        End


        AnimationState                =    MOUNTED MOVING
            Animation                =    RunA
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_RUNA
                AnimationMode        =    LOOP
            End
             Flags                    =    RANDOMSTART

        End


        AnimationState                =    MOUNTED SELECTED
            SimilarRestart            =   Yes
            StateName                =    AtAttentionIdle
            Animation                =    ATNB
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_IDLH
                AnimationMode        =    LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
                if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
                if Prev == "STATE_CaptainMounted" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
            EndScript
        End

        TransitionState                =    TRANS_MountedSelect
            Animation                =    ATNA
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_ATNA
                AnimationMode        =    ONCE
            End
        End










        AnimationState = MOUNTED
            StateName = Idle
            Animation    =    IdleA
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_IDLA
                AnimationPriority    =    30
                AnimationMode        =    ONCE
                AnimationBlendTime    =    15
            End
            Animation                =    IdleC
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_IDLC
                AnimationMode        =    ONCE
                AnimationBlendTime    =    15
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End





        IdleAnimationState
            StateName                = STATE_bored

            Animation                = GUAragorn_IDLE
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLE
                AnimationMode        = ONCE
                AnimationPriority    = 12
            End

            Animation                = GUAragorn_IDLF
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLF
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if    Prev == "STATE_attention" or
                    Prev == "STATE_running" or
                    Prev == "OATH_BREAKERS" then CurDrawableSetTransitionAnimState("TRANS_attentionToBored") end
            EndScript
        End

        AnimationState            = THROWN_PROJECTILE
            Animation            = FLYA
                AnimationName    = GUAragorn_SKL.GUAragorn_FLYA
                AnimationMode    = LOOP
            End
        End

        AnimationState            = STUNNED_FLAILING
            Animation            = FLYA
                AnimationName    = GUAragorn_SKL.GUAragorn_FLYA
                AnimationMode    = LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
        End

        AnimationState             = DYING SPLATTED
            Animation         = Splatted_On_Ground
                AnimationName    = GUAragorn_SKL.GUAragorn_LNDA
                AnimationMode    = ONCE
            End
            EnteringStateFX        = FX_SoldierHitGround
        End


        AnimationState                = DYING
            Animation                = GUAragorn_DIEA
                AnimationName        = GUAragorn_SKL.GUAragorn_DIEA
                AnimationMode        = ONCE
            End
            Animation                = GUAragorn_DIEB
                AnimationName        = GUAragorn_SKL.GUAragorn_DIEB
                AnimationMode        = ONCE
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = GUAragorn_IDLE
                AnimationMode                = LOOP
            End
        End

        AnimationState                = STUNNED_STANDING_UP
            Animation                = GUAragorn_GTPB
                AnimationName        = GUAragorn_SKL.GUAragorn_GTPB
                AnimationMode        = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState            = STUNNED
            Animation            = LNDA
                AnimationName    = GUAragorn_SKL.GUAragorn_LNDA
                AnimationMode    = ONCE
            End
            EnteringStateFX        = FX_SoldierHitGround
        End








        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = GUAragorn_SKL.GUAragorn_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End



        AnimationState                = FIRING_OR_PREATTACK_A WEAPONSET_HERO_MODE
            StateName                = STATE_ready
            Animation                = ATKF
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKF
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
            FXEvent    = Frame:25 Name: FX_BladeMasterHitOrient
            FXEvent    = Frame:45 Name: FX_BladeMasterHitOrient
        End



        AnimationState                = FIRING_OR_PREATTACK_A
            StateName                = STATE_ready
            Animation                = ATKD
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKD
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
                AnimationPriority    = 3
            End
            Animation                = ATKE
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKE
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
                AnimationPriority    = 2
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End





        AnimationState                = MOVING
            StateName                = STATE_running

            Animation                = GUAragorn_RUNB
                AnimationName        = GUAragorn_SKL.GUAragorn_RUNB
                AnimationMode        = LOOP
            End
        End

        AnimationState                = LEVELED
            Animation                = LevelUp
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKO
                AnimationMode        = ONCE
            End
        End

        AnimationState                = SPECIAL_POWER_1
            StateName                = STATE_ready
            Animation                = GUAragorn_ATKL
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKL
                AnimationMode        = ONCE
            End
            ParticleSysBone            = B_SWORDBONE ElendilFlare FollowBone:Yes
            ParticleSysBone            = B_SWORDBONE ElendilSwordFlare FollowBone:Yes

        End

        AnimationState                = USER_2
            StateName                = ATHELAS
            Animation                = ATKP
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKP
                AnimationMode        = ONCE
            End
        End













        AnimationState                = HIT_REACTION HIT_LEVEL_3
            StateName                = STATE_bored
            Animation                = Hit_Level_1_b
                AnimationName        = GUAragorn_SKL.GUAragorn_HITB
                AnimationMode        = ONCE
            End
        End



        AnimationState                = EMOTION_CELEBRATING
            StateName                = STATE_ready
            Animation                = CHRB
                AnimationName        = GUAragorn_SKL.GUAragorn_CHRB
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = EMOTION_TAUNTING
            StateName                = STATE_ready
            Animation                = CHRB
                AnimationName        = GUAragorn_SKL.GUAragorn_CHRB
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = EMOTION_ALERT
            StateName                = STATE_ready
            Animation                = IDLA
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLA
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
        End

        AnimationState                = EMOTION_MORALE_HIGH
            StateName                = STATE_ready
            Animation                = ATKN
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKN
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Animation                = ATKP
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKP
                AnimationMode        = ONCE
                AnimationPriority    = 15
            End
            Animation                = TNTC
                AnimationName        = GUAragorn_SKL.GUAragorn_TNTD
                AnimationMode        = ONCE
                AnimationPriority    = 30
            End
            Animation                = TNTD
                AnimationName        = GUAragorn_SKL.GUAragorn_TNTD
                AnimationMode        = ONCE
                AnimationPriority    = 30
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = ENGAGED
            StateName                = STATE_ready
            Animation                = IDLA
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLA
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
                AnimationPriority    = 1
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = RAISING_FLAG
            StateName                = STATE_ready
            Animation                = CHRB
                AnimationName        = GUAragorn_SKL.GUAragorn_CHRB
                AnimationMode        = LOOP
            End
        End

        AnimationState                = SELECTED
            StateName                = STATE_attention
            Animation                = ATNE
                AnimationName        = GUAragorn_SKL.GUAragorn_ATNE
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
                AnimationMustCompleteBlend = Yes
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_bored" then CurDrawableSetTransitionAnimState("TRANS_boredToAttention") end
            EndScript
        End

    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End


    Draw = W3DScriptedModelDraw ModuleTag_LightController
        DefaultModelConditionState
            Model = None
        End
        ModelConditionState = USER_8
            Model           = exldrspimla
        End
    End


    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side = Men
    EditorSorting = UNIT
    ThreatLevel = ARAGORN_THREAT_LEVEL
    ThingClass = CHARACTER_UNIT
    TransportSlotCount = TRANSPORTSLOTCOUNT_HERO
    DisplayMeleeDamage = 450
    HeroSortOrder = 20
    BuildCost = STRONG_HERO_COST
    BuildTime = STRONG_HERO_BUILDTIME


    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY    GondorAragornNarsilSwordMod
    End

    WeaponSet
        Conditions        = WEAPONSET_HERO_MODE
        Weapon            = PRIMARY    GondorAragornHeroSwordMod
    End

    WeaponSet
        Conditions        = PASSENGER_TYPE_ONE
        Weapon            = SECONDARY    GondorAragornDwarfToss
    End

    ArmorSet
        Conditions        = None
        Armor             = VeryStrongHeroArmor
        DamageFX          = NormalDamageFX
    End

    ArmorSet
        Conditions        = MOUNTED
        Armor             = VeryStrongHeroArmorMounted
        DamageFX          = NormalDamageFX
    End


    VisionRange = 250
    ShroudClearingRange = 500
    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    BountyValue = GONDOR_ARAGORN_BOUNTY_VALUE
    DisplayName = OBJECT:GondorAragornsEntwicklung3
    RecruitText = CONTROLBAR:GondorAragornsEntwicklungRecruit
    ReviveText  = CONTROLBAR:GondorAragornRevive
    Hotkey      = CONTROLBAR:GondorAragornsEntwicklungHotkey3
    CrusherLevel          = 0
    MountedCrusherLevel   = 1
    CrushableLevel        = 3
    MountedCrushableLevel = 3

    CrushWeapon        = HeroCrush

    MinCrushVelocityPercent     = MINCRUSHVELOCITYPERCENT_HERO
    CrushDecelerationPercent    = CRUSHDECELERATIONPERCENT_HERO

    CrushKnockback = 40
    CrushZFactor   = 1.0


    CommandSet = GondorAragornsEntwicklung4CommandSet
    CommandPoints = 0

    Behavior = CommandSetUpgrade ModuleTag_BerenHerbs
        TriggeredBy        =  Upgrade_Mornamarth_Arrive
        CommandSet        = GondorAragornsEntwicklung4HerbsCommandSet
    End


    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_AragornBody

    AutoResolveArmor
        Armor = AutoResolve_AragornArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_AragornWeapon
    End

    AutoResolveLeadership = AutoResolve_AragornBonus




    VoiceAttack                    = AragornVoiceAttack
    VoiceAttackStructure            = AragornVoiceAttackBuilding
    VoiceAttackMachine            = AragornVoiceAttack
    VoiceAttackCharge                = AragornVoiceAttackCharge
    VoiceEnterStateAttack            = AragornVoiceEnterStateAttack
    VoiceEnterStateAttackStructure    = AragornVoiceEnterStateAttackBuilding
    VoiceEnterStateAttackMachine        = AragornVoiceEnterStateAttackBuilding
    VoiceEnterStateAttackCharge        = AragornVoiceEnterStateAttackCharge

    VoiceFear                     = AragornVoiceHelpMe
    VoiceMove                    = AragornVoiceMove
    VoiceMoveToCamp                = AragornVoiceMoveCamp
    VoiceMoveWhileAttacking            = AragornVoiceDisengage
    VoiceEnterStateMove            = AragornVoiceEnterStateMove
    VoiceEnterStateMoveToCamp        = AragornVoiceEnterStateMoveCamp
    VoiceEnterStateMoveWhileAttacking    = AragornVoiceEnterStateDisengage
    VoicePriority                = 90
    VoiceRetreatToCastle            = AragornVoiceRetreat
    VoiceEnterStateRetreatToCastle    = AragornVoiceEnterStateRetreat
    VoiceSelect                    = AragornVoiceSelectMS
    VoiceSelectBattle                = AragornVoiceSelectBattle
    VoiceGuard                    = AragornVoiceMove

    SoundImpact                    = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitElvenTransportShip    = AragornVoiceMove
        VoiceGarrison                        = AragornVoiceGarrison
        VoiceInitiateCaptureBuilding        = AragornVoiceMove
    End

    CrowdResponseKey = GoodMen

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
    EvaEventDieOwner                = AragornDie


    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Man Man_Male Unit Infantry Hero

    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:AragornVoiceElendil                 Animation:GUAragorn_SKL.GUAragorn_ATKL    Frames:21

        AnimationSound = Sound:AragornVoiceEnterStateElendil             Animation:GUAragorn_SKL.GUAragorn_ATKL    Frames:21

        AnimationSound = Sound:FootstepDirtA                    Animation:GUAragorn_SKL.GUAragorn_RUNB    Frames:8 17 26 36

        AnimationSound = Sound:BodyFallGenericNoArmor                Animation:GUAragorn_SKL.GUAragorn_DIEA    Frames:55
        AnimationSound = Sound:BodyFallGenericNoArmor                Animation:GUAragorn_SKL.GUAragorn_DIEB    Frames:70
        AnimationSound = Sound:BodyFallSoldier                    Animation:GUAragorn_SKL.GUAragorn_LNDA    Frames:1
    End



    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE HERO ARMY_SUMMARY ARAGORN HEAVY_MELEE_HITTER
    PathfindDiameter = 40.0

    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius             = EMOTION_CHEER_RADIUS
        MaxHealth                 = ARAGORNDAG_HEALTH
        PermanentlyKilledByFilter    = NONE
           DodgePercent              = HERO_DODGE_PERCENT
    End
    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                   = DYING
        DeathAnimationTime          = 3933
        RespawnAnim                 = LEVELED
        RespawnAnimationTime        = 2000
        AutoRespawnAtObjectFilter   = NONE +CASTLE_KEEP
        ButtonImage                 = HIElessar
        RespawnAsTemplate           = GondorAragornEntwicklung1

        RespawnRules =    AutoSpawn:No           Cost:STRONG_HERO_COST       Time:STRONG_HERO_RESPAWNTIME        Health:100%
   End


    Behavior = SubObjectsUpgrade ModuleTag_ShowAnduril
        TriggeredBy       = Upgrade_Anduril
        HideSubObjects    = SWORD
        ShowSubObjects    = ANDURIL ANDURIL02
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    #include "..\..\..\includes\CaptureBuilding.inc"


    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        AILuaEventsList                = AragornFunctions
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance                = 300
        TauntAndPointUpdateDelay            = 10000
        AddEmotion            =    Doom_Base



        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
         AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base


        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_GOOD_HERO_SPEED
    End

    LocomotorSet
        Locomotor = HeroHorseLocomotor
        Condition = SET_MOUNTED
        Speed     = 80
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 2133
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL AragornVoiceDie
    End

    Behavior = SquishCollide ModuleTag_06
    End

    Behavior = AttributeModifierUpgrade ModuleTag_FinrodBonus
        TriggeredBy       = Upgrade_RaiseShield
        AttributeModifier = FinarfinRingModifierHero
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
        SpecialPowerTemplate = SpecialAbilityAragornBladeMaster
        TriggeredBy = Upgrade_Level_2
        ObeyRechageOnTrigger    = Yes
    End

      Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        StartsPaused            = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        HeroAttributeModifier    = AragornBladeMasterMod
        HeroEffectDuration        = 30000
        UnpackTime              = 1
        TriggerSound            = AragornBladeMaster
    End

    Behavior = AutoAbilityBehavior ModuleTag_AragornBladeMasterAutoAbility

	SpecialAbility		= SpecialAbilityAragornBladeMaster
	ForbiddenStatus 	= INSIDE_GARRISON

	MaxScanRange		= 150
	Query			= 15 ALL ENEMIES
	Query			= 1 ANY ENEMIES +HERO +MONSTER

   End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 100
        HitReactionLifeTimer2 = 1000
        HitReactionLifeTimer3 = 1993

        HitReactionThreshold1 = 0.0
        HitReactionThreshold2 = 25.0
        HitReactionThreshold3 = 50.0
    End







    Behavior = AttributeModifierAuraUpdate ModuleTag_LeadershipAbendstern
        StartsActive     = No
        BonusName        = AragornGeschenkdesAbendsternsNew
        TriggeredBy      = Upgrade_Level_4
        RefreshDelay     = 2000
        Range            = 1
        AllowSelf        = Yes

        ObjectFilter     = NONE +GondorAragornEntwicklung1 +GondorAragornEntwicklung2 +GondorAragornEntwicklung3 +GondorAragornEntwicklung4
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AbendsternLeadership
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy = Upgrade_Level_4
    End

    Behavior = SpecialPowerModule ModuleTag_AbendsternLeadershipUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = No
        StartsPaused = Yes
    End







    Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership
        StartsActive    = No
        BonusName       = KonigderMenschenModifier
        TriggeredBy     = Upgrade_Level_10
        RefreshDelay    = 2000
        Range           = 200
        ObjectFilter    = GONDOR_LEADERSHIP_UNITS_OBF ;ANY +CAVALRY +INFANTRY -MACHINE -HERO -STRUCTURE -BASE_FOUNDATION -DOZER ALLIES
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership2
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy = Upgrade_Level_10
    End

    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = No
        StartsPaused = Yes
    End

    Behavior = CostModifierUpgrade ModuleTag_CostModifier
        LabelForPalantirString    = GUI:HERO_DISCOUNT
        TriggeredBy               = Upgrade_Level_10
        ObjectFilter              = ANY +HERO
        Percentage                = -15%
        Percentage                = -20%
        Percentage                = -25%
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EnableElendil
        SpecialPowerTemplate        = SpecialAbilityAragornElendil
        TriggeredBy                 = Upgrade_Level_6
        ObeyRechageOnTrigger        = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_ElendilStarter
        SpecialPowerTemplate        = SpecialAbilityAragornElendil
        UpdateModuleStartsAttack    = Yes
        AntiCategory                = LEADERSHIP INNATE_ARMOR
        AttributeModifier           = AragornElendilAntiCategory
        AttributeModifierRange      = 200.0
        StartsPaused                = Yes
        SetModelCondition           = ModelConditionState:USER_3
        SetModelConditionTime       = 10.0
    End

    Behavior = ModelConditionSpecialAbilityUpdate ModuleTag_ElendilUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornElendil
        UnpackTime              = 1400
        PreparationTime         = 1
        PersistentPrepTime      = 1000
        PackTime                = 1000

        GenerateTerror            = Yes
        EmotionPulseRadius        = 180
        ObjectFilter            = ELENDIL_OBJECT_FILTER
        AwardXPForTriggering    = 0
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornOathbreakersEnabler
        SpecialPowerTemplate      = SuperweaponSpawnOathbreakers
        TriggeredBy               = Upgrade_Level_10
        RequiresAllTriggers       = Yes
        ObeyRechageOnTrigger      = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLSpecialPower
        SpecialPowerTemplate      = SuperweaponSpawnOathbreakers
        OCL                       = OCL_GondorArmyofTheDeadEggAragorn
        CreateLocation            = CREATE_AT_LOCATION
        StartsPaused              = Yes
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornAthelas2
        SpecialPowerTemplate     = SpecialAbilityAragornAthelas
        TriggeredBy              = Upgrade_Level_3
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_AragornAthelas
        SpecialPowerTemplate     = SpecialAbilityAragornAthelas
        UpdateModuleStartsAttack = Yes
        TriggerFX                = FX_ElessarAthelas
        SetModelCondition        = ModelConditionState:USER_2
        SetModelConditionTime    = 2.1
    End

    Behavior = SpecialAbilityUpdate ModuleTag_AragornAthelasUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornAthelas
        StartAbilityRange       = 1.6
        UnpackTime              = 1
        PreparationTime         = 3
        PackTime                = 2096
        AwardXPForTriggering    = 0
    End

    Behavior = AutoAbilityBehavior ModuleTag_AthelasAutoAbility
        SpecialAbility    = SpecialAbilityAragornAthelas
        MaxScanRange      = 150
        Query             = 1 NONE +HERO ALLIES
    End


    Behavior = AutoHealBehavior ModuleTag_AthelasHealing
        StartsActive              = Yes
        ButtonTriggered           = Yes
        HealingAmount             = 2500
        Radius                    = 200
        HealOnlyOthers            = No
        SingleBurst               = Yes
        UnitHealPulseFX           = FX_ElessarAthelas
        KindOf                    = HERO
    End



Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornSuperAthelas2
        SpecialPowerTemplate = SpecialAbilityAragornSuperAthelas
        TriggeredBy = Upgrade_Level_5
        ObeyRechageOnTrigger    = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_AragornSuperAthelas
        SpecialPowerTemplate     = SpecialAbilityAragornSuperAthelas
        UpdateModuleStartsAttack = Yes
        TriggerFX                = FX_AragornAthelas
        SetModelCondition        = ModelConditionState:USER_5
        SetModelConditionTime    = 2.1
        StartsPaused             = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_AragornSuperAthelasUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornSuperAthelas
        StartAbilityRange       = 1.6
        UnpackTime              = 1
        PreparationTime         = 3
        PackTime                = 2096
        AwardXPForTriggering    = 0
    End

    Behavior = AutoAbilityBehavior ModuleTag_SuperAthelasAutoAbility
        SpecialAbility    = SpecialAbilityAragornSuperAthelas
        MaxScanRange    = 200
        Query            = 1 NONE +HERO ALLIES
    End


    Behavior = AutoHealBehavior ModuleTag_SuperAthelasHealing
        StartsActive                = Yes
        ButtonTriggered             = Yes
        HealingAmount               = 3500
        Radius                      = 200
        HealOnlyOthers              = No
        SingleBurst                 = Yes
        UnitHealPulseFX             = FX_AragornAthelas
        KindOf                      = HERO
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_UnpauseHorseToggle
        SpecialPowerTemplate        = SpecialAbilityToggleMounted
        TriggeredBy                    = Upgrade_Level_1
    End

    Behavior = SpecialPowerModule ModuleTag_HorseToggleStarter
         SpecialPowerTemplate      = SpecialAbilityToggleMounted
         UpdateModuleStartsAttack  = Yes
         StartsPaused 		   = Yes
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_HorseToggle
         SpecialPowerTemplate    = SpecialAbilityToggleMounted
         UnpackTime              = GOOD_MOUNT_TIME
         PreparationTime         = 1
         PersistentPrepTime      = 250
         PackTime                = GOOD_MOUNT_TIME
         OpacityTarget            = .3
         AwardXPForTriggering    = 0
    End



    Behavior = FireWeaponUpdate ModuleTag_WeaponFiring
        FireWeaponNugget
            WeaponName = AragornKingWeapon
            Offset = X:0 Y:0 Z:0
            FireDelay = 0
            OneShot = No
        End
    End




    Behavior = AutoHealBehavior ModuleTag_ElvenGiftHealing
        StartsActive          = No
        TriggeredBy           = Upgrade_Level_4
        HealingAmount         = ELVEN_GIFT_REGEN_AMOUNT
        HealingDelay          = ELVEN_GIFT_REGEN_DELAY
        StartHealingDelay     = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = AttributeModifierUpgrade ModuleTag_ElvenGiftBonus
        TriggeredBy = Upgrade_ElvenGift
        AttributeModifier = SpellBookElvenGifts
    End


    Behavior = AutoHealBehavior ModuleTag_AragornHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 1000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag
        FireWeaponNugget
            WeaponName = AragornRetterObjectDestroyWeapon
            FireDelay = 2000
            OneShot = Yes
        End
    End

    Behavior = ObjectCreationUpgrade ModuleTag_RetterObject
        TriggeredBy     = Upgrade_RaiseSchmiedekunst
        Delay           = 0
        ThingToSpawn    = RetterObjectAragorn
    End






    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate AragornBladeMasterAI
        CommandButtonName = Command_SpecialAbilityAragornBladeMaster3
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate AragornElendilAI
        CommandButtonName = Command_SpecialAbilityElendil
        SpecialPowerAIType = AI_SPECIAL_POWER_ELENDIL
        SpecialPowerRadius = 200
    End

    Behavior = AISpecialPowerUpdate SpecialPowerAragornAthelas
        CommandButtonName = Command_SpecialAbilityAthelasElessar
        SpecialPowerAIType = AI_SPECIAL_POWER_SELFAOEHEALHEROS
        SpecialPowerRadius = 30.0
    End

    Behavior = AISpecialPowerUpdate SpecialPowerAragornOathBreakers
        CommandButtonName = Command_SpawnOathbreakersMod
        SpecialPowerAIType = AI_SPECIAL_POWER_TARGETAOE_SUMMON
        SpecialPowerRadius = 30.0
    End

    Behavior = AISpecialPowerUpdate EomerToggleMountedAI
        CommandButtonName = Command_AragornKonigEllasar2
        SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_MOUNTED
    End


    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes
    Shadow = SHADOW_DECAL
    ShadowSizeX = 20
    ShadowSizeY = 20
    ShadowTexture = ShadowI
End



ChildObject GondorAragornEntwicklung2_Summoned GondorAragornEntwicklung2
    IsTrainable = No
    CommandPoints = 0
    CommandSet = GondorAragornsEntwicklung2SummonedFullCommandSet

    KindOf = +SUMMONED

    Behavior = ProductionUpdate ProductionUpdateModuleTag
        GiveNoXP = Yes
    End


    Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
        LevelToGrant = 5
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        TriggeredBy             = Upgrade_Level_1
        ObeyRechageOnTrigger    = Yes
    End

      Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        StartsPaused            = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        HeroAttributeModifier   = AragornBladeMasterMod
        HeroEffectDuration      = 30000
        UnpackTime              = 1
        TriggerSound            = AragornBladeMaster
    End

    Behavior = AutoAbilityBehavior ModuleTag_AragornBladeMasterAutoAbility
	SpecialAbility		= SpecialAbilityAragornBladeMaster
	ForbiddenStatus 	= INSIDE_GARRISON
	MaxScanRange		= 150
	Query			= 15 ALL ENEMIES
	Query			= 1 ANY ENEMIES +HERO +MONSTER
   End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EnableElendil
        SpecialPowerTemplate        = SpecialAbilityAragornElendil
        TriggeredBy                 = Upgrade_Level_1
        ObeyRechageOnTrigger        = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_ElendilStarter
        SpecialPowerTemplate        = SpecialAbilityAragornElendil
        UpdateModuleStartsAttack    = Yes
        AntiCategory                = LEADERSHIP INNATE_ARMOR
        AttributeModifier           = AragornElendilAntiCategory
        AttributeModifierRange      = 200.0
        StartsPaused                = Yes
        SetModelCondition           = ModelConditionState:USER_3
        SetModelConditionTime       = 10.0
        AvailableAtStart            = Yes
    End

    Behavior = ModelConditionSpecialAbilityUpdate ModuleTag_ElendilUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornElendil
        UnpackTime              = 1400
        PreparationTime         = 1
        PersistentPrepTime      = 1000
        PackTime                = 1000
        GenerateTerror          = Yes
        EmotionPulseRadius      = 180
        ObjectFilter            = ELENDIL_OBJECT_FILTER
        AwardXPForTriggering    = 0
    End

    Behavior = SubObjectsUpgrade ModuleTag_PlaneHidden
        TriggeredBy       = Upgrade_AllFactionUpgrade
        HideSubObjects    = PLANE02
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime      = 120000
        MaxLifetime      = 120000
        DeathType        = FADED
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 2500
        DestructionDelay = 2500
        Sound = INITIAL SpellGenericUnsummonFasterMS
        DeathFlags = DEATH_2
    End
End


Object RohanAragorn_HK


    SelectPortrait = HPAragornHD
    ButtonImage    = HIAragornHD

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_Aragorn

     EquivalentTo = GondorAragornEntwicklung1

    Draw = W3DScriptedModelDraw ModuleTag_DRAW
        DefaultModelConditionState
            Model           = guaragorn_hd
        End

        ModelConditionState = WEAPONSET_HERO_MODE USER_3
            ParticleSysBone = B_SWORDBONE AndurilRed FollowBone:Yes
            ParticleSysBone = BAT_HEAD AragornElendill FollowBone:Yes
        End

        ModelConditionState = WEAPONSET_HERO_MODE
            ParticleSysBone = B_SWORDBONE AndurilRed FollowBone:Yes
        End

        ModelConditionState = USER_3
            ParticleSysBone = BAT_HEAD AragornElendill FollowBone:Yes
        End



        TransitionState                = TRANS_boredToAttention_Elendil
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE
            End
            FXEvent    = Name: FX_ElendilGlowEvent
        End

        TransitionState                = TRANS_attentionToBored_Elendil
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE_BACKWARDS
            End
            FXEvent                    = Name: FX_ElendilGlowEvent
            Flags                    = START_FRAME_LAST
        End

        TransitionState                = TRANS_boredToAttention
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE
            End
        End

        TransitionState                = TRANS_attentionToBored
            Animation                = GUAragorn_ATND
                AnimationName        = GUAragorn_SKL.GUAragorn_ATND
                AnimationMode        = ONCE_BACKWARDS
            End
            Flags                    = START_FRAME_LAST
        End


        IdleAnimationState
            StateName                = STATE_bored

            Animation                = GUAragorn_IDLE
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLE
                AnimationMode        = ONCE
                AnimationPriority    = 12
            End

            Animation                = GUAragorn_IDLF
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLF
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if    Prev == "STATE_attention" or
                    Prev == "STATE_running" or
                    Prev == "OATH_BREAKERS" then CurDrawableSetTransitionAnimState("TRANS_attentionToBored") end
            EndScript
        End

        AnimationState            = THROWN_PROJECTILE
            Animation            = FLYA
                AnimationName    = GUAragorn_SKL.GUAragorn_FLYA
                AnimationMode    = LOOP
            End
        End

        AnimationState            = STUNNED_FLAILING
            Animation            = FLYA
                AnimationName    = GUAragorn_SKL.GUAragorn_FLYA
                AnimationMode    = LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
        End

        AnimationState             = DYING SPLATTED DEATH_1
            Animation         = Splatted_On_Ground
                AnimationName    = GUAragorn_SKL.GUAragorn_LNDA
                AnimationMode    = ONCE
            End
            EnteringStateFX        = FX_SoldierHitGround
        End


        AnimationState                = DYING DEATH_1
            Animation                = GUAragorn_DIEA
                AnimationName        = GUAragorn_SKL.GUAragorn_DIEA
                AnimationMode        = ONCE
            End
            Animation                = GUAragorn_DIEB
                AnimationName        = GUAragorn_SKL.GUAragorn_DIEB
                AnimationMode        = ONCE
            End
        End

        AnimationState                = DYING DEATH_2
            Animation                = FadeOut
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLE
                AnimationMode        = LOOP
            End
        End


        AnimationState                        = PARALYZED
            Animation
                AnimationName                = GUAragorn_IDLE
                AnimationMode                = LOOP
            End
        End

        AnimationState                = STUNNED_STANDING_UP
            Animation                = GUAragorn_GTPB
                AnimationName        = GUAragorn_SKL.GUAragorn_GTPB
                AnimationMode        = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState            = STUNNED
            Animation            = LNDA
                AnimationName    = GUAragorn_SKL.GUAragorn_LNDA
                AnimationMode    = ONCE
            End
            EnteringStateFX        = FX_SoldierHitGround
        End








        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = GUAragorn_SKL.GUAragorn_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End



        AnimationState                = FIRING_OR_PREATTACK_A WEAPONSET_HERO_MODE
            StateName                = STATE_ready
            Animation                = ATKF
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKF
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
            FXEvent    = Frame:25 Name: FX_BladeMasterHitOrient
            FXEvent    = Frame:45 Name: FX_BladeMasterHitOrient
        End



        AnimationState                = FIRING_OR_PREATTACK_A
            StateName                = STATE_ready
            Animation                = ATKD
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKD
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
                AnimationPriority    = 3
            End
            Animation                = ATKE
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKE
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
                AnimationPriority    = 2
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End







        AnimationState                = MOVING
            StateName                = STATE_running

            Animation                = GUAragorn_RUNB
                AnimationName        = GUAragorn_SKL.GUAragorn_RUNB
                AnimationMode        = LOOP
            End
        End

        AnimationState                = LEVELED
            Animation                = LevelUp
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKO
                AnimationMode        = ONCE
            End
        End

        AnimationState                = SPECIAL_POWER_1
            StateName                = STATE_ready
            Animation                = GUAragorn_ATKL
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKL
                AnimationMode        = ONCE
            End
            ParticleSysBone            = B_SWORDBONE ElendilFlare FollowBone:Yes
            ParticleSysBone            = B_SWORDBONE ElendilSwordFlare FollowBone:Yes

        End

        AnimationState                = USER_2
            StateName                = ATHELAS
            Animation                = ATKP
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKP
                AnimationMode        = ONCE
            End
        End













        AnimationState                = HIT_REACTION HIT_LEVEL_3
            StateName                = STATE_bored
            Animation                = Hit_Level_1_b
                AnimationName        = GUAragorn_SKL.GUAragorn_HITB
                AnimationMode        = ONCE
            End
        End



        AnimationState                = EMOTION_CELEBRATING
            StateName                = STATE_ready
            Animation                = CHRB
                AnimationName        = GUAragorn_SKL.GUAragorn_CHRB
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = EMOTION_TAUNTING
            StateName                = STATE_ready
            Animation                = CHRB
                AnimationName        = GUAragorn_SKL.GUAragorn_CHRB
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = EMOTION_ALERT
            StateName                = STATE_ready
            Animation                = IDLA
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLA
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
        End

        AnimationState                = EMOTION_MORALE_HIGH
            StateName                = STATE_ready
            Animation                = ATKN
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKN
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Animation                = ATKP
                AnimationName        = GUAragorn_SKL.GUAragorn_ATKP
                AnimationMode        = ONCE
                AnimationPriority    = 15
            End
            Animation                = TNTC
                AnimationName        = GUAragorn_SKL.GUAragorn_TNTD
                AnimationMode        = ONCE
                AnimationPriority    = 30
            End
            Animation                = TNTD
                AnimationName        = GUAragorn_SKL.GUAragorn_TNTD
                AnimationMode        = ONCE
                AnimationPriority    = 30
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = ENGAGED
            StateName                = STATE_ready
            Animation                = IDLA
                AnimationName        = GUAragorn_SKL.GUAragorn_IDLA
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
                AnimationPriority    = 1
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = RAISING_FLAG
            StateName                = STATE_ready
            Animation                = CHRB
                AnimationName        = GUAragorn_SKL.GUAragorn_CHRB
                AnimationMode        = LOOP
            End
        End

        AnimationState                = SELECTED
            StateName                = STATE_attention
            Animation                = ATNE
                AnimationName        = GUAragorn_SKL.GUAragorn_ATNE
                AnimationMode        = LOOP
                AnimationBlendTime    = 5
                AnimationMustCompleteBlend = Yes
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_bored" then CurDrawableSetTransitionAnimState("TRANS_boredToAttention") end
            EndScript
        End

    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End




    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side = Men
    EditorSorting = UNIT
    ThreatLevel = ARAGORN_THREAT_LEVEL
    ThingClass = CHARACTER_UNIT
    TransportSlotCount = TRANSPORTSLOTCOUNT_HERO
    DisplayMeleeDamage = 450
    HeroSortOrder = 20
    BuildCost = STRONG_HERO_COST
    BuildTime = STRONG_HERO_BUILDTIME


    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY    GondorAragornNarsilSwordMod
        Weapon            = QUINARY    MenLongShotFakeWeapon
        AutoChooseSources = QUINARY FROM_PLAYER FROM_SCRIPT
    End
    WeaponSet
        Conditions        = WEAPONSET_HERO_MODE
        Weapon            = PRIMARY    GondorAragornHeroSwordMod
        Weapon            = QUINARY    MenLongShotFakeWeapon
        AutoChooseSources = QUINARY FROM_PLAYER FROM_SCRIPT
    End
    WeaponSet
        Conditions        = PASSENGER_TYPE_ONE
        Weapon            = SECONDARY    GondorAragornDwarfToss
        Weapon            = QUINARY      MenLongShotFakeWeapon
        AutoChooseSources = QUINARY FROM_PLAYER FROM_SCRIPT
    End

    ArmorSet
        Conditions        = None
        Armor             = VeryStrongHeroArmor
        DamageFX          = NormalDamageFX
    End

    VisionRange = 250
    ShroudClearingRange = 500
    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    BountyValue = GONDOR_ARAGORN_BOUNTY_VALUE
    DisplayName = OBJECT:GondorAragornsEntwicklung2
    RecruitText = CONTROLBAR:GondorAragornsEntwicklungRecruit
    ReviveText    = CONTROLBAR:GondorAragornRevive
    Hotkey        = CONTROLBAR:GondorAragornsEntwicklungHotkey2
    CrushableLevel = 3



    CommandSet = RohanAragornCommandSet_forHK
    CommandPoints = 0



    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_AragornBody

    AutoResolveArmor
        Armor = AutoResolve_AragornArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_AragornWeapon
    End

    AutoResolveLeadership = AutoResolve_AragornBonus




    VoiceAttack                    = AragornVoiceAttack
    VoiceAttackStructure            = AragornVoiceAttackBuilding
    VoiceAttackMachine            = AragornVoiceAttack
    VoiceAttackCharge                = AragornVoiceAttackCharge
    VoiceEnterStateAttack            = AragornVoiceEnterStateAttack
    VoiceEnterStateAttackStructure    = AragornVoiceEnterStateAttackBuilding
    VoiceEnterStateAttackMachine        = AragornVoiceEnterStateAttackBuilding
    VoiceEnterStateAttackCharge        = AragornVoiceEnterStateAttackCharge
    VoiceFear                     = AragornVoiceHelpMe
    VoiceMove                    = AragornVoiceMove
    VoiceMoveToCamp                = AragornVoiceMoveCamp
    VoiceMoveWhileAttacking            = AragornVoiceDisengage
    VoiceEnterStateMove            = AragornVoiceEnterStateMove
    VoiceEnterStateMoveToCamp        = AragornVoiceEnterStateMoveCamp
    VoiceEnterStateMoveWhileAttacking    = AragornVoiceEnterStateDisengage
    VoicePriority                = 90
    VoiceRetreatToCastle            = AragornVoiceRetreat
    VoiceEnterStateRetreatToCastle    = AragornVoiceEnterStateRetreat
    VoiceSelect                    = AragornVoiceSelectMS
    VoiceSelectBattle                = AragornVoiceSelectBattle
    VoiceGuard                    = AragornVoiceMove

    SoundImpact                    = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitElvenTransportShip    = AragornVoiceMove
        VoiceGarrison                        = AragornVoiceGarrison
        VoiceInitiateCaptureBuilding        = AragornVoiceMove
    End

    CrowdResponseKey = GoodMen

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
    EvaEventDieOwner                = AragornDie


    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Man Man_Male Unit Infantry Hero

    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:AragornVoiceElendil                 Animation:GUAragorn_SKL.GUAragorn_ATKL    Frames:21

        AnimationSound = Sound:AragornVoiceEnterStateElendil             Animation:GUAragorn_SKL.GUAragorn_ATKL    Frames:21

        AnimationSound = Sound:FootstepDirtA                    Animation:GUAragorn_SKL.GUAragorn_RUNB    Frames:8 17 26 36

        AnimationSound = Sound:BodyFallGenericNoArmor                Animation:GUAragorn_SKL.GUAragorn_DIEA    Frames:55
        AnimationSound = Sound:BodyFallGenericNoArmor                Animation:GUAragorn_SKL.GUAragorn_DIEB    Frames:70
        AnimationSound = Sound:BodyFallSoldier                    Animation:GUAragorn_SKL.GUAragorn_LNDA    Frames:1
    End



    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE HERO ARMY_SUMMARY ARAGORN HEAVY_MELEE_HITTER
    PathfindDiameter = 40.0

    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius             = EMOTION_CHEER_RADIUS
        MaxHealth                 = ARAGORNDAG_HEALTH
        PermanentlyKilledByFilter    = NONE
           DodgePercent              = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                  = DYING
        DeathAnimationTime         = 3933
        RespawnAnim                = LEVELED
        RespawnAnimationTime       = 2000
        AutoRespawnAtObjectFilter  = NONE +CASTLE_KEEP
        ButtonImage                = HIAragornHD
        RespawnAsTemplate          = RohanAragorn_HK

        RespawnRules =    AutoSpawn:No           Cost:STRONG_HERO_COST       Time:STRONG_HERO_RESPAWNTIME        Health:100%
   End

    Behavior = SubObjectsUpgrade ModuleTag_ShowAnduril
        TriggeredBy       = Upgrade_Anduril
        HideSubObjects    = SWORD
        ShowSubObjects    = ANDURIL ANDURIL02
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    #include "..\..\..\includes\CaptureBuilding.inc"


    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        AILuaEventsList                = AragornFunctions
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance                = 300
        TauntAndPointUpdateDelay            = 10000
        AddEmotion            =    Doom_Base
        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
        AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base
        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_GOOD_HERO_SPEED
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 2133
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -FADED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL AragornVoiceDie
        DeathFlags = DEATH_1
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 2500
        DestructionDelay = 2500
        Sound = INITIAL SpellGenericUnsummonFasterMS
        DeathFlags = DEATH_2
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = AttributeModifierUpgrade ModuleTag_FinrodBonus
        TriggeredBy       = Upgrade_RaiseShield
        AttributeModifier = FinarfinRingModifierHero
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
        SpecialPowerTemplate = SpecialAbilityAragornBladeMaster
        TriggeredBy = Upgrade_Level_2
        ObeyRechageOnTrigger    = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        StartsPaused            = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        HeroAttributeModifier    = AragornBladeMasterMod
        HeroEffectDuration        = 30000
        UnpackTime              = 1
        TriggerSound            = AragornBladeMaster
    End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 100
        HitReactionLifeTimer2 = 1000
        HitReactionLifeTimer3 = 1993

        HitReactionThreshold1 = 0.0
        HitReactionThreshold2 = 25.0
        HitReactionThreshold3 = 50.0
    End

    Behavior = AutoAbilityBehavior ModuleTag_AragornBladeMasterAutoAbility

	SpecialAbility		= SpecialAbilityAragornBladeMaster
	ForbiddenStatus 	= INSIDE_GARRISON

	MaxScanRange		= 150
	Query			= 15 ALL ENEMIES
	Query			= 1 ANY ENEMIES +HERO +MONSTER

   End






    Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership
        StartsActive     = Yes
        BonusName        = KoniderTrolle
        RefreshDelay     = 2000
        Range            = 200

        ObjectFilter     = GONDOR_LEADERSHIP_UNITS_OBF ;ANY +INFANTRY +CAVALRY -HERO -STRUCTURE -MACHINE -SHIP ALLIES
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy = Upgrade_Level_1
    End

    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = No
        StartsPaused = No
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ArrowVolleyEvilEnabler
        SpecialPowerTemplate          = SpecialAbilityMenLongShot
        TriggeredBy                   = Upgrade_Level_7
        ObeyRechageOnTrigger          = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_ArrowVolleyEvil
        SpecialPowerTemplate          = SpecialAbilityMenLongShot
        OCL                           = OCL_LongShotAbility
        CreateLocation                = CREATE_AT_LOCATION
        UpdateModuleStartsAttack      = No
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FireballUpdate
        SpecialPowerTemplate          = SpecialAbilityMenLongShot
        PackTime                      = 5000
        MustFinishAbility             = Yes
        SpecialWeapon                 = MenLongShotWeapon
        NeedLivingTargets             = No

        ApproachRequiresLOS           = No
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EnableElendil
        SpecialPowerTemplate        = SpecialAbilityAragornElendil
        TriggeredBy                 = Upgrade_Level_6
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_ElendilStarter
        SpecialPowerTemplate        = SpecialAbilityAragornElendil
        UpdateModuleStartsAttack    = Yes
        AntiCategory                = LEADERSHIP INNATE_ARMOR
        AttributeModifier           = AragornElendilAntiCategory
        AttributeModifierRange      = 200.0
        StartsPaused                = Yes
        SetModelCondition           = ModelConditionState:USER_3
        SetModelConditionTime       = 10.0
    End

    Behavior = ModelConditionSpecialAbilityUpdate ModuleTag_ElendilUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornElendil
        UnpackTime              = 1400
        PreparationTime         = 1
        PersistentPrepTime      = 1000
        PackTime                = 1000

        GenerateTerror            = Yes
        EmotionPulseRadius        = 180
        ObjectFilter            = ELENDIL_OBJECT_FILTER
        AwardXPForTriggering    = 0
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornAthelas2
        SpecialPowerTemplate = SpecialAbilityAragornAthelas
        TriggeredBy             = Upgrade_Level_3
        ObeyRechageOnTrigger    = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_AragornAthelas
        SpecialPowerTemplate    = SpecialAbilityAragornAthelas
        UpdateModuleStartsAttack  = Yes
        TriggerFX                = FX_AragornAthelas
        SetModelCondition        = ModelConditionState:USER_2
        SetModelConditionTime    = 2.1
        StartsPaused             = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_AragornAthelasUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornAthelas
        StartAbilityRange       = 1.6
        UnpackTime              = 1
        PreparationTime         = 3
        PackTime                = 2096
        AwardXPForTriggering    = 0
    End

    Behavior = AutoAbilityBehavior ModuleTag_AthelasAutoAbility
        SpecialAbility    = SpecialAbilityAragornAthelas
        MaxScanRange    = 150
        Query            = 1 NONE +HERO ALLIES
    End

    Behavior = AutoHealBehavior ModuleTag_AthelasHealing
        StartsActive              = Yes
        ButtonTriggered           = Yes
        HealingAmount             = 1750
        Radius                    = 150
        HealOnlyOthers            = No
        SingleBurst               = Yes
        UnitHealPulseFX           = FX_AragornAthelas
        KindOf                    = HERO
    End


    Behavior = AutoHealBehavior ModuleTag_ElvenGiftHealing
        StartsActive          = No
        TriggeredBy           = Upgrade_Level_4
        HealingAmount         = ELVEN_GIFT_REGEN_AMOUNT
        HealingDelay          = ELVEN_GIFT_REGEN_DELAY
        StartHealingDelay     = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = AttributeModifierUpgrade ModuleTag_ElvenGiftBonus
        TriggeredBy = Upgrade_ElvenGift
        AttributeModifier = SpellBookElvenGifts
    End


    Behavior = AutoHealBehavior ModuleTag_AragornHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 1000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End






    Behavior = AISpecialPowerUpdate AragornBladeMasterAI
        CommandButtonName = Command_SpecialAbilityAragornBladeMaster2
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate AragornElendilAI
        CommandButtonName = Command_SpecialAbilityElendilMod
        SpecialPowerAIType = AI_SPECIAL_POWER_ELENDIL
        SpecialPowerRadius = 200
    End

    Behavior = AISpecialPowerUpdate SpecialPowerAragornAthelas
        CommandButtonName = Command_SpecialAbilityAragornAthelasMod2
        SpecialPowerAIType = AI_SPECIAL_POWER_SELFAOEHEALHEROS
        SpecialPowerRadius = 30.0
    End

    Behavior = AISpecialPowerUpdate TheodenToggleMountedAI
        CommandButtonName = Command_AragornEntwicklung3
        SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_MOUNTED
    End

    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes
    Shadow = SHADOW_DECAL
    ShadowSizeX = 20
    ShadowSizeY = 20
    ShadowTexture = ShadowI
End

