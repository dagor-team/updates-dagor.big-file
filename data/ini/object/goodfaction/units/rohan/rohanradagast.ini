Object RohanRadagast

    SelectPortrait = HPRadagast
    ButtonImage    = HIRadagast

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_SupportHero

    Draw = W3DScriptedModelDraw ModuleTag_DRAW

        OkToChangeModelColor = Yes
        StaticModelLODMode   = Yes

        ExtraPublicBone = STAFFFX

        DefaultModelConditionState
            Model               = luradagast_skn
            Skeleton            = IUSaruman_SKL
            WeaponLaunchBone    = PRIMARY STAFFFX
        End

        ModelConditionState     = ONE_RING
            Model               = luradagast_skn
            WeaponLaunchBone    = TERTIARY STAFF
        End

        IdleAnimationState
            StateName = Idle
            Animation = IDLB
                AnimationName       = IUSaruman_IDLB
                AnimationMode       = ONCE
                AnimationPriority   = 20
            End

            Animation = IDLC
                AnimationName       = IUSaruman_IDLC
                AnimationMode       = ONCE
                AnimationPriority   = 3
            End

            Animation = IDLD
                AnimationName       = IUSaruman_IDLD
                AnimationMode       = ONCE
                AnimationPriority   = 1
            End

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
            EndScript
        End

        AnimationState        = STUNNED_FLAILING
            Flags               = RANDOMSTART
            Animation           = FLYA
                AnimationName     = IUSaruman_FLYA
                AnimationMode     = LOOP
            End
        End


        AnimationState            = DYING BURNINGDEATH
            Animation
                AnimationName    = IUSaruman_DIEB
                AnimationMode    = ONCE
                AnimationBlendTime = 10
            End
        End

        AnimationState        = DYING SPLATTED
            Animation
                AnimationName     = IUSaruman_LNDA
                AnimationMode     = ONCE
            End
        End
        AnimationState        = DYING AFLAME
            Animation = DieAflame
                AnimationName     = IUSaruman_MFDA
                AnimationMode     = LOOP
            End
        End
        AnimationState        = DYING
            Animation = DieB
                AnimationName     = IUSaruman_DIEB
                AnimationMode     = ONCE
            End
        End



        AnimationState        = STUNNED_STANDING_UP
            Animation
                AnimationName     = IUSaruman_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End
        AnimationState        = STUNNED
            Animation
                AnimationName     = IUSaruman_LNDA
                AnimationMode     = ONCE
            End
        End

        AnimationState            = BURNINGDEATH
            Animation
                AnimationName    = IUSaruman_MFDA
                AnimationMode    = LOOP
                Distance        = 50
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = IUSaruman_IDLB
                AnimationMode                = LOOP
            End
        End


        AnimationState                = PACKING_TYPE_1
            StateName                = Dominate
            Animation
                AnimationName        = IUSaruman_ATKB
                AnimationMode        = ONCE
                AnimationBlendTime  = 5
            End
        End

        AnimationState                = PACKING_TYPE_2
            StateName                = Spped_Craft
            Animation
                AnimationName        = IUSaruman_TNTB
                AnimationMode        = ONCE
            End
            FXEvent    = Frame:15    Name: FX_SpeechCraft
        End

        AnimationState                = USER_2
            StateName                = Spped_Craft
            Animation
                AnimationName        = IUSaruman_TNTB
                AnimationMode        = ONCE
            End
            FXEvent    = Frame:15    Name: FX_SpeechCraft
        End





         AnimationState = MOVING FIRING_OR_PREATTACK_A
            Animation = TrotAndFire
                AnimationName = IUSaruman_ATRA
                AnimationMode = LOOP
            End
            Flags = RANDOMSTART

        End


         AnimationState                = MOVING USING_SPECIAL_ABILITY
             Flags                    = RANDOMSTART
             Animation                = IUSaruman_RUNB
                 AnimationName     = IUSaruman_RUNB
                 AnimationMode     = LOOP
             End
         End



         AnimationState            = MOVING BACKING_UP
            Animation            = BackingUp
                AnimationName    = IUSaruman_BAKA
                AnimationMode    = LOOP
            End
            Flags = RANDOMSTART
        End

        AnimationState        = MOVING ATTACKING
             Animation              = IUSaruman_RUNB
                 AnimationName     = IUSaruman_RUNB
                 AnimationMode     = LOOP
             End
        End

        AnimationState        = MOVING
             Animation                = IUSaruman_RUNA
                 AnimationName     = IUSaruman_RUNA
                 AnimationMode     = LOOP
             End
        End


        AnimationState          = SPECIAL_WEAPON_ONE
            Animation                = Throwing Fireball
                AnimationName        = IUSaruman_ATKB
                AnimationMode        = ONCE
            End
            FrameForPristineBonePositions = 27
        End


         AnimationState        =  SPECIAL_WEAPON_TWO
            StateName = Attacking
            Animation
                AnimationName       = IUSaruman_ATKB
                AnimationMode       = ONCE
            End
            FrameForPristineBonePositions = 27
        End


        AnimationState          = SPECIAL_WEAPON_THREE
            Animation                = Throwing Fireball
                AnimationName        = IUSaruman_SPCA
                AnimationMode        = ONCE
                UseWeaponTiming        =    Yes
            End

            FrameForPristineBonePositions = 48
        End

        AnimationState          = USER_2
            Animation
                AnimationName        = IUSaruman_SPCA
                AnimationMode        = ONCE
            End
        End



        AnimationState        = FIRING_OR_PREATTACK_A
            Animation           = IUSaruman_ATKC
                AnimationName     = IUSaruman_ATKC
                AnimationMode     = ONCE
                UseWeaponTiming        =    Yes
            End

            Animation           = IUSaruman_ATKD
                AnimationName     = IUSaruman_ATKD
                AnimationMode     = ONCE
                UseWeaponTiming        =    Yes
            End
        End

        AnimationState        = FIRING_OR_PREATTACK_A HERO
            Animation           = IUSaruman_ATKC
                AnimationName     = IUSaruman_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        =    Yes
            End
        End


        AnimationState = WAR_CHANT
            Animation = Chant
                AnimationName = IUSaruman_TNTB
                AnimationMode = LOOP
            End
        End

        AnimationState = EMOTION_TAUNTING
            Animation = Chant
                AnimationName = IUSaruman_TNTA
                AnimationMode = ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState = EMOTION_CELEBRATING
            Animation = Chant
                AnimationName = IUSaruman_TNTB
                AnimationMode = ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState = HIT_REACTION
            Animation = Hit_Level_1_a
                AnimationName = IUSaruman_HITA
                AnimationMode = ONCE
            End
        End


        AnimationState        = ATTACKING
            Animation           = ALERT_1
                AnimationName     = IUSaruman_IDLA
                AnimationMode     = LOOP
            End
        End

        TransitionState                    =    TRANS_Idle_to_Selected
            Animation                    =    ATNA
                AnimationName            =    IUSaruman_ATNA
                AnimationMode            =    ONCE
            End
        End

        TransitionState                    =    TRANS_Selected_To_Idle
            Animation                    =    ATND
                AnimationName            =    IUSaruman_ATND
                AnimationMode            =    ONCE
            End
        End


        AnimationState        = LEVELED
            Animation = Yippee
                AnimationName       = IUSaruman_TNTA
                AnimationMode       = ONCE
            End
        End


        AnimationState        = EMOTION_ALERT
            Animation           = ALERT_1
                AnimationName     = IUSaruman_IDLA
                AnimationMode     = LOOP
            End
        End

        AnimationState = RAISING_FLAG
            Animation = Chant
                AnimationName = IUSaruman_TNTA
                AnimationMode = ONCE
            End
            Animation = Chant
                AnimationName = IUSaruman_TNTB
                AnimationMode = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                =    SELECTED
            StateName                =    Selected
            SimilarRestart            =   Yes
            Animation                =    ATNB
                AnimationName        =    IUSaruman_ATNB
                AnimationMode        =    LOOP
                AnimationBlendTime  =   15
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
            EndScript
        End
    End


    Draw = W3DScriptedModelDraw ModuleTag_DrawMurderOfCrows

        DefaultModelConditionState
            Model           = None
        End

        ModelConditionState = USER_3
            Model        = Crebain_SKN
        End

        AnimationState    = USER_3
            Animation    = WBFBCloud
                AnimationName    = Crebain_SKL.Crebain_IDLB
                AnimationMode    = LOOP
            End
            Flags                = START_FRAME_FIRST
        End
    End


    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End


    #include "..\..\..\includes\StunDrawModuleSmall.inc"



    Side               = Rohan
    EditorSorting      = UNIT
    ThreatLevel        = GANDALF_THREAT_LEVEL
    ThingClass         = CHARACTER_UNIT
    DisplayMeleeDamage = MEDIUM_HERO_DAMAGE
    HeroSortOrder = 10
    IsTrainable          = Yes
    BuildCost            = RADAGASTDAG_COST
    BuildTime            = STRONG_HERO_BUILDTIME
    TransportSlotCount   = TRANSPORTSLOTCOUNT_HERO
    CommandSet           = RohanRadagastCommandSet
    CommandPoints        = 0

    WeaponSet
        Conditions = None
        Weapon = PRIMARY  RadagastStaff
    End

    WeaponSet
        Conditions        = PLAYER_UPGRADE
        Weapon            = PRIMARY        RadagastOneRingStaff
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = MediumHeroArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange                = VISION_HERO_STANDARD
    ShroudClearingRange        = SHROUD_CLEAR_HERO
    MaxVisionBonusPercent      = 300%
    VisionBonusTestRadius      = 200
    VisionBonusPercentPerFoot  = 1.0%
    BountyValue                = GONDOR_GANDALFWHITE_BOUNTY_VALUE
    DisplayName                = OBJECT:Radagast
    RecruitText                = CONTROLBAR:RadagastRecruit
    ReviveText                 = CONTROLBAR:RadagastRevive
    Hotkey                     = CONTROLBAR:RadagastHotkey
    CrusherLevel               = 0
    CrushableLevel             = 3



    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_GandalfBody

    AutoResolveWeapon
        Weapon = AutoResolve_GandalfWeapon
    End
    AutoResolveArmor
        Armor = AutoResolve_GandalfArmor
    End



    VoiceAttack               = RadagastVoiceAttack
    VoiceAttackMachine        = RadagastVoiceAttack
    VoiceAttackStructure      = RadagastVoiceAttack
    VoiceMove                 = RadagastVoiceMove
    VoiceMoveToCamp           = RadagastVoiceMove
    VoiceCreated              = RadagastVoiceCreated
    VoiceFullyCreated         = RadagastVoiceCreated
    VoicePriority             = 85
    VoiceRetreatToCastle      = RadagastVoiceSelect
    VoiceSelect               = RadagastVoiceSelect
    VoiceSelectBattle         = RadagastVoiceSelect
    VoiceGuard                = RadagastVoiceMove
    VoiceCreated              = RadagastVoiceMove
    VoiceFullyCreated         = RadagastVoiceMove

    SoundImpact               = ImpactHorse

    UnitSpecificSounds
        VoiceGarrison                       = RadagastVoiceMove
        VoiceEnterUnitElvenTransportShip    = RadagastVoiceMove
        VoiceInitiateCaptureBuilding        = RadagastVoiceMove
    End


    CrowdResponseKey = GoodMen

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Man Man_Male Unit Infantry Hero
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_ATKB    Frames:39 104
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_ATKC     Frames:43 92
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_ATKD     Frames:13 29 55
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_ATRA    Frames:9 20 31 43 55 67
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_DIEB    Frames:20
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:IUSaruman_SKL.IUSaruman_DIEB    Frames:34
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_GTPA    Frames:51 75 113 139
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_HITA    Frames:12
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_IDLC    Frames:116 188
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_IDLD    Frames:43
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:IUSaruman_SKL.IUSaruman_LNDA    Frames:4
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_MFDA    Frames:10 19 29 39 48 57 66
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_RUNA    Frames:11 22 34 46 57 69
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_RUNB    Frames:10 23 36 49 62 75
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_TNTA    Frames:36 49 103 123
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_TNTB    Frames:24 111
    End



    RadarPriority        = UNIT
    KindOf               = HERO HEAVY_MELEE_HITTER PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ATTACK_NEEDS_LINE_OF_SIGHT NOTIFY_OF_PREATTACK ARMY_SUMMARY
    PathfindDiameter     = 40.0

    Behavior = AutoHealBehavior ModuleTag_ElvenGiftHealing
        StartsActive              = No
        TriggeredBy               = Upgrade_ThorinOrkrist
        HealingAmount             = ELVEN_GIFT_REGEN_AMOUNT
        HealingDelay              = ELVEN_GIFT_REGEN_DELAY
        StartHealingDelay         = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat     = Yes
    End

    Behavior = AttributeModifierUpgrade ModuleTag_ElvenGiftBonus
        TriggeredBy          = Upgrade_ElvenGift
        AttributeModifier    = SpellBookElvenGifts
    End

    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius                = EMOTION_CHEER_RADIUS
        MaxHealth                  = RADAGASTDAG_HEALTH
        PermanentlyKilledByFilter  = NONE
        DodgePercent               = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                   = DYING
        DeathAnimationTime          = 5367
        RespawnAnim                 = LEVELED
        RespawnAnimationTime        = 2000
        AutoRespawnAtObjectFilter   = NONE +CASTLE_KEEP
        ButtonImage                 = HIRadagast
        RespawnAsTemplate           = RohanRadagast

        RespawnRules =    AutoSpawn:No           Cost:RADAGASTDAG_COST       Time:STRONG_HERO_RESPAWNTIME        Health:100%
   End

    Behavior = AutoHealBehavior ModuleTag_GandalfHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 1000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    #include "..\..\..\includes\CaptureBuilding.inc"

    Behavior = AIUpdateInterface ModuleTag_04
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        AILuaEventsList            = RadagastFunctions
    End





    Behavior = CitadelSlaughterHordeContain ModuleTag_SlaughterMe
        PassengerFilter              = NONE +TheDroppedRing
        ObjectStatusOfContained      = UNSELECTABLE ENCLOSED
        ContainMax                   = 1
        AllowEnemiesInside           = No
        AllowAlliesInside            = Yes
        AllowNeutralInside           = No
        AllowOwnPlayerInsideOverride = Yes
        EnterSound                   = Radagast_RingReturned
        EntryOffset                  = X:0.0 Y:0.0 Z:0.0
        EntryPosition                = X:0.0 Y:0.0 Z:0.0
        ExitOffset                   = X:0.0 Y:0.0 Z:0.0
        StatusForRingEntry           = HOLDING_THE_RING
        UpgradeForRingEntry          = Upgrade_RingHero Upgrade_FortressRingHero
        ObjectToDestroyForRingEntry  = NONE +TheDroppedRing
        FXForRingEntry               = FX_OneRingFlare
    End

    Behavior = ModelConditionUpgrade ModulTag_RingHeroMC
        TriggeredBy         = Upgrade_RingHero Upgrade_FortressRingHero
        RequiresAllTriggers = Yes
        AddConditionFlags   = ONE_RING
    End

    Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
        SkirmishAIOnly = Yes
        StuffToPickUp = NONE +TheDroppedRing
        ScanRange = 3000
        ScanIntervalSeconds = 0.5
    End

    Behavior = PassiveAreaEffectBehavior ModuleTag_FeelGoodHero2
        EffectRadius            = 300
        PingDelay               = 2000
        UpgradeRequired         = Upgrade_TestBuilding_2
        ModifierName            = RadagastHamaModifier
        AllowFilter             = ANY +RohanHama ALLIES
    End


    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance               = 300
        TauntAndPointUpdateDelay            = 10000
        AddEmotion            =    Doom_Base
        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
        AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base
        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End

    LocomotorSet
        Locomotor = HumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_EVIL_FAST_HERO_SPEED
    End

    LocomotorSet
        Locomotor = HumanWanderLocomotor
        Condition = SET_WANDER
        Speed     = 32
    End


    Behavior = PhysicsBehavior ModuleTag_05
        GravityMult = 1.0
        ShockStandingTime = 3800
    End

    Behavior = SlowDeathBehavior ModuleTag_06
        DeathTypes = ALL -KNOCKBACK
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL GandalfVoiceDie
    End

    Behavior = SquishCollide ModuleTag_07

    End

    Behavior = SlowDeathBehavior ModuleTag_08
        DeathTypes = NONE +KNOCKBACK
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
    End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 2000
        HitReactionThreshold1 = 5.0
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_DornengestruppEnabler
        SpecialPowerTemplate       = SpecialAbilityRadagastDornengestrupp
        TriggeredBy                = Upgrade_Level_1
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLDornengestruppSpecialPower
        SpecialPowerTemplate       = SpecialAbilityRadagastDornengestrupp
        OCL                        = OCL_RadagastDornengestrupp
        CreateLocation             = CREATE_AT_LOCATION
        StartsPaused               = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_DornengestruppAnimation
        UnpackTime                 = 1000
        UnpackingVariation         = 1
        SpecialPowerTemplate       = SpecialAbilityRadagastDornengestrupp
        PreparationTime            = 0
        PersistentPrepTime         = 0
        PackTime                   = 1330
    End

    Behavior = AutoAbilityBehavior ModuleTag_DornengestruppAutoAbility
	SpecialAbility		= SpecialAbilityRadagastDornengestrupp
	ForbiddenStatus 	= INSIDE_GARRISON
	MaxScanRange		= 100
	Query			= 3 ALL ENEMIES -STRUCTURE -MACHINE
   End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_RadaKrahenrufEnabler
        SpecialPowerTemplate       = SpecialAbilityRadagastKrahenruf
        TriggeredBy                = Upgrade_Level_3
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLRadaKrahenrufSpecialPower
        SpecialPowerTemplate       = SpecialAbilityRadagastKrahenruf
        OCL                        = OCL_RadagastKrahenruf
        CreateLocation             = CREATE_AT_EDGE_NEAR_TARGET_AND_MOVE_TO_LOCATION
        StartsPaused               = Yes
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_HorseToggleEnabler
        SpecialPowerTemplate            = SpecialAbilityAdlerAufsteigen
        TriggeredBy                     = Upgrade_Level_5
        ObeyRechageOnTrigger            = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_HorseToggleStarter
         SpecialPowerTemplate           = SpecialAbilityAdlerAufsteigen
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = Yes
         AvailableAtStart               = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_HorseToggle
         SpecialPowerTemplate    = SpecialAbilityAdlerAufsteigen
         MountedTemplate         = RohanRadagastaufdemAdler
         SynchronizeTimerOnSpecialPower = SpecialAbilityRadagastDornengestrupp SpecialAbilityRadagastKrahenruf SpecialAbilityRadagastFreunde SpecialAbilityRadagastWordOfPoultry SpecialAbilityNatursanktum
         UnpackTime              = 2000
         PreparationTime         = 0
         PackTime                = 0
         OpacityTarget           = .0
         AwardXPForTriggering    = 0
         IgnoreFacingCheck       = Yes
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroWordOfPoultryEnabler
        SpecialPowerTemplate      = SpecialAbilityRadagastWordOfPoultry
        TriggeredBy               = Upgrade_Level_7
        ObeyRechageOnTrigger      = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_CreateAHeroWordOfPoultryStarter
        SpecialPowerTemplate      = SpecialAbilityRadagastWordOfPoultry
        StartsPaused              = Yes
    End

    Behavior = ReplaceObjectUpdate ModuleTag_WordOfPoultryUpdate
        SpecialPowerTemplate      = SpecialAbilityRadagastWordOfPoultry
        UnpackingVariation        = 2
        UnpackTime                = 800
        PreparationTime           = 1

        PackTime                  = 100
        AwardXPForTriggering      = 0
        StartAbilityRange         = CREATE_A_HERO_WORD_OF_POULTRY_RANGE_L2
        MustFinishAbility         = Yes

        ReplaceObject
            TargetObjectFilter    = CREATE_A_HERO_WORD_OF_POULTRY_OBJECT_FILTER
            ReplacementObjectName = Chicken_Replacement Rabbit_Replacement Dog_Replacement Dog1_Replacement Racoon_Replacement Duck_Replacement Cow_Replacement Sheep_Replacement Crow_Replacement
        End
        ReplaceRadius             = 50
        ReplaceFX                 = FX_CreateAHeroReplaceObject
        Scatter                   = Yes
    End

    Behavior = AutoAbilityBehavior ModuleTag_WordOfPoultryAutoAbilityBehavior
	SpecialAbility		= SpecialAbilityRadagastWordOfPoultry
	Query			= 15 ANY ENEMIES +INFANTRY +CAVALRY -STRUCTURE
	MaxScanRange		= 150
   End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy = Upgrade_Level_1
    End

    Behavior = FireWeaponUpdate ModuleTag_WeaponFiring
        FireWeaponNugget
            WeaponName = RadagastWindRadiusWeapon
            Offset     = X:0 Y:0 Z:0
            FireDelay  = 0
            OneShot    = No
        End
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FreundeEnabler
        SpecialPowerTemplate  = SpecialAbilityRadagastFreunde
        TriggeredBy           = Upgrade_Level_10
        ObeyRechageOnTrigger  = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLSpecialPowerFreunde
        SpecialPowerTemplate  = SpecialAbilityRadagastFreunde
        OCL                   = OCL_SpawnEaglesRadagsast
        CreateLocation        = CREATE_ABOVE_LOCATION
        StartsPaused          = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_FreundeAnimation
        UnpackTime            = 1000
        UnpackingVariation    = 2
        SpecialPowerTemplate  = SpecialAbilityRadagastFreunde
        PreparationTime       = 0
        PersistentPrepTime    = 0
        PackTime              = 1330
    End

    Behavior = AutoAbilityBehavior ModuleTag_FreundeAutoAbility
	SpecialAbility		= SpecialAbilityRadagastFreunde
	ForbiddenStatus 	= INSIDE_GARRISON
	MaxScanRange		= 150
	Query			= 1 ANY ENEMIES +HERO +MONSTER +MACHINE
	Query			= 2 ALL ENEMIES -STRUCTURE -MACHINE
   End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_OCLNatursanktumEnabler
       SpecialPowerTemplate        = SpecialAbilityNatursanktum
       TriggeredBy                 = Upgrade_RingHero
       ObeyRechageOnTrigger        = Yes
    End

    Behavior = OCLSpecialPower  ModuleTag_OCLNatursanktum
       SpecialPowerTemplate        = SpecialAbilityNatursanktum
       OCL                         = OCL_RadagastNatursanktumEgg
       CreateLocation              = CREATE_AT_LOCATION
       StartsPaused                = Yes
       SetModelCondition           = ModelConditionState:USER_2
       SetModelConditionTime       = 2.1
    End


    Behavior = SpecialPowerModule ModuleTag_GeprufteStarter
         SpecialPowerTemplate           = SpecialAbilityGandalfGeprufte
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Geprufte
         SpecialPowerTemplate           = SpecialAbilityGandalfGeprufte
         MountedTemplate                = RohanRadagast_RingHero
         SynchronizeTimerOnSpecialPower = SpecialAbilityRadagastWordOfPoultry SpecialAbilityNatursanktum SpecialAbilityRadagastDornengestrupp SpecialAbilityRadagastKrahenruf SpecialAbilityRadagastFreunde
         UnpackTime                     = OBJECT_TOGGLE_TIME
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End

    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy                     = Upgrade_RingHero
        GetUpgradeCommandButtonName     = Command_SpecialAbilityGandalfGeprufte
    End

    Behavior = AttributeModifierUpgrade ModuleTag_RuhmdesKonigsBonus
        TriggeredBy       = Upgrade_RuhmdesKonigsUpgrade
        AttributeModifier = UpgradeRuhmdesKonigs
    End


    Behavior = ProductionUpdate ProductionUpdateModuleTag
        GiveNoXP                   = Yes
    End



    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName  = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName  = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName  = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate ElvenLorienWarriorHordeCaptureBuildingAI
        CommandButtonName  = Command_CaptureBuilding
        SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
    End


    Behavior = AISpecialPowerUpdate GandalfWizardBlastAI
        CommandButtonName = Command_SpecialAbilityRadagastDornengestrupp
        SpecialPowerAIType = AI_SPECIAL_POWER_GANDALF_WIZARD_BLAST
        SpecialPowerRadius = 100
    End

    Behavior = AISpecialPowerUpdate SpecialPowerAragornOathBreakers
        CommandButtonName = Command_SpecialAbilityRadagastFreunde
        SpecialPowerAIType = AI_SPECIAL_POWER_TARGETAOE_SUMMON
        SpecialPowerRadius = 30.0
    End

    Behavior = AISpecialPowerUpdate TheodenToggleMountedAI
        CommandButtonName = Command_RadagastAdleraufsteigen
        SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_MOUNTED
    End

    Behavior = AISpecialPowerUpdate WordOfPoultryL2AI
        CommandButtonName = Command_SpecialAbilityRadagastConvertEnemy
        SpecialPowerAIType = AI_SPECIAL_POWER_RANGED_AOE_ATTACK
    End

    Behavior = AISpecialPowerUpdate RoyalGuardAI
        CommandButtonName = Command_RadagastKraenRuf
        SpecialPowerAIType = AI_SPECIAL_POWER_TARGETAOE_SUMMON
        SpecialPowerRadius = 30.0
    End

    Geometry            = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryHeight      = 25
    GeometryIsSmall     = Yes

    Shadow              = SHADOW_DECAL
    ShadowSizeX         = 20
    ShadowSizeY         = 20
    ShadowTexture       = ShadowI
End


ChildObject RohanRadagast_RingHero RohanRadagast

    Draw = W3DScriptedModelDraw ModuleTag_DRAW

        OkToChangeModelColor = Yes
        StaticModelLODMode   = Yes
        ExtraPublicBone      = STAFFFX

        DefaultModelConditionState
            Model               = luradagast_skn
            Skeleton            = IUSaruman_SKL
            WeaponLaunchBone    = PRIMARY STAFFFX
        End

		ModelConditionState = WORLD_BUILDER
			Model = luradagast_skn
		End


        IdleAnimationState
            StateName = Idle
            Animation = IDLB
                AnimationName       = IUSaruman_IDLB
                AnimationMode       = ONCE
                AnimationPriority   = 20
            End

            Animation = IDLC
                AnimationName       = IUSaruman_IDLC
                AnimationMode       = ONCE
                AnimationPriority   = 3
            End

            Animation = IDLD
                AnimationName       = IUSaruman_IDLD
                AnimationMode       = ONCE
                AnimationPriority   = 1
            End

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
            EndScript
        End

        AnimationState        = STUNNED_FLAILING
            Flags               = RANDOMSTART
            Animation           = FLYA
                AnimationName     = IUSaruman_FLYA
                AnimationMode     = LOOP
            End
        End


        AnimationState            = DYING BURNINGDEATH
            Animation
                AnimationName    = IUSaruman_DIEB
                AnimationMode    = ONCE
                AnimationBlendTime = 10
            End
        End

        AnimationState        = DYING SPLATTED
            Animation
                AnimationName     = IUSaruman_LNDA
                AnimationMode     = ONCE
            End
        End
        AnimationState        = DYING AFLAME
            Animation = DieAflame
                AnimationName     = IUSaruman_MFDA
                AnimationMode     = LOOP
            End
        End
        AnimationState        = DYING
            Animation = DieB
                AnimationName     = IUSaruman_DIEB
                AnimationMode     = ONCE
            End
        End



        AnimationState        = STUNNED_STANDING_UP
            Animation
                AnimationName     = IUSaruman_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End
        AnimationState        = STUNNED
            Animation
                AnimationName     = IUSaruman_LNDA
                AnimationMode     = ONCE
            End
        End

        AnimationState            = BURNINGDEATH
            Animation
                AnimationName    = IUSaruman_MFDA
                AnimationMode    = LOOP
                Distance        = 50
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = IUSaruman_IDLB
                AnimationMode                = LOOP
            End
        End

        AnimationState                = PACKING_TYPE_1
            StateName                = Dominate
            Animation
                AnimationName        = IUSaruman_ATKB
                AnimationMode        = ONCE
                AnimationBlendTime  = 5
            End
        End

        AnimationState                = PACKING_TYPE_2
            StateName                = Spped_Craft
            Animation
                AnimationName        = IUSaruman_TNTB
                AnimationMode        = ONCE
            End
            FXEvent    = Frame:15    Name: FX_SpeechCraft
        End

        AnimationState                = USER_2
            StateName                = Spped_Craft
            Animation
                AnimationName        = IUSaruman_TNTB
                AnimationMode        = ONCE
            End
            FXEvent    = Frame:15    Name: FX_SpeechCraft
        End





         AnimationState = MOVING FIRING_OR_PREATTACK_A
            Animation = TrotAndFire
                AnimationName = IUSaruman_ATRA
                AnimationMode = LOOP
            End
            Flags = RANDOMSTART

        End


         AnimationState                = MOVING USING_SPECIAL_ABILITY
             Flags                    = RANDOMSTART
             Animation                = IUSaruman_RUNB
                 AnimationName     = IUSaruman_RUNB
                 AnimationMode     = LOOP
             End
         End



         AnimationState            = MOVING BACKING_UP
            Animation            = BackingUp
                AnimationName    = IUSaruman_BAKA
                AnimationMode    = LOOP
            End
            Flags = RANDOMSTART
        End

        AnimationState        = MOVING ATTACKING
             Animation              = IUSaruman_RUNB
                 AnimationName     = IUSaruman_RUNB
                 AnimationMode     = LOOP
             End
        End

        AnimationState        = MOVING
             Animation                = IUSaruman_RUNA
                 AnimationName     = IUSaruman_RUNA
                 AnimationMode     = LOOP
             End
        End


        AnimationState          = SPECIAL_WEAPON_ONE
            Animation                = Throwing Fireball
                AnimationName        = IUSaruman_ATKB
                AnimationMode        = ONCE
            End
            FrameForPristineBonePositions = 27
        End


         AnimationState        =  SPECIAL_WEAPON_TWO
            StateName = Attacking
            Animation
                AnimationName       = IUSaruman_ATKB
                AnimationMode       = ONCE
            End
            FrameForPristineBonePositions = 27
        End


        AnimationState          = SPECIAL_WEAPON_THREE
            Animation                = Throwing Fireball
                AnimationName        = IUSaruman_SPCA
                AnimationMode        = ONCE
                UseWeaponTiming        =    Yes
            End

            FrameForPristineBonePositions = 48
        End

        AnimationState          = USER_2
            Animation
                AnimationName        = IUSaruman_SPCA
                AnimationMode        = ONCE
            End
        End



        AnimationState        = FIRING_OR_PREATTACK_A
            Animation           = IUSaruman_ATKC
                AnimationName     = IUSaruman_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        =    Yes
            End
        End

        AnimationState        = FIRING_OR_PREATTACK_A HERO
            Animation           = IUSaruman_ATKC
                AnimationName     = IUSaruman_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        =    Yes
            End
        End

        AnimationState        = FIRING_OR_PREATTACK_B
            Animation           = IUSaruman_ATKC
                AnimationName     = IUSaruman_ATKC
                AnimationMode     = ONCE
                UseWeaponTiming        =    Yes
            End
            Animation           = IUSaruman_ATKD
                AnimationName     = IUSaruman_ATKD
                AnimationMode     = ONCE
                UseWeaponTiming        =    Yes
            End
        End

        AnimationState        = FIRING_OR_PREATTACK_B HERO
            Animation           = IUSaruman_ATKC
                AnimationName     = IUSaruman_ATKC
                AnimationMode     = ONCE
                UseWeaponTiming        =    Yes
            End
            Animation           = IUSaruman_ATKD
                AnimationName     = IUSaruman_ATKD
                AnimationMode     = ONCE
                UseWeaponTiming        =    Yes
            End
        End

        AnimationState = WAR_CHANT
            Animation = Chant
                AnimationName = IUSaruman_TNTB
                AnimationMode = LOOP
            End
        End

        AnimationState = EMOTION_TAUNTING
            Animation = Chant
                AnimationName = IUSaruman_TNTA
                AnimationMode = ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState = EMOTION_CELEBRATING
            Animation = Chant
                AnimationName = IUSaruman_TNTB
                AnimationMode = ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState = HIT_REACTION
            Animation = Hit_Level_1_a
                AnimationName = IUSaruman_HITA
                AnimationMode = ONCE
            End
        End


        AnimationState        = ATTACKING
            Animation           = ALERT_1
                AnimationName     = IUSaruman_IDLA
                AnimationMode     = LOOP
            End
        End

        TransitionState                    =    TRANS_Idle_to_Selected
            Animation                    =    ATNA
                AnimationName            =    IUSaruman_ATNA
                AnimationMode            =    ONCE
            End
        End

        TransitionState                    =    TRANS_Selected_To_Idle
            Animation                    =    ATND
                AnimationName            =    IUSaruman_ATND
                AnimationMode            =    ONCE
            End
        End


        AnimationState        = LEVELED
            Animation = Yippee
                AnimationName       = IUSaruman_TNTA
                AnimationMode       = ONCE
            End
        End


        AnimationState        = EMOTION_ALERT
            Animation           = ALERT_1
                AnimationName     = IUSaruman_IDLA
                AnimationMode     = LOOP
            End
        End

        AnimationState = RAISING_FLAG
            Animation = Chant
                AnimationName = IUSaruman_TNTA
                AnimationMode = ONCE
            End
            Animation = Chant
                AnimationName = IUSaruman_TNTB
                AnimationMode = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                =    SELECTED
            StateName                =    Selected
            SimilarRestart            =   Yes
            Animation                =    ATNB
                AnimationName        =    IUSaruman_ATNB
                AnimationMode        =    LOOP
                AnimationBlendTime  =   15
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
            EndScript
        End
    End


    Draw = W3DScriptedModelDraw ModuleTag_DrawMurderOfCrows

        DefaultModelConditionState
            Model           = None
        End

        ModelConditionState = USER_3
            Model        = Crebain_SKN
        End

        AnimationState    = USER_3
            Animation    = WBFBCloud
                AnimationName    = Crebain_SKL.Crebain_IDLB
                AnimationMode    = LOOP
            End
            Flags                = START_FRAME_FIRST
        End
    End


    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG
    CrushableLevel             = 4
	DisplayMeleeDamage		= RADAGASTDAG_DAMAGE

    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY    RadagastOneRingStaff
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
        Weapon            = SECONDARY  RadagastStaff
        OnlyAgainst       = SECONDARY  STRUCTURE BLOCKING_GATE
    End

    ArmorSet
        Conditions      = None
        Armor           = SilmarilHeroArmor
        DamageFX        = NormalDamageFX
    End

    KindOf = HERO HEAVY_MELEE_HITTER PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ATTACK_NEEDS_LINE_OF_SIGHT NOTIFY_OF_PREATTACK ARMY_SUMMARY

    CommandSet              = RohanRadagastRingCommandSet

    Behavior = FXListDie ModuleTag_AnnounceWeLostTheRing
        DeathFX             = GandalfAnnounceFortressDeathLostRingFX
    End

    Behavior = CreateObjectDie ModuleTag_DropTheRing
        CreationList        = OCL_TheOneRing
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_HorseToggleEnabler
        SpecialPowerTemplate            = SpecialAbilityAdlerAufsteigen
        TriggeredBy                     = Upgrade_Level_5
        ObeyRechageOnTrigger            = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_HorseToggleStarter
         SpecialPowerTemplate           = SpecialAbilityAdlerAufsteigen
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = Yes
         AvailableAtStart               = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_HorseToggle
         SpecialPowerTemplate    = SpecialAbilityAdlerAufsteigen
         MountedTemplate            = RohanRadagastaufdemAdler_RingHero
         SynchronizeTimerOnSpecialPower = SpecialAbilityRadagastDornengestrupp SpecialAbilityRadagastFreunde SpecialAbilityRadagastWordOfPoultry SpecialAbilityRadagastKrahenruf SpecialAbilityNatursanktum
         UnpackTime              = 2000
         PreparationTime         = 0
         PackTime                = 0
         OpacityTarget           = .0
         AwardXPForTriggering    = 0
         IgnoreFacingCheck       = Yes
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_OCLNatursanktumEnabler
       SpecialPowerTemplate        = SpecialAbilityNatursanktum
       TriggeredBy                 = Upgrade_Level_1
       ObeyRechageOnTrigger        = Yes
    End

    Behavior = OCLSpecialPower  ModuleTag_OCLNatursanktum
       SpecialPowerTemplate        = SpecialAbilityNatursanktum
       OCL                         = OCL_RadagastNatursanktumEgg
       CreateLocation              = CREATE_AT_LOCATION
       StartsPaused                = Yes
       SetModelCondition           = ModelConditionState:USER_2
       SetModelConditionTime       = 2.1
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_DornengestruppEnablerRing
        SpecialPowerTemplate       = SpecialAbilityRadagastDornengestruppRing
        TriggeredBy                = Upgrade_Level_1
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLDornengestruppSpecialPowerRing
        SpecialPowerTemplate       = SpecialAbilityRadagastDornengestruppRing
        OCL                        = OCL_RadagastDornengestruppRing
        CreateLocation             = CREATE_AT_LOCATION
        StartsPaused               = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_DornengestruppAnimationRing
        UnpackTime                 = 1000
        UnpackingVariation         = 1
        SpecialPowerTemplate       = SpecialAbilityRadagastDornengestruppRing
        PreparationTime            = 0
        PersistentPrepTime         = 0
        PackTime                   = 1330
    End

    Behavior = AutoAbilityBehavior ModuleTag_DornengestruppRingAutoAbility
	SpecialAbility		= SpecialAbilityRadagastDornengestruppRing
	ForbiddenStatus 	= INSIDE_GARRISON
	MaxScanRange		= 100
	Query			= 3 ALL ENEMIES -STRUCTURE -MACHINE
   End


    Behavior = AISpecialPowerUpdate RohanDornenRingAI
        CommandButtonName = Command_SpecialAbilityRadagastDornengestruppRing
        SpecialPowerAIType = AI_SPECIAL_POWER_GANDALF_WIZARD_BLAST
        SpecialPowerRadius = 250
    End

    Behavior = AISpecialPowerUpdate SpecialPowerAragornOathBreakers
        CommandButtonName = Command_SpecialAbilityRadagastFreunde
        SpecialPowerAIType = AI_SPECIAL_POWER_TARGETAOE_SUMMON
        SpecialPowerRadius = 30.0
    End

    Behavior = AISpecialPowerUpdate TheodenToggleMountedAI
        CommandButtonName = Command_RadagastAdleraufsteigen
        SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_MOUNTED
    End

    Behavior = AISpecialPowerUpdate WordOfPoultryL2AI
        CommandButtonName = Command_SpecialAbilityRadagastConvertEnemy
        SpecialPowerAIType = AI_SPECIAL_POWER_RANGED_AOE_ATTACK
    End

    Behavior = AISpecialPowerUpdate RoyalGuardAI
        CommandButtonName = Command_SpecialAbilityNatursanktum
        SpecialPowerAIType = AI_SPECIAL_POWER_TARGETAOE_SUMMON
        SpecialPowerRadius = 30.0
    End
End


Object RohanRadagastaufdemAdler


    SelectPortrait         = HPRadagast
    ButtonImage            = HIRadagast

    Draw = W3DScriptedModelDraw ModuleTag_01

        ExtraPublicBone = B_Passenger

        DefaultModelConditionState
            Model               = luradaadler_skn
            Skeleton            = GUGwaihir_SKL
        End

        ModelConditionState     = ONE_RING
            Model               = luradaadler_skn
        End

        IdleAnimationState
            StateName = Idle
            Animation           = FlyB
                AnimationName     = GUGwaihir_HVRA
                AnimationMode     = LOOP
                AnimationBlendTime = 10

            End
        End

        AnimationState  STUNNED SPECIAL_DAMAGED
            StateName =  STUNNED
            Animation = HitB
                AnimationName = GUGwaihir_HITB
                AnimationMode = ONCE
                AnimationBlendTime = 6
            End
        End
        AnimationState  STUNNED
            Animation = HitB
                AnimationName = GUGwaihir_HITA
                AnimationMode = ONCE
                AnimationBlendTime = 6
            End
        End


         AnimationState    = BACKING_UP
               StateName = backup
               Animation = FlyB
                   AnimationName = GUGwaihir_FLYB
                   AnimationMode = LOOP
                   AnimationBlendTime = 9
               End
           End

           AnimationState = DIVING
               StateName = Diving
               Animation = DiveA
                   AnimationName = GUGwaihir_DIVA
                   AnimationMode = LOOP
                   AnimationBlendTime = 9
               End
           End

        AnimationState = ABOUT_TO_HIT
            StateName = Claw
            Animation = Claw
                AnimationName = GUGwaihir_ATKB
                AnimationMode = LOOP
                AnimationBlendTime = 9
            End
            BeginScript
               if CurDrawableIsCurrentTargetKindof("GRAB_AND_DROP")
               then
               CurDrawableSetTransitionAnimState("Trans_Begin_Attacking")
               end
            EndScript
        End

        TransitionState = Trans_Begin_Attacking
            Animation = Grab
                AnimationName = GUGwaihir_GRBB
                AnimationMode = ONCE
                AnimationBlendTime = 10
            End
        End


        AnimationState = CLIMBING
            StateName = Climbing
            Animation = FlyB(climb)
                AnimationName = GUGwaihir_FLYB
                AnimationMode = LOOP
                AnimationBlendTime = 9
                AnimationSpeedFactorRange = 1.5 1.55
            End
        End

        AnimationState = ACCELERATE
            StateName = Accelerate
            Animation = Moving
                AnimationName = GUGwaihir_FLYA
                AnimationMode = LOOP
                AnimationBlendTime = 10
            End
            BeginScript
                 Prev = CurDrawablePrevAnimationState()
                 if Prev == "Idle"    then CurDrawableSetTransitionAnimState("Trans_Begin_Moving") return end
                 if Prev == "Climbing"    then CurDrawableSetTransitionAnimState("Trans_Begin_Moving") return end
             EndScript
        End

        AnimationState = DECELERATE
            StateName = decelerate
            Animation = Moving
                AnimationName = GUGwaihir_HVRC
                AnimationMode = LOOP_BACKWARDS
                AnimationBlendTime = 7
            End
        End

        AnimationState = MOVING
            StateName = Moving
            Animation           = FLYA
                AnimationName     = GUGwaihir_FLYA
                AnimationMode     = LOOP
                AnimationBlendTime  = 12
            End
        End

        TransitionState = Trans_Begin_Moving
            Animation = Transition
                AnimationName = GUGwaihir_HVRC
                AnimationMode = ONCE
                AnimationBlendTime = 4
            End
        End

        AnimationState = RUBBLE
            Animation = RubbleDieF
                AnimationName = GUGwaihir_DIEF
                AnimationMode = ONCE
                AnimationBlendTime = 8
            End
        End

        TransitionState = Trans_Dying
            Animation = Transition
                AnimationName = GUGwaihir_DIED
                AnimationMode = ONCE
                AnimationBlendTime = 3
            End
        End

        AnimationState = DYING DEATH_1
            StateName = DYING
            Animation = DyingA
                AnimationName = GUGwaihir_DIEE
                AnimationMode = ONCE
                AnimationBlendTime = 4
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle"       then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "Moving"     then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "decelerate" then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "Accelerate" then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "Climbing"   then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "Diving"     then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "backup"     then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "STUNNED"    then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "Claw"       then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "Grab"       then CurDrawableSetTransitionAnimState("Trans_Dying") return end
            EndScript
        End

        AnimationState = DYING DEATH_2
            StateName = DYING
            Animation = DyingA
                AnimationName = GUGwaihir_HVRA
                AnimationMode = ONCE
                AnimationBlendTime = 9
            End
        End

        AnimationState = SPECIAL_WEAPON_TWO
            StateName = Claw
            Animation = Claw
                AnimationName = GUGwaihir_ATKB
                AnimationMode = ONCE
                AnimationBlendTime = 20
            End
            FXEvent                    = Frame:30 Name:FX_FearBlast
        End

    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbigbox
        End
    End


    Side                  = Rohan
    EditorSorting         = UNIT
    ThreatLevel           = GWAIHIR_THREAT_LEVEL
    ThingClass            = LARGE_MONSTER
    TransportSlotCount    = TRANSPORTSLOTCOUNT_NOT_TRANSPORTABLE
    ShockwaveResistance   = SHOCKWAVE_RESISTANCE_ALWAYS

	WeaponSet
		Conditions		= None
		Weapon          = PRIMARY		GwaihirGrabAttack
		PreferredAgainst	= PRIMARY		INFANTRY THROWN_OBJECT CAVALRY
		Weapon			= SECONDARY	GwaihirClawAttack
		OnlyAgainst		= SECONDARY	MONSTER HERO
		Weapon          = TERTIARY		GwaihirPlowAttack
		PreferredAgainst	= TERTIARY		STRUCTURE MACHINE HORDE
		Weapon			= QUATERNARY	GwaihirClawWyrmAttack
		PreferredAgainst	= QUATERNARY	CLEANUP_HAZARD
	End

    ArmorSet
        Conditions      = None
        Armor           = RadagastEagleArmor
        DamageFX        = GwaihirDamageFX
    End

    VisionRange = VISION_FLIER
    ShroudClearingRange = SHROUD_CLEAR_FLIER

    BountyValue = GONDOR_GWAIHIR_BOUNTY_VALUE
    DisplayName = OBJECT:GondorRohanRadaaufdemAdler
    DisplayMeleeDamage = MEDIUM_HERO_DAMAGE

    CrusherLevel   = 3
    RamPower = 30
    RamZMult = 0.5
    CommandSet = RohanRadagastaufAdlerCommandSet
    CommandPoints = 0




    VoiceAttack               = RadagastVoiceAttack
    VoiceAttackMachine        = RadagastVoiceAttack
    VoiceAttackStructure      = RadagastVoiceAttack
    VoiceMove                 = RadagastVoiceMove
    VoiceMoveToCamp           = RadagastVoiceMove
    VoiceCreated              = RadagastVoiceCreated
    VoiceFullyCreated         = RadagastVoiceCreated
    VoicePriority             = 85
    VoiceRetreatToCastle      = RadagastVoiceSelect
    VoiceSelect               = RadagastVoiceSelect
    VoiceSelectBattle         = RadagastVoiceSelect
    VoiceGuard                = RadagastVoiceMove
    VoiceCreated              = RadagastVoiceMove
    VoiceFullyCreated         = RadagastVoiceMove

    SoundAmbient            = EagleAmbienceVoice
    SoundImpact            = ImpactHorse

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_FLYA Frames: 2
        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_FLYB Frames: 2
        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_FLYC Frames: 2 63


        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_HVRA Frames: 4
        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_HVRC Frames: 4

        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_HITA Frames: 0
        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_HITB Frames: 0

        AnimationSound = Sound: EagleHurt        Animation:GUGwaihir_SKL.GUGWAIHIR_HITA Frames: 1
        AnimationSound = Sound: EagleHurt        Animation:GUGwaihir_SKL.GUGWAIHIR_HITB Frames: 1
        AnimationSound = Sound: EagleHurt        Animation:GUGwaihir_SKL.GUGWAIHIR_DIED Frames: 1

        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_ATKB Frames: 0
        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_GRBB Frames: 0

        AnimationSound = Sound: EagleAttack        Animation:GUGwaihir_SKL.GUGWAIHIR_ATKB Frames: 1
        AnimationSound = Sound: EagleAttack        Animation:GUGwaihir_SKL.GUGWAIHIR_GRBB Frames: 1

        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_DIED Frames: 0
        AnimationSound = Sound: TrollBodyfall        Animation:GUGwaihir_SKL.GUGWAIHIR_DIEF Frames: 2
        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_DIEF Frames: 0
    End


    RadarPriority        = UNIT
    KindOf               = PRELOAD HERO SELECTABLE CAN_CAST_REFLECTIONS SCORE NO_FREEWILL_ENTER MONSTER SCARY CANNOT_RETALIATE

    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius               = EMOTION_CHEER_RADIUS
        MaxHealth                 = RADAGASTDAG_HEALTH
        PermanentlyKilledByFilter = NONE
        DodgePercent              = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                  = DYING
        DeathAnimationTime         = 5367
        RespawnAnim                = LEVELED
        RespawnAnimationTime       = 2000
        AutoRespawnAtObjectFilter  = NONE +CASTLE_KEEP
        ButtonImage                = HIRadagast
        RespawnAsTemplate          = RohanRadagast

        RespawnRules =            AutoSpawn:No    Cost:RADAGASTDAG_COST        Time:STRONG_HERO_RESPAWNTIME        Health:100%

    End

    Behavior = AutoHealBehavior ModuleTag_GwaihirHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 1000
        StartHealingDelay = 15000
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = GiantBirdAIUpdate ModuleTag_GiantBirdAI
        AutoAcquireEnemiesWhenIdle    = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate           = 500
        AILuaEventsList               = RadagastAdlerFunctions
        FollowThroughDistance         = 160
        FollowThroughCheckStep        = 50
        FollowThroughGradient         = 1.0
        GrabTossTimeTrigger           = 3.0
        GrabTossHeightTrigger         = 80.0
        TossFX                        = FX_DiebyFalling
        SpecialContactPoints          = Swoop
        AttackPriority                = AttackPriority_Eagle
    End

    LocomotorSet
        Locomotor = FellBeastLocomotor
        Condition = SET_NORMAL
        Speed     = 88
    End
    LocomotorSet
        Locomotor = FellBeastLocomotor
        Condition = SET_SUPERSONIC
        Speed     = 114
    End
    LocomotorSet
        Locomotor = FellBeastLocomotor
        Condition = SET_WANDER
        Speed     = 78
    End


    Behavior = PhysicsBehavior ModuleTag_04
    End

    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End


    Behavior = TransportContain TransportContainModuleTag
        ObjectStatusOfContained = UNSELECTABLE UNATTACKABLE
        PassengerFilter = ANY +INFANTRY +HULK +CAVALRY +GRAB_AND_DROP -HERO -PORTER
        Slots = 1
        ShowPips = No
        CanGrabStructure = Yes
        AllowEnemiesInside = Yes
        AllowNeutralInside = Yes
        AllowAlliesInside  = No
        DamagePercentToUnits = 100%
        KillPassengersOnDeath = Yes
        PassengerBonePrefix = PassengerBone:B_Passenger       KindOf:GRAB_AND_DROP
        GrabWeapon = FellbeastGrabWeapon
        FireGrabWeaponOnVictim = No

        ReleaseSnappyness = 0.05

    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_HorseToggleEnabler
        SpecialPowerTemplate      = SpecialAbilityAdlerAbsteigen
        TriggeredBy               = Upgrade_Level_5
        ObeyRechageOnTrigger      = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_DismountStarter
         SpecialPowerTemplate     = SpecialAbilityAdlerAbsteigen
         UpdateModuleStartsAttack = Yes
         StartsPaused             = Yes
         AvailableAtStart         = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Dismount
         SpecialPowerTemplate           = SpecialAbilityAdlerAbsteigen
         StartAbilityRange              = 50.0
         MountedTemplate                = RohanRadagast
         SynchronizeTimerOnSpecialPower = SpecialAbilityRadagastDornengestrupp SpecialAbilityRadagastKrahenruf SpecialAbilityRadagastFreunde SpecialAbilityRadagastWordOfPoultry SpecialAbilityNatursanktum
         UnpackTime                     = 0
         PreparationTime                = 1
         PackTime                       = 0
         OpacityTarget                  = 1
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_DornengestruppEnabler
        SpecialPowerTemplate       = SpecialAbilityRadagastDornengestrupp
        TriggeredBy                = Upgrade_MiniHordeLvl8
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLDornengestruppSpecialPower
        SpecialPowerTemplate       = SpecialAbilityRadagastDornengestrupp
        OCL                        = OCL_RadagastDornengestrupp
        CreateLocation             = CREATE_AT_LOCATION
        StartsPaused               = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_DornengestruppAnimation
        UnpackTime                 = 1000
        UnpackingVariation         = 1
        SpecialPowerTemplate       = SpecialAbilityRadagastDornengestrupp
        PreparationTime            = 0
        PersistentPrepTime         = 0
        PackTime                   = 1330
    End

    Behavior = AutoAbilityBehavior ModuleTag_DornengestruppAutoAbility
	SpecialAbility		= SpecialAbilityRadagastDornengestrupp
	ForbiddenStatus 	= INSIDE_GARRISON
	MaxScanRange		= 100

	Query			= 3 ALL ENEMIES -STRUCTURE -MACHINE
   End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_RadaKrahenrufEnabler
        SpecialPowerTemplate       = SpecialAbilityRadagastKrahenruf
        TriggeredBy                = Upgrade_Level_3
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLRadaKrahenrufSpecialPower
        SpecialPowerTemplate       = SpecialAbilityRadagastKrahenruf
        OCL                        = OCL_RadagastKrahenruf
        CreateLocation             = CREATE_AT_EDGE_NEAR_TARGET_AND_MOVE_TO_LOCATION
        StartsPaused               = Yes
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FreundeEnabler
        SpecialPowerTemplate  = SpecialAbilityRadagastFreunde
        TriggeredBy           = Upgrade_Level_10
        ObeyRechageOnTrigger  = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLSpecialPowerFreunde
        SpecialPowerTemplate  = SpecialAbilityRadagastFreunde
        OCL                   = OCL_SpawnEaglesRadagsast
        CreateLocation        = CREATE_ABOVE_LOCATION
        StartsPaused          = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_FreundeAnimation
        UnpackTime            = 1000
        UnpackingVariation    = 1
        SpecialPowerTemplate  = SpecialAbilityRadagastFreunde
        PreparationTime       = 0
        PersistentPrepTime    = 0
        PackTime              = 1330
    End

    Behavior = AutoAbilityBehavior ModuleTag_FreundeAutoAbility
	SpecialAbility		= SpecialAbilityRadagastFreunde
	ForbiddenStatus 	= INSIDE_GARRISON
	MaxScanRange		= 150
	Query			= 1 ANY ENEMIES +HERO +MONSTER +MACHINE
	Query			= 2 ALL ENEMIES -STRUCTURE -MACHINE
   End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroWordOfPoultryEnabler_Level2
        SpecialPowerTemplate = SpecialAbilityRadagastWordOfPoultry
        TriggeredBy          = Upgrade_MiniHordeLvl8
        ObeyRechageOnTrigger = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_CreateAHeroWordOfPoultryStarter_Level2
        SpecialPowerTemplate = SpecialAbilityRadagastWordOfPoultry
        StartsPaused         = Yes
    End

    Behavior = ReplaceObjectUpdate ModuleTag_WordOfPoultryUpdate_Level2
        SpecialPowerTemplate = SpecialAbilityRadagastWordOfPoultry
        UnpackingVariation        = 1
        UnpackTime                 = 800
        PreparationTime            = 1
        PackTime                = 100
        AwardXPForTriggering    = 0
        StartAbilityRange        = CREATE_A_HERO_WORD_OF_POULTRY_RANGE_L2
        MustFinishAbility        = Yes
        ReplaceObject
            TargetObjectFilter = CREATE_A_HERO_WORD_OF_POULTRY_OBJECT_FILTER
            ReplacementObjectName = Chicken_Replacement Rabbit_Replacement Dog_Replacement Dog1_Replacement Racoon_Replacement Duck_Replacement Cow_Replacement Sheep_Replacement Crow_Replacement
        End
        ReplaceRadius            = 50
        ReplaceFX                = FX_CreateAHeroReplaceObject
        Scatter                    = Yes
    End

    Behavior = AutoAbilityBehavior ModuleTag_WordOfPoultryAutoAbilityBehavior
	SpecialAbility		= SpecialAbilityRadagastWordOfPoultry
	Query			= 15 ANY ENEMIES +INFANTRY +CAVALRY -STRUCTURE
	MaxScanRange		= 150
   End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_OCLNatursanktumEnabler
       SpecialPowerTemplate        = SpecialAbilityNatursanktum
       TriggeredBy                 = Upgrade_RingHero
       ObeyRechageOnTrigger        = Yes
    End

    Behavior = OCLSpecialPower  ModuleTag_OCLNatursanktum
       SpecialPowerTemplate        = SpecialAbilityNatursanktum
       OCL                         = OCL_RadagastNatursanktumEgg
       CreateLocation              = CREATE_AT_LOCATION
       StartsPaused                = Yes
       SetModelCondition           = ModelConditionState:USER_2
       SetModelConditionTime       = 2.1
    End




    Behavior = GiantBirdSlowDeathBehavior ModuleTag_GiantBirdSlowDeath
        DeathTypes                   = ALL -FADED
        SinkDelay                    = 15000
        SinkRate                     = 1.0
        DestructionDelay             = 20000
        Sound                        = INITIAL EagleVoiceDie
        Weapon                       = HIT_GROUND FlyingUnitDeathWarhead
        FX                           = HIT_GROUND FX_TrebuchetImpactHit
        Sound                        = HIT_GROUND FellBeastDieImpact
        CrashAvoidKindOfs            = STRUCTURE
        CrashAvoidRadius             = CRASH_AVOID_RADIUS
        CrashAvoidStrength           = 0.2
        NeedToMaintainFlailingHeight = No
        DeathFlags                   = DEATH_1
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 2500
        DestructionDelay = 2500

        DeathFlags = DEATH_2
    End

    Behavior = DualWeaponBehavior ModuleTag_10
        SwitchWeaponOnCloseRangeDistance = 24
    End

    FormationPreviewDecal
            Texture = FPflyingUnitDecal
            Width = 128
            Height = 128
        End






    Behavior = AttributeModifierUpgrade ModuleTag_RuhmdesKonigsBonus
        TriggeredBy       = Upgrade_RuhmdesKonigsUpgrade
        AttributeModifier = UpgradeRuhmdesKonigs
    End











    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName  = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName  = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName  = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate ElvenLorienWarriorHordeCaptureBuildingAI
        CommandButtonName  = Command_CaptureBuilding
        SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
    End

    Behavior = AISpecialPowerUpdate SpecialPowerAragornOathBreakers
        CommandButtonName = Command_SpecialAbilityRadagastFreunde
        SpecialPowerAIType = AI_SPECIAL_POWER_TARGETAOE_SUMMON
        SpecialPowerRadius = 30.0
    End

    Behavior = AISpecialPowerUpdate TheodenToggleMountedAI
        CommandButtonName = Command_RadagastAdlerabsteigen
        SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_MOUNTED
    End

    Behavior = AISpecialPowerUpdate RoyalGuardAI
        CommandButtonName = Command_RadagastKraenRuf
        SpecialPowerAIType = AI_SPECIAL_POWER_TARGETAOE_SUMMON
        SpecialPowerRadius = 30.0
    End

    Scale 		    = 0.95
    Geometry                = CYLINDER
    GeometryMajorRadius     = 30.0
    GeometryMinorRadius     = 30.0
    GeometryHeight          = 16.0
    GeometryIsSmall         = No

    HealthBoxScale          = 3.0
    HealthBoxHeightOffset   = 25.0
    Shadow 		    = SHADOW_VOLUME_NON_SELF_3
    ShadowSunAngle 	    = 89
End


Object RohanRadagastaufdemAdler_RingHero


    SelectPortrait         = HPRadagast
    ButtonImage            = HIRadagast

    Draw = W3DScriptedModelDraw ModuleTag_01

        ExtraPublicBone = B_Passenger

        DefaultModelConditionState
            Model               = luradaadler_skn
            Skeleton            = GUGwaihir_SKL
        End

        ModelConditionState     = ONE_RING
            Model               = luradaadler_skn
        End

        IdleAnimationState
            StateName = Idle
            Animation           = FlyB
                AnimationName     = GUGwaihir_HVRA
                AnimationMode     = LOOP
                AnimationBlendTime = 10

            End
        End

        AnimationState  STUNNED SPECIAL_DAMAGED
            StateName =  STUNNED
            Animation = HitB
                AnimationName = GUGwaihir_HITB
                AnimationMode = ONCE
                AnimationBlendTime = 6
            End
        End
        AnimationState  STUNNED
            Animation = HitB
                AnimationName = GUGwaihir_HITA
                AnimationMode = ONCE
                AnimationBlendTime = 6
            End
        End


         AnimationState    = BACKING_UP
               StateName = backup
               Animation = FlyB
                   AnimationName = GUGwaihir_FLYB
                   AnimationMode = LOOP
                   AnimationBlendTime = 9
               End
           End

           AnimationState = DIVING
               StateName = Diving
               Animation = DiveA
                   AnimationName = GUGwaihir_DIVA
                   AnimationMode = LOOP
                   AnimationBlendTime = 9
               End
           End

        AnimationState = ABOUT_TO_HIT
            StateName = Claw
            Animation = Claw
                AnimationName = GUGwaihir_ATKB
                AnimationMode = LOOP
                AnimationBlendTime = 9
            End
            BeginScript
               if CurDrawableIsCurrentTargetKindof("GRAB_AND_DROP")
               then
               CurDrawableSetTransitionAnimState("Trans_Begin_Attacking")
               end
            EndScript
        End

        TransitionState = Trans_Begin_Attacking
            Animation = Grab
                AnimationName = GUGwaihir_GRBB
                AnimationMode = ONCE
                AnimationBlendTime = 10
            End
        End


        AnimationState = CLIMBING
            StateName = Climbing
            Animation = FlyB(climb)
                AnimationName = GUGwaihir_FLYB
                AnimationMode = LOOP
                AnimationBlendTime = 9
                AnimationSpeedFactorRange = 1.5 1.55
            End
        End

        AnimationState = ACCELERATE
            StateName = Accelerate
            Animation = Moving
                AnimationName = GUGwaihir_FLYA
                AnimationMode = LOOP
                AnimationBlendTime = 10
            End
            BeginScript
                 Prev = CurDrawablePrevAnimationState()
                 if Prev == "Idle"    then CurDrawableSetTransitionAnimState("Trans_Begin_Moving") return end
                 if Prev == "Climbing"    then CurDrawableSetTransitionAnimState("Trans_Begin_Moving") return end
             EndScript
        End

        AnimationState = DECELERATE
            StateName = decelerate
            Animation = Moving
                AnimationName = GUGwaihir_HVRC
                AnimationMode = LOOP_BACKWARDS
                AnimationBlendTime = 7
            End
        End

        AnimationState = MOVING
            StateName = Moving
            Animation           = FLYA
                AnimationName     = GUGwaihir_FLYA
                AnimationMode     = LOOP
                AnimationBlendTime  = 12
            End
        End

        TransitionState = Trans_Begin_Moving
            Animation = Transition
                AnimationName = GUGwaihir_HVRC
                AnimationMode = ONCE
                AnimationBlendTime = 4
            End
        End

        AnimationState = RUBBLE
            Animation = RubbleDieF
                AnimationName = GUGwaihir_DIEF
                AnimationMode = ONCE
                AnimationBlendTime = 8
            End
        End

        TransitionState = Trans_Dying
            Animation = Transition
                AnimationName = GUGwaihir_DIED
                AnimationMode = ONCE
                AnimationBlendTime = 3
            End
        End

        AnimationState = DYING DEATH_1
            StateName = DYING
            Animation = DyingA
                AnimationName = GUGwaihir_DIEE
                AnimationMode = ONCE
                AnimationBlendTime = 4
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle"       then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "Moving"     then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "decelerate" then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "Accelerate" then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "Climbing"   then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "Diving"     then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "backup"     then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "STUNNED"    then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "Claw"       then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "Grab"       then CurDrawableSetTransitionAnimState("Trans_Dying") return end
            EndScript
        End

        AnimationState = DYING DEATH_2
            StateName = DYING
            Animation = DyingA
                AnimationName = GUGwaihir_HVRA
                AnimationMode = ONCE
                AnimationBlendTime = 9
            End
        End

        AnimationState = SPECIAL_WEAPON_TWO
            StateName = Claw
            Animation = Claw
                AnimationName = GUGwaihir_ATKB
                AnimationMode = ONCE
                AnimationBlendTime = 20
            End
            FXEvent                    = Frame:30 Name:FX_FearBlast
        End

    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbigbox
        End
    End




    Side                  = Rohan
    EditorSorting         = UNIT
    ThreatLevel           = GWAIHIR_THREAT_LEVEL
    ThingClass            = LARGE_MONSTER
    TransportSlotCount    = TRANSPORTSLOTCOUNT_NOT_TRANSPORTABLE
    ShockwaveResistance   = SHOCKWAVE_RESISTANCE_ALWAYS
    CrushableLevel             = 4

	WeaponSet
		Conditions		= None
		Weapon          = PRIMARY		GwaihirGrabAttack
		PreferredAgainst	= PRIMARY		INFANTRY THROWN_OBJECT CAVALRY
		Weapon			= SECONDARY	GwaihirClawAttack
		OnlyAgainst		= SECONDARY	MONSTER HERO
		Weapon          = TERTIARY		GwaihirPlowAttack
		PreferredAgainst	= TERTIARY		STRUCTURE MACHINE HORDE
		Weapon			= QUATERNARY	GwaihirClawWyrmAttack
		PreferredAgainst	= QUATERNARY	CLEANUP_HAZARD
	End

    ArmorSet
        Conditions      = None
        Armor           = RadagastEagleSilmarilArmor
        DamageFX        = GwaihirDamageFX
    End

    VisionRange = VISION_FLIER
    ShroudClearingRange = SHROUD_CLEAR_FLIER

    BountyValue = GONDOR_GWAIHIR_BOUNTY_VALUE
    DisplayName = OBJECT:GondorRohanRadaaufdemAdler
    DisplayMeleeDamage = MEDIUM_HERO_DAMAGE

    CrusherLevel   = 3
    RamPower = 30
    RamZMult = 0.5
    CommandSet = RohanRadagastaufAdlerRingCommandSet
    CommandPoints = 0




    VoiceAttack               = RadagastVoiceAttack
    VoiceAttackMachine        = RadagastVoiceAttack
    VoiceAttackStructure      = RadagastVoiceAttack
    VoiceMove                 = RadagastVoiceMove
    VoiceMoveToCamp           = RadagastVoiceMove
    VoiceCreated              = RadagastVoiceCreated
    VoiceFullyCreated         = RadagastVoiceCreated
    VoicePriority             = 85
    VoiceRetreatToCastle      = RadagastVoiceSelect
    VoiceSelect               = RadagastVoiceSelect
    VoiceSelectBattle         = RadagastVoiceSelect
    VoiceGuard                = RadagastVoiceMove
    VoiceCreated              = RadagastVoiceMove
    VoiceFullyCreated         = RadagastVoiceMove

    SoundAmbient              = EagleAmbienceVoice
    SoundImpact               = ImpactHorse


    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_FLYA Frames: 2
        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_FLYB Frames: 2
        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_FLYC Frames: 2 63

        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_HVRA Frames: 4
        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_HVRC Frames: 4

        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_HITA Frames: 0
        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_HITB Frames: 0

        AnimationSound = Sound: EagleHurt        Animation:GUGwaihir_SKL.GUGWAIHIR_HITA Frames: 1
        AnimationSound = Sound: EagleHurt        Animation:GUGwaihir_SKL.GUGWAIHIR_HITB Frames: 1
        AnimationSound = Sound: EagleHurt        Animation:GUGwaihir_SKL.GUGWAIHIR_DIED Frames: 1

        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_ATKB Frames: 0
        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_GRBB Frames: 0

        AnimationSound = Sound: EagleAttack        Animation:GUGwaihir_SKL.GUGWAIHIR_ATKB Frames: 1
        AnimationSound = Sound: EagleAttack        Animation:GUGwaihir_SKL.GUGWAIHIR_GRBB Frames: 1

        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_DIED Frames: 0
        AnimationSound = Sound: TrollBodyfall        Animation:GUGwaihir_SKL.GUGWAIHIR_DIEF Frames: 2
        AnimationSound = Sound: EagleWingFlaps        Animation:GUGwaihir_SKL.GUGWAIHIR_DIEF Frames: 0
    End


    RadarPriority        = UNIT
    KindOf               = PRELOAD HERO SELECTABLE CAN_CAST_REFLECTIONS SCORE NO_FREEWILL_ENTER MONSTER SCARY CANNOT_RETALIATE

    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius               = EMOTION_CHEER_RADIUS
        MaxHealth                 = RADAGASTDAG_HEALTH
        PermanentlyKilledByFilter = NONE
        DodgePercent              = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                = DYING
        DeathAnimationTime        = 5367
        RespawnAnim                = LEVELED
        RespawnAnimationTime        = 2000
        AutoRespawnAtObjectFilter    = NONE +CASTLE_KEEP
        ButtonImage                = HIRadagast
        RespawnAsTemplate            = RohanRadagast

        RespawnRules =            AutoSpawn:No    Cost:RADAGASTDAG_COST        Time:STRONG_HERO_RESPAWNTIME        Health:100%
    End


    Behavior = AutoHealBehavior ModuleTag_GwaihirHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 1000
        StartHealingDelay = 15000
        HealOnlyIfNotInCombat = Yes
    End



    Behavior = GiantBirdAIUpdate ModuleTag_GiantBirdAI
        AutoAcquireEnemiesWhenIdle    = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate           = 500
        AILuaEventsList               = RadagastAdlerFunctions
        FollowThroughDistance         = 160
        FollowThroughCheckStep        = 50
        FollowThroughGradient         = 1.0
        GrabTossTimeTrigger           = 3.0
        GrabTossHeightTrigger         = 80.0
        TossFX                        = FX_DiebyFalling
        SpecialContactPoints          = Swoop
        AttackPriority                = AttackPriority_Eagle
    End

    LocomotorSet
        Locomotor = FellBeastLocomotor
        Condition = SET_NORMAL
        Speed     = 88
    End
    LocomotorSet
        Locomotor = FellBeastLocomotor
        Condition = SET_SUPERSONIC
        Speed     = 114
    End
    LocomotorSet
        Locomotor = FellBeastLocomotor
        Condition = SET_WANDER
        Speed     = 78
    End


    Behavior = PhysicsBehavior ModuleTag_04
    End

    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End


    Behavior = TransportContain TransportContainModuleTag
        ObjectStatusOfContained = UNSELECTABLE UNATTACKABLE
        PassengerFilter = ANY +INFANTRY +HULK +CAVALRY +GRAB_AND_DROP -HERO -PORTER
        Slots = 1
        ShowPips = No
        CanGrabStructure = Yes
        AllowEnemiesInside = Yes
        AllowNeutralInside = Yes
        AllowAlliesInside  = No
        DamagePercentToUnits = 100%
        KillPassengersOnDeath = Yes
        PassengerBonePrefix = PassengerBone:B_Passenger       KindOf:GRAB_AND_DROP
        GrabWeapon = FellbeastGrabWeapon
        FireGrabWeaponOnVictim = No

        ReleaseSnappyness = 0.05

    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_DornengestruppEnablerRing
        SpecialPowerTemplate       = SpecialAbilityRadagastDornengestruppRing
        TriggeredBy                = Upgrade_Level_1
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLDornengestruppSpecialPowerRing
        SpecialPowerTemplate       = SpecialAbilityRadagastDornengestruppRing
        OCL                        = OCL_RadagastDornengestruppRing
        CreateLocation             = CREATE_AT_LOCATION
        StartsPaused               = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_DornengestruppAnimationRing
        UnpackTime                 = 1000
        UnpackingVariation         = 1
        SpecialPowerTemplate       = SpecialAbilityRadagastDornengestruppRing
        PreparationTime            = 0
        PersistentPrepTime         = 0
        PackTime                   = 1330
    End

    Behavior = AutoAbilityBehavior ModuleTag_DornengestruppRingAutoAbility
	SpecialAbility		= SpecialAbilityRadagastDornengestruppRing
	ForbiddenStatus 	= INSIDE_GARRISON
	MaxScanRange		= 100
	Query			= 3 ALL ENEMIES -STRUCTURE -MACHINE
   End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_DornengestruppEnabler
        SpecialPowerTemplate       = SpecialAbilityRadagastDornengestrupp
        TriggeredBy                = Upgrade_MiniHordeLvl8
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLDornengestruppSpecialPower
        SpecialPowerTemplate       = SpecialAbilityRadagastDornengestrupp
        OCL                        = OCL_RadagastDornengestrupp
        CreateLocation             = CREATE_AT_LOCATION
        StartsPaused               = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_DornengestruppAnimation
        UnpackTime                 = 1000
        UnpackingVariation         = 1
        SpecialPowerTemplate       = SpecialAbilityRadagastDornengestrupp
        PreparationTime            = 0
        PersistentPrepTime         = 0
        PackTime                   = 1330
    End

    Behavior = AutoAbilityBehavior ModuleTag_DornengestruppAutoAbility
	SpecialAbility		= SpecialAbilityRadagastDornengestrupp
	ForbiddenStatus 	= INSIDE_GARRISON
	MaxScanRange		= 100
	Query			= 3 ALL ENEMIES -STRUCTURE -MACHINE
   End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_RadaKrahenrufEnabler
        SpecialPowerTemplate       = SpecialAbilityRadagastKrahenruf
        TriggeredBy                = Upgrade_Level_3
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLRadaKrahenrufSpecialPower
        SpecialPowerTemplate       = SpecialAbilityRadagastKrahenruf
        OCL                        = OCL_RadagastKrahenruf
        CreateLocation             = CREATE_AT_EDGE_NEAR_TARGET_AND_MOVE_TO_LOCATION
        StartsPaused               = Yes
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FreundeEnabler
        SpecialPowerTemplate  = SpecialAbilityRadagastFreunde
        TriggeredBy           = Upgrade_Level_10
        ObeyRechageOnTrigger  = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLSpecialPowerFreunde
        SpecialPowerTemplate  = SpecialAbilityRadagastFreunde
        OCL                   = OCL_SpawnEaglesRadagsast
        CreateLocation        = CREATE_ABOVE_LOCATION
        StartsPaused          = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_FreundeAnimation
        UnpackTime            = 1000
        UnpackingVariation    = 1
        SpecialPowerTemplate  = SpecialAbilityRadagastFreunde
        PreparationTime       = 0
        PersistentPrepTime    = 0
        PackTime              = 1330
    End

    Behavior = AutoAbilityBehavior ModuleTag_FreundeAutoAbility
	SpecialAbility		= SpecialAbilityRadagastFreunde
	ForbiddenStatus 	= INSIDE_GARRISON
	MaxScanRange		= 150
	Query			= 1 ANY ENEMIES +HERO +MONSTER +MACHINE
	Query			= 2 ALL ENEMIES -STRUCTURE -MACHINE
   End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroWordOfPoultryEnabler_Level2
        SpecialPowerTemplate = SpecialAbilityRadagastWordOfPoultry
        TriggeredBy          = Upgrade_MiniHordeLvl8
        ObeyRechageOnTrigger = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_CreateAHeroWordOfPoultryStarter_Level2
        SpecialPowerTemplate = SpecialAbilityRadagastWordOfPoultry
        StartsPaused         = Yes
    End

    Behavior = ReplaceObjectUpdate ModuleTag_WordOfPoultryUpdate_Level2
        SpecialPowerTemplate = SpecialAbilityRadagastWordOfPoultry
        UnpackingVariation        = 1
        UnpackTime                 = 800
        PreparationTime            = 1
        PackTime                = 100
        AwardXPForTriggering    = 0
        StartAbilityRange        = CREATE_A_HERO_WORD_OF_POULTRY_RANGE_L2
        MustFinishAbility        = Yes
        ReplaceObject
            TargetObjectFilter = CREATE_A_HERO_WORD_OF_POULTRY_OBJECT_FILTER
            ReplacementObjectName = Chicken_Replacement Rabbit_Replacement Dog_Replacement Dog1_Replacement Racoon_Replacement Duck_Replacement Cow_Replacement Sheep_Replacement Crow_Replacement
        End
        ReplaceRadius            = 50
        ReplaceFX                = FX_CreateAHeroReplaceObject
        Scatter                    = Yes
    End

    Behavior = AutoAbilityBehavior ModuleTag_WordOfPoultryAutoAbilityBehavior
	SpecialAbility		= SpecialAbilityRadagastWordOfPoultry
	Query			= 15 ANY ENEMIES +INFANTRY +CAVALRY -STRUCTURE
	MaxScanRange		= 150
   End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_HorseToggleEnabler
        SpecialPowerTemplate      = SpecialAbilityAdlerAbsteigen
        TriggeredBy               = Upgrade_Level_5
        ObeyRechageOnTrigger      = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_DismountStarter
         SpecialPowerTemplate     = SpecialAbilityAdlerAbsteigen
         UpdateModuleStartsAttack = Yes
         StartsPaused             = Yes
         AvailableAtStart         = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Dismount
         SpecialPowerTemplate           = SpecialAbilityAdlerAbsteigen
         StartAbilityRange              = 50.0
         MountedTemplate                = RohanRadagast_RingHero
         SynchronizeTimerOnSpecialPower = SpecialAbilityRadagastDornengestrupp SpecialAbilityRadagastKrahenruf SpecialAbilityRadagastFreunde SpecialAbilityRadagastWordOfPoultry SpecialAbilityNatursanktum
         UnpackTime                     = 0
         PreparationTime                = 1
         PackTime                       = 0
         OpacityTarget                  = 1
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_OCLNatursanktumEnabler
       SpecialPowerTemplate        = SpecialAbilityNatursanktum
       ObeyRechageOnTrigger        = Yes
    End

    Behavior = OCLSpecialPower  ModuleTag_OCLNatursanktum
       SpecialPowerTemplate        = SpecialAbilityNatursanktum
       OCL                         = OCL_RadagastNatursanktumEgg
       CreateLocation              = CREATE_AT_LOCATION
       StartsPaused                = No
       SetModelCondition           = ModelConditionState:USER_2
       SetModelConditionTime       = 2.1
    End

    Behavior = RemoveUpgradeUpgrade ModuleTag_RemoveRing
        TriggeredBy            	     = Upgrade_AllFactionUpgrade
        UpgradeToRemove              = Upgrade_FortressRingHero Upgrade_RingHero
        RemoveFromAllPlayerObjects   = Yes
        SuppressEvaEventForRemoval   = Yes
    End

    Behavior = FXListDie ModuleTag_AnnounceWeLostTheRing
        DeathFX                  = GandalfAnnounceFortressDeathLostRingFX
    End

    Behavior = CreateObjectDie ModuleTag_DropTheRing
        CreationList             = OCL_TheOneRing
    End


    Behavior = GiantBirdSlowDeathBehavior ModuleTag_GiantBirdSlowDeath
        DeathTypes                   = ALL -FADED
        SinkDelay                    = 15000
        SinkRate                     = 1.0
        DestructionDelay             = 20000
        Sound                        = INITIAL EagleVoiceDie
        Weapon                       = HIT_GROUND FlyingUnitDeathWarhead
        FX                           = HIT_GROUND FX_TrebuchetImpactHit
        Sound                        = HIT_GROUND FellBeastDieImpact
        CrashAvoidKindOfs            = STRUCTURE
        CrashAvoidRadius             = CRASH_AVOID_RADIUS
        CrashAvoidStrength           = 0.2
        NeedToMaintainFlailingHeight = No
        DeathFlags                   = DEATH_1
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 2500
        DestructionDelay = 2500

        DeathFlags = DEATH_2
    End

    Behavior = DualWeaponBehavior ModuleTag_10
        SwitchWeaponOnCloseRangeDistance = 24
    End

    FormationPreviewDecal
            Texture = FPflyingUnitDecal
            Width = 128
            Height = 128
    End


    Behavior = AttributeModifierUpgrade ModuleTag_RuhmdesKonigsBonus
        TriggeredBy       = Upgrade_RuhmdesKonigsUpgrade
        AttributeModifier = UpgradeRuhmdesKonigs
    End






    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName  = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName  = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName  = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate ElvenLorienWarriorHordeCaptureBuildingAI
        CommandButtonName  = Command_CaptureBuilding
        SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
    End


    Behavior = AISpecialPowerUpdate RohanDornenRingAI
        CommandButtonName = Command_SpecialAbilityRadagastDornengestruppRing
        SpecialPowerAIType = AI_SPECIAL_POWER_GANDALF_WIZARD_BLAST
        SpecialPowerRadius = 250
    End

    Behavior = AISpecialPowerUpdate SpecialPowerAragornOathBreakers
        CommandButtonName = Command_SpecialAbilityRadagastFreunde
        SpecialPowerAIType = AI_SPECIAL_POWER_TARGETAOE_SUMMON
        SpecialPowerRadius = 30.0
    End

    Behavior = AISpecialPowerUpdate TheodenToggleMountedAI
        CommandButtonName = Command_RadagastAdlerabsteigen
        SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_MOUNTED
    End

    Behavior = AISpecialPowerUpdate RoyalGuardAI
        CommandButtonName = Command_RadagastKraenRuf
        SpecialPowerAIType = AI_SPECIAL_POWER_TARGETAOE_SUMMON
        SpecialPowerRadius = 30.0
    End

    Scale 		    = 0.95
    Geometry                = CYLINDER
    GeometryMajorRadius     = 30.0
    GeometryMinorRadius     = 30.0
    GeometryHeight          = 16.0
    GeometryIsSmall         = No

    HealthBoxScale          = 3.0
    HealthBoxHeightOffset   = 25.0
    Shadow 		    = SHADOW_VOLUME_NON_SELF_3
    ShadowSunAngle 	    = 89
End


Object RohanRadagast_Summoned


    SelectPortrait = HPRadagast
    ButtonImage = HIRadagast

    Draw = W3DScriptedModelDraw ModuleTag_DRAW

        OkToChangeModelColor = Yes
        StaticModelLODMode   = Yes

        ExtraPublicBone = STAFFFX

        DefaultModelConditionState
            Model               = luradagast_skn
            Skeleton            = IUSaruman_SKL
            WeaponLaunchBone    = PRIMARY STAFFFX
        End



        IdleAnimationState
            StateName = Idle
            Animation = IDLB
                AnimationName       = IUSaruman_IDLB
                AnimationMode       = ONCE
                AnimationPriority   = 20
            End

            Animation = IDLC
                AnimationName       = IUSaruman_IDLC
                AnimationMode       = ONCE
                AnimationPriority   = 3
            End

            Animation = IDLD
                AnimationName       = IUSaruman_IDLD
                AnimationMode       = ONCE
                AnimationPriority   = 1
            End

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
            EndScript
        End

        AnimationState        = STUNNED_FLAILING
            Flags               = RANDOMSTART
            Animation           = FLYA
                AnimationName     = IUSaruman_FLYA
                AnimationMode     = LOOP
            End
        End



        AnimationState        = DYING DEATH_2
            Animation = DieB
                AnimationName     = IUSaruman_TNTB
                AnimationMode     = ONCE
            End
        End

        AnimationState            = DYING BURNINGDEATH
            Animation
                AnimationName    = IUSaruman_DIEB
                AnimationMode    = ONCE
                AnimationBlendTime = 10
            End
        End

        AnimationState        = DYING SPLATTED
            Animation
                AnimationName     = IUSaruman_LNDA
                AnimationMode     = ONCE
            End
        End
        AnimationState        = DYING AFLAME
            Animation = DieAflame
                AnimationName     = IUSaruman_MFDA
                AnimationMode     = LOOP
            End
        End
        AnimationState        = DYING
            Animation = DieB
                AnimationName     = IUSaruman_DIEB
                AnimationMode     = ONCE
            End
        End



        AnimationState        = STUNNED_STANDING_UP
            Animation
                AnimationName     = IUSaruman_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End
        AnimationState        = STUNNED
            Animation
                AnimationName     = IUSaruman_LNDA
                AnimationMode     = ONCE
            End
        End

        AnimationState            = BURNINGDEATH
            Animation
                AnimationName    = IUSaruman_MFDA
                AnimationMode    = LOOP
                Distance        = 50
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = IUSaruman_IDLB
                AnimationMode                = LOOP
            End
        End


        AnimationState                = PACKING_TYPE_1
            StateName                = Dominate
            Animation
                AnimationName        = IUSaruman_ATKB
                AnimationMode        = ONCE
                AnimationBlendTime  = 5
            End
        End

        AnimationState                = PACKING_TYPE_2
            StateName                = Spped_Craft
            Animation
                AnimationName        = IUSaruman_TNTB
                AnimationMode        = ONCE
            End
            FXEvent    = Frame:15    Name: FX_SpeechCraft
        End

        AnimationState                = USER_2
            StateName                = Spped_Craft
            Animation
                AnimationName        = IUSaruman_TNTB
                AnimationMode        = ONCE
            End
            FXEvent    = Frame:15    Name: FX_SpeechCraft
        End





         AnimationState = MOVING FIRING_OR_PREATTACK_A
            Animation = TrotAndFire
                AnimationName = IUSaruman_ATRA
                AnimationMode = LOOP
            End
            Flags = RANDOMSTART

        End


         AnimationState                = MOVING USING_SPECIAL_ABILITY
             Flags                    = RANDOMSTART
             Animation                = IUSaruman_RUNB
                 AnimationName     = IUSaruman_RUNB
                 AnimationMode     = LOOP
             End
         End



         AnimationState            = MOVING BACKING_UP
            Animation            = BackingUp
                AnimationName    = IUSaruman_BAKA
                AnimationMode    = LOOP
            End
            Flags = RANDOMSTART
        End

        AnimationState        = MOVING ATTACKING
             Animation              = IUSaruman_RUNB
                 AnimationName     = IUSaruman_RUNB
                 AnimationMode     = LOOP
             End
        End

        AnimationState        = MOVING
             Animation                = IUSaruman_RUNA
                 AnimationName     = IUSaruman_RUNA
                 AnimationMode     = LOOP
             End
        End


        AnimationState          = SPECIAL_WEAPON_ONE
            Animation                = Throwing Fireball
                AnimationName        = IUSaruman_ATKB
                AnimationMode        = ONCE
            End
            FrameForPristineBonePositions = 27
        End


         AnimationState        =  SPECIAL_WEAPON_TWO
            StateName = Attacking
            Animation
                AnimationName       = IUSaruman_ATKB
                AnimationMode       = ONCE
            End
            FrameForPristineBonePositions = 27
        End


        AnimationState          = SPECIAL_WEAPON_THREE
            Animation                = Throwing Fireball
                AnimationName        = IUSaruman_SPCA
                AnimationMode        = ONCE
                UseWeaponTiming        =    Yes
            End

            FrameForPristineBonePositions = 48
        End

        AnimationState          = USER_2
            Animation
                AnimationName        = IUSaruman_SPCA
                AnimationMode        = ONCE
            End
        End



        AnimationState        = FIRING_OR_PREATTACK_A
            Animation           = IUSaruman_ATKC
                AnimationName     = IUSaruman_ATKC
                AnimationMode     = ONCE
                UseWeaponTiming        =    Yes
            End

            Animation           = IUSaruman_ATKD
                AnimationName     = IUSaruman_ATKD
                AnimationMode     = ONCE
                UseWeaponTiming        =    Yes
            End
        End

        AnimationState        = FIRING_OR_PREATTACK_A HERO
            Animation           = IUSaruman_ATKC
                AnimationName     = IUSaruman_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        =    Yes
            End
        End


        AnimationState = WAR_CHANT
            Animation = Chant
                AnimationName = IUSaruman_TNTB
                AnimationMode = LOOP
            End
        End

        AnimationState = EMOTION_TAUNTING
            Animation = Chant
                AnimationName = IUSaruman_TNTA
                AnimationMode = ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState = EMOTION_CELEBRATING
            Animation = Chant
                AnimationName = IUSaruman_TNTB
                AnimationMode = ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState = HIT_REACTION
            Animation = Hit_Level_1_a
                AnimationName = IUSaruman_HITA
                AnimationMode = ONCE
            End
        End


        AnimationState        = ATTACKING
            Animation           = ALERT_1
                AnimationName     = IUSaruman_IDLA
                AnimationMode     = LOOP
            End
        End

        TransitionState                    =    TRANS_Idle_to_Selected
            Animation                    =    ATNA
                AnimationName            =    IUSaruman_ATNA
                AnimationMode            =    ONCE
            End
        End

        TransitionState                    =    TRANS_Selected_To_Idle
            Animation                    =    ATND
                AnimationName            =    IUSaruman_ATND
                AnimationMode            =    ONCE
            End
        End


        AnimationState        = LEVELED
            Animation = Yippee
                AnimationName       = IUSaruman_TNTA
                AnimationMode       = ONCE
            End
        End


        AnimationState        = EMOTION_ALERT
            Animation           = ALERT_1
                AnimationName     = IUSaruman_IDLA
                AnimationMode     = LOOP
            End
        End

        AnimationState = RAISING_FLAG
            Animation = Chant
                AnimationName = IUSaruman_TNTA
                AnimationMode = ONCE
            End
            Animation = Chant
                AnimationName = IUSaruman_TNTB
                AnimationMode = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                =    SELECTED
            StateName                =    Selected
            SimilarRestart            =   Yes
            Animation                =    ATNB
                AnimationName        =    IUSaruman_ATNB
                AnimationMode        =    LOOP
                AnimationBlendTime  =   15
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
            EndScript
        End
    End


    Draw = W3DScriptedModelDraw ModuleTag_DrawMurderOfCrows

        DefaultModelConditionState
            Model           = None
        End

        ModelConditionState = USER_3
            Model        = Crebain_SKN
        End

        AnimationState    = USER_3
            Animation    = WBFBCloud
                AnimationName    = Crebain_SKL.Crebain_IDLB
                AnimationMode    = LOOP
            End
            Flags                = START_FRAME_FIRST
        End
    End


    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End


    #include "..\..\..\includes\StunDrawModuleSmall.inc"



    Side               = Rohan
    EditorSorting      = UNIT
    ThreatLevel        = GANDALF_THREAT_LEVEL
    ThingClass         = CHARACTER_UNIT
    DisplayMeleeDamage = MEDIUM_HERO_DAMAGE
    BuildCost            = RADAGASTDAG_COST
    BuildTime            = STRONG_HERO_BUILDTIME
    TransportSlotCount   = TRANSPORTSLOTCOUNT_HERO
    CommandSet           = RohanRadagastCommandSet_Summoned
    CommandPoints        = 0

    WeaponSet
        Conditions = None
        Weapon = PRIMARY  RadagastStaff
    End

    ArmorSet
        Conditions      = None
        Armor           = MediumHeroArmor
        DamageFX        = NormalDamageFX
    End


    VisionRange                = VISION_HERO_STANDARD
    ShroudClearingRange        = SHROUD_CLEAR_HERO
    MaxVisionBonusPercent      = 300%
    VisionBonusTestRadius      = 200
    VisionBonusPercentPerFoot  = 1.0%
    BountyValue                = GONDOR_GANDALFWHITE_BOUNTY_VALUE
    DisplayName                = OBJECT:Radagast
    RecruitText                = CONTROLBAR:RadagastRecruit
    ReviveText                 = CONTROLBAR:RadagastRevive
    Hotkey                     = CONTROLBAR:RadagastHotkey
    CrusherLevel               = 0
    CrushableLevel             = 3




    VoiceAttack               = RadagastVoiceAttack
    VoiceAttackMachine        = RadagastVoiceAttack
    VoiceAttackStructure      = RadagastVoiceAttack
    VoiceMove                 = RadagastVoiceMove
    VoiceMoveToCamp           = RadagastVoiceMove
    VoicePriority             = 85
    VoiceRetreatToCastle      = RadagastVoiceSelect
    VoiceSelect               = RadagastVoiceSelect
    VoiceSelectBattle         = RadagastVoiceSelect
    VoiceGuard                = RadagastVoiceMove
    VoiceCreated              = RadagastVoiceMove
    VoiceFullyCreated         = RadagastVoiceMove

    SoundImpact               = ImpactHorse

    UnitSpecificSounds
        VoiceGarrison                       = RadagastVoiceMove
        VoiceEnterUnitElvenTransportShip    = RadagastVoiceMove
        VoiceInitiateCaptureBuilding        = RadagastVoiceMove
    End

    CrowdResponseKey = GoodMen

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Man Man_Male Unit Infantry Hero
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_ATKB    Frames:39 104
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_ATKC     Frames:43 92
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_ATKD     Frames:13 29 55
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_ATRA    Frames:9 20 31 43 55 67
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_DIEB    Frames:20
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:IUSaruman_SKL.IUSaruman_DIEB    Frames:34
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_GTPA    Frames:51 75 113 139
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_HITA    Frames:12
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_IDLC    Frames:116 188
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_IDLD    Frames:43
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:IUSaruman_SKL.IUSaruman_LNDA    Frames:4
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_MFDA    Frames:10 19 29 39 48 57 66
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_RUNA    Frames:11 22 34 46 57 69
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_RUNB    Frames:10 23 36 49 62 75
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_TNTA    Frames:36 49 103 123
        AnimationSound = Sound:FootstepDirtA        Animation:IUSaruman_SKL.IUSaruman_TNTB    Frames:24 111
    End



    RadarPriority        = UNIT
    KindOf               = HERO HEAVY_MELEE_HITTER PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE ATTACK_NEEDS_LINE_OF_SIGHT NOTIFY_OF_PREATTACK SUMMONED
    PathfindDiameter     = 40.0


    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius               = EMOTION_CHEER_RADIUS
        MaxHealth                 = RADAGASTDAG_HEALTH
        PermanentlyKilledByFilter = NONE
        DodgePercent              = HERO_DODGE_PERCENT
    End

    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    Behavior = AIUpdateInterface ModuleTag_04
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        AILuaEventsList            = RadagastFunctions
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance               = 300
        TauntAndPointUpdateDelay            = 10000
        AddEmotion            =    Doom_Base
        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
        AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base
        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End

    LocomotorSet
        Locomotor = HumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_EVIL_FAST_HERO_SPEED
    End

    LocomotorSet
        Locomotor = HumanWanderLocomotor
        Condition = SET_WANDER
        Speed     = 32
    End


    Behavior = PhysicsBehavior ModuleTag_05
        GravityMult = 1.0
        ShockStandingTime = 3800
    End

    Behavior = SlowDeathBehavior ModuleTag_06
        DeathTypes = ALL -KNOCKBACK -FADED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL GandalfVoiceDie
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 2500
        DestructionDelay = 2500
        Sound = INITIAL SpellGenericUnsummonFasterMS
        DeathFlags = DEATH_2
    End

    Behavior = SquishCollide ModuleTag_07

    End

    Behavior = SlowDeathBehavior ModuleTag_08
        DeathTypes = NONE +KNOCKBACK
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
    End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 2000
        HitReactionThreshold1 = 5.0
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = CREATE_A_HERO_REINFORCEMENT_LIFETIME
        MaxLifetime        = CREATE_A_HERO_REINFORCEMENT_LIFETIME
        DeathType          = FADED
    End

    Behavior = ExperienceLevelCreate ModuleTag_LevelBonus
        LevelToGrant = 7
        MPOnly = No
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_DornengestruppEnabler
        SpecialPowerTemplate       = SpecialAbilityRadagastDornengestrupp
        TriggeredBy                = Upgrade_Level_1
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLDornengestruppSpecialPower
        SpecialPowerTemplate       = SpecialAbilityRadagastDornengestrupp
        OCL                        = OCL_RadagastDornengestrupp
        CreateLocation             = CREATE_AT_LOCATION
        StartsPaused               = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_DornengestruppAnimation
        SpecialPowerTemplate       = SpecialAbilityRadagastDornengestrupp
        UnpackTime                 = 1000
        UnpackingVariation         = 1
        PreparationTime            = 0
        PersistentPrepTime         = 0
        PackTime                   = 1330
    End

    Behavior = AutoAbilityBehavior ModuleTag_DornengestruppAutoAbility
	SpecialAbility		= SpecialAbilityRadagastDornengestrupp
	ForbiddenStatus 	= INSIDE_GARRISON
	MaxScanRange		= 100
	Query			= 3 ALL ENEMIES -STRUCTURE -MACHINE
   End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_RadaKrahenrufEnabler
        SpecialPowerTemplate       = SpecialAbilityRadagastKrahenruf
        TriggeredBy                = Upgrade_Level_3
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLRadaKrahenrufSpecialPower
        SpecialPowerTemplate       = SpecialAbilityRadagastKrahenruf
        OCL                        = OCL_RadagastKrahenruf
        CreateLocation             = CREATE_AT_EDGE_NEAR_TARGET_AND_MOVE_TO_LOCATION
        StartsPaused               = Yes
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroWordOfPoultryEnabler
        SpecialPowerTemplate      = SpecialAbilityRadagastWordOfPoultry
        TriggeredBy               = Upgrade_Level_7
        ObeyRechageOnTrigger      = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_CreateAHeroWordOfPoultryStarter
        SpecialPowerTemplate      = SpecialAbilityRadagastWordOfPoultry
        StartsPaused              = Yes
    End

    Behavior = ReplaceObjectUpdate ModuleTag_WordOfPoultryUpdate
        SpecialPowerTemplate      = SpecialAbilityRadagastWordOfPoultry
        UnpackingVariation        = 2
        UnpackTime                = 800
        PreparationTime           = 1
        PackTime                  = 100
        AwardXPForTriggering      = 0
        StartAbilityRange         = 100
        MustFinishAbility         = Yes

        ReplaceObject
            TargetObjectFilter    = CREATE_A_HERO_WORD_OF_POULTRY_OBJECT_FILTER
            ReplacementObjectName = Chicken_Replacement Rabbit_Replacement Dog_Replacement Dog1_Replacement Racoon_Replacement Duck_Replacement Cow_Replacement Sheep_Replacement Crow_Replacement
        End
        ReplaceRadius             = 50
        ReplaceFX                 = FX_CreateAHeroReplaceObject
        Scatter                   = Yes
    End

    Behavior = AutoAbilityBehavior ModuleTag_WordOfPoultryAutoAbilityBehavior
	SpecialAbility		= SpecialAbilityRadagastWordOfPoultry
	Query			= 15 ANY ENEMIES +INFANTRY +CAVALRY -STRUCTURE
	MaxScanRange		= 150
   End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy = Upgrade_Level_1
    End

    Behavior = FireWeaponUpdate ModuleTag_WeaponFiring
        FireWeaponNugget
            WeaponName = RadagastWindRadiusWeapon
            Offset     = X:0 Y:0 Z:0
            FireDelay  = 0
            OneShot    = No
        End
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FreundeEnabler
        SpecialPowerTemplate  = SpecialAbilityRadagastFreunde
        TriggeredBy           = Upgrade_Level_7
        ObeyRechageOnTrigger  = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLSpecialPowerFreunde
        SpecialPowerTemplate  = SpecialAbilityRadagastFreunde
        OCL                   = OCL_SpawnEaglesRadagsast
        CreateLocation        = CREATE_ABOVE_LOCATION
        StartsPaused          = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_FreundeAnimation
        UnpackTime            = 1000
        UnpackingVariation    = 2
        SpecialPowerTemplate  = SpecialAbilityRadagastFreunde
        PreparationTime       = 0
        PersistentPrepTime    = 0
        PackTime              = 1330
    End

    Behavior = AutoAbilityBehavior ModuleTag_FreundeAutoAbility
	SpecialAbility		= SpecialAbilityRadagastFreunde
	ForbiddenStatus 	= INSIDE_GARRISON
	MaxScanRange		= 150
	Query			= 1 ANY ENEMIES +HERO +MONSTER +MACHINE
	Query			= 2 ALL ENEMIES -STRUCTURE -MACHINE
   End






    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName  = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName  = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName  = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate ElvenLorienWarriorHordeCaptureBuildingAI
        CommandButtonName  = Command_CaptureBuilding
        SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
    End

    Behavior = AISpecialPowerUpdate RadagastDornengestruppAI
	CommandButtonName = Command_SpecialAbilityRadagastDornengestrupp
	SpecialPowerAIType = AI_SPECIAL_POWER_RANGED_AOE_ATTACK_UNITS
    End

    Behavior = AISpecialPowerUpdate RadagastConvertEnemyAI
	CommandButtonName = Command_SpecialAbilityRadagastConvertEnemy2
	SpecialPowerAIType = AI_SPELLBOOK_ARMY_BREAKER
	SpecialPowerRadius = 60
	SpecialPowerRange  = 250
    End

    Behavior = AISpecialPowerUpdate RadagastFreundeAI
	CommandButtonName = Command_SpecialAbilityRadagastFreunde2
	SpecialPowerAIType = AI_SPECIAL_POWER_RANGED_AOE_ATTACK_UNITS
    End

    Geometry              = CYLINDER
    GeometryMajorRadius   = 8.0
    GeometryHeight        = 25
    GeometryIsSmall       = Yes
    Shadow                = SHADOW_DECAL
    ShadowSizeX           = 20
    ShadowSizeY           = 20
    ShadowTexture         = ShadowI
End

