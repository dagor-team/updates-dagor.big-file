Object GasthausBilbo

    SelectPortrait   = HPBilbo
    ButtonImage      = HIBilbo

    Draw = W3DScriptedModelDraw ModuleTag_01

        RandomTexture = gubilbo.tga 0 rufrodo.tga
        RandomTexture = gubilbo.tga 0 gufrodo.tga

        OkToChangeModelColor = Yes

        ExtraPublicBone = SWORDBONE01

        StaticModelLODMode = Yes
        DependencySharedModelFlags = TURN_LEFT_HIGH_SPEED TURN_RIGHT_HIGH_SPEED    MOVING ACCELERATE DECELERATE TURN_LEFT TURN_RIGHT ATTACKING    BACKING_UP

        DefaultModelConditionState
            Model               = GUFrodo_SKN
            Skeleton            = RUFrodo_SKL
            WeaponLaunchBone    = PRIMARY B_HANDR
            WeaponLaunchBone    = SECONDARY B_HANDR
            ParticleSysBone     = NONE Predator FollowBone:Yes Persist:HOLD PersistID:100
        End

        ModelConditionState     = INVISIBLE_STEALTH
            ParticleSysBone     = NONE Predator FollowBone:Yes Persist:SPAWN PersistID:100
        End

        ModelConditionState     = PASSENGER_VARIATION_1
            Model               = GUFrodo_SKN
            Skeleton            = RUFrodo_SKL
            WeaponLaunchBone    = PRIMARY B_HANDR
            WeaponLaunchBone    = SECONDARY B_HANDR
        End

        ModelConditionState     = PASSENGER_VARIATION_2
            Model               = GUFrodo_SKN
            Skeleton            = RUFrodo_SKL
            WeaponLaunchBone    = PRIMARY B_HANDL
            WeaponLaunchBone    = SECONDARY B_HANDL
        End







        AnimationState = PASSENGER_VARIATION_1 FIRING_OR_PREATTACK_A
            Animation = Rar
                AnimationName = Rufro_TB_thra
                AnimationMode = ONCE
            End
            FrameForPristineBonePositions = 18
        End

        AnimationState = PASSENGER PASSENGER_VARIATION_1
            Animation = idleTreeBerd
                AnimationName = Rufro_TB_idla
                AnimationMode = LOOP
            End
        End


        AnimationState = PASSENGER_VARIATION_2 FIRING_OR_PREATTACK_A
            Animation = Rar2
                AnimationName = Rufro_tb_thrb
                AnimationMode = ONCE
            End
            FrameForPristineBonePositions = 18
        End

        AnimationState = PASSENGER_VARIATION_2
            Animation = idleTreeBerd2
                AnimationName = Rufro_tb_idlb
                AnimationMode = LOOP
            End
        End




        AnimationState        =  PASSENGER FIRING_OR_PREATTACK_A
            Animation           = THRA
                AnimationName     = RUFrodo_THRA
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
                AnimationBlendTime = 0
            End
            StateName           = NoSword
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SheatheSword") end
            EndScript
        End

        AnimationState = PASSENGER MOVING ACCELERATE
            Animation = RUFro_HH_RUNA
                AnimationName = RUFro_HH_ACCL
                AnimationMode =LOOP
                AnimationBlendTime = 0
            End
            StateName           = Mounted
        End

          AnimationState = PASSENGER MOVING DECELERATE
              Animation = RUFro_HH_RUNA
                  AnimationName = RUFro_HH_DECL
                  AnimationMode =LOOP
                  AnimationBlendTime = 0
              End
              StateName           = Mounted
          End

          AnimationState = PASSENGER MOVING TURN_LEFT
              Animation = RUFro_HH_RUNA
                  AnimationName = RUFro_HH_TNL2
                  AnimationMode =LOOP
                  AnimationBlendTime = 0
              End
              StateName           = Mounted
          End

          AnimationState = PASSENGER MOVING TURN_RIGHT
              Animation = RUFro_HH_RUNA
                  AnimationName = RUFro_HH_TNL1
                  AnimationMode =LOOP
                  AnimationBlendTime = 0
              End
              StateName           = Mounted
          End

          AnimationState = PASSENGER TURN_LEFT_HIGH_SPEED
              Animation = RUFro_HH_RUNA
                  AnimationName = RUFro_HH_TRNL
                  AnimationMode =LOOP
                  AnimationBlendTime = 0
              End
              StateName           = Mounted
          End

          AnimationState = PASSENGER TURN_RIGHT_HIGH_SPEED
              Animation = RUFro_HH_RUNA
                  AnimationName = RUFro_HH_TRNR
                  AnimationMode =LOOP
                  AnimationBlendTime = 0
              End
              StateName           = Mounted
          End


        AnimationState = PASSENGER MOVING
            Animation = RUFro_HH_RUNA
                AnimationName = RUFro_HH_RUNA
                AnimationMode =LOOP
                AnimationBlendTime = 0
            End
            StateName           = Mounted
        End

        AnimationState = PASSENGER SELECTED
            Animation = RUFro_HH_RUNA
                AnimationName = RUFro_HH_IDLA
                AnimationMode =LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Mounted" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
            EndScript
        End


        TransitionState                =    TRANS_MountedSelect
            Animation                =    ATNA
                AnimationName        =    RUFro_HH_ATNA
                AnimationMode        =    ONCE
            End
        End




        AnimationState = PASSENGER
            Animation = IDLE1
                AnimationName = RUFro_HH_IDLA
                AnimationMode =ONCE

            End
            Animation = IDLE2
                AnimationName = RUFro_HH_IDLB
                AnimationMode = ONCE

            End





            Animation = IDLE4
                AnimationName = RUFro_HH_IDLH
                AnimationMode = ONCE

            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
            StateName           = Mounted
        End








        AnimationState                        = STUNNED_FLAILING
            StateName                        = STATE_Bored_Rocks
            Animation                        = FLYA
                AnimationName                = RUFrodo_FLYA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
            Flags                            = RANDOMSTART
        End

        AnimationState                        = DYING DEATH_2
            Animation
                AnimationName                = RUFrodo_IDLA
                AnimationMode                = LOOP
            End
        End


        AnimationState                        = DYING SPLATTED
            StateName                        = STATE_Bored_Rocks
            Animation                        = LNDA
                AnimationName                = RUFrodo_LNDA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = DYING WEAPONSET_TOGGLE_1
            StateName                        = STATE_Bored_Rocks
                Animation                    = DIEA
                AnimationName                = RUFrodo_DIEA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = DYING EMOTION_ALERT
            StateName                        = STATE_Dead.
                Animation                    = DIEB
                AnimationName                = RUFrodo_DIEB
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = DYING
            StateName                        = STATE_Dead.
            Animation                        = GTPA
                AnimationName                = RUFrodo_DIEA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = RUFrodo_IDLB
                AnimationMode                = LOOP
            End
        End


        AnimationState                        = STUNNED_STANDING_UP
            StateName                        = STATE_Ready_Rocks
            Animation                        = GTPA
                AnimationName                = RUFrodo_GTPA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = STUNNED
            StateName                        = STATE_Bored_Rocks
            Animation                        = LNDA
                AnimationName                = RUFrodo_LNDA
                AnimationMode                = ONCE
            End
        End



        AnimationState                        = RESURRECTED WEAPONSET_TOGGLE_1
            StateName                        = STATE_Bored_Rocks
            Animation                        = KnockedDownAndGetsUpBareHanded
                AnimationName                = RUFrodo_GTPA
                AnimationMode                = ONCE
            End

            EnteringStateFX                    = FX_Resurrect
        End


        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = RUFrodo_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState                        = MOVING WEAPONSET_TOGGLE_1
            StateName                        = STATE_Running_Rocks
            Animation                        = RUND
                AnimationName                = RUFrodo_RUND
                AnimationMode                = LOOP
            End
            Flags                            = RANDOMSTART
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
            EndScript
        End

        AnimationState                        = MOVING EMOTION_ALERT
            StateName                        = STATE_Running_Sword
            Animation                        = RUNA
                AnimationName                = RUFrodo_RUNA
                AnimationMode                = LOOP
            End
            Flags                            = RANDOMSTART
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
            EndScript
        End

        AnimationState                        = MOVING
            StateName                        = STATE_Running_Rocks
            Animation                        = RUND
                AnimationName                = RUFrodo_RUND
                AnimationMode                = LOOP
            End
            Flags                            = RANDOMSTART
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
            EndScript
        End



        AnimationState        = SPECIAL_WEAPON_TWO
            Animation
                AnimationName     = DUGloin_SPCB
                AnimationMode     = ONCE
            End
        End


        AnimationState                    = BETWEEN_FIRING_SHOTS_A WEAPONSET_TOGGLE_1
            StateName                    = STATE_Ready_Rocks
            Animation                    = IDLB
                AnimationName            = RUFrodo_IDLB
                AnimationMode            = LOOP
                AnimationBlendTime        = 20
            End



        End

        AnimationState                    = BETWEEN_FIRING_SHOTS_A
            StateName                    = STATE_Ready_Sword
            Animation                    = IDLA
                AnimationName            = RUFrodo_IDLA
                AnimationMode            = LOOP
                AnimationBlendTime        = 20
            End
            BeginScript
                CurDrawableAllowToContinue()
            EndScript
        End

        AnimationState                        = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            StateName                        = STATE_Ready_Rocks
            Animation                        = RockThrow
                AnimationName                = RUFrodo_THRA
                AnimationMode                = ONCE

            End
            FrameForPristineBonePositions    = 29
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
            EndScript
        End



        AnimationState                        = FIRING_OR_PREATTACK_A
            StateName                        = STATE_Ready_Sword
            Animation                        = ATKC
                AnimationName                = RUFrodo_ATKC
                AnimationMode                = ONCE
                UseWeaponTiming                = Yes
                AnimationBlendTime        = 10
            End
            Animation                        = ATKB
                AnimationName                = RUFrodo_ATKB
                AnimationMode                = ONCE
                UseWeaponTiming                = Yes
                AnimationBlendTime        = 10
            End
            Flags = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
            EndScript
        End

        AnimationState                        = FIRING_OR_PREATTACK_B
            StateName                        = STATE_Ready_Sword
            Animation                        = ATKC
                AnimationName                = RUFrodo_ATKC
                AnimationMode                = ONCE
                UseWeaponTiming                = Yes
                AnimationBlendTime        = 10
            End
            Animation                        = ATKB
                AnimationName                = RUFrodo_ATKB
                AnimationMode                = ONCE
                UseWeaponTiming                = Yes
                AnimationBlendTime        = 10
            End
            Flags = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
            EndScript
        End


        AnimationState                        = FIRING_OR_PREATTACK_B WEAPONSET_TOGGLE_1
            StateName                        = STATE_Ready_Rocks
            Animation                        = RockThrow
                AnimationName                = RUFrodo_THRA
                AnimationMode                = ONCE

            End
            FrameForPristineBonePositions    = 29
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
            EndScript
        End







        AnimationState                        = UNPACKING PACKING_TYPE_1 WEAPONSET_TOGGLE_1
            Animation
                AnimationName                = RUFrodo_PHLD
                AnimationMode                = ONCE
            End
            ParticleSysBone                    = B_HANDL PhialofGaladrielDelay FollowBone:Yes
        End

        AnimationState                        = PREPARING PACKING_TYPE_1 WEAPONSET_TOGGLE_1
            Animation
                AnimationName                = RUFrodo_PHLE
                AnimationMode                = ONCE
            End
            ParticleSysBone                    = B_HANDL PhialofGaladriel FollowBone:Yes
        End
        AnimationState                        = PACKING PACKING_TYPE_1 WEAPONSET_TOGGLE_1
            Animation
                AnimationName                = RUFrodo_PHLD
                AnimationMode                = ONCE_BACKWARDS
            End
            Flags                            = START_FRAME_LAST
            ParticleSysBone                    = B_HANDL PhialofGaladrielEnd FollowBone:Yes
        End

        AnimationState                        = PACKING_TYPE_1 WEAPONSET_TOGGLE_1
            Animation
                AnimationName                = RUFrodo_PHLE
                AnimationMode                = LOOP
            End
            ParticleSysBone                    = B_HANDL PhialofGaladriel FollowBone:Yes
        End

        AnimationState                        = UNPACKING PACKING_TYPE_1 EMOTION_ALERT
            Animation
                AnimationName                = RUFrodo_PHLA
                AnimationMode                = ONCE
            End
            ParticleSysBone                    = B_HANDL PhialofGaladrielDelay FollowBone:Yes
        End

        AnimationState                        = PREPARING PACKING_TYPE_1 EMOTION_ALERT
            Animation
                AnimationName                = RUFrodo_PHLB
                AnimationMode                = ONCE
            End
            ParticleSysBone                    = B_HANDL PhialofGaladriel FollowBone:Yes
        End

        AnimationState                        = PACKING PACKING_TYPE_1 EMOTION_ALERT
            Animation
                AnimationName                = RUFrodo_PHLC
                AnimationMode                = ONCE
            End
            ParticleSysBone                    = B_HANDL PhialofGaladrielEnd FollowBone:Yes
        End
        AnimationState                        = PACKING_TYPE_1 EMOTION_ALERT
            Animation
                AnimationName                = RUFrodo_PHLB
                AnimationMode                = LOOP
            End
            ParticleSysBone                    = B_HANDL PhialofGaladriel FollowBone:Yes
        End

        AnimationState                        = UNPACKING PACKING_TYPE_1
            Animation
                AnimationName                = RUFrodo_PHLD
                AnimationMode                = ONCE
            End
            ParticleSysBone                    = B_HANDL PhialofGaladrielDelay FollowBone:Yes
        End

        AnimationState                        = PREPARING PACKING_TYPE_1
            Animation
                AnimationName                = RUFrodo_PHLE
                AnimationMode                = ONCE
            End
            ParticleSysBone                    = B_HANDL PhialofGaladriel FollowBone:Yes
        End
        AnimationState                        = PACKING PACKING_TYPE_1
            Animation
                AnimationName                = RUFrodo_PHLD
                AnimationMode                = ONCE_BACKWARDS
            End
            Flags                            = START_FRAME_LAST
            ParticleSysBone                    = B_HANDL PhialofGaladrielEnd FollowBone:Yes
        End

        AnimationState                        = PACKING_TYPE_1
            Animation
                AnimationName                = RUFrodo_PHLE
                AnimationMode                = LOOP
            End
            ParticleSysBone                    = B_HANDL PhialofGaladriel FollowBone:Yes
        End





        AnimationState                        = USER_1
            StateName                        = STATE_Bored_Rocks
            Animation                        = CinematicSigh
                AnimationName                = RUFrodo_SIEA
                AnimationMode                = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_AttentionToBored_Rocks") end
            EndScript
        End



        AnimationState                        = EMOTION_CELEBRATING
            Animation
                AnimationName                = RUFrodo_CHRA
                AnimationMode                = ONCE
            End
            Animation
                AnimationName                = RUFrodo_CHRB
                AnimationMode                = ONCE
            End
            Animation
                AnimationName                = RUFrodo_CHRC
                AnimationMode                = ONCE
            End
            Flags                            = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                        = EMOTION_TAUNTING
            Animation
                AnimationName                = RUFrodo_TNTA
                AnimationMode                = LOOP
            End
        End

        AnimationState                        = EMOTION_ALERT WEAPONSET_TOGGLE_1
            StateName                        = STATE_Ready_Rocks
            Animation                        = readyToHuckSomeRocks
                AnimationName                = RUFrodo_IDLB
                AnimationMode                = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
            EndScript
        End

        AnimationState                        = EMOTION_ALERT
            StateName                        = STATE_Ready_Sword
            Animation                        = readyToHackSomeFoos
                AnimationName                = RUFrodo_IDLA
                AnimationMode                = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
            EndScript
        End

        AnimationState                        = RAISING_FLAG
            Animation
                AnimationName                = RUFrodo_CHRA
                AnimationMode                = ONCE
            End
            Animation
                AnimationName                = RUFrodo_CHRB
                AnimationMode                = ONCE
            End
            Animation
                AnimationName                = RUFrodo_CHRC
                AnimationMode                = ONCE
            End
            Flags                            = RESTART_ANIM_WHEN_COMPLETE
        End



        AnimationState                        = SELECTED
            StateName                        = STATE_Attention_Rocks
            Animation                        = attention
                AnimationName                = RUFrodo_ATNB
                AnimationMode                = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Attention_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Attention_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Attention_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Attention_SwordToRocks") end
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
            EndScript
        End




        IdleAnimationState
            StateName                        = STATE_Bored_Rocks
            Animation                        = IDLB
                AnimationName                = RUFrodo_IDLB
                AnimationMode                = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_AttentionToBored_Rocks") end
            EndScript
        End



        TransitionState                        = TRANS_DrawSword
            Animation                        = STHA
                AnimationName                = RUFrodo_STHA
                AnimationMode                = ONCE
            End
        End

        TransitionState                        = TRANS_Running_RocksToSword
            Animation                        = STHD
                AnimationName                = RUFrodo_STHD
                AnimationMode                = ONCE
            End
        End
        TransitionState                        = TRANS_Ready_RocksToSword
            Animation                        = STHA
                AnimationName                = RUFrodo_STHA
                AnimationMode                = ONCE
            End
        End
        TransitionState                        = TRANS_Bored_RocksToSword
            Animation                        = STHA
                AnimationName                = RUFrodo_STHA
                AnimationMode                = ONCE
            End
        End
        TransitionState                        = TRANS_Attention_RocksToSword
            Animation                        = STHA
                AnimationName                = RUFrodo_STHA
                AnimationMode                = ONCE
            End
        End

        TransitionState                        = TRANS_SheatheSword
            Animation                        = STHA
                AnimationName                = RUFrodo_STHA
                AnimationMode                = ONCE_BACKWARDS
            End
            Flags                            = START_FRAME_LAST
        End

        TransitionState                        = TRANS_Running_SwordToRocks
            Animation                        = STHC
                AnimationName                = RUFrodo_STHC
                AnimationMode                = ONCE
            End
        End
        TransitionState                        = TRANS_Ready_SwordToRocks
            Animation                        = STHB
                AnimationName                = RUFrodo_STHB
                AnimationMode                = ONCE
            End
        End
        TransitionState                        = TRANS_Bored_SwordToRocks
            Animation                        = STHB
                AnimationName                = RUFrodo_STHB
                AnimationMode                = ONCE
            End
        End
        TransitionState                        = TRANS_Attention_SwordToRocks
            Animation                        = STHB
                AnimationName                = RUFrodo_STHB
                AnimationMode                = ONCE
            End
        End
        TransitionState                        = TRANS_BoredToAttention_Rocks
            Animation                        = ATNA
                AnimationName                = RUFrodo_ATNA
                AnimationMode                = ONCE
            End
        End
        TransitionState                        = TRANS_AttentionToBored_Rocks
            Animation                        = ATNC
                AnimationName                = RUFrodo_ATNC
                AnimationMode                = ONCE
            End
        End

        TransitionState                        = TRANS_DrawSword_Running
            Animation                        = STHA
                AnimationName                = RUFrodo_RUNC
                AnimationMode                = ONCE
            End
        End

        TransitionState                        = TRANS_SheatheSword_Running
            Animation                        = STHA
                AnimationName                = RUFrodo_RUND
                AnimationMode                = ONCE
            End
        End

    End









    Draw = W3DScriptedModelDraw ModuleTag_LightController
        DefaultModelConditionState
            Model = None
        End

        ModelConditionState = SPECIAL_ENEMY_NEAR
            Model = RUFrodoStng_SKN
            Shadow                        = SHADOW_ADDITIVE_DECAL_DYNAMIC
            ShadowSizeX                    = 100
            ShadowSizeY                    = 100
            ShadowTexture                = EXFrodoStingGlow
            ShadowOpacityStart            = 0
            ShadowOpacityFadeInTime        = 1000
            ShadowOpacityPeak            = 255
            ShadowOpacityFadeOutTime    = 1000
            ShadowOpacityEnd            = 0
            ShadowOverrideLODVisibility = Yes
        End

        ModelConditionState = PREPARING PACKING_TYPE_1
            Model = Invisible
                    Shadow = SHADOW_ADDITIVE_DECAL_DYNAMIC
                    ShadowSizeX = 150
                    ShadowSizeY = 150
                    ShadowTexture = EXLightAura02
                   ShadowOpacityStart            = 0
            ShadowOpacityFadeInTime        = 1000
            ShadowOpacityPeak            = 255
            ShadowOpacityFadeOutTime    = 1000
            ShadowOpacityEnd            = 0
        End

        IdleAnimationState



        End
        AnimationState = SPECIAL_ENEMY_NEAR



        End

        AttachToBoneInAnotherModule = SWORDBONE01
    End



    Side = Dwarves
    EditorSorting = UNIT
    ThreatLevel = FRODO_THREAT_LEVEL
    ThingClass = CHARACTER_UNIT
    DisplayMeleeDamage = 150
    DisplayRangedDamage = 100
    HeroSortOrder = 60
    TransportSlotCount = TRANSPORTSLOTCOUNT_HERO

    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY    BilboStingWeapon
        Weapon            = SECONDARY  BilboStingWeapon
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
        AutoChooseSources = SECONDARY NONE
    End

    WeaponSet
        Conditions = CONTAINED WEAPONSET_TOGGLE_1
        Weapon = PRIMARY    HobbitHeroRockThrow
    End

    WeaponSet
        Conditions = CONTAINED
        Weapon = PRIMARY    HobbitHeroRockThrow
    End

    WeaponSet
        Conditions = WEAPONSET_TOGGLE_1
        Weapon = PRIMARY    HobbitHeroRockThrow
    End

    ArmorSet
        Conditions      = None
        Armor           = VeryWeakHeroArmor
        DamageFX        = NormalDamageFX
    End

    ArmorSet
        Conditions      = PLAYER_UPGRADE
        Armor           = MediumHeroArmor
        DamageFX        = NormalDamageFX
    End


    VisionRange = 200
    ShroudClearingRange = SHROUD_CLEAR_HOBBIT

    BuildCost = 300
    BuildTime = VERY_WEAK_HERO_BUILDTIME

    BountyValue = ROHAN_FRODO_BOUNTY_VALUE
    DisplayName = OBJECT:Bilbo
    RecruitText = CONTROLBAR:BilboRecruitImladris
    ReviveText    = CONTROLBAR:BilboRevive
    Hotkey        = CONTROLBAR:BilboHotkey
    CrushableLevel = 2

    CommandSet = BilboCommandSet_Imladris
    CommandPoints = 0





    VoiceAttack                = BilboVoiceAttack
    VoiceAttackCharge              = BilboVoiceAttack
    VoiceAttackMachine        = BilboVoiceAttack
    VoiceAttackStructure          = BilboVoiceAttack
    VoiceCreated            = BilboVoiceCreated
    VoiceFullyCreated              = BilboVoiceCreated
    VoiceFear                 = BilboVoiceHelp
    VoiceGuard                = BilboVoiceMove
    VoiceMove                = BilboVoiceMove
    VoiceMoveWhileAttacking          = BilboVoiceMove
    VoicePriority            = 80
    VoiceRetreatToCastle          = BilboVoiceMovetoCamp
    VoiceSelect                = BilboVoiceSelect
    VoiceSelectBattle         = BilboVoiceSelect

    SoundImpact                = ImpactHorse

    UnitSpecificSounds
        VoiceGarrison                      = BilboVoiceMove
        VoiceEnterUnitElvenTransportShip    = BilboVoiceMove
        VoiceInitiateCaptureBuilding        = BilboVoiceMove
    End

    CrowdResponseKey = Hobbit

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Hobbit Unit Infantry
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:FootstepDirtA                             Animation:RUBilbo_SKL.RUFrodo_RUNA     Frames:2 12 21 30
        AnimationSound = Sound:FootstepDirtA                             Animation:RUBilbo_SKL.RUFrodo_RUNB     Frames:2 10 20 28 38 46
        AnimationSound = Sound:FootstepDirtA                             Animation:RUBilbo_SKL.RUFrodo_RUNC     Frames:6 14 22 30
        AnimationSound = Sound:FootstepDirtA                             Animation:RUBilbo_SKL.RUFrodo_RUND     Frames:2 12 21 30
        AnimationSound = Sound:FootstepDirtA                             Animation:RUBilbo_SKL.RUFrodo_CINC     Frames:5 17
        AnimationSound = Sound:FootstepDirtA                             Animation:RUBilbo_SKL.RUFrodo_MFDA     Frames:4 13
        AnimationSound = Sound:FootstepDirtA                             Animation:RUBilbo_SKL.RUFrodo_STHC     Frames:2 12 21 31
        AnimationSound = Sound:FootstepDirtA                             Animation:RUBilbo_SKL.RUFrodo_STHD     Frames:2 12 21 31

        AnimationSound = Sound:BodyFallGenericNoArmor                         Animation:RUBilbo_SKL.RUFrodo_DIEA     Frames:34
        AnimationSound = Sound:BodyFallGenericNoArmor                         Animation:RUBilbo_SKL.RUFrodo_DIEB     Frames:37
        AnimationSound = Sound:BodyFallGenericNoArmor                         Animation:RUBilbo_SKL.RUFrodo_LNDA     Frames:2

        AnimationSound = Sound:SwordShingClean2                             Animation:RUBilbo_SKL.RUFrodo_STHA    Frames:6
        AnimationSound = Sound:SwordIntoScabbard2                            Animation:RUBilbo_SKL.RUFrodo_STHB    Frames:10
        AnimationSound = Sound:SwordIntoScabbard2                            Animation:RUBilbo_SKL.RUFrodo_STHC    Frames:5
        AnimationSound = Sound:SwordShingClean2                            Animation:RUBilbo_SKL.RUFrodo_STHD    Frames:2

        AnimationSound = Sound:PhialOn             RequiredMC:UNPACKING        Animation:RUBilbo_SKL.RUFrodo_PHLA     Frames:40
        AnimationSound = Sound:PhialOn             RequiredMC:UNPACKING        Animation:RUBilbo_SKL.RUFrodo_PHLD     Frames:30
    End




    RadarPriority = UNIT
    KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT HOBBIT ATTACK_NEEDS_LINE_OF_SIGHT HEAVY_MELEE_HITTER

    Body = RespawnBody ModuleTag_RespawnBody
        MaxHealth         		= 3000
        PermanentlyKilledByFilter   = NONE
		DodgePercent        = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                    = DYING
        DeathAnimationTime            = 3000
        RespawnAnim                    = LEVELED
        RespawnAnimationTime        = 2000
        AutoRespawnAtObjectFilter    = NONE +CASTLE_KEEP
        ButtonImage                    = HIBilbo

        RespawnRules =    AutoSpawn:No           Cost:300        Time:VERY_WEAK_HERO_RESPAWNTIME        Health:100%
    End



    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance        =    300
         TauntAndPointUpdateDelay    =    1000
         HeroScanDistance            = 150

        AddEmotion            =    Terror_Base
        AddEmotion            =    Doom_Base

        AddEmotion            =    UncontrollableFear_Base


        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
         AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base
        AddEmotion            =    HeroCheerIdle_Base
        AddEmotion            =    HeroCheerBusy_Base
        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
     End

    Behavior = AutoHealBehavior ModuleTag_FrodoHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 1000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = LockWeaponCreate ModuleTag_ToggleToSwordToStart
        SlotToLock = PRIMARY
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle   = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate          = 500
        AILuaEventsList              = BilboFunctions
        HoldGroundCloseRangeDistance = 40
    End

    Behavior = AutoHealBehavior ModuleTag_ElvenGiftHealing
        StartsActive                = No
        TriggeredBy                    = Upgrade_ElvenGift
        HealingAmount                = ELVEN_GIFT_REGEN_AMOUNT
        HealingDelay                = ELVEN_GIFT_REGEN_DELAY
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = AttributeModifierUpgrade ModuleTag_ElvenGiftBonus
        TriggeredBy = Upgrade_ElvenGift
        AttributeModifier = SpellBookElvenGifts
    End

    #include "..\..\..\includes\CaptureBuilding.inc"

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_GOOD_HOBBIT_SPEED
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 4600
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -KNOCKBACK -FADED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000

    End

    Behavior = SlowDeathBehavior ModuleTag_RingGeklaut
        DeathTypes = NONE +EXTRA_2
        DeathFlags       = DEATH_2
        FadeDelay        = 3000
        FadeTime         = 3000
        DestructionDelay = 5000
        FX               = INITIAL FX_EmotionCheer
        Sound            = FINAL SpellGenericUnsummonMS
        OCL              = FINAL OCL_BilboRingdieb
    End



    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = HeroDie ModuleTag_HeroDeath
        SpecialPowerTemplate = SpecialAbilitySmite
    End

    Behavior = SlowDeathBehavior ModuleTag_07
        DeathTypes = NONE +KNOCKBACK
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
    End

    Behavior = BezierProjectileBehavior ModuleTag_08

        FirstHeight = 24
        SecondHeight = 24
        FirstPercentIndent = 30%
        SecondPercentIndent = 70%
        TumbleRandomly = Yes

        CrushStyle = Yes
        DieOnImpact = Yes
        BounceCount = 1
        BounceDistance = 40
        BounceFirstHeight = 24
        BounceSecondHeight = 24
        BounceFirstPercentIndent = 20%
        BounceSecondPercentIndent = 80%

        GroundHitFX       = FX_ThrownRockGroundHit
        GroundBounceFX    = FX_ThrownRockBounceHit
    End




    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AdventureEnabler
        SpecialPowerTemplate      = SpecialAbilityAdventure
        TriggeredBy               = Upgrade_Level_2
    End

    Behavior = SpecialPowerModule ModuleTag_AdventurePowerPower
        SpecialPowerTemplate      = SpecialAbilityAdventure
        UpdateModuleStartsAttack  = No
        StartsPaused              = Yes
    End

    Behavior = WeaponModeSpecialPowerUpdate ModuleTag_AdventurePowerUpdate
        SpecialPowerTemplate      = SpecialAbilityAdventure
        Duration                  = 30000
        AttributeModifier         = BilboAdventureBonus
        LockWeaponSlot            = SECONDARY
        StartsPaused              = Yes
    End




    Behavior = SpecialPowerModule ModuleTag_TreacheryPowerPower
        SpecialPowerTemplate      = SpecialAbilityTreacheryOfTheRingNew
        UpdateModuleStartsAttack  = No
        StartsPaused              = No
    End

    Behavior = WeaponModeSpecialPowerUpdate ModuleTag_TreacheryPowerUpdate
        SpecialPowerTemplate      = SpecialAbilityTreacheryOfTheRingNew
        Duration                  = 30000
        AttributeModifier         = TreacheryOfTheRingBonus
        LockWeaponSlot            = SECONDARY
        StartsPaused              = Yes
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_IgniteEnabler
        SpecialPowerTemplate              = SpecialAbilityTindomielBeauty
        TriggeredBy                       = Upgrade_Level_5
    End

    Behavior = SpecialPowerModule ModuleTag_IgniteStarter
        SpecialPowerTemplate              = SpecialAbilityTindomielBeauty
        UpdateModuleStartsAttack          = No
        StartsPaused                      = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate
        SpecialPowerTemplate              = SpecialAbilityTindomielBeauty
        UnpackingVariation                = 3
        UnpackTime                        = 1800
        PackTime                          = 1600
        HeroAttributeModifier             = MasterburglerBonus
        HeroEffectDuration                = 35000
    End

     Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroStealMoneyEnabler
        SpecialPowerTemplate     = SpecialAbilityBilboRiddles
        TriggeredBy              = Upgrade_Level_5
    End

    Behavior = SpecialPowerModule ModuleTag_CreateAHeroStealMoneyStarter
        SpecialPowerTemplate     = SpecialAbilityBilboRiddles
        UpdateModuleStartsAttack = Yes
        StartsPaused             = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_CreateAHeroStealMoneyUpdate
        SpecialPowerTemplate    = SpecialAbilityBilboRiddles
        UnpackTime              = 2000
        PackTime                = 2000
        AwardXPForTriggering    = 0
        StartAbilityRange       = CREATE_A_HERO_STEAL_MONEY_DO_POWER_RANGE
        ApproachRequiresLOS     = Yes
        SpecialWeapon           = BilboRiddles
        WhichSpecialWeapon      = 1
    End

    Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag
        FireWeaponNugget
            WeaponName              = MasterBurglerRadiusWeapon
            FireDelay               = 0
            OneShot                 = No
        End
        HeroModeTrigger             = Yes
    End




    Behavior = SpecialEnemySenseUpdate ModuleTag_StingSeesOrcs
        SpecialEnemyFilter = ANY +ORC +URUK +MordorShelob
        ScanRange = 200
        ScanInterval = 2000
    End







    Behavior = InvisibilityUpdate ModuleTag_StealthForEscape
        InvisibilityNugget
            InvisibilityType        = STEALTH
            ForbiddenConditions        = MOVING FIRING_ANY TAKING_DAMAGE USING_ABILITY
            BecomeStealthedFX       = FX_ElvenCloakOn
            ExitStealthFX           = FX_ElvenCloakOff
            Options                    = UNTOGGLE_HIDDEN_WHEN_LEAVING_STEALTH
        End
        StartsActive                = No
        UpdatePeriod                = 2000
    End

    Behavior = SpecialPowerModule ModuleTag_ElfCloakStarter
        SpecialPowerTemplate      = SpecialAbilityElfCloak
        UpdateModuleStartsAttack  = Yes

    End
    Behavior = ToggleHiddenSpecialAbilityUpdate ModuleTag_ElfCloakUpdate
        SpecialPowerTemplate    = SpecialAbilityElfCloak















        AwardXPForTriggering    = 0
    End








    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TreasureEnabler
        SpecialPowerTemplate      = SpecialAbilityRadagastKrahenruf
        TriggeredBy               = Upgrade_Level_7
    End

    Behavior = OCLSpecialPower ModuleTag_OCLSpecialPower
        SpecialPowerTemplate      = SpecialAbilityRadagastKrahenruf
        OCL                       = OCL_SpawnBilboTreasure_Large
        TriggerFX                 = FX_BilboSchatz
        CreateLocation            = CREATE_AT_LOCATION
        StartsPaused              = Yes
    End







    Behavior = InvisibilityUpdate ModuleTag_StealthForEscape2
        InvisibilityNugget
            InvisibilityType        = STEALTH
            ForbiddenConditions     = TAKING_DAMAGE FIRING_ANY USING_ABILITY
            BecomeStealthedFX       = FX_ElvenCloakOn
            ExitStealthFX           = FX_ElvenCloakOff
            Options                 = UNTOGGLE_HIDDEN_WHEN_LEAVING_STEALTH
        End
        StartsActive                = No
        UpdatePeriod                = 2000
    End
    Behavior = SpecialPowerModule ModuleTag_ElfCloakStarter2
        SpecialPowerTemplate      = SpecialAbilityNewIsildurOneRingPower
        UpdateModuleStartsAttack  = Yes

    End
    Behavior = ToggleHiddenSpecialAbilityUpdate ModuleTag_ElfCloakUpdate2
        SpecialPowerTemplate      = SpecialAbilityNewIsildurOneRingPower
        AwardXPForTriggering      = 0
    End



    Behavior = StealthDetectorUpdate StealthDetectorUpdateModuleTag
        DetectionRange      = 300
        DetectionRate       = 500
        CancelOneRingEffect = Yes
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_MithrilMineKampagne
        SpecialPowerTemplate = SpecialAbilityFakeLeadership2
        TriggeredBy = Upgrade_Level_6
    End

    Behavior = SpecialPowerModule ModuleTag_MithrilMineUpdateKampagne
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership2
        UpdateModuleStartsAttack  = No
        StartsPaused = Yes
    End

    Behavior = ArmorUpgrade ModuleTag_ArmorUpgradeMithrilKampagne
        TriggeredBy     = Upgrade_Level_6
        ArmorSetFlag    = PLAYER_UPGRADE
    End

    Behavior = SubObjectsUpgrade ModuleTag_MithrilSkinwelchsel
        TriggeredBy     = Upgrade_Level_6
        UpgradeTexture  = gubilbo.tga 0 gubilbo_ha.tga
        UpgradeTexture  = rufrodo.tga 0 gubilbo_ha.tga
        UpgradeTexture  = gufrodo.tga 0 gubilbo_ha.tga
    End

    Behavior = ProductionUpdate ProductionUpdateModuleTag
        GiveNoXP = Yes
    End








    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate ToggleLurtzWeaponAI
        CommandButtonName = Command_ToggleFrodoWeapon
        SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_MELEE_AND_RANGE
        SpecialPowerRange = 50
    End

    Behavior = AISpecialPowerUpdate CarnageAI
        CommandButtonName = Command_SpecialAbilityTreacheryOfTheRing
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate ElfCloakAI
        CommandButtonName = Command_SpecialAbilityBilboVerstecken
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate RoyalGuardAI
        CommandButtonName = Command_BilboMeisterdieb
        SpecialPowerAIType = AI_SPECIAL_POWER_TARGETAOE_SUMMON
        SpecialPowerRadius = 30.0
    End


    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes

    Shadow = SHADOW_DECAL
    ShadowSizeX = 18
    ShadowSizeY = 18
    ShadowTexture = ShadowI
End

Object GasthausBilbo_RingDieb
End



Object DwarvenBilbo


    SelectPortrait             = HPBilboYoung
    ButtonImage                = HIBilboYoung

    Draw = W3DScriptedModelDraw ModuleTag_01

        RandomTexture = gubilboy.tga 0 rufrodo.tga
        RandomTexture = gubilboy.tga 0 gufrodo.tga

          OkToChangeModelColor = Yes




        ExtraPublicBone = SWORDBONE01

        StaticModelLODMode = Yes
        DependencySharedModelFlags = TURN_LEFT_HIGH_SPEED TURN_RIGHT_HIGH_SPEED    MOVING ACCELERATE DECELERATE TURN_LEFT TURN_RIGHT ATTACKING    BACKING_UP


        DefaultModelConditionState
            Model               = GUFrodo_SKN
            Skeleton            = RUFrodo_SKL
            WeaponLaunchBone    = PRIMARY B_HANDR
            WeaponLaunchBone    = SECONDARY B_HANDR
            ParticleSysBone     = NONE Predator FollowBone:Yes Persist:HOLD PersistID:100
        End

        ModelConditionState     = INVISIBLE_STEALTH
            ParticleSysBone     = NONE Predator FollowBone:Yes Persist:SPAWN PersistID:100
        End


        ModelConditionState     = PASSENGER_VARIATION_1
            Model               = GUFrodo_SKN
            Skeleton            = RUFrodo_SKL
            WeaponLaunchBone    = PRIMARY B_HANDR
            WeaponLaunchBone    = SECONDARY B_HANDR
        End

        ModelConditionState     = PASSENGER_VARIATION_2
            Model               = GUFrodo_SKN
            Skeleton            = RUFrodo_SKL
            WeaponLaunchBone    = PRIMARY B_HANDL
            WeaponLaunchBone    = SECONDARY B_HANDL
        End








        AnimationState = PASSENGER_VARIATION_1 FIRING_OR_PREATTACK_A
            Animation = Rar
                AnimationName = Rufro_TB_thra
                AnimationMode = ONCE
            End
            FrameForPristineBonePositions = 18
        End

        AnimationState = PASSENGER PASSENGER_VARIATION_1
            Animation = idleTreeBerd
                AnimationName = Rufro_TB_idla
                AnimationMode = LOOP
            End
        End


        AnimationState = PASSENGER_VARIATION_2 FIRING_OR_PREATTACK_A
            Animation = Rar2
                AnimationName = Rufro_tb_thrb
                AnimationMode = ONCE
            End
            FrameForPristineBonePositions = 18
        End

        AnimationState = PASSENGER_VARIATION_2
            Animation = idleTreeBerd2
                AnimationName = Rufro_tb_idlb
                AnimationMode = LOOP
            End
        End




        AnimationState        =  PASSENGER FIRING_OR_PREATTACK_A
            Animation           = THRA
                AnimationName     = RUFrodo_THRA
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
                AnimationBlendTime = 0
            End
            StateName           = NoSword
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SheatheSword") end
            EndScript
        End

        AnimationState = PASSENGER MOVING ACCELERATE
            Animation = RUFro_HH_RUNA
                AnimationName = RUFro_HH_ACCL
                AnimationMode =LOOP
                AnimationBlendTime = 0
            End
            StateName           = Mounted
        End

          AnimationState = PASSENGER MOVING DECELERATE
              Animation = RUFro_HH_RUNA
                  AnimationName = RUFro_HH_DECL
                  AnimationMode =LOOP
                  AnimationBlendTime = 0
              End
              StateName           = Mounted
          End

          AnimationState = PASSENGER MOVING TURN_LEFT
              Animation = RUFro_HH_RUNA
                  AnimationName = RUFro_HH_TNL2
                  AnimationMode =LOOP
                  AnimationBlendTime = 0
              End
              StateName           = Mounted
          End

          AnimationState = PASSENGER MOVING TURN_RIGHT
              Animation = RUFro_HH_RUNA
                  AnimationName = RUFro_HH_TNL1
                  AnimationMode =LOOP
                  AnimationBlendTime = 0
              End
              StateName           = Mounted
          End

          AnimationState = PASSENGER TURN_LEFT_HIGH_SPEED
              Animation = RUFro_HH_RUNA
                  AnimationName = RUFro_HH_TRNL
                  AnimationMode =LOOP
                  AnimationBlendTime = 0
              End
              StateName           = Mounted
          End

          AnimationState = PASSENGER TURN_RIGHT_HIGH_SPEED
              Animation = RUFro_HH_RUNA
                  AnimationName = RUFro_HH_TRNR
                  AnimationMode =LOOP
                  AnimationBlendTime = 0
              End
              StateName           = Mounted
          End


        AnimationState = PASSENGER MOVING
            Animation = RUFro_HH_RUNA
                AnimationName = RUFro_HH_RUNA
                AnimationMode =LOOP
                AnimationBlendTime = 0
            End
            StateName           = Mounted
        End

        AnimationState = PASSENGER SELECTED
            Animation = RUFro_HH_RUNA
                AnimationName = RUFro_HH_IDLA
                AnimationMode =LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Mounted" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
            EndScript
        End


        TransitionState                =    TRANS_MountedSelect
            Animation                =    ATNA
                AnimationName        =    RUFro_HH_ATNA
                AnimationMode        =    ONCE
            End
        End




        AnimationState = PASSENGER
            Animation = IDLE1
                AnimationName = RUFro_HH_IDLA
                AnimationMode =ONCE

            End
            Animation = IDLE2
                AnimationName = RUFro_HH_IDLB
                AnimationMode = ONCE

            End





            Animation = IDLE4
                AnimationName = RUFro_HH_IDLH
                AnimationMode = ONCE

            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
            StateName           = Mounted
        End








        AnimationState                        = STUNNED_FLAILING
            StateName                        = STATE_Bored_Rocks
            Animation                        = FLYA
                AnimationName                = RUFrodo_FLYA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
            Flags                            = RANDOMSTART
        End

        AnimationState                        = DYING DEATH_2
            Animation
                AnimationName                = RUFrodo_IDLA
                AnimationMode                = LOOP
            End
        End


        AnimationState                        = DYING SPLATTED
            StateName                        = STATE_Bored_Rocks
            Animation                        = LNDA
                AnimationName                = RUFrodo_LNDA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = DYING WEAPONSET_TOGGLE_1
            StateName                        = STATE_Bored_Rocks
                Animation                    = DIEA
                AnimationName                = RUFrodo_DIEA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = DYING EMOTION_ALERT
            StateName                        = STATE_Dead.
                Animation                    = DIEB
                AnimationName                = RUFrodo_DIEB
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = DYING
            StateName                        = STATE_Dead.
            Animation                        = GTPA
                AnimationName                = RUFrodo_DIEA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = RUFrodo_IDLB
                AnimationMode                = LOOP
            End
        End


        AnimationState                        = STUNNED_STANDING_UP
            StateName                        = STATE_Ready_Rocks
            Animation                        = GTPA
                AnimationName                = RUFrodo_GTPA
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = STUNNED
            StateName                        = STATE_Bored_Rocks
            Animation                        = LNDA
                AnimationName                = RUFrodo_LNDA
                AnimationMode                = ONCE
            End
        End



        AnimationState                        = RESURRECTED WEAPONSET_TOGGLE_1
            StateName                        = STATE_Bored_Rocks
            Animation                        = KnockedDownAndGetsUpBareHanded
                AnimationName                = RUFrodo_GTPA
                AnimationMode                = ONCE
            End

            EnteringStateFX                    = FX_Resurrect
        End


        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = RUFrodo_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState                        = MOVING WEAPONSET_TOGGLE_1
            StateName                        = STATE_Running_Rocks
            Animation                        = RUND
                AnimationName                = RUFrodo_RUND
                AnimationMode                = LOOP
            End
            Flags                            = RANDOMSTART
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
            EndScript
        End

        AnimationState                        = MOVING EMOTION_ALERT
            StateName                        = STATE_Running_Sword
            Animation                        = RUNA
                AnimationName                = RUFrodo_RUNA
                AnimationMode                = LOOP
            End
            Flags                            = RANDOMSTART
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
            EndScript
        End

        AnimationState                        = MOVING
            StateName                        = STATE_Running_Rocks
            Animation                        = RUND
                AnimationName                = RUFrodo_RUND
                AnimationMode                = LOOP
            End
            Flags                            = RANDOMSTART
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
            EndScript
        End



        AnimationState        = SPECIAL_WEAPON_TWO
            Animation
                AnimationName     = DUGloin_SPCB
                AnimationMode     = ONCE
            End
        End


        AnimationState                    = BETWEEN_FIRING_SHOTS_A WEAPONSET_TOGGLE_1
            StateName                    = STATE_Ready_Rocks
            Animation                    = IDLB
                AnimationName            = RUFrodo_IDLB
                AnimationMode            = LOOP
                AnimationBlendTime        = 20
            End



        End

        AnimationState                    = BETWEEN_FIRING_SHOTS_A
            StateName                    = STATE_Ready_Sword
            Animation                    = IDLA
                AnimationName            = RUFrodo_IDLA
                AnimationMode            = LOOP
                AnimationBlendTime        = 20
            End
            BeginScript
                CurDrawableAllowToContinue()
            EndScript
        End

        AnimationState                        = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            StateName                        = STATE_Ready_Rocks
            Animation                        = RockThrow
                AnimationName                = RUFrodo_THRA
                AnimationMode                = ONCE

            End
            FrameForPristineBonePositions    = 29
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
            EndScript
        End



        AnimationState                        = FIRING_OR_PREATTACK_A
            StateName                        = STATE_Ready_Sword
            Animation                        = ATKC
                AnimationName                = RUFrodo_ATKC
                AnimationMode                = ONCE
                UseWeaponTiming                = Yes
                AnimationBlendTime        = 10
            End
            Animation                        = ATKB
                AnimationName                = RUFrodo_ATKB
                AnimationMode                = ONCE
                UseWeaponTiming                = Yes
                AnimationBlendTime        = 10
            End
            Flags = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
            EndScript
        End

        AnimationState                        = FIRING_OR_PREATTACK_B
            StateName                        = STATE_Ready_Sword
            Animation                        = ATKC
                AnimationName                = RUFrodo_ATKC
                AnimationMode                = ONCE
                UseWeaponTiming                = Yes
                AnimationBlendTime        = 10
            End
            Animation                        = ATKB
                AnimationName                = RUFrodo_ATKB
                AnimationMode                = ONCE
                UseWeaponTiming                = Yes
                AnimationBlendTime        = 10
            End
            Flags = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
            EndScript
        End


        AnimationState                        = FIRING_OR_PREATTACK_B WEAPONSET_TOGGLE_1
            StateName                        = STATE_Ready_Rocks
            Animation                        = RockThrow
                AnimationName                = RUFrodo_THRA
                AnimationMode                = ONCE

            End
            FrameForPristineBonePositions    = 29
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
            EndScript
        End







        AnimationState                        = UNPACKING PACKING_TYPE_1 WEAPONSET_TOGGLE_1
            Animation
                AnimationName                = RUFrodo_PHLD
                AnimationMode                = ONCE
            End
            ParticleSysBone                    = B_HANDL PhialofGaladrielDelay FollowBone:Yes
        End

        AnimationState                        = PREPARING PACKING_TYPE_1 WEAPONSET_TOGGLE_1
            Animation
                AnimationName                = RUFrodo_PHLE
                AnimationMode                = ONCE
            End
            ParticleSysBone                    = B_HANDL PhialofGaladriel FollowBone:Yes
        End
        AnimationState                        = PACKING PACKING_TYPE_1 WEAPONSET_TOGGLE_1
            Animation
                AnimationName                = RUFrodo_PHLD
                AnimationMode                = ONCE_BACKWARDS
            End
            Flags                            = START_FRAME_LAST
            ParticleSysBone                    = B_HANDL PhialofGaladrielEnd FollowBone:Yes
        End

        AnimationState                        = PACKING_TYPE_1 WEAPONSET_TOGGLE_1
            Animation
                AnimationName                = RUFrodo_PHLE
                AnimationMode                = LOOP
            End
            ParticleSysBone                    = B_HANDL PhialofGaladriel FollowBone:Yes
        End

        AnimationState                        = UNPACKING PACKING_TYPE_1 EMOTION_ALERT
            Animation
                AnimationName                = RUFrodo_PHLA
                AnimationMode                = ONCE
            End
            ParticleSysBone                    = B_HANDL PhialofGaladrielDelay FollowBone:Yes
        End

        AnimationState                        = PREPARING PACKING_TYPE_1 EMOTION_ALERT
            Animation
                AnimationName                = RUFrodo_PHLB
                AnimationMode                = ONCE
            End
            ParticleSysBone                    = B_HANDL PhialofGaladriel FollowBone:Yes
        End

        AnimationState                        = PACKING PACKING_TYPE_1 EMOTION_ALERT
            Animation
                AnimationName                = RUFrodo_PHLC
                AnimationMode                = ONCE
            End
            ParticleSysBone                    = B_HANDL PhialofGaladrielEnd FollowBone:Yes
        End
        AnimationState                        = PACKING_TYPE_1 EMOTION_ALERT
            Animation
                AnimationName                = RUFrodo_PHLB
                AnimationMode                = LOOP
            End
            ParticleSysBone                    = B_HANDL PhialofGaladriel FollowBone:Yes
        End

        AnimationState                        = UNPACKING PACKING_TYPE_1
            Animation
                AnimationName                = RUFrodo_PHLD
                AnimationMode                = ONCE
            End
            ParticleSysBone                    = B_HANDL PhialofGaladrielDelay FollowBone:Yes
        End

        AnimationState                        = PREPARING PACKING_TYPE_1
            Animation
                AnimationName                = RUFrodo_PHLE
                AnimationMode                = ONCE
            End
            ParticleSysBone                    = B_HANDL PhialofGaladriel FollowBone:Yes
        End
        AnimationState                        = PACKING PACKING_TYPE_1
            Animation
                AnimationName                = RUFrodo_PHLD
                AnimationMode                = ONCE_BACKWARDS
            End
            Flags                            = START_FRAME_LAST
            ParticleSysBone                    = B_HANDL PhialofGaladrielEnd FollowBone:Yes
        End

        AnimationState                        = PACKING_TYPE_1
            Animation
                AnimationName                = RUFrodo_PHLE
                AnimationMode                = LOOP
            End
            ParticleSysBone                    = B_HANDL PhialofGaladriel FollowBone:Yes
        End





        AnimationState                        = USER_1
            StateName                        = STATE_Bored_Rocks
            Animation                        = CinematicSigh
                AnimationName                = RUFrodo_SIEA
                AnimationMode                = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_AttentionToBored_Rocks") end
            EndScript
        End



        AnimationState                        = EMOTION_CELEBRATING
            Animation
                AnimationName                = RUFrodo_CHRA
                AnimationMode                = ONCE
            End
            Animation
                AnimationName                = RUFrodo_CHRB
                AnimationMode                = ONCE
            End
            Animation
                AnimationName                = RUFrodo_CHRC
                AnimationMode                = ONCE
            End
            Flags                            = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                        = EMOTION_TAUNTING
            Animation
                AnimationName                = RUFrodo_TNTA
                AnimationMode                = LOOP
            End
        End

        AnimationState                        = EMOTION_ALERT WEAPONSET_TOGGLE_1
            StateName                        = STATE_Ready_Rocks
            Animation                        = readyToHuckSomeRocks
                AnimationName                = RUFrodo_IDLB
                AnimationMode                = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
            EndScript
        End

        AnimationState                        = EMOTION_ALERT
            StateName                        = STATE_Ready_Sword
            Animation                        = readyToHackSomeFoos
                AnimationName                = RUFrodo_IDLA
                AnimationMode                = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
            EndScript
        End

        AnimationState                        = RAISING_FLAG
            Animation
                AnimationName                = RUFrodo_CHRA
                AnimationMode                = ONCE
            End
            Animation
                AnimationName                = RUFrodo_CHRB
                AnimationMode                = ONCE
            End
            Animation
                AnimationName                = RUFrodo_CHRC
                AnimationMode                = ONCE
            End
            Flags                            = RESTART_ANIM_WHEN_COMPLETE
        End



        AnimationState                        = SELECTED
            StateName                        = STATE_Attention_Rocks
            Animation                        = attention
                AnimationName                = RUFrodo_ATNB
                AnimationMode                = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Attention_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Attention_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Attention_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Attention_SwordToRocks") end
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
            EndScript
        End




        IdleAnimationState
            StateName                        = STATE_Bored_Rocks
            Animation                        = IDLB
                AnimationName                = RUFrodo_IDLB
                AnimationMode                = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_AttentionToBored_Rocks") end
            EndScript
        End



        TransitionState                        = TRANS_DrawSword
            Animation                        = STHA
                AnimationName                = RUFrodo_STHA
                AnimationMode                = ONCE
            End
        End

        TransitionState                        = TRANS_Running_RocksToSword
            Animation                        = STHD
                AnimationName                = RUFrodo_STHD
                AnimationMode                = ONCE
            End
        End
        TransitionState                        = TRANS_Ready_RocksToSword
            Animation                        = STHA
                AnimationName                = RUFrodo_STHA
                AnimationMode                = ONCE
            End
        End
        TransitionState                        = TRANS_Bored_RocksToSword
            Animation                        = STHA
                AnimationName                = RUFrodo_STHA
                AnimationMode                = ONCE
            End
        End
        TransitionState                        = TRANS_Attention_RocksToSword
            Animation                        = STHA
                AnimationName                = RUFrodo_STHA
                AnimationMode                = ONCE
            End
        End

        TransitionState                        = TRANS_SheatheSword
            Animation                        = STHA
                AnimationName                = RUFrodo_STHA
                AnimationMode                = ONCE_BACKWARDS
            End
            Flags                            = START_FRAME_LAST
        End

        TransitionState                        = TRANS_Running_SwordToRocks
            Animation                        = STHC
                AnimationName                = RUFrodo_STHC
                AnimationMode                = ONCE
            End
        End
        TransitionState                        = TRANS_Ready_SwordToRocks
            Animation                        = STHB
                AnimationName                = RUFrodo_STHB
                AnimationMode                = ONCE
            End
        End
        TransitionState                        = TRANS_Bored_SwordToRocks
            Animation                        = STHB
                AnimationName                = RUFrodo_STHB
                AnimationMode                = ONCE
            End
        End
        TransitionState                        = TRANS_Attention_SwordToRocks
            Animation                        = STHB
                AnimationName                = RUFrodo_STHB
                AnimationMode                = ONCE
            End
        End
        TransitionState                        = TRANS_BoredToAttention_Rocks
            Animation                        = ATNA
                AnimationName                = RUFrodo_ATNA
                AnimationMode                = ONCE
            End
        End
        TransitionState                        = TRANS_AttentionToBored_Rocks
            Animation                        = ATNC
                AnimationName                = RUFrodo_ATNC
                AnimationMode                = ONCE
            End
        End

        TransitionState                        = TRANS_DrawSword_Running
            Animation                        = STHA
                AnimationName                = RUFrodo_RUNC
                AnimationMode                = ONCE
            End
        End

        TransitionState                        = TRANS_SheatheSword_Running
            Animation                        = STHA
                AnimationName                = RUFrodo_RUND
                AnimationMode                = ONCE
            End
        End

    End

    Draw = W3DScriptedModelDraw FX
        ModelConditionState = NONE
            Model           = exdwrunefx
        End
    End

    Draw = W3DScriptedModelDraw ModuleTag_LightController
        DefaultModelConditionState
            Model = None
        End

        ModelConditionState = SPECIAL_ENEMY_NEAR
            Model = RUFrodoStng_SKN
            Shadow                        = SHADOW_ADDITIVE_DECAL_DYNAMIC
            ShadowSizeX                    = 100
            ShadowSizeY                    = 100
            ShadowTexture                = EXFrodoStingGlow
            ShadowOpacityStart            = 0
            ShadowOpacityFadeInTime        = 1000
            ShadowOpacityPeak            = 255
            ShadowOpacityFadeOutTime    = 1000
            ShadowOpacityEnd            = 0
            ShadowOverrideLODVisibility = Yes
        End

        ModelConditionState = PREPARING PACKING_TYPE_1
            Model = Invisible
                    Shadow = SHADOW_ADDITIVE_DECAL_DYNAMIC
                    ShadowSizeX = 150
                    ShadowSizeY = 150
                    ShadowTexture = EXLightAura02
                   ShadowOpacityStart            = 0
            ShadowOpacityFadeInTime        = 1000
            ShadowOpacityPeak            = 255
            ShadowOpacityFadeOutTime    = 1000
            ShadowOpacityEnd            = 0
        End

        IdleAnimationState



        End
        AnimationState = SPECIAL_ENEMY_NEAR



        End

        AttachToBoneInAnotherModule = SWORDBONE01
    End



    Side = Dwarves
    EditorSorting = UNIT
    ThreatLevel = FRODO_THREAT_LEVEL
    ThingClass = CHARACTER_UNIT
    DisplayMeleeDamage = 150
    DisplayRangedDamage = 100

    HeroSortOrder = 60

    TransportSlotCount = TRANSPORTSLOTCOUNT_HERO


    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY    BilboStingWeapon
        Weapon            = SECONDARY  BilboRingChargeWeapon
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
        AutoChooseSources = SECONDARY NONE
    End

    WeaponSet
        Conditions = CONTAINED WEAPONSET_TOGGLE_1
        Weapon = PRIMARY    BilboRockThrow
    End

    WeaponSet
        Conditions = CONTAINED
        Weapon = PRIMARY    BilboRockThrow
    End

    WeaponSet
        Conditions = WEAPONSET_TOGGLE_1
        Weapon = PRIMARY    BilboRockThrow
    End

    ArmorSet
        Conditions      = None
        Armor           = VeryWeakHeroArmor
        DamageFX        = NormalDamageFX
    End

    ArmorSet
        Conditions      = PLAYER_UPGRADE
        Armor           = MediumHeroArmor
        DamageFX        = NormalDamageFX
    End


    VisionRange = 200
    ShroudClearingRange = SHROUD_CLEAR_HOBBIT

    BuildCost = 300
    BuildTime = VERY_WEAK_HERO_BUILDTIME

    BountyValue = ROHAN_FRODO_BOUNTY_VALUE
    DisplayName = OBJECT:Bilbo
    RecruitText = CONTROLBAR:BilboRecruit
    ReviveText    = CONTROLBAR:BilboRevive
    Hotkey        = CONTROLBAR:BilboHotkey
    CrushableLevel = 2

    CommandSet = BilboCommandSet1
    CommandPoints = 0

    Behavior = CommandSetUpgrade ModuleTag_BilboMistyMountains
        TriggeredBy        =  Upgrade_Level_6
        CommandSet        = BilboCommandSet2
    End

    Behavior = MonitorConditionUpdate ModuleTag_CommandSetSwapper1
        WeaponSetFlags            = WEAPONSET_TOGGLE_1
        WeaponToggleCommandSet    = BilboCommandSet3
    End

    Behavior = MonitorConditionUpdate ModuleTag_CommandSetSwapper2
        WeaponSetFlags            = WEAPONSET_TOGGLE_2
        WeaponToggleCommandSet    = BilboCommandSet2
    End


    VoiceAttack                = BilboVoiceAttack
    VoiceAttackCharge              = BilboVoiceAttack
    VoiceAttackMachine        = BilboVoiceAttack
    VoiceAttackStructure          = BilboVoiceAttack
    VoiceCreated            = BilboVoiceCreated
    VoiceFullyCreated              = BilboVoiceCreated
    VoiceFear                 = BilboVoiceHelp
    VoiceGuard                = BilboVoiceMove
    VoiceMove                = BilboVoiceMove
    VoiceMoveWhileAttacking          = BilboVoiceMove
    VoicePriority            = 70
    VoiceRetreatToCastle          = BilboVoiceMovetoCamp
    VoiceSelect                = BilboVoiceSelect
    VoiceSelectBattle         = BilboVoiceSelect

    SoundImpact                = ImpactHorse



    UnitSpecificSounds
        VoiceGarrison                      = BilboVoiceMove
        VoiceEnterUnitElvenTransportShip    = BilboVoiceMove
        VoiceInitiateCaptureBuilding        = BilboVoiceMove
    End

    CrowdResponseKey = Hobbit



    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Hobbit Unit Infantry
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:FootstepDirtA                             Animation:RUBilbo_SKL.RUFrodo_RUNA     Frames:2 12 21 30
        AnimationSound = Sound:FootstepDirtA                             Animation:RUBilbo_SKL.RUFrodo_RUNB     Frames:2 10 20 28 38 46
        AnimationSound = Sound:FootstepDirtA                             Animation:RUBilbo_SKL.RUFrodo_RUNC     Frames:6 14 22 30
        AnimationSound = Sound:FootstepDirtA                             Animation:RUBilbo_SKL.RUFrodo_RUND     Frames:2 12 21 30
        AnimationSound = Sound:FootstepDirtA                             Animation:RUBilbo_SKL.RUFrodo_CINC     Frames:5 17
        AnimationSound = Sound:FootstepDirtA                             Animation:RUBilbo_SKL.RUFrodo_MFDA     Frames:4 13
        AnimationSound = Sound:FootstepDirtA                             Animation:RUBilbo_SKL.RUFrodo_STHC     Frames:2 12 21 31
        AnimationSound = Sound:FootstepDirtA                             Animation:RUBilbo_SKL.RUFrodo_STHD     Frames:2 12 21 31

        AnimationSound = Sound:BodyFallGenericNoArmor                         Animation:RUBilbo_SKL.RUFrodo_DIEA     Frames:34
        AnimationSound = Sound:BodyFallGenericNoArmor                         Animation:RUBilbo_SKL.RUFrodo_DIEB     Frames:37
        AnimationSound = Sound:BodyFallGenericNoArmor                         Animation:RUBilbo_SKL.RUFrodo_LNDA     Frames:2

        AnimationSound = Sound:SwordShingClean2                             Animation:RUBilbo_SKL.RUFrodo_STHA    Frames:6
        AnimationSound = Sound:SwordIntoScabbard2                            Animation:RUBilbo_SKL.RUFrodo_STHB    Frames:10
        AnimationSound = Sound:SwordIntoScabbard2                            Animation:RUBilbo_SKL.RUFrodo_STHC    Frames:5
        AnimationSound = Sound:SwordShingClean2                            Animation:RUBilbo_SKL.RUFrodo_STHD    Frames:2

        AnimationSound = Sound:PhialOn             RequiredMC:UNPACKING        Animation:RUBilbo_SKL.RUFrodo_PHLA     Frames:40
        AnimationSound = Sound:PhialOn             RequiredMC:UNPACKING        Animation:RUBilbo_SKL.RUFrodo_PHLD     Frames:30
    End




    RadarPriority = UNIT
    KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT HOBBIT ATTACK_NEEDS_LINE_OF_SIGHT HEAVY_MELEE_HITTER

    Body = RespawnBody ModuleTag_RespawnBody
        MaxHealth         = 3000
        PermanentlyKilledByFilter    = NONE
		DodgePercent        = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                    = DYING
        DeathAnimationTime            = 3000
        RespawnAnim                    = LEVELED
        RespawnAnimationTime        = 2000
        AutoRespawnAtObjectFilter    = NONE +CASTLE_KEEP
        ButtonImage                    = HIBilboYoung

        RespawnRules =    AutoSpawn:No           Cost:300        Time:VERY_WEAK_HERO_RESPAWNTIME        Health:100%
    End



    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance        =    300
         TauntAndPointUpdateDelay    =    1000
         HeroScanDistance            = 150

        AddEmotion            =    Terror_Base
        AddEmotion            =    Doom_Base

        AddEmotion            =    UncontrollableFear_Base


        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
         AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base
        AddEmotion            =    HeroCheerIdle_Base
        AddEmotion            =    HeroCheerBusy_Base
        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
     End

    Behavior = AutoHealBehavior ModuleTag_FrodoHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 1000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = LockWeaponCreate ModuleTag_ToggleToSwordToStart
        SlotToLock = PRIMARY
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle   = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate          = 500
        AILuaEventsList              = BilboFunctions
        HoldGroundCloseRangeDistance = 40
    End

    Behavior = AutoHealBehavior ModuleTag_ElvenGiftHealing
        StartsActive                = No
        TriggeredBy                    = Upgrade_ElvenGift
        HealingAmount                = ELVEN_GIFT_REGEN_AMOUNT
        HealingDelay                = ELVEN_GIFT_REGEN_DELAY
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = AttributeModifierUpgrade ModuleTag_ElvenGiftBonus
        TriggeredBy = Upgrade_ElvenGift
        AttributeModifier = SpellBookElvenGifts
    End

    #include "..\..\..\includes\CaptureBuilding.inc"

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_GOOD_HOBBIT_SPEED
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 4600
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -KNOCKBACK -FADED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000

    End

    Behavior = SlowDeathBehavior ModuleTag_RingGeklaut
        DeathTypes = NONE +EXTRA_2
        DeathFlags       = DEATH_2
        FadeDelay        = 3000
        FadeTime         = 3000
        DestructionDelay = 5000
        FX               = INITIAL FX_EmotionCheer
        Sound            = FINAL SpellGenericUnsummonMS
        OCL              = FINAL OCL_BilboRingdieb
    End



    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = HeroDie ModuleTag_HeroDeath
        SpecialPowerTemplate = SpecialAbilitySmite
    End

    Behavior = SlowDeathBehavior ModuleTag_07
        DeathTypes = NONE +KNOCKBACK
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
    End

    Behavior = BezierProjectileBehavior ModuleTag_08

        FirstHeight = 24
        SecondHeight = 24
        FirstPercentIndent = 30%
        SecondPercentIndent = 70%
        TumbleRandomly = Yes

        CrushStyle = Yes
        DieOnImpact = Yes
        BounceCount = 1
        BounceDistance = 40
        BounceFirstHeight = 24
        BounceSecondHeight = 24
        BounceFirstPercentIndent = 20%
        BounceSecondPercentIndent = 80%

        GroundHitFX       = FX_ThrownRockGroundHit
        GroundBounceFX    = FX_ThrownRockBounceHit
    End




        Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AdventureEnabler
        SpecialPowerTemplate      = SpecialAbilityAdventure
        TriggeredBy               = Upgrade_Level_2
    End

    Behavior = SpecialPowerModule ModuleTag_AdventurePowerPower
        SpecialPowerTemplate      = SpecialAbilityAdventure
        UpdateModuleStartsAttack  = No
        StartsPaused              = Yes
    End

    Behavior = WeaponModeSpecialPowerUpdate ModuleTag_AdventurePowerUpdate
        SpecialPowerTemplate      = SpecialAbilityAdventure
        Duration                  = 30000
        AttributeModifier         = BilboAdventureBonus
        LockWeaponSlot            = SECONDARY
        StartsPaused              = Yes
    End




    Behavior = SpecialPowerModule ModuleTag_TreacheryPowerPower
        SpecialPowerTemplate      = SpecialAbilityTreacheryOfTheRingNew
        UpdateModuleStartsAttack  = No
        StartsPaused              = No
    End

    Behavior = WeaponModeSpecialPowerUpdate ModuleTag_TreacheryPowerUpdate
        SpecialPowerTemplate      = SpecialAbilityTreacheryOfTheRingNew
        Duration                  = 30000
        AttributeModifier         = TreacheryOfTheRingBonus
        LockWeaponSlot            = SECONDARY
        StartsPaused              = Yes
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_IgniteEnabler
        SpecialPowerTemplate              = SpecialAbilityTindomielBeauty
        TriggeredBy                       = Upgrade_Level_3
    End

    Behavior = SpecialPowerModule ModuleTag_IgniteStarter
        SpecialPowerTemplate              = SpecialAbilityTindomielBeauty
        UpdateModuleStartsAttack          = No
        StartsPaused                      = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate
        SpecialPowerTemplate              = SpecialAbilityTindomielBeauty
        UnpackingVariation                = 3
        UnpackTime                        = 1800
        PackTime                          = 1600
        HeroAttributeModifier             = MasterburglerBonus
        HeroEffectDuration                = 35000
    End

     Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CreateAHeroStealMoneyEnabler
        SpecialPowerTemplate     = SpecialAbilityBilboRiddles
        TriggeredBy              = Upgrade_Level_5
    End

    Behavior = SpecialPowerModule ModuleTag_CreateAHeroStealMoneyStarter
        SpecialPowerTemplate     = SpecialAbilityBilboRiddles
        UpdateModuleStartsAttack = Yes
        StartsPaused             = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_CreateAHeroStealMoneyUpdate
        SpecialPowerTemplate    = SpecialAbilityBilboRiddles
        UnpackTime              = 2000
        PackTime                = 2000
        AwardXPForTriggering    = 0
        StartAbilityRange       = CREATE_A_HERO_STEAL_MONEY_DO_POWER_RANGE
        ApproachRequiresLOS     = Yes
        SpecialWeapon           = BilboRiddles
        WhichSpecialWeapon      = 1
    End

    Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag
        FireWeaponNugget
            WeaponName              = MasterBurglerRadiusWeapon
            FireDelay               = 0
            OneShot                 = No
        End
        HeroModeTrigger             = Yes
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy = Upgrade_Level_7
    End

    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = No
        StartsPaused = Yes
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_BilboLeadership
        StartsActive     = No
        BonusName        = BilboLeadershipHeroes
        TriggeredBy      = Upgrade_Level_7
        RefreshDelay     = 2500
        Range            = 200

        ObjectFilter     = NONE +HERO ALLIES
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BilboGuardianEnabler
        SpecialPowerTemplate     = SpecialAbilityBilboGuardian
        TriggeredBy              = Upgrade_Level_7
    End

    Behavior = SpecialPowerModule ModuleTag_BilboGuardianStarter
        SpecialPowerTemplate     = SpecialAbilityBilboGuardian
        UpdateModuleStartsAttack = Yes
        StartsPaused             = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_BilboGuardianUpdate
        SpecialPowerTemplate    = SpecialAbilityBilboGuardian
        UnpackTime              = 2000
        PackTime                = 2000
        AwardXPForTriggering    = 0
        StartAbilityRange       = CREATE_A_HERO_STEAL_MONEY_DO_POWER_RANGE
        ApproachRequiresLOS     = Yes
        SpecialWeapon           = BilboGuardianWeapon
        WhichSpecialWeapon      = 1
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BilboArkenstoneEnabler
        SpecialPowerTemplate     = SpecialAbilityBilboArkenstone
        TriggeredBy              = Upgrade_Level_10
    End

    Behavior = SpecialPowerModule ModuleTag_MachtStarter
        SpecialPowerTemplate     = SpecialAbilityBilboArkenstone
        UpdateModuleStartsAttack = Yes
        StartsPaused             = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_MachtUpdate
        SpecialPowerTemplate     = SpecialAbilityBilboArkenstone
        SkipContinue             = Yes
        UnpackTime               = 1100
        PreparationTime          = 1
        PersistentPrepTime       = 500
        PackTime                 = 500
        MustFinishAbility        = Yes
        AwardXPForTriggering     = 0
        StartAbilityRange        = 150
        SpecialWeapon            = BilboArkenstonePingWeapon
        WhichSpecialWeapon       = 3
    End




    Behavior = SpecialEnemySenseUpdate ModuleTag_StingSeesOrcs
        SpecialEnemyFilter = ANY +ORC +URUK +MordorShelob
        ScanRange = 200
        ScanInterval = 2000
    End







    Behavior = InvisibilityUpdate ModuleTag_StealthForEscape
        InvisibilityNugget
            InvisibilityType        = STEALTH
            ForbiddenConditions        = MOVING FIRING_ANY TAKING_DAMAGE USING_ABILITY
            BecomeStealthedFX       = FX_ElvenCloakOn
            ExitStealthFX           = FX_ElvenCloakOff
            Options                    = UNTOGGLE_HIDDEN_WHEN_LEAVING_STEALTH
        End
        StartsActive                = No
        UpdatePeriod                = 2000
    End

    Behavior = SpecialPowerModule ModuleTag_ElfCloakStarter
        SpecialPowerTemplate      = SpecialAbilityElfCloak
        UpdateModuleStartsAttack  = Yes

    End
    Behavior = ToggleHiddenSpecialAbilityUpdate ModuleTag_ElfCloakUpdate
        SpecialPowerTemplate    = SpecialAbilityElfCloak
        AwardXPForTriggering    = 0
    End








    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TreasureEnabler
        SpecialPowerTemplate      = SpecialAbilityRadagastKrahenruf
        TriggeredBy               = Upgrade_Level_9
    End

    Behavior = OCLSpecialPower ModuleTag_OCLSpecialPower
        SpecialPowerTemplate      = SpecialAbilityRadagastKrahenruf
        OCL                       = OCL_SpawnBilboTreasure_Large
        TriggerFX                 = FX_BilboSchatz
        CreateLocation            = CREATE_AT_LOCATION
        StartsPaused              = Yes
    End







    Behavior = InvisibilityUpdate ModuleTag_StealthForEscape2
        InvisibilityNugget
            InvisibilityType        = STEALTH
            ForbiddenConditions     = TAKING_DAMAGE FIRING_ANY USING_ABILITY
            BecomeStealthedFX       = FX_ElvenCloakOn
            ExitStealthFX           = FX_ElvenCloakOff
            Options                 = UNTOGGLE_HIDDEN_WHEN_LEAVING_STEALTH
        End
        StartsActive                = No
        UpdatePeriod                = 2000
    End
    Behavior = SpecialPowerModule ModuleTag_ElfCloakStarter2
        SpecialPowerTemplate      = SpecialAbilityNewIsildurOneRingPower
        UpdateModuleStartsAttack  = Yes

    End
    Behavior = ToggleHiddenSpecialAbilityUpdate ModuleTag_ElfCloakUpdate2
        SpecialPowerTemplate      = SpecialAbilityNewIsildurOneRingPower
        AwardXPForTriggering      = 0
    End



    Behavior = StealthDetectorUpdate StealthDetectorUpdateModuleTag
        DetectionRange      = 300
        DetectionRate       = 500
        CancelOneRingEffect = Yes
    End




    Behavior = ArmorUpgrade ModuleTag_ArmorUpgradeMithril
        TriggeredBy     = Upgrade_DwarvenMithrilMailHeroes
        ArmorSetFlag    = PLAYER_UPGRADE
    End

    Behavior = SubObjectsUpgrade ModuleTag_MithrilSkinwelchsel
        TriggeredBy     = Upgrade_DwarvenMithrilMailHeroes
        UpgradeTexture  = gubilboy.tga 0 gubilboy_ha.tga
        UpgradeTexture  = rufrodo.tga 0 gubilboy_ha.tga
        UpgradeTexture  = gufrodo.tga 0 gubilboy_ha.tga
    End

    Behavior = ProductionUpdate ProductionUpdateModuleTag
        GiveNoXP = Yes
    End

    Behavior = WeaponSetUpgrade WeaponSetUpgradeModuleTagMacht
        TriggeredBy       = Upgrade_OriMacht
        WeaponCondition   = PLAYER_UPGRADE
    End

    Behavior = WeaponSetUpgrade WeaponSetUpgradeModuleTagZorn
        TriggeredBy       = Upgrade_OriZorn
        WeaponCondition   = SPECIAL_ONE
    End

    Behavior = WeaponSetUpgrade WeaponSetUpgradeModuleTagEhre
        TriggeredBy       = Upgrade_OriSchicksal
        WeaponCondition   = SPECIAL_TWO
    End


    Behavior = SubObjectsUpgrade ModuleTag_BLAU
        TriggeredBy       = Upgrade_OriMacht
        ShowSubObjects    = BLAU
    End

    Behavior = SubObjectsUpgrade ModuleTag_WEIS
        TriggeredBy       = Upgrade_OriAusdauer
        ShowSubObjects    = WEIS
    End

    Behavior = SubObjectsUpgrade ModuleTag_ROT
        TriggeredBy       = Upgrade_OriZorn
        ShowSubObjects    = ROT
    End

    Behavior = SubObjectsUpgrade ModuleTag_GOLD
        TriggeredBy       = Upgrade_OriSchicksal
        ShowSubObjects    = GOLD
    End



    Behavior = ObjectCreationUpgrade MaketheEagle
        TriggeredBy                  = Upgrade_RaiseShield
        Delay                        = 0.0
        ThingToSpawn                 = DwarvenDori_Summoned
        Offset                       = X:0.0 Y:20.0 Z:0.0
        FadeInTime                   = 0
    End

    Behavior = ObjectCreationUpgrade MaketheEagle2
        TriggeredBy                  = Upgrade_RaiseShield
        Delay                        = 0.0
        ThingToSpawn                 = DwarvenNori_Summoned
        Offset                       = X:0.0 Y:-20.0 Z:0.0
        FadeInTime                   = 0
    End

    Behavior = SlaveWatcherBehavior WatchTheEagle
        RemoveUpgrade                = Upgrade_RaiseShield
        LetSlaveLive                 = Yes
    End







    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate ToggleLurtzWeaponAI
        CommandButtonName = Command_ToggleFrodoWeapon
        SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_MELEE_AND_RANGE
        SpecialPowerRange = 50
    End

    Behavior = AISpecialPowerUpdate CarnageAI
        CommandButtonName = Command_SpecialAbilityTreacheryOfTheRing
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate ElfCloakAI
        CommandButtonName = Command_SpecialAbilityBilboVerstecken
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate RoyalGuardAI
        CommandButtonName = Command_BilboMeisterdieb
        SpecialPowerAIType = AI_SPECIAL_POWER_TARGETAOE_SUMMON
        SpecialPowerRadius = 30.0
    End


    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes

    Shadow = SHADOW_DECAL
    ShadowSizeX = 18
    ShadowSizeY = 18
    ShadowTexture = ShadowI
End


