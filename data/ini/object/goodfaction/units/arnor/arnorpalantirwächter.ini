Object ArnorPalantirwachter


    ButtonImage            = HSPalaWache
    SelectPortrait         = UPPalaWache

    Draw = W3DHordeModelDraw ModuleTag_01

    OkToChangeModelColor = Yes
    StaticModelLODMode = Yes




        DefaultModelConditionState
            Model                        = gupalawchtrb
            Skeleton                     = GUTwrGrd_SKL
        End


        ModelConditionState              = WEAPONSET_TOGGLE_1
            Model                        = gupalawchtr
            Skeleton                     = GUFaramir_SKL
        End





        AnimationState                    = PASSENGER WEAPONSET_TOGGLE_1
            StateName                    = STATE_Grabbed
            Animation                    = Sword
                AnimationName            = GUFaramir_FLYB
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = PASSENGER
            StateName                    = STATE_Grabbed
            Animation                    = Bow
                AnimationName                    = GUTwrGrd_FLLA
                AnimationMode                    = LOOP
            End
        End

        AnimationState                    = FREEFALL WEAPONSET_TOGGLE_1
            StateName                    = STATE_Falling
            Animation                    = Sword
                AnimationName            = GUFaramir_FLYB
                AnimationMode            = LOOP
                AnimationBlendTime        = 10
                AnimationSpeedFactorRange    = 0.24    0.24
            End
        End

        AnimationState                    = FREEFALL
            StateName                    = STATE_Falling
            Animation                    = Bow
                AnimationName                    = GUTwrGrd_FLYA
                AnimationMode                    = LOOP
                AnimationBlendTime                = 10
            End
        End

        AnimationState                    = STUNNED_FLAILING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Fly
            Animation                   = Sword
                AnimationName           = GUFaramir_FLYB
                AnimationMode           = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES2

        End

        AnimationState                    = STUNNED_FLAILING
            StateName                    = STATE_Fly
            Animation
                AnimationName                    = GUTwrGrd_FLYA
                AnimationMode                    = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES2
        End

        AnimationState                    = DYING SPLATTED WEAPONSET_TOGGLE_1
            StateName                    = STATE_Dead
            Animation                    = Sword
                AnimationName            = GUFaramir_LNDB
                AnimationMode            = ONCE
            End
        End

        AnimationState                    = DYING SPLATTED
            StateName                    = STATE_Dead
            Animation                    = Bow
                AnimationName            = GUTwrGrd_LNDA
                AnimationMode            = ONCE
            End
        End



        AnimationState                    = DYING WEAPONSET_TOGGLE_1
            Animation                   = Sword1
                AnimationName           = GUFaramir_DIEA
                AnimationMode           = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                   = Sword2
                AnimationName           = GUFaramir_DIEB
                AnimationMode           = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                   = WantSword
                AnimationName           = GUFaramir_LNDA
                AnimationMode           = ONCE
            End


        End




        AnimationState                    = DYING
            Animation           = DIEA
                AnimationName     = GUTwrGrd_DIEA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation           = DIEA
                AnimationName     = GUTwrGrd_DIEB
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation           = DIEA
                AnimationName     = GUTwrGrd_DIEC
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End

        End


        AnimationState                    = STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
            StateName                    = STATE_GetUp
            Animation                   = Sword
                AnimationName           = GUFaramir_GTPB
                AnimationMode           = ONCE
            End
            Animation                   = WantSword
                AnimationName           = GUFaramir_GTPA
                AnimationMode           = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4

        End



        AnimationState                    = STUNNED_STANDING_UP
            StateName                    = STATE_GetUp
            Animation                   = Bow
                AnimationName     = GUTwrGrd_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
            Animation                   = WantBow
                AnimationName     = GUTwrGrd_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4

        End

        AnimationState                    = STUNNED WEAPONSET_TOGGLE_1
            StateName                    = STATE_Land
            Animation                   = Sword
                AnimationName           = GUFaramir_LNDB
                AnimationMode           = ONCE
            End
            Animation                   = WantSword
                AnimationName           = GUFaramir_LNDA
                AnimationMode           = ONCE
            End

        End

        AnimationState                    = STUNNED
            StateName                    = STATE_Land
            Animation                   = Bow
                AnimationName     = GUTwrGrd_LNDA
                AnimationMode     = ONCE
            End
            Animation                   = WantBow
                AnimationName     = GUTwrGrd_LNDA
                AnimationMode     = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES3

        End





        AnimationState                    = MOVING EMOTION_TERROR WEAPONSET_TOGGLE_1
            StateName                    = Moving_Sword
            Animation                    = Terror
                AnimationName            = GUFaramir_RUNB
                AnimationMode            = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
                Distance                = 40
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE MAINTAIN_FRAME_ACROSS_STATES
        End

        AnimationState                    = MOVING EMOTION_TERROR
            StateName                    = Moving_Bow
            Animation                    = RunAway_3
                AnimationName            = GUTwrGrd_RUNE
                AnimationMode            = LOOP
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE MAINTAIN_FRAME_ACROSS_STATES
        End




        AnimationState                    = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            StateName                    = Ready_Sword

            Animation                   = AttackWithSwordA
                AnimationName           = GUFaramir_ATKE
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            Animation                   = AttackWithSwordB
                AnimationName           = GUFaramir_ATKD
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            Animation                   = AttackWithSwordD
                AnimationName           = GUFaramir_ATKF
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End

        End

        AnimationState                    = FIRING_OR_PREATTACK_A
            StateName                    = Ready_Bow
            Animation                   = AttackWithBowA
                AnimationName           = GUTwrGrd_ATKA
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            Animation                   = AttackWithBowB
                AnimationName           = GUTwrGrd_ATKB
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            Animation                   = AttackWithBowC
                AnimationName           = GUTwrGrd_ATKC
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
        End





        AnimationState                    = MOVING BACKING_UP WEAPONSET_TOGGLE_1
            StateName                    = STATE_BackingUp
            Animation                    = Sword
                AnimationName            = RURoyalGrd_IDLA
                AnimationMode            = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4

        End
        AnimationState                    = MOVING BACKING_UP
            StateName                    = STATE_BackingUp
            Animation                    = Bow
                AnimationName        =    GUTwrGrd_BAKA
                AnimationMode        =    LOOP
            End
            Animation                    = WantBow
                AnimationName        =    GUTwrGrd_BAKB
                AnimationMode        =    LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4

        End



        AnimationState                    = MOVING WEAPONSET_TOGGLE_1
            StateName                    = Moving_Sword
            SimilarRestart                = Yes
            Animation                   = run_s
                AnimationName           = GUFaramir_RUNB
                AnimationMode           = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
                Distance                = 40
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE

        End

        AnimationState                    = MOVING
            StateName                    = Moving_Bow
            SimilarRestart                = Yes
            Animation
                AnimationName     = GUTwrGrd_RUNA
                AnimationMode     = LOOP
            End
            Animation
                AnimationName     = GUTwrGrd_RUNB
                AnimationMode     = LOOP
            End
            Flags = RANDOMSTART
        End






        AnimationState                    = EMOTION_ALERT WEAPONSET_TOGGLE_1
            StateName                    = Ready_Sword

            Animation                    = Alert_1
                AnimationName            = GUFaramir_IDLA
                AnimationMode            = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
            End

        End

        AnimationState                    = EMOTION_ALERT
            StateName                    = Ready_Bow

            Animation                    = IDLB
                AnimationName            = GUTwrGrd_IDLA
                AnimationMode            = LOOP
            End

        End


        AnimationState                    = ENGAGED WEAPONSET_TOGGLE_1
            StateName                    = Ready_Sword

            Animation                    = Alert_1
                AnimationName            = GUFaramir_IDLA
                AnimationMode            = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
            End

        End

        AnimationState                    = ENGAGED
            StateName                    = Ready_Bow

            Animation                    = IDLB
                AnimationName            = GUTwrGrd_IDLA
                AnimationMode            = LOOP
            End

        End

        AnimationState                    = ATTACKING WEAPONSET_TOGGLE_1
            StateName                    = Ready_Sword

            Animation                    = Alert_1
                AnimationName            = GUFaramir_IDLA
                AnimationMode            = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
            End

        End

        AnimationState                    = ATTACKING
            StateName                    = Ready_Bow

            Animation                    = IDLB
                AnimationName            = GUTwrGrd_IDLA
                AnimationMode            = LOOP
            End

        End






        AnimationState                    = EMOTION_AFRAID WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = GUFaramir_IDLA
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = GUFaramir_IDLA
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
        End
        AnimationState                    = EMOTION_AFRAID
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = GUTwrGrd_FERA
                AnimationMode            = LOOP
            End
            Animation                    = Bow2
                AnimationName            = GUTwrGrd_FERA
                AnimationMode            = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
        End



        AnimationState                    = EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = GUFaramir_CHRC
                AnimationSpeedFactorRange = 0.8 1.2
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = GUFaramir_CHRC
                AnimationSpeedFactorRange = 0.8 1.2
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
        End
        AnimationState                    = EMOTION_CELEBRATING
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = GUTwrGrd_CHRA
                AnimationMode            = LOOP
            End
            Animation                    = Bow2
                AnimationName            = GUTwrGrd_CHRB
                AnimationMode            = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
        End



        AnimationState                    = EMOTION_TAUNTING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = GUFaramir_TNTC
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = GUFaramir_TNTD
                AnimationMode            = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE

        End
        AnimationState                    = EMOTION_TAUNTING
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow1
                AnimationName            = GUTwrGrd_TNTA
                AnimationMode            = LOOP
            End
            Animation                    = Bow2
                AnimationName            = GUTwrGrd_TNTB
                AnimationMode            = LOOP
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End



        AnimationState                    = EMOTION_POINTING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = GUFaramir_TNTC
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = GUFaramir_TNTD
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = EMOTION_POINTING
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = GUTwrGrd_PNTA
                AnimationMode            = LOOP
            End
            Animation                    = Bow2
                AnimationName            = GUTwrGrd_PNTB
                AnimationMode            = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
        End



        AnimationState                =    SELECTED WEAPONSET_TOGGLE_1
            StateName                =    Selected_Sword

            Animation                =    ATNA
                AnimationName        =    GUFaramir_ATNE
                AnimationMode        =    LOOP
            End
        End

        AnimationState                =    SELECTED
            StateName               =    Selected_Bow

            Animation                =    ATNE
                AnimationName            = GUTwrGrd_ATNB
                AnimationMode            = LOOP
            End

        End




        AnimationState                        = HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
            StateName                        = Bored_Sword
            Animation                        = Hit_Level_1_a
                AnimationName                = GUFaramir_HITB
                AnimationMode                = ONCE
            End
            Animation                        = Hit_Level_1_b
                AnimationName                = GUFaramir_HITD
                AnimationMode                = ONCE
            End
        End

        AnimationState                         = HIT_REACTION HIT_LEVEL_1
            StateName                        = Bored_Bow
            Animation                         = Hit_Level_1_a
                AnimationName                = GUTwrGrd_HITA
                AnimationMode                = ONCE
            End
        End




        AnimationState                    = WEAPONSET_TOGGLE_1
            StateName                    = Bored_Sword

            Animation                    = Idle_Sword1
                AnimationName            = RURoyalGrd_IDLB
                AnimationMode            = ONCE
                AnimationPriority        = 20
            End
            Animation                    = Idle_Sword2
                AnimationName            = GUFaramir_IDLE
                AnimationMode            = ONCE
                AnimationPriority        = 5
            End
            Animation                    = Idle_Sword3
                AnimationName            = GUFaramir_IDLF
                AnimationMode            = ONCE
                AnimationPriority        = 5
            End
            Animation                    = Idle_Sword4
                AnimationName            = GUFaramir_IDLG
                AnimationMode            = ONCE
                AnimationPriority        = 5
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
                if Prev == "STATE_Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoredSword") end
            EndScript
        End

        IdleAnimationState
            StateName                    = Bored_Bow
            Animation                    = IDLA
                AnimationName            = GUTwrGrd_IDLA
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                    = IDLC
                AnimationName            = GUTowerGrd_IDLC
                AnimationMode            = ONCE
                AnimationBlendTime        = 5
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                    = IDLD
                AnimationName            = GUTowerGrd_IDLD
                AnimationMode            = ONCE
                AnimationBlendTime        = 5
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                    = IDLE
                AnimationName            = GUTowerGrd_IDLE
                AnimationMode            = ONCE
                AnimationBlendTime        = 5
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                    = IDLF
                AnimationName            = GUTowerGrd_IDLF
                AnimationMode            = ONCE
                AnimationBlendTime        = 5
                AnimationSpeedFactorRange = 0.8 1.2
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
                if Prev == "STATE_Selected_Bow" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoredBow") end
            EndScript
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End






        TransitionState                   = TRANS_BowToSword_Ready
            Animation                   = DrawSwords
                AnimationName           = GUFaramir_STHA
                AnimationMode           = ONCE
            End
        End

        TransitionState                   = TRANS_SwordToBow_Ready
            Animation                   = DrawBow
                AnimationName           = GUFaramir_STHB
                AnimationMode           = ONCE
            End
        End

        TransitionState       = TRANS_BowToSword
            Animation           = GUFaramir_STHA
                AnimationName     = GUFaramir_SKL.GUFaramir_STHA
                AnimationMode     = ONCE
            End
        End

        TransitionState       = TRANS_SwordToBow
            Animation           = GUFaramir_STHB
                AnimationName     = GUFaramir_SKL.GUFaramir_STHB
                AnimationMode     = ONCE
            End
        End

        TransitionState                   = TRANS_BowToSword_Selected
            Animation                   = DrawSwords
                AnimationName           = GUFaramir_STHA
                AnimationMode           = ONCE
            End
        End

        TransitionState                   = TRANS_SwordToBow_Selected
            Animation                   = DrawBow
                AnimationName           = GUFaramir_STHB
                AnimationMode           = ONCE
            End
        End

        TransitionState = TRANS_BoredToSelectedSword
            Animation = ANTD
                AnimationName        = GUFaramir_SKL.GUFaramir_ANTD
                AnimationMode        = ONCE
            End
        End

        TransitionState = TRANS_SelectedToBoredSword
            Animation            = ATNF
                AnimationName    = GUFaramir_SKL.GUFaramir_ATNF
                AnimationMode    = ONCE
            End
        End

        TransitionState = TRANS_BoredToSelectedBow
            Animation = ATNA
                AnimationName        = GUTwrGrd_ATNA
                AnimationMode        = ONCE
            End
        End

        TransitionState = TRANS_SelectedToBoredBow
            Animation            = ATNC
                AnimationName    = GUTwrGrd_ATNC
                AnimationMode    = ONCE
            End
        End


    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End




    Side = Arnor
    EditorSorting = UNIT
    ThreatLevel = 1.0
    ThingClass = HORDE_UNIT
    CommandPoints = 10
    Scale = 0.95
    TransportSlotCount = 1

    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY    WachterVesteTowerShieldGuard
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions = WEAPONSET_TOGGLE_1
        Weapon = PRIMARY    WachterVesteSword
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End


    ArmorSet
        Conditions      = None
        Armor           = EdainVesteArmor
        DamageFX        = NormalDamageFX
    End

    ArmorSet
        Conditions      = PLAYER_UPGRADE
        Armor           = EdainVesteHeavyArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange = 200
    ShroudClearingRange = 475

    VisionSide = 35%
    VisionRear = 25%

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 2.0%

    BountyValue = 20
    DisplayName = OBJECT:ArnorPalantirwachter
    CrushableLevel = 0

    CrushRevengeWeapon = VesteGuardCrushRevenge
    CommandSet = ArnorPalantirwachterHordeCommandSet




    VoiceAttack                            = PalantirwachterVoiceAttack
    VoiceAttackCharge                      = PalantirwachterVoiceAttack
    VoiceAttackStructure                   = PalantirwachterVoiceAttackStructure
    VoiceAttackMachine                     = PalantirwachterVoiceAttackStructure
    VoiceCreated                           = PalantirwachterVoiceRecruit
    VoiceFullyCreated                      = PalantirwachterVoiceRecruit
    VoiceGuard                             = PalantirwachterVoiceMove
    VoiceMove                              = PalantirwachterVoiceMove
    VoiceMoveToCamp                        = PalantirwachterVoiceMove
    VoiceMoveWhileAttacking                = PalantirwachterVoiceMove
    VoicePriority                          = 65
    VoiceRetreatToCastle                   = PalantirwachterVoiceMove
    VoiceSelect                            = PalantirwachterVoiceSelect
    VoiceSelectBattle                      = PalantirwachterVoiceSelect

    VoiceEnterStateAttack                  = PalantirwachterVoiceAttack
    VoiceEnterStateAttackCharge            = PalantirwachterVoiceAttack
    VoiceEnterStateAttackStructure         = PalantirwachterVoiceAttackStructure
    VoiceEnterStateAttackMachine           = PalantirwachterVoiceAttackStructure
    VoiceEnterStateMove                    = PalantirwachterVoiceMove
    VoiceEnterStateMoveToCamp              = PalantirwachterVoiceMove
    VoiceEnterStateMoveWhileAttacking      = PalantirwachterVoiceMove
    VoiceEnterStateRetreatToCastle         = PalantirwachterVoiceMove

    SoundImpact                            = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitElvenTransportShip   = PalantirwachterVoiceMove
        VoiceGarrison                      = PalantirwachterVoiceMove
        VoiceInitiateCaptureBuilding       = PalantirwachterVoiceMove
    End


    EvaEventDamagedOwner = UnitUnderAttack

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:RAISING_FLAG            Excluded:DYING ENGAGED    Sound:EmotionMenGoodCompilationBFME1and2VoxTauntSinglesLoop
    End

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Unit Infantry
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:FootstepDirtA             Animation:GUFaramir_SKL.GUFaramir_RUNA        Frames:2 12
        AnimationSound = Sound:FootstepDirtA             Animation:GUFaramir_SKL.GUFaramir_RUNB        Frames:2 12
        AnimationSound = Sound:FootstepDirtA             Animation:GUFaramir_SKL.RURoyalGrd_RUNB       Frames:4 12 20 27

        AnimationSound = Sound:SwordShingClean1          Animation:GUFaramir_SKL.GUFaramir_ATKC        Frames:18

        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:GUFaramir_SKL.GUFaramir_DIEA        Frames:88
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:GUFaramir_SKL.GUFaramir_DIEB        Frames:85
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:GUFaramir_SKL.GUFaramir_DIEC        Frames:49
        AnimationSound = Sound:BodyFallSoldier           Animation:GUFaramir_SKL.GUFaramir_LNDA        Frames:3
        AnimationSound = Sound:BodyFallSoldier           Animation:GUFaramir_SKL.GUFaramir_LNDB        Frames:2
    End





    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP PIKE MADE_OF_DIRT


    Body = ActiveBody ModuleTag_02
        CheerRadius       = EMOTION_CHEER_RADIUS
        MaxHealth         = 1500
        MaxHealthDamaged  = 725
    End

    Behavior = SubObjectsUpgrade ArnorSkin
        TriggeredBy        = Upgrade_AllFactionUpgrade
        UpgradeTexture     = gupalawchtr.tga 0 gupalawchtr_HA.tga
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle      = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate             = 500
        CanAttackWhileContained         = Yes
    End

    LocomotorSet
        Locomotor = HumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_FOOT_MED_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = HumanWanderLocomotor
        Condition = SET_WANDER
        Speed     = NORMAL_FOOT_MED_MEMBER_SPEED
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_DefendStructureUnpause
        SpecialPowerTemplate        = SpecialAbilityDefendStructure
        TriggeredBy                 = Upgrade_MiniHordeLvl5
    End

    Behavior = SpecialPowerModule DefendStructure_ModuleTag
        SpecialPowerTemplate        = SpecialAbilityDefendStructure
        AttributeModifier           = DefendStructureModifier
        AttributeModifierRange      = 55
        AttributeModifierAffects    = ANY +STRUCTURE ALLIES
        UpdateModuleStartsAttack    = No
        StartsPaused                = Yes
    End

    Behavior = AutoHealBehavior ModuleTag_ArnorHealingSpell
        StartsActive          = No
        TriggeredBy           = Upgrade_AMerciOfDaKing
        HealingAmount         = MONSTER_HEAL_AMOUNT
        HealingDelay          = 1000
        StartHealingDelay     = MONSTER_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
   End

    Behavior = AttributeModifierUpgrade ModuleTag_CrushDecelerateBonus
        TriggeredBy       = Upgrade_AllFactionUpgrade
        AttributeModifier = Crushed_Decelerate_Pikes
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -EXTRA_3 -EXTRA_8 -FADED
        SinkDelay = 3000
        SinkRate = 0.5
        DestructionDelay = 15000
        Sound = INITIAL HumanVoiceDie
    End

    Behavior = SlowDeathBehavior ModuleTag_Undead
        DeathTypes = NONE +EXTRA_3
        SinkDelay = 3000
        SinkRate = 0.5
        DestructionDelay = 12000
        DeathFlags = DEATH_5
        Sound = INITIAL HumanVoiceDie
        Weapon = FINAL EdainDeathforUndeadModule
    End


    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = HordeMemberCollide ModuleTag_HMC

    End

    Behavior = SlowDeathBehavior ModuleTag_GrabandDrop
        DeathTypes       = NONE +EXTRA_8
        SinkDelay        = 3000
        SinkRate         = 0.60
        DestructionDelay = 10000
        DeathFlags       = DEATH_4
        ShadowWhenDead   = Yes
    End

    Behavior = FireWeaponWhenDeadBehavior ModuleTag_GrabandDropImpact
        RequiredStatus  = DEATH_4
        StartsActive    = Yes
        DelayTime       = 0
        DeathWeapon     = GrabandDropInfantryImpactWarhead
        WeaponOffset    = X:0 Y:0 Z:0
    End

    Behavior = BezierProjectileBehavior ModuleTag_BodyHitHuman
       FirstHeight               = 24
       SecondHeight              = 24
       FirstPercentIndent        = 30%
       SecondPercentIndent       = 70%
       TumbleRandomly            = Yes
       CrushStyle                = Yes
       DieOnImpact               = Yes
       BounceCount               = 1
       BounceDistance            = 40
       BounceFirstHeight         = 24
       BounceSecondHeight        = 24
       BounceFirstPercentIndent  = 20%
       BounceSecondPercentIndent = 80%
       GroundHitFX               = FX_GrabandDropInfantryGroundHit
       GroundBounceFX            = FX_GrabandDropInfantryGroundHit
    End

    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes
    Shadow = SHADOW_DECAL
    ShadowSizeX = 14
    ShadowSizeY = 14
    ShadowTexture = ShadowI
End


ChildObject ArnorPalantirwachterBattletower ArnorPalantirwachter
    IsTrainable = No
    CommandPoints = 0
    CommandSet = GondorRangerHordeEdainCommandSet_Summoned
    EquivalentTo = ArnorPalantirwachter

    WeaponSet
        Conditions = None
        Weapon = PRIMARY    WachterDenethorSword
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = EdainHeavyPikemanArmor
        DamageFX        = NormalDamageFX
    End

    Body = ActiveBody ModuleTag_02
        CheerRadius          = EMOTION_CHEER_RADIUS
        MaxHealth            = 1200
        MaxHealthDamaged     = 575
        BurningDeathBehavior = Yes
        BurningDeathFX       = FX_InfantryBurningFlame
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = FighterHorde
    End

    KindOf = +CREEP

    VisionRange = CREEP_VISION

    ThreatBreakdown MordorGoblinSwordsmanSlaved_ThreatBreakdown
        AIKindOf = CREEP
    End


    Behavior = SlavedUpdate ModuleTag_Slave
        GuardMaxRange       = 300
        GuardWanderRange    = 100
        UseSlaverAsControlForEvaObjectSightedEvents = Yes
    End

    Behavior = GrantUpgradeCreate ModuleTag_GrantMithrilMail
        UpgradeToGrant = Upgrade_ForgedBlades
    End

    Behavior = GrantUpgradeCreate ModuleTag_GrantBasicTraining
        UpgradeToGrant = Upgrade_HeavyArmor
    End

End

ChildObject ArnorPalantirwachterAraphant_Summoned ArnorPalantirwachter

    Draw = W3DHordeModelDraw ModuleTag_01
        OkToChangeModelColor = Yes

        StaticModelLODMode = Yes

        DefaultModelConditionState
            Model               = gupalawchtrb
            Skeleton            = GUTwrGrd_SKL
        End

        AnimationState        = THROWN_PROJECTILE
            Animation           = FLYA
                AnimationName     = GUTwrGrd_FLYA
                AnimationMode     = LOOP
            End
        End

        AnimationState                            = PASSENGER FREEFALL
            Animation                            = Grabbed
                AnimationName                    = GUTwrGrd_FLLA
                AnimationMode                    = LOOP
            End
        End

        AnimationState                            = FREEFALL
            Animation                            = Falling
                AnimationName                    = GUTwrGrd_FLYA
                AnimationMode                    = LOOP
                AnimationBlendTime                = 10
            End
        End


        AnimationState                        = PARALYZED
            Animation
                AnimationName                = GUTwrGrd_IDLA
                AnimationMode                = LOOP
            End
        End

        AnimationState                = DYING BURNINGDEATH
            Animation                = DIEA
                AnimationName         = GUTwrGrd_DIEA
                AnimationMode         = ONCE
                AnimationBlendTime    = 10
            End
            Animation                = DIEA
                AnimationName         = GUTwrGrd_DIEB
                AnimationMode         = ONCE
                AnimationBlendTime    = 10
            End
            Animation                = DIEA
                AnimationName         = GUTwrGrd_DIEC
                AnimationMode         = ONCE
                AnimationBlendTime    = 10
            End
        End

        AnimationState        = DYING SPLATTED
            Animation           = LNDA
                AnimationName     = GUTwrGrd_LNDA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = DYING
            Animation           = DIEA
                AnimationName     = GUTwrGrd_DIEA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation           = DIEA
                AnimationName     = GUTwrGrd_DIEB
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation           = DIEA
                AnimationName     = GUTwrGrd_DIEC
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
        End


        AnimationState                        = BURNINGDEATH
            Animation
                AnimationName                = GUTwrGrd_MFDA
                AnimationMode                = LOOP
                Distance                    = 60
            End
        End


        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = GUTwrGrd_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End


        AnimationState                    = MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY
            ShareAnimation                = Yes
            Animation                    = TerrorFromTheSky
                AnimationName            = GUTwrGrd_RUNE
                AnimationMode            = LOOP
            End
        End
        AnimationState                    = MOVING EMOTION_TERROR
            ShareAnimation                = Yes
            Animation                    = Terror
                AnimationName            = GUTwrGrd_RUNE
                AnimationMode            = LOOP
            End
        End


        AnimationState                =    MOVING BACKING_UP
            ShareAnimation = Yes
            Animation                =    BackingUp
                AnimationName        =    GUTwrGrd_BAKA
                AnimationMode        =    LOOP
            End
            Animation                =    BackingUp
                AnimationName        =    GUTwrGrd_BAKB
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End


        AnimationState        = MOVING ALTERNATE_FORMATION

            StateName            = STATE_EnrouteToPorcupine
            Animation
                AnimationName     = GUTwrGrd_RUNA
                AnimationMode     = LOOP
            End
            Animation
                AnimationName     = GUTwrGrd_RUNB
                AnimationMode     = LOOP
            End
            Flags               = RANDOMSTART

        End

        AnimationState        = MOVING
            ShareAnimation = Yes
            Animation           = RUNA
                AnimationName     = GUTwrGrd_RUNA
                AnimationMode     = LOOP
            End
            Animation
                AnimationName     = GUTwrGrd_RUNB
                AnimationMode     = LOOP
            End
            Flags               = RANDOMSTART

        End

        AnimationState        =  FIRING_OR_PREATTACK_A
            Animation           = ATKA
                AnimationName     = GUTwrGrd_ATKA
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKA
                AnimationName     = GUTwrGrd_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End

        End


        AnimationState        = STUNNED_FLAILING
            Animation           = FLYA
                AnimationName     = GUTwrGrd_FLYA
                AnimationMode     = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = GTPA
                AnimationName     = GUTwrGrd_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState        = STUNNED
            Animation           = LNDA
                AnimationName     = GUTwrGrd_LNDA
                AnimationMode     = ONCE
            End
        End

        TransitionState       = TRANS_Plant
            Animation           = PLTA
                AnimationName     = GUTwrGrd_PLTA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
        End

        TransitionState       = TRANS_Unplant
            Animation           = PLTB
                AnimationName     = GUTwrGrd_PLTC
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 0.5 1.2
            End
        End

        AnimationState                        = HIT_REACTION
            Animation                        = HIT REACTION
                AnimationName                = GUTwrGrd_HITA
                AnimationMode                = ONCE
            End
        End


        AnimationState                    = EMOTION_ALERT EMOTION_AFRAID
            ShareAnimation                = Yes
            Animation                    = Apprehensive
                AnimationName            = GUTwrGrd_FERA
                AnimationMode            = LOOP
            End
            Flags                        = RANDOMSTART
        End



        AnimationState                    = EMOTION_AFRAID
            ShareAnimation                = Yes
            Animation                    = FERA
                AnimationName            = GUTwrGrd_FERA
                AnimationMode            = LOOP
            End
            Flags                        = RANDOMSTART
        End



        AnimationState                    = EMOTION_TAUNTING ALTERNATE_FORMATION
            Animation                    = TNTA
                AnimationName            = GUTwrGrd_TNTA
                AnimationMode            = LOOP
            End
            Animation                    = TNTA
                AnimationName            = GUTwrGrd_TNTB
                AnimationMode            = LOOP
            End
        End
        AnimationState                    = EMOTION_TAUNTING
            Animation                    = Taunting
                AnimationName            = GUTwrGrd_TNTA
                AnimationMode            = ONCE
            End
            Animation                    = Taunting2
                AnimationName            = GUTwrGrd_TNTB
                AnimationMode            = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End



        AnimationState                    = EMOTION_POINTING
            Animation                    = Pointing1
                AnimationName            = GUTwrGrd_PNTA
                AnimationMode            = LOOP
            End
            Animation                    = Pointing1
                AnimationName            = GUTwrGrd_PNTB
                AnimationMode            = LOOP
            End
            Flags                        = RANDOMSTART
        End



        AnimationState                    = EMOTION_CELEBRATING
            Animation                    = CHRA
                AnimationName            = GUTwrGrd_CHRA
                AnimationMode            = LOOP
            End
            Animation                    = CHRA
                AnimationName            = GUTwrGrd_CHRB
                AnimationMode            = LOOP
            End
            Animation                    = CHRA
                AnimationName            = GUTwrGrd_CHRC
                AnimationMode            = LOOP
            End
        End


        AnimationState                    = EMOTION_ALERT
            Animation                    = CHRA
                AnimationName            = GUTwrGrd_IDLA
                AnimationMode            = LOOP
            End
        End




        AnimationState                    = SELECTED ALTERNATE_FORMATION PORCUPINE

            StateName                    = STATE_SelectedAlternateFormation
            Animation
                AnimationName            = GUTwrGrd_PLTB
                AnimationMode            = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev ~= "STATE_SelectedAlternateFormation" and Prev ~= "STATE_Planted" and Prev ~= "TRANS_Plant" then CurDrawableSetTransitionAnimState("TRANS_Plant") end
            EndScript
        End
        AnimationState                    = SELECTED ALTERNATE_FORMATION

            StateName                    = STATE_SelectedAlternateFormation
            Animation
                AnimationName            = GUTwrGrd_ATNB
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = RAISING_FLAG
            Animation                    = CHRA
                AnimationName            = GUTwrGrd_CHRA
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 0.9 1.1
            End
            Animation                    = CHRA
                AnimationName            = GUTwrGrd_CHRB
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 0.9 1.1
            End
            Animation                    = CHRA
                AnimationName            = GUTwrGrd_CHRC
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 0.9 1.1
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = SELECTED
            StateName                    = STATE_Selected

            ShareAnimation                = Yes
            Animation                    = ATNB
                AnimationName            = GUTwrGrd_ATNB
                AnimationMode            = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Planted" then CurDrawableSetTransitionAnimState("TRANS_Unplant") end
            EndScript
        End



        AnimationState                    = ALTERNATE_FORMATION PORCUPINE
            StateName                    = STATE_Planted


            Animation                    = IDLB
                AnimationName            = GUTwrGrd_PLTB
                AnimationMode            = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev ~= "STATE_SelectedAlternateFormation" and Prev ~= "STATE_Planted" and Prev ~= "TRANS_Plant" then CurDrawableSetTransitionAnimState("TRANS_Plant") end
            EndScript
        End
        IdleAnimationState
            StateName                    = STATE_Idle
            Animation                    = IDLB
                AnimationName            = GUTwrGrd_IDLB
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                    = IDLC
                AnimationName            = GUTwrGrd_IDLC
                AnimationMode            = ONCE
                AnimationBlendTime        = 9
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                    = IDLD
                AnimationName            = GUTwrGrd_IDLD
                AnimationMode            = ONCE
                AnimationBlendTime        = 9
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                    = IDLE
                AnimationName            = GUTwrGrd_IDLE
                AnimationMode            = ONCE
                AnimationBlendTime        = 9
                AnimationSpeedFactorRange = 0.8 1.2
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Planted" then CurDrawableSetTransitionAnimState("TRANS_Unplant") end
            EndScript
        End


    End

    IsTrainable = No
    CommandPoints = 0
    CommandSet = GondorRangerHordeEdainCommandSet_Summoned
    EquivalentTo = ArnorPalantirwachter

    WeaponSet
        Conditions = None
        Weapon = PRIMARY    WachterDenethorSword
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = EdainHeavyPikemanArmor
        DamageFX        = NormalDamageFX
    End

    LocomotorSet
        Locomotor = GondorTowerShieldGuardLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_FOOT_SLOW_MEMBER_SPEED
    End

    Body = ActiveBody ModuleTag_02
        CheerRadius       = EMOTION_CHEER_RADIUS
        MaxHealth         = 400
        MaxHealthDamaged  = 200
        BurningDeathBehavior = Yes
        BurningDeathFX       = FX_InfantryBurningFlame
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL SpellGenericUnsummonFasterMS
        FX         = INITIAL FX_GiantSpiderDie
        DeathFlags = DEATH_2
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime      = CREATE_A_HERO_REINFORCEMENT_LIFETIME
        MaxLifetime      = CREATE_A_HERO_REINFORCEMENT_LIFETIME
        DeathType        = FADED
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = FighterHorde
    End

    KindOf = +CREEP

    VisionRange = CREEP_VISION

    ThreatBreakdown MordorGoblinSwordsmanSlaved_ThreatBreakdown
        AIKindOf = CREEP
    End

    Behavior = SlavedUpdate ModuleTag_Slave
        GuardMaxRange       = 300
        GuardWanderRange    = 100
        UseSlaverAsControlForEvaObjectSightedEvents = Yes
    End

    Behavior = GrantUpgradeCreate ModuleTag_GrantMithrilMail
        UpgradeToGrant = Upgrade_ForgedBlades
    End

    Behavior = GrantUpgradeCreate ModuleTag_GrantBasicTraining
        UpgradeToGrant = Upgrade_HeavyArmor
    End
End

