Object MenegrothElite

    SelectPortrait = HPMenegrothElite
    ButtonImage    = HPMenegrothElite

    Draw = W3DHordeModelDraw ModuleTag_01

        DefaultModelConditionState
            Model                        = eumenelite
            Skeleton                     = RULegolas_SKL
            WeaponLaunchBone             = PRIMARY ARROW
            WeaponLaunchBone             = SECONDARY ARROWNOCK
        End

        ModelConditionState = WEAPONSET_TOGGLE_1
            Model                        = eumenelite
            Skeleton                     = RULegolas_SKL
        End

        AnimationState                    = PASSENGER WEAPONSET_TOGGLE_1
            StateName                    = STATE_Grabbed
            Animation                    = Sword
                AnimationName            = RULegolas_FLYA
                AnimationMode            = LOOP
            AnimationSpeedFactorRange    = 0.24    0.24
            End
        End

        AnimationState                    = PASSENGER
            StateName                    = STATE_Grabbed
            Animation                    = Bow
                AnimationName            = RULegolas_FLYB
                AnimationMode            = LOOP
            AnimationSpeedFactorRange    = 0.24    0.24
            End
        End

        AnimationState                    = FREEFALL WEAPONSET_TOGGLE_1
            StateName                    = STATE_Falling
            Animation                    = Sword
                AnimationName            = RULegolas_FLYA
                AnimationMode            = LOOP
                AnimationBlendTime        = 10
                AnimationSpeedFactorRange    = 0.24    0.24
            End
        End

        AnimationState                    = FREEFALL
            StateName                    = STATE_Falling
            Animation                    = Bow
                AnimationName            = RULegolas_FLYB
                AnimationMode            = LOOP
                AnimationBlendTime        = 10
                AnimationSpeedFactorRange    = 0.5    0.5
            End
        End

        AnimationState                    = STUNNED_FLAILING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Fly
            Animation                   = Sword
                AnimationName           = RULegolas_FLYA
                AnimationMode           = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES2
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "Ready_Bow" or PrevState == "Moving_Bow" or PrevState == "Bored_Bow"
                then
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "WantSword"
                elseif PrevState == "STATE_Fly"
                then
                    if PrevAnim == "Bow" or PrevAnim == "WantSword"
                    then
                        CurDrawableShowSubObject("arrow")
                        CurDrawableShowSubObject("arrownock")
                        return "WantSword"
                    end
                end

                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                return "Sword"
            EndScript
        End

        AnimationState                    = STUNNED_FLAILING
            StateName                    = STATE_Fly
            Animation
                AnimationName           = RULegolas_FLYB
                AnimationMode           = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES2
        End

        AnimationState                    = DYING DEATH_1 SPLATTED WEAPONSET_TOGGLE_1
            StateName                    = STATE_Dead
            Animation                    = Sword
                AnimationName            = RULegolas_LNDA
                AnimationMode            = ONCE
            End
        End

        AnimationState                    = DYING DEATH_1 SPLATTED
            StateName                    = STATE_Dead
            Animation                    = Bow
                AnimationName            = RULegolas_LNDB
                AnimationMode            = ONCE
            End
        End



        AnimationState                    = DYING DEATH_1 WEAPONSET_TOGGLE_1
            Animation                   = Sword1
                AnimationName           = RULegolas_DIEC
                AnimationMode           = ONCE
            End

            Animation                   = WantSword
                AnimationName           = RULegolas_LNDA
                AnimationMode           = ONCE
            End

            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_Fly"
                then
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "WantSword"
                end

                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if GetClientRandomNumberReal(0,2) < 1
                then
                    return "Sword1"
                else
                    return "Sword2"
                end
            EndScript
        End

        AnimationState                    = DYING DEATH_2 WEAPONSET_TOGGLE_1
            Animation                   = FadeOut
                AnimationName           = RULegolas_IDLJ
                AnimationMode           = LOOP
            End
        End

        AnimationState                    = DYING DEATH_1
            Animation                   = Bow1
                AnimationName           = RULegolas_DIEB
                AnimationMode           = ONCE
            End
            Animation                   = Bow2
                AnimationName           = RULegolas_DIEA
                AnimationMode           = ONCE
            End
            Animation                   = WantBow
                AnimationName           = RULegolas_LNDB
                AnimationMode           = ONCE
            End
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()

                if PrevState == "STATE_Fly"
                then
                    CurDrawableHideSubObject("ArrowNock")
                    CurDrawableHideSubObject("arrow")
                    return "WantBow"
                end

                if GetClientRandomNumberReal(0,2) < 1
                then
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "Bow1"
                else
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "Bow2"
                end
            EndScript
        End

        AnimationState                    = DYING DEATH_2
            Animation                    = FadeOut
                AnimationName            = RULegolas_IDLB
                AnimationMode            = ONCE
            End
        End


        AnimationState                    = STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
            StateName                    = STATE_GetUp
            Animation                   = Sword
                AnimationName           = RULegolas_GTPC
                AnimationMode           = ONCE
            End
            Animation                   = WantSword
                AnimationName           = RULegolas_GTPB
                AnimationMode           = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_GetUp" or PrevState == "STATE_Land"
                then
                    if PrevAnim == "Bow" or PrevAnim == "WantSword"
                    then
                        CurDrawableShowSubObject("arrow")
                        CurDrawableShowSubObject("arrownock")
                        return "WantSword"
                    end
                end

                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                return "Sword"
            EndScript
        End



        AnimationState                    = STUNNED_STANDING_UP
            StateName                    = STATE_GetUp
            Animation                   = Bow
                AnimationName           = RULegolas_GTPB
                AnimationMode           = ONCE
            End
            Animation                   = WantBow
                AnimationName           = RULegolas_GTPA
                AnimationMode           = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_GetUp" or PrevState == "STATE_Land"
                then
                    if PrevAnim == "WantBow" or PrevAnim == "Sword"
                    then
                        CurDrawableHideSubObject("ArrowNock")
                        CurDrawableHideSubObject("arrow")
                        return "WantBow"
                    end
                else
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "Bow"
                end
            EndScript
        End

        AnimationState                    = STUNNED WEAPONSET_TOGGLE_1
            StateName                    = STATE_Land
            Animation                   = Sword
                AnimationName           = RULegolas_LNDA
                AnimationMode           = ONCE
            End
            Animation                   = WantSword
                AnimationName           = RUElfWar_LNDA
                AnimationMode           = ONCE
            End
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_Fly"
                then
                    if PrevAnim == "WantSword" or PrevAnim == "Bow"
                    then
                        CurDrawableShowSubObject("arrow")
                        CurDrawableShowSubObject("arrownock")
                        return "WantSword"
                    end
                end
                Flags                        = MAINTAIN_FRAME_ACROSS_STATES3
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                return "Sword"
            EndScript
        End

        AnimationState                    = STUNNED
            StateName                    = STATE_Land
            Animation                   = Bow
                AnimationName           = RULegolas_LNDB
                AnimationMode           = ONCE
            End
            Animation                   = WantBow
                AnimationName           = RULegolas_LNDA
                AnimationMode           = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES3
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_Fly"
                then
                    if PrevAnim == "WantBow" or PrevAnim == "Sword"
                    then
                        CurDrawableHideSubObject("ArrowNock")
                        CurDrawableHideSubObject("arrow")
                        return "WantBow"
                    end
                end

                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                return "Bow"
            EndScript
        End





        AnimationState                    = MOVING EMOTION_TERROR WEAPONSET_TOGGLE_1
            StateName                    = Moving_Sword
            Animation                    = Terror
                AnimationName            = RULegolas_RUNB
                AnimationMode            = LOOP
                Distance                = 40
            End
            Animation                    = finishrun_b
                AnimationName           = RULegolas_RUNA
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Animation                    = runtrans_bs
                AnimationName           = RULegolas_RUNE
                AnimationMode           = ONCE
                AnimationBlendTime        = 5
                Distance                = 70
            End
            Animation                    = runtrans_sb_finish
                AnimationName           = RULegolas_RUND
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = runnoblend_s
                AnimationName           = RULegolas_RUNB
                AnimationMode           = LOOP
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE MAINTAIN_FRAME_ACROSS_STATES
            BeginScript
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")

                if PrevState == "Moving_Bow"
                then
                    if PrevAnim == "runtrans_sb"
                    then
                        return "runtrans_sb_finish"
                    elseif PrevAnim == "finishrun_s"
                    then
                        return "runnoblend_s"
                    else
                        return "finishrun_b"
                    end
                elseif PrevAnim == "finishrun_b" or PrevAnim == "runtrans_sb_finish"
                then
                    return "runtrans_bs"
                elseif PrevAnim == "runtrans_bs" or PrevAnim == "run_s" or PrevAnim == "runnoblend_s"
                then
                    return "runnoblend_s"
                else
                    return "Terror"
                end
            EndScript
        End
        AnimationState                    = MOVING EMOTION_TERROR
            StateName                    = Moving_Bow
            Animation                    = RunAway_3
                AnimationName            = RULegolas_RUNA
                AnimationMode            = ONCE
                Distance                = 40
            End
            Animation                    = RunAway_2
                AnimationName            = RULegolas_RUNA
                AnimationMode            = ONCE
                Distance                = 40
            End
            Animation                    = RunAway
                AnimationName            = RULegolas_RUNA
                AnimationMode            = ONCE
                Distance                = 40
            End
            Animation                    = finishrun_s
                AnimationName           = RULegolas_RUNB
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Animation                    = runtrans_sb
                AnimationName           = RULegolas_RUND
                AnimationMode           = ONCE
                AnimationBlendTime        = 5
                Distance                = 70
            End
            Animation                    = runtrans_bs_finish
                AnimationName           = RULegolas_RUNE
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = RunAway_noblend
                AnimationName            = RULegolas_RUNA
                AnimationMode            = ONCE
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE MAINTAIN_FRAME_ACROSS_STATES
            BeginScript
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "Moving_Sword"
                then
                    if PrevAnim == "runtrans_bs"
                    then
                        return "runtrans_bs_finish"
                    elseif PrevAnim == "finishrun_b"
                    then
                        return "RunAway_noblend"
                    else
                        return "finishrun_s"
                    end
                elseif PrevAnim == "finishrun_s" or PrevAnim == "runtrans_bs_finish"
                then
                    return "runtrans_sb"
                elseif PrevAnim == "runtrans_sb" or PrevAnim == "run_b" or PrevAnim == "runnoblend_b"
                then
                    return "RunAway_noblend"
                else
                    Num = GetClientRandomNumberReal(0,7)
                    if Num < 1
                    then
                        return "RunAway_2"
                    elseif Num > 6
                    then
                        return "RunAway_3"
                    else
                        return "RunAway"
                    end
                end
            EndScript
        End




        AnimationState                    = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            StateName                    = Ready_Sword

            Animation                   = AttackWithSwordA
                AnimationName           = RULegolas_ATKD
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            Animation                   = AttackWithSwordB
                AnimationName           = RULegolas_ATKE
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            Animation                   = AttackWithSwordD
                AnimationName           = RULegolas_ATKJ
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            Animation                   = AttackWithSwordE
                AnimationName           = RULegolas_ATKK
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            BeginScript
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState                    = PREATTACK_A
            Animation                    = ReadyToDrawn
                AnimationName            = RULegolas_ATKA1
                AnimationMode            = ONCE
                AnimationBlendTime        = 20
            End

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("ArrowNock")
            EndScript
        End

        AnimationState                    = FIRING_OR_RELOADING_A
            StateName                    = STATE_Firing
            Animation                    = OneFrameOfShooting
                AnimationName            = RULegolas_ATKA2
                AnimationMode            = ONCE
                AnimationBlendTime        = 0
                AnimationSpeedFactorRange    = 0.7 0.7
            End
            Flags                        = START_FRAME_FIRST
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("ArrowNock")
            EndScript
        End






        AnimationState                    = MOVING BACKING_UP WEAPONSET_TOGGLE_1
            StateName                    = STATE_BackingUp
            Animation                    = Sword
                AnimationName            = RUElfWar_BAKS
                AnimationMode            = LOOP
            End
            Animation                    = WantSword
                AnimationName            = RUElfWar_BAKB
                AnimationMode            = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                if PrevState == "STATE_BackingUp"
                then
                    if PrevAnim == "Bow" or PrevAnim == "WantSword"
                    then
                        return "WantSword"
                    end
                end

                return "Sword"
            EndScript
        End
        AnimationState                    = MOVING BACKING_UP
            StateName                    = STATE_BackingUp
            Animation                    = Bow
                AnimationName            = RUElfWar_BAKB
                AnimationMode            = LOOP
            End
            Animation                    = WantBow
                AnimationName            = RUElfWar_BAKS
                AnimationMode            = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                if PrevState == "STATE_BackingUp"
                then
                    if PrevAnim == "WantBow" or PrevAnim == "Sword"
                    then
                        return "WantBow"
                    end
                end

                return "Bow"
            EndScript
        End



        AnimationState                    = MOVING WEAPONSET_TOGGLE_1
            StateName                    = Moving_Sword
            SimilarRestart                = Yes
            Animation                   = run_s
                AnimationName           = RULegolas_RUNB
                AnimationMode           = LOOP
                Distance                = 40
            End
            Animation                    = finishrun_b
                AnimationName           = RULegolas_RUNB
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Animation                    = runtrans_bs
                AnimationName           = RULegolas_RUNE
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = runtrans_sb_finish
                AnimationName           = RULegolas_RUND
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = runnoblend_s
                AnimationName           = RULegolas_RUNB
                AnimationMode           = LOOP
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")

                if PrevState == "Moving_Bow"
                then
                    if PrevAnim == "runtrans_sb"
                    then
                        return "runtrans_sb_finish"
                    elseif PrevAnim == "finishrun_s"
                    then
                        return "runnoblend_s"
                    else
                        return "finishrun_b"
                    end
                elseif PrevAnim == "finishrun_b" or PrevAnim == "runtrans_sb_finish" or PrevAnim == "WantSword"
                then
                    return "runtrans_bs"
                elseif PrevAnim == "runtrans_bs" or PrevAnim == "run_s" or PrevAnim == "runnoblend_s"
                then
                    return "runnoblend_s"
                else
                    return "run_s"
                end
            EndScript
        End

        AnimationState                    = MOVING
            StateName                    = Moving_Bow
            SimilarRestart                = Yes
            Animation                   = run_b
                AnimationName           = RULegolas_RUNA
                AnimationMode           = LOOP
                Distance                = 40
            End
            Animation                    = finishrun_s
                AnimationName           = RULegolas_RUNB
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Animation                    = runtrans_sb
                AnimationName           = RULegolas_RUND
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = runtrans_bs_finish
                AnimationName           = RULegolas_RUNE
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = runnoblend_b
                AnimationName           = RULegolas_RUNA
                AnimationMode           = LOOP
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()

                if PrevState == "Moving_Sword"
                then
                    if PrevAnim == "runtrans_bs"
                    then
                        return "runtrans_bs_finish"
                    elseif PrevAnim == "finishrun_b"
                    then
                        return "runnoblend_b"
                    else
                        return "finishrun_s"
                    end
                elseif PrevAnim == "finishrun_s" or PrevAnim == "runtrans_bs_finish" or PrevAnim == "WantBow"
                then
                    return "runtrans_sb"
                elseif PrevAnim == "runtrans_sb" or PrevAnim == "run_b" or PrevAnim == "runnoblend_b"
                then
                    return "runnoblend_b"
                else
                    return "run_b"
                end
            EndScript
        End

        AnimationState                    = CONTINUOUS_FIRE_MEAN
            Animation                    = HangFrameWhileCoasting
                AnimationName            = RULegolas_ATKA2
                AnimationMode            = MANUAL
                AnimationBlendTime        = 0
            End
            Flags                        = START_FRAME_LAST

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("ARROWNOCK")
                if CurDrawablePrevAnimationState() == "STATE_Firing" then CurDrawableAllowToContinue() end
            EndScript
        End

        AnimationState                    = CONTINUOUS_FIRE_SLOW
            StateName                    = Ready_Bow
            Animation                    = PutAwayArrow
                AnimationName            = RULegolas_ATKA3
                AnimationMode            = ONCE
            End

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("ARROWNOCK")
            EndScript
        End

        AnimationState                    = EMOTION_UNCONTROLLABLY_AFRAID WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = RULegolas_IDLJ
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = RULegolas_IDLJ
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                end
            EndScript
        End
        AnimationState                    = EMOTION_UNCONTROLLABLY_AFRAID
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = RULegolas_IDLB
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
            End
            Animation                    = Bow2
                AnimationName            = RULegolas_IDLB
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                end
            EndScript
        End




        AnimationState                    = EMOTION_ALERT WEAPONSET_TOGGLE_1
            StateName                    = Ready_Sword

            Animation                    = Alert_1
                AnimationName            = RULegolas_IDLJ
                AnimationMode            = LOOP
            End

            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if Prev == "Bored_Sword"        then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")            end
                if Prev == "Selected_Sword"        then CurDrawableSetTransitionAnimState("TRANS_SR_Sword")            end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                end
            EndScript
        End
        AnimationState                    = ENGAGED WEAPONSET_TOGGLE_1
            StateName                    = Ready_Sword

            Animation                    = Alert_1
                AnimationName            = RULegolas_IDLJ
                AnimationMode            = LOOP
            End

            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if Prev == "Bored_Sword"        then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")            end
                if Prev == "Selected_Sword"        then CurDrawableSetTransitionAnimState("TRANS_SR_Sword")            end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                end
            EndScript
        End
        AnimationState                    = ATTACKING WEAPONSET_TOGGLE_1
            StateName                    = Ready_Sword

            Animation                    = Alert_1
                AnimationName            = RULegolas_IDLJ
                AnimationMode            = LOOP
            End

            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if Prev == "Bored_Sword"        then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")            end
                if Prev == "Selected_Sword"        then CurDrawableSetTransitionAnimState("TRANS_SR_Sword")            end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                end
            EndScript
        End

        AnimationState                    = EMOTION_ALERT
            StateName                    = Ready_Bow

            Animation                    = IDLB
                AnimationName            = RULegolas_IDLB
                AnimationMode            = LOOP
            End

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Bored_Bow"        then CurDrawableSetTransitionAnimState("TRANS_BR_Bow")                end
                if Prev == "Selected_Bow"    then CurDrawableSetTransitionAnimState("TRANS_SR_Bow")                end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                end
            EndScript
        End
        AnimationState                    = ENGAGED
            StateName                    = Ready_Bow

            Animation                    = IDLB
                AnimationName            = RULegolas_IDLB
                AnimationMode            = LOOP
            End

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Bored_Bow"        then CurDrawableSetTransitionAnimState("TRANS_BR_Bow")                end
                if Prev == "Selected_Bow"    then CurDrawableSetTransitionAnimState("TRANS_SR_Bow")                end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                end
            EndScript
        End
        AnimationState                    = ATTACKING
            StateName                    = Ready_Bow

            Animation                    = IDLB
                AnimationName            = RULegolas_IDLB
                AnimationMode            = LOOP
            End

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Bored_Bow"        then CurDrawableSetTransitionAnimState("TRANS_BR_Bow")                end
                if Prev == "Selected_Bow"    then CurDrawableSetTransitionAnimState("TRANS_SR_Bow")                end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                end
            EndScript
        End




        AnimationState                    = EMOTION_AFRAID WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = RULegolas_IDLJ
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = RULegolas_IDLJ
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                end
            EndScript
        End
        AnimationState                    = EMOTION_AFRAID
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = RULegolas_IDLB
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
            End
            Animation                    = Bow2
                AnimationName            = RULegolasB
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                end
            EndScript
        End



        AnimationState                    = EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = RULegolas_CHRA
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = RULegolas_CHRA
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Sword")
                elseif PrevState == "Bored_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
                end
            EndScript
        End
        AnimationState                    = EMOTION_CELEBRATING
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = RULegolas_CHRB
                AnimationMode            = ONCE
            End
            Animation                    = Bow2
                AnimationName            = RULegolas_CHRB
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Bow")
                end
            EndScript
        End



        AnimationState                    = EMOTION_TAUNTING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = RULegolas_IDLJ
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = RULegolas_IDLJ
                AnimationMode            = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Sword"
                    then
                        CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Sword")
                elseif PrevState == "Bored_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
                end
            EndScript
        End
        AnimationState                    = EMOTION_TAUNTING
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow1
                AnimationName            = RULegolas_IDLE
                AnimationMode            = ONCE
            End
            Animation                    = Bow2
                AnimationName            = RULegolas_IDLD
                AnimationMode            = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Bow")
                elseif PrevState == "Bored_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Bow")
                end
            EndScript
        End



        AnimationState                    = EMOTION_POINTING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = RULegolas_IDLJ
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = RULegolas_IDLJ
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Sword")
                elseif PrevState == "Bored_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
                end
            EndScript
        End
        AnimationState                    = EMOTION_POINTING
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = RULegolas_IDLB
                AnimationMode            = ONCE
            End
            Animation                    = Bow2
                AnimationName            = RULegolas_IDLB
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Bow")
                elseif PrevState == "Bored_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Bow")
                end
            EndScript
        End



        AnimationState                =    SELECTED WEAPONSET_TOGGLE_1
            StateName                =    Selected_Sword

            Animation                =    ATNA
                AnimationName        =    RULegolas_IDLJ
                AnimationMode        =    LOOP
            End

            BeginScript
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")

                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Emotion_Bow" or Prev == "STATE_Emotion_Sword" then CurDrawableAllowToContinue() end
                if Prev == "Bored_Sword"        then CurDrawableSetTransitionAnimState("TRANS_BS_Sword")        end
                if Prev == "Ready_Sword"        then CurDrawableSetTransitionAnimState("TRANS_RS_Sword")        end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Selected")
                end

            EndScript
        End

        AnimationState                =    SELECTED
            StateName               =    Selected_Bow

            Animation                =    ATNE
                AnimationName        =    RULegolas_ATNB
                AnimationMode        =    LOOP
            End

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Emotion_Bow" or Prev == "STATE_Emotion_Sword" then CurDrawableAllowToContinue() end
                if Prev == "Bored_Bow" then CurDrawableSetTransitionAnimState("TRANS_BS_Bow")                end
                if Prev == "Ready_Bow" then CurDrawableSetTransitionAnimState("TRANS_RS_Bow")                end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Selected")
                end
            EndScript
        End




        AnimationState                        = HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
            StateName                        = Bored_Sword
            Animation                        = Hit_Level_1_a
                AnimationName                = RULegolas_IDLJ
                AnimationMode                = ONCE
            End
        End

        AnimationState                         = HIT_REACTION HIT_LEVEL_1
            StateName                        = Bored_Bow
            Animation                         = Hit_Level_1_a
                AnimationName                = RULegolas_IDLB
                AnimationMode                 = ONCE
                AnimationSpeedFactorRange    = .9 .9
            End
        End




        AnimationState                    = WEAPONSET_TOGGLE_1
            StateName                    = Bored_Sword

            Animation                   = Idle_Sword1
                AnimationName           = RULegolas_IDLJ
                AnimationMode           = ONCE
            End
            Animation                   = Idle_Sword2
                AnimationName           = RULegolas_IDLJ
                AnimationMode           = ONCE
            End
            Animation                   = Idle_Sword3
                AnimationName           = RULegolas_IDLJ
                AnimationMode           = ONCE
            End
            Animation                    = IdleNoFidget
                AnimationName            = RULegolas_IDLJ
                AnimationMode            = ONCE
                AnimationPriority        = 20
            End
            Animation                    = IdleNoFidget2
                AnimationName            = RULegolas_IDLJ
                AnimationMode            = ONCE
                AnimationPriority        = 0
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")

                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "TRANS_SB_Sword" or Prev == "TRANS_RB_Sword" then return "IdleNoFidget" end
                if Prev == "Selected_Sword"        then CurDrawableSetTransitionAnimState("TRANS_SB_Sword")        end
                if Prev == "Ready_Sword"        then CurDrawableSetTransitionAnimState("TRANS_RB_Sword")        end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Selected")
                end
            EndScript
        End

        IdleAnimationState
            StateName                    = Bored_Bow

            Animation                    = IdleBowB
                AnimationName            = RULegolas_IDLD
                AnimationMode            = ONCE
            End
            Animation                    = IdleBowD
                AnimationName            = RULegolas_IDLE
                AnimationMode            = ONCE
            End
            Animation                    = IdleNoFidget
                AnimationName            = RULegolas_IDLB
                AnimationMode            = ONCE
                AnimationPriority        = 20
            End
            Animation                    = IdleNoFidget2
                AnimationName            = RULegolas_IDLB
                AnimationMode            = ONCE
                AnimationPriority        = 10
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "TRANS_SB_Bow" or Prev == "TRANS_RB_Bow" then return "IdleNoFidget" end
                if Prev == "Selected_Bow"        then CurDrawableSetTransitionAnimState("TRANS_SB_Bow")        end
                if Prev == "Ready_Bow"            then CurDrawableSetTransitionAnimState("TRANS_RB_Bow")        end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Selected")
                end
            EndScript
        End




        TransitionState                   = TRANS_BS_Bow
            Animation                   = ATND
                AnimationName             = RULegolas_ATNA
                AnimationMode             = ONCE
                AnimationBlendTime        = 10
            End
        End

        TransitionState                   = TRANS_SR_Bow
            Animation                   = ATNE
                AnimationName             = RULegolas_ATND
                AnimationMode             = ONCE
            End
        End

        TransitionState                   = TRANS_SB_Bow
            Animation                   = ATND
                AnimationName             = RULegolas_ATNA
                AnimationMode             = ONCE_BACKWARDS
            End
            Flags                        = START_FRAME_LAST
        End

        TransitionState                   = TRANS_RS_Bow
            Animation                   = ATNF
                AnimationName             = RULegolas_ATND
                AnimationMode             = ONCE_BACKWARDS
            End
            Flags                        = START_FRAME_LAST
        End

        TransitionState                   = TRANS_BR_Bow
            Animation                   = IDLB
                AnimationName             = RULegolas_IDLB
                AnimationMode             = ONCE
                AnimationBlendTime        = 20
            End
        End

        TransitionState                   = TRANS_RB_Bow
            Animation                   = IDLD
                AnimationName             = RULegolas_IDLD
                AnimationMode             = ONCE
                AnimationBlendTime        = 20
            End
        End



        TransitionState                   = TRANS_BS_Sword
            Animation                   = ATNA
                AnimationName             = RULegolas_IDLJ
                AnimationMode             = ONCE
            End
            Animation                   = ATNAX1
                AnimationName             = RULegolas_IDLJ
                AnimationMode             = ONCE
            End
        End

        TransitionState                   = TRANS_SR_Sword
            Animation                   = ATNC
                AnimationName             = RULegolas_IDLJ
                AnimationMode             = ONCE
            End
        End

        TransitionState                   = TRANS_SB_Sword
            Animation                   = ATNA
                AnimationName             = RULegolas_IDLJ
                AnimationMode             = ONCE_BACKWARDS
            End
            Flags                        = START_FRAME_LAST
        End

        TransitionState                   = TRANS_RS_Sword
            Animation                   = ATNC
                AnimationName             = RULegolas_IDLJ
                AnimationMode             = ONCE_BACKWARDS
            End
            Flags                        = START_FRAME_LAST
        End

        TransitionState                   = TRANS_BR_Sword
            Animation                   = ATNS
                AnimationName             = RULegolas_IDLJ
                AnimationMode             = ONCE
                AnimationBlendTime        = 20
            End
        End

        TransitionState                   = TRANS_RB_Sword
            Animation                   = IDLG
                AnimationName             = RULegolas_IDLJ
                AnimationMode             = ONCE
                AnimationBlendTime        = 20
            End
        End




        TransitionState                   = TRANS_BowToSword_Ready
            Animation                   = DrawSwords
                AnimationName           = RULegolas_STHA
                AnimationMode           = ONCE
            End
        End

        TransitionState                   = TRANS_SwordToBow_Ready
            Animation                   = DrawBow
                AnimationName           = RULegolas_STHB
                AnimationMode           = ONCE
            End
        End

        TransitionState                   = TRANS_BowToSword_Selected
            Animation                   = DrawSwords
                AnimationName           = RULegolas_STHA
                AnimationMode           = ONCE
            End
        End

        TransitionState                   = TRANS_SwordToBow_Selected
            Animation                   = DrawBow
                AnimationName           = RULegolas_STHB
                AnimationMode           = ONCE
            End
        End
    End



    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"







    Side                               = Lothlorien
    EditorSorting                      = UNIT
    ThreatLevel                        = 1.0
    ThingClass                         = HORDE_UNIT
    BountyValue                        = 12
    ShockwaveResistance                = 35
    TransportSlotCount                 = TRANSPORTSLOTCOUNT_UNIT

    VisionRange                        = 240
    VisionSide                         = 35%
    VisionRear                         = 25%
    VisionBonusPercentPerFoot          = 5.0%
    ShroudClearingRange                = 400

    DisplayName                        = OBJECT:MenegrothEliteHorde

    CrushableLevel                     = 0
    CrushRevengeWeapon                 = BasicInfantryCrushRevenge

    CommandSet                         = MenegrothEliteHordeCommandSet
    CommandPoints                      = 6





    WeaponSet
        Conditions                     = None
        Weapon                         = PRIMARY  MenegrothEliteSword
        AutoChooseSources              = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End





    ArmorSet
        Conditions                     = None
        Armor                          = QuendiInfantryArmor
        DamageFX                       = NormalDamageFX
    End

    ArmorSet
        Conditions                     = PLAYER_UPGRADE
        Armor                          = QuendiInfantryArmorUpgrade
        DamageFX                       = NormalDamageFX
    End





    VoiceAttack                         = ElfMirkwoodVoiceAttack
    VoiceAttackAir                      = ElfMirkwoodVoiceAttack
    VoiceAttackCharge                   = ElfMirkwoodVoiceAttackCharge
    VoiceAttackMachine                  = ElfMirkwoodVoiceAttack
    VoiceAttackStructure                = ElfMirkwoodVoiceAttackBuilding
    VoiceCreated                        = ElfMirkwoodVoiceSalute
    VoiceFullyCreated                   = ElfMirkwoodVoiceSalute
    VoiceGuard                          = ElfMirkwoodVoiceMove
    VoiceMove                           = ElfMirkwoodVoiceMove
    VoiceMoveToCamp                     = ElfMirkwoodVoiceMoveCamp
    VoiceMoveToHigherGround             = ElfMirkwoodVoiceMoveHighGround
    VoiceMoveWhileAttacking             = ElfMirkwoodVoiceDisengage
    VoicePriority                       = 70
    VoiceRetreatToCastle                = ElfMirkwoodVoiceMoveRetreat
    VoiceSelect                         = ElfMirkwoodVoiceSelectMS
    VoiceSelectBattle                   = ElfMirkwoodVoiceSelectBattle

    VoiceEnterStateAttack               = ElfMirkwoodVoiceEnterStateAttack
    VoiceEnterStateAttackCharge         = ElfMirkwoodVoiceEnterStateAttackCharge
    VoiceEnterStateAttackStructure      = ElfMirkwoodVoiceEnterStateAttackBuilding
    VoiceEnterStateAttackMachine        = ElfMirkwoodVoiceEnterStateAttackBuilding
    VoiceEnterStateMove                 = ElfMirkwoodVoiceEnterStateMove
    VoiceEnterStateMoveToCamp           = ElfMirkwoodVoiceEnterStateMoveCamp
    VoiceEnterStateMoveToHigherGround   = ElfMirkwoodVoiceEnterStateMoveHighGround
    VoiceEnterStateMoveWhileAttacking   = ElfMirkwoodVoiceEnterStateDisengage
    VoiceEnterStateRetreatToCastle      = ElfMirkwoodVoiceEnterStateRetreat

    MinZIncreaseForVoiceMoveToHigherGround  = 45

    SoundImpact                         = ImpactHorse

    UnitSpecificSounds
        VoiceEnterStateInitiateCaptureBuilding  = ElfMirkwoodVoiceEnterStateCaptureBuilding
        VoiceEnterUnitElvenTransportShip = ElfMirkwoodVoiceMoveShip
        VoiceGarrison                   = ElfMirkwoodVoiceMoveGarrison
        VoiceInitiateCaptureBuilding    = ElfMirkwoodVoiceCaptureBuilding
        VoiceMoveToTrees                = ElfMirkwoodVoiceMoveForest
        VoiceEnterStateMoveToTrees      = ElfMirkwoodVoiceEnterStateMoveForest
    End

    CrowdResponseKey = Elf

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Elf Elf_Male Unit Infantry Elf_LorienWarrior
    End

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:EMOTION_CELEBRATING     Excluded:DYING ENGAGED    Sound:EmotionElfCompilationVoxCheerSinglesLoop
        ModelCondition = Required:EMOTION_TAUNTING        Excluded:DYING ENGAGED    Sound:EmotionElfCompilationVoxTauntSinglesLoop
        ModelCondition = Required:RAISING_FLAG            Excluded:DYING ENGAGED    Sound:EmotionElfCompilationVoxTauntSinglesLoop
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:FootstepDirtA                Animation:RULegolas_SKL.RULegolas_RUNA    Frames:9 19
        AnimationSound = Sound:FootstepDirtA                Animation:RULegolas_SKL.RULegolas_RUNB    Frames:9 19
        AnimationSound = Sound:FootstepDirtA                Animation:RULegolas_SKL.RULegolas_RUND    Frames:9 20
        AnimationSound = Sound:FootstepDirtA                Animation:RULegolas_SKL.RULegolas_RUNE    Frames:8 19
        AnimationSound = Sound:WeaponSwitchBowForLegolas    Animation:RULegolas_SKL.RULegolas_ATKB    Frames:0
        AnimationSound = Sound:WeaponSwitchBowForLegolas    Animation:RULegolas_SKL.RULegolas_ATKA1   Frames:0
        AnimationSound = Sound:BodyFallSoldier              Animation:RULegolas_SKL.RULegolas_LNDA    Frames:0
        AnimationSound = Sound:BodyFallSoldier              Animation:RULegolas_SKL.RULegolas_LNDB    Frames:0
        AnimationSound = Sound:BodyFallGenericNoArmor       Animation:RULegolas_SKL.RULegolas_DIEA    Frames:48
        AnimationSound = Sound:BodyFallGenericNoArmor       Animation:RULegolas_SKL.RULegolas_DIEB    Frames:89
        AnimationSound = Sound:BodyFallGenericNoArmor       Animation:RULegolas_SKL.RULegolas_DIEC    Frames:64
    End



    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY SCORE THROWN_OBJECT PATH_THROUGH_EACH_OTHER ATTACK_NEEDS_LINE_OF_SIGHT GRAB_AND_DROP
    CamouflageDetectionMultiplier = CAMOUFLAGE_DETECTION_DISTANCE_LONG

    Body = ActiveBody ModuleTag_02
        CheerRadius                  = EMOTION_CHEER_RADIUS
        MaxHealth                    = 2000
        MaxHealthDamaged             = 1000
        BurningDeathBehavior         = Yes
        BurningDeathFX               = FX_InfantryBurningFlame
    End

    Behavior = AutoHealBehavior ModuleTag_LegolasHealing
        StartsActive                    = Yes
        HealingAmount                   = HERO_HEAL_AMOUNT
        HealingDelay                    = 1000
        StartHealingDelay               = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat           = Yes
    End

    #include "..\..\..\includes\CaptureBuilding.inc"

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle         = Yes ATTACK_BUILDINGS
        CanAttackWhileContained            = Yes
        MoodAttackCheckRate                = 500
        AILuaEventsList                    = RohanElvenWarriorFunctions
        BurningDeathTime                   = BURNINGDEATH_DURATION_INFANTRY
    End

    LocomotorSet
        Locomotor = HumanLocomotor
        Condition = SET_NORMAL
        Speed     = 58
    End

    LocomotorSet
        Locomotor = HumanWanderLocomotor
        Condition = SET_WANDER
        Speed     = 58
    End

    LocomotorSet
        Locomotor = HumanPanicLocomotor
        Condition = SET_PANIC
        Speed      = 58
    End

    LocomotorSet
        Locomotor = HumanScaredLocomotor
        Condition = SET_SCARED
        Speed     = 58
    End

    LocomotorSet
        Locomotor = BurningDeathLocomotorInfantry
        Condition = SET_BURNINGDEATH
        Speed     = BURNINGDEATH_WANDERSPEED_INFANTRY
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult             = 1.0
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes           = ALL -EXTRA_8
        SinkDelay            = 3000
        SinkRate             = 0.5
        DestructionDelay     = 15000
        Sound                = INITIAL ElfGenericVoiceDie
        DeathFlags           = DEATH_1
    End

    Behavior = SquishCollide ModuleTag_06
    End

    Behavior = HordeMemberCollide ModuleTag_HMC
    End

    Behavior = SlowDeathBehavior ModuleTag_GrabandDrop
        DeathTypes               = NONE +EXTRA_8
        SinkDelay                = 3000
        SinkRate                 = 0.60
        DestructionDelay         = 10000
        DeathFlags               = DEATH_4
        ShadowWhenDead           = Yes
    End

    Behavior = FireWeaponWhenDeadBehavior ModuleTag_GrabandDropImpact
        RequiredStatus          = DEATH_4
        StartsActive            = Yes
        DelayTime               = 0
        DeathWeapon             = GrabandDropInfantryImpactWarhead
        WeaponOffset            = X:0 Y:0 Z:0
    End

    Behavior = BezierProjectileBehavior ModuleTag_BodyHitHuman
       FirstHeight                   = 24
       SecondHeight                  = 24
       FirstPercentIndent            = 30%
       SecondPercentIndent           = 70%
       TumbleRandomly                = Yes
       CrushStyle                    = Yes
       DieOnImpact                   = Yes
       BounceCount                   = 1
       BounceDistance                = 40
       BounceFirstHeight             = 24
       BounceSecondHeight            = 24
       BounceFirstPercentIndent      = 20%
       BounceSecondPercentIndent     = 80%
       GroundHitFX                   = FX_GrabandDropInfantryGroundHit
       GroundBounceFX                = FX_GrabandDropInfantryGroundHit
    End

    Behavior = AimWeaponBehavior AimWeaponModuleTag
        AimLowThreshold          = -0.15
        AimHighThreshold         =  0.15
    End

    Behavior = InvisibilityUpdate ModuleTag_Camouflage
        InvisibilityNugget
            InvisibilityType            = CAMOUFLAGE
            ForbiddenConditions         = TAKING_DAMAGE USING_ABILITY
            DetectionRange              = CAMOUFLAGE_RADIUS
            Options                     = ALLOW_NEAR_TREES
        End
        StartsActive                    = Yes
        UpdatePeriod                    = 2000
    End

    Behavior = ModelConditionUpgrade ModuleTag_ModellSchwert
        TriggeredBy               = Upgrade_AllFactionUpgrade
        AddConditionFlags         = WEAPONSET_TOGGLE_1
        Permanent                 = Yes
    End

    Behavior = AttributeModifierUpgrade ModuleTag_AMU
        TriggeredBy                = Upgrade_AllFactionUpgrade
        AttributeModifier          = FearlessForever
    End

    Behavior = WeaponSetUpgrade WeaponSetUpgradeModuleTag
        TriggeredBy               = Upgrade_EliteHordeLvl5
    End

    Behavior = StatusBitsUpgrade ForgedBlades_UpgradeDetection
        TriggeredBy                = Upgrade_EliteHordeLvl5
    End

    Behavior = SubObjectsUpgrade ModuleTag_MakingThebla
        TriggeredBy                = Upgrade_AllFactionUpgrade
        HideSubObjects             = FORGED_BLADE01 FORGED_BLADE
    End

    Behavior = SubObjectsUpgrade ForgedBlades_Upgrade
        TriggeredBy                = Upgrade_EliteHordeLvl5
        ShowSubObjects             = FORGED_BLADE01 FORGED_BLADE
    End



    Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality2
        TriggeredBy                    = Upgrade_EliteHordeLvl3
    End

    Behavior = SpecialPowerModule ModuleTag_ElfCloakStarter
        SpecialPowerTemplate           = SpecialAbilityElfCloak
        UpdateModuleStartsAttack       = Yes
        StartsPaused                   = No
    End

    Behavior = ToggleHiddenSpecialAbilityUpdate ModuleTag_ElfCloakUpdate
        SpecialPowerTemplate           = SpecialAbilityElfCloak
    End

    Behavior = InvisibilityUpdate ModuleTag_ElvenCloak
        InvisibilityNugget
            InvisibilityType           = STEALTH
            ForbiddenConditions        = FIRING_ANY TAKING_DAMAGE
            BecomeStealthedFX          = FX_ElvenCloakOn
            ExitStealthFX              = FX_ElvenCloakOff
            Options                    = UNTOGGLE_HIDDEN_WHEN_LEAVING_STEALTH
        End
        StartsActive                   = No
        UpdatePeriod                   = 2000
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FormenosArmorUpgradeEnabler
        SpecialPowerTemplate          = SpecialAbilityFakeLeadership2
        TriggeredBy                   = Upgrade_EliteHordeLvl5
    End

    Behavior = SpecialPowerModule ModuleTag_FormenosArmorUpgradeStarter
        SpecialPowerTemplate          = SpecialAbilityFakeLeadership2
        UpdateModuleStartsAttack      = Yes
        StartsPaused                  = Yes
    End

    Behavior = ArmorUpgrade ArmorUpgradeModuleTag
        TriggeredBy                   = Upgrade_EliteHordeLvl5
        ArmorSetFlag                  = PLAYER_UPGRADE
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SpionageEnabler
        SpecialPowerTemplate          = SpecialAbilityMenegrothSpionage
        TriggeredBy                   = Upgrade_EliteHordeLvl7
    End

    Behavior = SpecialPowerModule ModuleTag_SpionagePower
        SpecialPowerTemplate          = SpecialAbilityMenegrothSpionage
        UpdateModuleStartsAttack      = Yes
        StartsPaused                  = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_SpionageUpdate
        SpecialPowerTemplate          = SpecialAbilityMenegrothSpionage
        SkipContinue                  = Yes
        UnpackTime                    = 1500
        PreparationTime               = 1
        PersistentPrepTime            = 1000
        PackTime                      = 500
        AwardXPForTriggering          = 0
        StartAbilityRange             = 290
        ApproachRequiresLOS           = Yes
        SpecialWeapon                 = MenegrothEliteSpionageWeapon
        MustFinishAbility             = Yes
        WhichSpecialWeapon            = 3
        BusyForDuration               = 2500
    End







    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName  = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName  = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName  = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate ElvenLorienWarriorHordeCaptureBuildingAI
        CommandButtonName  = Command_CaptureBuilding
        SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
    End

    Scale               = 0.95
    Geometry            = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight      = 19.2
    GeometryIsSmall     = Yes
    Shadow              = SHADOW_DECAL
    ShadowSizeX         = 14
    ShadowSizeY         = 14
    ShadowTexture       = ShadowI
End