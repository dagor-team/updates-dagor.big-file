Object LothlorienTauriel

    SelectPortrait     = HPTauriel
    ButtonImage        = HITaurielne

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_Legolas

    Draw = W3DScriptedModelDraw ModuleTag_DRAW


        DefaultModelConditionState
            Model               = EUTauriel_SKD
            Skeleton            = RULegolas_SKL
            WeaponLaunchBone    = PRIMARY ARROW
        End

        ModelConditionState     = WEAPONLOCK_SECONDARY
            Model               = EUTauriel_SKD
            Skeleton            = RULegolas_SKL
        End

        ModelConditionState     = WEAPONSET_TOGGLE_1
            Model               = EUTauriel_SKD
            Skeleton            = RULegolas_SKL
        End





        AnimationState        = STUNNED_FLAILING WEAPONLOCK_SECONDARY
            Animation           = FLYA
                AnimationName     = RULegolas_FLYA
                AnimationMode     = LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
            Flags               = RANDOMSTART
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End
        AnimationState        = STUNNED_FLAILING WEAPONSET_TOGGLE_1
            Animation           = FLYA
                AnimationName     = RULegolas_FLYA
                AnimationMode     = LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
            Flags               = RANDOMSTART
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End
        AnimationState        = STUNNED_FLAILING
            Animation           = FLYA
                AnimationName     = RULegolas_FLYB
                AnimationMode     = LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
            Flags               = RANDOMSTART
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End


        AnimationState        = DYING WEAPONLOCK_SECONDARY DEATH_1
            Animation           = DIEC
                AnimationName     = RULegolas_DIEC
                AnimationMode     = ONCE
            End
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState        = DYING WEAPONLOCK_SECONDARY DEATH_2
            Animation           = FadeOut
                AnimationName     = RULegolas_IDLJ
                AnimationMode     = LOOP
            End
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState        = DYING WEAPONSET_TOGGLE_1 DEATH_1
            Animation           = DIEC
                AnimationName     = RULegolas_DIEC
                AnimationMode     = ONCE
            End
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState        = DYING WEAPONSET_TOGGLE_1 DEATH_2
            Animation           = FadeOut
                AnimationName     = RULegolas_IDLJ
                AnimationMode     = LOOP
            End
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState        = DYING DEATH_1
            Animation           = DIEA
                AnimationName     = RULegolas_DIEA
                AnimationMode     = ONCE
            End
            Animation           = DIEB
                AnimationName     = RULegolas_DIEB
                AnimationMode     = ONCE
            End
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState        = DYING DEATH_2
            Animation           = FadeOut
                AnimationName     = RULegolas_IDLB
                AnimationMode     = LOOP
            End
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End





        AnimationState        = STUNNED_STANDING_UP WEAPONLOCK_SECONDARY
            StateName           = STATE_Sword
            Animation           = GUFaramir_GTPC
                AnimationName     = RULegolas_GTPC
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End
        AnimationState        = STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
            StateName           = STATE_Sword
            Animation           = GUFaramir_GTPC
                AnimationName     = RULegolas_GTPC
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End
        AnimationState        = STUNNED_STANDING_UP
            StateName           = STATE_Bow
            Animation           = GUFaramir_GTPA
                AnimationName     = RULegolas_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
            Animation           = GUFaramir_GTPB
                AnimationName     = RULegolas_GTPB
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState        = STUNNED WEAPONLOCK_SECONDARY
            StateName           = STATE_Sword
            Animation           = GUFaramir_LNDA
                AnimationName     = RULegolas_LNDA
                AnimationMode     = ONCE
            End
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End
        AnimationState        = STUNNED WEAPONSET_TOGGLE_1
            StateName           = STATE_Sword
            Animation           = GUFaramir_LNDA
                AnimationName     = RULegolas_LNDA
                AnimationMode     = ONCE
            End
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End
        AnimationState        = STUNNED
            StateName           = STATE_Bow
            Animation           = GUFaramir_LNDB
                AnimationName     = RULegolas_LNDB
                AnimationMode     = ONCE
            End
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = RULegolas_IDLA
                AnimationMode                = LOOP
            End
        End



        AnimationState        = UNPACKING PACKING_TYPE_1
            Animation           = ATKA1
                AnimationName     = RULegolas_ATKA1
                AnimationMode     = ONCE
            End
            StateName           = STATE_Bow
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState        = PREPARING PACKING_TYPE_1
            Animation           = ATKA2
                AnimationName     = RULegolas_ATKA2
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 1.328 1.328
            End
            StateName           = STATE_Bow
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState        = PACKING PACKING_TYPE_1
            Animation           = ATKA3
                AnimationName     = RULegolas_ATKA3
                AnimationMode     = LOOP
            End
            StateName           = STATE_Bow
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
                CurDrawableHideSubObject("arrow")
            EndScript
        End



        AnimationState        = PACKING_TYPE_2
            Animation           = CHRB
                AnimationName     = RULegolas_CHRB
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
            StateName           = STATE_TrainingStart
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
            EndScript
        End


        AnimationState        =  SPECIAL_WEAPON_ONE
            Animation           = ATKB
                AnimationName     = RULegolas_ATKB
                AnimationMode     = ONCE



            End
            FrameForPristineBonePositions = 45
            StateName           = STATE_Bow




            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
                CurDrawableShowSubObject("arrow")
            EndScript
        End


        AnimationState        =  FIRING_OR_PREATTACK_C WEAPONLOCK_SECONDARY
            Animation           = ATKB
                AnimationName     = RULegolas_ATKB
                AnimationMode     = ONCE

            End
            FrameForPristineBonePositions = 45
            StateName           = STATE_Bow
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
                CurDrawableShowSubObject("arrow")
            EndScript
        End

        AnimationState        =  FIRING_OR_PREATTACK_C WEAPONSET_TOGGLE_1
            Animation           = ATKB
                AnimationName     = RULegolas_ATKB
                AnimationMode     = ONCE
            End
            FrameForPristineBonePositions = 45
            StateName           = STATE_Bow
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
                CurDrawableShowSubObject("arrow")
            EndScript
        End

        AnimationState        =  FIRING_OR_PREATTACK_C
            Animation           = ATKB
                AnimationName     = RULegolas_ATKB
                AnimationMode     = ONCE
            End
            FrameForPristineBonePositions = 45
            StateName           = STATE_Bow
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
                CurDrawableShowSubObject("arrow")
            EndScript
        End

        AnimationState        =  SPECIAL_WEAPON_ONE WEAPONLOCK_SECONDARY
            Animation           = ATKB
                AnimationName     = RULegolas_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            FrameForPristineBonePositions = 32
            StateName           = STATE_Bow
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
            EndScript
        End

        AnimationState        = MOVING FIRING_OR_PREATTACK_A WEAPONLOCK_SECONDARY
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = RULegolas_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        =  SPECIAL_WEAPON_ONE WEAPONSET_TOGGLE_1
            Animation           = ATKB
                AnimationName     = RULegolas_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            FrameForPristineBonePositions = 32
            StateName           = STATE_Bow
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
            EndScript
        End

        AnimationState        = MOVING FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = RULegolas_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = UNPACKING WEAPONLOCK_SECONDARY
            Animation           = ATKA
                AnimationName     = RULegolas_ATKA
                AnimationMode     = ONCE
            End
            StateName           = STATE_Bow
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState        = PREPARING WEAPONLOCK_SECONDARY
            Animation
                AnimationName     = RULegolas_ATKA2
                AnimationMode     = LOOP
            End
            StateName           = STATE_Bow
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
                CurDrawableHideSubObject("arrow")
            EndScript
        End


        AnimationState        =  FIRING_OR_PREATTACK_A WEAPONLOCK_SECONDARY
            Animation           = ATKD
                AnimationName     = RULegolas_ATKD
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKE
                AnimationName     = RULegolas_ATKE
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKJ
                AnimationName     = RULegolas_ATKJ
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKK
                AnimationName     = RULegolas_ATKK
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            StateName           = STATE_Sword
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_SwitchToSwords") end
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState        =  FIRING_OR_PREATTACK_B WEAPONLOCK_SECONDARY
            Animation           = ATKD
                AnimationName     = RULegolas_ATKD
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKE
                AnimationName     = RULegolas_ATKE
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKJ
                AnimationName     = RULegolas_ATKJ
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKK
                AnimationName     = RULegolas_ATKK
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            StateName           = STATE_Sword
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_SwitchToSwords") end
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState        = UNPACKING WEAPONSET_TOGGLE_1
            Animation           = ATKA
                AnimationName     = RULegolas_ATKA
                AnimationMode     = ONCE
            End
            StateName           = STATE_Bow
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState        = PREPARING WEAPONSET_TOGGLE_1
            Animation
                AnimationName     = RULegolas_ATKA2
                AnimationMode     = LOOP
            End
            StateName           = STATE_Bow
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
                CurDrawableHideSubObject("arrow")
            EndScript
        End


        AnimationState        =  FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            Animation           = ATKD
                AnimationName     = RULegolas_ATKD
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKE
                AnimationName     = RULegolas_ATKE
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKJ
                AnimationName     = RULegolas_ATKJ
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKK
                AnimationName     = RULegolas_ATKK
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            StateName           = STATE_Sword
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_SwitchToSwords") end
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState        =  FIRING_OR_PREATTACK_B WEAPONSET_TOGGLE_1
            Animation           = ATKD
                AnimationName     = RULegolas_ATKD
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKE
                AnimationName     = RULegolas_ATKE
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKJ
                AnimationName     = RULegolas_ATKJ
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKK
                AnimationName     = RULegolas_ATKK
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            StateName           = STATE_Sword
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_SwitchToSwords") end
                CurDrawableHideSubObject("arrow")
            EndScript
        End



        AnimationState                        = PREATTACK_A
            StateName                        = STATE_Firing
            Animation                        = ReadyToDrawn
                AnimationName                = RULegolas_ATKA1
                AnimationMode                = ONCE

                AnimationBlendTime            = 10
                AnimationSpeedFactorRange    = 1.5 1.5
            End
            BeginScript
                CurDrawableShowSubObject("arrow")
            EndScript
        End

        AnimationState                        = FIRING_OR_RELOADING_A
            StateName                        = STATE_Firing
            Animation                        = OneFrameOfShooting
                AnimationName                = RULegolas_ATKA2
                AnimationMode                = ONCE

                AnimationSpeedFactorRange    = 1.0 1.0
                AnimationBlendTime            = 0
            End
            BeginScript
                CurDrawableShowSubObject("arrow")
            EndScript
        End








        AnimationState        = MOVING WEAPONLOCK_SECONDARY
            Animation           = RUNB
                AnimationName   = RULegolas_RUNB
                AnimationMode   = LOOP
                Distance        = 50
                AnimationBlendTime = 10
            End
            Flags               = RANDOMSTART

            StateName           = STATE_Sword
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_SwitchToSwordsWhileMoving") end
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState        = MOVING WEAPONSET_TOGGLE_1
            Animation           = RUNB
                AnimationName   = RULegolas_RUNB
                AnimationMode   = LOOP
                Distance        = 50
                AnimationBlendTime = 10
            End
            Flags               = RANDOMSTART

            StateName           = STATE_Sword
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_SwitchToSwordsWhileMoving") end
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState        = MOVING
            Animation           = RUNA
                AnimationName   = RULegolas_RUNA
                AnimationMode   = LOOP
                Distance        = 50
                AnimationBlendTime            = 10
            End
            Flags               = RANDOMSTART

            StateName           = STATE_Bow
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBowWhileMoving") end
                CurDrawableHideSubObject("arrow")
            EndScript
        End



        AnimationState                        = CONTINUOUS_FIRE_MEAN
            StateName                        = STATE_Firing
            Animation                        = HangFrameWhileCoasting
                AnimationName                = RULegolas_ATKA2
                AnimationMode                = MANUAL
            End
            BeginScript
                CurDrawableShowSubObject("arrow")
            EndScript
        End

        AnimationState                        = CONTINUOUS_FIRE_SLOW
            StateName                        = STATE_Idle_Bow
            Animation                        = PutAwayArrow
                AnimationName                = RULegolas_ATKA3
                AnimationMode                = ONCE
            End
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End


        AnimationState = HIT_REACTION
            Animation = Hit_Level
                AnimationName = RULegolas_HITC
                AnimationMode = ONCE
            End
        End



        AnimationState                =    SPECIAL_WEAPON_THREE
            Animation           =    CHRA
                AnimationName   =    RULegolas_CHRA
                AnimationMode   =    ONCE
                AnimationPriority    =    10
            End
            Animation           =    CHRB
                AnimationName   =    RULegolas_CHRB
                AnimationMode   =    ONCE
                AnimationPriority    =    5
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState                =    SPECIAL_WEAPON_THREE WEAPONLOCK_SECONDARY
            Animation           =    CHRA
                AnimationName   =    RULegolas_CHRA
                AnimationMode   =    ONCE
                AnimationPriority    =    10
            End
            Animation           =    CHRB
                AnimationName   =    RULegolas_CHRB
                AnimationMode   =    ONCE
                AnimationPriority    =    5
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState                =    SPECIAL_WEAPON_THREE WEAPONSET_TOGGLE_1
            Animation           =    CHRA
                AnimationName   =    RULegolas_CHRA
                AnimationMode   =    ONCE
                AnimationPriority    =    10
            End
            Animation           =    CHRB
                AnimationName   =    RULegolas_CHRB
                AnimationMode   =    ONCE
                AnimationPriority    =    5
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState                =    EMOTION_CELEBRATING
            Animation           =    CHRA
                AnimationName   =    RULegolas_CHRA
                AnimationMode   =    ONCE
                AnimationPriority    =    10
            End
            Animation           =    CHRB
                AnimationName   =    RULegolas_CHRB
                AnimationMode   =    ONCE
                AnimationPriority    =    5
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState                =    EMOTION_TAUNTING
            Animation           =    CHRB
                AnimationName   =    RULegolas_CHRB
                AnimationMode   =    ONCE
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                CurDrawableHideSubObject("arrow")
            EndScript
        End


        AnimationState               =    WEAPONLOCK_SECONDARY SELECTED
            StateName                =    KnifeFighterSelected
            Animation                =    ATNF
                AnimationName        =    RULegolas_IDLJ
                AnimationMode        =    LOOP
            End
            StateName                = SwordsAttn
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bow" or Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_SwitchToAttentionSword") end
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState               =    WEAPONSET_TOGGLE_1 SELECTED
            StateName                =    KnifeFighterSelected
            Animation                =    ATNF
                AnimationName        =    RULegolas_IDLJ
                AnimationMode        =    LOOP
            End
            StateName                = SwordsAttn
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bow" or Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_SwitchToAttentionSword") end
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState                =    RAISING_FLAG
            Animation           =    CHRA
                AnimationName   =    RULegolas_CHRA
                AnimationMode   =    ONCE
            End
            Animation           =    CHRB
                AnimationName   =    RULegolas_CHRB
                AnimationMode   =    ONCE
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                =    SELECTED
            StateName                =    Selected
            Animation                =    ATNB
                AnimationName        =    RULegolas_ATNB
                AnimationMode        =    LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_SwitchToAttention") end
                CurDrawableHideSubObject("arrow")
            EndScript
        End



        AnimationState        = WEAPONLOCK_SECONDARY
            Animation           = IDLG
                AnimationName     = RULegolas_IDLJ
                AnimationMode     = LOOP
            End
            StateName           = STATE_Sword
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_SwitchToSwords") end

                CurDrawableHideSubObject("arrow")
            EndScript
        End
        IdleAnimationState
            Animation           = IDLB
                AnimationName     = RULegolas_IDLB
                AnimationMode     = ONCE
                AnimationPriority    = 8
            End
            Animation           = IDLB
                AnimationName     = RULegolas_IDLB
                AnimationMode     = ONCE
                AnimationPriority    = 8
            End
            Animation           = IDLD
                AnimationName     = RULegolas_IDLD
                AnimationMode     = ONCE
                AnimationPriority    = 1
            End
            Animation           = IDLE
                AnimationName     = RULegolas_IDLE
                AnimationMode     = ONCE
                AnimationPriority    = 1
            End
            StateName           = STATE_Bow
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
                if Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_SwitchFromAttention") end
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState        = WEAPONSET_TOGGLE_1
            Animation           = IDLG
                AnimationName     = RULegolas_IDLJ
                AnimationMode     = LOOP
            End
            StateName           = STATE_Sword
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_SwitchToSwords") end

                CurDrawableHideSubObject("arrow")
            EndScript
        End
        IdleAnimationState
            Animation           = IDLB
                AnimationName     = RULegolas_IDLB
                AnimationMode     = ONCE
                AnimationPriority    = 8
            End
            Animation           = IDLB
                AnimationName     = RULegolas_IDLB
                AnimationMode     = ONCE
                AnimationPriority    = 8
            End
            Animation           = IDLD
                AnimationName     = RULegolas_IDLD
                AnimationMode     = ONCE
                AnimationPriority    = 1
            End
            Animation           = IDLE
                AnimationName     = RULegolas_IDLE
                AnimationMode     = ONCE
                AnimationPriority    = 1
            End
            StateName           = STATE_Bow
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
                if Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_SwitchFromAttention") end
                CurDrawableHideSubObject("arrow")
            EndScript
        End


        TransitionState       = TRANS_SwitchToBow
            Animation           = STHB
                AnimationName     = RULegolas_STHB
                AnimationMode     = ONCE
            End
        End

        TransitionState       = TRANS_SwitchToSwords
            Animation           = STHA
                AnimationName     = RULegolas_STHA
                AnimationMode     = ONCE
            End
        End

        TransitionState       = TRANS_SwitchToBowWhileMoving
            Animation           = STHB
                AnimationName     = RULegolas_RUND
                AnimationMode     = ONCE
                Distance        = 50
            End
        End

        TransitionState       = TRANS_SwitchToSwordsWhileMoving
            Animation           = STHA
                AnimationName     = RULegolas_RUNE
                AnimationMode     = ONCE
                Distance        = 50
            End
        End

        TransitionState       = TRANS_SwitchToAttentionSword
            Animation           = ATNE
                AnimationName     = RULegolas_STHA
                AnimationMode     = ONCE
            End
        End

        TransitionState       = TRANS_SwitchToAttention
            Animation           = ATNA
                AnimationName     = RULegolas_ATNA
                AnimationMode     = ONCE
            End
        End

        TransitionState       = TRANS_SwitchFromAttention
            Animation           = ATND
                AnimationName     = RULegolas_ATND
                AnimationMode     = ONCE
            End
        End
    End


    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side                        = Lothlorien
    EditorSorting               = UNIT
    ThreatLevel                 = HALDIR_THREAT_LEVEL
    ThingClass                  = CHARACTER_UNIT
    BuildCost                   = TAURIELDAG_COST
    BuildTime                   = WEAK_HERO_BUILDTIME
    TransportSlotCount          = TRANSPORTSLOTCOUNT_HERO
    VisionRange                 = VISION_HERO_RANGED
    ShroudClearingRange         = SHROUD_CLEAR_RANGED_HERO
    MaxVisionBonusPercent       = 300%
    VisionBonusTestRadius       = 200
    VisionBonusPercentPerFoot   = 1.0%
    MaxSimultaneousOfType       = 1
    BountyValue                 = ELVEN_HALDIR_BOUNTY_VALUE
    RecruitText                 = CONTROLBAR:TaurielRecruit
    ReviveText                  = CONTROLBAR:TaurielRevive
    Hotkey                      = CONTROLBAR:TaurielHotkey
    DisplayName                 = OBJECT:LothlorienTauriel
    CrushableLevel              = 2
    CommandSet                  = LothlorienTaurielCommandSet_WOTR
    CommandPoints               = 0
    DisplayMeleeDamage          = TAURIELDAG_DAMAGE
    DisplayRangedDamage         = TAURIELDAG_DAMAGE


    WeaponSet
        Conditions           = None
        Weapon               = PRIMARY      TaurielBow
        Weapon               = SECONDARY    TaurielSword
        AutoChooseSources    = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
        AutoChooseSources    = SECONDARY NONE
    End

    WeaponSet
        Conditions           = WEAPONSET_TOGGLE_1
        Weapon               = PRIMARY      TaurielSword
        AutoChooseSources    = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = WeakHeroArmor
        DamageFX        = NormalDamageFX
    End

    ArmorSet
        Conditions      = PLAYER_UPGRADE
        Armor           = MediumHeroArmor
        DamageFX        = NormalDamageFX
    End


    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_HaldirBody

    AutoResolveArmor
        Armor = AutoResolve_HaldirArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_HaldirWeapon
    End



            VoiceAttack                             = TaurielVoiceAttack
            VoiceAttackAir                          = TaurielVoiceAttack
            VoiceAttackCharge                       = TaurielVoiceAttack
            VoiceAttackMachine                      = TaurielVoiceAttack
            VoiceAttackStructure                    = TaurielVoiceAttack
            VoiceCreated                            = TaurielVoiceRecruit
            VoiceFear                               = TaurielVoiceHelp
            VoiceFullyCreated                       = TaurielVoiceRecruit
            VoiceGuard                              = TaurielVoiceMove
            VoiceMove                               = TaurielVoiceMove
            VoiceMoveToCamp                         = TaurielVoiceMove
            VoiceMoveWhileAttacking                 = TaurielVoiceMove
            VoicePriority                           = 85
            VoiceRetreatToCastle                    = TaurielVoiceMove
            VoiceSelect                             = TaurielVoiceSelect
            VoiceSelectBattle                       = TaurielVoiceSelect

            SoundImpact                             = ImpactHorse

            UnitSpecificSounds
                VoiceEnterUnitElvenTransportShip    = TaurielVoiceMove
                VoiceEnterUnitMordorMumakil         = TaurielVoiceMove
                VoiceEnterUnitSlaughterHouse        = TaurielVoiceMove
                VoiceEnterUnitTransportShip         = TaurielVoiceMove
                VoiceGarrison                       = TaurielVoiceMove
                VoiceInitiateCaptureBuilding        = TaurielVoiceMove
            End

    CrowdResponseKey = ElfHero

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key    = Humanoid_Male Elf Elf_Male Unit Infantry Hero
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:FootstepDirtA             Animation:RULegolas_SKL.RULegolas_RUNA    Frames:9 19
        AnimationSound = Sound:FootstepDirtA             Animation:RULegolas_SKL.RULegolas_RUNB    Frames:9 19
        AnimationSound = Sound:FootstepDirtA             Animation:RULegolas_SKL.RULegolas_RUND    Frames:9 20
        AnimationSound = Sound:FootstepDirtA             Animation:RULegolas_SKL.RULegolas_RUNE    Frames:8 19

        AnimationSound = Sound:WeaponSwitchBowForLegolas     Animation:RULegolas_SKL.RULegolas_ATKB    Frames:0
        AnimationSound = Sound:WeaponSwitchBowForLegolas    Animation:RULegolas_SKL.RULegolas_ATKA1    Frames:0

        AnimationSound = Sound:BodyFallSoldier            Animation:RULegolas_SKL.RULegolas_LNDA    Frames:0
        AnimationSound = Sound:BodyFallSoldier            Animation:RULegolas_SKL.RULegolas_LNDB    Frames:0

        AnimationSound = Sound:BodyFallGenericNoArmor         Animation:RULegolas_SKL.RULegolas_DIEA    Frames:48
        AnimationSound = Sound:BodyFallGenericNoArmor         Animation:RULegolas_SKL.RULegolas_DIEB    Frames:89
        AnimationSound = Sound:BodyFallGenericNoArmor         Animation:RULegolas_SKL.RULegolas_DIEC    Frames:64
    End





    RadarPriority                           = UNIT
    KindOf                                  = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT ARMY_SUMMARY ATTACK_NEEDS_LINE_OF_SIGHT HEAVY_MELEE_HITTER
    CamouflageDetectionMultiplier           = CAMOUFLAGE_DETECTION_DISTANCE_MEDIUM
    PathfindDiameter                        = 40.0


    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius                         = EMOTION_CHEER_RADIUS
        MaxHealth                           = TAURIELDAG_HEALTH
        PermanentlyKilledByFilter           = NONE
        DodgePercent                        = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                            = DYING
        DeathAnimationTime                   = 3000
        RespawnAnim                          = LEVELED
        RespawnAnimationTime                 = 2000
        AutoRespawnAtObjectFilter            = NONE +CASTLE_KEEP
        ButtonImage                          = HITaurielne
        RespawnRules =    AutoSpawn:No           Cost:TAURIELDAG_COST       Time:WEAK_HERO_RESPAWNTIME        Health:100%
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance               = 200
        TauntAndPointUpdateDelay            = 10000
        PointAt                             = ANY +HERO
        AddEmotion            =    Doom_Base
        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
        AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base
        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End

    Behavior = AutoHealBehavior ModuleTag_LegolasHealing
        StartsActive                        = Yes
        HealingAmount                       = HERO_HEAL_AMOUNT
        HealingDelay                        = 1000
        StartHealingDelay                   = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat               = Yes
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate              = Hero
    End

    #include "..\..\..\includes\CaptureBuilding.inc"

    #include "..\..\..\includes\DefaultInvisibilityUpdate.inc"

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle           = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate                  = 500
        CanAttackWhileContained              = Yes
    End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1                = 1500
        HitReactionThreshold1                = 400
        FastHitsResetReaction                = Yes
    End

    Behavior = InvisibilityUpdate ModuleTag_StealthForEscape
        InvisibilityNugget
            InvisibilityType        = STEALTH
            ForbiddenConditions     = USING_ABILITY
            BecomeStealthedFX       = FX_WormtongueEscapeOn
            ExitStealthFX           = FX_WormtongueEscapeOff
        End
        StartsActive                = No
        UpdatePeriod                = 2000
    End

    Behavior = GrantUpgradeCreate ModuleTag_EnableHK
        UpgradeToGrant              = Upgrade_TaurielArrive
        GiveOnBuildComplete         = Yes
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership2
        SpecialPowerTemplate           = SpecialAbilityFakeLeadership
        TriggeredBy                    = Upgrade_Level_3
    End

    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate2
        SpecialPowerTemplate           = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack       = No
        StartsPaused                   = Yes
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership2
        StartsActive                   = Yes
        BonusName                      = TaurielLeadershipBouns
        TriggeredBy                    = Upgrade_Level_3
        RefreshDelay                   = 2000
        Range                          = 200
        AntiCategory                   = BUFF
        ObjectFilter                   = ANY -INFANTRY -CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO +LorienMirkwoodArcherHorde_Summoned +MirkwoodArcher +MirkwoodArcherHorde ALLIES
    End






    Behavior = WeaponModeSpecialPowerUpdate ModuleTag_AnfuhrerinFighterPowerUpdate
        SpecialPowerTemplate         = SpecialAbilityTaurielBowFighter
        Duration                     = 30000
        AttributeModifier            = TaurielBowFighterBonus
        LockWeaponSlot               = SECONDARY
        StartsPaused                 = No
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership
        SpecialPowerTemplate           = SpecialAbilityFakeLeadership2
        TriggeredBy                    = Upgrade_Level_5
    End

    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate
        SpecialPowerTemplate           = SpecialAbilityFakeLeadership2
        UpdateModuleStartsAttack       = No
        StartsPaused                   = Yes
    End

    Behavior = ArmorUpgrade ArmorUpgradeModuleTag
        TriggeredBy = Upgrade_Level_5
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AnspringenUnpause
        SpecialPowerTemplate                = SpecialAbilityTaurielAnspringen
        TriggeredBy                         = Upgrade_Level_7
    End

    Behavior = SpecialPowerModule ModuleTag_AnspringenSpecialPower
        SpecialPowerTemplate                = SpecialAbilityTaurielAnspringen
        StartsPaused                        = Yes
        UpdateModuleStartsAttack            = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_HaldirGoldenArrowWeaponFireUpdate
        SpecialPowerTemplate                = SpecialAbilityTaurielAnspringen
        WhichSpecialWeapon                  = 1
        UnpackTime                          = 600
        PreparationTime                     = 1
        PackTime                            = 2000
        StartAbilityRange                   = 200
        MustFinishAbility                   = Yes
        SpecialWeapon                       = TaurielAnspringenWeapon
    End

    Behavior = AutoAbilityBehavior ModuleTag_GoldenArrowAutoAbility
        SpecialAbility                      = SpecialAbilityTaurielAnspringen
        MaxScanRange                        = 300
        Query                               = 1 ANY ENEMIES +HERO +MONSTER
    End





    ; Behavior = UnpauseSpecialPowerUpgrade ModuleTag_DasistunserKampfEnabler
        ; SpecialPowerTemplate         = SpecialAbilityTaurielDasistunserKampf
        ; TriggeredBy                  = Upgrade_Level_10
    ; End

    ; Behavior = SpecialPowerModule ModuleTag_DasistunserKampfUpdate
        ; SpecialPowerTemplate         = SpecialAbilityTaurielDasistunserKampf
        ; UpdateModuleStartsAttack     = Yes
        ; StartsPaused                 = Yes
        ; AttributeModifier            = DasistunserKampfModifier
        ; AttributeModifierRange       = 1000000
        ; AttributeModifierAffectsSelf = Yes
        ; AttributeModifierAffects     = ANY +LothlorienCeleborn +LothlorienRumil +LothlorienOrophin +LothlorienLegolas +ElvenThranduil_mod +LothlorienHaldir +LothlorienGaladriel ALLIES
        ; AttributeModifierFX          = FX_TaurielKnifeMode
    ; End

    ; Behavior = SpecialAbilityUpdate ModuleTag_DasistunserKampfAnimation
        ; UnpackTime                   = 0
        ; UnpackingVariation           = 1
        ; SpecialPowerTemplate         = SpecialAbilityTaurielDasistunserKampf
        ; PreparationTime              = 0
        ; PersistentPrepTime           = 0
        ; PackTime                     = 0
    ; End
	
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FesteEnabler
        SpecialPowerTemplate    = SpecialAbilityFestplatzMirkwood
        TriggeredBy             = Upgrade_Level_10
        ObeyRechageOnTrigger    = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_FesteOCLSpecialPower
        SpecialPowerTemplate    = SpecialAbilityFestplatzMirkwood
        OCL                     = OCL_SummonFestplatzMirkwood
        TriggerFX               = FX_ThranduilFestplatzSummon
        CreateLocation          = CREATE_AT_LOCATION
        StartsPaused            = Yes
    End


    LocomotorSet
        Locomotor                            = HumanLocomotor
        Condition                            = SET_NORMAL
        Speed                                = NORMAL_ELVEN_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor                            = HumanWanderLocomotor
        Condition                            = SET_WANDER
        Speed                                = NORMAL_ELVEN_FAST_MEMBER_SPEED
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult                            = 1.0
        ShockStandingTime                    = 2000
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes                          = ALL -FADED
        SinkDelay                           = 3000
        SinkRate                            = 0.5
        DestructionDelay                    = 15000
        Sound                               = INITIAL TaurielVoiceDie
        DeathFlags                          = DEATH_1
    End

    Behavior = SquishCollide ModuleTag_06
    End

    Behavior = BezierProjectileBehavior ModuleTag_08
        FirstHeight         = 50
        SecondHeight        = 20
        FirstPercentIndent  = 20%
        SecondPercentIndent = 70%
        TumbleRandomly      = Yes
        CrushStyle          = Yes
        BounceCount         = 0
        FinalStuckTime      = 0
        GroundHitFX         = FX_GimliLeapNoVoice
        GroundHitWeapon     = TaurielAnspringenWeaponWarhead
        PreLandingStateTime = 75
    End


    Behavior            = SlowDeathBehavior ModuleTag_SlowDeathWithoutRubble
        DestructionDelay = 1000
        Weapon           = FINAL TaurielEnemyNearWeapon
    End

    Behavior = FireWeaponUpdate ModuleTag_WeaponFiring
        FireWeaponNugget
            WeaponName = TaurielHealWeapon
            Offset     = X:0 Y:0 Z:0
            FireDelay  = 0
            OneShot    = No
        End
    End


    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate ElvenLorienWarriorHordeCaptureBuildingAI
        CommandButtonName  = Command_CaptureBuilding
        SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
    End

    Behavior = AISpecialPowerUpdate KnifeFighterAI
        CommandButtonName = Command_TaurielBowFightingMode
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate GoldenArrowAI
        CommandButtonName = Command_SpecialAbilityTaurielAnspringen
        SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
        SpecialPowerRadius = 250
    End

    Behavior = AISpecialPowerUpdate SpecialPowerTheodenGiveXPAoE
        CommandButtonName = Command_SpecialAbilityTaurielDasistunserKampf
        SpecialPowerAIType = AI_SPECIAL_POWER_GIVEXP_AOE
        SpecialPowerRadius = 30.0
    End

    Scale 		= 0.94
    Geometry            = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryHeight      = 19.2
    GeometryIsSmall     = Yes
    Shadow              = SHADOW_DECAL
    ShadowSizeX         = 19
    ShadowSizeY         = 19
    ShadowTexture       = ShadowI
End


ChildObject LothlorienTauriel_Summoned LothlorienTauriel
    IsTrainable   = No
    CommandPoints = 0
    EquivalentTo  = LothlorienTauriel
    CommandSet    = LothlorienTaurielCommandSet_Summoned
    MaxSimultaneousOfType    = 1

    KindOf = +SUMMONED

    Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
        LevelToGrant         = 10
        MPOnly               = Yes
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = 120000
        MaxLifetime        = 120000
        DeathType          = FADED
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 2500
        DestructionDelay = 2500
        Sound = INITIAL SpellGenericUnsummonFasterMS
        DeathFlags = DEATH_2
    End
End