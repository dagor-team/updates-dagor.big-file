Object LothlorienGilGalad

    SelectPortrait  = HPGilGalad
    ButtonImage     = HIGilGalad

        Draw = W3DHordeModelDraw ModuleTag_01
        OkToChangeModelColor = No

        StaticModelLODMode = No

        DefaultModelConditionState
            Model               = EUGilGalad_skn
            Skeleton            = GUTowerGrd_SKL
        End

        ModelConditionState = WEAPONSET_HERO_MODE
            ParticleSysBone = None GilGaladStars FollowBone:Yes
            ParticleSysBone = None GilGaladGlow FollowBone:Yes
        End
		
		
		ModelConditionState          = USER_8
            Model               = EUGilGalad_skn
            Skeleton            = GUTowerGrd_SKL
            ParticleSysBone = None GilGaladStars FollowBone:Yes
            ParticleSysBone = None GilGaladGlow FollowBone:Yes
        End
		
		

        ModelConditionState = ONE_RING
            Model           = EUGilGalad_skn
            Skeleton        = GUTowerGrd_SKL
            Texture         = eagilgalad.tga eagilgaladring.tga
            ParticleSysBone = None GilGaladRingFlare FollowBone:Yes
            ParticleSysBone = B_HANDR SaronRingSpark FollowBone:Yes
        End

        ModelConditionState = WEAPONSET_HERO_MODE ONE_RING
            ParticleSysBone = BAT_RIBS GilGaladSternenschildGlow FollowBone:Yes
            ParticleSysBone = BAT_RIBS GilGaladSternenschildGlowWhite FollowBone:Yes
            ParticleSysBone = None GilGaladRingFlare FollowBone:Yes
            ParticleSysBone = B_HANDR SaronRingSpark FollowBone:Yes
        End


        AnimationState        = THROWN_PROJECTILE
            Animation           = FLYA
                AnimationName     = GUTowerGrd_FLYA
                AnimationMode     = LOOP
            End
        End

        AnimationState                            = PASSENGER FREEFALL
            Animation                            = Grabbed
                AnimationName                    = GUTowerGrd_FLLA
                AnimationMode                    = LOOP
            End
        End

        AnimationState                            = FREEFALL
            Animation                            = Falling
                AnimationName                    = GUTowerGrd_FLYA
                AnimationMode                    = LOOP
                AnimationBlendTime                = 10
            End
        End

        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = GUTowerGrd_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = MOVING WEAPONSET_HERO_MODE

            Animation           = RUNA
                AnimationName     = GUTowerGrd_PSHA
                AnimationMode     = LOOP
            End
            Flags               = RANDOMSTART
            ParticleSysBone     = None InfantryDustTrails
        End

        AnimationState        =  FIRING_OR_PREATTACK_A WEAPONSET_HERO_MODE
            Animation           = ATKA
                AnimationName     = GUTowerGrd_ATKA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.328 1.328

            End

            Flags    = RESTART_ANIM_WHEN_COMPLETE
            FXEvent    = Frame:25 Name: FX_BladeMasterHitOrient
            FXEvent    = Frame:45 Name: FX_BladeMasterHitOrient
        End

        AnimationState                    = SELECTED WEAPONSET_HERO_MODE

            StateName                = STATE_Selected
            Animation                = IDLB
                AnimationName            = GUTowerGrd_IDLB
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = WEAPONSET_HERO_MODE
            StateName                = STATE_Selected

            Animation                = IDLB
                AnimationName            = GUTowerGrd_IDLB
                AnimationMode            = LOOP
            End
        End




        AnimationState                    = MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY
            ShareAnimation                = Yes
            Animation                    = TerrorFromTheSky
                AnimationName            = GUTowerGrd_RUNB
                AnimationMode            = LOOP
            End
        End
        AnimationState                    = MOVING EMOTION_TERROR
            ShareAnimation                = Yes
            Animation                    = Terror
                AnimationName            = GUTowerGrd_RUNB
                AnimationMode            = LOOP
            End
        End


        AnimationState                =    MOVING BACKING_UP
            ShareAnimation = Yes
            Animation                =    BackingUp
                AnimationName        =    GUTowerGrd_BAKA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End


        AnimationState        = MOVING ALTERNATE_FORMATION
            ShareAnimation = Yes
            Animation           = RUNA
                AnimationName     = GUTowerGrd_PSHA
                AnimationMode     = LOOP
            End
            Flags               = RANDOMSTART

        End

        AnimationState        = MOVING USING_COMBO_LOCOMOTOR
            ShareAnimation        = Yes
            Animation           = RUNA
                AnimationName     = GUTowerGrd_WLKA
                AnimationMode     = LOOP
                Distance          = 40
            End
            Flags               = RANDOMSTART

        End

        AnimationState        = MOVING
            ShareAnimation = Yes
            Animation           = RUNA
                AnimationName     = GUTowerGrd_RUNA
                AnimationMode     = LOOP
            End
            Flags               = RANDOMSTART

        End

        AnimationState        =  FIRING_OR_PREATTACK_A
            Animation           = ATKA
                AnimationName     = EUGilGalad_ATKA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.328 1.328

            End

            Animation           = ATKB
                AnimationName     = GUTowerGrd_ATKA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.15 1.15

            End

            Animation           = ATKC
                AnimationName     = EUGilGalad_ATKB
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.1 1.1

            End

        End



        AnimationState        = UNPACKING PACKING_TYPE_1
            Animation           = CHRA
                AnimationName     = GUTowerGrd_CHRA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = PREPARING PACKING_TYPE_1
            Animation           = ATKA1
                AnimationName     = GUTowerGrd_ATKA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = STUNNED_FLAILING
            Animation           = FLYA
                AnimationName     = GUTowerGrd_FLYA
                AnimationMode     = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = DYING SPLATTED DEATH_1
            Animation           = LNDA
                AnimationName     = GUTowerGrd_LNDB
                AnimationMode     = ONCE
            End
        End


        AnimationState        = DYING DEATH_1
            Animation           = DIEA
                AnimationName     = GUTowerGrd_DIEA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
        End

        AnimationState        = DYING DEATH_2
            Animation           = ByeBye
                AnimationName     = GUTowerGrd_IDLA
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
            End
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = GTPA
                AnimationName     = GUTowerGrd_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState        = STUNNED
            Animation           = LNDA
                AnimationName     = GUTowerGrd_LNDB
                AnimationMode     = ONCE
            End
        End

        TransitionState       = TRANS_Plant
            Animation           = PLTA
                AnimationName     = GUTowerGrd_PLTA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
        End

        TransitionState       = TRANS_Unplant
            Animation           = PLTB
                AnimationName     = GUTowerGrd_PLTB
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 0.5 1.2
            End
        End

        AnimationState                        = HIT_REACTION
            Animation                        = HIT REACTION
                AnimationName                = GUTowerGrd_HITA
                AnimationMode                = ONCE
            End
        End


        AnimationState                    = EMOTION_ALERT EMOTION_AFRAID
            ShareAnimation                = Yes
            Animation                    = Apprehensive
                AnimationName            = GUTowerGrd_APPA
                AnimationMode            = LOOP
            End
        End



        AnimationState                    = EMOTION_AFRAID
            ShareAnimation                = Yes
            Animation                    = FERA
                AnimationName            = GUTowerGrd_FERA
                AnimationMode            = LOOP
            End
            Animation                    = FERB
                AnimationName            = GUTowerGrd_FERB
                AnimationMode            = LOOP
            End
        End



        AnimationState                    = EMOTION_TAUNTING ALTERNATE_FORMATION
            Animation                    = TNTA
                AnimationName            = GUTowerGrd_TNTA
                AnimationMode            = LOOP
            End
        End
        AnimationState                    = EMOTION_TAUNTING
            Animation                    = Taunting
                AnimationName            = GUTowerGrd_TNTA
                AnimationMode            = ONCE
            End
            Animation                    = Taunting2
                AnimationName            = GUTowerGrd_TNTB
                AnimationMode            = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End



        AnimationState                    = EMOTION_POINTING
            Animation                    = Pointing1
                AnimationName            = GUTowerGrd_PNTA
                AnimationMode            = LOOP
            End
            Flags                        = RANDOMSTART
        End



        AnimationState                    = EMOTION_CELEBRATING
            Animation                    = CHRA
                AnimationName            = GUTowerGrd_CHRA
                AnimationMode            = LOOP
            End
        End


        AnimationState                    = EMOTION_ALERT
            Animation                    = CHRA
                AnimationName            = GUTowerGrd_IDLA
                AnimationMode            = LOOP
            End
        End




        AnimationState                    = SELECTED ALTERNATE_FORMATION
            ShareAnimation                = Yes
            StateName                    = STATE_SelectedAlternateFormation
            Animation                    = IDLB
                AnimationName            = GUTowerGrd_IDLB
                AnimationMode            = LOOP
            End
        End
        AnimationState                    = SELECTED
            StateName                    = STATE_Selected

            ShareAnimation                = Yes
            Animation                    = ATNB
                AnimationName            = GUTowerGrd_ATNB
                AnimationMode            = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Planted" then CurDrawableSetTransitionAnimState("TRANS_Unplant") end
            EndScript
        End



        AnimationState                    = ALTERNATE_FORMATION
            StateName                    = STATE_SelectedAlternateFormation

            ShareAnimation                = Yes
            Animation                    = IDLB
                AnimationName            = GUTowerGrd_IDLB
                AnimationMode            = LOOP
            End
        End
        IdleAnimationState
            StateName                    = STATE_Idle
            Animation                    = IDLA
                AnimationName            = GUTowerGrd_IDLA
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                    = IDLA
                AnimationName            = GUTowerGrd_IDLA
                AnimationMode            = ONCE_BACKWARDS
                AnimationBlendTime        = 9
                AnimationSpeedFactorRange = 0.8 1.2
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Planted" then CurDrawableSetTransitionAnimState("TRANS_Unplant") end
            EndScript
        End



    End


    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side = Lothlorien
    EditorSorting = UNIT
    ThreatLevel = BOROMIR_THREAT_LEVEL
    ThingClass = CHARACTER_UNIT
    BuildCost         = GILGALADDAG_COST
    BuildTime = SILMARIL_HERO_BUILDTIME
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG
    DisplayMeleeDamage = GILGALADDAG_DAMAGE
    MaxSimultaneousOfType    = 1
    BountyValue = 2500

    TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT

    WeaponSet
        Conditions = None
        Weapon     = PRIMARY    GilGaladSpear
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions = WEAPONSET_HERO_MODE
        Weapon     = PRIMARY    GilGaladSpear
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions = WEAPONSET_TOGGLE_1
        Weapon     = PRIMARY    GilGaladWeapon
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions    = WEAPONSET_TOGGLE_2
        Weapon        = PRIMARY    GilGaladSpear
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = VeryStrongHeroArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange = 300
    ShroudClearingRange = 200
    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 2.0%
    DisplayName    = OBJECT:LothlorienGilGalad
    Hotkey         = CONTROLBAR:LothlorienGilGaladHotkey
    RecruitText    = CONTROLBAR:LothlorienGilGaladRecruit
    ReviveText     = CONTROLBAR:LothlorienGilGaladRevive
    CrushableLevel = 3

    CrushRevengeWeapon = SuperInfantryCrushRevenge

    CommandSet = GilGaladCommandSet
	CommandPoints = 0



    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_ElrondBody

    AutoResolveArmor
        Armor = AutoResolve_ElrondArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_ElrondWeapon
    End

    AutoResolveLeadership = AutoResolve_ElrondBonus

    CrowdResponseKey = GoodMen



    VoiceAttack                                 = GilGaladVoiceAttack
    VoiceAttackAir                                = GilGaladVoiceAttack
    VoiceAttackCharge                             = GilGaladVoiceAttack
    VoiceAttackMachine                             = GilGaladVoiceAttack
    VoiceAttackStructure                         = GilGaladVoiceAttack
    VoiceCreated                                = GilGaladVoiceSalute
    VoiceFullyCreated                             = GilGaladVoiceSalute
    VoiceFear                                    = GilGaladVoiceHelpme
    VoiceGuard                                    = GilGaladVoiceMove
    VoiceMove                                     = GilGaladVoiceMove
    VoiceMoveToCamp                             = GilGaladVoiceMove
    VoicePriority                                = 90
    VoiceSelect                                 = GilGaladVoiceSelect
    VoiceSelectBattle                              = GilGaladVoiceSelect

    SoundImpact                                 = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitElvenTransportShip        = GilGaladVoiceMove
        VoiceGarrison                            = GilGaladVoiceMove
        VoiceInitiateCaptureBuilding            = GilGaladVoiceMove
    End

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:RAISING_FLAG            Excluded:DYING ENGAGED    Sound:EmotionMenGoodCompilationBFME1and2VoxTauntSinglesLoop
    End


    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Man Man_Male Unit Infantry Gondor_Guard
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:TauntHitShieldPitchShifted    Animation:GUTwrGrd_SKL.GUTwrGrd_TNTB    Frames: 23 43
        AnimationSound = Sound:BodyFallGeneric1        Animation:GUTWRGRD_SKL.GUTWRGRD_DIEA    Frames:30 51
        AnimationSound = Sound:BodyFallGeneric1        Animation:GUTWRGRD_SKL.GUTWRGRD_DIEB    Frames:57
        AnimationSound = Sound:BodyFallGeneric1        Animation:GUTWRGRD_SKL.GUTWRGRD_DIEC    Frames:38
        AnimationSound = Sound:BodyFallSoldier        Animation:GUTWRGRD_SKL.GUTWRGRD_LNDA    Frames:4
        AnimationSound = Sound:BodyFallSoldier        Animation:GUTwrGrd_SKL.GUTwrGrd_LNDB    Frames:2
    End


    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT CANNOT_RETALIATE HERO ARMY_SUMMARY
    CamouflageDetectionMultiplier = CAMOUFLAGE_DETECTION_DISTANCE_MEDIUM

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        CanAttackWhileContained    = Yes
        AILuaEventsList            = GilGaladFunctions
    End

    LocomotorSet
        Locomotor = GondorTowerShieldGuardLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_FOOT_IMLADRIS_MEMBER_SPEED
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult              = 1.0
        ShockStunnedTimeLow      = 1400
        ShockStunnedTimeHigh     = 2400
        ShockStandingTime        = 1333
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -FADED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL GilGaladVoiceDie
        DeathFlags = DEATH_1
    End

    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius                 = EMOTION_CHEER_RADIUS
        MaxHealth                   = GILGALADDAG_HEALTH
        PermanentlyKilledByFilter   = NONE
        DodgePercent                = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                    = DYING
        DeathAnimationTime           = 3000
        RespawnAnim                  = LEVELED
        RespawnAnimationTime         = 2000
        AutoRespawnAtObjectFilter    = NONE +CASTLE_KEEP
        ButtonImage                  = HIGilGalad
        RespawnRules =    AutoSpawn:No           Cost:GILGALADDAG_COST       Time:SILMARIL_HERO_RESPAWNTIME        Health:100%
	End

   
	Behavior = CitadelSlaughterHordeContain ModuleTag_SlaughterMe
        PassengerFilter              = NONE +TheDroppedRing
        ObjectStatusOfContained      = UNSELECTABLE ENCLOSED
        ContainMax                   = 1
        AllowEnemiesInside           = No
        AllowAlliesInside            = Yes
        AllowNeutralInside           = No
        AllowOwnPlayerInsideOverride = Yes
        EntryOffset                  = X:0.0 Y:0.0 Z:0.0
        EntryPosition                = X:0.0 Y:0.0 Z:0.0
        ExitOffset                   = X:0.0 Y:0.0 Z:0.0
        StatusForRingEntry           = HOLDING_THE_RING
        UpgradeForRingEntry          = Upgrade_RingHero Upgrade_FortressRingHero
        ObjectToDestroyForRingEntry  = NONE +TheDroppedRing
        FXForRingEntry               = FX_OneRingFlare
    End

    Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
        SkirmishAIOnly = Yes
        StuffToPickUp = NONE +TheDroppedRing
        ScanRange = 3000
        ScanIntervalSeconds = 0.5
    End

    
    Behavior = SpecialPowerModule ModuleTag_GeprufteStarter
         SpecialPowerTemplate           = SpecialAbilityGandalfGeprufte
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Geprufte
         SpecialPowerTemplate           = SpecialAbilityGandalfGeprufte
         MountedTemplate                = LothlorienGilGaladRing
         SynchronizeTimerOnSpecialPower = SpecialAbilityVilya SpecialAbilityTheodenGloriousCharge6 SpecialAbilityGilgaladsBodyguard SpecialAbilityGilgaladAeglosSnow tpurroCsIeHhsuBkcuF SpecialAbilityGlorfindelStarlight SpecialAbilityAragornBladeMaster SpecialAbilityGilgaladSpearThrust
         UnpackTime                     = OBJECT_TOGGLE_TIME
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End

    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy                     = Upgrade_RingHero
        GetUpgradeCommandButtonName     = Command_SpecialAbilityGlorfindelRingSwitch
    End

    Behavior = ProductionUpdate ProductionUpdateModuleTag
        GiveNoXP = Yes
    End

	Behavior = CommandSetUpgrade ModueTag_CommandSetKing
        TriggeredBy   = Upgrade_PurchaseHouseofTheGoldenFlowerGilgalad
        CommandSet    = GilGaladHighKingCommandSet_Crowned
    End
	
	Behavior = CommandSetUpgrade ModueTag_CommandSetKing2
        TriggeredBy   = Upgrade_PurchaseHouseofTheSilverFountGilgalad
        CommandSet    = GilGaladHighKingCommandSet_Crowned
    End
	
	Behavior = GrantUpgradeCreate ModuleTag_VoraussetzungKrone
        UpgradeToGrant      = Upgrade_HerrinLicht
        GiveOnBuildComplete = Yes
    End
	
	Behavior = AttributeModifierUpgrade ModuleTag_SwordBonus
        TriggeredBy = Upgrade_ZwillingeWaffeSchmieden
        AttributeModifier = SchmiedekunstderZwillingeBruchtalsGilgalad
    End
	
; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy = Upgrade_Level_1
    End

    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = Yes
        StartsPaused = No
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership
        StartsActive     = Yes
        BonusName        = GilGaladHoherKonigLeadership
        TriggeredBy      = Upgrade_Level_1
        RefreshDelay     = 2000
        Range            = 200
        ObjectFilter     = ANY +BruchtalLanzer +ImladrisSwordMan +ImladrisWaffenmeister +Bruchtalwachter  -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES
    End

; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_GilGaladBodyGuardsArmor
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy = Upgrade_Level_1
    End

    Behavior = SpecialPowerModule ModuleTag_GilGaladBodyGuardsArmorUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = Yes
        StartsPaused = No
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_GilGaladBodyGuardsArmorLeadership
        StartsActive     = Yes
        BonusName        = GilGaladBodyGuardsArmor2
        TriggeredBy      = Upgrade_Level_1
        RefreshDelay     = 2000
        Range            = 1000000000000
        ObjectFilter     = ANY +LothlorienBerserkerHorde +LothlorienBerserker +LothlorienBerserkerHordeShieldWall ALLIES
    End


; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

    Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership2
        StartsActive              = Yes
        BonusName                 = ElrondScale1
        TriggeredBy               = Upgrade_Level_1
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = IMLADRIS2_LEADERSHIP_UNITS_OBF 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership3
        StartsActive              = No
        BonusName                 = ElrondScale2
        TriggeredBy               = Upgrade_Level_2
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = IMLADRIS2_LEADERSHIP_UNITS_OBF 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership4
        StartsActive              = No
        BonusName                 = ElrondScale3
        TriggeredBy               = Upgrade_Level_3
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = IMLADRIS2_LEADERSHIP_UNITS_OBF 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership5
        StartsActive              = No
        BonusName                 = ElrondScale4
        TriggeredBy               = Upgrade_Level_4
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = IMLADRIS2_LEADERSHIP_UNITS_OBF 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership6
        StartsActive              = No
        BonusName                 = ElrondScale5
        TriggeredBy               = Upgrade_Level_5
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = IMLADRIS2_LEADERSHIP_UNITS_OBF 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership7
        StartsActive              = No
        BonusName                 = ElrondScale6
        TriggeredBy               = Upgrade_Level_6
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = IMLADRIS2_LEADERSHIP_UNITS_OBF 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership8
        StartsActive              = No
        BonusName                 = ElrondScale7
        TriggeredBy               = Upgrade_Level_7
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = IMLADRIS2_LEADERSHIP_UNITS_OBF 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership9
        StartsActive              = No
        BonusName                 = ElrondScale8
        TriggeredBy               = Upgrade_Level_8
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = IMLADRIS2_LEADERSHIP_UNITS_OBF 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership10
        StartsActive              = No
        BonusName                 = ElrondScale9
        TriggeredBy               = Upgrade_Level_9
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = IMLADRIS2_LEADERSHIP_UNITS_OBF 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

    Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership2_VET
        StartsActive              = Yes
        BonusName                 = ElrondVetScale1
        TriggeredBy               = Upgrade_Level_1
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = ANY +BruchtalVeteran +BruchtalVeteran_summon -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership3_VET
        StartsActive              = No
        BonusName                 = ElrondVetScale2
        TriggeredBy               = Upgrade_Level_2
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = ANY +BruchtalVeteran +BruchtalVeteran_summon -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership4_VET
        StartsActive              = No
        BonusName                 = ElrondVetScale3
        TriggeredBy               = Upgrade_Level_3
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = ANY +BruchtalVeteran +BruchtalVeteran_summon -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership5_VET
        StartsActive              = No
        BonusName                 = ElrondVetScale4
        TriggeredBy               = Upgrade_Level_4
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = ANY +BruchtalVeteran +BruchtalVeteran_summon -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership6_VET
        StartsActive              = No
        BonusName                 = ElrondVetScale5
        TriggeredBy               = Upgrade_Level_5
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = ANY +BruchtalVeteran +BruchtalVeteran_summon -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership7_VET
        StartsActive              = No
        BonusName                 = ElrondVetScale6
        TriggeredBy               = Upgrade_Level_6
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = ANY +BruchtalVeteran +BruchtalVeteran_summon -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership8_VET
        StartsActive              = No
        BonusName                 = ElrondVetScale7
        TriggeredBy               = Upgrade_Level_7
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = ANY +BruchtalVeteran +BruchtalVeteran_summon -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership9_VET
        StartsActive              = No
        BonusName                 = ElrondVetScale8
        TriggeredBy               = Upgrade_Level_8
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = ANY +BruchtalVeteran +BruchtalVeteran_summon -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership10_VET
        StartsActive              = No
        BonusName                 = ElrondVetScale9
        TriggeredBy               = Upgrade_Level_9
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = ANY +BruchtalVeteran +BruchtalVeteran_summon -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_IsildurNarsilEnabler
        SpecialPowerTemplate      = SpecialAbilityGilgaladSpearThrust
        TriggeredBy               = Upgrade_Level_4
        ObeyRechageOnTrigger      = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_IsildurNarsilStarter
        SpecialPowerTemplate      = SpecialAbilityGilgaladSpearThrust
        UpdateModuleStartsAttack  = Yes
        StartsPaused              = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_IsildurNarsilUpdate
        SpecialPowerTemplate      = SpecialAbilityGilgaladSpearThrust
        SkipContinue              = Yes
        UnpackTime                = 250
        PreparationTime           = 1
        PersistentPrepTime        = 500
        PackTime                  = 500
        MustFinishAbility         = Yes
        StartAbilityRange         = 20.0
        SpecialWeapon             = GilgaladSpearThrust
        WhichSpecialWeapon        = 1
    End

    Behavior = AutoAbilityBehavior ModuleTag_IsildurNarsilAbility
        SpecialAbility               = SpecialAbilityGilgaladSpearThrust
        MaxScanRange                 = 300
        Query                        = 1 ANY ENEMIES +HERO +MONSTER
    End

 ; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
        SpecialPowerTemplate = SpecialAbilityAragornBladeMaster
        TriggeredBy = Upgrade_Level_5
    End

      Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster 
        StartsPaused        = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        HeroAttributeModifier    = GilGaladSternenschild
        HeroEffectDuration    = 30000
        UnpackTime              = 1
        TriggerSound        = AragornBladeMaster
    End

; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_GlorfindelStarlightEnabler
        SpecialPowerTemplate        = SpecialAbilityGlorfindelStarlight 
        TriggeredBy                 = Upgrade_Level_7
        ObeyRechageOnTrigger        = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_GlorfindelStarlight
        StartsPaused                = Yes
        SpecialPowerTemplate        = SpecialAbilityGlorfindelStarlight
        OCL                         = OCL_GlorfindelStarlightObjectMod
        CreateLocation              = CREATE_AT_LOCATION
        SetModelCondition           = ModelConditionState:USER_2
        SetModelConditionTime       = 2.333
    End


    Behavior = AutoAbilityBehavior ModuleTag_StarlightAutoAbilityBehavior
        SpecialAbility              = SpecialAbilityGlorfindelStarlight
        MaxScanRange                = GLORFINDEL_STARLIGHT_RADIUS
        Query                       = 2 ANY ALLIES +HORDE
        Query                       = 1 ALL ENEMIES
    End

; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SegenEnabler
        SpecialPowerTemplate = tpurroCsIeHhsuBkcuF
        TriggeredBy = Upgrade_Level_9
    End

    Behavior = SpecialPowerModule ModuleTag_SegenArrowWindStarter
        SpecialPowerTemplate        = tpurroCsIeHhsuBkcuF 
        UpdateModuleStartsAttack    = No
        StartsPaused                = Yes
    End

    Behavior = ArrowStormUpdate ModuleTag_SegenUpdate
        SpecialPowerTemplate    = tpurroCsIeHhsuBkcuF
        StartAbilityRange       = 320.0
        UnpackTime              = 1000
        PreparationTime         = 800
        PersistentPrepTime      = 600
        PackTime                = 1200
        UnpackingVariation        = 1
        ParalyzeDurationWhenCompleted = 600
        ParalyzeDurationWhenAborted = 800
        ApproachRequiresLOS     = Yes
        AwardXPForTriggering    = 0


        WeaponTemplate  = WeaponOfMassDestruction
        TargetRadius    = 120
        ShotsPerTarget  = 1
        ShotsPerBurst   = 3
        MaxShots        = 12
        CanShootEmptyGround = Yes
    End


	; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AeglosSnowEnabler
        SpecialPowerTemplate        = SpecialAbilityGilgaladAeglosSnow
        TriggeredBy                 = Upgrade_Level_2
    End

    Behavior = SpecialPowerModule ModuleTag_AeglosSnowStarter
        SpecialPowerTemplate        = SpecialAbilityGilgaladAeglosSnow
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_AeglosSnowUpdate
        SpecialPowerTemplate         = SpecialAbilityGilgaladAeglosSnow
        SkipContinue                 = Yes
        UnpackTime                   = 1600
        PreparationTime              = 2
        PackTime                     = 850
        AwardXPForTriggering         = 0
        StartAbilityRange            = 325.0
        ApproachRequiresLOS          = Yes
        SpecialWeapon                = GilgaladAeglosSnow
        WhichSpecialWeapon           = 1
    End

    Behavior = AutoAbilityBehavior ModuleTag_GilgaladAeglosSnowAbility
        SpecialAbility               = SpecialAbilityGilgaladAeglosSnow
        MaxScanRange                 = 300
        Query                        = 1 ANY ENEMIES +HERO +MONSTER
        Query                        = 1 ALL ENEMIES
    End


	; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	

	Behavior                   = UnpauseSpecialPowerUpgrade ModuleTag_GilgaladsBodyguard
		SpecialPowerTemplate    = SpecialAbilityGilgaladsBodyguard
		TriggeredBy             = Upgrade_Level_3
	End

	Behavior                   = OCLSpecialPower ModuleTag_OCLGilgaladsBodyguard
		SpecialPowerTemplate     = SpecialAbilityGilgaladsBodyguard
		OCL                      = OCL_GilgaladsBodyguard
		TriggerFX                = FX_SummonTowerGuards
		CreateLocation           = CREATE_AT_LOCATION
		StartsPaused             = Yes
		SetModelCondition        = ModelConditionState:LEVELED
		SetModelConditionTime    = 8.1
	End
	
	Behavior = SpecialAbilityUpdate ModuleTag_GilgaladsBodyguardUpdate
        SpecialPowerTemplate         = SpecialAbilityGilgaladsBodyguard
        UnpackTime                   = 0
        PreparationTime              = 0
        PackTime                     = 0
        AwardXPForTriggering         = 0
    End

	; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_HighKingsHornEnabler
        SpecialPowerTemplate = SpecialAbilityTheodenGloriousCharge6
        TriggeredBy = Upgrade_Level_10
        ObeyRechageOnTrigger = Yes
    End
	
	Behavior = SpecialPowerModule ModuleTag_HighKingsHornStarter   
        SpecialPowerTemplate      = SpecialAbilityTheodenGloriousCharge6
        UpdateModuleStartsAttack  = Yes
        StartsPaused = Yes
        AttributeModifier = HighKingsHornLeadership
        AttributeModifierRange = 200
        AttributeModifierAffectsSelf = Yes
        AttributeModifierAffects = IMLADRIS_LEADERSHIP_UNITS_OBF
        AttributeModifierFX = FX_ElessarGloriousCharge
    End
    
    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_HighKingsHornAnimation
        SpecialPowerTemplate               = SpecialAbilityTheodenGloriousCharge6
        SpecialWeapon                      = GilgaladsWordofPowerWeapon
        WhichSpecialWeapon                 = 3
        StartAbilityRange                  = 200
        SkipContinue                       = Yes
        UnpackTime                         = 1200
        PackTime                           = 1000
        MustFinishAbility                  = Yes
    End


    ; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_VilyaEnabler
        SpecialPowerTemplate = SpecialAbilityVilya
        TriggeredBy = Upgrade_Level_8
    End

    Behavior = SpecialPowerModule ModuleTag_ArrowWindStarter
        SpecialPowerTemplate        = SpecialAbilityVilya
        UpdateModuleStartsAttack    = No
        StartsPaused                = Yes
    End

    Behavior = ArrowStormUpdate ModuleTag_VilyaUpdate
        SpecialPowerTemplate    = SpecialAbilityVilya
        StartAbilityRange       = 320.0

        UnpackTime              = 1000
        PreparationTime         = 800
        PersistentPrepTime      = 600
        PackTime                = 1200
        UnpackingVariation        = 1
        ParalyzeDurationWhenCompleted = 600
        ParalyzeDurationWhenAborted = 800

        ApproachRequiresLOS     = Yes

        AwardXPForTriggering    = 0


        WeaponTemplate  = GilGaladVilya
        TargetRadius    = 120
        ShotsPerTarget  = 1
        ShotsPerBurst   = 3
        MaxShots        = 3
        CanShootEmptyGround = Yes
    End



	; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	

	Behavior = MonitorConditionUpdate ModuleTag_CommandSetSwapper1
        WeaponSetFlags            = WEAPONSET_TOGGLE_1
        WeaponToggleCommandSet    = GilGaladHighKingCommandSet_Crowned2
    End

    Behavior = MonitorConditionUpdate ModuleTag_CommandSetSwapper2
        WeaponSetFlags            = WEAPONSET_TOGGLE_2
        WeaponToggleCommandSet    = GilGaladHighKingCommandSet_Crowned
    End



	; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------





    Behavior = AutoHealBehavior ModuleTag_AragornHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 1000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    Behavior = SpecialPowerModule ModuleTag_CaptureBuilding
        SpecialPowerTemplate        = SpecialAbilityCaptureBuilding
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = No
    End
    Behavior = SpecialAbilityUpdate ModuleTag_CaptureBuildingUpdate
        SpecialPowerTemplate        = SpecialAbilityCaptureBuilding
        StartAbilityRange            = 15.0
        UnpackTime                    = 1
        PreparationTime                = 15000
        PackTime                    = 1
        DoCaptureFX                    = Yes
    End



	; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate AragornBladeMasterAI
        CommandButtonName = Command_SpecialAbilitySternenschild
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate ThunderboltAI
        CommandButtonName = miHekiLtnoDuoYtahTmiHyaS_dnammoC
        SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
    End

    Behavior = AISpecialPowerUpdate SpecialPowerFaramirGiveXPAoE
        CommandButtonName = Command_SpecialAbilityNoldorHorn
        SpecialPowerAIType = AI_SPECIAL_POWER_GIVEXP_AOE
        SpecialPowerRadius = 30.0
    End

    Behavior = AISpecialPowerUpdate FireballAI
        CommandButtonName = Command_SpecialAbilityGilgaladVilya
        SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
    End


    Scale = 1.07
    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes

    Shadow = SHADOW_DECAL
    ShadowSizeX = 19
    ShadowSizeY = 19
    ShadowTexture = ShadowI
End

Object LothlorienGilGaladRing

    SelectPortrait  = HPGilGalad
    ButtonImage     = HIGilGalad

        Draw = W3DHordeModelDraw ModuleTag_01
        OkToChangeModelColor = No

        StaticModelLODMode = No

        DefaultModelConditionState
            Model               = EUGilGalad_skn
            Skeleton            = GUTowerGrd_SKL
        End

        ModelConditionState = WEAPONSET_HERO_MODE
            ParticleSysBone = None GilGaladStars FollowBone:Yes
            ParticleSysBone = None GilGaladGlow FollowBone:Yes
        End
		
		
		ModelConditionState          = USER_8
            Model               = EUGilGalad_skn
            Skeleton            = GUTowerGrd_SKL
            ParticleSysBone = None GilGaladStars FollowBone:Yes
            ParticleSysBone = None GilGaladGlow FollowBone:Yes
        End
		
		

        ModelConditionState = ONE_RING
            Model           = EUGilGalad_skn
            Skeleton        = GUTowerGrd_SKL
            Texture         = eagilgalad.tga eagilgaladring.tga
            ParticleSysBone = None GilGaladRingFlare FollowBone:Yes
            ParticleSysBone = B_HANDR SaronRingSpark FollowBone:Yes
        End

        ModelConditionState = WEAPONSET_HERO_MODE ONE_RING
            ParticleSysBone = BAT_RIBS GilGaladSternenschildGlow FollowBone:Yes
            ParticleSysBone = BAT_RIBS GilGaladSternenschildGlowWhite FollowBone:Yes
            ParticleSysBone = None GilGaladRingFlare FollowBone:Yes
            ParticleSysBone = B_HANDR SaronRingSpark FollowBone:Yes
        End


        AnimationState        = THROWN_PROJECTILE
            Animation           = FLYA
                AnimationName     = GUTowerGrd_FLYA
                AnimationMode     = LOOP
            End
        End

        AnimationState                            = PASSENGER FREEFALL
            Animation                            = Grabbed
                AnimationName                    = GUTowerGrd_FLLA
                AnimationMode                    = LOOP
            End
        End

        AnimationState                            = FREEFALL
            Animation                            = Falling
                AnimationName                    = GUTowerGrd_FLYA
                AnimationMode                    = LOOP
                AnimationBlendTime                = 10
            End
        End

        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = GUTowerGrd_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = MOVING WEAPONSET_HERO_MODE

            Animation           = RUNA
                AnimationName     = GUTowerGrd_PSHA
                AnimationMode     = LOOP
            End
            Flags               = RANDOMSTART
            ParticleSysBone     = None InfantryDustTrails
        End

        AnimationState        =  FIRING_OR_PREATTACK_A WEAPONSET_HERO_MODE
            Animation           = ATKA
                AnimationName     = GUTowerGrd_ATKA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.328 1.328

            End

            Flags    = RESTART_ANIM_WHEN_COMPLETE
            FXEvent    = Frame:25 Name: FX_BladeMasterHitOrient
            FXEvent    = Frame:45 Name: FX_BladeMasterHitOrient
        End

        AnimationState                    = SELECTED WEAPONSET_HERO_MODE

            StateName                = STATE_Selected
            Animation                = IDLB
                AnimationName            = GUTowerGrd_IDLB
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = WEAPONSET_HERO_MODE
            StateName                = STATE_Selected

            Animation                = IDLB
                AnimationName            = GUTowerGrd_IDLB
                AnimationMode            = LOOP
            End
        End




        AnimationState                    = MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY
            ShareAnimation                = Yes
            Animation                    = TerrorFromTheSky
                AnimationName            = GUTowerGrd_RUNB
                AnimationMode            = LOOP
            End
        End
        AnimationState                    = MOVING EMOTION_TERROR
            ShareAnimation                = Yes
            Animation                    = Terror
                AnimationName            = GUTowerGrd_RUNB
                AnimationMode            = LOOP
            End
        End


        AnimationState                =    MOVING BACKING_UP
            ShareAnimation = Yes
            Animation                =    BackingUp
                AnimationName        =    GUTowerGrd_BAKA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End


        AnimationState        = MOVING ALTERNATE_FORMATION
            ShareAnimation = Yes
            Animation           = RUNA
                AnimationName     = GUTowerGrd_PSHA
                AnimationMode     = LOOP
            End
            Flags               = RANDOMSTART

        End

        AnimationState        = MOVING USING_COMBO_LOCOMOTOR
            ShareAnimation        = Yes
            Animation           = RUNA
                AnimationName     = GUTowerGrd_WLKA
                AnimationMode     = LOOP
                Distance          = 40
            End
            Flags               = RANDOMSTART

        End

        AnimationState        = MOVING
            ShareAnimation = Yes
            Animation           = RUNA
                AnimationName     = GUTowerGrd_RUNA
                AnimationMode     = LOOP
            End
            Flags               = RANDOMSTART

        End

        AnimationState        =  FIRING_OR_PREATTACK_A
            Animation           = ATKA
                AnimationName     = EUGilGalad_ATKA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.328 1.328

            End

            Animation           = ATKB
                AnimationName     = GUTowerGrd_ATKA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.15 1.15

            End

            Animation           = ATKC
                AnimationName     = EUGilGalad_ATKB
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.1 1.1

            End

        End



        AnimationState        = UNPACKING PACKING_TYPE_1
            Animation           = CHRA
                AnimationName     = GUTowerGrd_CHRA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = PREPARING PACKING_TYPE_1
            Animation           = ATKA1
                AnimationName     = GUTowerGrd_ATKA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = STUNNED_FLAILING
            Animation           = FLYA
                AnimationName     = GUTowerGrd_FLYA
                AnimationMode     = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = DYING SPLATTED DEATH_1
            Animation           = LNDA
                AnimationName     = GUTowerGrd_LNDB
                AnimationMode     = ONCE
            End
        End


        AnimationState        = DYING DEATH_1
            Animation           = DIEA
                AnimationName     = GUTowerGrd_DIEA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
        End

        AnimationState        = DYING DEATH_2
            Animation           = ByeBye
                AnimationName     = GUTowerGrd_IDLA
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 0.8 1.2
            End
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = GTPA
                AnimationName     = GUTowerGrd_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState        = STUNNED
            Animation           = LNDA
                AnimationName     = GUTowerGrd_LNDB
                AnimationMode     = ONCE
            End
        End

        TransitionState       = TRANS_Plant
            Animation           = PLTA
                AnimationName     = GUTowerGrd_PLTA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
        End

        TransitionState       = TRANS_Unplant
            Animation           = PLTB
                AnimationName     = GUTowerGrd_PLTB
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 0.5 1.2
            End
        End

        AnimationState                        = HIT_REACTION
            Animation                        = HIT REACTION
                AnimationName                = GUTowerGrd_HITA
                AnimationMode                = ONCE
            End
        End


        AnimationState                    = EMOTION_ALERT EMOTION_AFRAID
            ShareAnimation                = Yes
            Animation                    = Apprehensive
                AnimationName            = GUTowerGrd_APPA
                AnimationMode            = LOOP
            End
        End



        AnimationState                    = EMOTION_AFRAID
            ShareAnimation                = Yes
            Animation                    = FERA
                AnimationName            = GUTowerGrd_FERA
                AnimationMode            = LOOP
            End
            Animation                    = FERB
                AnimationName            = GUTowerGrd_FERB
                AnimationMode            = LOOP
            End
        End



        AnimationState                    = EMOTION_TAUNTING ALTERNATE_FORMATION
            Animation                    = TNTA
                AnimationName            = GUTowerGrd_TNTA
                AnimationMode            = LOOP
            End
        End
        AnimationState                    = EMOTION_TAUNTING
            Animation                    = Taunting
                AnimationName            = GUTowerGrd_TNTA
                AnimationMode            = ONCE
            End
            Animation                    = Taunting2
                AnimationName            = GUTowerGrd_TNTB
                AnimationMode            = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End



        AnimationState                    = EMOTION_POINTING
            Animation                    = Pointing1
                AnimationName            = GUTowerGrd_PNTA
                AnimationMode            = LOOP
            End
            Flags                        = RANDOMSTART
        End



        AnimationState                    = EMOTION_CELEBRATING
            Animation                    = CHRA
                AnimationName            = GUTowerGrd_CHRA
                AnimationMode            = LOOP
            End
        End


        AnimationState                    = EMOTION_ALERT
            Animation                    = CHRA
                AnimationName            = GUTowerGrd_IDLA
                AnimationMode            = LOOP
            End
        End




        AnimationState                    = SELECTED ALTERNATE_FORMATION
            ShareAnimation                = Yes
            StateName                    = STATE_SelectedAlternateFormation
            Animation                    = IDLB
                AnimationName            = GUTowerGrd_IDLB
                AnimationMode            = LOOP
            End
        End
        AnimationState                    = SELECTED
            StateName                    = STATE_Selected

            ShareAnimation                = Yes
            Animation                    = ATNB
                AnimationName            = GUTowerGrd_ATNB
                AnimationMode            = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Planted" then CurDrawableSetTransitionAnimState("TRANS_Unplant") end
            EndScript
        End



        AnimationState                    = ALTERNATE_FORMATION
            StateName                    = STATE_SelectedAlternateFormation

            ShareAnimation                = Yes
            Animation                    = IDLB
                AnimationName            = GUTowerGrd_IDLB
                AnimationMode            = LOOP
            End
        End
        IdleAnimationState
            StateName                    = STATE_Idle
            Animation                    = IDLA
                AnimationName            = GUTowerGrd_IDLA
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Animation                    = IDLA
                AnimationName            = GUTowerGrd_IDLA
                AnimationMode            = ONCE_BACKWARDS
                AnimationBlendTime        = 9
                AnimationSpeedFactorRange = 0.8 1.2
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Planted" then CurDrawableSetTransitionAnimState("TRANS_Unplant") end
            EndScript
        End



    End


    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side = Lothlorien
    EditorSorting = UNIT
    ThreatLevel = BOROMIR_THREAT_LEVEL
    ThingClass = CHARACTER_UNIT
    BuildCost         = GILGALADDAG_COST
    BuildTime = SILMARIL_HERO_BUILDTIME
	ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG
    DisplayMeleeDamage = GILGALADDAG_DAMAGE
    MaxSimultaneousOfType    = 1
    BountyValue = 2500

    TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT

    WeaponSet
        Conditions = None
        Weapon     = PRIMARY    GilGaladSpear
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions = WEAPONSET_HERO_MODE
        Weapon     = PRIMARY    GilGaladSpear
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions = WEAPONSET_TOGGLE_1
        Weapon     = PRIMARY    GilGaladWeapon
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions    = WEAPONSET_TOGGLE_2
        Weapon        = PRIMARY    GilGaladSpear
		AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = VeryStrongHeroArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange = 300
    ShroudClearingRange = 200
    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 2.0%
    DisplayName    = OBJECT:LothlorienGilGalad
    Hotkey         = CONTROLBAR:LothlorienGilGaladHotkey
    RecruitText    = CONTROLBAR:LothlorienGilGaladRecruit
    ReviveText     = CONTROLBAR:LothlorienGilGaladRevive
    CrushableLevel = 3

    CrushRevengeWeapon = SuperInfantryCrushRevenge

    CommandSet = GilGaladCommandSet
	CommandPoints = 0



    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_ElrondBody

    AutoResolveArmor
        Armor = AutoResolve_ElrondArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_ElrondWeapon
    End

    AutoResolveLeadership = AutoResolve_ElrondBonus

    CrowdResponseKey = GoodMen



    VoiceAttack                                 = GilGaladVoiceAttack
    VoiceAttackAir                                = GilGaladVoiceAttack
    VoiceAttackCharge                             = GilGaladVoiceAttack
    VoiceAttackMachine                             = GilGaladVoiceAttack
    VoiceAttackStructure                         = GilGaladVoiceAttack
    VoiceCreated                                = GilGaladVoiceSalute
    VoiceFullyCreated                             = GilGaladVoiceSalute
    VoiceFear                                    = GilGaladVoiceHelpme
    VoiceGuard                                    = GilGaladVoiceMove
    VoiceMove                                     = GilGaladVoiceMove
    VoiceMoveToCamp                             = GilGaladVoiceMove
    VoicePriority                                = 90
    VoiceSelect                                 = GilGaladVoiceSelect
    VoiceSelectBattle                              = GilGaladVoiceSelect

    SoundImpact                                 = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitElvenTransportShip        = GilGaladVoiceMove
        VoiceGarrison                            = GilGaladVoiceMove
        VoiceInitiateCaptureBuilding            = GilGaladVoiceMove
    End

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:RAISING_FLAG            Excluded:DYING ENGAGED    Sound:EmotionMenGoodCompilationBFME1and2VoxTauntSinglesLoop
    End


    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Man Man_Male Unit Infantry Gondor_Guard
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:TauntHitShieldPitchShifted    Animation:GUTwrGrd_SKL.GUTwrGrd_TNTB    Frames: 23 43
        AnimationSound = Sound:BodyFallGeneric1        Animation:GUTWRGRD_SKL.GUTWRGRD_DIEA    Frames:30 51
        AnimationSound = Sound:BodyFallGeneric1        Animation:GUTWRGRD_SKL.GUTWRGRD_DIEB    Frames:57
        AnimationSound = Sound:BodyFallGeneric1        Animation:GUTWRGRD_SKL.GUTWRGRD_DIEC    Frames:38
        AnimationSound = Sound:BodyFallSoldier        Animation:GUTWRGRD_SKL.GUTWRGRD_LNDA    Frames:4
        AnimationSound = Sound:BodyFallSoldier        Animation:GUTwrGrd_SKL.GUTwrGrd_LNDB    Frames:2
    End


    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT CANNOT_RETALIATE HERO ARMY_SUMMARY
    CamouflageDetectionMultiplier = CAMOUFLAGE_DETECTION_DISTANCE_MEDIUM

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        CanAttackWhileContained    = Yes
        AILuaEventsList            = GilGaladFunctions
    End

    LocomotorSet
        Locomotor = GondorTowerShieldGuardLocomotor
        Condition = SET_NORMAL
        Speed     = 52
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult              = 1.0
        ShockStunnedTimeLow      = 1400
        ShockStunnedTimeHigh     = 2400
        ShockStandingTime        = 1333
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -FADED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL GilGaladVoiceDie
        DeathFlags = DEATH_1
    End

    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius                 = EMOTION_CHEER_RADIUS
        MaxHealth                   = GILGALADDAG_HEALTH_RING
        PermanentlyKilledByFilter   = NONE
        DodgePercent                = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                    = DYING
        DeathAnimationTime           = 3000
        RespawnAnim                  = LEVELED
        RespawnAnimationTime         = 2000
        AutoRespawnAtObjectFilter    = NONE +CASTLE_KEEP
        ButtonImage                  = HIGilGalad
        RespawnRules =    AutoSpawn:No           Cost:GILGALADDAG_COST       Time:SILMARIL_HERO_RESPAWNTIME        Health:100%
	End

	
	Behavior = CommandSetUpgrade ModueTag_CommandSetKing
        TriggeredBy   = Upgrade_PurchaseHouseofTheGoldenFlowerGilgalad
        CommandSet    = GilGaladHighKingCommandSet_Crowned
    End
	
	Behavior = CommandSetUpgrade ModueTag_CommandSetKing2
        TriggeredBy   = Upgrade_PurchaseHouseofTheSilverFountGilgalad
        CommandSet    = GilGaladHighKingCommandSet_Crowned
    End
	
	Behavior = GrantUpgradeCreate ModuleTag_VoraussetzungKrone
        UpgradeToGrant      = Upgrade_HerrinLicht
        GiveOnBuildComplete = Yes
    End
	
	Behavior = AttributeModifierUpgrade ModuleTag_SwordBonus
        TriggeredBy = Upgrade_ZwillingeWaffeSchmieden
        AttributeModifier = SchmiedekunstderZwillingeBruchtalsGilgalad
    End
	
; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy = Upgrade_Level_1
    End

    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = Yes
        StartsPaused = No
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership
        StartsActive     = Yes
        BonusName        = GilGaladHoherKonigLeadership
        TriggeredBy      = Upgrade_Level_1
        RefreshDelay     = 2000
        Range            = 200
        ObjectFilter     = ANY +BruchtalLanzer +ImladrisSwordMan +ImladrisWaffenmeister +Bruchtalwachter  -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES
    End

; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_GilGaladBodyGuardsArmor
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy = Upgrade_Level_1
    End

    Behavior = SpecialPowerModule ModuleTag_GilGaladBodyGuardsArmorUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = Yes
        StartsPaused = No
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_GilGaladBodyGuardsArmorLeadership
        StartsActive     = Yes
        BonusName        = GilGaladBodyGuardsArmor2
        TriggeredBy      = Upgrade_Level_1
        RefreshDelay     = 2000
        Range            = 1000000000000
        ObjectFilter     = ANY +LothlorienBerserkerHorde +LothlorienBerserker +LothlorienBerserkerHordeShieldWall ALLIES
    End


; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

    Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership2
        StartsActive              = Yes
        BonusName                 = ElrondScale1
        TriggeredBy               = Upgrade_Level_1
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = IMLADRIS2_LEADERSHIP_UNITS_OBF 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership3
        StartsActive              = No
        BonusName                 = ElrondScale2
        TriggeredBy               = Upgrade_Level_2
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = IMLADRIS2_LEADERSHIP_UNITS_OBF 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership4
        StartsActive              = No
        BonusName                 = ElrondScale3
        TriggeredBy               = Upgrade_Level_3
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = IMLADRIS2_LEADERSHIP_UNITS_OBF 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership5
        StartsActive              = No
        BonusName                 = ElrondScale4
        TriggeredBy               = Upgrade_Level_4
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = IMLADRIS2_LEADERSHIP_UNITS_OBF 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership6
        StartsActive              = No
        BonusName                 = ElrondScale5
        TriggeredBy               = Upgrade_Level_5
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = IMLADRIS2_LEADERSHIP_UNITS_OBF 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership7
        StartsActive              = No
        BonusName                 = ElrondScale6
        TriggeredBy               = Upgrade_Level_6
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = IMLADRIS2_LEADERSHIP_UNITS_OBF 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership8
        StartsActive              = No
        BonusName                 = ElrondScale7
        TriggeredBy               = Upgrade_Level_7
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = IMLADRIS2_LEADERSHIP_UNITS_OBF 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership9
        StartsActive              = No
        BonusName                 = ElrondScale8
        TriggeredBy               = Upgrade_Level_8
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = IMLADRIS2_LEADERSHIP_UNITS_OBF 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership10
        StartsActive              = No
        BonusName                 = ElrondScale9
        TriggeredBy               = Upgrade_Level_9
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = IMLADRIS2_LEADERSHIP_UNITS_OBF 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

    Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership2_VET
        StartsActive              = Yes
        BonusName                 = ElrondVetScale1
        TriggeredBy               = Upgrade_Level_1
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = ANY +BruchtalVeteran +BruchtalVeteran_summon -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership3_VET
        StartsActive              = No
        BonusName                 = ElrondVetScale2
        TriggeredBy               = Upgrade_Level_2
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = ANY +BruchtalVeteran +BruchtalVeteran_summon -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership4_VET
        StartsActive              = No
        BonusName                 = ElrondVetScale3
        TriggeredBy               = Upgrade_Level_3
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = ANY +BruchtalVeteran +BruchtalVeteran_summon -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership5_VET
        StartsActive              = No
        BonusName                 = ElrondVetScale4
        TriggeredBy               = Upgrade_Level_4
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = ANY +BruchtalVeteran +BruchtalVeteran_summon -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership6_VET
        StartsActive              = No
        BonusName                 = ElrondVetScale5
        TriggeredBy               = Upgrade_Level_5
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = ANY +BruchtalVeteran +BruchtalVeteran_summon -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	
	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership7_VET
        StartsActive              = No
        BonusName                 = ElrondVetScale6
        TriggeredBy               = Upgrade_Level_6
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = ANY +BruchtalVeteran +BruchtalVeteran_summon -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership8_VET
        StartsActive              = No
        BonusName                 = ElrondVetScale7
        TriggeredBy               = Upgrade_Level_7
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = ANY +BruchtalVeteran +BruchtalVeteran_summon -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership9_VET
        StartsActive              = No
        BonusName                 = ElrondVetScale8
        TriggeredBy               = Upgrade_Level_8
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = ANY +BruchtalVeteran +BruchtalVeteran_summon -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership10_VET
        StartsActive              = No
        BonusName                 = ElrondVetScale9
        TriggeredBy               = Upgrade_Level_9
        RefreshDelay              = 2000
        Range                     = 200
		AntiCategory              = BUFF
        ObjectFilter              = ANY +BruchtalVeteran +BruchtalVeteran_summon -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES 
    End

; --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_IsildurNarsilEnabler
        SpecialPowerTemplate      = SpecialAbilityGilgaladSpearThrust
        TriggeredBy               = Upgrade_Level_3
        ObeyRechageOnTrigger      = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_IsildurNarsilStarter
        SpecialPowerTemplate      = SpecialAbilityGilgaladSpearThrust
        UpdateModuleStartsAttack  = Yes
        StartsPaused              = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_IsildurNarsilUpdate
        SpecialPowerTemplate      = SpecialAbilityGilgaladSpearThrust
        SkipContinue              = Yes
        UnpackTime                = 600
        PreparationTime           = 1
        PersistentPrepTime        = 500
        PackTime                  = 500
        MustFinishAbility         = Yes
        AwardXPForTriggering      = 0
        StartAbilityRange         = 20.0
        SpecialWeapon             = GilgaladSpearThrustRing
        WhichSpecialWeapon        = 1
    End

    Behavior = AutoAbilityBehavior ModuleTag_IsildurNarsilAbility
        SpecialAbility               = SpecialAbilityGilgaladSpearThrust
        MaxScanRange                 = 300
        Query                        = 1 ANY ENEMIES +HERO +MONSTER
        Query                        = 1 ALL ENEMIES
    End

 ; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
        SpecialPowerTemplate = SpecialAbilityAragornBladeMaster
        TriggeredBy = Upgrade_Level_5
    End

      Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        StartsPaused        = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        HeroAttributeModifier    = GilGaladSternenschild
        HeroEffectDuration    = 30000
        UnpackTime              = 1
        TriggerSound        = AragornBladeMaster
    End

; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_GlorfindelStarlightEnabler
        SpecialPowerTemplate        = SpecialAbilityGlorfindelStarlight
        TriggeredBy                 = Upgrade_Level_7
        ObeyRechageOnTrigger        = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_GlorfindelStarlight
        StartsPaused                = Yes
        SpecialPowerTemplate        = SpecialAbilityGlorfindelStarlight
        OCL                         = OCL_GilGaladGlanzWeaponLevel7
        CreateLocation              = CREATE_AT_LOCATION
        SetModelCondition           = ModelConditionState:USER_2
        SetModelConditionTime       = 2.333
    End


    Behavior = AutoAbilityBehavior ModuleTag_StarlightAutoAbilityBehavior
        SpecialAbility              = SpecialAbilityGlorfindelStarlight
        MaxScanRange                = GLORFINDEL_STARLIGHT_RADIUS
        Query                       = 2 ANY ALLIES +HORDE
        Query                       = 1 ALL ENEMIES
    End

; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SegenEnabler
        SpecialPowerTemplate = tpurroCsIeHhsuBkcuF
        TriggeredBy = Upgrade_Level_9
    End

    Behavior = SpecialPowerModule ModuleTag_SegenArrowWindStarter
        SpecialPowerTemplate        = tpurroCsIeHhsuBkcuF
        UpdateModuleStartsAttack    = No
        StartsPaused                = Yes
    End

    Behavior = ArrowStormUpdate ModuleTag_SegenUpdate
        SpecialPowerTemplate    = tpurroCsIeHhsuBkcuF
        StartAbilityRange       = 320.0
        UnpackTime              = 1000
        PreparationTime         = 800
        PersistentPrepTime      = 600
        PackTime                = 1200
        UnpackingVariation        = 1
        ParalyzeDurationWhenCompleted = 600
        ParalyzeDurationWhenAborted = 800
        ApproachRequiresLOS     = Yes
        AwardXPForTriggering    = 0


        WeaponTemplate  = WeaponOfMassDestruction
        TargetRadius    = 120
        ShotsPerTarget  = 1
        ShotsPerBurst   = 3
        MaxShots        = 40
        CanShootEmptyGround = Yes
    End


	; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AeglosSnowEnabler
        SpecialPowerTemplate        = SpecialAbilityGilgaladAeglosSnow
        TriggeredBy                 = Upgrade_Level_2
    End

    Behavior = SpecialPowerModule ModuleTag_AeglosSnowStarter
        SpecialPowerTemplate        = SpecialAbilityGilgaladAeglosSnow
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_AeglosSnowUpdate
        SpecialPowerTemplate         = SpecialAbilityGilgaladAeglosSnow
        SkipContinue                 = Yes
        UnpackTime                   = 1600
        PreparationTime              = 2
        PackTime                     = 850
        AwardXPForTriggering         = 0
        StartAbilityRange            = 325.0
        ApproachRequiresLOS          = Yes
        SpecialWeapon                = GilgaladAeglosSnowRing
        WhichSpecialWeapon           = 1
    End

    Behavior = AutoAbilityBehavior ModuleTag_GilgaladAeglosSnowAbility
        SpecialAbility               = SpecialAbilityGilgaladAeglosSnow
        MaxScanRange                 = 300
        Query                        = 1 ANY ENEMIES +HERO +MONSTER
        Query                        = 1 ALL ENEMIES
    End


	; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	

	Behavior                   = UnpauseSpecialPowerUpgrade ModuleTag_GilgaladsBodyguard
		SpecialPowerTemplate    = SpecialAbilityGilgaladsBodyguard
		TriggeredBy             = Upgrade_Level_3
	End

	Behavior                   = OCLSpecialPower ModuleTag_OCLGilgaladsBodyguard
		SpecialPowerTemplate     = SpecialAbilityGilgaladsBodyguard
		OCL                      = OCL_GilgaladsBodyguardRing
		TriggerFX                = FX_SummonTowerGuards
		CreateLocation           = CREATE_AT_LOCATION
		StartsPaused             = Yes
		SetModelCondition        = ModelConditionState:LEVELED
		SetModelConditionTime    = 8.1
	End
	
	Behavior = SpecialAbilityUpdate ModuleTag_GilgaladsBodyguardUpdate
        SpecialPowerTemplate         = SpecialAbilityGilgaladsBodyguard
        UnpackTime                   = 0
        PreparationTime              = 0
        PackTime                     = 0
        AwardXPForTriggering         = 0
    End

	; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_HighKingsHornEnabler
        SpecialPowerTemplate = SpecialAbilityTheodenGloriousCharge6
        TriggeredBy = Upgrade_Level_10
        ObeyRechageOnTrigger = Yes
    End
	
	Behavior = SpecialPowerModule ModuleTag_HighKingsHornStarter   
        SpecialPowerTemplate      = SpecialAbilityTheodenGloriousCharge6
        UpdateModuleStartsAttack  = Yes
        StartsPaused = Yes
        AttributeModifier = HighKingsHornLeadership
        AttributeModifierRange = 200
        AttributeModifierAffectsSelf = Yes
        AttributeModifierAffects = IMLADRIS_LEADERSHIP_UNITS_OBF
        AttributeModifierFX = FX_ElessarGloriousCharge
    End
    
    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_HighKingsHornAnimation
        SpecialPowerTemplate               = SpecialAbilityTheodenGloriousCharge6
        SpecialWeapon                      = GilgaladsWordofPowerWeaponRing
        WhichSpecialWeapon                 = 3
        StartAbilityRange                  = 200
        SkipContinue                       = Yes
        UnpackTime                         = 1200
        PackTime                           = 1000
        MustFinishAbility                  = Yes
    End


    ; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_VilyaEnabler
        SpecialPowerTemplate = SpecialAbilityVilya
        TriggeredBy = Upgrade_Level_8
    End

    Behavior = SpecialPowerModule ModuleTag_ArrowWindStarter
        SpecialPowerTemplate        = SpecialAbilityVilya
        UpdateModuleStartsAttack    = No
        StartsPaused                = Yes
    End

    Behavior = ArrowStormUpdate ModuleTag_VilyaUpdate
        SpecialPowerTemplate    = SpecialAbilityVilya
        StartAbilityRange       = 320.0

        UnpackTime              = 1000
        PreparationTime         = 800
        PersistentPrepTime      = 600
        PackTime                = 1200
        UnpackingVariation        = 1
        ParalyzeDurationWhenCompleted = 600
        ParalyzeDurationWhenAborted = 800

        ApproachRequiresLOS     = Yes

        AwardXPForTriggering    = 0


        WeaponTemplate  = GilGaladVilya
        TargetRadius    = 120
        ShotsPerTarget  = 1
        ShotsPerBurst   = 3
        MaxShots        = 3
        CanShootEmptyGround = Yes
    End



	; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
	

	Behavior = MonitorConditionUpdate ModuleTag_CommandSetSwapper1
        WeaponSetFlags            = WEAPONSET_TOGGLE_1
        WeaponToggleCommandSet    = GilGaladHighKingCommandSet_Crowned2
    End

    Behavior = MonitorConditionUpdate ModuleTag_CommandSetSwapper2
        WeaponSetFlags            = WEAPONSET_TOGGLE_2
        WeaponToggleCommandSet    = GilGaladHighKingCommandSet_Crowned
    End



	; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------





    Behavior = AutoHealBehavior ModuleTag_AragornHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 1000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    Behavior = SpecialPowerModule ModuleTag_CaptureBuilding
        SpecialPowerTemplate        = SpecialAbilityCaptureBuilding
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = No
    End
    Behavior = SpecialAbilityUpdate ModuleTag_CaptureBuildingUpdate
        SpecialPowerTemplate        = SpecialAbilityCaptureBuilding
        StartAbilityRange            = 15.0
        UnpackTime                    = 1
        PreparationTime                = 15000
        PackTime                    = 1
        DoCaptureFX                    = Yes
    End



	; ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate AragornBladeMasterAI
        CommandButtonName = Command_SpecialAbilitySternenschild
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate ThunderboltAI
        CommandButtonName = miHekiLtnoDuoYtahTmiHyaS_dnammoC
        SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
    End

    Behavior = AISpecialPowerUpdate SpecialPowerFaramirGiveXPAoE
        CommandButtonName = Command_SpecialAbilityNoldorHorn
        SpecialPowerAIType = AI_SPECIAL_POWER_GIVEXP_AOE
        SpecialPowerRadius = 30.0
    End

    Behavior = AISpecialPowerUpdate FireballAI
        CommandButtonName = Command_SpecialAbilityGilgaladVilya
        SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
    End


    Scale = 1.07
    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes

    Shadow = SHADOW_DECAL
    ShadowSizeX = 19
    ShadowSizeY = 19
    ShadowTexture = ShadowI
End




ChildObject LothlorienGilGalad_Summoned LothlorienGilGalad

    IsTrainable = No
    CommandPoints = 0
    CommandSet = GilGaladCommandSet_Summoned

    KindOf                = +SUMMONED

    Behavior              = ExperienceLevelCreate ModuleTag_MPLevelBonus
        LevelToGrant      = 10
        MPOnly            = Yes
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime      = 260000
        MaxLifetime      = 260000
        DeathType        = FADED
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 2500
        DestructionDelay = 2500
        Sound = INITIAL SpellGenericUnsummonFasterMS
        DeathFlags = DEATH_2
        FX                    = INITIAL FX_UnSummonElvenAllies
    End

    Behavior = AttributeModifierUpgrade ModuleTag_GandalfWhiteBonus
        TriggeredBy = Upgrade_RohanFaction
        AttributeModifier = SpellBookHelmsBonus
    End

End



ChildObject ArnorGilGalad_Summoned LothlorienGilGalad
    IsTrainable = No
    CommandPoints = 0
    CommandSet = ArnorGilGaladCommandSet_Summoned

    KindOf = +SUMMONED

    Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
        LevelToGrant = 7
    End

    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius                 = EMOTION_CHEER_RADIUS
        MaxHealth                   = GILGALADDAG_HEALTH
        PermanentlyKilledByFilter   = NONE
        DodgePercent                = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy = Upgrade_Level_1
    End

    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = Yes
        StartsPaused = No
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership
        StartsActive     = Yes
        BonusName        = GilGaladHoherKonigLeadership
        TriggeredBy      = Upgrade_Level_1
        RefreshDelay     = 2000
        Range            = 200
        ObjectFilter     = ANY +BruchtalLanzer +BruchtalSchwertmeister +ImladrisWaffenmeister +Bruchtalwachter -HERO -STRUCTURE -DOZER -MACHINE -SHIP -CAVALRY ALLIES
    End


    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime      = 120000
        MaxLifetime      = 120000
        DeathType        = FADED
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 2500
        DestructionDelay = 2500
        Sound = INITIAL SpellGenericUnsummonFasterMS
        DeathFlags = DEATH_2
    End
End


ChildObject BruchtalGilGalad_Summoned LothlorienGilGalad
    IsTrainable = No
    CommandPoints = 0
    CommandSet = ArnorGilGaladCommandSet_Summoned

    KindOf = +SUMMONED

    Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
        LevelToGrant = 10
    End

    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius                  = EMOTION_CHEER_RADIUS
        MaxHealth                    = GILGALADDAG_HEALTH
        PermanentlyKilledByFilter    = NONE
        DodgePercent                 = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy = Upgrade_Level_1
    End

    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = Yes
        StartsPaused = No
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership
        StartsActive     = Yes
        BonusName        = GilGaladHoherKonigLeadership
        TriggeredBy      = Upgrade_Level_1
        RefreshDelay     = 2000
        Range            = 200
        AntiCategory     = BUFF
        ObjectFilter    = ANY +ArnorFighter_Summoned +ArnorArcher_Summoned +ArnorTowerShieldGuard_Summoned +ImladrisSwordMan_Summoned +BruchtalBogenschuetzen_Summoned +BruchtalLanzer_Summoned ALLIES
    End


    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime      = 120000
        MaxLifetime      = 120000
        DeathType        = FADED
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 2500
        DestructionDelay = 2500
        Sound = INITIAL SpellGenericUnsummonFasterMS
        DeathFlags = DEATH_2
    End
End

ChildObject LothlorienEreinion LothlorienGilGalad

    DisplayName    = OBJECT:LothlorienEreinion

    BuildCost         = GILGALADDAG_COST
    BuildTime         = VERY_STRONG_HERO_BUILDTIME

    ArmorSet
        Conditions      = None
        Armor           = VeryStrongHeroArmor
        DamageFX        = NormalDamageFX
    End

    WeaponSet
        Conditions = None
        Weapon     = PRIMARY    GilGaladWeapon
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions = WEAPONSET_HERO_MODE
        Weapon     = PRIMARY    GilGaladWeapon
    End
End


Object EreinionSummonEgg
    Draw = W3DScriptedModelDraw ModuleTag_Draw
        DefaultModelConditionState
            Model = None
        End
    End
    KindOf = INERT IMMOBILE UNATTACKABLE

    Body = ActiveBody ModuleTag_MakesKillWork
        MaxHealth = 1
    End
    Behavior = LifetimeUpdate ModuleTag_HatchTrigger
        MinLifetime        = 0.0
        MaxLifetime        = 0.0
    End
    Behavior = SlowDeathBehavior ModuleTag_HatchProcess
        DestructionDelay = 4000
        FX     = INITIAL  FX_GilGaladSummoning
        OCL    = MIDPOINT OCL_SpawnGilGalad
        Weapon = MIDPOINT GilGaladSummoningWeapon
        DoNotRandomizeMidpoint = Yes
    End
End

ChildObject LothlorienGilGalad_Arnor LothlorienGilGalad

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
    End
End

