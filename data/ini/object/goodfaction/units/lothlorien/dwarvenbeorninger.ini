Object GasthausBeorninger

    ButtonImage        = HIBeorninger_Wotr
    SelectPortrait     = UPBeorninger

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_GasthausBeorninger

    Draw = W3DScriptedModelDraw ModuleTag_01

      OkToChangeModelColor = Yes
      StaticModelLODMode   = Yes

        RandomTextureFixedRandomIndex  = Yes

        RandomTexture = dbbeorninger1.tga 0 iuhuehne2.tga
        RandomTexture = dbbeorninger2.tga 0 iuhuehne2.tga

        RandomTexture = dubeorningerbear.tga 0 dubeorningerbear.tga
        RandomTexture = dubeorningerbear2.tga 0 dubeorningerbear.tga

        DefaultModelConditionState
            Model               = DBBeorninger
        End



        IdleAnimationState
            StateName = Idle
            Animation           = IDLB
                AnimationName     = Kuhwaldar_SKL.Kuhwaldar_IDLB 0 15
                AnimationMode     = ONCE
                AnimationPriority   = 20
            End
            Animation           = IDLC
                AnimationName     = Kuhwaldar_SKL.Kuhwaldar_IDLC
                AnimationMode     = ONCE
                AnimationPriority   = 5
            End
            Animation           = IDLD
                AnimationName     = Kuhwaldar_SKL.Kuhwaldar_IDLD
                AnimationMode     = ONCE
                AnimationPriority   = 5
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
            EndScript
        End


        ModelConditionState            = MOUNTED
            Model                      = DUBear_SKN
        End



        AnimationState                =    FREEFALL MOUNTED
            Animation                =    freefall
                AnimationName        =    CUBear_SKL.CUBear_FLYA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState                =    STUNNED_FLAILING MOUNTED
            Animation                =    JustDie
                AnimationName        =    CUBear_SKL.CUBear_FLYA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End


        AnimationState               =    DYING SPLATTED MOUNTED DEATH_1
            Animation                =    Land
                AnimationName        =    CUBear_SKL.CUBear_LNDA
                AnimationMode        =    ONCE
            End
        End


        AnimationState               =    DYING MOUNTED DEATH_1
            Animation                =    JustDie
                AnimationName        =    CUBear_SKL.CUBear_DIEA
                AnimationMode        =    ONCE
            End
        End

        AnimationState               =    DYING DEATH_1
            Animation                =    JustDie
                AnimationName        =    CUBear_SKL.CUBear_DIEA
                AnimationMode        =    ONCE
            End
        End

        AnimationState               =    DEATH_1
            Animation                =    JustDie
                AnimationName        =    CUBear_SKL.CUBear_DIEA
                AnimationMode        =    ONCE
            End
        End

        AnimationState               =    DYING MOUNTED DEATH_2
            Animation                =    JustDie
                AnimationName        =    CUBear_SKL.CUBear_IDLA
                AnimationMode        =    LOOP
            End
        End

        AnimationState               =    DYING DEATH_2
            Animation                =    JustDie
                AnimationName        =    CUBear_SKL.CUBear_IDLA
                AnimationMode        =    LOOP
            End
        End

        AnimationState               =     DEATH_2
            Animation                =    JustDie
                AnimationName        =    CUBear_SKL.CUBear_IDLA
                AnimationMode        =    LOOP
            End
        End

        AnimationState                =    STUNNED_STANDING_UP MOUNTED
            Animation                =    StandUp
                AnimationName        =    CUBear_SKL.CUBear_GTPA
                AnimationMode        =    ONCE
            End
        End


        AnimationState                =    STUNNED MOUNTED
            Animation                =    Land
                AnimationName        =    CUBear_SKL.CUBear_LNDA
                AnimationMode        =    ONCE
            End
        End

        AnimationState                        = PARALYZED MOUNTED
            Animation
                AnimationName                = CUBear_SKL.CUBear_IDLA
                AnimationMode                = LOOP
            End
        End

        AnimationState = SPECIAL_WEAPON_ONE MOUNTED
            StateName = Attacking
            Animation
                AnimationName        = CUBear_SKL.CUBear_ATKA
                AnimationMode        = ONCE
            End
        End

        AnimationState = SPECIAL_POWER_1 MOUNTED
            StateName = Attacking
            Animation
                AnimationName        = CUBear_SKL.CUBear_ATKA
                AnimationMode        = ONCE
            End
        End

        AnimationState = SPECIAL_WEAPON_TWO MOUNTED
        StateName = Attacking
            Animation
                AnimationName        = CUBear_SKL.CUBear_ATKA
                AnimationMode        = ONCE
            End

        End




        AnimationState                =    MOUNTED TURN_LEFT_HIGH_SPEED
            Animation                =    TurnLeft
                AnimationName        =    CUBear_SKL.CUBear_RUNA
                AnimationMode        =    LOOP
                AnimationBlendTime    =    20
            End
        End

        AnimationState                =    MOUNTED TURN_RIGHT_HIGH_SPEED
            Animation                =    TurnLeft
                AnimationName        =    CUBear_SKL.CUBear_RUNA
                AnimationMode        =    LOOP
                AnimationBlendTime    =    20
            End
        End

        AnimationState                =    MOVING TURN_LEFT MOUNTED
            Animation                =    TurnLeft
                AnimationName        =    CUBear_SKL.CUBear_RUNA
                AnimationMode        =    LOOP
            End

        End

        AnimationState                =    MOVING TURN_RIGHT MOUNTED
            Animation                =    TurnRight
                AnimationName        =    CUBear_SKL.CUBear_RUNA
                AnimationMode        =    LOOP
            End

        End

        AnimationState                =    MOVING ACCELERATE MOUNTED
            Animation                =    Accelerate
                AnimationName        =    CUBear_SKL.CUBear_RUNA
                AnimationMode        =    LOOP
            End

        End

        AnimationState                =    MOVING DECELERATE MOUNTED
            Animation                =    Decelerate
                AnimationName        =    CUBear_SKL.CUBear_RUNA
                AnimationMode        =    ONCE
                AnimationSpeedFactorRange    = 0.55 0.55
            End

        End



        AnimationState        = MOUNTED MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = MountedRunAndFire
                AnimationName       = CUBear_SKL.CUBear_RUNA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState                =    MOVING MOUNTED
            Animation                =    RunA
                AnimationName        =    CUBear_SKL.CUBear_RUNA
                AnimationMode        =    LOOP
            End
             Flags                    =    RANDOMSTART

        End

        AnimationState                =    FIRING_OR_PREATTACK_A MOUNTED
            Animation                =    AttackA1
                AnimationName        =    CUBear_SKL.CUBear_ATKA
                AnimationMode        =    ONCE
                UseWeaponTiming        =    Yes
                AnimationBlendTime  =    10
            End
            Animation                =    AttackA2
                AnimationName        =    CUBear_SKL.CUBear_ATKB
                AnimationMode        =    ONCE
                UseWeaponTiming        =    Yes
                AnimationBlendTime  =    10
            End
        End

        AnimationState                =    FIRING_OR_PREATTACK_B MOUNTED
            Animation                =    AttackA1
                AnimationName        =    CUBear_SKL.CUBear_ATKA
                AnimationMode        =    ONCE
                UseWeaponTiming        =    Yes
                AnimationBlendTime  =    10
            End
            Animation                =    AttackA2
                AnimationName        =    CUBear_SKL.CUBear_ATKB
                AnimationMode        =    ONCE
                UseWeaponTiming        =    Yes
                AnimationBlendTime  =    10
            End
        End

        AnimationState                =    FIRING_OR_PREATTACK_C MOUNTED
            Animation                =    AttackA1
                AnimationName        =    CUBear_SKL.CUBear_ATKA
                AnimationMode        =    ONCE
                UseWeaponTiming        =    Yes
                AnimationBlendTime  =    10
            End
            Animation                =    AttackA2
                AnimationName        =    CUBear_SKL.CUBear_ATKB
                AnimationMode        =    ONCE
                UseWeaponTiming        =    Yes
                AnimationBlendTime  =    10
            End
        End


        AnimationState                =    RAISING_FLAG MOUNTED
                Animation           =    CHRA
                    AnimationName   =    CUBear_SKL.CUBear_IDLA
                    AnimationMode   =    LOOP
                End
        End

        AnimationState                =    EMOTION_CELEBRATING MOUNTED
                Animation
                    AnimationName   =    CUBear_SKL.CUBear_IDLA
                    AnimationMode   =    LOOP
                End
        End

        AnimationState                =    EMOTION_TAUNTING MOUNTED
                Animation
                    AnimationName   =    CUBear_SKL.CUBear_IDLA
                    AnimationMode   =    LOOP
                End
        End

        AnimationState                =    SELECTED MOUNTED
            SimilarRestart            =   Yes
            StateName                =    AtAttentionIdle
            Animation                =    ATNB
                AnimationName        =    CUBear_SKL.CUBear_ATNA
                AnimationMode        =    LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
                if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
            EndScript
        End

        TransitionState                =    TRANS_Select
            Animation                =    ATNA
                AnimationName        =    CUBear_SKL.CUBear_ATNA
                AnimationMode        =    ONCE
            End
        End

        AnimationState                = MOUNTED
            Animation = IDLB
                AnimationName        =    CUBear_SKL.CUBear_IDLA
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationPriority   =    15
            End
            Animation = IDLD
                AnimationName        =    CUBear_SKL.CUBear_IDLB
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationPriority   =    10
            End
            Animation = IDLC
                AnimationName        =    CUBear_SKL.CUBear_IDLC
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationPriority   =    10
            End
            Animation = IDLC
                AnimationName        =    CUBear_SKL.CUBear_IDLD
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationPriority   =    10
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState                = USER_2
            StateName                = ATHELAS
            Animation                = SPCC
                AnimationName        = Kuhwaldar_SKL.Kuhwaldar_SPCC
                AnimationMode        = ONCE
            End
        End

        AnimationState        = STUNNED_FLAILING
            Flags               = RANDOMSTART
            Animation           = GUBoromir_FLYA
                AnimationName     = Kuhwaldar_SKL.Kuhwaldar_FLYA
                AnimationMode     = LOOP
            End
        End




        AnimationState        = DYING SPLATTED
            Animation           = GUBoromir_LNDA
                AnimationName     = Kuhwaldar_SKL.Kuhwaldar_LNDA
                AnimationMode     = ONCE
            End
        End
        AnimationState        = DYING AFLAME
            Animation = DieAflame
                AnimationName       = Kuhwaldar_SKL.Kuhwaldar_MFDA
                AnimationMode       = LOOP
            End
        End
        AnimationState        = DYING
            Animation           = GUBoromir_DTHA
                AnimationName     = Kuhwaldar_SKL.Kuhwaldar_DTHA
                AnimationMode     = ONCE
            End
        End


        AnimationState        = STUNNED_STANDING_UP
            Animation           = GUBoromir_GTPA
                AnimationName     = Kuhwaldar_SKL.Kuhwaldar_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.3 1.3
            End
        End
        AnimationState        = STUNNED
            Animation           = GUBoromir_LNDA
                AnimationName     = Kuhwaldar_SKL.Kuhwaldar_LNDA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = PACKING_TYPE_2
            StateName          =    CaptainPower
            Animation           = GUBoromir_CHRA
                AnimationName     = Kuhwaldar_SKL.Kuhwaldar_CHRA
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 1.2 1.2
            End
        End

        AnimationState        = SPECIAL_POWER_1
            Animation
                AnimationName     = Kuhwaldar_SKL.Kuhwaldar_SPCC
                AnimationMode     = LOOP
            End
        End

        AnimationState        = SPECIAL_POWER_2
            Animation
                AnimationName     = Kuhwaldar_SKL.Kuhwaldar_SPCC
                AnimationMode     = LOOP
            End
        End

        AnimationState        = SPECIAL_WEAPON_TWO
            Animation
                AnimationName     = Kuhwaldar_SKL.Kuhwaldar_SPCC
                AnimationMode     = LOOP
            End
        End



        AnimationState        = MOVING WANDER WEAPONSTATE_CLOSE_RANGE
            StateName           = WithSword

            Animation           = GUBoromir_WLKA
                AnimationName     = Kuhwaldar_SKL.Kuhwaldar_WLKA
                AnimationMode     = LOOP
            End
        End

        AnimationState        = MOVING WANDER

            Animation           = GUBoromir_WLKA
                AnimationName     = Kuhwaldar_SKL.Kuhwaldar_WLKA
                AnimationMode     = LOOP
            End
        End


        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = Kuhwaldar_SKL.Kuhwaldar_RUNB
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End


        AnimationState        = MOVING

            Flags               = RANDOMSTART
            Animation           = MOVE
                AnimationName     = Kuhwaldar_SKL.Kuhwaldar_RUNA
                AnimationMode     = LOOP
            End
        End



        AnimationState        = FIRING_OR_PREATTACK_A
            StateName           = Attack
            Animation           = ATKA
                AnimationName     = Kuhwaldar_SKL.Kuhwaldar_ATKA
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
                AnimationPriority   = 20
            End
            Animation           = ATKB
                AnimationName    = Kuhwaldar_SKL.Kuhwaldar_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
                AnimationPriority   = 2
            End
        End



        TransitionState                    =    TRANS_Idle_to_Selected
            Animation                    =    ATNA
                AnimationName            =    Kuhwaldar_SKL.Kuhwaldar_ATNA
                AnimationMode            =    ONCE
            End
        End

        TransitionState                    =    TRANS_Selected_To_Idle
            Animation                    =    ATNC
                AnimationName            =    Kuhwaldar_SKL.Kuhwaldar_ATNC
                AnimationMode            =    ONCE
            End
        End

        AnimationState                = LEVELED
            Animation                = LevelUp
                AnimationName        = Kuhwaldar_SKL.Kuhwaldar_LVLA
                AnimationMode        = ONCE
            End
        End

        AnimationState                = RAISING_FLAG
            StateName                = STATE_ready
            Animation                = CHRA
                AnimationName        = Kuhwaldar_SKL.Kuhwaldar_CHRA
                AnimationMode        = LOOP
            End
        End

        AnimationState                =    SELECTED
            StateName                =    Selected
            SimilarRestart            =   Yes
            Animation                =    ATNB
                AnimationName        =    Kuhwaldar_SKL.Kuhwaldar_ATNB
                AnimationMode        =    LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
            EndScript
        End


        AnimationState            = EMOTION_CELEBRATING
            Animation           = CHRA
                AnimationName   = Kuhwaldar_SKL.Kuhwaldar_CHRA
                AnimationMode   = LOOP
            End
        End

        AnimationState                    = EMOTION_ALERT EMOTION_MORALE_HIGH
            Animation                    = Taunting
                AnimationName            =  Kuhwaldar_SKL.Kuhwaldar_TNTA
                AnimationMode            = ONCE
            End
            Animation                    = Taunting
                AnimationName            =  Kuhwaldar_SKL.Kuhwaldar_TNTB
                AnimationMode            = ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState        = EMOTION_ALERT
            Animation           = ALERT_1
                AnimationName     = Kuhwaldar_SKL.Kuhwaldar_IDLA
                AnimationMode     = LOOP
            End

        End



        AnimationState = HIT_REACTION HIT_LEVEL_1
            Animation = Hit_Level_1_a
                AnimationName = Kuhwaldar_SKL.Kuhwaldar_HITA
                AnimationMode = ONCE
            End
        End

        AnimationState                = USER_1
            StateName                = ATHELAS
            Animation                = ATKP
                AnimationName        = Kuhwaldar_SPCC
                AnimationMode        = ONCE
            End
        End
 End

    Draw = W3DScriptedModelDraw DustEffects
        DefaultModelConditionState
          Model = None
        End
        IdleAnimationState
        End
        AnimationState = MOUNTED MOVING WADING
            ParticleSysBone = None FootstepSlash
        End
        AnimationState = MOUNTED MOVING ACCELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOUNTED MOVING ACCELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOUNTED MOVING
        End
    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End


    #include "..\..\..\includes\StunDrawModuleSmall.inc"




    Side               = Lothlorien
    EditorSorting      = UNIT
    ThreatLevel        = ISENGARD_BESERKER_THREAT_LEVEL
    ShockwaveResistance          = 50

    ThreatBreakdown    = IsengardBeserker_DetailedThreat
        AIKindOf       = INFANTRY
    End

    Scale              = 1.15
    ThingClass         = HORDE_UNIT
    CommandPoints      = 15
    BuildCost          = 500
    BuildTime          = STRONG_BUILDTIME
    TransportSlotCount = 1
    ShowHealthInSelectionDecal = Yes

    WeaponSet
        Conditions     = None
        Weapon         = PRIMARY     BeorningerAxeWeapon
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions     = MOUNTED
        Weapon         = PRIMARY     BeorningerBearWeapon
    End

    ArmorSet
        Conditions      = None
        Armor           = BerserkerArmor
        DamageFX        = NormalDamageFX
    End

    ArmorSet
        Conditions      = MOUNTED
        Armor           = EdainBearArmor
        DamageFX        = NormalDamageFX
    End

    MaxSimultaneousOfType    = 6

    VisionRange = 200
    ShroudClearingRange = 250

    VisionSide = 35%
    VisionRear = 25%

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 2.0%


    BountyValue         = 15
    DisplayName         = OBJECT:GasthausBeorninger
    CrushableLevel    = 3
    MountedCrushableLevel = 2
    CrusherLevel = 0
    MountedCrusherLevel = 2

    CrushWeapon = BeorningerBearCrush

    MinCrushVelocityPercent = MINCRUSHVELOCITYPERCENT_HEROTROLLS
    CrushDecelerationPercent = CRUSHDECELERATIONPERCENT_HEROTROLLS

    RamPower = 35
    RamZMult = 0.5


    CommandSet = BeorningerCommandSet




    VoiceAttack                    = BeornVoiceAttack
    VoiceAttackAir                 = BeornVoiceAttack
    VoiceAttackCharge              = BeornVoiceAttack
    VoiceAttackMachine             = BeornVoiceAttackStructure
    VoiceAttackStructure           = BeornVoiceAttackStructure
    VoiceCreated                   = BeornVoiceSelect
    VoiceFullyCreated              = BeornVoiceSelect
    VoiceGuard                     = BeornVoiceMove
    VoiceMove                      = BeornVoiceMove
    VoiceMoveToCamp                = BeornVoiceMove
    VoiceMoveWhileAttacking        = BeornVoiceMove
    VoicePriority                  = 70
    VoiceSelect                    = BeornVoiceSelect
    VoiceSelectBattle              = BeornVoiceSelectinBattle

    SoundImpact                    = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitEvilMenTransportShip  = BeornVoiceMove
        VoiceEnterUnitMordorMumakil         = BeornVoiceMove
        VoiceEnterUnitSlaughterHouse        = BeornVoiceMove
        VoiceGarrison                       = BeornVoiceMove
        VoiceInitiateCaptureBuilding        = BeornVoiceMove
    End

    ClientBehavior = ModelConditionSoundSelectorClientBehavior ModuleTag_MCSoundSelector
        SoundState = MOUNTED
            VoiceAttack           = BearVoiceAttack
            VoiceAttackCharge     = BearVoiceAttack
            VoiceAttackMachine    = BearVoiceAttack
            VoiceAttackStructure  = BearVoiceAttack
            VoiceGuard            = BearVoiceMove
            VoiceMove             = BearVoiceMove
            VoiceSelect           = BearVoiceSelect
            VoiceSelectBattle     = BearVoiceSelectinBattle
        End
    End


    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:ImpactSword02    Animation: Kuhwaldar_SKL.Kuhwaldar_ATKC        Frames: 21 37
        AnimationSound = Sound:ImpactSword02    Animation: Kuhwaldar_SKL.Kuhwaldar_ATKI        Frames: 28 49
        AnimationSound = Sound:ImpactSword02    Animation: Kuhwaldar_SKL.Kuhwaldar_ATKJ        Frames: 19 39
        AnimationSound = Sound:FootstepDirtA    Animation: Kuhwaldar_SKL.Kuhwaldar_RUNA        Frames: 10 20
        AnimationSound = Sound:FootstepDirtA    Animation: Kuhwaldar_SKL.Kuhwaldar_RUNB        Frames: 8 18
        AnimationSound = Sound:FootstepDirtA    Animation: Kuhwaldar_SKL.Kuhwaldar_RUNC        Frames: 10 20 31 41
        AnimationSound = Sound:FootstepDirtA    Animation: Kuhwaldar_SKL.Kuhwaldar_RUND        Frames: 8 18 27 37
        AnimationSound = Sound:BodyFallOrc      Animation: Kuhwaldar_SKL.Kuhwaldar_DIEA        Frames: 43
        AnimationSound = Sound:BodyFallOrc      Animation: Kuhwaldar_SKL.Kuhwaldar_LNDA        Frames: 3
        AnimationSound = Sound:BodyFallOrc      Animation: Kuhwaldar_SKL.Kuhwaldar_LNDB        Frames: 3
        AnimationSound = Sound:BodyFallGeneric2 Animation: Kuhwaldar_SKL.Kuhwaldar_DIEB        Frames: 82
        AnimationSound = Sound:WargMoveFootsteps Animation:CUBear_SKL.CUBear_RUNA Frames:0
    End

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:EMOTION_CELEBRATING    Excluded:DYING ENGAGED    Sound:EmotionMenEvilCompilationVoxCheerSinglesLoop
        ModelCondition = Required:EMOTION_TAUNTING       Excluded:DYING ENGAGED    Sound:EmotionMenEvilCompilationVoxTauntSinglesLoop
        ModelCondition = Required:EMOTION_POINTING       Excluded:DYING ENGAGED    Sound:EmotionMenEvilCompilationVoxTauntSinglesLoop
        ModelCondition = Required:RAISING_FLAG           Excluded:DYING ENGAGED    Sound:EmotionMenEvilCompilationVoxTauntSinglesLoop
    End

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    CrowdResponseKey = EvilMen1

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Dwarf Dwarf_Male WildMan
    End





    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY SCORE GRAB_AND_DROP HEAVY_MELEE_HITTER CAN_ATTACK ARMY_SUMMARY

    Body = ActiveBody ModuleTag_02
        MaxHealth             = 1200
        MaxHealthDamaged      = 500
        BurningDeathBehavior  = Yes
        BurningDeathFX        = FX_InfantryBurningFlame
        CheerRadius           = EMOTION_CHEER_RADIUS
        DodgePercent          = 80%
    End


    Behavior = CommandButtonHuntUpdate ModuleTag_CommandButtonHuntUpdate
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = FighterHorde
    End

    #include "..\..\..\includes\CaptureBuilding.inc"

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle  =    Yes ATTACK_BUILDINGS
        MoodAttackCheckRate         =    500
        AILuaEventsList             =    InfantryFunctions
        AttackPriority              =    AttackPriority_Infantry
        BurningDeathTime            =    BURNINGDEATH_DURATION_INFANTRY
    End


            Behavior = AutoHealBehavior ModuleTag_MumakilHealing
                        StartsActive          = No
                        TriggeredBy           = Upgrade_ObjectLevel2
                        HealingAmount         = MONSTER_HEAL_AMOUNT
                        HealingDelay          = 1000
                        StartHealingDelay     = MONSTER_HEAL_DELAY
                        HealOnlyIfNotInCombat = Yes
            End






    Behavior = SpecialPowerModule ModuleTag_HorseToggleStarter
         SpecialPowerTemplate      = SpecialAbilityToggleMounted
         UpdateModuleStartsAttack  = Yes
         InitiateSound             = BeornVoiceChange
         StartsPaused = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_HorseToggle
         SpecialPowerTemplate    = SpecialAbilityToggleMounted
         UnpackTime              = GOOD_MOUNT_TIME
         PreparationTime         = 1
         PersistentPrepTime      = 250
         PackTime                = GOOD_MOUNT_TIME
         OpacityTarget            = .3
         AwardXPForTriggering    = 0
    End


    Behavior = AttributeModifierUpgrade ModuleTag_NoFalling
        TriggeredBy                   = Upgrade_ObjectLevel1
        AttributeModifier             = BeorningerKnockback
    End

    LocomotorSet
        Locomotor     = HumanLocomotor
        Condition     = SET_NORMAL
        Speed         = NORMAL_FOOT_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = WargLocomotor
        Condition = SET_MOUNTED
        Speed     = 70
    End

    LocomotorSet
        Locomotor     = RohanGimliLocomotor
        Condition     = SET_WANDER
        Speed         = NORMAL_FOOT_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = BurningDeathLocomotorInfantry
        Condition = SET_BURNINGDEATH
        Speed      = BURNINGDEATH_WANDERSPEED_INFANTRY
    End


    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult                = 1.0
        ShockStunnedTimeLow        = 1400
        ShockStunnedTimeHigh    = 2400
        ShockStandingTime        = 666
    End



    Behavior = ProductionUpdate ProductionUpdateModuleTag
        GiveNoXP = Yes
    End



    Behavior = SlowDeathBehavior ModuleTag_GrabandDrop
        DeathTypes       = NONE +EXTRA_8
        SinkDelay        = 3000
        SinkRate         = 0.60
        DestructionDelay = 10000
        DeathFlags       = DEATH_4
        ShadowWhenDead   = Yes
    End

    Behavior = FireWeaponWhenDeadBehavior ModuleTag_GrabandDropImpact
        RequiredStatus  = DEATH_4
        StartsActive    = Yes
        DelayTime       = 0
        DeathWeapon     = GrabandDropInfantryImpactWarhead
        WeaponOffset    = X:0 Y:0 Z:0
    End

    Behavior = BezierProjectileBehavior ModuleTag_BodyHitHuman
       FirstHeight               = 24
       SecondHeight              = 24
       FirstPercentIndent        = 30%
       SecondPercentIndent       = 70%
       TumbleRandomly            = Yes
       CrushStyle                = Yes
       DieOnImpact               = Yes
       BounceCount               = 1
       BounceDistance            = 40
       BounceFirstHeight         = 24
       BounceSecondHeight        = 24
       BounceFirstPercentIndent  = 20%
       BounceSecondPercentIndent = 80%
       GroundHitFX               = FX_GrabandDropInfantryGroundHit
       GroundBounceFX            = FX_GrabandDropInfantryGroundHit
    End


    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes         = ALL -EXTRA_8
        SinkDelay          = 4000
        SinkRate           = 1.0
        DestructionDelay   = 10000
        Sound              = INITIAL ManEvilGenericVoiceDie
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = HordeMemberCollide ModuleTag_HMC

    End






    Behavior = AISpecialPowerUpdate TheodenToggleMountedAI
        CommandButtonName = Command_GrimbeornTransform
        SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_MOUNTED
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End


    Behavior = AISpecialPowerUpdate IsengardBerserkerCaptureBuildingAI
        CommandButtonName = Command_CaptureBuilding
        SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
    End

    Geometry = CYLINDER
    GeometryMajorRadius = 10.0
    GeometryMinorRadius = 10.0
    GeometryHeight = 21
    GeometryIsSmall = Yes
    Shadow = SHADOW_DECAL
    ShadowSizeX = 20
    ShadowSizeY = 20
    ShadowTexture = ShadowI



    AutoResolveUnitType               = AutoResolveUnit_Monster
    AutoResolveCombatChain            = AutoResolve_MonsterCombatChain

    AutoResolveBody = AutoResolve_IsengardBeserkerBody

    AutoResolveArmor
        Armor = AutoResolve_IsengardBeserkerArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_IsengardBeserkerWeapon
    End
End


ChildObject GasthausBeorninger_Lorien GasthausBeorninger

    WeaponSet
        Conditions     = None
        Weapon         = PRIMARY     BeorningerAxeWeapon_lorien
        AutoChooseSources     = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    Body = ActiveBody ModuleTag_02
        MaxHealth             = 1200
        MaxHealthDamaged      = 500
        BurningDeathBehavior  = Yes
        BurningDeathFX        = FX_InfantryBurningFlame
        CheerRadius           = EMOTION_CHEER_RADIUS
        DodgePercent          = 80%
    End

    LocomotorSet
        Locomotor     = HumanLocomotor
        Condition     = SET_NORMAL
        Speed         = NORMAL_FOOT_MED_MEMBER_SPEED
    End

End

Object BeorningerBear



  SelectPortrait  =  UPBearNew
  ButtonImage     =  HSBearEdain


    Draw = W3DScriptedModelDraw ModuleTag_DRAW

        RandomTexture = dubeorningerbear.tga 0 dubeorningerbear.tga
        RandomTexture = dubeorningerbear2.tga 0 dubeorningerbear.tga

        DefaultModelConditionState
            Model            = DUBear_SKN
        End


        AnimationState                =    FREEFALL MOUNTED
            Animation                =    freefall
                AnimationName        =    CUBear_SKL.CUBear_FLYA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState                =    STUNNED_FLAILING MOUNTED
            Animation                =    JustDie
                AnimationName        =    CUBear_SKL.CUBear_FLYA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End


        AnimationState                =    TURN_LEFT_HIGH_SPEED
            Animation                =    TurnLeft
                AnimationName        =    CUBear_SKL.CUBear_RUNA
                AnimationMode        =    LOOP
                AnimationBlendTime    =    20
            End
        End

        AnimationState                =    TURN_RIGHT_HIGH_SPEED
            Animation                =    TurnLeft
                AnimationName        =    CUBear_SKL.CUBear_RUNA
                AnimationMode        =    LOOP
                AnimationBlendTime    =    20
            End
        End

        AnimationState                =    MOVING TURN_LEFT
            Animation                =    TurnLeft
                AnimationName        =    CUBear_SKL.CUBear_RUNA
                AnimationMode        =    LOOP
            End

        End

        AnimationState                =    MOVING TURN_RIGHT
            Animation                =    TurnRight
                AnimationName        =    CUBear_SKL.CUBear_RUNA
                AnimationMode        =    LOOP
            End

        End

        AnimationState                =    MOVING ACCELERATE
            Animation                =    Accelerate
                AnimationName        =    CUBear_SKL.CUBear_RUNA
                AnimationMode        =    LOOP
            End

        End

        AnimationState                =    MOVING DECELERATE
            Animation                =    Decelerate
                AnimationName        =    CUBear_SKL.CUBear_RUNA
                AnimationMode        =    ONCE
                AnimationSpeedFactorRange    = 0.55 0.55
            End

        End


        AnimationState               =    DYING SPLATTED MOUNTED DEATH_1
            Animation                =    Land
                AnimationName        =    CUBear_SKL.CUBear_LNDA
                AnimationMode        =    ONCE
            End
        End


        AnimationState               =    DYING MOUNTED DEATH_1
            Animation                =    JustDie
                AnimationName        =    CUBear_SKL.CUBear_DIEA
                AnimationMode        =    ONCE
            End
        End

        AnimationState               =    DYING DEATH_1
            Animation                =    JustDie
                AnimationName        =    CUBear_SKL.CUBear_DIEA
                AnimationMode        =    ONCE
            End
        End

        AnimationState               =    DEATH_1
            Animation                =    JustDie
                AnimationName        =    CUBear_SKL.CUBear_DIEA
                AnimationMode        =    ONCE
            End
        End

        AnimationState               =    DYING MOUNTED DEATH_2
            Animation                =    JustDie
                AnimationName        =    CUBear_SKL.CUBear_IDLA
                AnimationMode        =    LOOP
            End
        End

        AnimationState               =    DYING DEATH_2
            Animation                =    JustDie
                AnimationName        =    CUBear_SKL.CUBear_IDLA
                AnimationMode        =    LOOP
            End
        End

        AnimationState               =     DEATH_2
            Animation                =    JustDie
                AnimationName        =    CUBear_SKL.CUBear_IDLA
                AnimationMode        =    LOOP
            End
        End

        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = MountedRunAndFire
                AnimationName       = CUBear_SKL.CUBear_RUNA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState                =    MOVING
            Animation                =    RunA
                AnimationName        =    CUBear_SKL.CUBear_RUNA
                AnimationMode        =    LOOP
            End
             Flags                    =    RANDOMSTART

        End

        AnimationState                =    FIRING_OR_PREATTACK_A
            Animation                =    AttackA1
                AnimationName        =    CUBear_SKL.CUBear_ATKA
                AnimationMode        =    ONCE
                UseWeaponTiming        =    Yes
                AnimationBlendTime  =    10
            End
            Animation                =    AttackA2
                AnimationName        =    CUBear_SKL.CUBear_ATKB
                AnimationMode        =    ONCE
                UseWeaponTiming        =    Yes
                AnimationBlendTime  =    10
            End
        End

        AnimationState                =    FIRING_OR_PREATTACK_B
            Animation                =    AttackA1
                AnimationName        =    CUBear_SKL.CUBear_ATKA
                AnimationMode        =    ONCE
                UseWeaponTiming        =    Yes
                AnimationBlendTime  =    10
            End
            Animation                =    AttackA2
                AnimationName        =    CUBear_SKL.CUBear_ATKB
                AnimationMode        =    ONCE
                UseWeaponTiming        =    Yes
                AnimationBlendTime  =    10
            End
        End

        AnimationState                =    FIRING_OR_PREATTACK_C
            Animation                =    AttackA1
                AnimationName        =    CUBear_SKL.CUBear_ATKA
                AnimationMode        =    ONCE
                UseWeaponTiming        =    Yes
                AnimationBlendTime  =    10
            End
            Animation                =    AttackA2
                AnimationName        =    CUBear_SKL.CUBear_ATKB
                AnimationMode        =    ONCE
                UseWeaponTiming        =    Yes
                AnimationBlendTime  =    10
            End
        End


        AnimationState                =    RAISING_FLAG
                Animation           =    CHRA
                    AnimationName   =    CUBear_SKL.CUBear_IDLA
                    AnimationMode   =    LOOP
                End
        End

        AnimationState                =    EMOTION_CELEBRATING
                Animation
                    AnimationName   =    CUBear_SKL.CUBear_IDLF
                    AnimationMode   =    LOOP
                End
        End

        AnimationState                =    EMOTION_TAUNTING
                Animation
                    AnimationName   =    CUBear_SKL.CUBear_IDLF
                    AnimationMode   =    LOOP
                End
        End

        AnimationState                =    SELECTED
            SimilarRestart            =   Yes
            StateName                =    AtAttentionIdle
            Animation                =    ATNB
                AnimationName        =    CUBear_SKL.CUBear_ATNA
                AnimationMode        =    LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
                if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
            EndScript
        End

        TransitionState                =    TRANS_Select
            Animation                =    ATNA
                AnimationName        =    CUBear_SKL.CUBear_ATNA
                AnimationMode        =    ONCE
            End
        End

        IdleAnimationState
            Animation = IDLB
                AnimationName        =    CUBear_SKL.CUBear_IDLA
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationPriority   =    15
            End
            Animation = IDLD
                AnimationName        =    CUBear_SKL.CUBear_IDLB
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationPriority   =    10
            End
            Animation = IDLC
                AnimationName        =    CUBear_SKL.CUBear_IDLC
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationPriority   =    10
            End
            Animation = IDLC
                AnimationName        =    CUBear_SKL.CUBear_IDLD
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationPriority   =    10
            End
            Animation = IDLC
                AnimationName        =    CUBear_SKL.CUBear_IDLF
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationPriority   =    5
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
        End
 End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End


     #include "..\..\..\includes\StunDrawModuleMedium.inc"



      Side                = Lothlorien
      EditorSorting       = UNIT
      ThreatLevel         = 2.0
      TransportSlotCount  = TRANSPORTSLOTCOUNT_UNIT

      WeaponSet
          Conditions     = None
          Weapon         = PRIMARY   BeorningerBearWeapon
      End

      ArmorSet
          Conditions      = None
          Armor           = EdainBearArmor
          DamageFX        = NormalDamageFX
      End

      VisionRange         = 200
      ShroudClearingRange = 250

      VisionSide         = 35%
      VisionRear         = 25%

      MaxVisionBonusPercent     = 300%
      VisionBonusTestRadius     = 200
      VisionBonusPercentPerFoot = 2.0%

      BountyValue         = ISENGARD_WARGPACK_BOUNTY_VALUE
      DisplayName         = OBJECT:GasthausBeorninger
      CrushableLevel      = 3
      CrusherLevel        = 2
      UseCrushAttack      = Yes
      CrushWeapon         = HeroCrush

      CommandSet = HoehlenBaerCommandSet
      CommandPoints = 15

      CrushKnockback = 40
      CrushZFactor = 1.0



            VoiceAttack           = BearVoiceAttack
            VoiceAttackCharge     = BearVoiceAttack
            VoiceAttackMachine    = BearVoiceAttack
            VoiceAttackStructure  = BearVoiceAttack
            VoiceGuard            = BearVoiceMove
            VoiceMove             = BearVoiceMove
            VoiceSelect           = BearVoiceSelect
            VoiceSelectBattle     = BearVoiceSelectinBattle

            SoundImpact            = ImpactHorse

      ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
          MaxUpdateRangeCap = 800
        AnimationSound = Sound:WargMoveFootsteps Animation:IUWarg_SKL.IUWarg_RUNA Frames:0
        AnimationSound = Sound:WargMoveFootsteps Animation:IUWARG_SKL.IUWARG_TNL1 Frames:0
        AnimationSound = Sound:WargMoveFootsteps Animation:IUWARG_SKL.IUWARG_TNR1 Frames:0
        AnimationSound = Sound:WargMoveFootsteps Animation:IUWARG_SKL.IUWARG_TRNL Frames:0
        AnimationSound = Sound:WargMoveFootsteps Animation:IUWARG_SKL.IUWARG_TRNR Frames:0
        AnimationSound = Sound:WargMoveFootsteps Animation:IUWARG_SKL.IUWARG_ACCL Frames:0
      End

      Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
          Key = Warg
      End



      RadarPriority = UNIT
      ThingClass = HORDE_UNIT

      KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY SCORE GRAB_AND_DROP

      Body = ActiveBody BodyModuleTag
          CheerRadius         = EMOTION_CHEER_RADIUS
          MaxHealth           = 1200
          MaxHealthDamaged    = 500
          BurningDeathBehavior = Yes
          BurningDeathFX      = FX_CavalryBurningFlame
      End


      Behavior = AIUpdateInterface ModuleTag_03
          AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
          AILuaEventsList        = WargRiderFunctions
          BurningDeathTime    = BURNINGDEATH_DURATION_CAVALRY
      End

      LocomotorSet
          Locomotor = NormalHorseHordeMemberLocomotor
          Condition = SET_NORMAL
          Speed     = NORMAL_MOUNTED_FAST_MEMBER_SPEED
      End

      LocomotorSet
          Locomotor = BurningDeathLocomotorCavalry
          Condition = SET_BURNINGDEATH
          Speed      = BURNINGDEATH_WANDERSPEED_CAVALRY
      End

      Behavior = PhysicsBehavior ModuleTag_04
          GravityMult       = 1.0
          ShockStandingTime = 2533
      End

      Behavior = HordeMemberCollide ModuleTag_HMC

      End

      Behavior = SquishCollide ModuleTag_06

      End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End


    Behavior = AttributeModifierUpgrade ModuleTag_NoFalling
        TriggeredBy                   = Upgrade_ObjectLevel1
        AttributeModifier             = BeorningerKnockback
    End

      Behavior = SlowDeathBehavior ModuleTag_08
          DeathTypes     = ALL -FADED
          SinkDelay     = 5000
          SinkRate     = 1.50
          DestructionDelay = 17000
          Sound         = INITIAL WargVoxDie
          DeathFlags = DEATH_1
      End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 2500
        DestructionDelay = 2500
        Sound = INITIAL SpellGenericUnsummonFasterMS
        DeathFlags = DEATH_2
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName  = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName  = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName  = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End


  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19
  ShadowSizeY = 19
  ShadowTexture = ShadowI
End

ChildObject BeorningerBear_Summoned BeorningerBear

     CommandPoints = 0

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime         = 220000
        MaxLifetime        = 220000
        DeathType         = FADED
    End
End


ChildObject BeorningerBear_Slaved BeorningerBear

      EvaEnemyObjectSightedEvent = CaveTrollCreepSighted
      EvaEnemyObjectSightedAfterRespawnEvent = CaveTrollCreepSighted

    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS CAVALRY CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT NO_FREEWILL_ENTER PATH_THROUGH_INFANTRY SCARY CAN_ATTACK_WALLS CREEP SCORE SIEGEENGINE

    VisionRange = CREEP_VISION
    DisplayName = OBJECT:GenericBar
    Behavior = SlavedUpdate ModuleTag_Slave
        GuardMaxRange       = 300
        GuardWanderRange    = 100
        UseSlaverAsControlForEvaObjectSightedEvents = Yes
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle    = Yes ATTACK_BUILDINGS
        AILuaEventsList               = BaerFunctions
        AttackPriority                = AttackPriority_Cavalry
    End

End

ChildObject GasthausBeorningerFree GasthausBeorninger
    BuildCost     = 0
End

