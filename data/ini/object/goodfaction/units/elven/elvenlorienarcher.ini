Object ElvenLorienArcher

    UpgradeCameo1      = Upgrade_FireArrows
    ButtonImage	       = UILorienArchers_NewModel
    SelectPortrait     = UPLorienArcher_NewModel

    Draw = W3DHordeModelDraw ModuleTag_01

    OkToChangeModelColor = Yes
    StaticModelLODMode   = Yes

    LodOptions                            = LOW
        AllowMultipleModels                = ALLOW_MULTIPLE_MODELS_LOW
        MaxRandomTextures                = MAX_RANDOM_TEXTURES_LOW
        MaxRandomAnimations                = MAX_RANDOM_ANIMATIONS_LOW
        MaxAnimFrameDelta                = MAX_ANIM_FRAME_DELTA_LOW
    End

    LodOptions                            = MEDIUM
        AllowMultipleModels                = ALLOW_MULTIPLE_MODELS_MED
        MaxRandomTextures                = MAX_RANDOM_TEXTURES_MED
        MaxRandomAnimations                = MAX_RANDOM_ANIMATIONS_MED
        MaxAnimFrameDelta                = MAX_ANIM_FRAME_DELTA_MED
    End

    LodOptions                            = HIGH
        AllowMultipleModels                = ALLOW_MULTIPLE_MODELS_HIGH
        MaxRandomTextures                = MAX_RANDOM_TEXTURES_HIGH
        MaxRandomAnimations                = MAX_RANDOM_ANIMATIONS_HIGH
        MaxAnimFrameDelta                = MAX_ANIM_FRAME_DELTA_HIGH
    End

        RandomTextureFixedRandomIndex    = Yes

    RandomTexture = eulorarch_L.tga 0 euhaldir_ha.tga
    RandomTexture = eulorien_qvr_L.tga 0 eulorien_qvr.tga
    RandomTexture = char_el_gear_01_L.tga 0 char_el_gear_01.tga



        DefaultModelConditionState
            Model                        = EUHALDIR_ARM
            Skeleton                    = EUHaldir_SKL

            WeaponLaunchBone            = PRIMARY ARROW
            WeaponLaunchBone            = SECONDARY ARROWNOCK
            WeaponLaunchBone            = TERTIARY ARROW
        End


        ModelConditionState                = WEAPONSET_PLAYER_UPGRADE USER_4
            Model                        = EUHALDIR_ARM
            Skeleton                    = EUHaldir_SKL

            WeaponLaunchBone            = PRIMARY ARROW
            WeaponLaunchBone            = SECONDARY ARROWNOCK
            WeaponLaunchBone            = TERTIARY ARROW


        End




        AnimationState                        = PASSENGER
            StateName                        = STATE_Grabbed
            Animation                        = Bow
                AnimationName                = EUHaldir_FLYA
                AnimationMode                = LOOP
            End
        End
        AnimationState                        = PASSENGER WEAPONSET_TOGGLE_1
            StateName                        = STATE_Grabbed
            Animation                        = Sword
                AnimationName                = EUHaldir_FLYB
                AnimationMode                = LOOP
            End
        End


        AnimationState                        = FREEFALL
            StateName                        = STATE_Falling
            Animation                        = Bow
                AnimationName                = EUHaldir_FLYA
                AnimationMode                = LOOP
                AnimationBlendTime            = 10
                AnimationSpeedFactorRange    = 0.5    0.5
            End
        End
        AnimationState                        = FREEFALL WEAPONSET_TOGGLE_1
            StateName                        = STATE_Falling
            Animation                        = Sword
                AnimationName                = EUHaldir_FLYB
                AnimationMode                = LOOP
                AnimationBlendTime            = 10
                AnimationSpeedFactorRange    = 0.24 0.24
            End
        End


        AnimationState                        = STUNNED_FLAILING
            StateName                        = STATE_Fly
            Animation
                AnimationName                = EUHaldir_FLYA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
            Flags                            = MAINTAIN_FRAME_ACROSS_STATES2
        End
        AnimationState                        = STUNNED_FLAILING WEAPONSET_TOGGLE_1
            StateName                        = STATE_Fly
            Animation                        = Sword
                AnimationName                = EUHaldir_FLYB
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
            Flags                            = MAINTAIN_FRAME_ACROSS_STATES2
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "Ready_Bow" or PrevState == "Moving_Bow" or PrevState == "Bored_Bow"
                then
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "WantSword"
                elseif PrevState == "STATE_Fly"
                then
                    if PrevAnim == "Bow" or PrevAnim == "WantSword"
                    then
                        CurDrawableShowSubObject("arrow")
                        CurDrawableShowSubObject("arrownock")
                        return "WantSword"
                    end
                end
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                return "Sword"
            EndScript
        End


        AnimationState                        = DYING SPLATTED
            StateName                        = STATE_Dead
            Animation                        = Bow
                AnimationName                = EUHaldir_LNDA
                AnimationMode                = ONCE
            End
        End
        AnimationState                        = DYING SPLATTED WEAPONSET_TOGGLE_1
            StateName                        = STATE_Dead
            Animation                        = Sword
                AnimationName                = EUHaldir_LNDB
                AnimationMode                = ONCE
            End
        End


        AnimationState                        = DYING
            Animation                        = Bow1
                AnimationName                = EUHaldir_DIEBV5
                AnimationMode                = ONCE
            End
            Animation                        = Bow2
                AnimationName                = EUHaldir_DIEBV5
                AnimationMode                = ONCE
            End
            Animation                        = WantBow
                AnimationName                = EUHaldir_LNDA
                AnimationMode                = ONCE
            End
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_Fly"
                then
                    CurDrawableHideSubObject("ArrowNock")
                    CurDrawableHideSubObject("arrow")
                    return "WantBow"
                end
                if GetClientRandomNumberReal(0,2) < 1
                then
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "Bow1"
                else
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "Bow2"
                end
            EndScript
        End
        AnimationState                        = DYING WEAPONSET_TOGGLE_1
            Animation                        = Sword1
                AnimationName                = EUHaldir_DIESv5
                AnimationMode                = ONCE
            End
            Animation                        = Sword2
                AnimationName                = EUHaldir_DIESV5
                AnimationMode                = ONCE
            End
            Animation                        = WantSword
                AnimationName                = EUHaldir_LNDB
                AnimationMode                = ONCE
            End
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_Fly"
                then
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "WantSword"
                end
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if GetClientRandomNumberReal(0,2) < 1
                then
                    return "Sword1"
                else
                    return "Sword2"
                end
            EndScript
        End


        AnimationState                        = DYING DEATH_2
            Animation                        = FadeOut
                AnimationName                = EUHaldir_DIEBV5
                AnimationMode                = ONCE
            End
        End
        AnimationState                        = DYING DEATH_2 WEAPONSET_TOGGLE_1
            Animation                        = FadeOut
                AnimationName                = EUHaldir_DIESV5
                AnimationMode                = LOOP
            End
        End


        AnimationState                        = STUNNED_STANDING_UP
            StateName                        = STATE_GetUp
            Animation                        = Bow
                AnimationName                = EUHaldir_GTPB
                AnimationMode                = ONCE
                AnimationSpeedFactorRange    = 1.42 1.42
            End
            Animation                        = WantBow
                AnimationName                = EUHaldir_GTPSX1
                AnimationMode                = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_GetUp" or PrevState == "STATE_Land"
                then
                    if PrevAnim == "WantBow" or PrevAnim == "Sword"
                    then
                        CurDrawableHideSubObject("ArrowNock")
                        CurDrawableHideSubObject("arrow")
                        return "WantBow"
                    end
                else
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "Bow"
                end
            EndScript
        End
        AnimationState                        = STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
            StateName                        = STATE_GetUp
            Animation                        = Sword
                AnimationName                = EUHaldir_GTPSX1
                AnimationMode                = ONCE
                AnimationSpeedFactorRange    = 1.2    1.2
            End
            Animation                        = WantSword
                AnimationName                = EUHaldir_GTPB
                AnimationMode                = ONCE
            End
            Flags                            = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_GetUp" or PrevState == "STATE_Land"
                then
                    if PrevAnim == "Bow" or PrevAnim == "WantSword"
                    then
                        CurDrawableShowSubObject("arrow")
                        CurDrawableShowSubObject("arrownock")
                        return "WantSword"
                    end
                end
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                return "Sword"
            EndScript
        End


        AnimationState                        = STUNNED
            StateName                        = STATE_Land
            Animation                        = Bow
                AnimationName                = EUHaldir_LNDA
                AnimationMode                = ONCE
            End
            Animation                        = WantBow
                AnimationName                = EUHaldir_LNDB
                AnimationMode                = ONCE
            End
            Flags                            = MAINTAIN_FRAME_ACROSS_STATES3
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_Fly"
                then
                    if PrevAnim == "WantBow" or PrevAnim == "Sword"
                    then
                        CurDrawableHideSubObject("ArrowNock")
                        CurDrawableHideSubObject("arrow")
                        return "WantBow"
                    end
                end
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                return "Bow"
            EndScript
        End
        AnimationState                        = STUNNED WEAPONSET_TOGGLE_1
            StateName                        = STATE_Land
            Animation                        = Sword
                AnimationName                = EUHaldir_LNDB
                AnimationMode                = ONCE
            End
            Animation                        = WantSword
                AnimationName                = EUHaldir_LNDA
                AnimationMode                = ONCE
            End
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_Fly"
                then
                    if PrevAnim == "WantSword" or PrevAnim == "Bow"
                    then
                        CurDrawableShowSubObject("arrow")
                        CurDrawableShowSubObject("arrownock")
                        return "WantSword"
                    end
                end
                Flags                        = MAINTAIN_FRAME_ACROSS_STATES3
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                return "Sword"
            EndScript
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = EUHaldir_IDLF
                AnimationMode                = LOOP
            End
        End


        AnimationState                        = FIRING_OR_PREATTACK_A
            StateName                        = Attacking_Bow
            Animation
                AnimationName                = EUHaldir_ATA2
                AnimationMode                = ONCE
                UseWeaponTiming                = Yes
                AnimationBlendTime            = 20
            End
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("ArrowNock")
            EndScript
        End
        AnimationState                        = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            StateName                        = Ready_Sword

            Animation                        = AttackWithSwordA
                AnimationName                = EUHaldir_ATKSV2
                AnimationMode                = ONCE
                UseWeaponTiming                = Yes
            End
            Animation                        = AttackWithSwordB
                AnimationName                = EUHaldir_ATKSV2
                AnimationMode                = ONCE
                UseWeaponTiming                = Yes
            End
            Animation                        = AttackWithSwordD
                AnimationName                = EUHaldir_ATKSV4
                AnimationMode                = ONCE
                UseWeaponTiming                = Yes
            End
            BeginScript
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState                        = SPECIAL_WEAPON_ONE
            Animation
                AnimationName                = EUHaldir_SPCA
                AnimationMode                = ONCE
            End
            FrameForPristineBonePositions    = 60
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
            EndScript
        End


        AnimationState                        = MOVING
            StateName                        = Moving_Bow
            Animation
                AnimationName                = EUHaldir_RUNB
                AnimationMode                = LOOP
            End
            Flags = RANDOMSTART
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Moving_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Moving") end
            EndScript
        End
        AnimationState                        = MOVING WEAPONSET_TOGGLE_1
            StateName                        = Moving_Sword
            Animation
                AnimationName                = EUHaldir_RUNS
                AnimationMode                = LOOP
            End
            Flags = RANDOMSTART
            BeginScript
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Moving_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword_Moving") end
            EndScript
        End


        AnimationState                        = PREATTACK_A
            Animation                        = ReadyToDrawn
                AnimationName                = EUHaldir_ATA1
                AnimationMode                = ONCE
                AnimationBlendTime            = 0
                UseWeaponTiming                = Yes
            End
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("ArrowNock")
            EndScript
        End

        AnimationState                        = FIRING_OR_RELOADING_A
            StateName                        = STATE_Firing
            Animation
                AnimationName                = EUHaldir_ATA2
                AnimationMode                = ONCE
                AnimationBlendTime            = 30
                UseWeaponTiming                = Yes
                AnimationSpeedFactorRange    = 1.5 1.5
            End
            Flags                            = START_FRAME_FIRST
            BeginScript
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("ArrowNock")
            EndScript
        End


        AnimationState                        = MOVING BACKING_UP
            StateName                        = STATE_BackingUp
            Animation                        = Bow
                AnimationName                = EUHaldir_BAKB
                AnimationMode                = LOOP
            End
            Animation                        = WantBow
                AnimationName                = EUHaldir_BAKS
                AnimationMode                = LOOP
            End
            Flags                            = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                if PrevState == "STATE_BackingUp"
                then
                    if PrevAnim == "WantBow" or PrevAnim == "Sword"
                    then
                        return "WantBow"
                    end
                end
                return "Bow"
            EndScript
        End
        AnimationState                        = MOVING BACKING_UP WEAPONSET_TOGGLE_1
            StateName                        = STATE_BackingUp
            Animation                        = Sword
                AnimationName                = EUHaldir_BAKS
                AnimationMode                = LOOP
            End
            Animation                        = WantSword
                AnimationName                = EUHaldir_BAKS
                AnimationMode                = LOOP
            End
            Flags                            = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                if PrevState == "STATE_BackingUp"
                then
                    if PrevAnim == "Bow" or PrevAnim == "WantSword"
                    then
                        return "WantSword"
                    end
                end
                return "Sword"
            EndScript
        End


        AnimationState                        = CONTINUOUS_FIRE_MEAN
            Animation                        = HangFrameWhileCoasting
                AnimationName                = EUHaldir_ATA2
                AnimationMode                = MANUAL
                AnimationBlendTime            = 20
            End
            Flags                            = START_FRAME_LAST
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("ARROWNOCK")
                if CurDrawablePrevAnimationState() == "STATE_Firing" then CurDrawableAllowToContinue() end
            EndScript









        End
        AnimationState                        = CONTINUOUS_FIRE_SLOW
            StateName                        = Ready_Bow
            Animation                        = PutAwayArrow
                AnimationName                = EUHaldir_ATA3
                AnimationMode                = ONCE
            End
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("ARROWNOCK")
            EndScript
        End


        AnimationState                        = ATTACKING
            StateName                        = Ready_Bow
            Animation                        = IDLB
                AnimationName                = EUHaldir_IDLB
                AnimationMode                = LOOP
            End
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Bored_Bow" then CurDrawableSetTransitionAnimState("TRANS_BR_Bow") end
                if Prev == "Selected_Bow" then CurDrawableSetTransitionAnimState("TRANS_SelectedToReady_Bow") end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                end
            EndScript
        End
        AnimationState                        = ATTACKING WEAPONSET_TOGGLE_1
            StateName                        = Ready_Sword
            Animation                        = Alert_1
                AnimationName                = EUHaldir_IDLST1
                AnimationMode                = LOOP
            End
            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if Prev == "Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_BR_Sword") end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                end
            EndScript
        End


        AnimationState                        = ENGAGED WEAPONSET_TOGGLE_1
            StateName                        = Ready_Bow
            Animation                        = IDLB
                AnimationName                = EUHaldir_IDLB
                AnimationMode                = LOOP
            End
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Bored_Bow"        then CurDrawableSetTransitionAnimState("TRANS_BR_Bow")                end
                if Prev == "Selected_Bow"    then CurDrawableSetTransitionAnimState("TRANS_SelectedToReady_Bow")                end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                end
            EndScript
        End
        AnimationState                        = ENGAGED WEAPONSET_TOGGLE_1
            StateName                        = Ready_Sword
            Animation                        = Alert_1
                AnimationName                = EUHaldir_IDLST1
                AnimationMode                = LOOP
            End
            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if Prev == "Bored_Sword"        then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")            end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                end
            EndScript
        End


        AnimationState                        = EMOTION_ALERT
            StateName                        = Ready_Bow
            Animation                        = IDLB
                AnimationName                = EUHaldir_IDLB
                AnimationMode                = LOOP
            End
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Bored_Bow"        then CurDrawableSetTransitionAnimState("TRANS_BR_Bow") end
                if Prev == "Selected_Bow"    then CurDrawableSetTransitionAnimState("TRANS_SelectedToReady_Bow") end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                end
            EndScript
        End
        AnimationState                        = EMOTION_ALERT WEAPONSET_TOGGLE_1
            StateName                        = Ready_Sword
            Animation                        = Alert_1
                AnimationName                = EUHaldir_IDLST1
                AnimationMode                = LOOP
            End
            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if Prev == "Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_BR_Sword") end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                end
            EndScript
        End


        AnimationState                        = EMOTION_CELEBRATING
            StateName                        = STATE_Emotion_Bow
            Animation                        = Bow
                AnimationName                = EUHaldir_CHRB
                AnimationMode                = ONCE
            End
            Animation                        = Bow2
                AnimationName                = EUHaldir_CHRB
                AnimationMode                = ONCE
            End
            Flags                            = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SelectedToReady_Bow")
                end
            EndScript
        End
        AnimationState                        = EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
            StateName                        = STATE_Emotion_Sword
            Animation                        = Sword
                AnimationName                = EUHaldir_CHRS
                AnimationMode                = ONCE
            End
            Animation                        = Sword2
                AnimationName                = EUHaldir_CHRS
                AnimationMode                = ONCE
            End
            Flags                            = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Bored_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
                end
            EndScript
        End



        AnimationState                        = EMOTION_TAUNTING
            StateName                        = STATE_Emotion_Bow
            Animation                        = Bow1
                AnimationName                = EUHaldir_TNTA
                AnimationMode                = ONCE
            End
            Animation                        = Bow2
                AnimationName                = EUHaldir_TNTA
                AnimationMode                = ONCE
            End
            Flags                            = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SelectedToReady_Bow")
                elseif PrevState == "Bored_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Bow")
                end
            EndScript
        End
        AnimationState                        = EMOTION_TAUNTING WEAPONSET_TOGGLE_1
            StateName                        = STATE_Emotion_Sword
            Animation                        = Sword
                AnimationName                = EUHaldir_TNTB
                AnimationMode                = ONCE
            End
            Animation                        = Sword2
                AnimationName                = EUHaldir_TNTB
                AnimationMode                = ONCE
            End
            Flags                            = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")
                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Sword"
                    then
                        CurDrawableAllowToContinue()
                elseif PrevState == "Bored_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
                end
            EndScript
        End


        AnimationState                        = EMOTION_POINTING
            StateName                        = STATE_Emotion_Bow
            Animation                        = Bow
                AnimationName                = EUHaldir_PNTA
                AnimationMode                = ONCE
            End
            Animation                        = Bow2
                AnimationName                = EUHaldir_PNTA
                AnimationMode                = ONCE
            End
            Flags                            = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SelectedToReady_Bow")
                elseif PrevState == "Bored_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Bow")
                end
            EndScript
        End
        AnimationState                        = EMOTION_POINTING WEAPONSET_TOGGLE_1
            StateName                        = STATE_Emotion_Sword
            Animation                        = Sword
                AnimationName                = EUHaldir_PNTB
                AnimationMode                = ONCE
            End
            Animation                        = Sword2
                AnimationName                = EUHaldir_PNTB
                AnimationMode                = ONCE
            End
            Flags                            = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Bored_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
                end
            EndScript
        End


        AnimationState                         = HIT_REACTION HIT_LEVEL_1
            StateName                        = Bored_Bow
            Animation
                AnimationName                = EUHaldir_HITA
                AnimationMode                 = ONCE
                AnimationSpeedFactorRange    = .9 .9
            End
        End
        AnimationState                        = HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
            StateName                        = Bored_Sword
            Animation
                AnimationName                = EUHaldir_HITE
                AnimationMode                = ONCE
            End
        End

        AnimationState                        = RAISING_FLAG
            StateName                        = STATE_Emotion_Bow
            Animation                        = Bow
                AnimationName                = EUHaldir_CHRB
                AnimationMode                = ONCE
            End
            Animation                        = Bow2
                AnimationName                = EUHaldir_CHRB
                AnimationMode                = ONCE
            End
            Flags                            = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                        = SELECTED
            StateName                        = Selected_Bow
            Animation                        = ATNE
                AnimationName                = EUHaldir_ATNE
                AnimationMode                = LOOP
            End
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Emotion_Bow" or Prev == "STATE_Emotion_Sword" then CurDrawableAllowToContinue() end
                if Prev == "Bored_Bow" then CurDrawableSetTransitionAnimState("TRANS_BoredToSelected_Bow") end
                if Prev == "Ready_Bow" then CurDrawableSetTransitionAnimState("TRANS_RS_Bow") end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Selected")
                end
            EndScript
        End

        AnimationState                        = RAISING_FLAG WEAPONSET_TOGGLE_1
            StateName                        = STATE_Emotion_Sword
            Animation                        = Sword
                AnimationName                = EUHaldir_CHRS
                AnimationMode                = ONCE
            End
            Animation                        = Sword2
                AnimationName                = EUHaldir_CHRS
                AnimationMode                = ONCE
            End
            Flags                            = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                        = SELECTED WEAPONSET_TOGGLE_1
            StateName                        = Selected_Sword
            Animation                        = ATNA
                AnimationName                = EUHaldir_ATNS
                AnimationMode                = LOOP
            End
            BeginScript
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Emotion_Bow" or Prev == "STATE_Emotion_Sword" then CurDrawableAllowToContinue() end
                if Prev == "Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_BoredToSelected_Sword") end
                if Prev == "Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_ReadyToSelected_Sword") end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword" or PrevAnim == "EUHaldir_STHB"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Selected")
                end
            EndScript
        End

        AnimationState                        = WEAPONSET_TOGGLE_1
            StateName                        = Bored_Sword
            Animation                        = Idle_Sword1
                AnimationName                = EUHaldir_IDLF
                AnimationMode                = ONCE
            End
            Animation                        = Idle_Sword2
                AnimationName                = EUHaldir_IDLF
                AnimationMode                = ONCE
            End
            Animation                        = Idle_Sword3
                AnimationName                = EUHaldir_IDLF
                AnimationMode                = ONCE
            End
            Animation                        = IdleNoFidget
                AnimationName                = EUHaldir_IDLF
                AnimationMode                = ONCE
                AnimationPriority            = 20
            End
            Animation                        = IdleNoFidget2
                AnimationName                = EUHaldir_IDLF
                AnimationMode                = ONCE
                AnimationPriority            = 0
            End
            Flags                            = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "TRANS_SelectedToBored_Sword" or Prev == "TRANS_RB_Sword" then return "IdleNoFidget" end
                if Prev == "Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBored_Sword") end
                if Prev == "Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_RB_Sword") end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Selected")
                end
            EndScript
        End


        IdleAnimationState
            StateName                        = Bored_Bow
            Animation                        = IdleBowB
                AnimationName                = EUHaldir_IDLE
                AnimationMode                = ONCE
            End
            Animation                        = IdleBowD
                AnimationName                = EUHaldir_IDLE
                AnimationMode                = ONCE
            End
            Animation                        = IdleNoFidget
                AnimationName                = EUHaldir_IDLE
                AnimationMode                = ONCE
                AnimationPriority            = 20
            End
            Animation                        = IdleNoFidget2
                AnimationName                = EUHaldir_IDLE
                AnimationMode                = ONCE
                AnimationPriority            = 10
            End
            Flags                            = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "TRANS_SelectedToBored_Bow" or Prev == "TRANS_RB_Bow" then return "IdleNoFidget" end
                if Prev == "Selected_Bow" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBored_Bow") end
                if Prev == "Ready_Bow" then CurDrawableSetTransitionAnimState("TRANS_RB_Bow") end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Selected")
                end
            EndScript
        End




        TransitionState                        = TRANS_BoredToSelected_Bow
            Animation
                AnimationName                = EUHaldir_ATNB
                AnimationMode                = ONCE
                AnimationBlendTime            = 10
            End
        End


        TransitionState                        = TRANS_SelectedToReady_Bow
            Animation                        = ATNE
                AnimationName                = EUHaldir_IDLB
                AnimationMode                = ONCE
                AnimationBlendTime            = 10
            End
        End


        TransitionState                        = TRANS_SelectedToBored_Bow
            Animation
                AnimationName                = EUHaldir_ATNB
                AnimationMode                = ONCE_BACKWARDS
            End
            Flags                            = START_FRAME_LAST
        End


        TransitionState                        = TRANS_RS_Bow
            Animation                        = ATNF
                AnimationName                = EUHaldir_IDLB
                AnimationMode                = ONCE_BACKWARDS
                AnimationBlendTime            = 10
            End
            Flags                            = START_FRAME_LAST
        End


        TransitionState                        = TRANS_BR_Bow
            Animation                        = IDLB
                AnimationName                = EUHaldir_IDLST1
                AnimationMode                = ONCE
                AnimationBlendTime            = 20
            End
        End


        TransitionState                        = TRANS_RB_Bow
            Animation                        = IDLD
                AnimationName                = EUHaldir_IDLB
                AnimationMode                = ONCE
                AnimationBlendTime            = 20
            End
        End


        TransitionState                    = TRANS_BoredToSelected_Sword
            Animation                    = ATNA
                AnimationName            = EUHaldir_ATNA
                AnimationMode            = ONCE
            End
        End


        TransitionState                    = TRANS_SR_Sword
            Animation                    = ATNC
                AnimationName            = EUHaldir_STHA
                AnimationMode            = ONCE
            End
        End


        TransitionState                    = TRANS_SelectedToBored_Sword
            Animation                    = ATNA
                AnimationName            = EUHaldir_ATNA
                AnimationMode            = ONCE_BACKWARDS
            End
            Flags                        = START_FRAME_LAST
        End


        TransitionState                    = TRANS_ReadyToSelected_Sword
            Animation                    = ATNC
                AnimationName            = EUHaldir_IDLST1
                AnimationMode            = ONCE_BACKWARDS
                AnimationBlendTime        = 20
            End
            Flags                        = START_FRAME_LAST
        End


        TransitionState                    = TRANS_BR_Sword
            Animation                    = ATNS
                AnimationName            = EUHaldir_STHA
                AnimationMode            = ONCE
                AnimationBlendTime        = 20
            End
        End


        TransitionState                    = TRANS_RB_Sword
            Animation                    = IDLG
                AnimationName            = EUHaldir_STHA
                AnimationMode            = ONCE
                AnimationBlendTime        = 20
            End
        End



        TransitionState                    = TRANS_SwordToBow_Moving
            Animation                    = DrawBow
                AnimationName            = EUHaldir_STHC
                AnimationMode            = ONCE
            End
        End


        TransitionState                    = TRANS_BowToSword_Moving
            Animation                    = DrawSword
                AnimationName            = EUHaldir_STHD
                AnimationMode            = ONCE
            End
        End


        TransitionState                    = TRANS_BowToSword_Ready
            Animation                    = DrawSwords
                AnimationName            = EUHaldir_STHA
                AnimationMode            = ONCE
            End
        End


        TransitionState                    = TRANS_SwordToBow_Ready
            Animation                    = DrawBow
                AnimationName            = EUHaldir_STHB
                AnimationMode            = ONCE
            End
        End


        TransitionState                    = TRANS_BowToSword_Selected
            Animation                    = DrawSwords
                AnimationName            = EUHaldir_STHA
                AnimationMode            = ONCE
            End
        End


        TransitionState                    = TRANS_SwordToBow_Selected
            Animation                    = DrawBow
                AnimationName            = EUHaldir_STHB
                AnimationMode            = ONCE
            End
        End
    End


    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End






    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side         = Lothlorien
    EditorSorting     = UNIT
    ThreatLevel     = 1.0
    ThingClass     = HORDE_UNIT
    CommandPoints     = 4
    ShockwaveResistance          = 20

    TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT

    WeaponSet
        Conditions         = None
        Weapon             = PRIMARY    LorienElvenBowEdain
        Weapon             = TERTIARY   LorienElvenBowEdainBombard
        AutoChooseSources  = PRIMARY    FROM_PLAYER FROM_SCRIPT FROM_AI
        AutoChooseSources  = TERTIARY   FROM_PLAYER FROM_SCRIPT
    End

    WeaponSet
        Conditions         = CLOSE_RANGE CONTESTING_BUILDING
        Weapon             = PRIMARY    LorienElvenBowEdain
        Weapon             = SECONDARY  ElbenBowMelee
        Weapon             = TERTIARY   LorienElvenBowEdainBombard
        OnlyAgainst        = PRIMARY    STRUCTURE
        AutoChooseSources  = SECONDARY  FROM_PLAYER FROM_SCRIPT FROM_AI
        AutoChooseSources  = TERTIARY   FROM_PLAYER FROM_SCRIPT
    End


    ArmorSet
        Conditions      = None
        Armor           = GOOD_BASIC_10_ACRHERS
        DamageFX        = NormalDamageFX
    End

    ArmorSet
        Conditions      = PLAYER_UPGRADE
        Armor           = GOOD_BASIC_10_ACRHERS_HEAVY_ARMOR
        DamageFX        = NormalDamageFX
    End

    VisionRange = 410
    VisionSide = 35%
    VisionRear = 25%
    VisionBonusPercentPerFoot = 5.0%
    ShroudClearingRange = 410

    BountyValue = ELVEN_LORIENWARRIOR_BOUNTY_VALUE
    DisplayName = OBJECT:ElvenLorienArcher
    CrushableLevel = 0

    CrushRevengeWeapon = RangedInfantryCrushRevenge
    CommandSet = ElvenLorienArcherHordeCommandSet_Edain




    VoiceAttack                                    = ElfWarriorVoiceAttackBow
    VoiceAttackAir                                = ElfWarriorVoiceAttackBow
    VoiceAttackCharge                            = ElfWarriorVoiceAttackCharge
    VoiceAttackMachine                            = ElfWarriorVoiceAttackBow
    VoiceAttackStructure                        = ElfWarriorVoiceAttackBuilding
    VoiceCreated                                = ElfWarriorVoiceSaluteBow
    VoiceFullyCreated                             = ElfWarriorVoiceSaluteBow
    VoiceGuard                                    = ElfWarriorVoiceMove
    VoiceMove                                    = ElfWarriorVoiceMove
    VoiceMoveToCamp                                = ElfWarriorVoiceMoveCamp
    VoiceMoveWhileAttacking                        = ElfWarriorVoiceDisengage
    VoicePriority                                = 50
    VoiceRetreatToCastle                        = ElfWarriorVoiceRetreat
    VoiceSelect                                    = ElfWarriorVoiceSelectMS
    VoiceSelectBattle                             = ElfWarriorVoiceSelectBattle

    VoiceEnterStateAttack                        = ElfWarriorVoiceEnterStateAttackBow
    VoiceEnterStateAttackAir                    = ElfWarriorVoiceEnterStateAttackBow
    VoiceEnterStateAttackCharge                    = ElfWarriorVoiceEnterStateAttackCharge
    VoiceEnterStateAttackMachine                = ElfWarriorVoiceEnterStateAttack
    VoiceEnterStateAttackStructure                = ElfWarriorVoiceEnterStateAttack
    VoiceEnterStateMove                            = ElfWarriorVoiceEnterStateMove
    VoiceEnterStateMoveToCamp                    = ElfWarriorVoiceEnterStateMoveCamp
    VoiceEnterStateMoveWhileAttacking            = ElfWarriorVoiceEnterStateDisengage
    VoiceEnterStateRetreatToCastle                = ElfWarriorVoiceEnterStateRetreat

    SoundImpact                                 = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitElvenTransportShip        = ElfWarriorVoiceMoveShip
        VoiceGarrison                            = ElfWarriorVoiceMoveGarrison
        VoicePrimaryWeaponMode                    = ElvenWarriorVoiceModeBow
        VoiceSecondaryWeaponMode                = ElvenWarriorVoiceModeSword
        VoiceInitiateCaptureBuilding            = ElfWarriorVoiceCaptureBuilding
        VoiceEnterStateInitiateCaptureBuilding    = ElfWarriorVoiceEnterStateCaptureBuilding
        VoiceMoveToTrees                        = ElfWarriorVoiceMoveForest
        VoiceEnterStateMoveToTrees                = ElfWarriorVoiceEnterStateMoveForest
    End

    CrowdResponseKey = Elf

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Elf Elf_Male Unit Infantry Elf_LorienArcher
    End

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:EMOTION_CELEBRATING    Excluded:DYING ENGAGED    Sound:EmotionElfCompilationVoxCheerSinglesLoop
        ModelCondition = Required:EMOTION_TAUNTING        Excluded:DYING ENGAGED    Sound:EmotionElfCompilationVoxTauntSinglesLoop
        ModelCondition = Required:EMOTION_POINTING        Excluded:DYING ENGAGED    Sound:EmotionElfCompilationVoxTauntSinglesLoop
        ModelCondition = Required:RAISING_FLAG            Excluded:DYING ENGAGED    Sound:EmotionElfCompilationVoxTauntSinglesLoop
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:ArrowDrawBow                    Animation:RUElfWar_SKL.RUElfWar_ATKA1    Frames:6
        AnimationSound = Sound:ArrowDrawBow                    Animation:RUElfWar_SKL.RUElfWar_ATKA2    Frames:18

        AnimationSound = Sound:SwordShingClean1ForHordes         Animation:RUElfWar_SKL.RUElfWar_STHA     Frames:24
        AnimationSound = Sound:SwordIntoScabbard1ForHordes        Animation:RUElfWar_SKL.RUElfWar_STHB     Frames:9
        AnimationSound = Sound:WeaponSwitchBowForHordes             Animation:RUElfWar_SKL.RUElfWar_STHB     Frames:15

        AnimationSound = Sound:SwordShingClean1ForHordes         Animation:RUElfWar_SKL.RUElfWar_STHC     Frames:20
        AnimationSound = Sound:SwordIntoScabbard1ForHordes        Animation:RUElfWar_SKL.RUElfWar_STHD     Frames:5
        AnimationSound = Sound:WeaponSwitchBowForHordes         Animation:RUElfWar_SKL.RUElfWar_STHD     Frames:8

        AnimationSound = Sound:SwordShingClean1ForHordes         Animation:RUElfWar_SKL.RUElfWar_RUNC     Frames:14
        AnimationSound = Sound:SwordIntoScabbard1ForHordes         Animation:RUElfWar_SKL.RUElfWar_RUNT     Frames:4
        AnimationSound = Sound:WeaponSwitchBowForHordes         Animation:RUElfWar_SKL.RUElfWar_RUNT     Frames:16

        AnimationSound = Sound:BodyFallSoldier                Animation:RUElfWar_SKL.RUElfWar_LNDA    Frames:9
        AnimationSound = Sound:BodyFallSoldier                Animation:RUElfWar_SKL.RUElfWar_LNDB    Frames:1

        AnimationSound = Sound:BodyFallGenericNoArmor            Animation:RUElfWar_SKL.RUElfWar_DIEB     Frames:82
        AnimationSound = Sound:BodyFallSoldier                Animation:RUElfWar_SKL.RUElfWar_DIEBV5     Frames:25
        AnimationSound = Sound:BodyFallSoldier                Animation:RUElfWar_SKL.RUElfWar_DIESV4     Frames:26
        AnimationSound = Sound:BodyFallGenericNoArmor            Animation:RUElfWar_SKL.RUElfWar_DIESV5    Frames:100
    End



    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS ARCHER INFANTRY SCORE THROWN_OBJECT PATH_THROUGH_EACH_OTHER ATTACK_NEEDS_LINE_OF_SIGHT GRAB_AND_DROP

    Body = ActiveBody ModuleTag_02
        CheerRadius       = EMOTION_CHEER_RADIUS
        MaxHealth         = 550
        MaxHealthDamaged  = 250
        BurningDeathBehavior = Yes
        BurningDeathFX       = FX_InfantryBurningFlame
    End





    Behavior = ArmorUpgrade ArmorUpgradeModuleTag
        TriggeredBy = Upgrade_HeavyArmor
        ArmorSetFlag  = PLAYER_UPGRADE
    End

    Behavior = SubObjectsUpgrade ModuleTag_Making
        TriggeredBy       = Upgrade_AllFactionUpgrade
        HideSubObjects    = GNLT_01 LEG_ARMOR SLDR_01 SWORD
    End

    Behavior = SubObjectsUpgrade Armor_Upgrade
        TriggeredBy       = Upgrade_HeavyArmor
        UpgradeTexture    = euhaldir_ha.tga 0 EULorArch_LH.tga
        UpgradeTexture    = eulorien_qvr.tga    0 eulorien_qvr_L.tga
        UpgradeTexture    = char_el_gear_01.tga 0 char_el_gear_01_L.tga
        RecolorHouse      = Yes
        ShowSubObjects    = SLDR_01
    End

    Behavior = SubObjectsUpgrade Armor_Upgrade2
        TriggeredBy       = Upgrade_LothlorienLongBows
        UpgradeTexture    = euhaldir_ha.tga     0 EULorArch_LH.tga
        UpgradeTexture    = eulorien_qvr.tga    0 eulorien_qvr_LH.tga
        UpgradeTexture    = char_el_gear_01.tga 0 char_el_gear_01_L.tga
        RecolorHouse      = Yes
        ShowSubObjects    = GNLT_01
    End

    Behavior = AttributeModifierUpgrade ModuleTag_SHU
        TriggeredBy       = Upgrade_LothlorienLongBows
        AttributeModifier = LongbowsModifier
    End



    Behavior = WeaponSetUpgrade ModuleTag_WeaponSetUpgradeTag
        TriggeredBy = Upgrade_SilverThornArrows
        CustomAnimAndDuration   = AnimState:USER_4 AnimTime:0 TriggerTime:0
    End


    Behavior = SubObjectsUpgrade ModuleTag_FireArrowSwapUpgrade
        TriggeredBy       = Upgrade_SilverThornArrows
        UpgradeTexture    = euhaldir_ha.tga 0 EULorArch_LH.tga
        UpgradeTexture    = eulorien_qvr.tga    0 eulorien_qvr_LH.tga
        UpgradeTexture    = char_el_gear_01.tga 0 char_el_gear_01_L.tga
        RecolorHouse      = Yes
        ShowSubObjects    = SLDR_01
        ShowSubObjects    = FireArowTip
    End



    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle      = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate             = 500
        CanAttackWhileContained         = Yes
        AILuaEventsList                 = RohanElvenWarriorFunctions
        BurningDeathTime                = BURNINGDEATH_DURATION_INFANTRY
    End

    LocomotorSet
        Locomotor = HumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_FOOT_VERYFAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = HumanWanderLocomotor
        Condition = SET_WANDER
        Speed     = NORMAL_FOOT_VERYFAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = HumanPanicLocomotor
        Condition = SET_PANIC
        Speed     = NORMAL_FOOT_VERYFAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = HumanScaredLocomotor
        Condition = SET_SCARED
        Speed     = NORMAL_FOOT_VERYFAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = BurningDeathLocomotorInfantry
        Condition = SET_BURNINGDEATH
        Speed     = BURNINGDEATH_WANDERSPEED_INFANTRY
    End


    Behavior = WeaponSetUpgrade ModuleTag_14
        TriggeredBy = Upgrade_SilverThornArrows
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -FADED -EXTRA_8
        SinkDelay = 3000
        SinkRate = 0.5
        DestructionDelay = 15000
        Sound = INITIAL ElfGenericVoiceDie
        DeathFlags = DEATH_1
    End

      Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 5000
        DestructionDelay = 5000
        DeathFlags = DEATH_2
        FX = INITIAL FX_UnSummonElvenAllies
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = SpecialPowerModule ModuleTag_Lembasbrot
        SpecialPowerTemplate     = SpecialAbilityLembasbrotHealSpell
        UpdateModuleStartsAttack = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_LembasbrotUpdate
        SpecialPowerTemplate     = SpecialAbilityLembasbrotHealSpell
        StartAbilityRange        = 1.6
        UnpackTime               = 1
        PreparationTime          = 3
        PackTime                 = 2096
        AwardXPForTriggering     = 0
    End

    Behavior = AutoHealBehavior ModuleTag_LembasbrotHealing
        StartsActive             = Yes
        ButtonTriggered          = Yes
        HealingAmount            = 300
        Radius                   = 55
        HealOnlyOthers           = No
        SingleBurst              = Yes
        UnitHealPulseFX          = FX_SpellLembasbrotHealUnitHealBuff
        KindOf                   = INFANTRY
    End


    Behavior = SlowDeathBehavior ModuleTag_GrabandDrop
        DeathTypes       = NONE +EXTRA_8
        SinkDelay        = 3000
        SinkRate         = 0.60
        DestructionDelay = 10000
        DeathFlags       = DEATH_4
        ShadowWhenDead   = Yes
    End

    Behavior = FireWeaponWhenDeadBehavior ModuleTag_GrabandDropImpact
        RequiredStatus  = DEATH_4
        StartsActive    = Yes
        DelayTime       = 0
        DeathWeapon     = GrabandDropInfantryImpactWarhead
        WeaponOffset    = X:0 Y:0 Z:0
    End

    Behavior = BezierProjectileBehavior ModuleTag_BodyHitHuman
       FirstHeight               = 24
       SecondHeight              = 24
       FirstPercentIndent        = 30%
       SecondPercentIndent       = 70%
       TumbleRandomly            = Yes
       CrushStyle                = Yes
       DieOnImpact               = Yes
       BounceCount               = 1
       BounceDistance            = 40
       BounceFirstHeight         = 24
       BounceSecondHeight        = 24
       BounceFirstPercentIndent  = 20%
       BounceSecondPercentIndent = 80%
       GroundHitFX               = FX_GrabandDropInfantryGroundHit
       GroundBounceFX            = FX_GrabandDropInfantryGroundHit
    End


      Behavior = DualWeaponBehavior ModuleTag_09
          SwitchWeaponOnCloseRangeDistance = 40
      End



    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes
    Shadow = SHADOW_DECAL
    ShadowSizeX = 14
    ShadowSizeY = 14
    ShadowTexture = ShadowI
End

ChildObject ElvenLorienArcher_Slaved ElvenLorienArcher

    VisionSide            = 100%
    VisionRear            = 100%
    ShroudClearingRange    = ELVEN_MALLORN_TREE_SHROUD_CLEAR
    ShockwaveResistance    = SHOCKWAVE_RESISTANCE_ALWAYS

    LocomotorSet
        Locomotor   = HumanLocomotor
        Condition   = SET_NORMAL
        Speed       = 0
    End

    WeaponSet
        Conditions    = None
        Weapon        = PRIMARY LorienMallornTreeBow
    End

    KindOf =  UNATTACKABLE NOT_AUTOACQUIRABLE

    Behavior = SlavedUpdate ModuleTag_Slave
        GuardMaxRange        = 0
        GuardWanderRange    = 0
        UseSlaverAsControlForEvaObjectSightedEvents = No
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes            = ALL -KNOCKBACK
        SinkDelay             = 10
        SinkRate              = 1.50
        DestructionDelay      = 10000
        Sound                 = INITIAL ElfGenericVoiceDie
        DeathFlags            = DEATH_1
    End
End


ChildObject ElvenLorienArcher_SlavedForBuildings ElvenLorienArcher

    VisionSide            = 100%
    VisionRear            = 100%
    ShroudClearingRange   = 300
    ShockwaveResistance   = SHOCKWAVE_RESISTANCE_ALWAYS
    KindOf                = UNATTACKABLE PRELOAD CAN_CAST_REFLECTIONS INFANTRY ARCHER PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT ATTACK_NEEDS_LINE_OF_SIGHT NOTIFY_OF_PREATTACK

    CommandPoints         = 0

    LocomotorSet
        Locomotor = FloatingLichtbringerLocomotor
        Condition = SET_NORMAL
        Speed     = 0
    End

    Behavior = SubObjectsUpgrade ForgedBlade_Upgrade1
        TriggeredBy        = Upgrade_AllFactionUpgrade
        HideSubObjects     = FireArowTip
    End

    Behavior = SlavedUpdate ModuleTag_Slave
        DieOnMastersDeath    = Yes
        MarkUnselectable     = No
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle    = Yes
    End

    WeaponSet
        Conditions    = None
        Weapon        = PRIMARY LorienMallornTreeBow
    End

    VoiceCreated                                = ElfWarriorVoiceSaluteBow_Slaved
    VoiceFullyCreated                           = ElfWarriorVoiceSaluteBow_Slaved

    CommandSet = EmptyCommandSet


    WeaponSet
        Conditions         = None
        Weapon             = PRIMARY    LorienElvenBowEdain
        AutoChooseSources  = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    Behavior = WeaponSetUpgrade ModuleTag_FlamingAttack
        TriggeredBy   = Upgrade_GoodFortressFlamingMunitions
    End
End

