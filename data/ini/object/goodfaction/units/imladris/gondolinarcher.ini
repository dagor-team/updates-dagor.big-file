





Object GondolinArcher







    SelectPortrait = HPGondolinArcher
    ButtonImage    = HIGondolinArcher_Wotr



    Draw = W3DHordeModelDraw ModuleTag_01

        DefaultModelConditionState
            Model                          = eugondolarc
            Skeleton                       = RUElfWar_SKL
            WeaponLaunchBone               = PRIMARY ARROW
        End





        AnimationState                    = STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
            StateName                    = STATE_GetUp
            Animation                   = Sword
                AnimationName           = RUElfWar_GTPSX1
                AnimationMode           = ONCE
            End
            Animation                   = WantSword
                AnimationName           = RUElfWar_GTPB
                AnimationMode           = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_GetUp" or PrevState == "STATE_Land"
                then
                    if PrevAnim == "Bow" or PrevAnim == "WantSword"
                    then
                        CurDrawableShowSubObject("arrow")
                        CurDrawableShowSubObject("arrownock")
                        return "WantSword"
                    end
                end

                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                return "Sword"
            EndScript
        End

        AnimationState                    = STUNNED_STANDING_UP
            StateName                    = STATE_GetUp
            Animation                   = Bow
                AnimationName           = RUElfWar_GTPB
                AnimationMode           = ONCE
            End
            Animation                   = WantBow
                AnimationName           = RUElfWar_GTPSX1
                AnimationMode           = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_GetUp" or PrevState == "STATE_Land"
                then
                    if PrevAnim == "WantBow" or PrevAnim == "Sword"
                    then
                        CurDrawableHideSubObject("ArrowNock")
                        CurDrawableHideSubObject("arrow")
                        return "WantBow"
                    end
                else
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "Bow"
                end
            EndScript
        End

        AnimationState                    = STUNNED WEAPONSET_TOGGLE_1
            StateName                    = STATE_Land
            Animation                   = Sword
                AnimationName           = RUElfWar_LNDB
                AnimationMode           = ONCE
            End
            Animation                   = WantSword
                AnimationName           = RUElfWar_LNDA
                AnimationMode           = ONCE
            End
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_Fly"
                then
                    if PrevAnim == "WantSword" or PrevAnim == "Bow"
                    then
                        CurDrawableShowSubObject("arrow")
                        CurDrawableShowSubObject("arrownock")
                        return "WantSword"
                    end
                end
                Flags                        = MAINTAIN_FRAME_ACROSS_STATES3
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                return "Sword"
            EndScript
        End

        AnimationState                    = STUNNED
            StateName                    = STATE_Land
            Animation                   = Bow
                AnimationName           = RUElfWar_LNDA
                AnimationMode           = ONCE
            End
            Animation                   = WantBow
                AnimationName           = RUElfWar_LNDB
                AnimationMode           = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES3
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_Fly"
                then
                    if PrevAnim == "WantBow" or PrevAnim == "Sword"
                    then
                        CurDrawableHideSubObject("ArrowNock")
                        CurDrawableHideSubObject("arrow")
                        return "WantBow"
                    end
                end

                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                return "Bow"
            EndScript
        End

        AnimationState                    = STUNNED_FLAILING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Fly
            Animation                   = Sword
                AnimationName           = RUElfWar_FLYB
                AnimationMode           = LOOP
            End
            Animation                   = WantSword
                AnimationName           = RUElfWar_FLYA
                AnimationMode           = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES2
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "Ready_Bow" or PrevState == "Moving_Bow" or PrevState == "Bored_Bow"
                then
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "WantSword"
                elseif PrevState == "STATE_Fly"
                then
                    if PrevAnim == "Bow" or PrevAnim == "WantSword"
                    then
                        CurDrawableShowSubObject("arrow")
                        CurDrawableShowSubObject("arrownock")
                        return "WantSword"
                    end
                end

                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                return "Sword"
            EndScript
        End

        AnimationState                    = STUNNED_FLAILING
            StateName                    = STATE_Fly
            Animation                   = Bow
                AnimationName           = RUElfWar_FLYA
                AnimationMode           = LOOP
            End
            Animation                   = WantBow
                AnimationName           = RUElfWar_FLYB
                AnimationMode           = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES2
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "Ready_Sword" or PrevState == "Moving_Sword" or PrevState == "Bored_Sword"
                then
                    CurDrawableHideSubObject("ArrowNock")
                    CurDrawableHideSubObject("arrow")
                    return "WantBow"
                elseif PrevState == "STATE_Fly"
                then
                    if PrevAnim == "Sword" or PrevAnim == "WantBow"
                    then
                        CurDrawableHideSubObject("ArrowNock")
                        CurDrawableHideSubObject("arrow")
                        return "WantBow"
                    end
                end

                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                return "Bow"
            EndScript
        End




        AnimationState                    = DYING WEAPONSET_TOGGLE_1 DEATH_1
            Animation                   = Sword1
                AnimationName           = RUElfWar_DIESv5
                AnimationMode           = ONCE
            End
            Animation                   = Sword2
                AnimationName           = RUElfWar_DIESV4
                AnimationMode           = ONCE
            End
            Animation                   = WantSword
                AnimationName           = RUElfWar_LNDA
                AnimationMode           = ONCE
            End

            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_Fly"
                then
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "WantSword"
                end

                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if GetClientRandomNumberReal(0,2) < 1
                then
                    return "Sword1"
                else
                    return "Sword2"
                end
            EndScript
        End

        AnimationState                    = DYING WEAPONSET_TOGGLE_1 DEATH_2
            Animation                   = ByeBye
                AnimationName           = RUElfWar_IDLG
                AnimationMode           = LOOP
            End
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_Fly"
                then
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "WantSword"
                end

                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if GetClientRandomNumberReal(0,2) < 1
                then
                    return "Sword1"
                else
                    return "Sword2"
                end
            EndScript
        End

        AnimationState                    = DYING
            Animation                   = Bow
                AnimationName           = RUElfWar_DIEB
                AnimationMode           = ONCE
            End
        End

        AnimationState                    = DYING DEATH_1
            Animation                   = Bow1
                AnimationName           = RUElfWar_DIEB
                AnimationMode           = ONCE
            End
            Animation                   = Bow2
                AnimationName           = RUElfWar_DIEBV5
                AnimationMode           = ONCE
            End
            Animation                   = WantBow
                AnimationName           = RUElfWar_LNDB
                AnimationMode           = ONCE
            End
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()

                if PrevState == "STATE_Fly"
                then
                    CurDrawableHideSubObject("ArrowNock")
                    CurDrawableHideSubObject("arrow")
                    return "WantBow"
                end

                if GetClientRandomNumberReal(0,2) < 1
                then
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "Bow1"
                else
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "Bow2"
                end
            EndScript
        End

        AnimationState                    = DYING DEATH_2
            Animation                   = ByeBye
                AnimationName           = RUElfWar_IDLB
                AnimationMode           = LOOP
            End
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()

                if PrevState == "STATE_Fly"
                then
                    CurDrawableHideSubObject("ArrowNock")
                    CurDrawableHideSubObject("arrow")
                    return "WantBow"
                end

                if GetClientRandomNumberReal(0,2) < 1
                then
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "Bow1"
                else
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "Bow2"
                end
            EndScript
        End





        AnimationState                    = MOVING EMOTION_TERROR WEAPONSET_TOGGLE_1
            StateName                    = Moving_Sword
            Animation                    = Terror
                AnimationName            = RUElfWar_RUNN
                AnimationMode            = LOOP
                Distance                = 40
            End
            Animation                    = finishrun_b
                AnimationName           = RUElfWar_RUNB
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Animation                    = runtrans_bs
                AnimationName           = RUElfWar_RUNC
                AnimationMode           = ONCE
                AnimationBlendTime        = 5
                Distance                = 70
            End
            Animation                    = runtrans_sb_finish
                AnimationName           = RUElfWar_RUNT
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = runnoblend_s
                AnimationName           = RUElfWar_RUNN
                AnimationMode           = LOOP
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE MAINTAIN_FRAME_ACROSS_STATES
            BeginScript
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")

                if PrevState == "Moving_Bow"
                then
                    if PrevAnim == "runtrans_sb"
                    then
                        return "runtrans_sb_finish"
                    elseif PrevAnim == "finishrun_s"
                    then
                        return "runnoblend_s"
                    else
                        return "finishrun_b"
                    end
                elseif PrevAnim == "finishrun_b" or PrevAnim == "runtrans_sb_finish"
                then
                    return "runtrans_bs"
                elseif PrevAnim == "runtrans_bs" or PrevAnim == "run_s" or PrevAnim == "runnoblend_s"
                then
                    return "runnoblend_s"
                else
                    return "Terror"
                end
            EndScript
        End
        AnimationState                    = MOVING EMOTION_TERROR
            StateName                    = Moving_Bow
            Animation                    = RunAway_3
                AnimationName            = RUElfWar_RUNOT3
                AnimationMode            = ONCE
                Distance                = 40
            End
            Animation                    = RunAway_2
                AnimationName            = RUElfWar_RUNOT4
                AnimationMode            = ONCE
                Distance                = 40
            End
            Animation                    = RunAway
                AnimationName            = RUElfWar_RUNB
                AnimationMode            = ONCE
                Distance                = 40
            End
            Animation                    = finishrun_s
                AnimationName           = RUElfWar_RUNN
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Animation                    = runtrans_sb
                AnimationName           = RUElfWar_RUNT
                AnimationMode           = ONCE
                AnimationBlendTime        = 5
                Distance                = 70
            End
            Animation                    = runtrans_bs_finish
                AnimationName           = RUElfWar_RUNC
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = RunAway_noblend
                AnimationName            = RUElfWar_RUNB
                AnimationMode            = ONCE
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE MAINTAIN_FRAME_ACROSS_STATES
            BeginScript
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "Moving_Sword"
                then
                    if PrevAnim == "runtrans_bs"
                    then
                        return "runtrans_bs_finish"
                    elseif PrevAnim == "finishrun_b"
                    then
                        return "RunAway_noblend"
                    else
                        return "finishrun_s"
                    end
                elseif PrevAnim == "finishrun_s" or PrevAnim == "runtrans_bs_finish"
                then
                    return "runtrans_sb"
                elseif PrevAnim == "runtrans_sb" or PrevAnim == "run_b" or PrevAnim == "runnoblend_b"
                then
                    return "RunAway_noblend"
                else
                    Num = GetClientRandomNumberReal(0,7)
                    if Num < 1
                    then
                        return "RunAway_2"
                    elseif Num > 6
                    then
                        return "RunAway_3"
                    else
                        return "RunAway"
                    end
                end
            EndScript
        End





          AnimationState                    =    FIRING_OR_PREATTACK_B
              Animation                    =    BowPunchWhenClose
                AnimationName           = ruelfwar_tntb
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            BeginScript
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
            EndScript
         End

        AnimationState                    = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            StateName                    = Ready_Sword

            Animation                   = AttackWithSwordA
                AnimationName           = RUElfWar_ATKSV2
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            Animation                   = AttackWithSwordB
                AnimationName           = RUElfWar_ATKS
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            Animation                   = AttackWithSwordD
                AnimationName           = RUElfWar_ATKSV4
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            BeginScript
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState                    = PREATTACK_A
            Animation                    = ReadyToDrawn
                AnimationName            = RUElfWar_ATKA1
                AnimationMode            = ONCE
                AnimationBlendTime        = 20
            End

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("ArrowNock")
            EndScript
        End

        AnimationState                    = FIRING_OR_RELOADING_A
            StateName                    = STATE_Firing
            Animation                    = OneFrameOfShooting
                AnimationName            = RUElfWar_ATKA2
                AnimationMode            = ONCE
                AnimationBlendTime        = 0
                AnimationSpeedFactorRange    = 1.5 1.5
            End
            Flags                        = START_FRAME_FIRST
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("ArrowNock")
            EndScript
        End






        AnimationState                    = MOVING BACKING_UP WEAPONSET_TOGGLE_1
            StateName                    = STATE_BackingUp
            Animation                    = Sword
                AnimationName            = RUElfWar_BAKS
                AnimationMode            = LOOP
            End
            Animation                    = WantSword
                AnimationName            = RUElfWar_BAKB
                AnimationMode            = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                if PrevState == "STATE_BackingUp"
                then
                    if PrevAnim == "Bow" or PrevAnim == "WantSword"
                    then
                        return "WantSword"
                    end
                end

                return "Sword"
            EndScript
        End
        AnimationState                    = MOVING BACKING_UP
            StateName                    = STATE_BackingUp
            Animation                    = Bow
                AnimationName            = RUElfWar_BAKB
                AnimationMode            = LOOP
            End
            Animation                    = WantBow
                AnimationName            = RUElfWar_BAKS
                AnimationMode            = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                if PrevState == "STATE_BackingUp"
                then
                    if PrevAnim == "WantBow" or PrevAnim == "Sword"
                    then
                        return "WantBow"
                    end
                end

                return "Bow"
            EndScript
        End



        AnimationState                    = MOVING WEAPONSET_TOGGLE_1
            StateName                    = Moving_Sword
            SimilarRestart                = Yes
            Animation                   = run_s
                AnimationName           = RUElfWar_RUNS
                AnimationMode           = LOOP
                Distance                = 40
            End
            Animation                    = finishrun_b
                AnimationName           = RUElfWar_RUNB
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Animation                    = runtrans_bs
                AnimationName           = RUElfWar_RUNC
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = runtrans_sb_finish
                AnimationName           = RUElfWar_RUNT
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = runnoblend_s
                AnimationName           = RUElfWar_RUNS
                AnimationMode           = LOOP
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")

                if PrevState == "Moving_Bow"
                then
                    if PrevAnim == "runtrans_sb"
                    then
                        return "runtrans_sb_finish"
                    elseif PrevAnim == "finishrun_s"
                    then
                        return "runnoblend_s"
                    else
                        return "finishrun_b"
                    end
                elseif PrevAnim == "finishrun_b" or PrevAnim == "runtrans_sb_finish" or PrevAnim == "WantSword"
                then
                    return "runtrans_bs"
                elseif PrevAnim == "runtrans_bs" or PrevAnim == "run_s" or PrevAnim == "runnoblend_s"
                then
                    return "runnoblend_s"
                else
                    return "run_s"
                end
            EndScript
        End

        AnimationState                    = MOVING
            StateName                    = Moving_Bow
            SimilarRestart                = Yes
            Animation                   = run_b
                AnimationName           = RUElfWar_RUNB
                AnimationMode           = LOOP
                Distance                = 40
            End
            Animation                    = finishrun_s
                AnimationName           = RUElfWar_RUNS
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Animation                    = runtrans_sb
                AnimationName           = RUElfWar_RUNT
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = runtrans_bs_finish
                AnimationName           = RUElfWar_RUNC
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = runnoblend_b
                AnimationName           = RUElfWar_RUNB
                AnimationMode           = LOOP
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()

                if PrevState == "Moving_Sword"
                then
                    if PrevAnim == "runtrans_bs"
                    then
                        return "runtrans_bs_finish"
                    elseif PrevAnim == "finishrun_b"
                    then
                        return "runnoblend_b"
                    else
                        return "finishrun_s"
                    end
                elseif PrevAnim == "finishrun_s" or PrevAnim == "runtrans_bs_finish" or PrevAnim == "WantBow"
                then
                    return "runtrans_sb"
                elseif PrevAnim == "runtrans_sb" or PrevAnim == "run_b" or PrevAnim == "runnoblend_b"
                then
                    return "runnoblend_b"
                else
                    return "run_b"
                end
            EndScript
        End




        AnimationState                    = CONTINUOUS_FIRE_MEAN
            Animation                    = HangFrameWhileCoasting
                AnimationName            = RUElfWar_ATKA2
                AnimationMode            = MANUAL
                AnimationBlendTime        = 0
            End
            Flags                        = START_FRAME_LAST

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("ARROWNOCK")
                if CurDrawablePrevAnimationState() == "STATE_Firing" then CurDrawableAllowToContinue() end
            EndScript
        End

        AnimationState                    = CONTINUOUS_FIRE_SLOW
            StateName                    = Ready_Bow
            Animation                    = PutAwayArrow
                AnimationName            = RUElfWar_ATKA3
                AnimationMode            = ONCE
            End

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("ARROWNOCK")
            EndScript
        End


        AnimationState                    = EMOTION_UNCONTROLLABLY_AFRAID WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = RUElfWar_FERS
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = RUElfWar_FERS
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                end
            EndScript
        End
        AnimationState                    = EMOTION_UNCONTROLLABLY_AFRAID
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = RUElfWar_FERB
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
            End
            Animation                    = Bow2
                AnimationName            = RUElfWar_FERB
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                end
            EndScript
        End




        AnimationState                    = EMOTION_ALERT WEAPONSET_TOGGLE_1
            StateName                    = Ready_Sword

            Animation                    = Alert_1
                AnimationName            = RUElfWar_IDLST1
                AnimationMode            = LOOP
            End

            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if Prev == "Bored_Sword"        then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")            end
                if Prev == "Selected_Sword"        then CurDrawableSetTransitionAnimState("TRANS_SR_Sword")            end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                end
            EndScript
        End
        AnimationState                    = ENGAGED WEAPONSET_TOGGLE_1
            StateName                    = Ready_Sword

            Animation                    = Alert_1
                AnimationName            = RUElfWar_IDLST1
                AnimationMode            = LOOP
            End

            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if Prev == "Bored_Sword"        then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")            end
                if Prev == "Selected_Sword"        then CurDrawableSetTransitionAnimState("TRANS_SR_Sword")            end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                end
            EndScript
        End
        AnimationState                    = ATTACKING WEAPONSET_TOGGLE_1
            StateName                    = Ready_Sword

            Animation                    = Alert_1
                AnimationName            = RUElfWar_IDLST1
                AnimationMode            = LOOP
            End

            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if Prev == "Bored_Sword"        then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")            end
                if Prev == "Selected_Sword"        then CurDrawableSetTransitionAnimState("TRANS_SR_Sword")            end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                end
            EndScript
        End

        AnimationState                    = EMOTION_ALERT
            StateName                    = Ready_Bow

            Animation                    = IDLB
                AnimationName            = RUElfWar_IDLB
                AnimationMode            = LOOP
            End

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Bored_Bow"        then CurDrawableSetTransitionAnimState("TRANS_BR_Bow")                end
                if Prev == "Selected_Bow"    then CurDrawableSetTransitionAnimState("TRANS_SR_Bow")                end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                end
            EndScript
        End
        AnimationState                    = ENGAGED
            StateName                    = Ready_Bow

            Animation                    = IDLB
                AnimationName            = RUElfWar_IDLB
                AnimationMode            = LOOP
            End

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Bored_Bow"        then CurDrawableSetTransitionAnimState("TRANS_BR_Bow")                end
                if Prev == "Selected_Bow"    then CurDrawableSetTransitionAnimState("TRANS_SR_Bow")                end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                end
            EndScript
        End
        AnimationState                    = ATTACKING
            StateName                    = Ready_Bow

            Animation                    = IDLB
                AnimationName            = RUElfWar_IDLB
                AnimationMode            = LOOP
            End

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Bored_Bow"        then CurDrawableSetTransitionAnimState("TRANS_BR_Bow")                end
                if Prev == "Selected_Bow"    then CurDrawableSetTransitionAnimState("TRANS_SR_Bow")                end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                end
            EndScript
        End






        AnimationState                    = EMOTION_AFRAID WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = RUElfWar_FERS
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = RUElfWar_FERS
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                end
            EndScript
        End
        AnimationState                    = EMOTION_AFRAID
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = RUElfWar_FERB
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
            End
            Animation                    = Bow2
                AnimationName            = RUElfWar_FERB
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                end
            EndScript
        End



        AnimationState                    = EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = RUElfWar_CHRST2
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = RUElfWar_CHRST2
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Sword")
                elseif PrevState == "Bored_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
                end
            EndScript
        End
        AnimationState                    = EMOTION_CELEBRATING
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = RUElfWar_CHRB
                AnimationMode            = ONCE
            End
            Animation                    = Bow2
                AnimationName            = RUElfWar_CHRB
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Bow")
                elseif PrevState == "Bored_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Bow")
                end
            EndScript
        End


        AnimationState                    = RAISING_FLAG WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = RUElfWar_CHRST2
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = RUElfWar_CHRST2
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Sword")
                elseif PrevState == "Bored_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
                end
            EndScript
        End

        AnimationState                    = RAISING_FLAG
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = RUElfWar_CHRB
                AnimationMode            = ONCE
            End
            Animation                    = Bow2
                AnimationName            = RUElfWar_CHRB
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Bow")
                elseif PrevState == "Bored_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Bow")
                end
            EndScript
        End




        AnimationState                    = EMOTION_TAUNTING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = RUElfWar_TNTSV1
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = RUElfWar_TNTSV1
                AnimationMode            = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Sword"
                    then
                        CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Sword")
                elseif PrevState == "Bored_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
                end
            EndScript
        End
        AnimationState                    = EMOTION_TAUNTING
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow1
                AnimationName            = RUElfWar_TNTB
                AnimationMode            = ONCE
            End
            Animation                    = Bow2
                AnimationName            = RUElfWar_TNTB
                AnimationMode            = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Bow")
                elseif PrevState == "Bored_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Bow")
                end
            EndScript
        End



        AnimationState                    = EMOTION_POINTING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = RUElfWar_PNTB
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = RUElfWar_PNTB
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Sword")
                elseif PrevState == "Bored_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
                end
            EndScript
        End
        AnimationState                    = EMOTION_POINTING
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = RUElfWar_PNTA
                AnimationMode            = ONCE
            End
            Animation                    = Bow2
                AnimationName            = RUElfWar_PNTA
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Bow")
                elseif PrevState == "Bored_Bow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Bow")
                end
            EndScript
        End



        AnimationState                =    SELECTED WEAPONSET_TOGGLE_1
            StateName                =    Selected_Sword

            Animation                =    ATNA
                AnimationName        =    RUElfWar_ATNS
                AnimationMode        =    LOOP
            End

            BeginScript
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")

                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Emotion_Bow" or Prev == "STATE_Emotion_Sword" then CurDrawableAllowToContinue() end
                if Prev == "Bored_Sword"        then CurDrawableSetTransitionAnimState("TRANS_BS_Sword")        end
                if Prev == "Ready_Sword"        then CurDrawableSetTransitionAnimState("TRANS_RS_Sword")        end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Selected")
                end

            EndScript
        End

        AnimationState                =    SELECTED
            StateName               =    Selected_Bow

            Animation                =    ATNE
                AnimationName        =    RUElfWar_ATNE
                AnimationMode        =    LOOP
            End

            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Emotion_Bow" or Prev == "STATE_Emotion_Sword" then CurDrawableAllowToContinue() end
                if Prev == "Bored_Bow" then CurDrawableSetTransitionAnimState("TRANS_BS_Bow")                end
                if Prev == "Ready_Bow" then CurDrawableSetTransitionAnimState("TRANS_RS_Bow")                end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Selected")
                end
            EndScript
        End




        AnimationState                        = HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
            StateName                        = Bored_Sword
            Animation                        = Hit_Level_1_a
                AnimationName                = RUElfWar_HITE
                AnimationMode                = ONCE
            End
        End

        AnimationState                         = HIT_REACTION HIT_LEVEL_1
            StateName                        = Bored_Bow
            Animation                         = Hit_Level_1_a
                AnimationName                = RUElfWar_HITB
                AnimationMode                 = ONCE
                AnimationSpeedFactorRange    = .9 .9
            End
        End




        AnimationState                    = WEAPONSET_TOGGLE_1
            StateName                    = Bored_Sword

            Animation                   = Idle_Sword1
                AnimationName           = RUElfWar_IDLG
                AnimationMode           = ONCE
            End
            Animation                   = Idle_Sword2
                AnimationName           = RUElfWar_IDLCT1
                AnimationMode           = ONCE
            End
            Animation                   = Idle_Sword3
                AnimationName           = RUElfWar_IDLCT3
                AnimationMode           = ONCE
            End
            Animation                    = IdleNoFidget
                AnimationName            = RUElfWar_IDLF
                AnimationMode            = ONCE
                AnimationPriority        = 20
            End
            Animation                    = IdleNoFidget2
                AnimationName            = RUElfWar_IDLF
                AnimationMode            = ONCE
                AnimationPriority        = 0
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")

                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "TRANS_SB_Sword" or Prev == "TRANS_RB_Sword" then return "IdleNoFidget" end
                if Prev == "Selected_Sword"        then CurDrawableSetTransitionAnimState("TRANS_SB_Sword")        end
                if Prev == "Ready_Sword"        then CurDrawableSetTransitionAnimState("TRANS_RB_Sword")        end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Selected")
                end
            EndScript
        End

        IdleAnimationState
            StateName                    = Bored_Bow

            Animation                    = IdleBowB
                AnimationName            = RUElfWar_IDLDX1
                AnimationMode            = ONCE
            End
            Animation                    = IdleBowD
                AnimationName            = RUElfWar_IDLD
                AnimationMode            = ONCE
            End
            Animation                    = IdleNoFidget
                AnimationName            = RUElfWar_IDLE
                AnimationMode            = ONCE
                AnimationPriority        = 20
            End
            Animation                    = IdleNoFidget2
                AnimationName            = RUElfWar_IDLE
                AnimationMode            = ONCE
                AnimationPriority        = 10
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                CurDrawableShowSubObject("arrow")
                CurDrawableShowSubObject("arrownock")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "TRANS_SB_Bow" or Prev == "TRANS_RB_Bow" then return "IdleNoFidget" end
                if Prev == "Selected_Bow"        then CurDrawableSetTransitionAnimState("TRANS_SB_Bow")        end
                if Prev == "Ready_Bow"            then CurDrawableSetTransitionAnimState("TRANS_RB_Bow")        end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Selected")
                end
            EndScript
        End




        TransitionState                   = TRANS_BS_Bow
            Animation                   = ATND
                AnimationName             = RUElfWar_ATND
                AnimationMode             = ONCE
                AnimationBlendTime        = 10
            End
        End

        TransitionState                   = TRANS_SR_Bow
            Animation                   = ATNE
                AnimationName             = RUElfWar_ATNF
                AnimationMode             = ONCE
            End
        End

        TransitionState                   = TRANS_SB_Bow
            Animation                   = ATND
                AnimationName             = RUElfWar_ATND
                AnimationMode             = ONCE_BACKWARDS
            End
            Flags                        = START_FRAME_LAST
        End

        TransitionState                   = TRANS_RS_Bow
            Animation                   = ATNF
                AnimationName             = RUElfWar_ATNF
                AnimationMode             = ONCE_BACKWARDS
            End
            Flags                        = START_FRAME_LAST
        End

        TransitionState                   = TRANS_BR_Bow
            Animation                   = IDLB
                AnimationName             = RUElfWar_IDLB
                AnimationMode             = ONCE
                AnimationBlendTime        = 20
            End
        End

        TransitionState                   = TRANS_RB_Bow
            Animation                   = IDLD
                AnimationName             = RUElfWar_IDLD
                AnimationMode             = ONCE
                AnimationBlendTime        = 20
            End
        End



        TransitionState                   = TRANS_BS_Sword
            Animation                   = ATNA
                AnimationName             = RUElfWar_ATNA
                AnimationMode             = ONCE
            End
            Animation                   = ATNAX1
                AnimationName             = RUElfWar_ATNX1
                AnimationMode             = ONCE
            End
        End

        TransitionState                   = TRANS_SR_Sword
            Animation                   = ATNC
                AnimationName             = RUElfWar_ATNC
                AnimationMode             = ONCE
            End
        End

        TransitionState                   = TRANS_SB_Sword
            Animation                   = ATNA
                AnimationName             = RUElfWar_ATNA
                AnimationMode             = ONCE_BACKWARDS
            End
            Flags                        = START_FRAME_LAST
        End

        TransitionState                   = TRANS_RS_Sword
            Animation                   = ATNC
                AnimationName             = RUElfWar_ATNC
                AnimationMode             = ONCE_BACKWARDS
            End
            Flags                        = START_FRAME_LAST
        End

        TransitionState                   = TRANS_BR_Sword
            Animation                   = ATNS
                AnimationName             = RUElfWar_ATNS
                AnimationMode             = ONCE
                AnimationBlendTime        = 20
            End
        End

        TransitionState                   = TRANS_RB_Sword
            Animation                   = IDLG
                AnimationName             = RUElfWar_IDLG
                AnimationMode             = ONCE
                AnimationBlendTime        = 20
            End
        End




        TransitionState                   = TRANS_BowToSword_Ready
            Animation                   = DrawSwords
                AnimationName           = RUElfWar_STHA
                AnimationMode           = ONCE
            End
        End

        TransitionState                   = TRANS_SwordToBow_Ready
            Animation                   = DrawBow
                AnimationName           = RUElfWar_STHB
                AnimationMode           = ONCE
            End
        End

        TransitionState                   = TRANS_BowToSword_Selected
            Animation                   = DrawSwords
                AnimationName           = RUElfWar_STHC
                AnimationMode           = ONCE
            End
        End

        TransitionState                   = TRANS_SwordToBow_Selected
            Animation                   = DrawBow
                AnimationName           = RUElfWar_STHD
                AnimationMode           = ONCE
            End
        End
    End



    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"







    Side                              = Imladris
    EditorSorting                     = UNIT
    ThreatLevel                       = 1.0
    ThingClass                        = HORDE_UNIT
    TransportSlotCount                = TRANSPORTSLOTCOUNT_UNIT
    ShockwaveResistance               = 50

    VisionRange                       = 400
    ShroudClearingRange               = 420

    BountyValue                       = 12
    DisplayName                       = OBJECT:GondolinArcher

    CrushableLevel                    = 0
    CrusherLevel                      = 0
    CrushRevengeWeapon                = BasicInfantryCrushRevenge

    CommandSet                        = GondolinArcherHordeCommandSet
    CommandPoints                     = 10





    WeaponSet
        Conditions                    = None
        Weapon                        = PRIMARY MirkwoodArcherSilverthornBow
        AutoChooseSources             = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions                     = CLOSE_RANGE CONTESTING_BUILDING
        Weapon                         = PRIMARY  ElbenBowMelee
        AutoChooseSources              = PRIMARY  FROM_PLAYER FROM_SCRIPT FROM_AI
    End





    ArmorSet
        Conditions                = None
        Armor                     = QuendiArcherArmor
        DamageFX                  = NormalDamageFX
    End

    ArmorSet
        Conditions                = PLAYER_UPGRADE
        Armor                     = QuendiArcherArmorUpgrade
        DamageFX                  = NormalDamageFX
    End





    VoiceAttack                         = ElfWarriorVoiceAttackBow
    VoiceAttackAir                      = ElfWarriorVoiceAttackBow
    VoiceAttackCharge                   = ElfWarriorVoiceAttackCharge
    VoiceAttackMachine                  = ElfWarriorVoiceAttackBow
    VoiceAttackStructure                = ElfWarriorVoiceAttackBuilding
    VoiceCreated                        = ElfWarriorVoiceSaluteBow
    VoiceFullyCreated                   = ElfWarriorVoiceSaluteBow
    VoiceGuard                          = ElfWarriorVoiceMove
    VoiceMove                           = ElfWarriorVoiceMove
    VoiceMoveToCamp                     = ElfWarriorVoiceMoveCamp
    VoiceMoveWhileAttacking             = ElfWarriorVoiceDisengage
    VoicePriority                       = 39
    VoiceRetreatToCastle                = ElfWarriorVoiceRetreat
    VoiceSelect                         = ElfWarriorVoiceSelectMS
    VoiceSelectBattle                   = ElfWarriorVoiceSelectBattle
    VoiceEnterStateAttack               = ElfWarriorVoiceEnterStateAttackBow
    VoiceEnterStateAttackAir            = ElfWarriorVoiceEnterStateAttackBow
    VoiceEnterStateAttackCharge         = ElfWarriorVoiceEnterStateAttackCharge
    VoiceEnterStateAttackMachine        = ElfWarriorVoiceEnterStateAttack
    VoiceEnterStateAttackStructure      = ElfWarriorVoiceEnterStateAttack
    VoiceEnterStateMove                 = ElfWarriorVoiceEnterStateMove
    VoiceEnterStateMoveToCamp           = ElfWarriorVoiceEnterStateMoveCamp
    VoiceEnterStateMoveWhileAttacking   = ElfWarriorVoiceEnterStateDisengage
    VoiceEnterStateRetreatToCastle      = ElfWarriorVoiceEnterStateRetreat

    SoundImpact                         = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitElvenTransportShip = ElfWarriorVoiceMoveShip
        VoiceGarrison                  = ElfWarriorVoiceMoveGarrison
        VoicePrimaryWeaponMode         = ElvenWarriorVoiceModeBow
        VoiceSecondaryWeaponMode       = ElvenWarriorVoiceModeSword
        VoiceInitiateCaptureBuilding   = ElfWarriorVoiceCaptureBuilding
        VoiceEnterStateInitiateCaptureBuilding = ElfWarriorVoiceEnterStateCaptureBuilding
        VoiceMoveToTrees               = ElfWarriorVoiceMoveForest
        VoiceEnterStateMoveToTrees     = ElfWarriorVoiceEnterStateMoveForest
    End

    CrowdResponseKey = Elf

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Elf Elf_Male Unit Infantry Elf_LorienArcher
    End

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:EMOTION_CELEBRATING    Excluded:DYING ENGAGED    Sound:EmotionElfCompilationVoxCheerSinglesLoop
        ModelCondition = Required:EMOTION_TAUNTING       Excluded:DYING ENGAGED    Sound:EmotionElfCompilationVoxTauntSinglesLoop
        ModelCondition = Required:EMOTION_POINTING       Excluded:DYING ENGAGED    Sound:EmotionElfCompilationVoxTauntSinglesLoop
        ModelCondition = Required:RAISING_FLAG           Excluded:DYING ENGAGED    Sound:EmotionElfCompilationVoxTauntSinglesLoop
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:ArrowDrawBow                     Animation:RUElfWar_SKL.RUElfWar_ATKA1    Frames:6
        AnimationSound = Sound:ArrowDrawBow                     Animation:RUElfWar_SKL.RUElfWar_ATKA2    Frames:18
        AnimationSound = Sound:SwordShingClean1ForHordes        Animation:RUElfWar_SKL.RUElfWar_STHA     Frames:24
        AnimationSound = Sound:SwordIntoScabbard1ForHordes      Animation:RUElfWar_SKL.RUElfWar_STHB     Frames:9
        AnimationSound = Sound:WeaponSwitchBowForHordes         Animation:RUElfWar_SKL.RUElfWar_STHB     Frames:15
        AnimationSound = Sound:SwordShingClean1ForHordes        Animation:RUElfWar_SKL.RUElfWar_STHC     Frames:20
        AnimationSound = Sound:SwordIntoScabbard1ForHordes      Animation:RUElfWar_SKL.RUElfWar_STHD     Frames:5
        AnimationSound = Sound:WeaponSwitchBowForHordes         Animation:RUElfWar_SKL.RUElfWar_STHD     Frames:8
        AnimationSound = Sound:SwordShingClean1ForHordes        Animation:RUElfWar_SKL.RUElfWar_RUNC     Frames:14
        AnimationSound = Sound:SwordIntoScabbard1ForHordes      Animation:RUElfWar_SKL.RUElfWar_RUNT     Frames:4
        AnimationSound = Sound:WeaponSwitchBowForHordes         Animation:RUElfWar_SKL.RUElfWar_RUNT     Frames:16
        AnimationSound = Sound:BodyFallSoldier                  Animation:RUElfWar_SKL.RUElfWar_LNDA     Frames:9
        AnimationSound = Sound:BodyFallSoldier                  Animation:RUElfWar_SKL.RUElfWar_LNDB     Frames:1
        AnimationSound = Sound:BodyFallGenericNoArmor           Animation:RUElfWar_SKL.RUElfWar_DIEB     Frames:82
        AnimationSound = Sound:BodyFallSoldier                  Animation:RUElfWar_SKL.RUElfWar_DIEBV5   Frames:25
        AnimationSound = Sound:BodyFallSoldier                  Animation:RUElfWar_SKL.RUElfWar_DIESV4   Frames:26
        AnimationSound = Sound:BodyFallGenericNoArmor           Animation:RUElfWar_SKL.RUElfWar_DIESV5   Frames:100
    End







    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY SCORE LARGE_RECTANGLE_PATHFIND THROWN_OBJECT PATH_THROUGH_EACH_OTHER ARCHER ATTACK_NEEDS_LINE_OF_SIGHT GRAB_AND_DROP

    Body = ActiveBody ModuleTag_02
        CheerRadius                 = EMOTION_CHEER_RADIUS
        MaxHealth                   = 1000
        MaxHealthDamaged            = 600
        BurningDeathBehavior        = Yes
        BurningDeathFX              = FX_InfantryBurningFlame
    End

    #include "..\..\..\includes\CaptureBuilding.inc"

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle     = Yes ATTACK_BUILDINGS STEALTHED
        MoodAttackCheckRate            = 500
        CanAttackWhileContained        = Yes
        AILuaEventsList                = RohanElvenWarriorFunctions
    End

    LocomotorSet
        Locomotor = HumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_ELVEN_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = HumanWanderLocomotor
        Condition = SET_WANDER
        Speed     = NORMAL_ELVEN_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = HumanPanicLocomotor
        Condition = SET_PANIC
        Speed     = NORMAL_ELVEN_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = HumanScaredLocomotor
        Condition = SET_SCARED
        Speed     = NORMAL_ELVEN_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = BurningDeathLocomotorInfantry
        Condition = SET_BURNINGDEATH
        Speed     = BURNINGDEATH_WANDERSPEED_INFANTRY
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult             = 1.0
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes             = ALL -FADED -EXTRA_8
        SinkDelay             = 3000
        SinkRate             = 0.5
        DestructionDelay         = 15000
        Sound                 = INITIAL GaladhrimVoiceDie
        DeathFlags             = DEATH_1
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes             = NONE +FADED
        FadeDelay             = 0
        FadeTime             = 5000
        DestructionDelay         = 5000
        DeathFlags             = DEATH_2
        FX                 = INITIAL FX_UnSummonElvenAllies
    End

    Behavior = SquishCollide ModuleTag_06
    End

    Behavior = HordeMemberCollide ModuleTag_HMC
    End

    Behavior = SlowDeathBehavior ModuleTag_GrabandDrop
        DeathTypes               = NONE +EXTRA_8
        SinkDelay                = 3000
        SinkRate                 = 0.60
        DestructionDelay         = 10000
        DeathFlags               = DEATH_4
        ShadowWhenDead           = Yes
    End

    Behavior = FireWeaponWhenDeadBehavior ModuleTag_GrabandDropImpact
        RequiredStatus          = DEATH_4
        StartsActive            = Yes
        DelayTime               = 0
        DeathWeapon             = GrabandDropInfantryImpactWarhead
        WeaponOffset            = X:0 Y:0 Z:0
    End

    Behavior = BezierProjectileBehavior ModuleTag_BodyHitHuman
       FirstHeight                   = 24
       SecondHeight                  = 24
       FirstPercentIndent            = 30%
       SecondPercentIndent           = 70%
       TumbleRandomly                = Yes
       CrushStyle                    = Yes
       DieOnImpact                   = Yes
       BounceCount                   = 1
       BounceDistance                = 40
       BounceFirstHeight             = 24
       BounceSecondHeight            = 24
       BounceFirstPercentIndent      = 20%
       BounceSecondPercentIndent     = 80%
       GroundHitFX                   = FX_GrabandDropInfantryGroundHit
       GroundBounceFX                = FX_GrabandDropInfantryGroundHit
    End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1         = 1993
        HitReactionLifeTimer2         = 1993
        HitReactionLifeTimer3         = 1993

        HitReactionThreshold1         = 5.0
        HitReactionThreshold2         = 25.0
        HitReactionThreshold3         = 50.0

        FastHitsResetReaction         = Yes
    End

    Behavior = DualWeaponBehavior ModuleTag_09
        SwitchWeaponOnCloseRangeDistance = 40
    End

    Behavior = AttributeModifierUpgrade ModuleTag_AMU
        TriggeredBy                   = Upgrade_AllFactionUpgrade
        AttributeModifier             = FearlessForever
    End

    Behavior = StatusBitsUpgrade ForgedBlades_UpgradeDetection
        TriggeredBy                   = Upgrade_FormenosForgedBlades
    End

    Behavior = SubObjectsUpgrade ModuleTag_MakingThebla
        TriggeredBy                   = Upgrade_EliteHordeLvl1
        HideSubObjects                = FIREAROWTIP
    End

    Behavior = SubObjectsUpgrade ForgedBlades_Upgrade
        TriggeredBy                   = Upgrade_FormenosForgedBlades
        ShowSubObjects                = FIREAROWTIP
    End











    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership
        SpecialPowerTemplate             = SpecialAbilityFakeLeadership
        TriggeredBy                 = Upgrade_EliteHordeLvl2
    End

    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate
        SpecialPowerTemplate              = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack          = Yes
        StartsPaused                 = No
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership
        StartsActive                 = No
        BonusName                    = GondolinArcherBonus
        TriggeredBy                  = Upgrade_EliteHordeLvl2
        RefreshDelay                 = 2000
        Range                        = 200
        AntiCategory                 = BUFF
        ObjectFilter                = ANY +GondolinArcher +GondolinArcherHorde +GondolinArcherHorde_Summoned ALLIES
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FormenosArmorUpgradeEnabler
        SpecialPowerTemplate         = SpecialAbilityFakeLeadership2
        TriggeredBy                  = Upgrade_EliteHordeLvl5
    End

    Behavior = SpecialPowerModule ModuleTag_FormenosArmorUpgradeStarter
        SpecialPowerTemplate         = SpecialAbilityFakeLeadership2
        UpdateModuleStartsAttack     = Yes
        StartsPaused                 = Yes
    End

    Behavior = ArmorUpgrade ArmorUpgradeModuleTag
        TriggeredBy                  = Upgrade_EliteHordeLvl5
        ArmorSetFlag                 = PLAYER_UPGRADE
    End







    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName  = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName  = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName  = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate ElvenLorienWarriorHordeCaptureBuildingAI
        CommandButtonName  = Command_CaptureBuilding
        SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
    End

    Scale               = 1.13
    Geometry            = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight      = 19.2
    GeometryIsSmall     = Yes
    Shadow              = SHADOW_DECAL
    ShadowSizeX         = 14
    ShadowSizeY         = 14
    ShadowTexture       = ShadowI
End

ChildObject GondolinArcher_Summoned GondolinArcher

    DisplayName   = OBJECT:GondolinArcher_Summoned
    IsTrainable   = No
    CommandPoints = 0
    EquivalentTo  = GondolinArcher

    KindOf = +SUMMONED

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime      = 120000
        MaxLifetime      = 120000
        DeathType        = FADED
    End
End

