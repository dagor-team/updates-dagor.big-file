Object Bruchtalwachter




    ButtonImage            = HIImladrisWachter_Wotr
    SelectPortrait         = UPImladrisWachter

  Draw = W3DHordeModelDraw ModuleTag_01



    StaticModelLODMode = Yes

     RandomTexture = euswordmaster.tga  0 euswordmaster.tga
     RandomTexture = euswordmaster2.tga  0 euswordmaster.tga
     RandomTexture = euswordmaster3.tga  0 euswordmaster.tga
     RandomTexture = euelrondb.tga  0 ruhaldirv.tga


        DefaultModelConditionState
            Model                       = euswrdmstr_skn
            Skeleton                    = RUElfWar_SKL
        End






        AnimationState                    = STUNNED_STANDING_UP
            StateName                    = STATE_GetUp
            Animation                   = Sword
                AnimationName           = RUElfWar_GTPSX1
                AnimationMode           = ONCE
            End
            Animation                   = WantSword
                AnimationName           = RUElfWar_GTPB
                AnimationMode           = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_GetUp" or PrevState == "STATE_Land"
                then
                    if PrevAnim == "Bow" or PrevAnim == "WantSword"
                    then
                        CurDrawableShowSubObject("arrow")
                        CurDrawableShowSubObject("arrownock")
                        return "WantSword"
                    end
                end

                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                return "Sword"
            EndScript
        End



        AnimationState                    = STUNNED
            StateName                    = STATE_Land
            Animation                   = Sword
                AnimationName           = RUElfWar_LNDB
                AnimationMode           = ONCE
            End
            Animation                   = WantSword
                AnimationName           = RUElfWar_LNDA
                AnimationMode           = ONCE
            End
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_Fly"
                then
                    if PrevAnim == "WantSword" or PrevAnim == "Bow"
                    then
                        CurDrawableShowSubObject("arrow")
                        CurDrawableShowSubObject("arrownock")
                        return "WantSword"
                    end
                end
                Flags                        = MAINTAIN_FRAME_ACROSS_STATES3
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                return "Sword"
            EndScript
        End



        AnimationState                    = STUNNED_FLAILING
            StateName                    = STATE_Fly
            Animation                   = Sword
                AnimationName           = RUElfWar_FLYB
                AnimationMode           = LOOP
            End
            Animation                   = WantSword
                AnimationName           = RUElfWar_FLYA
                AnimationMode           = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES2
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "Ready_Bow" or PrevState == "Moving_Bow" or PrevState == "Bored_Bow"
                then
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "WantSword"
                elseif PrevState == "STATE_Fly"
                then
                    if PrevAnim == "Bow" or PrevAnim == "WantSword"
                    then
                        CurDrawableShowSubObject("arrow")
                        CurDrawableShowSubObject("arrownock")
                        return "WantSword"
                    end
                end

                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                return "Sword"
            EndScript
        End





        AnimationState                    = DYING
            Animation                   = Sword1
                AnimationName           = RUElfWar_DIESv5
                AnimationMode           = ONCE
            End
            Animation                   = Sword2
                AnimationName           = RUElfWar_DIESV4
                AnimationMode           = ONCE
            End
            Animation                   = WantSword
                AnimationName           = RUElfWar_LNDA
                AnimationMode           = ONCE
            End

            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_Fly"
                then
                    CurDrawableShowSubObject("arrow")
                    CurDrawableShowSubObject("arrownock")
                    return "WantSword"
                end

                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if GetClientRandomNumberReal(0,2) < 1
                then
                    return "Sword1"
                else
                    return "Sword2"
                end
            EndScript
        End




        AnimationState                    = MOVING EMOTION_TERROR
            StateName                    = Moving_Sword
            Animation                    = Terror
                AnimationName            = RUElfWar_RUNN
                AnimationMode            = LOOP
                Distance                = 40
            End
            Animation                    = finishrun_b
                AnimationName           = RUElfWar_RUNB
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Animation                    = runtrans_bs
                AnimationName           = RUElfWar_RUNC
                AnimationMode           = ONCE
                AnimationBlendTime        = 5
                Distance                = 70
            End
            Animation                    = runtrans_sb_finish
                AnimationName           = RUElfWar_RUNT
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = runnoblend_s
                AnimationName           = RUElfWar_RUNN
                AnimationMode           = LOOP
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE MAINTAIN_FRAME_ACROSS_STATES
            BeginScript
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")

                if PrevState == "Moving_Bow"
                then
                    if PrevAnim == "runtrans_sb"
                    then
                        return "runtrans_sb_finish"
                    elseif PrevAnim == "finishrun_s"
                    then
                        return "runnoblend_s"
                    else
                        return "finishrun_b"
                    end
                elseif PrevAnim == "finishrun_b" or PrevAnim == "runtrans_sb_finish"
                then
                    return "runtrans_bs"
                elseif PrevAnim == "runtrans_bs" or PrevAnim == "run_s" or PrevAnim == "runnoblend_s"
                then
                    return "runnoblend_s"
                else
                    return "Terror"
                end
            EndScript
        End





        AnimationState                    = FIRING_OR_PREATTACK_A
            StateName                    = Ready_Sword

            Animation                   = AttackWithSwordA
                AnimationName           = RUElfWar_ATKSV2
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            Animation                   = AttackWithSwordB
                AnimationName           = RUElfWar_ATKS
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            Animation                   = AttackWithSwordD
                AnimationName           = RUElfWar_ATKSV4
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            BeginScript
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
            EndScript
        End


        AnimationState                    = FIRING_OR_PREATTACK_B
            StateName                    = Ready_Sword

            Animation                   = AttackWithSwordA
                AnimationName           = RUElfWar_ATKSV2
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            Animation                   = AttackWithSwordB
                AnimationName           = RUElfWar_ATKS
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            Animation                   = AttackWithSwordD
                AnimationName           = RUElfWar_ATKSV4
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            BeginScript
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState                    = FIRING_OR_PREATTACK_C
            StateName                    = Ready_Sword

            Animation                   = AttackWithSwordA
                AnimationName           = RUElfWar_ATKSV2
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            Animation                   = AttackWithSwordB
                AnimationName           = RUElfWar_ATKS
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            Animation                   = AttackWithSwordD
                AnimationName           = RUElfWar_ATKSV4
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            BeginScript
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
            EndScript
        End

        AnimationState                    = FIRING_OR_PREATTACK_D
            StateName                    = Ready_Sword

            Animation                   = AttackWithSwordA
                AnimationName           = RUElfWar_ATKSV2
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            Animation                   = AttackWithSwordB
                AnimationName           = RUElfWar_ATKS
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            Animation                   = AttackWithSwordD
                AnimationName           = RUElfWar_ATKSV4
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            BeginScript
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
            EndScript
        End









        AnimationState                    = MOVING BACKING_UP
            StateName                    = STATE_BackingUp
            Animation                    = Sword
                AnimationName            = RUElfWar_BAKS
                AnimationMode            = LOOP
            End
            Animation                    = WantSword
                AnimationName            = RUElfWar_BAKB
                AnimationMode            = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                if PrevState == "STATE_BackingUp"
                then
                    if PrevAnim == "Bow" or PrevAnim == "WantSword"
                    then
                        return "WantSword"
                    end
                end

                return "Sword"
            EndScript
        End



        AnimationState                    = MOVING
            StateName                    = Moving_Sword
            SimilarRestart                = Yes
            Animation                   = run_s
                AnimationName           = RUElfWar_RUNS
                AnimationMode           = LOOP
                Distance                = 40
            End
            Animation                    = finishrun_b
                AnimationName           = RUElfWar_RUNB
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Animation                    = runtrans_bs
                AnimationName           = RUElfWar_RUNC
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = runtrans_sb_finish
                AnimationName           = RUElfWar_RUNT
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
                Distance                = 70
            End
            Animation                    = runnoblend_s
                AnimationName           = RUElfWar_RUNS
                AnimationMode           = LOOP
                AnimationBlendTime        = 0
                Distance                = 40
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")

                if PrevState == "Moving_Bow"
                then
                    if PrevAnim == "runtrans_sb"
                    then
                        return "runtrans_sb_finish"
                    elseif PrevAnim == "finishrun_s"
                    then
                        return "runnoblend_s"
                    else
                        return "finishrun_b"
                    end
                elseif PrevAnim == "finishrun_b" or PrevAnim == "runtrans_sb_finish" or PrevAnim == "WantSword"
                then
                    return "runtrans_bs"
                elseif PrevAnim == "runtrans_bs" or PrevAnim == "run_s" or PrevAnim == "runnoblend_s"
                then
                    return "runnoblend_s"
                else
                    return "run_s"
                end
            EndScript
        End






























        AnimationState                    = EMOTION_UNCONTROLLABLY_AFRAID
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = RUElfWar_FERS
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = RUElfWar_FERS
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                end
            EndScript
        End





        AnimationState                    = EMOTION_ALERT
            StateName                    = Ready_Sword

            Animation                    = Alert_1
                AnimationName            = RUElfWar_IDLST1
                AnimationMode            = LOOP
            End

            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if Prev == "Bored_Sword"        then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")            end
                if Prev == "Selected_Sword"        then CurDrawableSetTransitionAnimState("TRANS_SR_Sword")            end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                end
            EndScript
        End
        AnimationState                    = ENGAGED
            StateName                    = Ready_Sword

            Animation                    = Alert_1
                AnimationName            = RUElfWar_IDLST1
                AnimationMode            = LOOP
            End

            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if Prev == "Bored_Sword"        then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")            end
                if Prev == "Selected_Sword"        then CurDrawableSetTransitionAnimState("TRANS_SR_Sword")            end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                end
            EndScript
        End
        AnimationState                    = ATTACKING
            StateName                    = Ready_Sword

            Animation                    = Alert_1
                AnimationName            = RUElfWar_IDLST1
                AnimationMode            = LOOP
            End

            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("ArrowNock")
                CurDrawableHideSubObject("arrow")
                if Prev == "Bored_Sword"        then CurDrawableSetTransitionAnimState("TRANS_BR_Sword")            end
                if Prev == "Selected_Sword"        then CurDrawableSetTransitionAnimState("TRANS_SR_Sword")            end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                end
            EndScript
        End






        AnimationState                    = EMOTION_AFRAID
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = RUElfWar_FERS
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = RUElfWar_FERS
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                end
            EndScript
        End




        AnimationState                    = EMOTION_CELEBRATING
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = RUElfWar_CHRST2
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = RUElfWar_CHRST2
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Sword")
                elseif PrevState == "Bored_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
                end
            EndScript
        End




        AnimationState                    = EMOTION_TAUNTING
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = RUElfWar_TNTSV1
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = RUElfWar_TNTSV1
                AnimationMode            = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Sword"
                    then
                        CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Sword")
                elseif PrevState == "Bored_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
                end
            EndScript
        End




        AnimationState                    = EMOTION_POINTING
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = RUElfWar_PNTB
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = RUElfWar_PNTB
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrow")
                CurDrawableHideSubObject("arrownock")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                elseif PrevState == "Selected_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SR_Sword")
                elseif PrevState == "Bored_Sword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BR_Sword")
                end
            EndScript
        End




        AnimationState                =    SELECTED
            StateName                =    Selected_Sword

            Animation                =    ATNA
                AnimationName        =    RUElfWar_ATNS
                AnimationMode        =    LOOP
            End

            BeginScript
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")

                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Emotion_Bow" or Prev == "STATE_Emotion_Sword" then CurDrawableAllowToContinue() end
                if Prev == "Bored_Sword"        then CurDrawableSetTransitionAnimState("TRANS_BS_Sword")        end
                if Prev == "Ready_Sword"        then CurDrawableSetTransitionAnimState("TRANS_RS_Sword")        end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Selected")
                end

            EndScript
        End





        AnimationState                        = HIT_REACTION HIT_LEVEL_1
            StateName                        = Bored_Sword
            Animation                        = Hit_Level_1_a
                AnimationName                = RUElfWar_HITE
                AnimationMode                = ONCE
            End
        End





        IdleAnimationState
            StateName                    = Bored_Sword

            Animation                   = Idle_Sword1
                AnimationName           = RUElfWar_IDLG
                AnimationMode           = ONCE
            End
            Animation                   = Idle_Sword2
                AnimationName           = RUElfWar_IDLCT1
                AnimationMode           = ONCE
            End
            Animation                   = Idle_Sword3
                AnimationName           = RUElfWar_IDLCT3
                AnimationMode           = ONCE
            End
            Animation                    = IdleNoFidget
                AnimationName            = RUElfWar_IDLF
                AnimationMode            = ONCE
                AnimationPriority        = 20
            End
            Animation                    = IdleNoFidget2
                AnimationName            = RUElfWar_IDLF
                AnimationMode            = ONCE
                AnimationPriority        = 0
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                CurDrawableHideSubObject("ARROW")
                CurDrawableHideSubObject("ARROWNOCK")

                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "TRANS_SB_Sword" or Prev == "TRANS_RB_Sword" then return "IdleNoFidget" end
                if Prev == "Selected_Sword"        then CurDrawableSetTransitionAnimState("TRANS_SB_Sword")        end
                if Prev == "Ready_Sword"        then CurDrawableSetTransitionAnimState("TRANS_RB_Sword")        end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Selected")
                end
            EndScript
        End

    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End


    #include "..\..\..\includes\StunDrawModuleSmall.inc"



    Side = Imladris
    EditorSorting = UNIT
    ThreatLevel = 1.0
    ThingClass = HORDE_UNIT
    CommandPoints = IMLADRIS_WACHTER_COMMAND_POINTS

    TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT

    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY   BruchtalSchwertmeisterSwordNew
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = HeroMiniFootArmor
        DamageFX        = NormalDamageFX
    End


    BuildFadeInOnCreateTime = 0

    VisionRange = ELVEN_MITHLONDSENTRY_VISION_RANGE
    VisionSide = 35%
    VisionRear = 25%
    VisionBonusPercentPerFoot = 5.0%
    ShroudClearingRange = SHROUD_CLEAR_STANDARD

    BountyValue = ELVEN_MITHLONDSENTRY_BOUNTY_VALUE
    DisplayName = OBJECT:BruchtalWachter
    CrushableLevel = 0
    CrusherLevel = 0

    CommandSet = BruchtalSchwertmeisterHordeNewCommandSet





    VoiceAttack        = ElvenWarriorVoiceAttack
    VoiceAttackAir        = ElvenWarriorVoiceAttack
    VoiceAttackCharge    = ElvenWarriorVoiceAttackCharge
    VoiceAttackStructure    = ElvenWarriorVoiceAttack
    VoiceAttackMachine    = ElvenWarriorVoiceAttack
    VoiceCreated        = ElvenWarriorVoiceSelectBattle
    VoiceFullyCreated  = ElvenWarriorVoiceSelectBattle
    VoiceMove        = ElvenWarriorVoiceMove
    VoiceMoveToCamp        = ElvenWarriorVoiceMoveCamp
    VoiceMoveWhileAttacking    = ElvenWarriorVoiceDisengage
    VoicePriority        = 41
    VoiceRetreatToCastle    = ElvenWarriorVoiceRetreat
    VoiceSelect        = ElvenWarriorVoiceSelectMS
    VoiceSelectBattle     = ElvenWarriorVoiceSelectBattle
    VoiceGuard            = ElvenWarriorVoiceMove


    UnitSpecificSounds
        VoiceGarrison            =    ElvenWarriorVoiceGarrison
        VoicePrimaryWeaponMode        =    ElvenWarriorVoiceModeBow
        VoiceSecondaryWeaponMode    =    ElvenWarriorVoiceModeSword
    End

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:EMOTION_CELEBRATING    Excluded:DYING ENGAGED    Sound:EmotionElfCompilationVoxCheerSinglesLoop
        ModelCondition = Required:EMOTION_TAUNTING        Excluded:DYING ENGAGED    Sound:EmotionElfCompilationVoxTauntSinglesLoop

        ModelCondition = Required:RAISING_FLAG            Excluded:DYING ENGAGED    Sound:EmotionElfCompilationVoxTauntSinglesLoop
    End

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"



    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Elf Unit Infantry Elf_Warrior
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:BodyFallOrc        Animation:MUCORSAR_SKL.MUCORSAR_DIEA    Frames:51 78
        AnimationSound = Sound:BodyFallOrc        Animation:MUCORSAR_SKL.MUCORSAR_DIEB    Frames:29
        AnimationSound = Sound:BodyFallOrc        Animation:MUCORSAR_SKL.MUCORSAR_DIEC    Frames:49
        AnimationSound = Sound:BodyFallOrc        Animation:MUCORSAR_SKL.MUCORSAR_LNDA    Frames:4
    End




    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY SCORE THROWN_OBJECT PATH_THROUGH_EACH_OTHER ATTACK_NEEDS_LINE_OF_SIGHT GRAB_AND_DROP

    Body = ActiveBody ModuleTag_02
        CheerRadius       = EMOTION_CHEER_RADIUS
        MaxHealth         = 2150
        MaxHealthDamaged  = 1000
        BurningDeathBehavior = Yes
        BurningDeathFX       = FX_InfantryBurningFlame
    End


    #include "..\..\..\includes\CaptureBuilding.inc"


    Behavior = ArmorUpgrade ArmorUpgradeModuleTag
        TriggeredBy = Upgrade_HeavyArmor
        ArmorSetFlag            = PLAYER_UPGRADE
    End



    Behavior = SubObjectsUpgrade Armor_Upgrade
        TriggeredBy        = Upgrade_HeavyArmor
        UpgradeTexture     = luelvenha.tga 0 luelvenha_ha.tga
        RecolorHouse       = Yes
    End

    Behavior = SubObjectsUpgrade ForgedBlades_Upgrade
        TriggeredBy        = Upgrade_ForgedBlades
        ShowSubObjects     = FORGED_BLADE
    End

    Behavior = StatusBitsUpgrade ForgedBlades_UpgradeDetection
        TriggeredBy        = Upgrade_ForgedBlades
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle        = Yes ATTACK_BUILDINGS STEALTHED
        MoodAttackCheckRate                = 500
        CanAttackWhileContained            = Yes

        AILuaEventsList                    = RohanElvenWarriorFunctions
    End

    LocomotorSet
        Locomotor     = HumanLocomotor
        Condition     = SET_NORMAL
        Speed         = NORMAL_FOOT_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = BurningDeathLocomotorInfantry
        Condition = SET_BURNINGDEATH
        Speed      = BURNINGDEATH_WANDERSPEED_INFANTRY
    End

    LocomotorSet
        Locomotor = WallScalingMeleeHordeLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_FOOT_SLOW_MEMBER_SPEED
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStunnedTimeLow        = 1400
        ShockStunnedTimeHigh    = 2400
        ShockStandingTime        = 1333
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -KNOCKBACK -FADED -EXTRA_8
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL ElfGenericVoiceDie
        DeathFlags = DEATH_1
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL SpellGenericUnsummonFasterMS
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = HordeMemberCollide ModuleTag_HMC

    End

    Behavior = SlowDeathBehavior ModuleTag_07

        DeathTypes = NONE +KNOCKBACK
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
    End






    Behavior = SlowDeathBehavior ModuleTag_GrabandDrop
        DeathTypes       = NONE +EXTRA_8
        SinkDelay        = 3000
        SinkRate         = 0.60
        DestructionDelay = 10000
        DeathFlags       = DEATH_4
        ShadowWhenDead   = Yes
    End

    Behavior = FireWeaponWhenDeadBehavior ModuleTag_GrabandDropImpact
        RequiredStatus  = DEATH_4
        StartsActive    = Yes
        DelayTime       = 0
        DeathWeapon     = GrabandDropInfantryImpactWarhead
        WeaponOffset    = X:0 Y:0 Z:0
    End

    Behavior = BezierProjectileBehavior ModuleTag_BodyHitHuman
       FirstHeight               = 24
       SecondHeight              = 24
       FirstPercentIndent        = 30%
       SecondPercentIndent       = 70%
       TumbleRandomly            = Yes
       CrushStyle                = Yes
       DieOnImpact               = Yes
       BounceCount               = 1
       BounceDistance            = 40
       BounceFirstHeight         = 24
       BounceSecondHeight        = 24
       BounceFirstPercentIndent  = 20%
       BounceSecondPercentIndent = 80%
       GroundHitFX               = FX_GrabandDropInfantryGroundHit
       GroundBounceFX            = FX_GrabandDropInfantryGroundHit
    End



    Behavior = SpecialPowerModule ModuleTag_ZephyrStrikeStarter
        SpecialPowerTemplate        = SpecialAbilityZephyrStrike
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = No
    End

    #include "..\..\includes\zephyrstrike.inc"

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ChargeUnpause
        SpecialPowerTemplate        = SpecialAbilityDwarvenCharge
        TriggeredBy                 = Upgrade_MiniHordeLvl2
    End

    Behavior = SpecialPowerModule ModuleTag_ChargeStarter
        SpecialPowerTemplate        = SpecialAbilityDwarvenCharge
        UpdateModuleStartsAttack    = Yes
        InitiateSound               = DwarfGuardianBullRushMS
    End

    Behavior = SpecialAbilityUpdate ModuleTag_ChargeUpdate
        SpecialPowerTemplate        = SpecialAbilityDwarvenCharge
        StartAbilityRange           = 150.0
        AbilityAbortRange           = 50.0
        PreparationTime             = 0
        PackTime                    = 3000
        TriggerSound                = DwarfBullRushMS
        TriggerAttributeModifier    = SchwertmeisterChargeBonus
        AttributeModifierDuration   = 10000
        ChargeAttackSpeedBoost      = Yes
        IgnoreFacingCheck           = Yes
    End

    Scale = 1.03

    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes

    Shadow = SHADOW_DECAL
    ShadowSizeX = 21
    ShadowSizeY = 21
    ShadowTexture = ShadowI
End




Object ImladrisSwordmasterBanner




    Draw = W3DScriptedModelDraw ModuleTag_01

      OkToChangeModelColor = Yes

        StaticModelLODMode = Yes

        RandomTexture = euelrondb.tga  0 ruhaldirv.tga

        DefaultModelConditionState
            Model = euswrdbanr_skn
        End

        ModelConditionState = USER_1
            Model = euswrdbanr_skn
        End

        ModelConditionState COMING_OUT_OF_FACTORY
            Model = GUBanner_SKN
        End



        ExtraPublicBone = Glow
        ExtraPublicBone = Adornment
        ExtraPublicBone = Streamers



        AnimationState                    = DYING BURNINGDEATH
            Animation
                AnimationName            = GUBanner_SKL.GUBanner_DIEA
                AnimationMode            = ONCE
                AnimationBlendTime        = 10
            End
        End

        AnimationState        = DYING SPLATTED
            Animation           = LNDA
                AnimationName     = GUBanner_SKL.GUBanner_LNDA
                AnimationMode     = ONCE
            End
        End


        AnimationState        = DYING
            Animation           = DIEA
                AnimationName     = GUBanner_SKL.GUBanner_DIEA
                AnimationMode     = ONCE
            End
        End

        AnimationState                        = BURNINGDEATH
            Animation
                AnimationName                = GUBanner_SKL.GUBanner_MFDA
                AnimationMode                = LOOP
                Distance                    = 40
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = GUBanner_SKL.GUBanner_IDLA
                AnimationMode                = LOOP
            End
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = GTPA
                AnimationName     = GUBanner_SKL.GUBanner_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End


        AnimationState        = STUNNED
            Animation           = LNDA
                AnimationName     = GUBanner_SKL.GUBanner_LNDA
                AnimationMode     = ONCE
            End
        End

    IdleAnimationState
            Animation                =    IdleB
                AnimationName        =    GUBanner_SKL.GUBanner_IDLB
                AnimationMode        =    ONCE
                AnimationBlendTime    =    15
                AnimationPriority = 1
            End
            StateName           = Idle
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
            EndScript
        End


        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = GUBanner_SKL.GUBanner_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End




        AnimationState                = MOVING EMOTION_TERROR BACKING_UP
            Animation                = BAKA
                AnimationName        = GUBanner_SKL.GUBanner_BAKA
                AnimationMode        = LOOP
                AnimationSpeedFactorRange 1.5 1.5
            End
        End

        AnimationState                = MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY
            Animation                = TerrorFromTheSky
                AnimationName        = GUBanner_SKL.GUBanner_RUNB
                AnimationMode        = LOOP
            End
        End
        AnimationState                = MOVING EMOTION_TERROR
            Animation                = RUNB
                AnimationName        = GUBanner_SKL.GUBanner_RUNB
                AnimationMode        = LOOP
            End
        End

        AnimationState                        = PASSENGER
            Animation                        = Wiggle
                AnimationName                = GUBanner_FLLA
                AnimationMode                = LOOP
            End
        End

        AnimationState                        = FREEFALL
            Animation                        = Falling
                AnimationName                = GUBanner_FLYA
                AnimationMode                = LOOP
                AnimationBlendTime            = 10
                AnimationSpeedFactorRange    = 0.5    0.5
            End
        End

        AnimationState        = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = GUBanner_SKL.GUBanner_FLYA
                AnimationMode      = LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
            Flags               = RANDOMSTART
        End


        AnimationState        = FIRING_OR_PREATTACK_A
            Animation           = ATKA
                AnimationName     = GUBanner_SKL.GUBanner_ATKA
                AnimationMode     = ONCE
                UseWeaponTiming      = Yes
            End
            StateName           = Attack
        End

        AnimationState  = COMING_OUT_OF_FACTORY
            Animation = Being_Built
                AnimationName        = GUBanner_SKL.GUBanner_RUNC
                AnimationMode        = LOOP
                AnimationBlendTime    = 0
            End
        End

        AnimationState                =    MOVING BACKING_UP
            Animation                =    BackingUp
                AnimationName        =    GUBanner_SKL.GUBanner_BAKA
                AnimationMode        =    LOOP
                AnimationBlendTime  = 15
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState        = MOVING
            Animation           = RUNA
                AnimationName     = GUBanner_SKL.GUBanner_RUNA
                AnimationMode     = LOOP
                                AnimationSpeedFactorRange = .8 .8
            End
            Flags               = RANDOMSTART

        End



        AnimationState = HIT_REACTION HIT_LEVEL_1
            Animation = Hit_Level_1_a
                AnimationName = GUBanner_SKL.GUBanner_HITA
                AnimationMode = ONCE
            End
        End


        AnimationState                    = EMOTION_ALERT EMOTION_AFRAID
            Animation                    = Apprehensive
                AnimationName            = GUBanner_SKL.GUBanner_APPA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = EMOTION_AFRAID
            Animation                    = FERA
                AnimationName            = GUBanner_SKL.GUBanner_FERA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = EMOTION_CELEBRATING
            Animation                    = CHRA
                AnimationName            = GUBanner_SKL.GUBanner_CHRA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = EMOTION_TAUNTING
            Animation                    = TNTA
                AnimationName            = GUBanner_SKL.GUBanner_TNTA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = EMOTION_POINTING
            Animation                    = &&POINT&&
                AnimationName            = GUBanner_SKL.GUBanner_IDLA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = EMOTION_ALERT
            Animation                    = IDLA
                AnimationName            = GUBanner_SKL.GUBanner_IDLA
                AnimationMode            = LOOP
            End
        End


        AnimationState                    = RAISING_FLAG
            Animation                    = CHRA
                AnimationName            = GUBanner_SKL.GUBanner_CHRA
                AnimationMode            = LOOP
            End
        End



         AnimationState        = SELECTED
            StateName           = STATE_Selected
            Animation = ATNB
                AnimationName = GUBanner_SKL.GUBanner_ATNB
                AnimationMode = LOOP
                AnimationBlendTime  = 15
            End
            Flags               = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_To_Selected") end
            EndScript
        End


        TransitionState                    =    TRANS_Idle_to_Selected3
            Animation                    =    ATNA
                AnimationName            =    RURrmBnr_SKL.RURrmBnr_ATNA
                AnimationMode            =    ONCE
            End
        End


        TransitionState                    =    TRANS_Selected3_to_Idle
            Animation                    =    ATNC
                AnimationName            =    RURrmBnr_SKL.RURrmBnr_ATNC
                AnimationMode            =    ONCE
            End
        End


        TransitionState                    =    TRANS_Idle_to_Selected
            Animation                    =    ATNA
                AnimationName            =    GUBanner_SKL.GUBanner_ATNA
                AnimationMode            =    ONCE
            End
        End

        TransitionState                    =    TRANS_Selected_to_Idle
            Animation                    =    ATNA
                AnimationName            =    GUBanner_SKL.GUBanner_ATNC
                AnimationMode            =    ONCE
            End
        End


    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side                = Imladris
    EditorSorting        = UNIT
    ThreatLevel            = 1.0
    ThingClass            = HORDE_UNIT
    CommandPoints        = 0
    TransportSlotCount    = TRANSPORTSLOTCOUNT_UNIT

    WeaponSet
        Conditions            = None
        Weapon                = PRIMARY    ElvenWarriorSword
        AutoChooseSources    = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = LorienWarriorArmor
        DamageFX        = NormalDamageFX
    End

    ArmorSet
        Conditions      = PLAYER_UPGRADE
        Armor           = LorienWarriorHeavyArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange                = VISION_STANDARD_MELEE
    ShroudClearingRange        = SHROUD_CLEAR_STANDARD

    CommandSet                = EmptyCommandSet
    BountyValue                = ELVEN_BANNER_BOUNTY_VALUE
    DisplayName                = OBJECT:ElvenBanner

    CrusherLevel            = 0
    CrushableLevel            = 0
    CrushRevengeWeapon        = BasicInfantryCrushRevenge





    VoiceAttack        = ElvenWarriorVoiceAttack
    VoiceAttackAir        = ElvenWarriorVoiceAttack
    VoiceAttackCharge    = ElvenWarriorVoiceAttackCharge
    VoiceAttackStructure    = ElvenWarriorVoiceAttack
    VoiceAttackMachine    = ElvenWarriorVoiceAttack
    VoiceCreated        = ElvenWarriorVoiceSelectBattle
    VoiceFullyCreated  = ElvenWarriorVoiceSelectBattle
    VoiceMove        = ElvenWarriorVoiceMove
    VoiceMoveToCamp        = ElvenWarriorVoiceMoveCamp
    VoiceMoveWhileAttacking    = ElvenWarriorVoiceDisengage
    VoicePriority        = 41
    VoiceRetreatToCastle    = ElvenWarriorVoiceRetreat
    VoiceSelect        = ElvenWarriorVoiceSelectMS
    VoiceSelectBattle     = ElvenWarriorVoiceSelectBattle
    VoiceGuard            = ElvenWarriorVoiceMove


    UnitSpecificSounds
        VoiceGarrison            =    ElvenWarriorVoiceGarrison
        VoicePrimaryWeaponMode        =    ElvenWarriorVoiceModeBow
        VoiceSecondaryWeaponMode    =    ElvenWarriorVoiceModeSword
    End

    CrowdResponseKey = Elf

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Elf_Male Unit Infantry Elf_LorienWarrior
    End

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:EMOTION_CELEBRATING    Excluded:DYING ENGAGED    Sound:EmotionElfCompilationVoxCheerSinglesLoop
        ModelCondition = Required:EMOTION_TAUNTING        Excluded:DYING ENGAGED    Sound:EmotionElfCompilationVoxTauntSinglesLoop

        ModelCondition = Required:RAISING_FLAG            Excluded:DYING ENGAGED    Sound:EmotionElfCompilationVoxTauntSinglesLoop
    End



    RadarPriority    = UNIT
    KindOf            = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP BANNER IGNORES_SELECT_ALL
    BuildCost        = ELVEN_BANNER_COST
    BuildTime        = ELVEN_BANNER_BUILDTIME

    Body = ActiveBody ModuleTag_02
        MaxHealth         = ELVEN_BANNER_HEALTH
        MaxHealthDamaged  = ELVEN_BANNER_HEALTH_DAMAGED
        RecoveryTime      = ELVEN_BANNER_HEALTH_RECOVERY_TIME
        BurningDeathBehavior = Yes
        BurningDeathFX       = FX_InfantryBurningFlame
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        AttackPriority                =     AttackPriority_Infantry
        AILuaEventsList                =    InfantryBannerFunctions
        BurningDeathTime                = BURNINGDEATH_DURATION_INFANTRY
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance        =    INFANTRY_TAUNT_POINT_RADIUS
        TauntAndPointUpdateDelay    =    1000
        TauntAndPointExcluded        =    NONE
        AfraidOf                    =    EMOTION_AFRAIDOF_OBJECTFILTER
        AlwaysAfraidOf                =    EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
        PointAt                        =    EMOTION_POINTAT_OBJECTFILTER

        HeroScanDistance            =    150
        FearScanDistance            =    INFANTRY_FEAR_SCAN_RADIUS

        AddEmotion    =    Terror_Base
        AddEmotion    =    Doom_Base
        AddEmotion    =   BraceForBeingCrushed_Base
        AddEmotion    =    UncontrollableFear_Base_Evil
        AddEmotion    =    FearIdle_Base
        AddEmotion    =    FearBusy_Base
        AddEmotion    =    Point_Base
        AddEmotion    =    Taunt_Base
        AddEmotion    =    CheerIdle_Base
        AddEmotion    =    CheerBusy_Base
        AddEmotion    =    HeroCheerIdle_Base
        AddEmotion    =    HeroCheerBusy_Base
        AddEmotion    =    Alert_Base
    End

    LocomotorSet
        Locomotor = HumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_FOOT_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = HumanLocomotor
        Condition = SET_COMBO
        Speed     = NORMAL_FOOT_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = HumanWanderLocomotor
        Condition = SET_WANDER
        Speed     = NORMAL_FOOT_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = HorseLocomotor
        Condition = SET_MOUNTED
        Speed     = NORMAL_MOUNTED_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = BurningDeathLocomotorInfantry
        Condition = SET_BURNINGDEATH
        Speed      = BURNINGDEATH_WANDERSPEED_INFANTRY
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult                = 1.0
        ShockStunnedTimeLow        = 1400
        ShockStunnedTimeHigh    = 2400
        ShockStandingTime        = 666
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes            = ALL -KNOCKBACK
        SinkDelay            = 3000
        SinkRate            = 0.40
        DestructionDelay    = 8000
        Sound                = INITIAL ElfGenericVoiceDie
    End

    Behavior = SlowDeathBehavior ModuleTag_07

        DeathTypes            = NONE +KNOCKBACK
        SinkDelay            = 3000
        SinkRate            = 0.40
        DestructionDelay    = 8000
    End

    Behavior = SquishCollide ModuleTag_06

    End




    Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
        IdleSpawnRate                = 10000
        MeleeFreeUnitSpawnTime        = 20000
        DiedRespawnTime                = 10000
        MeleeFreeBannerReSpawnTime    = 20000

        BannerMorphFX        = FX_HordeResurrectionWithBannerCarrierSFX
        UnitSpawnFX            = FX_HordeResurrection

        MorphCondition        = UnitType:Bruchtalwachter         Locomotor:SET_COMBO        ModelState:"USER_1"

















    End

    Behavior = AutoHealBehavior ModuleTag_HealHordeMembers
        HealOnlyIfNotInCombat = Yes
        StartsActive          = Yes
        HealingAmount         = 10
        HealingDelay          = 2000
        KindOf                = INFANTRY CAVALRY
        UnitHealPulseFX       = FX_SpellHealUnitHealBuff
        AffectsContained      = Yes
        NonStackable          = Yes
    End

    Behavior = BezierProjectileBehavior ModuleTag_08
        FirstHeight = 24
        SecondHeight = 24
        FirstPercentIndent = 30%
        SecondPercentIndent = 70%
        TumbleRandomly = Yes

        CrushStyle = Yes
        DieOnImpact = Yes
        BounceCount = 1
        BounceDistance = 40
        BounceFirstHeight = 24
        BounceSecondHeight = 24
        BounceFirstPercentIndent = 20%
        BounceSecondPercentIndent = 80%

        GroundHitFX       = FX_ThrownRockGroundHit
        GroundBounceFX    = FX_ThrownRockBounceHit
    End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 7
        HitReactionLifeTimer2 = 15
        HitReactionLifeTimer3 = 10

        HitReactionThreshold1 = 5.0
        HitReactionThreshold2 = 25.0
        HitReactionThreshold3 = 50.0
    End

    Behavior = SubObjectsUpgrade Show_Topper
        TriggeredBy       = Upgrade_AllFactionUpgrade
        ShowSubObjects    = Glow
    End

    Geometry            = CYLINDER
    GeometryMajorRadius    = 8.0
    GeometryMinorRadius    = 8.0
    GeometryHeight        = 19.2
    GeometryIsSmall        = Yes

    Shadow                = SHADOW_DECAL
    ShadowSizeX            = 19
    ShadowSizeY            = 19
    ShadowTexture        = ShadowI

End




ChildObject Bruchtalwachter_Summoned Bruchtalwachter


    EquivalentTo                    = Bruchtalwachter
    IsTrainable                     = No
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP ATTACK_NEEDS_LINE_OF_SIGHT SUMMONED


    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate

        MinLifetime        = DUNEDAIN_ALLIES_LIFETIME
        MaxLifetime        = DUNEDAIN_ALLIES_LIFETIME
        DeathType        = FADED
    End

      Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes            = NONE +FADED
        FadeDelay            = 0
        FadeTime            = 5000
        DestructionDelay    = 5000
        DeathFlags            = DEATH_2
        FX                    = INITIAL FX_UnSummonElvenAllies
        Sound                = INITIAL SpellGenericUnsummonFasterMS
    End

End


ChildObject BruchtalwachterHorde_Summoned BruchtalwachterHorde
    IsTrainable    = No
    CommandPoints     = 0
    CommandSet    = BruchtalLancerHordeSummonedCommandSet
    EquivalentTo      = BruchtalwachterHorde
    KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE ARMY_SUMMARY MELEE_HORDE LARGE_RECTANGLE_PATHFIND SUMMONED
    DisplayName  =  OBJECT:HordeBruchtalWachterSpell

    Behavior = HordeContain ModuleTag_HordeContain
        FrontAngle         = STANDARD_PIKEMAN_FRONTANGLE
        FlankedDelay         = STANDARD_PIKEMAN_FLANKEDDELAY
        ObjectStatusOfContained =
        InitialPayload     = BruchtalwachterHorde_Summoned 10
        Slots         = 10
        PassengerFilter    = NONE +INFANTRY
        ShowPips     = No
        ThisFormationIsTheMainFormation = Yes
        RandomOffset    = X:0 Y:0
        MeleeBehavior     = Amoeba
        End

        RankInfo = RankNumber:1 UnitType:BruchtalwachterHorde_Summoned Position:X:50 Y:0        Position:X:50 Y:20        Position:X:50 Y:-20        Position:X:50 Y:40        Position:X:50 Y:-40
        RankInfo = RankNumber:2 UnitType:BruchtalwachterHorde_Summoned Position:X:30 Y:0 Leader 1 0    Position:X:30 Y:20 Leader 1 1    Position:X:30 Y:-20 Leader 1 2    Position:X:30 Y:40 Leader 1 3    Position:X:30 Y:-40 Leader 1 4


        RanksToReleaseWhenAttacking = 1 2

        MeleeAttackLeashDistance = 1
        BackUpMinDelayTime         = 1
        BackUpMaxDelayTime         = 3000
        BackUpMinDistance         = 1
        BackUpMaxDistance         = 3
        BackupPercentage         = 80%
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate

        MinLifetime        = DUNEDAIN_ALLIES_LIFETIME
        MaxLifetime        = DUNEDAIN_ALLIES_LIFETIME
        DeathType        = FADED
    End

End


