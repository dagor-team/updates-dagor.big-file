Object RohanSam



     SelectPortrait = HPSam


    ButtonImage = HISam

    Draw = W3DScriptedModelDraw ModuleTag_01

      OkToChangeModelColor = Yes

      StaticModelLODMode = Yes


        DefaultModelConditionState
            Model               = RUSam_SKN
            Skeleton            = RUSam_SKL


            WeaponLaunchBone    = PRIMARY B_HANDR
            WeaponLaunchBone    = SECONDARY B_HANDR
            ParticleSysBone        = NONE Predator FollowBone:Yes Persist:HOLD PersistID:100
        End

        ModelConditionState        = INVISIBLE_STEALTH
            ParticleSysBone        = NONE Predator FollowBone:Yes Persist:SPAWN PersistID:100
        End





        AnimationState                    = STUNNED_FLAILING
            StateName                    = STATE_Bored_Rocks
            Animation                    = &&FLYING&&
                AnimationName            = RUSam_FLYA
                AnimationMode            = LOOP
                AnimationBlendTime        = 0
                AnimationSpeedFactorRange    = 0.4 0.6
            End
            Flags                        = RANDOMSTART
        End

        AnimationState                        = DYING DEATH_2
            Animation
                AnimationName                = RUSam_IDLA
                AnimationMode                = LOOP
            End
        End

        AnimationState                    = DYING SPLATTED
            StateName                    = STATE_Bored_Rocks
            Animation                    = &&LANDING&&
                AnimationName            = RUSam_LNDA
                AnimationMode            = ONCE
            End
        End

        AnimationState                    = DYING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Bored_Rocks
            Animation                    = DIEA
                AnimationName            = RUSam_DIEA
                AnimationMode            = ONCE
            End
        End

        AnimationState                    = DYING EMOTION_ALERT
            StateName                    = STATE_Dead.
            Animation                    = DIEB
                AnimationName            = RUSam_DIEB
                AnimationMode            = ONCE
            End
        End

        AnimationState                    = DYING
            StateName                    = STATE_Dead.
            Animation                    = DIEA
                AnimationName            = RUSam_DIEA
                AnimationMode            = ONCE
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = RUSam_IDLA
                AnimationMode                = LOOP
            End
        End
















        AnimationState                    = STUNNED_STANDING_UP
            StateName                    = STATE_Ready_Sword
            Animation                    = GTPA
                AnimationName            = RUSam_GTPA
                AnimationMode            = ONCE

            End
        End

        AnimationState                    = STUNNED
            StateName                    = STATE_Bored_Sword
            Animation                    = &&LANDING&&
                AnimationName            = RUSam_LNDA
                AnimationMode            = ONCE
                AnimationBlendTime        = 0
            End
        End























        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = RUSam_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End




        AnimationState                    = MOVING EMOTION_ALERT
            StateName                    = STATE_Running_Sword
            Animation                    = RUNC
                AnimationName            = RUSam_RUNC
                AnimationMode            = LOOP
            End
            Flags                        = RANDOMSTART
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
            EndScript
        End

        AnimationState                    = MOVING
            StateName                    = STATE_Running_Rocks
            Animation                    = RUNA
                AnimationName            = RUSam_RUNA
                AnimationMode            = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
            EndScript
        End



        AnimationState                    = PASSENGER FIRING_OR_PREATTACK_A
            StateName                    = NoSword
            Animation                    = THRA
                AnimationName            = RUSam_THRA
                AnimationMode            = ONCE
                UseWeaponTiming            = Yes
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SheatheSword") end
            EndScript
        End

        AnimationState                    = FIRING_OR_RELOADING_A WEAPONSET_TOGGLE_1
            StateName                    = STATE_Ready_Rocks
            Animation                    = IDLA
                AnimationName            = RUSam_IDLA
                AnimationMode            = LOOP
                AnimationBlendTime        = 20
            End



        End

        AnimationState                    = FIRING_OR_RELOADING_A
            StateName                    = STATE_Ready_Sword
            Animation                    = IDLB
                AnimationName            = RUSam_IDLB
                AnimationMode            = LOOP
                AnimationBlendTime        = 10
            End
            BeginScript
                CurDrawableAllowToContinue()
            EndScript
        End

        AnimationState                    = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            StateName                    = STATE_Ready_Rocks
            Animation                    = THRA
                AnimationName            = RUSam_THRA
                AnimationMode            = ONCE
                UseWeaponTiming            = Yes
            End
            FrameForPristineBonePositions    = 42
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
            EndScript
        End

        AnimationState                    = FIRING_OR_PREATTACK_A
            StateName                    = STATE_Ready_Sword
            Animation                    = ATKA
                AnimationName            = RUSam_ATKA
                AnimationMode            = ONCE
                UseWeaponTiming            = Yes
                AnimationBlendTime        = 10
                AnimationPriority        = 10
            End
            Animation                    = ATKH
                AnimationName            = RUSam_ATKH
                AnimationMode            = ONCE
                UseWeaponTiming            = Yes
                AnimationBlendTime        = 10
                AnimationPriority        = 10
            End
















            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
            EndScript
        End

        AnimationState                    = FIRING_OR_PREATTACK_B
            StateName                    = STATE_Ready_Sword
            Animation                    = ATKA
                AnimationName            = RUSam_ATKE
                AnimationMode            = ONCE
                UseWeaponTiming            = Yes
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
            EndScript
        End





















        AnimationState                    = UNPACKING PACKING_TYPE_1
                ParticleSysBone            = ZZZ_Phial PhialofGaladrielDelay FollowBone:Yes
            Animation
                AnimationName            = RUSam_PHLA
                AnimationMode            = ONCE
            End
        End
        AnimationState                    = PREPARING PACKING_TYPE_1
                ParticleSysBone            = ZZZ_Phial PhialofGaladriel FollowBone:Yes
            Animation
                AnimationName            = RUSam_PHLB
                AnimationMode            = ONCE
            End
        End
        AnimationState                    = PACKING PACKING_TYPE_1
            Animation
                AnimationName            = RUSam_PHLC
                AnimationMode            = ONCE
            End
        End
        AnimationState                    = PACKING_TYPE_1
            Animation
                AnimationName            = RUSam_PHLC
                AnimationMode            = LOOP
            End
        End


        AnimationState                    = EMOTION_CELEBRATING
            Animation
                AnimationName            = RUSam_CHRA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = EMOTION_TAUNTING
            Animation
                AnimationName            = RUSam_TNTA
                AnimationMode            = ONCE
            End
            Animation
                AnimationName            = RUSam_TNTB
                AnimationMode            = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = EMOTION_ALERT    WEAPONSET_TOGGLE_1
            StateName                    = STATE_Ready_Rocks
            Animation
                AnimationName            = RUSam_IDLA
                AnimationMode            = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
            EndScript
        End
        AnimationState                    = EMOTION_ALERT
            StateName                    = STATE_Ready_Sword
            Animation
                AnimationName            = RUSam_IDLB
                AnimationMode            = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
            EndScript
        End

        AnimationState                    = RAISING_FLAG
            Animation
                AnimationName            = RUSam_CHRA
                AnimationMode            = LOOP
            End
        End



        AnimationState                    = SELECTED
            StateName                    = STATE_Attention_Rocks
            Animation
                AnimationName            = RUSam_ATNB
                AnimationMode            = LOOP
            End
            BeginScript
                CurDrawableHideSubObject("pan")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Running_Rocks"
                then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
            EndScript
        End





























        AnimationState                    = WEAPONSET_TOGGLE_1
            StateName                    = STATE_Bored_Rocks
            Animation                    = IDLA
                AnimationName            = RUSam_IDLA
                AnimationMode            = LOOP
            End
            BeginScript
                CurDrawableHideSubObject("pan")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
            EndScript
        End

        IdleAnimationState
            StateName                    = STATE_Bored_Rocks
            Animation                    = IDLA
                AnimationName            = RUSam_IDLA
                AnimationMode            = ONCE
            End
            BeginScript
                CurDrawableHideSubObject("pan")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_AttentionToBored_Rocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
            EndScript
        End










        TransitionState                    = TRANS_DrawSword
            Animation                    = STHA
                AnimationName            = RUSam_STHA
                AnimationMode            = ONCE
                AnimationBlendTime        = 0
            End
        End
        TransitionState                    = TRANS_Bored_RocksToSword
            Animation                    = STHC
                AnimationName            = RUSam_STHC
                AnimationMode            = ONCE
            End
        End
        TransitionState                    = TRANS_Ready_RocksToSword
            Animation                    = STHC
                AnimationName            = RUSam_STHC
                AnimationMode            = ONCE
            End
        End
        TransitionState                    = TRANS_Attention_RocksToSword
            Animation                    = STHC
                AnimationName            = RUSam_STHC
                AnimationMode            = ONCE
            End
        End

        TransitionState                    = TRANS_SheatheSword
            Animation                    = STHA
                AnimationName            = RUSam_STHA
                AnimationMode            = ONCE_BACKWARDS
            End
            Flags                        = START_FRAME_LAST
        End
        TransitionState                    = TRANS_Bored_SwordToRocks
            Animation                    = STHD
                AnimationName            = RUSam_STHD
                AnimationMode            = ONCE
            End
        End
        TransitionState                    = TRANS_Ready_SwordToRocks
            Animation                    = STHD
                AnimationName            = RUSam_STHD
                AnimationMode            = ONCE
            End
        End
        TransitionState                    = TRANS_Attention_SwordToRocks
            Animation                    = STHD
                AnimationName            = RUSam_STHD
                AnimationMode            = ONCE
            End
        End

        TransitionState                    = TRANS_DrawSword_Running
            Animation                    = STHE
                AnimationName            = RUSam_STHE
                AnimationMode            = ONCE
                AnimationBlendTime        = 0
            End
        End
        TransitionState                    = TRANS_Running_RocksToSword
            Animation                    = STHE
                AnimationName            = RUSam_STHE
                AnimationMode            = ONCE
                AnimationBlendTime        = 0
            End
        End

        TransitionState                    = TRANS_SheatheSword_Running
            Animation                    = STHF
                AnimationName            = RUSam_STHF
                AnimationMode            = ONCE
            End
        End
        TransitionState                    = TRANS_Running_SwordToRocks
            Animation                    = STHF
                AnimationName            = RUSam_STHF
                AnimationMode            = ONCE
                AnimationBlendTime        = 0
            End
        End

        TransitionState                    = TRANS_BoredToAttention_Rocks
            Animation                    = RUND
                AnimationName            = RUSam_ATNA
                AnimationMode            = ONCE
            End
        End

        TransitionState                    = TRANS_AttentionToBored_Rocks
            Animation                    = RUND
                AnimationName            = RUSam_ATNC
                AnimationMode            = ONCE
            End
        End


    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side = Men
    EditorSorting = UNIT
    ThreatLevel = SAM_THREAT_LEVEL
    ThingClass = CHARACTER_UNIT
    DisplayMeleeDamage = VERY_WEAK_HERO_DAMAGE
    DisplayRangedDamage = VERY_WEAK_HERO_DAMAGE
    HeroSortOrder = 70
    TransportSlotCount = TRANSPORTSLOTCOUNT_HERO
	
    WeaponSet
        Conditions = None
        Weapon = PRIMARY    HobbitHeroSword
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions = CONTAINED WEAPONSET_TOGGLE_1
        Weapon = PRIMARY    SamRockThrow
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions = CONTAINED
        Weapon = PRIMARY    SamRockThrow
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions = WEAPONSET_TOGGLE_1
        Weapon = PRIMARY    SamRockThrow
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = VeryWeakHeroArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange = 200
    ShroudClearingRange = SHROUD_CLEAR_HOBBIT
    BuildCost = VERY_WEAK_HERO_COST
    BuildTime = VERY_WEAK_HERO_BUILDTIME
    BountyValue = ROHAN_SAM_BOUNTY_VALUE
    DisplayName = OBJECT:RohanSam
    CrushableLevel = 2
    CommandSet = RohanSamCommandSet
    CommandPoints = 0




    VoiceAttack                = SamVoiceAttack
    VoiceAttackCharge            = SamVoiceAttackCharge
    VoiceAttackMachine        = SamVoiceAttack
    VoiceAttackStructure        = SamVoiceAttack
    VoiceFear                 = SamVoiceHelpMe
    VoiceCreated            = SamVoiceSalute
    VoiceFullyCreated         = SamVoiceSalute
    VoiceMove                = SamVoiceMove
    VoiceMoveToCamp            = SamVoiceMove
    VoiceMoveWhileAttacking        = SamVoiceMove
    VoicePriority            = 80
    VoiceRetreatToCastle        = SamVoiceRetreat
    VoiceSelect                = SamVoiceSelectMS
    VoiceSelectBattle         = SamVoiceSelectBattle
    VoiceGuard                = SamVoiceMove

    SoundImpact                = ImpactHorse

    UnitSpecificSounds
        VoiceGarrison                            = SamVoiceGarrison
        VoiceAttackUnitWebbedHumanoidWithGondorFighterInside    = SamVoiceFreeWebbedSoldier
        VoiceAttackUnitWebbedHumanoidWithGondorArcherInside    = SamVoiceFreeWebbedSoldier
        VoiceEnterUnitElvenTransportShip    = SamVoiceMove
        VoiceInitiateCaptureBuilding        = SamVoiceMove
    End

    CrowdResponseKey = Hobbit

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
    EvaEventDieOwner            = SamDie

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Hobbit Unit Infantry
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:FootstepDirtA                             Animation:RUSam_SKL.RUSam_RUNA     Frames:2 11 21 31
        AnimationSound = Sound:FootstepDirtA                             Animation:RUSam_SKL.RUSam_RUNC     Frames:2 9 18 25
        AnimationSound = Sound:FootstepDirtA                             Animation:RUSam_SKL.RUSam_STHC     Frames:41 51
        AnimationSound = Sound:FootstepDirtA                             Animation:RUSam_SKL.RUSam_STHD     Frames:11 24
        AnimationSound = Sound:FootstepDirtA                             Animation:RUSam_SKL.RUSam_STHE     Frames:3 16
        AnimationSound = Sound:FootstepDirtA                             Animation:RUSam_SKL.RUSam_STHF     Frames:3 16

        AnimationSound = Sound:FootstepDirtA                             Animation:RUSam_SKL.RUSam_GTPA    Frames:63 79
        AnimationSound = Sound:FootstepDirtA                             Animation:RUSam_SKL.RUSam_THRA    Frames:31 75

        AnimationSound = Sound:SwordShingClean2                             Animation:RUSam_SKL.RUSam_STHC    Frames:10
        AnimationSound = Sound:SwordIntoScabbard2                            Animation:RUSam_SKL.RUSam_STHD    Frames:29
        AnimationSound = Sound:SwordShingClean2                             Animation:RUSam_SKL.RUSam_STHE    Frames:3
        AnimationSound = Sound:SwordIntoScabbard2                            Animation:RUSam_SKL.RUSam_STHF    Frames:5

        AnimationSound = Sound:PhialOn             RequiredMC:UNPACKING        Animation:RUSam_SKL.RUSam_PHLA     Frames:37
        AnimationSound = Sound:PhialOn             RequiredMC:UNPACKING        Animation:RUSam_SKL.RUSam_PHLC     Frames:37



        AnimationSound = Sound:BodyFallGenericNoArmor                         Animation:RUSam_SKL.RUSam_LNDA     Frames:2

        AnimationSound = Sound:FootstepDirtA                             Animation:RUSam_SKL.RUSam_DIEA     Frames:19 24 28
        AnimationSound = Sound:BodyFallGenericNoArmor                         Animation:RUSam_SKL.RUSam_DIEA     Frames:38
        AnimationSound = Sound:FootstepDirtA                             Animation:RUSam_SKL.RUSam_DIEB    Frames:24 35
        AnimationSound = Sound:BodyFallGenericNoArmor                         Animation:RUSam_SKL.RUSam_DIEB     Frames:48
    End




    RadarPriority = UNIT
    KindOf = HOBBIT_KINDOF

    Body = ActiveBody ModuleTag_ActiveBody
        MaxHealth    = VERY_WEAK_HERO_HEALTH
		DodgePercent        = HERO_DODGE_PERCENT
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance        =    300
         TauntAndPointUpdateDelay    =    1000
         HeroScanDistance            =    150

         AddEmotion    =    HeroCheerIdle_Base
        AddEmotion    =    HeroCheerBusy_Base
        AddEmotion    =    Taunt_Base
        AddEmotion    =    Alert_Base
     End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        HoldGroundCloseRangeDistance = 40
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL
        Speed = NORMAL_GOOD_HOBBIT_SPEED
    End

    #include "..\..\..\includes\CaptureBuilding.inc"

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 3800
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -KNOCKBACK -FADED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL SamVoiceDie
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = SlowDeathBehavior ModuleTag_07

        DeathTypes = NONE +KNOCKBACK
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
    End

    Behavior = BezierProjectileBehavior ModuleTag_08

        FirstHeight = 24
        SecondHeight = 24
        FirstPercentIndent = 30%
        SecondPercentIndent = 70%
        TumbleRandomly = Yes

        CrushStyle = Yes
        DieOnImpact = Yes
        BounceCount = 1
        BounceDistance = 40
        BounceFirstHeight = 24
        BounceSecondHeight = 24
        BounceFirstPercentIndent = 20%
        BounceSecondPercentIndent = 80%

        GroundHitFX       = FX_ThrownRockGroundHit
        GroundBounceFX    = FX_ThrownRockBounceHit
    End

    Behavior = InvisibilityUpdate ModuleTag_StealthForEscape
        InvisibilityNugget
            InvisibilityType        = STEALTH
            ForbiddenConditions        = MOVING FIRING_ANY TAKING_DAMAGE
            BecomeStealthedFX       = FX_ElvenCloakOn
            ExitStealthFX           = FX_ElvenCloakOff
            Options                    = UNTOGGLE_HIDDEN_WHEN_LEAVING_STEALTH
        End
        StartsActive                = No
        UpdatePeriod                = 2000
    End

    Behavior = SpecialPowerModule ModuleTag_ElfCloakStarter
        SpecialPowerTemplate      = SpecialAbilityElfCloak
        UpdateModuleStartsAttack  = Yes

    End

    Behavior = ToggleHiddenSpecialAbilityUpdate ModuleTag_ElfCloakUpdate
        SpecialPowerTemplate    = SpecialAbilityElfCloak















        AwardXPForTriggering    = 0
    End

    Behavior = AutoHealBehavior ModuleTag_ElvenGiftHealing
        StartsActive                = No
        TriggeredBy                    = Upgrade_ElvenGift
        HealingAmount                = ELVEN_GIFT_REGEN_AMOUNT
        HealingDelay                = ELVEN_GIFT_REGEN_DELAY
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = AttributeModifierUpgrade ModuleTag_ElvenGiftBonus
        TriggeredBy = Upgrade_ElvenGift
        AttributeModifier = SpellBookElvenGifts
    End

    Behavior = AutoHealBehavior ModuleTag_FrodoHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 1000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End





    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End



    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 18
  ShadowSizeY = 18
  ShadowTexture = ShadowI
End


ChildObject RohanSam_Summoned RohanSam

    IsTrainable        = No

    CommandPoints    = 0
    EquivalentTo    = RohanSam
    KindOf            = HOBBIT_KINDOF SUMMONED
    MaxSimultaneousOfType    = 1

    Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
        LevelToGrant         = 5
        MPOnly               = Yes
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate

        MinLifetime        = 120000
        MaxLifetime        = 120000
        DeathType        = FADED
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes            = ALL -KNOCKBACK -FADED
        SinkDelay            = 3000
        SinkRate            = 0.40
        DestructionDelay    = 8000
        Sound                = INITIAL SamVoiceDie
    End

    Behavior = SlowDeathBehavior ModuleTag_ConstructionDeath
        DeathTypes            = NONE +FADED
        DeathFlags            = DEATH_2
        FadeDelay            = 500
        FadeTime            = 3500
        DestructionDelay    = 4500
        Sound                = INITIAL SpellGenericUnsummonMS
    End
End


Object RohanSam_mod



     SelectPortrait = HPSam


    ButtonImage = HISam

    Draw = W3DScriptedModelDraw ModuleTag_01

      OkToChangeModelColor = Yes

      StaticModelLODMode = Yes
      DependencySharedModelFlags = TURN_LEFT_HIGH_SPEED TURN_RIGHT_HIGH_SPEED    MOVING ACCELERATE DECELERATE TURN_LEFT TURN_RIGHT ATTACKING    BACKING_UP


        DefaultModelConditionState
            Model               = GUSam_SKN
            Skeleton            = RUSam_SKL


            WeaponLaunchBone    = PRIMARY B_HANDR
            WeaponLaunchBone    = SECONDARY B_HANDR
            ParticleSysBone        = NONE Predator FollowBone:Yes Persist:HOLD PersistID:100
        End

        ModelConditionState        = INVISIBLE_STEALTH
            ParticleSysBone        = NONE Predator FollowBone:Yes Persist:SPAWN PersistID:100
        End

        ModelConditionState = WEAPONSET_HERO_MODE
            ParticleSysBone = BAT_SPINE2 FurFrdodoSam FollowBone:Yes
        End





        AnimationState                    = STUNNED_FLAILING
            StateName                    = STATE_Bored_Rocks
            Animation                    = &&FLYING&&
                AnimationName            = RUSam_FLYA
                AnimationMode            = LOOP
                AnimationBlendTime        = 0
                AnimationSpeedFactorRange    = 0.4 0.6
            End
            Flags                        = RANDOMSTART
        End

        AnimationState                        = DYING DEATH_2
            Animation
                AnimationName                = RUSam_IDLA
                AnimationMode                = LOOP
            End
        End

        AnimationState                    = DYING SPLATTED
            StateName                    = STATE_Bored_Rocks
            Animation                    = &&LANDING&&
                AnimationName            = RUSam_LNDA
                AnimationMode            = ONCE
            End
        End

        AnimationState                    = DYING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Bored_Rocks
            Animation                    = DIEA
                AnimationName            = RUSam_DIEA
                AnimationMode            = ONCE
            End
        End

        AnimationState                    = DYING EMOTION_ALERT
            StateName                    = STATE_Dead.
            Animation                    = DIEB
                AnimationName            = RUSam_DIEB
                AnimationMode            = ONCE
            End
        End

        AnimationState                    = DYING
            StateName                    = STATE_Dead.
            Animation                    = DIEA
                AnimationName            = RUSam_DIEA
                AnimationMode            = ONCE
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = RUSam_IDLA
                AnimationMode                = LOOP
            End
        End


        AnimationState                    = STUNNED_STANDING_UP
            StateName                    = STATE_Ready_Sword
            Animation                    = GTPA
                AnimationName            = RUSam_GTPA
                AnimationMode            = ONCE

            End
        End

        AnimationState                    = STUNNED
            StateName                    = STATE_Bored_Sword
            Animation                    = &&LANDING&&
                AnimationName            = RUSam_LNDA
                AnimationMode            = ONCE
                AnimationBlendTime        = 0
            End
        End























        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = RUSam_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState                        = MOVING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Running_Rocks
            Animation                    = RUNA
                AnimationName            = RUSam_RUNA
                AnimationMode            = LOOP
            End
            Flags                            = RANDOMSTART
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
            EndScript
        End




        AnimationState                    = MOVING EMOTION_ALERT
            StateName                    = STATE_Running_Sword
            Animation                    = RUNC
                AnimationName            = RUSam_RUNC
                AnimationMode            = LOOP
            End
            Flags                        = RANDOMSTART
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
            EndScript
        End

        AnimationState                    = MOVING
            StateName                    = STATE_Running_Rocks
            Animation                    = RUNA
                AnimationName            = RUSam_RUNA
                AnimationMode            = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
            EndScript
        End



        AnimationState                    = PASSENGER FIRING_OR_PREATTACK_A
            StateName                    = NoSword
            Animation                    = THRA
                AnimationName            = RUSam_THRA
                AnimationMode            = ONCE
                UseWeaponTiming            = Yes
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SheatheSword") end
            EndScript
        End

        AnimationState                    = FIRING_OR_RELOADING_A
            StateName                    = STATE_Ready_Sword
            Animation                    = IDLB
                AnimationName            = RUSam_IDLB
                AnimationMode            = LOOP
                AnimationBlendTime        = 10
            End
            BeginScript
                CurDrawableAllowToContinue()
            EndScript
        End

        AnimationState                    = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            StateName                    = STATE_Ready_Rocks
            Animation                    = THRA
                AnimationName            = RUSam_THRA
                AnimationMode            = ONCE
                UseWeaponTiming            = Yes
            End
            FrameForPristineBonePositions    = 42
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
            EndScript
        End

        AnimationState                    = FIRING_OR_PREATTACK_A
            StateName                    = STATE_Ready_Sword
            Animation                    = ATKA
                AnimationName            = RUSam_ATKA
                AnimationMode            = ONCE
                UseWeaponTiming          = Yes
                AnimationBlendTime       = 10
                AnimationPriority        = 10
            End
            Animation                    = ATKH
                AnimationName            = RUSam_ATKH
                AnimationMode            = ONCE
                UseWeaponTiming          = Yes
                AnimationBlendTime       = 10
                AnimationPriority        = 10
            End

            Animation                    = ATKI
                AnimationName            = RUSam_ATKI
                AnimationMode            = ONCE
                UseWeaponTiming          = Yes
                AnimationBlendTime       = 10
                AnimationPriority        = 10
            End
            BeginScript
                CurDrawableHideSubObject("pan")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
            EndScript
        End

        AnimationState                    = FIRING_OR_PREATTACK_B
            StateName                    = STATE_Ready_Sword
            Animation                    = ATKE
                AnimationName            = RUSam_ATKE
                AnimationMode            = ONCE
                UseWeaponTiming          = Yes
                AnimationBlendTime       = 10
            End
            BeginScript
                CurDrawableShowSubObject("pan")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
            EndScript
        End

        AnimationState                    = SPECIAL_WEAPON_ONE
            StateName                    = STATE_Ready_Sword
            Animation                    = ATKE
                AnimationName            = RUSam_ATKE
                AnimationMode            = ONCE
                UseWeaponTiming          = Yes
                AnimationBlendTime       = 10
            End
            BeginScript
                CurDrawableShowSubObject("pan")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
            EndScript
        End



        AnimationState                    = HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
            Animation                    = Hit_Level_1_a
                AnimationName            = RUSam_HITA
                AnimationMode            = ONCE
                AnimationBlendTime        = 0
            End
        End
        AnimationState                    = HIT_REACTION HIT_LEVEL_1
            StateName                    = STATE_Bored_Sword
            Animation                    = Hit_Level_1_a
                AnimationName            = RUSam_HITC
                AnimationMode            = ONCE
                AnimationBlendTime        = 0
            End
        End




        AnimationState                    = UNPACKING PACKING_TYPE_1
                ParticleSysBone            = ZZZ_Phial PhialofGaladrielDelay FollowBone:Yes
            Animation
                AnimationName            = RUSam_PHLA
                AnimationMode            = ONCE
            End
        End
        AnimationState                    = PREPARING PACKING_TYPE_1
                ParticleSysBone            = ZZZ_Phial PhialofGaladriel FollowBone:Yes
            Animation
                AnimationName            = RUSam_PHLB
                AnimationMode            = ONCE
            End
        End
        AnimationState                    = PACKING PACKING_TYPE_1
            Animation
                AnimationName            = RUSam_PHLC
                AnimationMode            = ONCE
            End
        End
        AnimationState                    = PACKING_TYPE_1
            Animation
                AnimationName            = RUSam_PHLC
                AnimationMode            = LOOP
            End
        End


        AnimationState                    = EMOTION_CELEBRATING
            Animation
                AnimationName            = RUSam_CHRA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = EMOTION_TAUNTING
            Animation
                AnimationName            = RUSam_TNTA
                AnimationMode            = ONCE
            End
            Animation
                AnimationName            = RUSam_TNTB
                AnimationMode            = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = EMOTION_ALERT    WEAPONSET_TOGGLE_1
            StateName                    = STATE_Ready_Rocks
            Animation
                AnimationName            = RUSam_IDLA
                AnimationMode            = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
            EndScript
        End
        AnimationState                    = EMOTION_ALERT
            StateName                    = STATE_Ready_Sword
            Animation
                AnimationName            = RUSam_IDLB
                AnimationMode            = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
            EndScript
        End

        AnimationState                    = RAISING_FLAG
            Animation
                AnimationName            = RUSam_CHRA
                AnimationMode            = LOOP
            End
        End



        AnimationState                    = SELECTED
            StateName                    = STATE_Attention_Rocks
            Animation
                AnimationName            = RUSam_ATNB
                AnimationMode            = LOOP
            End
            BeginScript
                CurDrawableHideSubObject("pan")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Running_Rocks"
                then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
            EndScript
        End





























        AnimationState                    = WEAPONSET_TOGGLE_1
            StateName                    = STATE_Bored_Rocks
            Animation                    = IDLA
                AnimationName            = RUSam_IDLA
                AnimationMode            = LOOP
            End
            BeginScript
                CurDrawableHideSubObject("pan")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
            EndScript
        End

        IdleAnimationState
            StateName                    = STATE_Bored_Rocks
            Animation                    = IDLA
                AnimationName            = RUSam_IDLA
                AnimationMode            = ONCE
            End
            BeginScript
                CurDrawableHideSubObject("pan")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_AttentionToBored_Rocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
            EndScript
        End










        TransitionState                    = TRANS_DrawSword
            Animation                    = STHA
                AnimationName            = RUSam_STHA
                AnimationMode            = ONCE
                AnimationBlendTime        = 0
            End
        End
        TransitionState                    = TRANS_Bored_RocksToSword
            Animation                    = STHC
                AnimationName            = RUSam_STHC
                AnimationMode            = ONCE
            End
        End
        TransitionState                    = TRANS_Ready_RocksToSword
            Animation                    = STHC
                AnimationName            = RUSam_STHC
                AnimationMode            = ONCE
            End
        End
        TransitionState                    = TRANS_Attention_RocksToSword
            Animation                    = STHC
                AnimationName            = RUSam_STHC
                AnimationMode            = ONCE
            End
        End

        TransitionState                    = TRANS_SheatheSword
            Animation                    = STHA
                AnimationName            = RUSam_STHA
                AnimationMode            = ONCE_BACKWARDS
            End
            Flags                        = START_FRAME_LAST
        End
        TransitionState                    = TRANS_Bored_SwordToRocks
            Animation                    = STHD
                AnimationName            = RUSam_STHD
                AnimationMode            = ONCE
            End
        End
        TransitionState                    = TRANS_Ready_SwordToRocks
            Animation                    = STHD
                AnimationName            = RUSam_STHD
                AnimationMode            = ONCE
            End
        End
        TransitionState                    = TRANS_Attention_SwordToRocks
            Animation                    = STHD
                AnimationName            = RUSam_STHD
                AnimationMode            = ONCE
            End
        End

        TransitionState                    = TRANS_DrawSword_Running
            Animation                    = STHE
                AnimationName            = RUSam_STHE
                AnimationMode            = ONCE
                AnimationBlendTime        = 0
            End
        End
        TransitionState                    = TRANS_Running_RocksToSword
            Animation                    = STHE
                AnimationName            = RUSam_STHE
                AnimationMode            = ONCE
                AnimationBlendTime        = 0
            End
        End

        TransitionState                    = TRANS_SheatheSword_Running
            Animation                    = STHF
                AnimationName            = RUSam_STHF
                AnimationMode            = ONCE
            End
        End
        TransitionState                    = TRANS_Running_SwordToRocks
            Animation                    = STHF
                AnimationName            = RUSam_STHF
                AnimationMode            = ONCE
                AnimationBlendTime        = 0
            End
        End

        TransitionState                    = TRANS_BoredToAttention_Rocks
            Animation                    = RUND
                AnimationName            = RUSam_ATNA
                AnimationMode            = ONCE
            End
        End

        TransitionState                    = TRANS_AttentionToBored_Rocks
            Animation                    = RUND
                AnimationName            = RUSam_ATNC
                AnimationMode            = ONCE
            End
        End


    End


    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End


    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side = Men
    EditorSorting = UNIT
    ThreatLevel = SAM_THREAT_LEVEL
    ThingClass = CHARACTER_UNIT
    DisplayMeleeDamage = VERY_WEAK_HERO_DAMAGE
    DisplayRangedDamage = VERY_WEAK_HERO_DAMAGE
    MaxSimultaneousOfType = 1
    HeroSortOrder = 70


    TransportSlotCount = TRANSPORTSLOTCOUNT_HERO
    WeaponSet
        Conditions = None
        Weapon = PRIMARY    HobbitHeroSword
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
        Weapon = SECONDARY  SamBratpfanne
        AutoChooseSources = SECONDARY NONE
        ShareWeaponReloadTime    = Yes
    End

    WeaponSet
        Conditions = CONTAINED WEAPONSET_TOGGLE_1
        Weapon = PRIMARY    SamRockThrow
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End
    WeaponSet
        Conditions = CONTAINED
        Weapon = PRIMARY    SamRockThrow
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End
    WeaponSet
        Conditions        = WEAPONSET_HERO_MODE
        Weapon            = PRIMARY    HobbitHeroSword
        Weapon = SECONDARY  SamBratpfanne
        AutoChooseSources = SECONDARY NONE
        ShareWeaponReloadTime    = Yes
    End
    WeaponSet
        Conditions = WEAPONSET_TOGGLE_1
        Weapon = PRIMARY    SamRockThrow
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = VeryWeakHeroArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange = 200
    ShroudClearingRange = SHROUD_CLEAR_HOBBIT
    BuildCost = VERY_WEAK_HERO_COST
    BuildTime = VERY_WEAK_HERO_BUILDTIME
    BountyValue = ROHAN_SAM_BOUNTY_VALUE
    DisplayName = OBJECT:RohanSam
    RecruitText = CONTROLBAR:RohanSamRecruit
    ReviveText    = CONTROLBAR:RohanSamRevive
    Hotkey        = CONTROLBAR:RohanSamHotkey
    CrushableLevel = 2
    CommandSet = RohanSamModCommandSet
    CommandPoints = 0




    VoiceAttack                = SamVoiceAttack
    VoiceAttackCharge            = SamVoiceAttackCharge
    VoiceAttackMachine        = SamVoiceAttack
    VoiceAttackStructure        = SamVoiceAttack
    VoiceFear                 = SamVoiceHelpMe
    VoiceCreated            = SamVoiceSalute
    VoiceFullyCreated         = SamVoiceSalute
    VoiceMove                = SamVoiceMove
    VoiceMoveToCamp            = SamVoiceMove
    VoiceMoveWhileAttacking        = SamVoiceMove
    VoicePriority            = 80
    VoiceRetreatToCastle        = SamVoiceRetreat
    VoiceSelect                = SamVoiceSelectMS
    VoiceSelectBattle         = SamVoiceSelectBattle
    VoiceGuard                = SamVoiceMove

    SoundImpact                = ImpactHorse

    UnitSpecificSounds
        VoiceGarrison                            = SamVoiceGarrison
        VoiceAttackUnitWebbedHumanoidWithGondorFighterInside    = SamVoiceFreeWebbedSoldier
        VoiceAttackUnitWebbedHumanoidWithGondorArcherInside    = SamVoiceFreeWebbedSoldier
        VoiceEnterUnitElvenTransportShip    = SamVoiceMove
        VoiceInitiateCaptureBuilding        = SamVoiceMove
    End

    CrowdResponseKey = Hobbit

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
    EvaEventDieOwner            = SamDie

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Hobbit Unit Infantry
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:FootstepDirtA                             Animation:RUSam_SKL.RUSam_RUNA     Frames:2 11 21 31
        AnimationSound = Sound:FootstepDirtA                             Animation:RUSam_SKL.RUSam_RUNC     Frames:2 9 18 25
        AnimationSound = Sound:FootstepDirtA                             Animation:RUSam_SKL.RUSam_STHC     Frames:41 51
        AnimationSound = Sound:FootstepDirtA                             Animation:RUSam_SKL.RUSam_STHD     Frames:11 24
        AnimationSound = Sound:FootstepDirtA                             Animation:RUSam_SKL.RUSam_STHE     Frames:3 16
        AnimationSound = Sound:FootstepDirtA                             Animation:RUSam_SKL.RUSam_STHF     Frames:3 16

        AnimationSound = Sound:FootstepDirtA                             Animation:RUSam_SKL.RUSam_GTPA    Frames:63 79
        AnimationSound = Sound:FootstepDirtA                             Animation:RUSam_SKL.RUSam_THRA    Frames:31 75

        AnimationSound = Sound:SwordShingClean2                             Animation:RUSam_SKL.RUSam_STHC    Frames:10
        AnimationSound = Sound:SwordIntoScabbard2                            Animation:RUSam_SKL.RUSam_STHD    Frames:29
        AnimationSound = Sound:SwordShingClean2                             Animation:RUSam_SKL.RUSam_STHE    Frames:3
        AnimationSound = Sound:SwordIntoScabbard2                            Animation:RUSam_SKL.RUSam_STHF    Frames:5

        AnimationSound = Sound:PhialOn             RequiredMC:UNPACKING        Animation:RUSam_SKL.RUSam_PHLA     Frames:37
        AnimationSound = Sound:PhialOn             RequiredMC:UNPACKING        Animation:RUSam_SKL.RUSam_PHLC     Frames:37



        AnimationSound = Sound:BodyFallGenericNoArmor                         Animation:RUSam_SKL.RUSam_LNDA     Frames:2

        AnimationSound = Sound:FootstepDirtA                             Animation:RUSam_SKL.RUSam_DIEA     Frames:19 24 28
        AnimationSound = Sound:BodyFallGenericNoArmor                         Animation:RUSam_SKL.RUSam_DIEA     Frames:38
        AnimationSound = Sound:FootstepDirtA                             Animation:RUSam_SKL.RUSam_DIEB    Frames:24 35
        AnimationSound = Sound:BodyFallGenericNoArmor                         Animation:RUSam_SKL.RUSam_DIEB     Frames:48
    End




    RadarPriority = UNIT
    KindOf = HOBBIT_KINDOF


    Body = RespawnBody ModuleTag_RespawnBody
        MaxHealth                    = VERY_WEAK_HERO_HEALTH
        PermanentlyKilledByFilter    = NONE
		DodgePercent        = HERO_DODGE_PERCENT
    End
	
    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                = DYING
        DeathAnimationTime        = 2600
        RespawnAnim                = LEVELED
        RespawnAnimationTime        = 2000
        AutoRespawnAtObjectFilter    = NONE +CASTLE_KEEP
        ButtonImage                = HISam

        RespawnRules =            AutoSpawn:No    Cost:VERY_WEAK_HERO_COST        Time:VERY_WEAK_HERO_RESPAWNTIME        Health:100%
   End


    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance        =    300
         TauntAndPointUpdateDelay    =    1000
         HeroScanDistance            =    150

         AddEmotion    =    HeroCheerIdle_Base
        AddEmotion    =    HeroCheerBusy_Base
        AddEmotion    =    Taunt_Base
        AddEmotion    =    Alert_Base
     End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        AILuaEventsList                =    FrodoFunctions
        MoodAttackCheckRate        = 500
        HoldGroundCloseRangeDistance = 40
        CanAttackWhileContained = Yes
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL
        Speed = NORMAL_GOOD_HOBBIT_SPEED
    End

    #include "..\..\..\includes\CaptureBuilding.inc"

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 3800
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -KNOCKBACK -FADED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL SamVoiceDie
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = SlowDeathBehavior ModuleTag_07

        DeathTypes = NONE +KNOCKBACK
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_OCLKriegEnabler3
       SpecialPowerTemplate        = SpecialAbilitySofortswitchohneAufladung2
       TriggeredBy                 = Upgrade_Level_1
    End

    Behavior = OCLSpecialPower  ModuleTag_OCLKrieg3
       SpecialPowerTemplate        = SpecialAbilitySofortswitchohneAufladung2
       OCL                         = OCL_SamDieSucheFahigkeiten
       CreateLocation              = CREATE_AT_LOCATION
       StartsPaused                = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_OCLKriegUpdate3
        SpecialPowerTemplate       = SpecialAbilitySofortswitchohneAufladung2
        UnpackTime                 = 0
        PreparationTime            = 0
        PackTime                   = 0
        AwardXPForTriggering       = 0
        FreezeAfterTriggerDuration = 0
    End






    Behavior = SpecialPowerModule ModuleTag_SamFryingPanStarter
        SpecialPowerTemplate      = SpecialAbilitySamBratPfanne
        UpdateModuleStartsAttack  = Yes
        StartsPaused              = No
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_SamBratPfanneWeaponFireUpdate
        SpecialPowerTemplate      = SpecialAbilitySamBratPfanne
        WhichSpecialWeapon        = 1
        UnpackTime                = 300
        PreparationTime           = 1
        PackTime                  = 1000
        StartAbilityRange         = 10
        AwardXPForTriggering      = 0
        SpecialWeapon             = SamBratpfanne
        LoseStealthOnTrigger      = Yes
        PreTriggerUnstealthTime   = 300
    End

    Behavior = AutoAbilityBehavior ModuleTag_SamBratPfanneAutoAbility
        SpecialAbility            = SpecialAbilitySamBratPfanne
        MaxScanRange              = 25
        Query                     = 1 ALL ENEMIES -STRUCTURE
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        TriggeredBy             = Upgrade_Level_5
    End

    Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        StartsPaused            = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        HeroAttributeModifier   = AragornBladeMaster
        HeroEffectDuration      = 30000
        UnpackTime              = 1
        TriggerSound            = AragornBladeMaster
    End







    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = Yes
        StartsPaused = No
    End

    Behavior = LargeGroupBonusUpdate ModuleTag_LargeGroupBonus
        UpdateRate           = 1000
        HordeMemberFilter    = NONE +RohanSam_mod +RohanFrodo_mod +RohanPippin +RohanMerry_mod
        Count                = 3
        Radius               = 55.0
        RubOffRadius         = 55.0
        AlliesOnly           = Yes
        AttributeModifier    = HobbitsLargeGroupBonus
    End



    Behavior = BezierProjectileBehavior ModuleTag_08

        FirstHeight = 24
        SecondHeight = 24
        FirstPercentIndent = 30%
        SecondPercentIndent = 70%
        TumbleRandomly = Yes

        CrushStyle = Yes
        DieOnImpact = Yes
        BounceCount = 1
        BounceDistance = 40
        BounceFirstHeight = 24
        BounceSecondHeight = 24
        BounceFirstPercentIndent = 20%
        BounceSecondPercentIndent = 80%

        GroundHitFX       = FX_ThrownRockGroundHit
        GroundBounceFX    = FX_ThrownRockBounceHit
    End



    Behavior = InvisibilityUpdate ModuleTag_StealthForEscape
        InvisibilityNugget
            InvisibilityType        = STEALTH
            ForbiddenConditions        = MOVING FIRING_ANY TAKING_DAMAGE
            BecomeStealthedFX       = FX_ElvenCloakOn
            ExitStealthFX           = FX_ElvenCloakOff
            Options                    = UNTOGGLE_HIDDEN_WHEN_LEAVING_STEALTH
        End
        StartsActive                = No
        UpdatePeriod                = 2000
    End

    Behavior = SpecialPowerModule ModuleTag_ElfCloakStarter
        SpecialPowerTemplate      = SpecialAbilityElfCloak
        UpdateModuleStartsAttack  = Yes

    End

    Behavior = ToggleHiddenSpecialAbilityUpdate ModuleTag_ElfCloakUpdate
        SpecialPowerTemplate    = SpecialAbilityElfCloak
        AwardXPForTriggering    = 0
    End

    Behavior = AutoHealBehavior ModuleTag_ElvenGiftHealing
        StartsActive                = No
        TriggeredBy                    = Upgrade_ElvenGift
        HealingAmount                = ELVEN_GIFT_REGEN_AMOUNT
        HealingDelay                = ELVEN_GIFT_REGEN_DELAY
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = AttributeModifierUpgrade ModuleTag_ElvenGiftBonus
        TriggeredBy = Upgrade_ElvenGift
        AttributeModifier = SpellBookElvenGifts
    End

    Behavior = AutoHealBehavior ModuleTag_FrodoHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 1000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AussaatEnabler
        SpecialPowerTemplate      = SpecialAbilityDorwinionAussaat
        TriggeredBy               = Upgrade_GeschenkeLoriens
    End

    Behavior = SpecialPowerModule ModuleTag_AussaatStarter
        SpecialPowerTemplate      = SpecialAbilityDorwinionAussaat
        UpdateModuleStartsAttack  = Yes
        StartsPaused              = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_AussaatUpdate
        SpecialPowerTemplate      = SpecialAbilityDorwinionAussaat
        WhichSpecialWeapon        = 2
        UnpackTime                = 1000
        PackTime                  = 500
        SpecialWeapon             = DorwinionAussaatWeapon
        TriggerSound              = SpellElvenWood
    End

    Behavior = AttributeModifierUpgrade ModuleTag_Bonus
        TriggeredBy               = Upgrade_GeschenkeLoriens
        AttributeModifier         = GeschenkeFrodoModifier
    End







    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate EscapeAI
        CommandButtonName = Command_SpecialAbilityElfCloakSam
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate AragornBladeMasterAI
        CommandButtonName = Command_FurFrodo
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate GoblinKingPoisonedStingerAI
        CommandButtonName = Command_SamBratpfanne
        SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
        SpecialPowerRadius = 100
    End



    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 18
  ShadowSizeY = 18
  ShadowTexture = ShadowI
End


ChildObject GaladrielRohanSam_mod RohanSam_mod

    CommandSet = RohanSamModCommandSet_Galadriel
    CommandPoints = 0

End



ChildObject RohanSam_modFrodoGuard RohanSam_mod
    IsTrainable = No
    CommandPoints = 0
    EquivalentTo = RohanSam_mod
    MaxSimultaneousOfType = 1

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = FighterHorde
    End

    Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
        LevelToGrant = 10
    End

    KindOf = +CREEP

    ThreatBreakdown MordorGoblinSwordsmanSlaved_ThreatBreakdown
        AIKindOf = CREEP
    End


    Behavior = SlavedUpdate ModuleTag_Slave
        GuardMaxRange       = 300
        GuardWanderRange    = 100
        UseSlaverAsControlForEvaObjectSightedEvents = Yes
    End

End


