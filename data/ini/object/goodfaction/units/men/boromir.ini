Object GondorBoromir

    SelectPortrait = HPBoromirArmored
    ButtonImage    = HIBoromira

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_LeaderHero

    Draw = W3DScriptedModelDraw ModuleTag_DRAW

        DefaultModelConditionState
            Model           = guboromir_fshb
        End

        ModelConditionState = WEAPONSET_HERO_MODE
            Model           = guboromir_fshp
			ParticleSysBone = BAT_RIBS BeregondBladeMaster FollowBone:Yes
        End
		ModelConditionState          = USER_6
            Model                    = guboromir_fshb
            ParticleSysBone = BAT_RIBS BeregondBladeMaster FollowBone:Yes
        End

        IdleAnimationState
            StateName = Idle
            Animation           = IDLB
                AnimationName     = GUBoromir_SKL.GUBoromir_IDLB
                AnimationMode     = ONCE
                AnimationPriority   = 20
            End
            Animation           = IDLD
                AnimationName     = GUBoromir_SKL.GUBoromir_IDLD
                AnimationMode     = ONCE
                AnimationPriority   = 1
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
            EndScript
        End

        TransitionState       = Trans_None_To_Sword
            Animation           = GUBoromir_STHA
                AnimationName     = GUBoromir_SKL.GUBoromir_STHA
                AnimationMode     = ONCE
            End
        End
        TransitionState       = Trans_Sword_To_None
            Animation           = GUBoromir_STHB
                AnimationName     = GUBoromir_SKL.GUBoromir_STHB
                AnimationMode     = ONCE
            End
        End

        AnimationState        = STUNNED_FLAILING
            Flags               = RANDOMSTART
            Animation           = GUBoromir_FLYA
                AnimationName     = GUBoromir_SKL.GUBoromir_FLYA
                AnimationMode     = LOOP
            End
        End





        AnimationState = USER_1 DYING SPLATTED
            Animation
                AnimationName = GUBoromir_SKL.GUBoromir_SPCE
                AnimationMode = ONCE
            End
        End

        AnimationState        = DYING SPLATTED
            Animation           = GUBoromir_LNDA
                AnimationName     = GUBoromir_SKL.GUBoromir_LNDA
                AnimationMode     = ONCE
            End
        End

        AnimationState = USER_1 DYING AFLAME
            Animation
                AnimationName = GUBoromir_SKL.GUBoromir_SPCE
                AnimationMode = ONCE
            End
        End

        AnimationState        = DYING AFLAME
            Animation = DieAflame
                AnimationName       = GUBoromir_SKL.GUBoromir_MFDA
                AnimationMode       = LOOP
            End
        End
        AnimationState        = DYING
            Animation           = GUBoromir_DTHA
                AnimationName     = GUBoromir_SKL.GUBoromir_DTHA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = DYING DEATH_2
            Animation           = ByeBye
                AnimationName     = GUBoromir_SKL.GUBoromir_IDLA
                AnimationMode     = LOOP
            End
        End

        AnimationState = USER_1 DYING
            Animation
                AnimationName = GUBoromir_SKL.GUBoromir_SPCE
                AnimationMode = ONCE
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = GUBoromir_IDLB
                AnimationMode                = LOOP
            End
        End


        AnimationState        = STUNNED_STANDING_UP
            Animation           = GUBoromir_GTPA
                AnimationName     = GUBoromir_SKL.GUBoromir_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.3 1.3
            End
        End
        AnimationState        = STUNNED
            Animation           = GUBoromir_LNDA
                AnimationName     = GUBoromir_SKL.GUBoromir_LNDA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = PACKING_TYPE_2
            StateName          =    CaptainPower
            Animation           = GUBoromir_CHRA
                AnimationName     = GUBoromir_SKL.GUBoromir_CHRA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.2 1.2
            End
        End


        AnimationState        = UNPACKING SPECIAL_POWER_1
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_HRNA
                AnimationMode     = ONCE
            End
        End
        AnimationState        = PREPARING SPECIAL_POWER_1
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_HRNB
                AnimationMode     = ONCE
            End
            EnteringStateFX = FX_BoromirHorn
        End
        AnimationState        = PACKING SPECIAL_POWER_1
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_HRNC
                AnimationMode     = ONCE
            End
        End
        AnimationState        = SPECIAL_POWER_1
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_HRNB
                AnimationMode     = LOOP
            End
        End

        AnimationState        = UNPACKING SPECIAL_WEAPON_ONE
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCA
                AnimationMode     = ONCE
            End
        End
        AnimationState        = PREPARING SPECIAL_WEAPON_ONE
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCB
                AnimationMode     = ONCE
            End
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCC
                AnimationMode     = ONCE
            End
        EnteringStateFX = FX_BoromirHorn
        End
        AnimationState        = PACKING SPECIAL_WEAPON_ONE
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCE
                AnimationMode     = ONCE
            End
        End
        AnimationState        = SPECIAL_WEAPON_ONE
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCB
                AnimationMode     = ONCE
            End
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCC
                AnimationMode     = ONCE
            End
        End

        AnimationState        = SPECIAL_WEAPON_THREE
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_CHRA
                AnimationMode     = ONCE
            End
        End

        AnimationState                = WEAPONSET_RAMPAGE
            StateName         = LastStand

            Animation           = ATTACK_A
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCB
                AnimationMode     = ONCE
                AnimationPriority    = 2

                AnimationSpeedFactorRange = 1.0 1.05
            End

            Animation           = ATTACK_B
                AnimationName    = GUBoromir_SKL.GUBoromir_SPCC
                AnimationMode     = ONCE
                AnimationPriority    = 3

                AnimationSpeedFactorRange = 2.35 2.45
            End

            Flags                    = RESTART_ANIM_WHEN_COMPLETE
            FXEvent    = Frame:20 Name: FX_BladeMasterHitOrient
        End

        AnimationState        = MOVING WANDER WEAPONSTATE_CLOSE_RANGE
            StateName           = WithSword

            Animation           = GUBoromir_WLKA
                AnimationName     = GUBoromir_SKL.GUBoromir_WLKA
                AnimationMode     = LOOP
            End
        End


        AnimationState        = MOVING WANDER

            Animation           = GUBoromir_WLKA
                AnimationName     = GUBoromir_SKL.GUBoromir_WLKA
                AnimationMode     = LOOP
            End
        End


        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = GUBoromir_SKL.GUBoromir_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End


        AnimationState        = MOVING

            Flags               = RANDOMSTART
            Animation           = GUBoromir_RUNB
                AnimationName     = GUBoromir_SKL.GUBoromir_RUNA
                AnimationMode     = LOOP
            End
        End




        AnimationState                = FIRING_OR_PREATTACK_A WEAPONSET_HERO_MODE WEAPONSTATE_CLOSE_RANGE
            StateName                = WithSword
            Animation           = ATKA
                AnimationName     = GUBoromir_SKL.GUBoromir_ATKA
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKB
                AnimationName    = GUBoromir_SKL.GUBoromir_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            FXEvent    = Frame:25 Name: FX_BladeMasterHitOrient
        End

        AnimationState        = USER_1 DAMAGED FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE
            StateName           = LastStandAttacking
            Animation           = SPCB
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCB
                AnimationMode     = ONCE
            End
            Animation           = SPCC
                AnimationName    = GUBoromir_SKL.GUBoromir_SPCC
                AnimationMode     = ONCE
            End
            FXEvent    = Frame:25 Name: FX_BladeMasterHitOrient
        End

        AnimationState        = FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE
            StateName           = WithSword
            Animation           = ATKA
                AnimationName     = GUBoromir_SKL.GUBoromir_ATKA
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKB
                AnimationName    = GUBoromir_SKL.GUBoromir_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
        End

        AnimationState                = FIRING_OR_PREATTACK_A WEAPONSET_HERO_MODE
            Animation           = GUBoromir_ATD1
                AnimationName     = GUBoromir_SKL.GUBoromir_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            FXEvent    = Frame:25 Name: FX_BladeMasterHitOrient
        End

        AnimationState        = USER_1 DAMAGED FIRING_OR_PREATTACK_A
            StateName           = LastStandAttacking
            Animation           = SPCB
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = SPCC
                AnimationName    = GUBoromir_SKL.GUBoromir_SPCC
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End

            FXEvent    = Frame:25 Name: FX_BladeMasterHitOrient
        End

        AnimationState        = FIRING_OR_PREATTACK_A
            Animation           = GUBoromir_ATD1
                AnimationName     = GUBoromir_SKL.GUBoromir_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
        End

        AnimationState        = USER_1 DAMAGED ATTACKING
            StateName           = LastStand
            Animation           = ALERT_1
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCA
                AnimationMode     = LOOP
            End
        End

        AnimationState        = ATTACKING
            Animation           = ALERT_1
                AnimationName     = GUBoromir_SKL.GUBoromir_IDLA
                AnimationMode     = LOOP
            End

        End


        TransitionState                    =    TRANS_Idle_to_Selected
            Animation                    =    ATND
                AnimationName            =    GUBoromir_SKL.GUBoromir_ATND
                AnimationMode            =    ONCE
            End
        End

        TransitionState                    =    TRANS_Selected_To_Idle
            Animation                    =    ATNE
                AnimationName            =    GUBoromir_SKL.GUBoromir_ATNE
                AnimationMode            =    ONCE
            End
        End


        AnimationState                = USER_1 DAMAGED LEVELED
            StateName = LastStand
            Animation                = LevelUp
                AnimationName        = GUBoromir_SKL.GUBoromir_SPCA
                AnimationMode        = ONCE
            End
        End

        AnimationState                = LEVELED
            Animation                = LevelUp
                AnimationName        = GUBoromir_SKL.GUBoromir_CHRA
                AnimationMode        = ONCE
            End
        End

        AnimationState            = RAISING_FLAG
            Animation           = CHRA
                AnimationName   = GUBoromir_SKL.GUBoromir_CHRA
                AnimationMode   = Once
            End
            Animation           = CHRB
                AnimationName   = GUBoromir_SKL.GUBoromir_CHRB
                AnimationMode   = Once
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = USER_1 DAMAGED SELECTED
            StateName = LastStand
            Animation                = ATNB
                AnimationName        = GUBoromir_SKL.GUBoromir_SPCA
                AnimationMode        = LOOP
            End
        End

        AnimationState                =    SELECTED
            StateName                =    Selected
            SimilarRestart            =   Yes
            Animation                =    ATNB
                AnimationName        =    GUBoromir_SKL.GUBoromir_ATNB
                AnimationMode        =    LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
            EndScript
        End


        AnimationState            = EMOTION_TAUNTING
            Animation           = CHRA
                AnimationName   = GUBoromir_SKL.GUBoromir_CHRA
                AnimationMode   = Once
            End
        End

        AnimationState            = EMOTION_CELEBRATING
            Animation           = CHRB
                AnimationName   = GUBoromir_SKL.GUBoromir_CHRB
                AnimationMode   = Once
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = EMOTION_ALERT EMOTION_MORALE_HIGH
            Animation                    = Taunting
                AnimationName            =  GUBoromir_SKL.GUBoromir_TNTB
                AnimationMode            = ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState        = EMOTION_ALERT
            Animation           = ALERT_1
                AnimationName     = GUBoromir_SKL.GUBoromir_IDLA
                AnimationMode     = LOOP
            End

        End



        AnimationState = HIT_REACTION HIT_LEVEL_1
            Animation = Hit_Level_1_a
                AnimationName = GUBoromir_SKL.GUBoromir_HITA
                AnimationMode = ONCE
            End
        End

        AnimationState                = USER_1 DAMAGED
            StateName = LastStand
            Animation                = LastStand
                AnimationName        = GUBoromir_SKL.GUBoromir_SPCA
                AnimationMode        = LOOP
            End
        End
    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    Draw = W3DScriptedModelDraw ModuleTag_Schmiedekunst
        DefaultModelConditionState
            Model = None
        End
        ModelConditionState = USER_8
            Model           = exldrspimla
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"



    Side = Men
    EditorSorting = UNIT
    ThreatLevel = BOROMIR_THREAT_LEVEL
    ThingClass = CHARACTER_UNIT
    BuildCost         = BOROMIRDAG_COST
    BuildTime         = MEDIUM_HERO_BUILDTIME
    DisplayMeleeDamage = BOROMIRDAG_DAMAGE

    TransportSlotCount = TRANSPORTSLOTCOUNT_HERO

    WeaponSet
        Conditions = None
        Weapon = PRIMARY    BoromirSword
    End

    WeaponSet
        Conditions        = RAMPAGE
        Weapon            = PRIMARY    BoromirRampageSword
    End

    WeaponSet
        Conditions        = WEAPONSET_HERO_MODE
        Weapon            = PRIMARY    BoromirSword
    End

    ArmorSet
        Conditions      = None
        Armor           = MediumHeroArmor
        DamageFX        = NormalDamageFX
    End

    ArmorSet
        Conditions      = PLAYER_UPGRADE
        Armor           = StrongHeroArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange = 300
    ShroudClearingRange = 340
    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    BountyValue = GONDOR_BOROMIR_BOUNTY_VALUE
    DisplayName = OBJECT:GondorBoromir
    RecruitText = CONTROLBAR:GondorBoromirRecruit
    ReviveText    = CONTROLBAR:GondorBoromirRevive
    Hotkey        = CONTROLBAR:GondorBoromirHotkey
    CrushableLevel = 3

    CommandSet = BoromirModCommandSet
    CommandPoints = 0

    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_BoromirBody

    AutoResolveArmor
        Armor = AutoResolve_BoromirArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_BoromirWeapon
    End

    AutoResolveLeadership = AutoResolve_BoromirBonus

    VoiceAttack                = BoromirVoiceAttack
    VoiceAttackCharge            = BoromirVoiceAttackCharge
    VoiceAttackMachine        = BoromirVoiceAttack
    VoiceAttackStructure        = BoromirVoiceAttackBuilding
    VoiceCreated            = BoromirVoiceSalute
    VoiceFullyCreated         = BoromirVoiceSalute
    VoiceFear                 = BoromirVoiceHelpMe
    VoiceMove                = BoromirVoiceMove
    VoiceMoveToCamp            = BoromirVoiceMoveCamp
    VoiceMoveWhileAttacking        = BoromirVoiceDisengage
    VoicePriority              = 85
    VoiceRetreatToCastle        = BoromirVoiceRetreat
    VoiceSelect                = BoromirVoiceSelectMS
    VoiceSelectBattle         = BoromirVoiceSelectBattle
    VoiceGuard                = BoromirVoiceMove

    SoundImpact                = ImpactHorse

    UnitSpecificSounds
        VoiceGarrison                        = BoromirVoiceGarrison
        VoiceEnterUnitElvenTransportShip    = BoromirVoiceMove
        VoiceInitiateCaptureBuilding        = BoromirVoiceMove
    End

    CrowdResponseKey = GoodMen

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    EvaEventDieOwner = BoromirModDie

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:SwordIntoScabbard1        Animation:GUBoromir_SKL.GUBoromir_HRNA     Frames:7
        AnimationSound = Sound:BoromirHorn            Animation:GUBoromir_SKL.GUBoromir_HRNB     Frames:0
        AnimationSound = Sound:SwordShingClean1        Animation:GUBoromir_SKL.GUBoromir_HRNC     Frames:5
        AnimationSound = Sound:FootstepDirtA        Animation:GUBoromir_SKL.GUBoromir_RUNA     Frames:10 22
        AnimationSound = Sound:FootstepDirtA        Animation:GUBoromir_SKL.GUBoromir_RUNB     Frames:10 22
        AnimationSound = Sound:FootstepDirtA        Animation:GUBoromir_SKL.GUBoromir_ATRA     Frames:11 23 35 47
        AnimationSound = Sound:FootstepDirtA        Animation:GUBoromir_SKL.GUBoromir_MFDA    Frames:8 20 31 41

        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:GUBoromir_SKL.GUBoromir_DTHA     Frames:116
        AnimationSound = Sound:BodyFallSoldier        Animation:GUBoromir_SKL.GUBoromir_LNDA     Frames:4
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:GUBoromir_SKL.GUBoromir_SPCE     Frames:82
    End

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Man Man_Male Unit Infantry Hero
    End

    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE HERO ARMY_SUMMARY HEAVY_MELEE_HITTER
    PathfindDiameter = 40.0
    CamouflageDetectionMultiplier = CAMOUFLAGE_DETECTION_DISTANCE_LONG


    Body = DelayedDeathBody ModuleTag_DelayedDeathBody
        CheerRadius                      = EMOTION_CHEER_RADIUS
        MaxHealth                        = BOROMIRDAG_HEALTH
        MaxHealthDamaged                 = 700
        MaxHealthReallyDamaged           = 200
        DelayedDeathTime                 = 16000
        DelayedDeathPrerequisiteUpgrade  = Upgrade_Level_1
        PermanentlyKilledByFilter        = NONE
        DodgePercent                     = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                 = DYING
        DeathAnimationTime        = 4966
        RespawnAnim               = LEVELED
        RespawnAnimationTime      = 2000
        AutoRespawnAtObjectFilter = NONE +CASTLE_KEEP
        ButtonImage               = HIBorimir
        RespawnAsTemplate         = GondorBoromir

        RespawnRules =    AutoSpawn:No           Cost:BOROMIRDAG_COST       Time:MEDIUM_HERO_RESPAWNTIME        Health:100%
   End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_LastStand
        SpecialPowerTemplate = SpecialAbilityLastStand
        TriggeredBy = Upgrade_Level_1
    End

    Behavior = ModelConditionUpgrade ModuleTag_LastStandAnims
        AddConditionFlags = USER_1
        TriggeredBy = Upgrade_Level_1
    End

    Behavior = SpecialPowerModule ModuleTag_LastStandUpdate
        SpecialPowerTemplate     = SpecialAbilityLastStand
        UpdateModuleStartsAttack = No
        StartsPaused             = Yes
    End

    Behavior = TransitionDamageFX ModleTag_HideAndShowArrows
        PristineHideSubObject ARRW1 ARRW2 ARRW3
        DamagedHideSubObject ARRW1 ARRW2 ARRW3
        ReallyDamagedShowSubObject ARRW1 ARRW2 ARRW3
    End

    Behavior = SubObjectsUpgrade ModuleTag_WithoutGNTL
        TriggeredBy       = Upgrade_Level_1
        HideSubObjects    = TEMPMESH
    End

    Behavior = AutoHealBehavior ModuleTag_BoromirHealing
        StartsActive = Yes
        HealingAmount = 45
        HealingDelay = 1000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = LifetimeUpdate ModuleTag_LifeTime
        WaitForWakeUp = Yes
    End


    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    #include "..\..\..\includes\CaptureBuilding.inc"

    Behavior = CitadelSlaughterHordeContain ModuleTag_SlaughterMe
        PassengerFilter              = NONE +TheDroppedRing
        ObjectStatusOfContained      = UNSELECTABLE ENCLOSED
        ContainMax                   = 1
        AllowEnemiesInside           = No
        AllowAlliesInside            = Yes
        AllowNeutralInside           = No
        AllowOwnPlayerInsideOverride = Yes
        EnterSound                   = BoromirVoiceRing
        EntryOffset                  = X:0.0 Y:0.0 Z:0.0
        EntryPosition                = X:0.0 Y:0.0 Z:0.0
        ExitOffset                   = X:0.0 Y:0.0 Z:0.0
        StatusForRingEntry           = HOLDING_THE_RING
        UpgradeForRingEntry          = Upgrade_RingHero Upgrade_FortressRingHero
        ObjectToDestroyForRingEntry  = NONE +TheDroppedRing
        FXForRingEntry               = FX_OneRingFlare
    End

    Behavior = ModelConditionUpgrade ModulTag_RingHeroMC
        TriggeredBy         = Upgrade_RingHero Upgrade_FortressRingHero
        RequiresAllTriggers = Yes
        AddConditionFlags   = ONE_RING
    End

    Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
        SkirmishAIOnly = Yes
        StuffToPickUp = NONE +TheDroppedRing
        ScanRange = 3000
        ScanIntervalSeconds = 0.5
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle    = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate           = 500
        AILuaEventsList               = BoromirFunctionsEdain
        RampageTime                   = 16000
    End


    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance               = 300
        TauntAndPointUpdateDelay            = 10000
        AddEmotion            =    Doom_Base
        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
        AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base
        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_GOOD_HERO_SPEED
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_ENRAGED
        Speed     = NORMAL_GOOD_HERO_SPEED
    End

    Behavior = AutoHealBehavior ModuleTag_ElvenGiftHealing
        StartsActive                = No
        TriggeredBy                    = Upgrade_ElvenGift
        HealingAmount                = ELVEN_GIFT_REGEN_AMOUNT
        HealingDelay                = ELVEN_GIFT_REGEN_DELAY
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = AttributeModifierUpgrade ModuleTag_ElvenGiftBonus
        TriggeredBy = Upgrade_ElvenGift
        AttributeModifier = SpellBookElvenGifts
    End

    Behavior = DualWeaponBehavior ModuleTag_13
        SwitchWeaponOnCloseRangeDistance = 161
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime        = 4000
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -FADED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL BoromirVoiceDie
    End


    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 7
        HitReactionLifeTimer2 = 15
        HitReactionLifeTimer3 = 10

        HitReactionThreshold1 = 0.0
        HitReactionThreshold2 = 25.0
        HitReactionThreshold3 = 50.0
    End

    Behavior = AttributeModifierUpgrade ModuleTag_FinrodBonus
        TriggeredBy       = Upgrade_RaiseShield
        AttributeModifier = FinarfinRingModifierHero
    End

    Behavior = PassiveAreaEffectBehavior ModuleTag_FeelGoodHero2
        EffectRadius            = 500
        PingDelay               = 2000
        UpgradeRequired         = Upgrade_TestBuilding_2
        ModifierName            = BoromirCitadelModifier
        AllowFilter             = ANY +GondorWachterderVeste +GondorWachterderVesteHorde ALLIES
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EnableHorn
        SpecialPowerTemplate        = SpecialAbilityHornOfGondor
        TriggeredBy                 = Upgrade_Level_2
        ObeyRechageOnTrigger        = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_HornStarter
        SpecialPowerTemplate        = SpecialAbilityHornOfGondor
        UpdateModuleStartsAttack    = Yes
        AntiCategory                = LEADERSHIP INNATE_ARMOR STRUCTURE
        AttributeModifier           = BoromirGondorHornAntiCategory
        AttributeModifierRange      = 100.0
        StartsPaused                = Yes
    End

    Behavior = ModelConditionSpecialAbilityUpdate ModuleTag_HornUpdate
        SpecialPowerTemplate    = SpecialAbilityHornOfGondor
        UnpackTime              = 1700
        PreparationTime         = 1
        PersistentPrepTime      = 1600
        PackTime                = 1666
        AwardXPForTriggering    = 0
    End

    Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityHorn
        SpecialAbility          = SpecialAbilityHornOfGondor
        MaxScanRange            = 60
        Query                   = 10 ALL ENEMIES -STRUCTURE -HERO
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_UnpauseLeadership
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy = Upgrade_Level_4
    End

    Behavior = SpecialPowerModule ModuleTag_BoromirLeadershipUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = No
        StartsPaused = Yes
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_BoromirLeadership
        StartsActive    = No
        BonusName       = BoromirHeermeisterGondors
        TriggeredBy     = Upgrade_Level_4
        RefreshDelay    = 2000
        Range           = 200
        AntiCategory    = BUFF
        ObjectFilter    = GONDOR_LEADERSHIP_UNITS_OBF
    End

    Behavior = ArmorUpgrade ModuleTag_ArmorUpgrade
        TriggeredBy     = Upgrade_Level_4
        ArmorSetFlag    = PLAYER_UPGRADE
    End

    Behavior = SubObjectsUpgrade ModuleTag_Skinwelchsel
        TriggeredBy     = Upgrade_Level_4
        UpgradeTexture  = guboromir.tga 0 guboromir_ha.tga
    End

    Behavior = SubObjectsUpgrade ModuleTag_MakingTheBoromir
        TriggeredBy     = Upgrade_Level_4
        ShowSubObjects  = TEMPMESH
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        TriggeredBy             = Upgrade_Level_6
    End

    Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        StartsPaused            = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        HeroAttributeModifier   = BoromirSchildModifier
        HeroEffectDuration      = 30000
        UnpackTime              = 1
        TriggerSound            = AragornBladeMaster
    End

    Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityTapfererWiderstand
        SpecialAbility          = SpecialAbilityBoromirTapfererWiderstand
        MaxScanRange            = 30
        Query                   = 1 ANY ENEMIES +INFANTRY +CAVALRY +HERO -STRUCTURE
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BoromirOsgiliathEnabler
        SpecialPowerTemplate      = SpecialAbilityBoromirOsgiliath
        TriggeredBy               = Upgrade_Level_10
        ObeyRechageOnTrigger      = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLBoromirOsgiliathSpecialPower
        SpecialPowerTemplate      = SpecialAbilityBoromirOsgiliath
        OCL                       = OCL_GondorFighterHordeModEgg
        CreateLocation            = CREATE_AT_LOCATION
        TriggerFX                 = FX_BoromirOsgiliathSummon
        StartsPaused              = Yes
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenGloriousChargeEnabler
        SpecialPowerTemplate = SpecialAbilityBoromirfurGondor
        TriggeredBy = Upgrade_Level_10
    End

    Behavior = SpecialPowerModule ModuleTag_TheodenGloriousChargeUpdate
        SpecialPowerTemplate      = SpecialAbilityBoromirfurGondor
        UpdateModuleStartsAttack  = Yes
        StartsPaused = Yes
        AttributeModifier = BoromirsRedeModifier
        AttributeModifierRange = 200
        AttributeModifierAffectsSelf = Yes
        AttributeModifierAffects = ANY +INFANTRY +HERO
        AttributeModifierFX = FX_TheodredVerteidigungsstellungFX
    End

    Behavior = SpecialAbilityUpdate ModuleTag_GloriousChargeAnimation
        UnpackTime              = 1000
        UnpackingVariation        = 1
        SpecialPowerTemplate    = SpecialAbilityBoromirfurGondor
        PreparationTime         = 0
        PersistentPrepTime      = 0
        PackTime                = 1330
     End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ErnennungStarter
        SpecialPowerTemplate            = SpecialAbilityBoromirErnennung
        TriggeredBy                     = Upgrade_RingHero
        ObeyRechageOnTrigger            = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_ErnennungDummy
        SpecialPowerTemplate            = SpecialAbilityBoromirErnennung
        StartsPaused                    = Yes
        UpdateModuleStartsAttack        = Yes
    End

    Behavior = ActivateModuleSpecialPower ModuleTag_CloseTheGap
        SpecialPowerTemplate            = SpecialAbilityBoromirErnennung
        StartAbilityRange               = 200
        TriggerSpecialPower             = ModuleTag_SpecialAbilityErnennung      TARGETPOS
    End

    Behavior = SpecialPowerModule ModuleTag_InspektionTrigger
        SpecialPowerTemplate            = SpecialAbilityAbwehrstrategie
        TriggerFX                       = FX_DwarvenRiches
        UpdateModuleStartsAttack        = No
        StartsPaused                    = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_SpecialAbilityErnennung
        SpecialPowerTemplate            = SpecialAbilityActivateeDummy
        AttributeModifier               = BonusAbwehstrategie
        AttributeModifierRange          = 25
        AttributeModifierAffects        = ANY +GondorZitadelle -HERO -INFANTRY -CAVALRY ALLIES
        TriggerFX                       = FX_BeregondAbwehrstrategie
    End




    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_RingubergabeEnabler
        SpecialPowerTemplate       = SpecialAbilityBoromirRingubergabe
        TriggeredBy                = Upgrade_RingHero
    End

    Behavior = SpecialPowerModule ModuleTag_RingubergabeStarter
        SpecialPowerTemplate       = SpecialAbilityBoromirRingubergabe
        StartsPaused               = Yes
        UpdateModuleStartsAttack   = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_RingubergabeUpdate
        SpecialPowerTemplate       = SpecialAbilityBoromirRingubergabe
        WhichSpecialWeapon         = 3
        SkipContinue               = Yes
        FreezeAfterTriggerDuration = 100
        UnpackTime                 = 700
        PreparationTime            = 1

        PackTime                   = 100
        AwardXPForTriggering       = 0
        StartAbilityRange          = 80
        SpecialWeapon              = BoromirBonusWeapon
    End



    Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag
        FireWeaponNugget
            WeaponName = BoromirRetterObjectDestroyWeapon
            FireDelay = 2000
            OneShot = Yes
        End
    End

    Behavior = ObjectCreationUpgrade ModuleTag_RetterObject
        TriggeredBy     = Upgrade_RaiseSchmiedekunst
        Delay           = 0
        ThingToSpawn    = RetterObjectBoromir
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_VerfuhrteEnabler
        SpecialPowerTemplate            = SpecialAbilityGandalfGeprufte
        TriggeredBy                     = Upgrade_RingHero
    End

    Behavior = SpecialPowerModule ModuleTag_VerfuhrteStarter
         SpecialPowerTemplate           = SpecialAbilityGandalfGeprufte
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = Yes
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Verfuhrte
         SpecialPowerTemplate           = SpecialAbilityGandalfGeprufte
         MountedTemplate                = GondorBoromir_OneRing
         SynchronizeTimerOnSpecialPower = SpecialAbilityHornOfGondor SpecialAbilityAragornBladeMaster SpecialAbilityBoromirErnennung SpecialAbilityBoromirOsgiliath
         UnpackTime                     = OBJECT_TOGGLE_TIME
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End

    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy                     = Upgrade_RingHero
        GetUpgradeCommandButtonName     = Command_SpecialAbilityGlorfindelRingSwitch
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName  = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName  = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName  = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate ElvenLorienWarriorHordeCaptureBuildingAI
        CommandButtonName  = Command_CaptureBuilding
        SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
    End

    Behavior = AISpecialPowerUpdate BoromirHornOfGondorAI
        CommandButtonName = Command_SpecialAbilityBoromirHorn
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate AragornBladeMasterAI
        CommandButtonName = Command_SpecialAbilityBoromirTapfererWiderstand
        SpecialPowerAIType = AI_SPECIAL_POWER_CHARGE
        SpecialPowerRadius = 50
        SpecialPowerRange = 50
    End

    Behavior = AISpecialPowerUpdate SpecialPowerAragornOathBreakers
        CommandButtonName = Command_SpecialAbilityBoromirVerteidigungOsgiliats
        SpecialPowerAIType = AI_SPECIAL_POWER_TARGETAOE_SUMMON
        SpecialPowerRadius = 30.0
    End

    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes
    Shadow = SHADOW_DECAL
    ShadowSizeX = 20
    ShadowSizeY = 20
    ShadowTexture = ShadowI
End


Object GondorBoromir_OneRing

    SelectPortrait = HPBoromirRing
    ButtonImage    = HIBoromirRing

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_Boromir

    Draw = W3DScriptedModelDraw ModuleTag_DRAW

        DefaultModelConditionState
            Model           = guboromirring
        End

        ModelConditionState = WEAPONSET_HERO_MODE
            ParticleSysBone = BAT_RIBS GilGaladSternenschildGlow FollowBone:Yes
            ParticleSysBone = BAT_RIBS GilGaladSternenschildGlowWhite FollowBone:Yes
        End
		
		ModelConditionState          = USER_6
            Model                    = guboromir_fshb
            ParticleSysBone = BAT_RIBS BeregondBladeMaster FollowBone:Yes
            ParticleSysBone 		 = B_SWORDBONE EarnurGlowFX FollowBone:Yes
            ParticleSysBone 		 = B_SWORDBONE EarnurSparksFX FollowBone:Yes
        End

        IdleAnimationState
            StateName = Idle
            Animation           = IDLB
                AnimationName     = GUBoromir_SKL.GUBoromir_IDLB
                AnimationMode     = ONCE
                AnimationPriority   = 20
            End
            Animation           = IDLD
                AnimationName     = GUBoromir_SKL.GUBoromir_IDLD
                AnimationMode     = ONCE
                AnimationPriority   = 1
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
            EndScript
        End

        TransitionState       = Trans_None_To_Sword
            Animation           = GUBoromir_STHA
                AnimationName     = GUBoromir_SKL.GUBoromir_STHA
                AnimationMode     = ONCE
            End
        End
        TransitionState       = Trans_Sword_To_None
            Animation           = GUBoromir_STHB
                AnimationName     = GUBoromir_SKL.GUBoromir_STHB
                AnimationMode     = ONCE
            End
        End

        AnimationState        = STUNNED_FLAILING
            Flags               = RANDOMSTART
            Animation           = GUBoromir_FLYA
                AnimationName     = GUBoromir_SKL.GUBoromir_FLYA
                AnimationMode     = LOOP
            End
        End

        AnimationState = USER_1 DYING SPLATTED
            Animation
                AnimationName = GUBoromir_SKL.GUBoromir_SPCE
                AnimationMode = ONCE
            End
        End

        AnimationState        = DYING SPLATTED
            Animation           = GUBoromir_LNDA
                AnimationName     = GUBoromir_SKL.GUBoromir_LNDA
                AnimationMode     = ONCE
            End
        End

        AnimationState = USER_1 DYING AFLAME
            Animation
                AnimationName = GUBoromir_SKL.GUBoromir_SPCE
                AnimationMode = ONCE
            End
        End

        AnimationState        = DYING AFLAME
            Animation = DieAflame
                AnimationName       = GUBoromir_SKL.GUBoromir_MFDA
                AnimationMode       = LOOP
            End
        End
        AnimationState        = DYING
            Animation           = GUBoromir_DTHA
                AnimationName     = GUBoromir_SKL.GUBoromir_DTHA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = DYING DEATH_2
            Animation           = ByeBye
                AnimationName     = GUBoromir_SKL.GUBoromir_IDLA
                AnimationMode     = LOOP
            End
        End

        AnimationState = USER_1 DYING
            Animation
                AnimationName = GUBoromir_SKL.GUBoromir_SPCE
                AnimationMode = ONCE
            End
        End


        AnimationState                        = PARALYZED
            Animation
                AnimationName                = GUBoromir_IDLB
                AnimationMode                = LOOP
            End
        End


        AnimationState        = STUNNED_STANDING_UP
            Animation           = GUBoromir_GTPA
                AnimationName     = GUBoromir_SKL.GUBoromir_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.3 1.3
            End
        End
        AnimationState        = STUNNED
            Animation           = GUBoromir_LNDA
                AnimationName     = GUBoromir_SKL.GUBoromir_LNDA
                AnimationMode     = ONCE
            End
        End



        AnimationState        = PACKING_TYPE_2
            StateName          =    CaptainPower
            Animation           = GUBoromir_CHRA
                AnimationName     = GUBoromir_SKL.GUBoromir_CHRA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.2 1.2
            End
        End


        AnimationState        = UNPACKING SPECIAL_POWER_1
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_HRNA
                AnimationMode     = ONCE
            End
        End
        AnimationState        = PREPARING SPECIAL_POWER_1
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_HRNB
                AnimationMode     = ONCE
            End
            EnteringStateFX = FX_BoromirHorn
        End
        AnimationState        = PACKING SPECIAL_POWER_1
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_HRNC
                AnimationMode     = ONCE
            End
        End
        AnimationState        = SPECIAL_POWER_1
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_HRNB
                AnimationMode     = LOOP
            End
        End


        AnimationState        = UNPACKING SPECIAL_WEAPON_ONE
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCA
                AnimationMode     = ONCE
            End
        End
        AnimationState        = PREPARING SPECIAL_WEAPON_ONE
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCB
                AnimationMode     = ONCE
            End
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCC
                AnimationMode     = ONCE
            End
        EnteringStateFX = FX_BoromirHorn
        End
        AnimationState        = PACKING SPECIAL_WEAPON_ONE
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCE
                AnimationMode     = ONCE
            End
        End
        AnimationState        = SPECIAL_WEAPON_ONE
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCB
                AnimationMode     = ONCE
            End
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCC
                AnimationMode     = ONCE
            End
        End


        AnimationState                = WEAPONSET_RAMPAGE
            StateName         = LastStand

            Animation           = ATTACK_A
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCB
                AnimationMode     = ONCE
                AnimationPriority    = 2

                AnimationSpeedFactorRange = 1.0 1.05
            End

            Animation           = ATTACK_B
                AnimationName    = GUBoromir_SKL.GUBoromir_SPCC
                AnimationMode     = ONCE
                AnimationPriority    = 3

                AnimationSpeedFactorRange = 2.35 2.45
            End

            Flags                    = RESTART_ANIM_WHEN_COMPLETE
            FXEvent    = Frame:20 Name: FX_BladeMasterHitOrient
        End



        AnimationState        = MOVING WANDER WEAPONSTATE_CLOSE_RANGE
            StateName           = WithSword

            Animation           = GUBoromir_WLKA
                AnimationName     = GUBoromir_SKL.GUBoromir_WLKA
                AnimationMode     = LOOP
            End
        End
        AnimationState        = MOVING WANDER

            Animation           = GUBoromir_WLKA
                AnimationName     = GUBoromir_SKL.GUBoromir_WLKA
                AnimationMode     = LOOP
            End
        End


        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = GUBoromir_SKL.GUBoromir_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End


        AnimationState        = MOVING

            Flags               = RANDOMSTART
            Animation           = GUBoromir_RUNB
                AnimationName     = GUBoromir_SKL.GUBoromir_RUNA
                AnimationMode     = LOOP
            End
        End




        AnimationState                = FIRING_OR_PREATTACK_A WEAPONSET_HERO_MODE WEAPONSTATE_CLOSE_RANGE
            StateName                = WithSword
            Animation           = ATKA
                AnimationName     = GUBoromir_SKL.GUBoromir_ATKA
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKB
                AnimationName    = GUBoromir_SKL.GUBoromir_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            FXEvent    = Frame:25 Name: FX_BladeMasterHitOrient
        End

        AnimationState        = USER_1 DAMAGED FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE
            StateName           = LastStandAttacking
            Animation           = SPCB
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCB
                AnimationMode     = ONCE
            End
            Animation           = SPCC
                AnimationName    = GUBoromir_SKL.GUBoromir_SPCC
                AnimationMode     = ONCE
            End
            FXEvent    = Frame:25 Name: FX_BladeMasterHitOrient
        End

        AnimationState        = FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE
            StateName           = WithSword
            Animation           = ATKA
                AnimationName     = GUBoromir_SKL.GUBoromir_ATKA
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKB
                AnimationName    = GUBoromir_SKL.GUBoromir_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
        End

        AnimationState                = FIRING_OR_PREATTACK_A WEAPONSET_HERO_MODE
            Animation           = GUBoromir_ATD1
                AnimationName     = GUBoromir_SKL.GUBoromir_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            FXEvent    = Frame:25 Name: FX_BladeMasterHitOrient
        End

        AnimationState        = USER_1 DAMAGED FIRING_OR_PREATTACK_A
            StateName           = LastStandAttacking
            Animation           = SPCB
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = SPCC
                AnimationName    = GUBoromir_SKL.GUBoromir_SPCC
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End

            FXEvent    = Frame:25 Name: FX_BladeMasterHitOrient
        End

        AnimationState        = FIRING_OR_PREATTACK_A
            Animation           = GUBoromir_ATD1
                AnimationName     = GUBoromir_SKL.GUBoromir_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
        End


        AnimationState        = USER_1 DAMAGED ATTACKING
            StateName           = LastStand
            Animation           = ALERT_1
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCA
                AnimationMode     = LOOP
            End
        End

        AnimationState        = ATTACKING
            Animation           = ALERT_1
                AnimationName     = GUBoromir_SKL.GUBoromir_IDLA
                AnimationMode     = LOOP
            End

        End


        TransitionState                    =    TRANS_Idle_to_Selected
            Animation                    =    ATND
                AnimationName            =    GUBoromir_SKL.GUBoromir_ATND
                AnimationMode            =    ONCE
            End
        End

        TransitionState                    =    TRANS_Selected_To_Idle
            Animation                    =    ATNE
                AnimationName            =    GUBoromir_SKL.GUBoromir_ATNE
                AnimationMode            =    ONCE
            End
        End


        AnimationState                = USER_1 DAMAGED LEVELED
            StateName = LastStand
            Animation                = LevelUp
                AnimationName        = GUBoromir_SKL.GUBoromir_SPCA
                AnimationMode        = ONCE
            End
        End

        AnimationState                = LEVELED
            Animation                = LevelUp
                AnimationName        = GUBoromir_SKL.GUBoromir_CHRA
                AnimationMode        = ONCE
            End
        End

        AnimationState            = RAISING_FLAG
            Animation           = CHRA
                AnimationName   = GUBoromir_SKL.GUBoromir_CHRA
                AnimationMode   = Once
            End
            Animation           = CHRB
                AnimationName   = GUBoromir_SKL.GUBoromir_CHRB
                AnimationMode   = Once
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = USER_1 DAMAGED SELECTED
            StateName = LastStand
            Animation                = ATNB
                AnimationName        = GUBoromir_SKL.GUBoromir_SPCA
                AnimationMode        = LOOP
            End
        End

        AnimationState                =    SELECTED
            StateName                =    Selected
            SimilarRestart            =   Yes
            Animation                =    ATNB
                AnimationName        =    GUBoromir_SKL.GUBoromir_ATNB
                AnimationMode        =    LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
            EndScript
        End


        AnimationState            = EMOTION_TAUNTING
            Animation           = CHRA
                AnimationName   = GUBoromir_SKL.GUBoromir_CHRA
                AnimationMode   = Once
            End
        End

        AnimationState            = EMOTION_CELEBRATING
            Animation           = CHRB
                AnimationName   = GUBoromir_SKL.GUBoromir_CHRB
                AnimationMode   = Once
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = EMOTION_ALERT EMOTION_MORALE_HIGH
            Animation                    = Taunting
                AnimationName            =  GUBoromir_SKL.GUBoromir_TNTB
                AnimationMode            = ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState        = EMOTION_ALERT
            Animation           = ALERT_1
                AnimationName     = GUBoromir_SKL.GUBoromir_IDLA
                AnimationMode     = LOOP
            End

        End



        AnimationState = HIT_REACTION HIT_LEVEL_1
            Animation = Hit_Level_1_a
                AnimationName = GUBoromir_SKL.GUBoromir_HITA
                AnimationMode = ONCE
            End
        End

        AnimationState                = USER_1 DAMAGED
            StateName = LastStand
            Animation                = LastStand
                AnimationName        = GUBoromir_SKL.GUBoromir_SPCA
                AnimationMode        = LOOP
            End
        End
    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    Draw = W3DScriptedModelDraw ModuleTag_Schmiedekunst
        DefaultModelConditionState
            Model = None
        End
        ModelConditionState = USER_8
            Model           = exldrspimla
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side 				= Men
    EditorSorting 	= UNIT
    ThreatLevel 			= BOROMIR_THREAT_LEVEL
    ThingClass 		= CHARACTER_UNIT
    BuildCost         	= SILMARIL_HERO_COST
    BuildTime         	= SILMARIL_HERO_BUILDTIME
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG
    DisplayMeleeDamage 	= SILMARIL_HERO_DAMAGE
    HeroSortOrder 		= 50
    TransportSlotCount 	= TRANSPORTSLOTCOUNT_HERO

    WeaponSet
        Conditions 		= None
        Weapon     		= PRIMARY    BoromirSwordRing
    End

    WeaponSet
        Conditions 		= RAMPAGE
        Weapon     		= PRIMARY    BoromirRampageSwordRing
    End

    WeaponSet
        Conditions 		= WEAPONSET_HERO_MODE
        Weapon     		= PRIMARY    BoromirSwordRingHeroMode
    End

    ArmorSet
        Conditions      	= None
        Armor           = SilmarilHeroHeavyArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange 		= 250
    ShroudClearingRange 	= 300
    MaxVisionBonusPercent 	= 300%
    VisionBonusTestRadius 	= 200
    VisionBonusPercentPerFoot 	= 1.0%

    BountyValue 		= GONDOR_BOROMIR_BOUNTY_VALUE
    DisplayName 		= OBJECT:GondorBoromir
    RecruitText 		= CONTROLBAR:GondorBoromirRecruit
    ReviveText    		= CONTROLBAR:GondorBoromirRevive
    Hotkey        		= CONTROLBAR:GondorBoromirHotkey
    CrushableLevel 		= 4

    CommandSet 			= BoromirModCommandSet_OneRing
    CommandPoints 		= 0



    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_BoromirBody

    AutoResolveArmor
        Armor = AutoResolve_BoromirArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_BoromirWeapon
    End

    AutoResolveLeadership = AutoResolve_BoromirBonus




    VoiceAttack                  = BoromirVoiceAttack
    VoiceAttackCharge            = BoromirVoiceAttackCharge
    VoiceAttackMachine           = BoromirVoiceAttack
    VoiceAttackStructure         = BoromirVoiceAttackBuilding
	VoiceCreated				 = SH_NineForMen
	VoiceFullyCreated			 = SH_NineForMen
    VoiceFear                    = BoromirVoiceHelpMe
    VoiceMove                    = BoromirVoiceMove
    VoiceMoveToCamp              = BoromirVoiceMoveCamp
    VoiceMoveWhileAttacking      = BoromirVoiceDisengage
    VoicePriority                = 95
    VoiceRetreatToCastle         = BoromirVoiceRetreat
    VoiceSelect                  = BoromirVoiceSelectMS
    VoiceSelectBattle            = BoromirVoiceSelectBattle
    VoiceGuard                   = BoromirVoiceMove

    SoundImpact                  = ImpactHorse

    UnitSpecificSounds
        VoiceGarrison                       = BoromirVoiceGarrison
        VoiceEnterUnitElvenTransportShip    = BoromirVoiceMove
        VoiceInitiateCaptureBuilding        = BoromirVoiceMove
    End

    CrowdResponseKey = GoodMen

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
    EvaEventDieOwner = BoromirModDie

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:SwordIntoScabbard1      Animation:GUBoromir_SKL.GUBoromir_HRNA     Frames:7
        AnimationSound = Sound:BoromirHorn             Animation:GUBoromir_SKL.GUBoromir_HRNB     Frames:0
        AnimationSound = Sound:SwordShingClean1        Animation:GUBoromir_SKL.GUBoromir_HRNC     Frames:5
        AnimationSound = Sound:FootstepDirtA           Animation:GUBoromir_SKL.GUBoromir_RUNA     Frames:10 22
        AnimationSound = Sound:FootstepDirtA           Animation:GUBoromir_SKL.GUBoromir_RUNB     Frames:10 22
        AnimationSound = Sound:FootstepDirtA           Animation:GUBoromir_SKL.GUBoromir_ATRA     Frames:11 23 35 47
        AnimationSound = Sound:FootstepDirtA           Animation:GUBoromir_SKL.GUBoromir_MFDA    Frames:8 20 31 41

        AnimationSound = Sound:BodyFallGenericNoArmor  Animation:GUBoromir_SKL.GUBoromir_DTHA     Frames:116
        AnimationSound = Sound:BodyFallSoldier         Animation:GUBoromir_SKL.GUBoromir_LNDA     Frames:4
        AnimationSound = Sound:BodyFallGenericNoArmor  Animation:GUBoromir_SKL.GUBoromir_SPCE     Frames:82
    End

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Man Man_Male Unit Infantry Hero
    End



    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE HERO ARMY_SUMMARY HEAVY_MELEE_HITTER
    PathfindDiameter = 40.0
    CamouflageDetectionMultiplier = CAMOUFLAGE_DETECTION_DISTANCE_LONG


    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                 = DYING
        DeathAnimationTime        = 4966
        RespawnAnim               = LEVELED
        RespawnAnimationTime      = 2000
        AutoRespawnAtObjectFilter = NONE +CASTLE_KEEP
        ButtonImage               = HIBorimir
        RespawnAsTemplate         = GondorBoromir

        RespawnRules =            AutoSpawn:No    Cost:BOROMIRDAG_COST        Time:MEDIUM_HERO_RESPAWNTIME        Health:100%
    End

    Behavior = LevelUpUpgrade ModuleTag_RespawnRing
        TriggeredBy     = Upgrade_AllFactionUpgrade
        LevelsToGain    = 14
        LevelCap        = 15
    End

    Behavior = AttributeModifierUpgrade ModuleTag_BoromirMoreArmor
		TriggeredBy       = Upgrade_AllFactionUpgrade
		AttributeModifier = BoromirRingModifier
    End






    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius               	= EMOTION_CHEER_RADIUS
        MaxHealth                 	= BOROMIRDAG_HEALTH
        PermanentlyKilledByFilter 	= NONE
        DodgePercent              	= HERO_DODGE_PERCENT
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_LastStand
        SpecialPowerTemplate 		= SpecialAbilityLastStand
        TriggeredBy 			= Upgrade_Level_1
    End

    Behavior = ModelConditionUpgrade ModuleTag_LastStandAnims
        AddConditionFlags 		= USER_1
        TriggeredBy 			= Upgrade_Level_1
    End

    Behavior = SpecialPowerModule ModuleTag_LastStandUpdate
        SpecialPowerTemplate 		= SpecialAbilityLastStand
        UpdateModuleStartsAttack     	= No
        StartsPaused     		= Yes
    End

    Behavior = SubObjectsUpgrade ModuleTag_WithoutGNTL
        TriggeredBy       		= Upgrade_AllFactionUpgrade
        HideSubObjects    		= TEMPMESH ARRW1 ARRW2 ARRW3
    End

    Behavior = AutoHealBehavior ModuleTag_BoromirHealing
        StartsActive = Yes
        HealingAmount = 45
        HealingDelay = 1000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    #include "..\..\..\includes\CaptureBuilding.inc"

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle    = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate           = 500
        AILuaEventsList               = BoromirFunctionsEdain
        RampageTime                   = 20000
    End

    Behavior = CommandButtonHuntUpdate ModuleTag_CommandButtonHuntUpdate
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance               = 300
        TauntAndPointUpdateDelay            = 10000
        AddEmotion            =    Doom_Base
        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
        AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base
        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_GOOD_HERO_SPEED
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_ENRAGED
        Speed     = NORMAL_GOOD_HERO_SPEED
    End

    Behavior = AutoHealBehavior ModuleTag_ElvenGiftHealing
        StartsActive             = No
        TriggeredBy              = Upgrade_ElvenGift
        HealingAmount            = ELVEN_GIFT_REGEN_AMOUNT
        HealingDelay             = ELVEN_GIFT_REGEN_DELAY
        StartHealingDelay        = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat    = Yes
    End

    Behavior = AttributeModifierUpgrade ModuleTag_ElvenGiftBonus
        TriggeredBy       	= Upgrade_AllFactionUpgrade
        AttributeModifier 	= BoromirRingHealth
    End

    Behavior = DualWeaponBehavior ModuleTag_13
        SwitchWeaponOnCloseRangeDistance = 161
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult 		= 1.0
        ShockStandingTime   	= 4000
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -FADED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL BoromirVoiceDie
    End

    Behavior = SquishCollide ModuleTag_06
    End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 7
        HitReactionLifeTimer2 = 15
        HitReactionLifeTimer3 = 10

        HitReactionThreshold1 = 0.0
        HitReactionThreshold2 = 25.0
        HitReactionThreshold3 = 50.0
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SilmarilHeroLeadershipStart
        SpecialPowerTemplate    	= SpecialAbilityFakeLeadership3
    End

    Behavior = SpecialPowerModule ModuleTag_SilmarilHeroLeadershipUpdate
        SpecialPowerTemplate        	= SpecialAbilityFakeLeadership3
        UpdateModuleStartsAttack    	= No
        StartsPaused                	= No
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_SilmarilHeroLeadership
        StartsActive     		= Yes
        BonusName        		= SilmarilHeroGlobalLeadership
        RefreshDelay     		= 2000
        Range            		= 1250
        ObjectFilter     		= ALL -HERO -MACHINE -SHIP -DOZER -STRUCTURE ALLIES
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_UnpauseLeadership
        SpecialPowerTemplate 	= SpecialAbilityFakeLeadership
        TriggeredBy 		= Upgrade_Level_1
    End

    Behavior = SpecialPowerModule ModuleTag_BoromirLeadershipUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = No
        StartsPaused 		  = Yes
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_BoromirLeadership
        StartsActive    	= No
        BonusName       	= BoromirRingLeadership
        TriggeredBy     	= Upgrade_Level_1
        RefreshDelay    	= 2000
        Range           	= 200
        AntiCategory    	= BUFF
        ObjectFilter    	= GENERIC_BUFF_RECIPIENT_OBJECT_FILTER
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EnableHorn
        SpecialPowerTemplate        = SpecialAbilityHornOfGondor
        TriggeredBy                 = Upgrade_Level_2
    End

    Behavior = SpecialPowerModule ModuleTag_HornStarter
        SpecialPowerTemplate        = SpecialAbilityHornOfGondor
        UpdateModuleStartsAttack    = Yes
        AntiCategory                = LEADERSHIP INNATE_ARMOR STRUCTURE
        AttributeModifier           = BoromirGondorHornAntiCategory
        AttributeModifierRange      = 250.0
        StartsPaused                = Yes
    End

    Behavior = ModelConditionSpecialAbilityUpdate ModuleTag_HornUpdate
        SpecialPowerTemplate    = SpecialAbilityHornOfGondor
        UnpackTime              = 1700
        PreparationTime         = 1
        PersistentPrepTime      = 1600
        PackTime                = 1666
        AwardXPForTriggering    = 0
    End

    Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityHorn
        SpecialAbility          = SpecialAbilityHornOfGondor
        MaxScanRange            = 60
        Query                   = 10 ALL ENEMIES -STRUCTURE
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
        SpecialPowerTemplate = SpecialAbilityAragornBladeMaster
        TriggeredBy = Upgrade_Level_6
    End

    Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        StartsPaused            = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        HeroAttributeModifier   = BoromirTapfererWiderstand
        HeroEffectDuration      = 30000
        UnpackTime              = 1
        TriggerSound            = AragornBladeMaster
    End

    Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityAragornBladeMaster
        SpecialAbility          = SpecialAbilityAragornBladeMaster
        MaxScanRange            = 30
        Query                   = 1 ANY ENEMIES +INFANTRY +CAVALRY +HERO -STRUCTURE
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BoromirOsgiliathEnablerRing
        SpecialPowerTemplate      = SpecialAbilityBoromirOsgiliathRing
        TriggeredBy               = Upgrade_Level_10
    End

    Behavior = OCLSpecialPower ModuleTag_OCLBoromirOsgiliathSpecialPowerRing
        SpecialPowerTemplate      = SpecialAbilityBoromirOsgiliathRing
        OCL                       = OCL_BoromirOsgiliathEgg
        CreateLocation            = CREATE_AT_LOCATION
        TriggerFX                 = FX_BoromirOsgiliathSummon
        StartsPaused              = Yes
    End

    Behavior = FXListDie ModuleTag_AnnounceWeLostTheRing
        DeathFX 		= GandalfAnnounceFortressDeathLostRingFX
    End

    Behavior = CreateObjectDie ModuleTag_DropTheRing
        CreationList    	= OCL_TheOneRing
    End

    Behavior = RemoveUpgradeUpgrade ModuleTag_RemoveRing
        TriggeredBy                   = Upgrade_AllFactionUpgrade
        UpgradeToRemove               = Upgrade_FortressRingHero Upgrade_RingHero
        RemoveFromAllPlayerObjects    = Yes
        SuppressEvaEventForRemoval    = Yes
    End


    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
	CommandButtonName = Command_SetStanceBattle
	SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
	CommandButtonName = Command_SetStanceAggressive
	SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
	CommandButtonName = Command_SetStanceHoldGround
	SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate BoromirHornOfGondorSilmarilAI
	CommandButtonName = Command_SpecialAbilityBoromirHorn_Silmaril
	SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate BoromirSchildRingAI
	CommandButtonName = Command_SpecialAbilityBoromirSchildRing
	SpecialPowerAIType = AI_SPECIAL_POWER_CHARGE
    End

    Behavior = AISpecialPowerUpdate BoromirVerteidigungderweienStadtAI
	CommandButtonName = Command_SpecialAbilityBoromirVerteidigungderweienStadt
	SpecialPowerAIType = AI_SPECIAL_POWER_TARGETAOE_SUMMON
	SpecialPowerRadius = 100.0
    End

  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 20
  ShadowSizeY = 20
  ShadowTexture = ShadowI
End



Object GondorBoromir_ElrondsRat

    SelectPortrait = HPBoromirArmored
    ButtonImage    = HIBorimir

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_Boromir

    Draw = W3DScriptedModelDraw ModuleTag_DRAW

        DefaultModelConditionState
            Model           = guboromir_fshb
        End

        ModelConditionState = WEAPONSET_HERO_MODE
            Model           = guboromir_fshp
        End
		
		ModelConditionState          = USER_6
            Model                    = guboromir_fshb
            ParticleSysBone = BAT_RIBS BeregondBladeMaster FollowBone:Yes
            ParticleSysBone 		 = B_SWORDBONE EarnurGlowFX FollowBone:Yes
            ParticleSysBone 		 = B_SWORDBONE EarnurSparksFX FollowBone:Yes
        End


        IdleAnimationState
            StateName = Idle
            Animation           = IDLB
                AnimationName     = GUBoromir_SKL.GUBoromir_IDLB
                AnimationMode     = ONCE
                AnimationPriority   = 20
            End
            Animation           = IDLD
                AnimationName     = GUBoromir_SKL.GUBoromir_IDLD
                AnimationMode     = ONCE
                AnimationPriority   = 1
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
            EndScript
        End

        TransitionState       = Trans_None_To_Sword
            Animation           = GUBoromir_STHA
                AnimationName     = GUBoromir_SKL.GUBoromir_STHA
                AnimationMode     = ONCE
            End
        End
        TransitionState       = Trans_Sword_To_None
            Animation           = GUBoromir_STHB
                AnimationName     = GUBoromir_SKL.GUBoromir_STHB
                AnimationMode     = ONCE
            End
        End

        AnimationState        = STUNNED_FLAILING
            Flags               = RANDOMSTART
            Animation           = GUBoromir_FLYA
                AnimationName     = GUBoromir_SKL.GUBoromir_FLYA
                AnimationMode     = LOOP
            End
        End





        AnimationState = USER_1 DYING SPLATTED
            Animation
                AnimationName = GUBoromir_SKL.GUBoromir_SPCE
                AnimationMode = ONCE
            End
        End

        AnimationState        = DYING SPLATTED
            Animation           = GUBoromir_LNDA
                AnimationName     = GUBoromir_SKL.GUBoromir_LNDA
                AnimationMode     = ONCE
            End
        End

        AnimationState = USER_1 DYING AFLAME
            Animation
                AnimationName = GUBoromir_SKL.GUBoromir_SPCE
                AnimationMode = ONCE
            End
        End

        AnimationState        = DYING AFLAME
            Animation = DieAflame
                AnimationName       = GUBoromir_SKL.GUBoromir_MFDA
                AnimationMode       = LOOP
            End
        End
        AnimationState        = DYING DEATH_1
            Animation           = GUBoromir_DTHA
                AnimationName     = GUBoromir_SKL.GUBoromir_DTHA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = DYING DEATH_2
            Animation           = ByeBye
                AnimationName     = GUBoromir_SKL.GUBoromir_IDLA
                AnimationMode     = LOOP
            End
        End

        AnimationState = USER_1 DYING DEATH_1
            Animation
                AnimationName = GUBoromir_SKL.GUBoromir_SPCE
                AnimationMode = ONCE
            End
        End


        AnimationState                        = PARALYZED
            Animation
                AnimationName                = GUBoromir_IDLB
                AnimationMode                = LOOP
            End
        End


        AnimationState        = STUNNED_STANDING_UP
            Animation           = GUBoromir_GTPA
                AnimationName     = GUBoromir_SKL.GUBoromir_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.3 1.3
            End
        End
        AnimationState        = STUNNED
            Animation           = GUBoromir_LNDA
                AnimationName     = GUBoromir_SKL.GUBoromir_LNDA
                AnimationMode     = ONCE
            End
        End



        AnimationState        = PACKING_TYPE_2
            StateName          =    CaptainPower
            Animation           = GUBoromir_CHRA
                AnimationName     = GUBoromir_SKL.GUBoromir_CHRA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.2 1.2
            End
        End


        AnimationState        = UNPACKING SPECIAL_POWER_1
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_HRNA
                AnimationMode     = ONCE
            End
        End
        AnimationState        = PREPARING SPECIAL_POWER_1
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_HRNB
                AnimationMode     = ONCE
            End
            EnteringStateFX = FX_BoromirHorn
        End
        AnimationState        = PACKING SPECIAL_POWER_1
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_HRNC
                AnimationMode     = ONCE
            End
        End
        AnimationState        = SPECIAL_POWER_1
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_HRNB
                AnimationMode     = LOOP
            End
        End


        AnimationState        = UNPACKING SPECIAL_WEAPON_ONE
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCA
                AnimationMode     = ONCE
            End
        End
        AnimationState        = PREPARING SPECIAL_WEAPON_ONE
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCB
                AnimationMode     = ONCE
            End
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCC
                AnimationMode     = ONCE
            End
        EnteringStateFX = FX_BoromirHorn
        End
        AnimationState        = PACKING SPECIAL_WEAPON_ONE
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCE
                AnimationMode     = ONCE
            End
        End
        AnimationState        = SPECIAL_WEAPON_ONE
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCB
                AnimationMode     = ONCE
            End
            Animation
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCC
                AnimationMode     = ONCE
            End
        End


        AnimationState                = WEAPONSET_RAMPAGE
            StateName         = LastStand

            Animation           = ATTACK_A
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCB
                AnimationMode     = ONCE
                AnimationPriority    = 2

                AnimationSpeedFactorRange = 1.0 1.05
            End

            Animation           = ATTACK_B
                AnimationName    = GUBoromir_SKL.GUBoromir_SPCC
                AnimationMode     = ONCE
                AnimationPriority    = 3

                AnimationSpeedFactorRange = 2.35 2.45
            End

            Flags                    = RESTART_ANIM_WHEN_COMPLETE
            FXEvent    = Frame:20 Name: FX_BladeMasterHitOrient
        End



        AnimationState        = MOVING WANDER WEAPONSTATE_CLOSE_RANGE
            StateName           = WithSword

            Animation           = GUBoromir_WLKA
                AnimationName     = GUBoromir_SKL.GUBoromir_WLKA
                AnimationMode     = LOOP
            End
        End

        AnimationState        = MOVING WANDER

            Animation           = GUBoromir_WLKA
                AnimationName     = GUBoromir_SKL.GUBoromir_WLKA
                AnimationMode     = LOOP
            End
        End


        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = GUBoromir_SKL.GUBoromir_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End


        AnimationState        = MOVING

            Flags               = RANDOMSTART
            Animation           = GUBoromir_RUNB
                AnimationName     = GUBoromir_SKL.GUBoromir_RUNA
                AnimationMode     = LOOP
            End
        End




        AnimationState                = FIRING_OR_PREATTACK_A WEAPONSET_HERO_MODE WEAPONSTATE_CLOSE_RANGE
            StateName                = WithSword
            Animation           = ATKA
                AnimationName     = GUBoromir_SKL.GUBoromir_ATKA
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKB
                AnimationName    = GUBoromir_SKL.GUBoromir_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            FXEvent    = Frame:25 Name: FX_BladeMasterHitOrient
        End

        AnimationState        = USER_1 DAMAGED FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE
            StateName           = LastStandAttacking
            Animation           = SPCB
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCB
                AnimationMode     = ONCE
            End
            Animation           = SPCC
                AnimationName    = GUBoromir_SKL.GUBoromir_SPCC
                AnimationMode     = ONCE
            End
            FXEvent    = Frame:25 Name: FX_BladeMasterHitOrient
        End

        AnimationState        = FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE
            StateName           = WithSword
            Animation           = ATKA
                AnimationName     = GUBoromir_SKL.GUBoromir_ATKA
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = ATKB
                AnimationName    = GUBoromir_SKL.GUBoromir_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
        End

        AnimationState                = FIRING_OR_PREATTACK_A WEAPONSET_HERO_MODE
            Animation           = GUBoromir_ATD1
                AnimationName     = GUBoromir_SKL.GUBoromir_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            FXEvent    = Frame:25 Name: FX_BladeMasterHitOrient
        End

        AnimationState        = USER_1 DAMAGED FIRING_OR_PREATTACK_A
            StateName           = LastStandAttacking
            Animation           = SPCB
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
            Animation           = SPCC
                AnimationName    = GUBoromir_SKL.GUBoromir_SPCC
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End

            FXEvent    = Frame:25 Name: FX_BladeMasterHitOrient
        End

        AnimationState        = FIRING_OR_PREATTACK_A
            Animation           = GUBoromir_ATD1
                AnimationName     = GUBoromir_SKL.GUBoromir_ATKB
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
            End
        End




        AnimationState        = USER_1 DAMAGED ATTACKING
            StateName           = LastStand
            Animation           = ALERT_1
                AnimationName     = GUBoromir_SKL.GUBoromir_SPCA
                AnimationMode     = LOOP
            End
        End

        AnimationState        = ATTACKING
            Animation           = ALERT_1
                AnimationName     = GUBoromir_SKL.GUBoromir_IDLA
                AnimationMode     = LOOP
            End

        End


        TransitionState                    =    TRANS_Idle_to_Selected
            Animation                    =    ATND
                AnimationName            =    GUBoromir_SKL.GUBoromir_ATND
                AnimationMode            =    ONCE
            End
        End

        TransitionState                    =    TRANS_Selected_To_Idle
            Animation                    =    ATNE
                AnimationName            =    GUBoromir_SKL.GUBoromir_ATNE
                AnimationMode            =    ONCE
            End
        End


        AnimationState                = USER_1 DAMAGED LEVELED
            StateName = LastStand
            Animation                = LevelUp
                AnimationName        = GUBoromir_SKL.GUBoromir_SPCA
                AnimationMode        = ONCE
            End
        End

        AnimationState                = LEVELED
            Animation                = LevelUp
                AnimationName        = GUBoromir_SKL.GUBoromir_CHRA
                AnimationMode        = ONCE
            End
        End

        AnimationState            = RAISING_FLAG
            Animation           = CHRA
                AnimationName   = GUBoromir_SKL.GUBoromir_CHRA
                AnimationMode   = Once
            End
            Animation           = CHRB
                AnimationName   = GUBoromir_SKL.GUBoromir_CHRB
                AnimationMode   = Once
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = USER_1 DAMAGED SELECTED
            StateName = LastStand
            Animation                = ATNB
                AnimationName        = GUBoromir_SKL.GUBoromir_SPCA
                AnimationMode        = LOOP
            End
        End

        AnimationState                =    SELECTED
            StateName                =    Selected
            SimilarRestart            =   Yes
            Animation                =    ATNB
                AnimationName        =    GUBoromir_SKL.GUBoromir_ATNB
                AnimationMode        =    LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
            EndScript
        End


        AnimationState            = EMOTION_TAUNTING
            Animation           = CHRA
                AnimationName   = GUBoromir_SKL.GUBoromir_CHRA
                AnimationMode   = Once
            End
        End

        AnimationState            = EMOTION_CELEBRATING
            Animation           = CHRB
                AnimationName   = GUBoromir_SKL.GUBoromir_CHRB
                AnimationMode   = Once
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = EMOTION_ALERT EMOTION_MORALE_HIGH
            Animation                    = Taunting
                AnimationName            =  GUBoromir_SKL.GUBoromir_TNTB
                AnimationMode            = ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState        = EMOTION_ALERT
            Animation           = ALERT_1
                AnimationName     = GUBoromir_SKL.GUBoromir_IDLA
                AnimationMode     = LOOP
            End

        End



        AnimationState = HIT_REACTION HIT_LEVEL_1
            Animation = Hit_Level_1_a
                AnimationName = GUBoromir_SKL.GUBoromir_HITA
                AnimationMode = ONCE
            End
        End

        AnimationState                = USER_1 DAMAGED
            StateName = LastStand
            Animation                = LastStand
                AnimationName        = GUBoromir_SKL.GUBoromir_SPCA
                AnimationMode        = LOOP
            End
        End


    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    Draw = W3DScriptedModelDraw ModuleTag_Schmiedekunst
        DefaultModelConditionState
            Model = None
        End
        ModelConditionState = USER_8
            Model           = exldrspimla
        End
    End


    #include "..\..\..\includes\StunDrawModuleSmall.inc"



    Side = Men
    EditorSorting = UNIT
    ThreatLevel = BOROMIR_THREAT_LEVEL
    ThingClass = CHARACTER_UNIT
    BuildCost         = BOROMIRDAG_COST
    BuildTime         = MEDIUM_HERO_BUILDTIME
    DisplayMeleeDamage = BOROMIRDAG_DAMAGE
    MaxSimultaneousOfType    = 1
    HeroSortOrder = 50

    TransportSlotCount = TRANSPORTSLOTCOUNT_HERO

    WeaponSet
        Conditions = None
        Weapon = PRIMARY    BoromirSword
    End

    WeaponSet
        Conditions        = RAMPAGE
        Weapon            = PRIMARY    BoromirRampageSword
    End

    WeaponSet
        Conditions        = WEAPONSET_HERO_MODE
        Weapon            = PRIMARY    BoromirSword
    End

    ArmorSet
        Conditions      = None
        Armor           = MediumHeroArmor
        DamageFX        = NormalDamageFX
    End

    ArmorSet
        Conditions      = PLAYER_UPGRADE
        Armor           = StrongHeroArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange = 250
    ShroudClearingRange = 300
    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    BountyValue = GONDOR_BOROMIR_BOUNTY_VALUE
    DisplayName = OBJECT:GondorBoromir
    RecruitText = CONTROLBAR:GondorBoromirRecruit
    ReviveText    = CONTROLBAR:GondorBoromirRevive
    Hotkey        = CONTROLBAR:GondorBoromirHotkey
    CrushableLevel = 3

    IsTrainable = No
    CommandPoints = 0
    CommandSet  = BoromirModCommandSet_ElrondsRat



    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_BoromirBody

    AutoResolveArmor
        Armor = AutoResolve_BoromirArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_BoromirWeapon
    End

    AutoResolveLeadership = AutoResolve_BoromirBonus




    VoiceAttack                = BoromirVoiceAttack
    VoiceAttackCharge            = BoromirVoiceAttackCharge
    VoiceAttackMachine        = BoromirVoiceAttack
    VoiceAttackStructure        = BoromirVoiceAttackBuilding
    VoiceFear                 = BoromirVoiceHelpMe
    VoiceMove                = BoromirVoiceMove
    VoiceMoveToCamp            = BoromirVoiceMoveCamp
    VoiceMoveWhileAttacking        = BoromirVoiceDisengage
    VoicePriority            = 85
    VoiceRetreatToCastle        = BoromirVoiceRetreat
    VoiceSelect                = BoromirVoiceSelectMS
    VoiceSelectBattle         = BoromirVoiceSelectBattle
    VoiceGuard                = BoromirVoiceMove

    SoundImpact                = ImpactHorse

    UnitSpecificSounds
        VoiceGarrison                        = BoromirVoiceGarrison
        VoiceEnterUnitElvenTransportShip    = BoromirVoiceMove
        VoiceInitiateCaptureBuilding        = BoromirVoiceMove
    End

    CrowdResponseKey = GoodMen

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
    EvaEventDieOwner = BoromirModDie


    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:SwordIntoScabbard1        Animation:GUBoromir_SKL.GUBoromir_HRNA     Frames:7
        AnimationSound = Sound:BoromirHorn            Animation:GUBoromir_SKL.GUBoromir_HRNB     Frames:0
        AnimationSound = Sound:SwordShingClean1        Animation:GUBoromir_SKL.GUBoromir_HRNC     Frames:5
        AnimationSound = Sound:FootstepDirtA        Animation:GUBoromir_SKL.GUBoromir_RUNA     Frames:10 22
        AnimationSound = Sound:FootstepDirtA        Animation:GUBoromir_SKL.GUBoromir_RUNB     Frames:10 22
        AnimationSound = Sound:FootstepDirtA        Animation:GUBoromir_SKL.GUBoromir_ATRA     Frames:11 23 35 47
        AnimationSound = Sound:FootstepDirtA        Animation:GUBoromir_SKL.GUBoromir_MFDA    Frames:8 20 31 41

        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:GUBoromir_SKL.GUBoromir_DTHA     Frames:116
        AnimationSound = Sound:BodyFallSoldier        Animation:GUBoromir_SKL.GUBoromir_LNDA     Frames:4
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:GUBoromir_SKL.GUBoromir_SPCE     Frames:82
    End

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Man Man_Male Unit Infantry Hero
    End


    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE HERO ARMY_SUMMARY HEAVY_MELEE_HITTER SUMMONED

    Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
        LevelToGrant = 6
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime      = CREATE_A_HERO_REINFORCEMENT_LIFETIME
        MaxLifetime      = CREATE_A_HERO_REINFORCEMENT_LIFETIME
        DeathType        = FADED
    End


    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius                 = EMOTION_CHEER_RADIUS
        MaxHealth                   = BOROMIRDAG_HEALTH
        PermanentlyKilledByFilter   = NONE
        DodgePercent                = HERO_DODGE_PERCENT
    End

    PathfindDiameter = 40.0
    CamouflageDetectionMultiplier = CAMOUFLAGE_DETECTION_DISTANCE_LONG


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_LastStand
        SpecialPowerTemplate = SpecialAbilityLastStand
        TriggeredBy = Upgrade_Level_1
    End

    Behavior = ModelConditionUpgrade ModuleTag_LastStandAnims
        AddConditionFlags = USER_1
        TriggeredBy = Upgrade_Level_1
    End

    Behavior = SpecialPowerModule ModuleTag_LastStandUpdate
        SpecialPowerTemplate = SpecialAbilityLastStand
        UpdateModuleStartsAttack     = No
        StartsPaused     = Yes
    End

    Behavior = TransitionDamageFX ModleTag_HideAndShowArrows
        PristineHideSubObject ARRW1 ARRW2 ARRW3
        DamagedHideSubObject ARRW1 ARRW2 ARRW3
        ReallyDamagedShowSubObject ARRW1 ARRW2 ARRW3
    End

    Behavior = SubObjectsUpgrade ModuleTag_WithoutGNTL
        TriggeredBy       = Upgrade_AllFactionUpgrade
        HideSubObjects    = TEMPMESH
    End


    Behavior = AutoHealBehavior ModuleTag_BoromirHealing
        StartsActive = Yes
        HealingAmount = 45
        HealingDelay = 1000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = LifetimeUpdate ModuleTag_LifeTime
        WaitForWakeUp = Yes
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    #include "..\..\..\includes\CaptureBuilding.inc"

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle    = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate           = 500
        AILuaEventsList               = BoromirFunctionsEdain
        RampageTime                   = 16000
    End


    Behavior = CommandButtonHuntUpdate ModuleTag_CommandButtonHuntUpdate
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance                = 300
        TauntAndPointUpdateDelay            = 10000
        AddEmotion            =    Doom_Base
        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
        AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base
        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_GOOD_HERO_SPEED
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_ENRAGED
        Speed     = NORMAL_GOOD_HERO_SPEED
    End

    Behavior = AutoHealBehavior ModuleTag_ElvenGiftHealing
        StartsActive                = No
        TriggeredBy                    = Upgrade_ElvenGift
        HealingAmount                = ELVEN_GIFT_REGEN_AMOUNT
        HealingDelay                = ELVEN_GIFT_REGEN_DELAY
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = AttributeModifierUpgrade ModuleTag_ElvenGiftBonus
        TriggeredBy = Upgrade_ElvenGift
        AttributeModifier = SpellBookElvenGifts
    End

    Behavior = DualWeaponBehavior ModuleTag_13
        SwitchWeaponOnCloseRangeDistance = 161
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime        = 4000
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -FADED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL BoromirVoiceDie
        DeathFlags = DEATH_1
    End

      Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 2500
        DestructionDelay = 2500
        Sound = INITIAL SpellGenericUnsummonFasterMS
        DeathFlags = DEATH_2
    End


    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 7
        HitReactionLifeTimer2 = 15
        HitReactionLifeTimer3 = 10

        HitReactionThreshold1 = 0.0
        HitReactionThreshold2 = 25.0
        HitReactionThreshold3 = 50.0
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EnableHorn
        SpecialPowerTemplate        = SpecialAbilityHornOfGondor
        TriggeredBy                 = Upgrade_Level_2
    End

    Behavior = SpecialPowerModule ModuleTag_HornStarter
        SpecialPowerTemplate        = SpecialAbilityHornOfGondor
        UpdateModuleStartsAttack    = Yes
        AntiCategory                = LEADERSHIP INNATE_ARMOR STRUCTURE
        AttributeModifier           = BoromirGondorHornAntiCategory
        AttributeModifierRange      = 100.0
        StartsPaused                = Yes
    End

    Behavior = ModelConditionSpecialAbilityUpdate ModuleTag_HornUpdate
        SpecialPowerTemplate    = SpecialAbilityHornOfGondor
        UnpackTime              = 1700
        PreparationTime         = 1
        PersistentPrepTime      = 1600
        PackTime                = 1666
        AwardXPForTriggering    = 0
    End

    Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityHorn
        SpecialAbility          = SpecialAbilityHornOfGondor
        MaxScanRange            = 60
        Query                   = 10 ALL ENEMIES -STRUCTURE
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_AragornBladeMasterEnabler
        SpecialPowerTemplate = SpecialAbilityAragornBladeMaster
        TriggeredBy = Upgrade_Level_4
    End

    Behavior = SpecialPowerModule ModuleTag_AragornBladeMasterStarter
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        StartsPaused            = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_AragornBladeMasterUpdate
        SpecialPowerTemplate    = SpecialAbilityAragornBladeMaster
        HeroAttributeModifier   = BoromirSchild
        HeroEffectDuration      = 30000
        UnpackTime              = 1
        TriggerSound            = AragornBladeMaster
    End

    Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityAragornBladeMaster
        SpecialAbility          = SpecialAbilityAragornBladeMaster
        MaxScanRange            = 30
        Query                   = 1 ANY ENEMIES +INFANTRY +CAVALRY +HERO -STRUCTURE
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_UnpauseLeadership
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy = Upgrade_Level_1
    End

    Behavior = SpecialPowerModule ModuleTag_BoromirLeadershipUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = No
        StartsPaused = Yes
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_BoromirLeadership
        StartsActive    = No
        BonusName       = BoromirHeermeisterGondors
        TriggeredBy     = Upgrade_Level_1
        RefreshDelay    = 2000
        Range           = 200
        AntiCategory    = BUFF
        ObjectFilter    = GENERIC_BUFF_RECIPIENT_OBJECT_FILTER
    End

    Behavior = ArmorUpgrade ModuleTag_ArmorUpgrade
        TriggeredBy     = Upgrade_Level_1
        ArmorSetFlag    = PLAYER_UPGRADE
    End

    Behavior = SubObjectsUpgrade ModuleTag_Skinwelchsel
        TriggeredBy     = Upgrade_Level_1
        UpgradeTexture  = guboromir.tga 0 guboromir_ha.tga
    End

    Behavior = SubObjectsUpgrade ModuleTag_MakingTheBoromir
        TriggeredBy     = Upgrade_Level_1
        ShowSubObjects  = TEMPMESH
    End

    Behavior = CreateObjectDie ModuleTag_CrushUnitsOnDeath
        CreationList = OCL_BoromirDie
    End





    Behavior = AISpecialPowerUpdate BoromirHornOfGondorAI
        CommandButtonName = Command_SpecialAbilityBoromirHorn
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate SpecialPowerBoromirGiveXPAoE
        CommandButtonName = Command_SpecialAbilityCaptainOfGondorBoromir
        SpecialPowerAIType = AI_SPECIAL_POWER_GIVEXP_AOE
        SpecialPowerRadius = 30.0
    End

    Behavior = AISpecialPowerUpdate AragornBladeMasterAI
        CommandButtonName = Command_SpecialAbilityBoromirSchild
        SpecialPowerAIType = AI_SPECIAL_POWER_CHARGE
        SpecialPowerRadius = 50
        SpecialPowerRange = 50
    End

    Behavior = AISpecialPowerUpdate SpecialPowerAragornOathBreakers
        CommandButtonName = Command_SpecialAbilityBoromirVerteidigungOsgiliats
        SpecialPowerAIType = AI_SPECIAL_POWER_TARGETAOE_SUMMON
        SpecialPowerRadius = 30.0
    End

  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 20
  ShadowSizeY = 20
  ShadowTexture = ShadowI
End

