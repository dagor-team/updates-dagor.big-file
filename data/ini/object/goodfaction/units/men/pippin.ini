Object RohanPippin

    SelectPortrait = HPPippin
    ButtonImage    = HIPippin

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_SupportHero

    Draw = W3DScriptedModelDraw ModuleTag_01

      OkToChangeModelColor = Yes

       StaticModelLODMode = Yes
       DependencySharedModelFlags = TURN_LEFT_HIGH_SPEED TURN_RIGHT_HIGH_SPEED    MOVING ACCELERATE DECELERATE TURN_LEFT TURN_RIGHT ATTACKING    BACKING_UP

        DefaultModelConditionState
            Model               = GUPippin_SKNA
            Skeleton            = RUFrodo_SKL
            WeaponLaunchBone    = PRIMARY B_HANDR
            WeaponLaunchBone    = SECONDARY B_HANDR
            ParticleSysBone     = NONE Predator FollowBone:Yes Persist:HOLD PersistID:100
        End

        ModelConditionState     = PASSENGER_VARIATION_1
            Model               = GUPippin_SKNA
            Skeleton            = RUFrodo_SKL
            WeaponLaunchBone    = PRIMARY B_HANDR
            WeaponLaunchBone    = SECONDARY B_HANDR
            ParticleSysBone     = NONE Predator FollowBone:Yes Persist:HOLD PersistID:100
        End

        ModelConditionState     = PASSENGER_VARIATION_2
            Model               = GUPippin_SKNA
            Skeleton            = RUFrodo_SKL
            WeaponLaunchBone    = PRIMARY B_HANDL
            WeaponLaunchBone    = SECONDARY B_HANDL
            ParticleSysBone     = NONE Predator FollowBone:Yes Persist:HOLD PersistID:100
        End

        ModelConditionState     = INVISIBLE_STEALTH
            ParticleSysBone     = NONE Predator FollowBone:Yes Persist:SPAWN PersistID:100
        End

        ModelConditionState     = ARMORSET_PLAYER_UPGRADE
            Model               = GUPippin_SKN
            RetainSubObjects    = Yes
        End

        ModelConditionState     = ARMORSET_PLAYER_UPGRADE_2
            Model               = GUPippinHA_SKN
            RetainSubObjects    = Yes
        End

        ModelConditionState     = INVISIBLE_STEALTH ARMORSET_PLAYER_UPGRADE_2
            Model               = GUPippinHA_SKN
            Skeleton            = RUFrodo_SKL
            ParticleSysBone     = NONE Predator FollowBone:Yes Persist:SPAWN PersistID:100
        End







        AnimationState = PASSENGER_VARIATION_1 FIRING_OR_PREATTACK_A
            Animation = Rar
                AnimationName = Rufro_TB_thra
                AnimationMode = ONCE
            End
            FrameForPristineBonePositions = 18
        End

        AnimationState = PASSENGER PASSENGER_VARIATION_1
            Animation = idleTreeBerd
                AnimationName = Rufro_TB_idla
                AnimationMode = LOOP
            End
        End


        AnimationState = PASSENGER_VARIATION_2 FIRING_OR_PREATTACK_A
            Animation = Rar2
                AnimationName = Rufro_tb_thrb
                AnimationMode = ONCE
            End
            FrameForPristineBonePositions = 18
        End

        AnimationState = PASSENGER_VARIATION_2
            Animation = idleTreeBerd2
                AnimationName = Rufro_tb_idlb
                AnimationMode = LOOP
            End
        End




        AnimationState        =  PASSENGER FIRING_OR_PREATTACK_A
            Animation           = THRA
                AnimationName     = RUFrodo_THRA
                AnimationMode     = ONCE
                UseWeaponTiming        = Yes
                AnimationBlendTime = 0
            End
            StateName           = NoSword
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SheatheSword") end
            EndScript
        End

        AnimationState = PASSENGER MOVING ACCELERATE
            Animation = RUFro_HH_RUNA
                AnimationName = RUFro_HH_ACCL
                AnimationMode =LOOP
                AnimationBlendTime = 0
            End
            StateName           = Mounted
        End

          AnimationState = PASSENGER MOVING DECELERATE
              Animation = RUFro_HH_RUNA
                  AnimationName = RUFro_HH_DECL
                  AnimationMode =LOOP
                  AnimationBlendTime = 0
              End
              StateName           = Mounted
          End

          AnimationState = PASSENGER MOVING TURN_LEFT
              Animation = RUFro_HH_RUNA
                  AnimationName = RUFro_HH_TNL2
                  AnimationMode =LOOP
                  AnimationBlendTime = 0
              End
              StateName           = Mounted
          End

          AnimationState = PASSENGER MOVING TURN_RIGHT
              Animation = RUFro_HH_RUNA
                  AnimationName = RUFro_HH_TNL1
                  AnimationMode =LOOP
                  AnimationBlendTime = 0
              End
              StateName           = Mounted
          End

          AnimationState = PASSENGER TURN_LEFT_HIGH_SPEED
              Animation = RUFro_HH_RUNA
                  AnimationName = RUFro_HH_TRNL
                  AnimationMode =LOOP
                  AnimationBlendTime = 0
              End
              StateName           = Mounted
          End

          AnimationState = PASSENGER TURN_RIGHT_HIGH_SPEED
              Animation = RUFro_HH_RUNA
                  AnimationName = RUFro_HH_TRNR
                  AnimationMode =LOOP
                  AnimationBlendTime = 0
              End
              StateName           = Mounted
          End


        AnimationState = PASSENGER MOVING
            Animation = RUFro_HH_RUNA
                AnimationName = RUFro_HH_RUNA
                AnimationMode =LOOP
                AnimationBlendTime = 0
            End
            StateName           = Mounted
        End

        AnimationState = PASSENGER SELECTED
            Animation = RUFro_HH_RUNA
                AnimationName = RUFro_HH_IDLA
                AnimationMode =LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Mounted" then CurDrawableSetTransitionAnimState("TRANS_MountedSelect") end
            EndScript
        End


        TransitionState                =    TRANS_MountedSelect
            Animation                =    ATNA
                AnimationName        =    RUFro_HH_ATNA
                AnimationMode        =    ONCE
            End
        End




        AnimationState = PASSENGER
            Animation = IDLE1
                AnimationName = RUFro_HH_IDLA
                AnimationMode =ONCE

            End
            Animation = IDLE2
                AnimationName = RUFro_HH_IDLB
                AnimationMode = ONCE

            End





            Animation = IDLE4
                AnimationName = RUFro_HH_IDLH
                AnimationMode = ONCE

            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
            StateName           = Mounted
        End



        AnimationState                    = STUNNED_FLAILING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Bored_Rocks
            Animation                    = FLYA
                AnimationName            = RUMerry_FLYA
                AnimationMode            = LOOP
                AnimationBlendTime        = 0
                AnimationSpeedFactorRange    = 0.4 0.6
            End
            Flags                        = RANDOMSTART
        End
        AnimationState                    = STUNNED_FLAILING
            StateName                    = STATE_Bored_Rocks
            Animation                    = FLYA
                AnimationName            = RUMerry_FLYA
                AnimationMode            = LOOP
                AnimationBlendTime        = 0
                AnimationSpeedFactorRange    = 0.4 0.6
            End
            Flags                        = RANDOMSTART
        End

        AnimationState                    = DYING SPLATTED WEAPONSET_TOGGLE_1
            StateName                    = STATE_Bored_Rocks
            Animation                    = LNDA
                AnimationName            = RUMerry_LNDA
                AnimationMode            = ONCE
            End
        End
        AnimationState                    = DYING SPLATTED
            StateName                    = STATE_Bored_Rocks
            Animation                    = &&SPLAT WITH SWORD&&
                AnimationName            = RUMerry_LNDA
                AnimationMode            = ONCE
            End
        End
        AnimationState                    = DYING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Bored_Rocks
            Animation                    = DIEA
                AnimationName            = RUMerry_DIEA
                AnimationMode            = ONCE
            End
        End

        AnimationState                        = DYING DEATH_2
            Animation
                AnimationName                = RUMerry_IDLA
                AnimationMode                = LOOP
            End
        End

        AnimationState                    = DYING EMOTION_ALERT
            Animation                    = DIEB
                AnimationName            = RUMerry_DIEB
                AnimationMode            = ONCE
            End
        End

        AnimationState                    = DYING
            Animation                    = DIEA
                AnimationName            = RUMerry_DIEA
                AnimationMode            = ONCE
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = RUMerry_IDLA
                AnimationMode                = LOOP
            End
        End



        AnimationState                    = STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
            StateName                    = STATE_Ready_Rocks
            Animation                    = GTPA
                AnimationName            = RUMerry_GTPA
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End
        AnimationState                    = STUNNED_STANDING_UP
            StateName                    = STATE_Ready_Rocks
            Animation                    = &&GET UP WITH SWORD&&
                AnimationName            = RUMerry_GTPA
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState                    = STUNNED WEAPONSET_TOGGLE_1
            StateName                    = STATE_Bored_Rocks
            Animation                    = LNDA
                AnimationName            = RUMerry_LNDA
                AnimationMode            = ONCE
            End
        End
        AnimationState                    = STUNNED
            StateName                    = STATE_Bored_Rocks
            Animation                    = LNDA
                AnimationName            = RUMerry_LNDA
                AnimationMode            = ONCE
            End
        End





        AnimationState                    = BETWEEN_FIRING_SHOTS_A WEAPONSET_TOGGLE_1
            StateName                    = STATE_Ready_Rocks
            Animation                    = IDLA
                AnimationName            = RUMerry_IDLA
                AnimationMode            = LOOP
                AnimationBlendTime        = 20
            End
            BeginScript
                CurDrawableAllowToContinue()
            EndScript
        End


        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = RUMerry_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState                    = BETWEEN_FIRING_SHOTS_A
            StateName                    = STATE_Ready_Sword
            Animation                    = IDLB
                AnimationName            = RUMerry_IDLB
                AnimationMode            = LOOP
                AnimationBlendTime        = 10
            End
            BeginScript
                CurDrawableAllowToContinue()
            EndScript
        End

        AnimationState                    = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            StateName                    = STATE_Ready_Rocks
            Animation                    = THRA
                AnimationName            = RUMerry_THRA
                AnimationMode            = ONCE
                UseWeaponTiming            = Yes
            End
            FrameForPristineBonePositions = 21
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
            EndScript
        End
        AnimationState                    = FIRING_OR_PREATTACK_A
            StateName                    = STATE_Ready_Sword
            Animation                    = ATKA
                AnimationName            = RUMerry_ATKA
                AnimationMode            = ONCE
                UseWeaponTiming            = Yes
                AnimationBlendTime        = 10
            End
            Animation                    = ATKB
                AnimationName            = RUMerry_ATKB
                AnimationMode            = ONCE
                UseWeaponTiming            = Yes
                AnimationBlendTime        = 10
            End
            Animation                    = ATKB
                AnimationName            = RUMerry_ATKB
                AnimationMode            = ONCE
                UseWeaponTiming            = Yes
                AnimationBlendTime        = 10
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
            EndScript
        End








        AnimationState                    = MOVING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Running_Rocks
            Animation                    = RUNA
                AnimationName            = RUMerry_RUNC
                AnimationMode            = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
            EndScript
        End
        AnimationState                    = MOVING EMOTION_ALERT
            StateName                    = STATE_Running_Sword
            Animation                    = RUNA
                AnimationName            = RUMerry_RUNA
                AnimationMode            = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Running_RocksToSword") end
            EndScript
        End
        AnimationState                    = MOVING
            StateName                    = STATE_Running_Rocks
            Animation                    = RUNA
                AnimationName            = RUMerry_RUNC
                AnimationMode            = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Running_SwordToRocks") end
            EndScript
        End















































        AnimationState                    = EMOTION_CELEBRATING
            Animation
                AnimationName            = RUMerry_CHRA
                AnimationMode            = ONCE
            End
            Animation
                AnimationName            = RUMerry_CHRB
                AnimationMode            = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = EMOTION_TAUNTING
            Animation
                AnimationName            = RUMerry_TNTB
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = EMOTION_ALERT WEAPONSET_TOGGLE_1
            StateName                    = STATE_Ready_Rocks
            Animation                    = IDLA
                AnimationName            = RUMerry_IDLA
                AnimationMode            = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Ready_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Attention_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
            EndScript
        End
        AnimationState                    = EMOTION_ALERT
            StateName                    = STATE_Ready_Sword
            Animation
                AnimationName            = RUMerry_IDLB
                AnimationMode            = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Ready_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
                if Prev == "STATE_Running_Rocks" then CurDrawableSetTransitionAnimState("TRANS_Ready_RocksToSword") end
            EndScript
        End

        AnimationState                    = RAISING_FLAG
            Animation
                AnimationName            = RUMerry_CHRA
                AnimationMode            = ONCE
            End
            Animation
                AnimationName            = RUMerry_CHRB
                AnimationMode            = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End




        AnimationState                    = SELECTED
            StateName                    = STATE_Attention_Rocks
            Animation                    = IDLA
                AnimationName            = RUMerry_ATNB
                AnimationMode            = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Attention_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Attention_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Attention_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Attention_SwordToRocks") end
                if Prev == "STATE_Bored_Rocks" then CurDrawableSetTransitionAnimState("TRANS_BoredToAttention_Rocks") end
            EndScript
        End



        IdleAnimationState
            StateName                    = STATE_Bored_Rocks
            Animation                    = IDLA
                AnimationName            = RUMerry_IDLA
                AnimationMode            = ONCE
                AnimationPriority        = 30
            End
            Animation                    = IDLW
                AnimationName            = RUMerry_IDLW
                AnimationMode            = ONCE
                AnimationPriority        = 10
            End
            Animation                    = IDLY
                AnimationName            = RUMerry_IDLY
                AnimationMode            = ONCE
                AnimationPriority        = 10
            End
            Animation                    = IDLZ
                AnimationName            = RUMerry_IDLZ
                AnimationMode            = ONCE
                AnimationPriority        = 10
            End
            Animation                    = IDLC
                AnimationName            = RUMerry_IDLC
                AnimationMode            = ONCE
                AnimationPriority        = 10
            End
            Animation                    = IDLS
                AnimationName            = RUMerry_IDLS
                AnimationMode            = ONCE
                AnimationPriority        = 10
            End
            Animation                    = IDLV
                AnimationName            = RUMerry_IDLV
                AnimationMode            = ONCE
                AnimationPriority        = 10
            End
            Animation                    = IDLX
                AnimationName            = RUMerry_IDLX
                AnimationMode            = ONCE
                AnimationPriority        = 10
            End
            Animation                    = IDLU
                AnimationName            = RUMerry_IDLU
                AnimationMode            = ONCE
                AnimationPriority        = 10
            End
            Animation                    = IDLD
                AnimationName            = RUMerry_IDLD
                AnimationMode            = ONCE
                AnimationPriority        = 10
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bored_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Ready_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Attention_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Running_Sword" then CurDrawableSetTransitionAnimState("TRANS_Bored_SwordToRocks") end
                if Prev == "STATE_Attention_Rocks" then CurDrawableSetTransitionAnimState("TRANS_AttentionToBored_Rocks") end
            EndScript
        End



        TransitionState                    = TRANS_unMount
            Animation                    = unmount
                AnimationName            = RUFro_HH_IDLB
                AnimationMode            = ONCE
                AnimationBlendTime        = 0
            End
        End


        TransitionState                    = TRANS_Bored_RocksToSword
            Animation                    = STHA
                AnimationName            = RUMerry_STHA
                AnimationMode            = ONCE
            End
        End
        TransitionState                    = TRANS_Ready_RocksToSword
            Animation                    = STHA
                AnimationName            = RUMerry_STHA
                AnimationMode            = ONCE
            End
        End
        TransitionState                    = TRANS_Attention_RocksToSword
            Animation                    = STHA
                AnimationName            = RUMerry_STHA
                AnimationMode            = ONCE
            End
        End
        TransitionState                    = TRANS_Running_RocksToSword
            Animation                    = STHA
                AnimationName            = RUMerry_STHD
                AnimationMode            = ONCE
            End
        End


        TransitionState                    = TRANS_Bored_SwordToRocks
            Animation                    = STHA
                AnimationName            = RUMerry_STHB
                AnimationMode            = ONCE
            End
        End
        TransitionState                    = TRANS_Ready_SwordToRocks
            Animation                    = STHA
                AnimationName            = RUMerry_STHB
                AnimationMode            = ONCE
            End
        End
        TransitionState                    = TRANS_Attention_SwordToRocks
            Animation                    = STHA
                AnimationName            = RUMerry_STHB
                AnimationMode            = ONCE
            End
        End
        TransitionState                    = TRANS_Running_SwordToRocks
            Animation                    = STHA
                AnimationName            = RUMerry_STHC
                AnimationMode            = ONCE
            End
        End
        TransitionState                    = TRANS_BoredToAttention_Rocks
            Animation                    = ATNA
                AnimationName            = RUMerry_ATNA
                AnimationMode            = ONCE
            End
        End
        TransitionState                    = TRANS_AttentionToBored_Rocks
            Animation                    = ATNC
                AnimationName            = RUMerry_ATNC
                AnimationMode            = ONCE
            End
        End

    End


    Draw = W3DScriptedModelDraw ModuleTag_LightController
        DefaultModelConditionState
            Model = None
        End
        ModelConditionState = HERO
            Model           = exldrspimla
        End
    End


    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side = Men
    EditorSorting = UNIT
    ThreatLevel = PIPPIN_THREAT_LEVEL
    ThingClass = CHARACTER_UNIT
    TransportSlotCount = TRANSPORTSLOTCOUNT_HERO
    DisplayMeleeDamage = 150
    DisplayRangedDamage = 100
    HeroSortOrder = 90

    WeaponSet
        Conditions = None
        Weapon = PRIMARY    HobbitHeroSword
        Weapon = SECONDARY    HobbitHeroRockThrow
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
        AutoChooseSources = SECONDARY NONE
    End

    WeaponSet
        Conditions = CONTAINED WEAPONSET_TOGGLE_1
        Weapon = PRIMARY    HobbitHeroRockThrow
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End
    WeaponSet
        Conditions = CONTAINED
        Weapon = PRIMARY    HobbitHeroRockThrow
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End
    WeaponSet
        Conditions = WEAPONSET_TOGGLE_1
        Weapon = PRIMARY    HobbitHeroRockThrow
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = VeryWeakHeroArmor
        DamageFX        = NormalDamageFX
    End
    ArmorSet
        Conditions        = PLAYER_UPGRADE
        Armor            = WeakHeroArmor
        DamageFX        = NormalDamageFX
    End
    ArmorSet
        Conditions        = PLAYER_UPGRADE_2
        Armor            = MediumHeroArmor
        DamageFX        = NormalDamageFX
    End


    VisionRange = VISION_HERO_STANDARD
    ShroudClearingRange = SHROUD_CLEAR_HERO

    BountyValue = ROHAN_PIPPIN_BOUNTY_VALUE
    DisplayName = OBJECT:RohanPippin
    RecruitText = CONTROLBAR:RohanPippinRecruit
    ReviveText    = CONTROLBAR:RohanPippinRevive
    Hotkey        = CONTROLBAR:RohanPippinHotkey
    CrushableLevel = 2

  CommandSet = RohanPippinModCommandSet
  CommandPoints = 0



    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_FaramirBody

    AutoResolveArmor
        Armor = AutoResolve_FaramirArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_FaramirWeapon
    End



    VoiceAttack                = PippinVoiceAttack
    VoiceAttackCharge        = PippinVoiceAttackCharge
    VoiceAttackMachine        = PippinVoiceAttack
    VoiceAttackStructure    = PippinVoiceAttack
    VoiceCreated        = PippinVoiceSalute
    VoiceFullyCreated    = PippinVoiceSalute
    VoiceFear                 = PippinVoiceHelpMe
    VoiceMove                = PippinVoiceMove
    VoiceMoveToCamp            = PippinVoiceMove
    VoiceMoveWhileAttacking    = PippinVoiceDisengage
    VoicePriority            = 80
    VoiceRetreatToCastle    = PippinVoiceRetreat
    VoiceSelect                = PippinVoiceSelectMS
    VoiceSelectBattle         = PippinVoiceSelectBattle
    VoiceGuard                = PippinVoiceMove

    UnitSpecificSounds
        VoiceGarrison        = PippinVoiceGarrison
        VoiceEnterUnitElvenTransportShip    = PippinVoiceMove
        VoiceInitiateCaptureBuilding        = PippinVoiceMove
    End

    CrowdResponseKey = Hobbit

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
    EvaEventDieOwner        = PippinDie

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:FootstepDirtA         Animation:RUFrodo_SKL.RUMerry_RUNA     Frames:10 20
        AnimationSound = Sound:FootstepDirtA         Animation:RUFrodo_SKL.RUMerry_RUNC     Frames:10 20
        AnimationSound = Sound:FootstepDirtA         Animation:RUFrodo_SKL.RUMerry_STHC    Frames:10 20
        AnimationSound = Sound:FootstepDirtA        Animation:RUFrodo_SKL.RUMerry_STHD    Frames:10 20

        AnimationSound = Sound:SwordShingClean2         Animation:RUFrodo_SKL.RUMerry_STHA    Frames:18
        AnimationSound = Sound:SwordIntoScabbard2        Animation:RUFrodo_SKL.RUMerry_STHB    Frames:21
        AnimationSound = Sound:SwordIntoScabbard2        Animation:RUFrodo_SKL.RUMerry_STHC    Frames:2
        AnimationSound = Sound:SwordShingClean2        Animation:RUFrodo_SKL.RUMerry_STHD    Frames:8

        AnimationSound = Sound:BodyFallGenericNoArmor     Animation:RUFrodo_SKL.RUMerry_LNDA    Frames:0
        AnimationSound = Sound:BodyFallGenericNoArmor     Animation:RUFrodo_SKL.RUMerry_DIEA    Frames:44
        AnimationSound = Sound:BodyFallGenericNoArmor     Animation:RUFrodo_SKL.RUMerry_DIEB    Frames:33
    End


    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Hobbit Unit Infantry
    End




    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT HERO HOBBIT ATTACK_NEEDS_LINE_OF_SIGHT HEAVY_MELEE_HITTER ARMY_SUMMARY

    BuildCost = 200
    BuildTime = VERY_WEAK_HERO_BUILDTIME


    Body = RespawnBody ModuleTag_RespawnBody
        MaxHealth         = 2500
        PermanentlyKilledByFilter    = NONE
		DodgePercent        = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                = DYING
        DeathAnimationTime        = 3000
        RespawnAnim                = LEVELED
        RespawnAnimationTime        = 3500
        AutoRespawnAtObjectFilter    = NONE +CASTLE_KEEP
        ButtonImage                = HIPippin

        RespawnRules =    AutoSpawn:No           Cost:200        Time:VERY_WEAK_HERO_RESPAWNTIME        Health:100%
    End



    Behavior = ArmorUpgrade ArmorUpgradeModuleTag
       TriggeredBy    = Upgrade_Level_6
       ArmorSetFlag   = PLAYER_UPGRADE
    End

    Behavior = ArmorUpgrade ArmorUpgradeModuleTag2
        TriggeredBy   = Upgrade_Level_10
        ArmorSetFlag  = PLAYER_UPGRADE_2
    End




    Behavior = AutoHealBehavior ModuleTag_PippinHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 1000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    #include "..\..\..\includes\CaptureBuilding.inc"

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance        =    300
         TauntAndPointUpdateDelay    =    1000
          HeroScanDistance            = 150

         AddEmotion    =    HeroCheerIdle_Base
        AddEmotion    =    HeroCheerBusy_Base
        AddEmotion    =    Taunt_Base
        AddEmotion    =    Alert_Base
     End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    Behavior = AIUpdateInterface ModuleTag_AIUpdateInterface
        AutoAcquireEnemiesWhenIdle   = Yes ATTACK_BUILDINGS
        AILuaEventsList              = AragornFunctions
        MoodAttackCheckRate          = 500
        HoldGroundCloseRangeDistance = 40
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL
        Speed = NORMAL_GOOD_HOBBIT_SPEED
    End

    LocomotorSet
        Locomotor = HumanContainedLocomotor
        Condition = SET_CONTAINED
        Speed     = 0.0
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 3000
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -KNOCKBACK -FADED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL PippinEdainVoiceDie
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = SlowDeathBehavior ModuleTag_07

        DeathTypes = NONE +KNOCKBACK
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
    End


    Behavior = BezierProjectileBehavior ModuleTag_08

        FirstHeight = 24
        SecondHeight = 24
        FirstPercentIndent = 30%
        SecondPercentIndent = 70%
        TumbleRandomly = No
        OrientToFlightPath =No

        CrushStyle = Yes
        DieOnImpact = No
        BounceCount = 0
        BounceDistance = 40
        BounceFirstHeight = 24
        BounceSecondHeight = 24
        BounceFirstPercentIndent = 20%
        BounceSecondPercentIndent = 80%

        GroundHitFX       = FX_ThrownRockGroundHit
        GroundBounceFX    = FX_ThrownRockBounceHit
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_LeapEnabler
        SpecialPowerTemplate     = SpecialAbilityDolchderNoldor
        TriggeredBy              = Upgrade_Level_4
    End

    Behavior = SpecialPowerModule ModuleTag_LeapStarter
        SpecialPowerTemplate     = SpecialAbilityDolchderNoldor
        UpdateModuleStartsAttack = Yes
        StartsPaused             = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_LeapUpdate
        SpecialPowerTemplate     = SpecialAbilityDolchderNoldor
        UnpackTime               = 600
        PackTime                 = 300
        AwardXPForTriggering     = 0
        StartAbilityRange        = 100.0
        SpecialWeapon            = HobbitsSprung
        BusyForDuration          = 2000
        WhichSpecialWeapon       = 2
        TriggerSound             = PippinEdainVoiceSprung
    End

    Behavior = AutoAbilityBehavior ModuleTag_LeapAutoAbility
        SpecialAbility              = SpecialAbilityDolchderNoldor
        MaxScanRange                = 100
        Query                       = 30 ALL ENEMIES -CAVALRY -HERO
    End






    Behavior = AttributeModifierAuraUpdate ModuleTag_GoblinKingLeadershipUpdate2
        StartsActive    = No
        BonusName       = KnappeRohans
        TriggeredBy     = Upgrade_Level_6
        RefreshDelay    = 2000
        Range           = 1
        AllowSelf       = Yes
        ObjectFilter    = NONE +RohanPippin
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_GoblinKingLeadershipUnpause2
        SpecialPowerTemplate = SpecialAbilityFakeLeadership2
        TriggeredBy = Upgrade_Level_6
    End

    Behavior = SpecialPowerModule ModuleTag_GoblinKingLeadershipPower2
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership2
        UpdateModuleStartsAttack  = No
        StartsPaused = Yes
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SchrecklicheBegegnungEnabler
        SpecialPowerTemplate 	   = SpecialAbilitySauronPalantirMinasIthil
        TriggeredBy          	   = Upgrade_Level_10
    End

    Behavior = OCLSpecialPower ModuleTag_SchrecklicheBegegnung
        SpecialPowerTemplate 	   = SpecialAbilitySauronPalantirMinasIthil
        StartsPaused         	   = Yes
        OCL                  	   = OCL_PippinSchrecklicheBegegnung
        CreateLocation       	   = CREATE_AT_LOCATION
    End

    Behavior = SpecialAbilityUpdate ModuleTag_OCLSchrecklicheBegegnungUpdate        
        SpecialPowerTemplate       = SpecialAbilitySauronPalantirMinasIthil
        UnpackingVariation         = 3
        UnpackTime                 = 2500
        PreparationTime            = 3
        PackTime                   = 2096
        AwardXPForTriggering       = 0
        FreezeAfterTriggerDuration = 15000
    End

    Behavior = InvisibilityUpdate ModuleTag_StealthForEscape
        InvisibilityNugget
            InvisibilityType        = STEALTH
            ForbiddenConditions        = MOVING FIRING_ANY TAKING_DAMAGE USING_ABILITY
            BecomeStealthedFX       = FX_ElvenCloakOn
            ExitStealthFX           = FX_ElvenCloakOff
            Options                    = UNTOGGLE_HIDDEN_WHEN_LEAVING_STEALTH
        End
        StartsActive                = No
        UpdatePeriod                = 2000
    End

    Behavior = SpecialPowerModule ModuleTag_ElfCloakStarter
        SpecialPowerTemplate      = SpecialAbilityElfCloak
        UpdateModuleStartsAttack  = Yes

    End

    Behavior = ToggleHiddenSpecialAbilityUpdate ModuleTag_ElfCloakUpdate
        SpecialPowerTemplate    = SpecialAbilityElfCloak
        AwardXPForTriggering    = 0
    End


    Behavior = AutoHealBehavior ModuleTag_ElvenGiftHealing
        StartsActive                = No
        TriggeredBy                    = Upgrade_ElvenGift
        HealingAmount                = ELVEN_GIFT_REGEN_AMOUNT
        HealingDelay                = ELVEN_GIFT_REGEN_DELAY
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = AttributeModifierUpgrade ModuleTag_ElvenGiftBonus
        TriggeredBy = Upgrade_ElvenGift
        AttributeModifier = SpellBookElvenGifts
    End







    Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag
        FireWeaponNugget
            WeaponName = PippinRetterObjectDestroyWeapon
            FireDelay = 2000
            OneShot = Yes
        End
    End

    Behavior = ObjectCreationUpgrade ModuleTag_RetterObject
        TriggeredBy     = Upgrade_RaiseSchmiedekunst
        Delay           = 0
        ThingToSpawn    = RetterObjectPippin
    End







    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate EscapeAI
        CommandButtonName =  Command_SpecialAbilityElfCloak
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End


    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes
    Shadow = SHADOW_DECAL
    ShadowSizeX = 18
    ShadowSizeY = 18
    ShadowTexture = ShadowI
End


ChildObject RohanPippen_Summoned RohanPippin

    IsTrainable        = No

    CommandPoints    = 0
    EquivalentTo    = RohanPippin
    KindOf            = HOBBIT_KINDOF SUMMONED

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate

        MinLifetime        = 120000
        MaxLifetime        = 120000
        DeathType        = FADED
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes            = ALL -KNOCKBACK -FADED
        SinkDelay            = 3000
        SinkRate            = 0.40
        DestructionDelay    = 8000
        Sound                = INITIAL PippinVoiceDie
    End

    Behavior = SlowDeathBehavior ModuleTag_ConstructionDeath
        DeathTypes            = NONE +FADED
        DeathFlags            = DEATH_2
        FadeDelay            = 500
        FadeTime            = 3500
        DestructionDelay    = 4500
        Sound                = INITIAL SpellGenericUnsummonMS
    End
End