Object RohanEomer

    SelectPortrait = HPEomer
    ButtonImage    = HIEomer

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_LeaderHero

    Draw = W3DScriptedModelDraw ModuleTag_01

        RandomTexture = bfme_nival_shld_Eomer.tga  0 bfme_nival_shld_01.tga

        ExtraPublicBone = PASSENGERBONE
        DependencySharedModelFlags = TURN_LEFT_HIGH_SPEED TURN_RIGHT_HIGH_SPEED MOVING ACCELERATE DECELERATE TURN_LEFT TURN_RIGHT ATTACKING BACKING_UP

        DefaultModelConditionState
            Model            = RUEomer_SKA
            WeaponLaunchBone = PRIMARY SPEAR
            WeaponLaunchBone = SECONDARY SPEAR
            WeaponLaunchBone = TERTIARY SPEAR
        End

        IdleAnimationState
            StateName = STATE_Idle
            Animation = IDLB
                AnimationName        = RUEomer_SKL.RUEomer_IDLB
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Animation = IDLC
                AnimationName        = RUEomer_SKL.RUEomer_IDLC
                AnimationMode        = ONCE
                AnimationPriority    = 20
            End
            Animation = IDLD
                AnimationName        = RUEomer_SKL.RUEomer_IDLD
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Animation = IDLE
                AnimationName        = RUEomer_SKL.RUEomer_IDLE
                AnimationMode        = ONCE
                AnimationPriority    = 1
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Selected"    then CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle") return end
            EndScript
        End

        ModelConditionState            = MOUNTED
            Model    =    RUEomerhrs_SKA
            WeaponLaunchBone = PRIMARY SPEAR
            WeaponLaunchBone = SECONDARY SPEAR
            WeaponLaunchBone = TERTIARY SPEAR
        End



        AnimationState                =    FREEFALL MOUNTED
            Animation                =    freefall
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_FLYC
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState                =    STUNNED_FLAILING MOUNTED
            Animation                =    JustDie
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_FLYC
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End


        AnimationState                =    DYING SPLATTED MOUNTED DEATH_1
            Animation                =    Land
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_LNDA
                AnimationMode        =    ONCE
            End
        End


        AnimationState                =    DYING MOUNTED DEATH_1
            Animation                =    JustDie
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_DIEA
                AnimationMode        =    ONCE
            End
        End

        AnimationState                =    DYING MOUNTED DEATH_2
            Animation                =    JustDie
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_IDLB
                AnimationMode        =    LOOP
            End
        End

        AnimationState                =    STUNNED_STANDING_UP MOUNTED
            Animation                =    StandUp
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_GTPA
                AnimationMode        =    ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End


        AnimationState                =    STUNNED MOUNTED
            Animation                =    Land
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_LNDA
                AnimationMode        =    ONCE
            End
        End

        AnimationState                        = PARALYZED MOUNTED
            Animation
                AnimationName                = RUHHs_Theo_SKL.RUHHs_Theo_IDLA
                AnimationMode                = LOOP
            End
        End


        AnimationState        =  SPECIAL_WEAPON_ONE MOUNTED
            Animation           = SPRA
                AnimationName     = RUHHs_Theo_SKL.RUEomrHrs_SPRA
                AnimationMode     = ONCE
            End
            FrameForPristineBonePositions = 60
        End

        AnimationState = PACKING_TYPE_1 MOUNTED
            StateName = STATE_PlantingTotem_Mounted
            Animation
                AnimationName = RUHHs_Theo_SKL.RUEomrHrs_SPRA
                AnimationMode = ONCE
            End
        End

        AnimationState        =  SPECIAL_WEAPON_ONE
            StateName = Attacking_throw
            Animation
                AnimationName        = RUEomer_SKL.RUEomer_ATKE
                AnimationMode       = ONCE
            End
            FrameForPristineBonePositions = 58
        End

        AnimationState = PACKING_TYPE_1
            StateName = STATE_PlantingTotem
            Animation
                AnimationName = RUEomer_SKL.RUEomer_ATKE
                AnimationMode = ONCE
            End
        End


        AnimationState        =  SPECIAL_WEAPON_TWO MOUNTED
            Animation           = CHRA
                AnimationName     = RUHHs_Theo_SKL.RUHHs_Theo_CHRA
                AnimationMode     = ONCE
            End
        End




        AnimationState                =    MOUNTED PASSENGER
            Animation                =    grabbed
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_GBDA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState                =    MOUNTED TURN_LEFT_HIGH_SPEED
            Animation                =    TurnLeft
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_TNL1
                AnimationMode        =    LOOP
                AnimationSpeedFactorRange= 1.8 1.8
                AnimationBlendTime    =    20
            End
        End

        AnimationState                =    MOUNTED TURN_RIGHT_HIGH_SPEED
            Animation                =    TurnLeft
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_TNR1
                AnimationMode        =    LOOP
                AnimationSpeedFactorRange= 1.8 1.8
                AnimationBlendTime    =    20
            End
        End

        AnimationState                =    MOVING TURN_LEFT MOUNTED
            Animation                =    TurnLeft
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_TRNL
                AnimationMode        =    LOOP
            End
        End

        AnimationState                =    MOVING TURN_RIGHT MOUNTED
            Animation                =    TurnRight
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_TRNR
                AnimationMode        =    LOOP
            End
        End

        AnimationState                =    MOVING ACCELERATE MOUNTED
            Animation                =    Accelerate
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_ACCL
                AnimationMode        =    LOOP
            End
        End

        AnimationState                =    MOVING DECELERATE MOUNTED
            Animation                =    Decelerate
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_DECL
                AnimationMode        =    ONCE
                AnimationSpeedFactorRange    = 0.55 0.55
            End
        End

        AnimationState                =    MOVING WALKING MOUNTED
            Animation                =    Walk
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_WLKA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState                =    MOVING BACKING_UP MOUNTED
            Animation                =    BackingUp
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_BAKA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState        = MOUNTED MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = MountedRunAndFire
                AnimationName       = RUHHs_Theo_SKL.RUHHs_Theo_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState                =    MOVING MOUNTED
            Animation                =    RunA
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_RUNA
                AnimationMode        =    LOOP
            End
             Flags                    =    RANDOMSTART

        End

        AnimationState                =    FIRING_OR_PREATTACK_A MOUNTED
            Animation                =    AttackA
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_ATKA
                AnimationMode        =    ONCE
            End
            Animation                =    AttackB
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_ATKB
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                =    RAISING_FLAG MOUNTED
                Animation           =    CHRA
                    AnimationName   =    RUHHs_Theo_SKL.RUHHs_Theo_CHRA
                    AnimationMode   =    LOOP
                End
        End

        AnimationState                =    EMOTION_CELEBRATING MOUNTED
                Animation
                    AnimationName   =    RUHHs_Theo_SKL.RUHHs_Theo_CHRA
                    AnimationMode   =    LOOP
                End
        End

        AnimationState                =    EMOTION_TAUNTING MOUNTED
                Animation
                    AnimationName   =    RUHHs_Theo_SKL.RUHHs_Theo_CHRA
                    AnimationMode   =    LOOP
                End
        End

        AnimationState                =    SELECTED MOUNTED
            SimilarRestart            =   Yes
            StateName                =    AtAttentionIdle
            Animation                =    ATNB
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_IDLH
                AnimationMode        =    LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
                if Prev == "AtAttentionIdle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
            EndScript
        End

        TransitionState                =    TRANS_Select
            Animation                =    ATNA
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_ATNA
                AnimationMode        =    ONCE
            End
        End

        AnimationState                = MOUNTED
            Animation
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_IDLA
                AnimationPriority    =    20
                AnimationMode        =    ONCE
                AnimationBlendTime    =    15
            End
            Animation            =    IdleB
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_IDLB
                AnimationMode        =    ONCE
                AnimationBlendTime    =    15
            End
            Animation            =    IdleC
                AnimationName        =    RUHHs_Theo_SKL.RUHHs_Theo_IDLC
                AnimationMode        =    ONCE
                AnimationBlendTime    =    15
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                =    STUNNED_FLAILING
            Flags                    =    RANDOMSTART
            Animation                =    RUEomer_FLYA
                AnimationName        =    RUEomer_SKL.RUEomer_FLYA
                AnimationMode        =    LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
            StateName = NoSword
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Sword"    then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
            EndScript
        End

        AnimationState                =    DYING SPLATTED DEATH_1
            Animation                =    RUEomer_LNDA
                AnimationName        =    RUEomer_SKL.RUEomer_LNDA
                AnimationMode        =    ONCE
            End
            StateName = NoSword
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Sword"    then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
            EndScript
        End

        AnimationState                =    DYING DEATH_1
            Animation                =    RUEomer_DIEA
                AnimationName        =    RUEomer_SKL.RUEomer_DIEA
                AnimationMode        =    ONCE
            End
            Animation                =    RUEomer_DIEB
                AnimationName        =    RUEomer_SKL.RUEomer_DIEB
                AnimationMode        =    ONCE
            End
        End

        AnimationState                =    DYING DEATH_2
            Animation                =    RUEomer_DIEA
                AnimationName        =    RUEomer_SKL.RUEomer_IDLB
                AnimationMode        =    LOOP
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = RUEomer_IDLA
                AnimationMode                = ONCE_BACKWARDS
            End
            Flags                            = START_FRAME_FIRST
        End

        AnimationState                =    STUNNED_STANDING_UP
            Animation                =    RUEomer_GTPA
                AnimationName        =    RUEomer_SKL.RUEomer_GTPA
                AnimationMode        =    ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState                =    STUNNED
            Animation                =    RUEomer_LNDA
                AnimationName        =    RUEomer_SKL.RUEomer_LNDA
                AnimationMode        =    ONCE
            End
            StateName = NoSword
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Sword"    then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
            EndScript
        End



        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = RUEomer_SKL.RUEomer_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End


        AnimationState                = MOVING PANICKING
            Animation                = MFDA
                AnimationName        = RUEomer_SKL.RUEomer_MFDA
                AnimationMode        = LOOP
            End
            Flags                    = RANDOMSTART
        End


        AnimationState = MOVING ATTACKING
            Animation                =    RUEomer_RUNB
                AnimationName        =    RUEomer_SKL.RUEomer_RUNB
                AnimationMode        =    LOOP
                Distance            =   50
            End
        End

        AnimationState                =    MOVING
            Flags                    =    RANDOMSTART
            Animation                =    RUEomer_RUNA
                AnimationName        =    RUEomer_SKL.RUEomer_RUNA
                AnimationMode        =    LOOP
                Distance            =   30
            End
        End


        AnimationState                =    FIRING_OR_PREATTACK_A
            Animation                =    ATKA
                AnimationName        =    RUEomer_SKL.RUEomer_ATKA
                AnimationMode        =    ONCE
                UseWeaponTiming        =   Yes
            End
            Animation                =    ATKB
                AnimationName        =    RUEomer_SKL.RUEomer_ATKB
                AnimationMode        =    ONCE
                UseWeaponTiming        =   Yes
            End
            Animation                =    ATKC
                AnimationName        =    RUEomer_SKL.RUEomer_ATKC
                AnimationMode        =    ONCE
                UseWeaponTiming        =   Yes
            End
            Animation                =    ATKD
                AnimationName        =    RUEomer_SKL.RUEomer_ATKD
                AnimationMode        =    ONCE
                UseWeaponTiming        =   Yes
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState        = ATTACKING
            Animation           = ALERT_1
                AnimationName     = RUEomer_SKL.RUEomer_IDLA
                AnimationMode     = ONCE
            End
            Flags               = RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState                =    RAISING_FLAG
                Animation           =    CHRA
                    AnimationName   =    RUEomer_SKL.RUEomer_CHRA
                    AnimationMode   =    ONCE
                End
                Animation           =    CHRB
                    AnimationName   =    RUEomer_SKL.RUEomer_CHRB
                    AnimationMode   =    ONCE
                End
                Flags                =    RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                =    SELECTED
            Animation                =    ATNB
                AnimationName        =    RUEomer_SKL.RUEomer_ATNB
                AnimationMode        =    LOOP
            End
            StateName = STATE_Selected
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Idle"    then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") return end
            EndScript
        End

        TransitionState = TRANS_Idle_to_Selected
            Animation = IDLF
                AnimationName        = RUEomer_SKL.RUEomer_ATNA
                AnimationMode        = ONCE
            End
        End

        TransitionState = TRANS_Selected_to_Idle
            Animation            = ATNE
                AnimationName    = RUEomer_SKL.RUEomer_ATNE
                AnimationMode    = ONCE
            End
        End

        AnimationState                =    EMOTION_CELEBRATING
                Animation           =    CHRA
                    AnimationName   =    RUEomer_SKL.RUEomer_CHRA
                    AnimationMode   =    ONCE
                End
        End

        AnimationState                =    EMOTION_TAUNTING
                Animation           =    CHRB
                    AnimationName   =    RUEomer_SKL.RUEomer_CHRB
                    AnimationMode   =    ONCE
                End
                Flags                =    RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = EMOTION_ALERT EMOTION_MORALE_HIGH
            Animation                    = Taunting
                AnimationName            = RUEomer_SKL.RUEomer_TNTA
                AnimationMode            = ONCE
            End
            Animation                    = Taunting
                AnimationName            = RUEomer_SKL.RUEomer_TNTB
                AnimationMode            = ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState        = EMOTION_ALERT
            Animation           = ALERT_1
                AnimationName     = RUEomer_SKL.RUEomer_IDLA
                AnimationMode     = ONCE
            End
            Flags               = RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState = HIT_REACTION HIT_LEVEL_1
            Animation = Hit_Level_1_b
                AnimationName = RUEomer_SKL.RUEomer_HITB
                AnimationMode = ONCE
            End
        End

    TransitionState = Trans_Idle_To_Sword
        Animation = Transition
            AnimationName = GUFaramir_SKL.GUFaramir_STHA
            AnimationMode = ONCE
        End
    End


    TransitionState = Trans_Sword_To_Idle
        Animation = Transition
            AnimationName = GUFaramir_SKL.GUFaramir_STHB
            AnimationMode = ONCE
        End
    End
    End

    Draw = W3DScriptedModelDraw DustEffects
        DefaultModelConditionState
          Model = None
        End
        IdleAnimationState
        End
        AnimationState = MOUNTED MOVING WADING
            ParticleSysBone = None FootstepSlash
        End
        AnimationState = MOUNTED MOVING ACCELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOUNTED MOVING ACCELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOUNTED MOVING
        End
    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End


    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side = Rohan
    EditorSorting = UNIT
    ThreatLevel = EOMER_THREAT_LEVEL
    TransportSlotCount = TRANSPORTSLOTCOUNT_HERO
    BuildCost           = EOMERDAG_COST
    BuildTime           = MEDIUM_HERO_BUILDTIME
    BountyValue         = ROHAN_EOMER_BOUNTY_VALUE
    DisplayMeleeDamage  = EOMERDAG_DAMAGE

    WeaponSet
        Conditions          = None
        Weapon              = PRIMARY        EomerSword
        AutoChooseSources    = TERTIARY        NONE
    End

    ArmorSet
        Conditions      = None
        Armor           = StrongHeroArmor
        DamageFX        = NormalDamageFX
    End
	
    ArmorSet
        Conditions      = MOUNTED
        Armor           = StrongHeroArmorMounted
        DamageFX        = NormalDamageFX
    End

    VisionRange = 200
    ShroudClearingRange = 400
    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    DisplayName   = OBJECT:RohanEomer
    RecruitText   = CONTROLBAR:RohanEomerRecruit
    ReviveText    = CONTROLBAR:RohanEomerRevive
    Hotkey        = CONTROLBAR:RohanEomerHotkey
    CrusherLevel  = 0
    MountedCrusherLevel = 1
    CrushableLevel = 2
    MountedCrushableLevel = 2
    CommandSet    = RohanEomerModCommandSet
    CommandPoints = 0

    CrushWeapon        = HeroCrush

    MinCrushVelocityPercent     = MINCRUSHVELOCITYPERCENT_HERO
    CrushDecelerationPercent    = CRUSHDECELERATIONPERCENT_HERO

    CrushKnockback = 40
    CrushZFactor = 1.0



    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_EomerBody

    AutoResolveArmor
        Armor = AutoResolve_EomerArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_EomerWeapon
    End

    AutoResolveLeadership = AutoResolve_EomerBonus

    VoiceAttack              = EomerVoiceAttack
    VoiceAttackCharge        = EomerVoiceAttackChargeUnmounted
    VoiceAttackMachine       = EomerVoiceAttack
    VoiceAttackStructure     = EomerVoiceAttackBuilding
    VoiceFear                = EomerVoiceHelpMe
    VoiceCreated             = EomerVoiceSalute
    VoiceFullyCreated        = EomerVoiceSalute
    VoiceMove                = EomerVoiceMove
    VoiceMoveToCamp          = EomerVoiceMoveCamp
    VoiceMoveWhileAttacking  = EomerVoiceDisengage
    VoicePriority            = 85
    VoiceRetreatToCastle     = EomerVoiceRetreat
    VoiceSelect              = EomerVoiceSelectMS
    VoiceSelectBattle        = EomerVoiceSelectBattle
    VoiceGuard               = EomerVoiceMove

    SoundImpact              = ImpactHorse

    UnitSpecificSounds
        VoiceGarrison                       = EomerVoiceGarrison
        VoiceEnterUnitElvenTransportShip    = EomerVoiceMove
        VoiceInitiateCaptureBuilding        = EomerVoiceMove
    End

    ClientBehavior = ModelConditionSoundSelectorClientBehavior ModuleTag_MCSoundSelector
        SoundState = MOUNTED
            VoiceAttackCharge      = EomerVoiceAttackChargeMounted
            VoiceMove              = EomerVoiceMoveMounted
            VoiceSelect            = EomerVoiceSelectMountedMS
        End
    End

    CrowdResponseKey = GoodMen

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
    EvaEventDieOwner         = EomerDie

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Man Man_Male Unit Infantry Hero
        UnitWeight = 2
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:FootstepDirtA              Animation:RUEomer_SKL.RUEomer_RUNA          Frames:4 15
        AnimationSound = Sound:FootstepDirtA              Animation:RUEomer_SKL.RUEomer_RUNB          Frames:5 15 26 36

        AnimationSound = Sound:SwordIntoScabbard1         Animation:RUEomer_SKL.RUEomer_ATKE          Frames:13
        AnimationSound = Sound:EomerThrowSpear            Animation:RUEomer_SKL.RUEomer_ATKE          Frames:55
        AnimationSound = Sound:SwordShingClean1           Animation:RUEomer_SKL.RUEomer_ATKE          Frames:91

        AnimationSound = Sound:TauntHumanHitShield        Animation:RUEomer_SKL.RUEomer_CHRB          Frames:22 32

        AnimationSound = Sound:BodyFallGenericNoArmor     Animation:RUEomer_SKL.RUEomer_DIEA          Frames:48
        AnimationSound = Sound:BodyFallGenericNoArmor     Animation:RUEomer_SKL.RUEomer_DIEB          Frames:18
        AnimationSound = Sound:BodyFallSoldier            Animation:RUEomer_SKL.RUEomer_LNDA          Frames:2

        AnimationSound = Sound:HorseMoveFootsteps         Animation:RUHHs_Theo_SKL.RUHHs_Theo_ACCL    Frames:15 32
        AnimationSound = Sound:HorseMoveFootsteps         Animation:RUHHs_Theo_SKL.RUHHs_Theo_RUNA    Frames:0
        AnimationSound = Sound:HorseMoveFootsteps         Animation:RUHHs_Theo_SKL.RUHHs_Theo_TNL1    Frames:0
        AnimationSound = Sound:HorseMoveFootsteps         Animation:RUHHs_Theo_SKL.RUHHs_Theo_TNR1    Frames:0

        AnimationSound = Sound:HorseWhinny                Animation:RUHHs_Theo_SKL.RUHHs_Theo_IDLC    Frames:3

        AnimationSound = Sound:SwordIntoScabbard1         Animation:RUHHs_Theo_SKL.RUEomrHrs_SPRA     Frames:10
        AnimationSound = Sound:EomerThrowSpear            Animation:RUHHs_Theo_SKL.RUEomrHrs_SPRA     Frames:53
        AnimationSound = Sound:SwordShingClean1           Animation:RUHHs_Theo_SKL.RUEomrHrs_SPRA     Frames:75

        AnimationSound = Sound:BodyFallSoldier            Animation:RUHHs_Theo_SKL.RUHHs_Theo_LNDA    Frames:3 10
        AnimationSound = Sound:HorseDieForHero            Animation:RUHHs_Theo_SKL.RUHHs_Theo_LNDA    Frames:2
        AnimationSound = Sound:HorseDieForHero            Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA    Frames:0
        AnimationSound = Sound:BodyFallGenericNoArmor     Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA    Frames:6
        AnimationSound = Sound:BodyFallSoldier            Animation:RUHHs_Theo_SKL.RUHHs_Theo_DIEA    Frames:45
    End

    RadarPriority = UNIT
    KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT ARMY_SUMMARY HEAVY_MELEE_HITTER
    PathfindDiameter = 40.0

    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius                 = EMOTION_CHEER_RADIUS
        MaxHealth                   = EOMERDAG_HEALTH
        PermanentlyKilledByFilter   = NONE
        DodgePercent                = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                    = DYING
        DeathAnimationTime           = 3333
        RespawnAnim                  = LEVELED
        RespawnAnimationTime         = 2000
        AutoRespawnAtObjectFilter    = NONE +CASTLE_KEEP
        ButtonImage                  = HIEomer

        RespawnRules =    AutoSpawn:No           Cost:EOMERDAG_COST       Time:MEDIUM_HERO_RESPAWNTIME        Health:100%
    End

    Behavior = AutoHealBehavior ModuleTag_EomerHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 1000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    #include "..\..\..\includes\CaptureBuilding.inc"

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle      = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate             = 500
        HoldGroundCloseRangeDistance    = 60
        AILuaEventsList                 = RohanHeroFunctions
    End

    Behavior = PassiveAreaEffectBehavior ModuleTag_FeelGoodHero2
        EffectRadius            = 300
        PingDelay               = 2000
        UpgradeRequired         = Upgrade_TestBuilding_2
        ModifierName            = EomerHamaModifier
        AllowFilter             = ANY +RohanHama ALLIES
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance                = 300
        TauntAndPointUpdateDelay            = 10000
        AddEmotion            =    Doom_Base
        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
        AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base
        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_GOOD_HERO_SPEED
    End

    LocomotorSet
        Locomotor = HeroHorseLocomotor
        Condition = SET_MOUNTED
        Speed     = NORMAL_MOUNTED_HERO_SPEED
    End

    LocomotorSet
        Locomotor = HeroHorseLocomotor
        Condition = SET_NORMAL_UPGRADED
        Speed     = NORMAL_MOUNTED_HERO_SPEED
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 2533
    End

    Behavior = HeroDie ModuleTag_HeroDeath
        SpecialPowerTemplate = SpecialAbilitySpearThrowEomer
    End

    Behavior = ObjectCreationUpgrade ModuleTag_ExilObject
        ConflictsWith   = Upgrade_RuhmdesKonigsUpgrade
        TriggeredBy     = Upgrade_RaiseShield
        Delay           = 0
        ThingToSpawn    = EomerExilObjectStart
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_HorseEnabler
        SpecialPowerTemplate = SpecialAbilityToggleMounted
    End

    Behavior = SpecialPowerModule ModuleTag_HorseToggleStarter
         SpecialPowerTemplate        = SpecialAbilityToggleMounted
         UpdateModuleStartsAttack    = Yes
         StartsPaused                = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_HorseToggle
         SpecialPowerTemplate        = SpecialAbilityToggleMounted
         UnpackTime                  = ROHAN_MOUNT_TIME
         PreparationTime             = 1
         PersistentPrepTime          = 250
         PackTime                    = ROHAN_MOUNT_TIME
         OpacityTarget               = .3
         AwardXPForTriggering        = 0
         TriggerInstantlyOnCreate    = No
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy 	     = Upgrade_Level_2
    End

    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = No
        StartsPaused 		  = Yes
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership1
        StartsActive     = No
        BonusName        = EomerHerrderOstfold
        TriggeredBy      = Upgrade_Level_2
        RefreshDelay     = 2000
        Range            = 200
        ObjectFilter     = NONE +CAVALRY +INFANTRY ALLIES
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership2
        StartsActive     = No
        BonusName        = EomerPassiveOutlawLeadership
        TriggeredBy      = Upgrade_Level_2
        RefreshDelay     = 2000
        Range            = 200
        AllowSelf        = Yes
        ObjectFilter     = ANY +CAVALRY +INFANTRY ALLIES
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SmiteEnabler
        SpecialPowerTemplate        = SpecialAbilitySpearThrowEomer
        TriggeredBy                 = Upgrade_Level_3
    End

    Behavior = SpecialPowerModule ModuleTag_EowynSmiteStarter
        SpecialPowerTemplate        = SpecialAbilitySpearThrowEomer
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = Yes
        InitiateSound               = EomerVoiceAttackSpear
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_SpecialAbilitySmiteUpdate
        SpecialPowerTemplate        = SpecialAbilitySpearThrowEomer
        UnpackTime                  = 2000
        PackTime                    = 2000
        AwardXPForTriggering        = 0
        StartAbilityRange           = 275.0
        ApproachRequiresLOS         = Yes
        SpecialWeapon               = RohanEomerSpear
        WhichSpecialWeapon          = 1
    End

    Behavior = AutoAbilityBehavior ModuleTag_SpearThrowAutoAbility
	SpecialAbility		= SpecialAbilitySpearThrowEomer
	ForbiddenStatus 	= INSIDE_GARRISON
	MaxScanRange		= 275
	Query 			= 1 ANY ENEMIES +MONSTER +HERO +AngmarThrallMaster +MordorFellBeast +MordorWitchKingOnFellBeast +GondorGwaihir +GondorGwaihir_Summoned +ElvenFortressEagle +KhamulFellBeast +MorgomirFellBeast +Drogoth
	Query 			= 10 ALL ENEMIES -STRUCTURE
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_GrenzmarkierungEnabler
        SpecialPowerTemplate      = SpecialAbilitySkullTotem
        TriggeredBy               = Upgrade_Level_5
    End

    Behavior = SpecialPowerModule ModuleTag_GrenzmarkierungStarter
        SpecialPowerTemplate      = SpecialAbilitySkullTotem
        UpdateModuleStartsAttack  = Yes
        StartsPaused              = Yes
     End

    Behavior = ActivateModuleSpecialPower ModuleTag_GrenzmarkierungUpdate
        SpecialPowerTemplate      = SpecialAbilitySkullTotem
        StartAbilityRange         = 20
        MustFinishAbility         = Yes
        UnpackTime                = 2000
        PackTime                  = 2000
        UnpackingVariation        = 1
        TriggerSpecialPower       = ModuleTag_GrenzmarkierungPower2 OBJECTPOS
    End

    Behavior = OCLSpecialPower ModuleTag_GrenzmarkierungPower2
        SpecialPowerTemplate      = SpecialAbilitySkullTotem2
        OCL                       = OCL_SpawnGrenzmarkierung
        CreateLocation            = CREATE_AT_LOCATION
        StartsPaused              = No
    End

    Behavior = AutoAbilityBehavior ModuleTag_GrenzmarkierungAutoAbility
	SpecialAbility		= SpecialAbilitySkullTotem
	ForbiddenStatus 	= INSIDE_GARRISON
	MaxScanRange		= 50
	Query			= 15 ANY +CAVALRY +INFANTRY
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FloodEnabler
        SpecialPowerTemplate        = SpecialAbilityPersonalFlood
        TriggeredBy                 = Upgrade_Level_10
    End

    Behavior = SpecialPowerModule ModuleTag_FloodStarter
        SpecialPowerTemplate        = SpecialAbilityPersonalFlood
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = Yes
        InitiateSound               = EomerOath
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FloodUpdate
        SpecialPowerTemplate        = SpecialAbilityPersonalFlood
        UnpackTime                  = 1300
        PackTime                    = 1500
        StartAbilityRange           = 150.0
        SpecialWeapon               = RittderExilanten
        WhichSpecialWeapon          = 2
    End


    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -FADED
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL EomerVoiceDie
        DeathFlags = DEATH_1
    End

    Behavior = SquishCollide ModuleTag_06
    End

    Behavior = AttributeModifierUpgrade ModuleTag_ExilBonus
        ConflictsWith     = Upgrade_RuhmdesKonigsUpgrade
        TriggeredBy       = Upgrade_RaiseShield
        AttributeModifier = VerbannungExilModifierHero
    End

    Behavior = AISpecialPowerUpdate EomerStanceBattle
        CommandButtonName  = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate EomerStanceAggressive
        CommandButtonName  = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate EomerHoldGround
        CommandButtonName  = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate EomerCaptureBuildingAI
        CommandButtonName  = Command_CaptureBuilding
        SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
    End

    Behavior = AISpecialPowerUpdate EomerThrowSpearAI

	CommandButtonName = Command_RohanEomerSpearEdain
	SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER_RANGED
	SpecialPowerAIType = AI_SPECIAL_POWER_MORGUL_BLADE
    End

    Behavior = AISpecialPowerUpdate EomerSkullTotemAI
	CommandButtonName = Command_EomerGrenzmarkierung
	SpecialPowerAIType = AI_SPECIAL_POWER_HEAL_AOE
	SpecialPowerRadius = 20
    End

    Behavior = AISpecialPowerUpdate EomerExilePowerAI
	CommandButtonName = Command_EomerRittderExilanten
	SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER_STRUCTURES
	SpecialPowerAIType = AI_SPECIAL_POWER_GANDALF_WIZARD_BLAST
	SpecialPowerRadius = 100.0
    End

    Geometry            = CYLINDER
    GeometryMajorRadius = 8
    GeometryHeight      = 25
    GeometryIsSmall     = Yes

    Shadow              = SHADOW_DECAL
    ShadowSizeX         = 20
    ShadowSizeY         = 20
    ShadowTexture       = ShadowI
End

ChildObject RohanEomerCavalry RohanEomer

    Draw = W3DScriptedModelDraw ModuleTag_W3DModelDrawInWorldBuilder

        OkToChangeModelColor = Yes

        DefaultModelConditionState
            Model = None
        End
        ModelConditionState = WORLD_BUILDER
            Model = RUEomrHrs_SKN
        End
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_HorseToggle
         SpecialPowerTemplate    = SpecialAbilityToggleMounted
         TriggerInstantlyOnCreate = Yes
         UnpackTime              = 2000
         PreparationTime         = 1
         PersistentPrepTime      = 250
         PackTime                = 2000
         OpacityTarget            = .3
         AwardXPForTriggering    = 0
    End
End


ChildObject RohanEomer_Summoned RohanEomer
    IsTrainable = No
    CommandPoints = 0

    KindOf = +SUMMONED

    Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
        LevelToGrant = 5
    End

    CommandSet = RohanEomerModCommandSet_Summoned

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime      = 180000
        MaxLifetime      = 180000
        DeathType        = FADED
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 2500
        DestructionDelay = 2500
        Sound = INITIAL SpellGenericUnsummonFasterMS
        DeathFlags = DEATH_2
    End
End