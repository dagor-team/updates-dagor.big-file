Object MordorBalrog

    SelectPortrait = HPBalrog
    ButtonImage    = HIBalrog

    Draw = W3DScriptedModelDraw ModuleTag_BodyDraw

        OkToChangeModelColor = Yes

        ExtraPublicBone = ZZZPASSENGERBON
        ExtraPublicBone = ZZZWHIPCOIL
        ExtraPublicBone = SWORD

        ModelConditionState = NONE
            Model = MUBalrog_SKN
            ParticleSysBone = SWORD BalrogSwordFlare FollowBone:Yes
            ParticleSysBone = SWORD BalrogSwordEmbers FollowBone:Yes
            ParticleSysBone = MANEBONE BalrogManeFlare FollowBone:Yes
            ParticleSysBone = MANEBONE BalrogManeEmbers FollowBone:Yes
            ParticleSysBone = MANEBONE BalrogManeFire FollowBone:Yes
            ParticleSysBone = RTWINGBONE BalrogWingSmokeLite FollowBone:Yes
            ParticleSysBone = LFWINGBONE BalrogWingSmokeLite FollowBone:Yes
        End

        ModelConditionState = HIT_LEVEL_2
            Model = MUBalLIT_SKN
        End

        ModelConditionState = HERO
            Model = MUBalIGNT_SKN
            ParticleSysBone = MANEBONE BalrogManeFlare FollowBone:Yes
            ParticleSysBone = MANEBONE BalrogManeEmbers FollowBone:Yes
            ParticleSysBone = MANEBONE BalrogManeFire FollowBone:Yes
            ParticleSysBone = RTWINGBONE BalrogWingEmbers FollowBone:Yes
            ParticleSysBone = LFWINGBONE BalrogWingEmbers FollowBone:Yes

            ParticleSysBone = SWORD BalrogSwordFlare FollowBone:Yes
            ParticleSysBone = SWORD BalrogSwordEmbers FollowBone:Yes
            ParticleSysBone = NONE BalrogIgniteHeatWave FollowBone:No
        End

        IdleAnimationState
            StateName = State_Idle
            Animation = Breathe
                AnimationName = MUBalrog_SKL.MUBalrog_IDLA
                AnimationMode = ONCE
                AnimationBlendTime = 10
                AnimationPriority = 10
            End
            Animation = LookAround
                AnimationName = MUBalrog_SKL.MUBalrog_IDLB
                AnimationMode = ONCE
                AnimationBlendTime = 10
                AnimationPriority = 2
            End
            Animation = SnortLikeABull
                AnimationName = MUBalrog_SKL.MUBalrog_IDLC
                AnimationMode = ONCE
                AnimationBlendTime = 10
                AnimationPriority = 2
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "State_JustBuilt"
                    then CurDrawableSetTransitionAnimState("TRANS_JustBuilt_To_Idle")
                end
                if Prev == "State_AboutToHitGround"
                    then CurDrawableSetTransitionAnimState("TRANS_AboutToHitGround_To_Idle")
                end
            EndScript
        End

        AnimationState                    =    DYING DEATH_1
            Animation                    =    Dying
                AnimationName            =    MUBalrog_SKL.MUBalrog_DIEA
                AnimationMode            =    ONCE
            End
            ParticleSysBone = None BalrogFallDust FollowBone:No
        End

        AnimationState                    =    DYING DEATH_2
            Animation                    =    FadingOut
                AnimationName            =    MUBalrog_SKL.MUBalrog_RORC
                AnimationMode            =    ONCE
            End
        End

        AnimationState                    =    HIT_LEVEL_2
            Animation                    =    Owowowowowowowow
                AnimationName            =    MUBalrog_SKL.MUBalrog_HITB
                AnimationMode            =    ONCE
            End
        End

        AnimationState                    =    EATING
            Animation                    =    DoingHorribleThingToGrabbedGuy
                AnimationName            =    MUBalrog_SKL.MUBalrog_BRNA
                AnimationMode            =    ONCE
                AnimationBlendTime        =    0
            End

                ParticleSysBone = ZZZPassengerBon balrogHandSqueezeFlames FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon balrogHandSqueezeFlames2 FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon balrogHandSqueezeFlamesFinal FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon BalrogHandSqueezeFlash FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon BalrogHandSmoke FollowBone:Yes
                ParticleSysBone = RING_2_L balrogHandAsh FollowBone:Yes
                ParticleSysBone = RING_2_L balrogHandAshSmall FollowBone:Yes
        End

        AnimationState                    =    UNPACKING PACKING_TYPE_3
            Animation                    =    GrabbingToTouching
                AnimationName            =    MUBalrog_SKL.MUBalrog_GRBA
                AnimationMode            =    ONCE
                AnimationBlendTime        =    0
            End
        End

        AnimationState                    =    PACKING PACKING_TYPE_3
            Animation                    =    GrabbingFollowThrough
                AnimationName            =    MUBalrog_SKL.MUBalrog_GRBC
                AnimationMode            =    ONCE
                AnimationBlendTime        =    0
            End
        End

        AnimationState            = JUST_BUILT
            StateName = State_JustBuilt
            Animation
                AnimationName = MUBalrog_SKL.MUBalrog_RORA
                AnimationMode = MANUAL
                AnimationBlendTime = 0
            End
        End

        TransitionState = TRANS_JustBuilt_To_Idle
            Animation = BeingSummoned
                AnimationName = MUBalrog_SKL.MUBalrog_RORA
                AnimationMode = ONCE
            End
        End

        AnimationState = FIRING_OR_PREATTACK_B
            Animation = CrackThatWhip
                AnimationName = MUBalrog_SKL.MUBalrog_WIPA
                AnimationMode = ONCE
            End
                ParticleSysBone = RTHANDBONE BalrogWhip2swordEfx FollowBone:Yes
        End

        AnimationState            = SPECIAL_POWER_1
            Animation            = RoaringFear
                AnimationName    = MUBalrog_SKL.MUBalrog_RORB
                AnimationMode   = ONCE
            End
                ParticleSysBone = BAT_JAW BalrogScreamEffect FollowBone:Yes
                FXEvent            = Frame:20 Name:FX_BalrogScreamEfx
                ParticleSysBone = BAT_JAW balrogPixelDisplScrm FollowBone:Yes
                ParticleSysBone = BAT_JAW balrogScrmEmbers FollowBone:Yes
        End

        AnimationState            = SPECIAL_WEAPON_ONE
            Animation            = BreathingFireAnimation
                AnimationName    = MUBalrog_SKL.MUBalrog_FIRA
                AnimationMode   = ONCE
            End

                ParticleSysBone = BAT_JAW balrogFireBreath FollowBone:Yes
                ParticleSysBone = BAT_JAW balrogBreathEmbers FollowBone:Yes
                ParticleSysBone = BAT_JAW balrogBreathSmoke FollowBone:Yes
                ParticleSysBone = BAT_JAW balrogBreathProxy FollowBone:Yes
            End

        AnimationState            = SPECIAL_WEAPON_TWO UNPACKING
            StateName            = State_LeapStart
            Animation            = GettingReadyToLeap
                AnimationName    = MUBalrog_SKL.MUBalrog_JMP1
                AnimationMode   = ONCE
            End
        End

        AnimationState            = SPECIAL_WEAPON_TWO PACKING
            Animation            = FirstWingBeatGoingUp
                AnimationName    = MUBalrog_SKL.MUBalrog_JMP2
                AnimationMode   = ONCE
            End
        End

        AnimationState            = ABOUT_TO_HIT
            StateName            = State_AboutToHitGround
            Animation            = StartingToLandToTouchingGround
                AnimationName    = MUBalrog_SKL.MUBalrog_LND1
                AnimationMode   = ONCE
            End
        End

        AnimationState            = THROWN_PROJECTILE
            Animation            = HurtlingThroughAir
                AnimationName    = MUBalrog_SKL.MUBalrog_FLYA
                AnimationMode   = LOOP
                AnimationBlendTime = 10
            End
        End

        TransitionState = TRANS_AboutToHitGround_To_Idle
            Animation = SplashAtEndOfJump
                AnimationName = MUBalrog_SKL.MUBalrog_LND2
                AnimationMode = ONCE
                AnimationBlendTime = 0
            End
        End

        AnimationState            = TURN_RIGHT
            Animation            = TurningRight
                AnimationName    = MUBalrog_SKL.MUBalrog_TRNA
                AnimationMode   = LOOP
                AnimationBlendTime = 10
            End
        End

        AnimationState            = TURN_LEFT
            Animation            = TurningLeft
                AnimationName    = MUBalrog_SKL.MUBalrog_TRNB
                AnimationMode   = LOOP
                AnimationBlendTime = 10
            End
        End

        AnimationState            = MOVING
            Animation            = Running
                AnimationName    = MUBalrog_SKL.MUBalrog_WLKA
                AnimationMode   = LOOP
                AnimationBlendTime = 10
            End
            Flags               = RANDOMSTART

            FXEvent    = Frame:20 FireWhenSkipped Name:FX_BalrogRightFootStep
            FXEvent    = Frame:44 FireWhenSkipped Name:FX_BalrogLeftFootStep
        End

        AnimationState            = WEAPONSET_HERO_MODE UNPACKING PACKING_TYPE_1
            Animation = StartIgniteRoar
                AnimationName = MUBalrog_SKL.MUBalrog_IGNTA
                AnimationMode = ONCE
            End
        End

        AnimationState            = HERO PACKING PACKING_TYPE_1
            Animation = FinishIgniteRoar
                AnimationName = MUBalrog_SKL.MUBalrog_IGNTB
                AnimationMode = ONCE
            End

            EnteringStateFX = FX_BalrogIgniteStart
        End

        AnimationState            = FIRING_OR_PREATTACK_A
            Animation            = Swipe
                AnimationName    = MUBalrog_SKL.MUBalrog_ATKB
                AnimationMode    = ONCE
                UseWeaponTiming    = Yes
            End
        End

        AnimationState            = FIRING_OR_PREATTACK_C
            Animation            = Chop
                AnimationName    = MUBalrog_SKL.MUBalrog_ATKA
                AnimationMode    = ONCE
                UseWeaponTiming    = Yes
            End
            ParticleSysBone        = SWORDBONE BalrogSword FollowBone:Yes
        End

    End


    Draw = W3DScriptedModelDraw ModuleTag_WhipDraw
        GlowEnabled = Yes
        GlowEmissive = Yes
        ShadowForceDisable = Yes

        DefaultModelConditionState
            Model = None
        End

        ModelConditionState = FIRING_OR_PREATTACK_B
            Model = MUBalsWhip_SKN
        End


        IdleAnimationState
        End

        AnimationState = FIRING_OR_PREATTACK_B
            Animation = CrackThatWhip
                AnimationName = MUBalsWhip_SKL.MUBalsWhip_WIPA
                AnimationMode = ONCE
                AnimationBlendTime = 0
            End
        End
            WadingParticleSys = BalrogRiverSteam
    End


    DisplayName      = OBJECT:Balrog
    DisplayMeleeDamage = BALROG_DAMAGE_DISPLAY

    Side = Neutral
    EditorSorting = UNIT
    ThreatLevel = BALROG_THREAT_LEVEL
    ThingClass = CHARACTER_UNIT
    CrusherLevel   = 4
    CrushWeapon = BalrogCrush

    TransportSlotCount = TRANSPORTSLOTCOUNT_MONSTER

    WeaponSet
        Conditions = None
        Weapon = PRIMARY    MordorBalrogSwordSwipe
        Weapon = SECONDARY    MordorBalrogWhipEdain
        Weapon = TERTIARY    MordorBalrogSwordChop

        AutoChooseSources = SECONDARY None
        OnlyAgainst = TERTIARY STRUCTURE BIG_MONSTER
    End

    ArmorSet
        Conditions      = None
        Armor           = BalrogArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange = VISION_BALROG
    ShroudClearingRange = SHROUD_CLEAR_BALROG

    DisplayName = OBJECT:Balrog
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS
    CommandSet = BalrogCommandSet
    CanPathThroughGates    = No
    IsTrainable = No

    DeadCollideSize = LARGE




    VoiceAttack            = BalrogVoiceAttack
    VoiceAttackCharge      = BalrogVoiceAttack
    VoiceAttackMachine     = BalrogVoiceAttack
    VoiceAttackStructure   = BalrogVoiceAttack
    VoiceGuard             = BalrogVoiceMove
    VoiceMove              = BalrogVoiceMove
    VoiceSelect            = BalrogVoiceSelect
    VoiceSelectBattle      = BalrogVoiceSelect

    SoundAmbient           = BalrogAmbientLoop
    SoundImpact            = ImpactHorse

    #include "..\includes\StandardUnitEvaEvents.inc"

    EvaEnemyObjectSightedEvent    = DiscoveredEnemyBalrog

    ClientUpdate = EvaAnnounceClientCreate ModuleTag_CreateAnnounce
        AnnouncementEventEnemy = DiscoveredEnemyBalrog
        AnnouncementEventAlly = None
        AnnouncementEventOwner = None

        OnlyIfVisible = Yes
        CountAsFirstSightedAnnoucement = Yes
        UseObjectsPosition = No
        CreateFakeRadarEvent = Yes
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: BalrogFootstep            Animation: MUBalrog_SKL.MUBalrog_WLKA Frames: 42 17
        AnimationSound = Sound: BalrogFootstep            Animation: MUBalrog_SKL.MUBalrog_TRNA Frames: 21 52
        AnimationSound = Sound: BalrogFootstep            Animation: MUBalrog_SKL.MUBalrog_TRNB Frames: 21 52

        AnimationSound = Sound: BalrogWhipPart1            Animation: MUBalrog_SKL.MUBalrog_WIPA Frames: 1
        AnimationSound = Sound: BalrogWhipPart2            Animation: MUBalrog_SKL.MUBalrog_WIPA Frames: 21
        AnimationSound = Sound: ImpactWhipCrack            Animation: MUBalrog_SKL.MUBalrog_WIPA Frames: 34

        AnimationSound = Sound: BalrogSwordSwipe            Animation: MUBalrog_SKL.MUBalrog_ATKB Frames: 32
        AnimationSound = Sound: BalrogSwordSwipe            Animation: MUBalrog_SKL.MUBalrog_ATKA Frames: 32
        AnimationSound = Sound: ImpactBalrogAttackGeneric    Animation: MUBalrog_SKL.MUBalrog_ATKA Frames:41
        AnimationSound = Sound: ImpactBalrogAttackGeneric    Animation: MUBalrog_SKL.MUBalrog_ATKB Frames:40
        AnimationSound = Sound: ImpactBalrogAttackGeneric    Animation: MUBalrog_SKL.MUBalrog_ATKC Frames:27 53 88

        AnimationSound = Sound: BalrogJump_Part1            Animation: MUBalrog_SKL.MUBalrog_JMP1 Frames: 0
        AnimationSound = Sound: BalrogJump_Part2            Animation: MUBalrog_SKL.MUBalrog_JMP1 Frames: 41
        AnimationSound = Sound: BalrogWingFlaps            Animation: MUBalrog_SKL.MUBalrog_FLYA Frames: 9
        AnimationSound = Sound: BalrogLand                Animation: MUBalrog_SKL.MUBalrog_LND1 Frames: 0
        AnimationSound = Sound: BalrogWingFlaps            Animation: MUBalrog_SKL.MUBalrog_JMP2 Frames: 0
        AnimationSound = Sound: BalrogLandSwordHit        Animation: MUBalrog_SKL.MUBalrog_LND2 Frames: 6
        AnimationSound = Sound: BalrogIdleB_Part3            Animation: MUBalrog_SKL.MUBalrog_LND2 Frames: 27

        AnimationSound = Sound: BalrogBreathFireExhale        Animation: MUBalrog_SKL.MUBalrog_FIRA Frames: 31
        AnimationSound = Sound: BalrogBreathFireInhale        Animation: MUBalrog_SKL.MUBalrog_FIRA Frames: 0

        AnimationSound = Sound: BalrogRoar                Animation: MUBalrog_SKL.MUBalrog_RORB Frames: 25
        AnimationSound = Sound: BalrogVanquishedRoar        Animation: MUBalrog_SKL.MUBalrog_RORC Frames: 21
        AnimationSound = Sound: BalrogVanquished            Animation: MUBalrog_SKL.MUBalrog_RORC Frames: 50

        AnimationSound = Sound: BalrogInjuredB_Part1        Animation: MUBalrog_SKL.MUBalrog_HITB Frames: 0
        AnimationSound = Sound: BalrogInjuredB_Part2        Animation: MUBalrog_SKL.MUBalrog_HITB Frames: 70

        AnimationSound = Sound: BalrogChuckle            Animation: MUBalrog_SKL.MUBalrog_IDLA Frames: 1
        AnimationSound = Sound: BalrogContentVox            Animation: MUBalrog_SKL.MUBalrog_IDLA Frames: 0
        AnimationSound = Sound: BalrogIdleB_Part1            Animation: MUBalrog_SKL.MUBalrog_IDLB Frames: 0
        AnimationSound = Sound: BalrogIdleB_Part2            Animation: MUBalrog_SKL.MUBalrog_IDLB Frames: 37
        AnimationSound = Sound: BalrogIdleB_Part3            Animation: MUBalrog_SKL.MUBalrog_IDLB Frames: 95
        AnimationSound = Sound: BalrogIdleC_Part2            Animation: MUBalrog_SKL.MUBalrog_IDLC Frames: 29
        AnimationSound = Sound: BalrogIdleC_Part3            Animation: MUBalrog_SKL.MUBalrog_IDLC Frames: 60
        AnimationSound = Sound: BalrogFootstep            Animation: MUBalrog_SKL.MUBalrog_IDLC Frames: 61

        AnimationSound = Sound: BalrogDieVox            Animation: MUBalrog_SKL.MUBalrog_DIEA Frames: 13
        AnimationSound = Sound: BalrogBodyfall1            Animation: MUBalrog_SKL.MUBalrog_DIEA Frames: 56
        AnimationSound = Sound: BalrogBodyfall2            Animation: MUBalrog_SKL.MUBalrog_DIEA Frames: 57
        AnimationSound = Sound: OliphantFall            Animation: MUBalrog_SKL.MUBalrog_DIEA Frames: 21
        AnimationSound = Sound: BalrogLandSwordHit        Animation: MUBalrog_SKL.MUBalrog_DIEA Frames: 54

        AnimationSound = Sound: BalrogIgnite            Animation: MUBalrog_SKL.MUBalrog_IGNTA Frames: 51
    End




  RadarPriority = UNIT
  KindOf          = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK NO_FREEWILL_ENTER PATH_THROUGH_INFANTRY SCARY BIG_MONSTER CAN_ATTACK_WALLS SUMMONED SCARY
  ThreatBreakdown MordorBalrog_DetailedThreat
    AIKindOf = SIEGEWEAPON
  End

  Body            = ActiveBody ModuleTag_02
    MaxHealth         = BALROG_HEALTH
  End

  Behavior = StancesBehavior ModuleTag_StancesBehavior
    StanceTemplate = FighterHorde
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle    = Yes ATTACK_BUILDINGS
    MoodAttackCheckRate           = 500
    AILuaEventsList               = BalrogFunctions
  End

  LocomotorSet
    Locomotor     = BalrogLocomotor
    Condition     = SET_NORMAL
    Speed         = 50
  End

    Behavior = BezierProjectileBehavior ModuleTag_Projectile

        FirstHeight = 104
        SecondHeight = 52
        FirstPercentIndent = 20%
        SecondPercentIndent = 70%
        TumbleRandomly = Yes

        CrushStyle = Yes

        BounceCount = 0

        FinalStuckTime = 1766

        GroundHitFX       = FX_BalrogJumpHitGround
        GroundHitWeapon   = RohanGimliLeapWarhead

        PreLandingStateTime = 300
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End

    Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag
        FireWeaponNugget
            WeaponName = MordorBalrogHeroEffect
            FireDelay = 0
            OneShot = No
        End
        HeroModeTrigger = Yes
    End

      Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -FADED
        DestructionDelay = 2500
        FX = FINAL FX_BalrogFinalDeath
        DeathFlags = DEATH_1
    End

      Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FX = INITIAL FX_BalrogUnsummonInitial
        DestructionDelay = 3800
        FX = FINAL FX_BalrogUnsummonFinal
        DeathFlags = DEATH_2
    End

    Behavior = SpecialPowerModule ModuleTag_IgniteStarter
        SpecialPowerTemplate      = SpecialAbilityHeroMode
        UpdateModuleStartsAttack  = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate
        SpecialPowerTemplate    = SpecialAbilityHeroMode
        UnpackingVariation      = 1
        UnpackTime              = 1800
        PackTime                = 1600
        AwardXPForTriggering    = 0
        HeroAttributeModifier   = BalrogIgniteState
        HeroEffectDuration      = 30000
    End

    Behavior = AutoAbilityBehavior ModuleTag_BladeOfPurityAutoAbility
	SpecialAbility		= SpecialAbilityHeroMode
	MaxScanRange		= 200
	Query			= 1 ALL ENEMIES -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL
    End

    Behavior = SpecialPowerModule ModuleTag_ScreamStarter
        SpecialPowerTemplate      = SpecialAbilityBalrogScream
        UpdateModuleStartsAttack  = Yes
    End

    Behavior = ModelConditionSpecialAbilityUpdate ModuleTag_ScreamUpdate
        SpecialPowerTemplate    = SpecialAbilityBalrogScream
        UnpackTime              = 1500
        PreparationTime         = 1
        PackTime                = 1800
        AwardXPForTriggering    = 0
        WhichSpecialPower 	= 1
    End

    Behavior = AutoAbilityBehavior ModuleTag_ScreechAutoAbility
	SpecialAbility		= SpecialAbilityBalrogScream
	MaxScanRange		= 150
	Query			= 40 ALL ENEMIES -STRUCTURE -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL -FS_BASE_DEFENSE
    End

    Behavior = SpecialPowerModule ModuleTag_BreathStarter
        SpecialPowerTemplate        = SpecialAbilityBalrogBreath
        UpdateModuleStartsAttack    = Yes
        InitiateSound               = BalrogSpecialPowerRoar
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_BreathUpdate
        SpecialPowerTemplate    = SpecialAbilityBalrogBreath
        UnpackTime              = 1300
        PackTime                = 3700
        AwardXPForTriggering    = 0
        StartAbilityRange 	= 40.0
        SpecialWeapon 		= MordorBalrogBreath
        WhichSpecialWeapon 	= 1
    End

    Behavior = SpecialPowerModule ModuleTag_LeapStarter
        SpecialPowerTemplate        = SpecialAbilityBalrogWings
        UpdateModuleStartsAttack    = Yes
        InitiateSound               = BalrogSpecialPowerRoar
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_LeapUpdate
        SpecialPowerTemplate               = SpecialAbilityBalrogWings
        UnpackTime                         = 1733
        PackTime                           = 1160
        AwardXPForTriggering               = 0
        StartAbilityRange                  = 800.0
        ApproachRequiresLOS                = No
        SpecialWeapon                      = MordorBalrogLeap
        BusyForDuration                    = 4500
        WhichSpecialWeapon                 = 2
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = 120000
        MaxLifetime        = 120000
        DeathType          = FADED
    End

    Behavior = CreateObjectDie ModuleTag_CrushUnitsOnDeath
        CreationList = OCL_BalrogDie
    End





	Behavior = AISpecialPowerUpdate IgniteAI
		CommandButtonName = Command_SpecialAbilityIgnite
		SpecialPowerAIType = AI_SPELLBOOK_ALWAYS_FIRE
	End

	Behavior = AISpecialPowerUpdate FireWhipAI
		CommandButtonName = Command_SpecialAbilityFireWhip
		SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
		SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER_STRUCTURES
	End

	Behavior = AISpecialPowerUpdate ScreamAI
		CommandButtonName = Command_SpecialAbilityBalrogScream
		SpecialPowerRange = 100
		SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
	End

	Behavior = AISpecialPowerUpdate BreathAI
        	CommandButtonName = Command_SpecialAbilityBalrogBreath
        	SpecialPowerAIType = AI_SPELLBOOK_ARMY_BREAKER
        End

	Behavior = AISpecialPowerUpdate WingsAI
		CommandButtonName = Command_SpecialAbilityBalrogWings
		SpecialPowerAIType = AI_SPECIAL_POWER_RANGED_AOE_ATTACK
		SpecialPowerRadius = 50
	End

    Geometry            = CYLINDER
    GeometryMajorRadius = 30.0
    GeometryHeight      = 70.0
    GeometryIsSmall     = No
    Shadow              = SHADOW_VOLUME
    ShadowSizeX         = 100
    ShadowSizeY         = 100
    ShadowTexture       = ShadowI
End




Object NeutralGollum

    SelectPortrait = HPMaglorShadow
    ButtonImage    = HIMaglorShadow

    Draw = W3DScriptedModelDraw ModuleTag_01
        OkToChangeModelColor = Yes

        DefaultModelConditionState
            Model         	= eumagsha
            Skeleton            = GUTownsmn_SKL
            ParticleSysBone     = B_HANDL MaglorSilamrilSpark FollowBone:Yes
            ParticleSysBone     = None MaglorCloud02 FXTrigger:NONE Persist:SPAWN PersistID:100
            Shadow              = SHADOW_ALPHA_DECAL_DYNAMIC
            ShadowSizeX         = 65
            ShadowSizeY         = 65
            ShadowTexture       = exnekrosmoke
            ShadowOpacityStart  = 0
            ShadowOpacityFadeInTime = 1000
            ShadowOpacityPeak   = 220
            ShadowOpacityFadeOutTime = 1000
            ShadowOpacityEnd    = 0
            ShadowOverrideLODVisibility = Yes
        End



        IdleAnimationState
            Animation           = IDLA
                AnimationName     = GUTownsmn_IDLA
                AnimationMode     = ONCE
                AnimationPriority = 15
            End
        End

        AnimationState        = DYING DEATH_1
            Animation           = DIEA
                AnimationName     = GUTownsmn_DIEA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = DYING DEATH_2
            Animation           = DIEB
                AnimationName     = GUTownsmn_DIEA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = DYING SPLATTED
            Animation           = LNDA
                AnimationName     = GUTownsmn_LNDA
                AnimationMode     = ONCE
            End
        End

        AnimationState                = MOVING
            Animation                = WLKA
                AnimationName        = GUTownsmn_IWKA
                AnimationMode        = LOOP
            End
            Flags               = RANDOMSTART
            ParticleSysBone     = None InfantryDustTrails
        End
End



    Side                    = Neutral
    EditorSorting           = UNIT
    ThreatLevel             = 1.0
    EmotionRange            = 300
    BuildCost               = 10
    ShockwaveResistance     = SHOCKWAVE_RESISTANCE_ALWAYS
    TransportSlotCount      = TRANSPORTSLOTCOUNT_HERO
    VisionRange             = 500
    ShroudClearingRange     = 550
    MaxSimultaneousOfType   = 1
    CrushableLevel          = 0
    DisplayName             = OBJECT:MaglorShadow
    CommandSet              = NoldorMaglorCommandSet_Cursed
    CommandPoints           = 0

    ArmorSet
        Conditions          = None
        Armor               = MaglorShadowArmor
        DamageFX            = NormalDamageFX
    End

    SoundImpact                   = BodyFallGenericNoArmor

    #include "..\includes\StandardUnitEvaEvents.inc"

    EvaEnemyObjectSightedEvent    = GollumSeen

    ClientUpdate = EvaAnnounceClientCreate ModuleTag_AnnounceCreate
        AnnouncementEventEnemy = GollumSeen
        AnnouncementEventAlly  = GollumSeen
        AnnouncementEventOwner = GollumSeen

        OnlyIfVisible          = Yes
        UseObjectsPosition     = Yes
        CreateFakeRadarEvent   = No
    End

    EvaEventDetectedEnemy      = GollumSeen
    EvaEventDetectedAlly       = GollumSeen
    EvaEventDetectedOwner      = GollumSeen
	
    ClientUpdate = EvaAnnounceClientCreate ModuleTag_AnnounceCreate2
        AnnouncementEventEnemy = MaglorShadowLoopEva
        AnnouncementEventAlly  = MaglorShadowLoopEva
        AnnouncementEventOwner = MaglorShadowLoopEva

        OnlyIfVisible          = Yes
        UseObjectsPosition     = No
        CreateFakeRadarEvent   = No
    End

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Hero
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:FootstepDirtA             Animation:GUTownsmn_SKL.GUTownsmn_WLKA    Frames:1 3 28 31 46 59
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:GUTownsmn_SKL.GUTownsmn_DIEA    Frames:50
    End




    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE HERO NEUTRALGOLLUM

    Body = ActiveBody ModuleTag_02
        MaxHealth         = 3000
    End

    Behavior = AutoHealBehavior ModuleTag_HeroHealing
        StartsActive  		= Yes
        HealingAmount 		= 100
        HealingDelay  		= 1000
        StartHealingDelay       = 5000
        HealOnlyIfNotInCombat   = Yes
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes
        MoodAttackCheckRate        = 500
    End

    LocomotorSet
        Locomotor     = GondorCivilianLocomotor
        Condition     = SET_NORMAL
        Speed         = 20
    End

    LocomotorSet
        Locomotor     = GondorCivilianLocomotor
        Condition     = SET_WANDER
        Speed         = 25
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AfraidOf          = EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
        FearScanDistance  = ARCHER_FEAR_SCAN_RADIUS
        AddEmotion    =    FearIdle_Base
        AddEmotion    =    FearBusy_Base
        AddEmotion    =    Terror_Base
        AddEmotion    =    Doom_Base
        AddEmotion    =    Alert_Base
    End

    Behavior = InvisibilityUpdate ModuleTag_StealthForEscape
        InvisibilityNugget
            InvisibilityType            = CAMOUFLAGE
            ForbiddenConditions         = FIRING_ANY
            BecomeStealthedFX           = FX_ElvenCloakOn
            ExitStealthFX               = FX_ElvenCloakOff
            DetectionRange              = 50
            HintDetectableConditions    = IS_FIRING_WEAPON
      End
        StartsActive                    = Yes
        UpdatePeriod                    = 1500
    End

     Behavior = HitReactionBehavior ModuleTag_HitAnimModule
        HitReactionLifeTimer1 = 2500
        HitReactionThreshold1 = 0.0
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes            	= ALL -EXTRA_2 -EXTRA_3
        FadeDelay             	= 3000
        FadeTime              	= 3000
        DestructionDelay      	= 5000
        Sound                 	= INITIAL ElfGenericVoiceDie
        DeathFlags            	= DEATH_1
    End

    Behavior = SlowDeathBehavior ModuleTag_RingStolen
        DeathTypes 	 		= NONE +EXTRA_2
        DeathFlags       	= DEATH_2
        FadeDelay        	= 3000
        FadeTime         	= 3000
        DestructionDelay 		= 5000
        FX               	= INITIAL FX_EmotionCheer
    End

    Behavior = SlowDeathBehavior ModuleTag_FortressDestroyed
        DeathTypes 			= NONE +EXTRA_3
        DeathFlags       	= DEATH_2
        FadeDelay        	= 3000
        FadeTime         	= 3000
        DestructionDelay 		= 5000
        FX               	= INITIAL FX_EmotionCheer
    End

    Behavior = SquishCollide ModuleTag_06
    End

    Behavior = HordeMemberCollide ModuleTag_HMC
    End





	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TeleportEnabler
		SpecialPowerTemplate = SpecialAbilityMaglorBlink
	End

	Behavior = SpecialPowerModule ModuleTag_TeleportStarter
		SpecialPowerTemplate	 = SpecialAbilityMaglorBlink
		UpdateModuleStartsAttack = Yes
		TriggerFX		 = FX_Blink
		StartsPaused		 = No
	End

	Behavior = TeleportSpecialAbilityUpdate ModuleTag_TeleportUpdate
		SpecialPowerTemplate  =	SpecialAbilityMaglorBlink
		UnpackingVariation    = 1
		UnpackTime	      =	1800
		PackTime	      =	1800
		ApproachRequiresLOS   =	No
		BusyForDuration	      =	1800
		DestinationWeaponName =	CreateaHeroBlinkDestination
	End





    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName  = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName  = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName  = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate TeleportAI
		CommandButtonName = Command_SpecialAbilityMaglorTeleport
		SpecialPowerAIType = AI_SPECIAL_POWER_RANGED_AOE_ATTACK
		SpecialPowerRadius = 50
    End

    Scale 		= 1.2
    Geometry 		= CYLINDER
    GeometryMajorRadius = 12.0
    GeometryMinorRadius = 12.0
    GeometryHeight 	= 19.2
    GeometryIsSmall 	= Yes
    Shadow 		= SHADOW_DECAL
    ShadowSizeX 	= 20
    ShadowSizeY 	= 20
    ShadowTexture 	= ShadowI
End




ChildObject NeutralGollum_RingHero NeutralGollum

    MaxSimultaneousOfType = 1

    Behavior = CreateObjectDie ModuleTag_DropTheRing
        CreationList = OCL_TheOneRing
    End

    Behavior = AnimalAIUpdate ModuleTagWanderAround
        FleeRange            = 500
        FleeDistance         = 900
        WanderPercentage     = 80
        MaxWanderDistance    = 200
        MaxWanderRadius      = 999999
        UpdateTimer          = 1
        AfraidOfCastles      = Yes
    End
End


ChildObject NeutralGollum_RingHero2 NeutralGollum

    MaxSimultaneousOfType = 1

    Behavior = CreateObjectDie ModuleTag_DropTheRing
        CreationList = OCL_TheOneRing
    End

    Behavior = AnimalAIUpdate ModuleTagWanderAround
        FleeRange            = 400
        FleeDistance         = 1000
        WanderPercentage     = 90
        MaxWanderDistance    = 175
        MaxWanderRadius      = 999999
        UpdateTimer          = 1
        AfraidOfCastles      = Yes
    End
End


ChildObject NeutralGollum_RingHero3 NeutralGollum

    MaxSimultaneousOfType = 1

    Behavior = CreateObjectDie ModuleTag_DropTheRing
        CreationList = OCL_TheOneRing
    End

    Behavior = AnimalAIUpdate ModuleTagWanderAround
        FleeRange            = 600
        FleeDistance         = 1500
        WanderPercentage     = 85
        MaxWanderDistance    = 200
        MaxWanderRadius      = 999999
        UpdateTimer          = 1
        AfraidOfCastles      = Yes
    End
End

ChildObject NeutralGollum_RingStealer NeutralGollum

    ButtonImage = HIGollum
    SelectPortrait = HPGollumRingdieb

    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE CAN_CLIMB_WALLS

    CommandSet = NeutralGollumRingstealerCommandSet

    Behavior = AnimalAIUpdate ModuleTagWanderAround
        FleeRange           = 200
        FleeDistance        = 800
        WanderPercentage    = 80
        MaxWanderDistance   = 300
        MaxWanderRadius     = 999999
        UpdateTimer         = 1
    End

    MaxSimultaneousOfType = 1

    WeaponSet
        Conditions = None
        DefaultWeaponChoiceCritera = SELECT_AT_RANDOM
        ReadyStatusSharedWithinSet = Yes
        Weapon                = PRIMARY     GollumAttack
        OnlyAgainst           = PRIMARY     INFANTRY CAVALRY MONSTER HERO STRUCTURE SHIP MACHINE DOZER
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle    = Yes
        MoodAttackCheckRate           = 500
        AILuaEventsList               = NeutralGollum_RingStealerFunctions
    End

    ClientUpdate = EvaAnnounceClientCreate ModuleTag_AnnounceCreate
        AnnouncementEventEnemy = GollumRingDiebSeen
        AnnouncementEventAlly  = GollumRingDiebSeen
        AnnouncementEventOwner = GollumRingDiebSeen

        OnlyIfVisible 	       = Yes
        UseObjectsPosition     = Yes
        CreateFakeRadarEvent   = Yes
    End

    EvaEventDetectedEnemy       = GollumRingDiebSeen
    EvaEventDetectedAlly        = GollumRingDiebSeen
    EvaEventDetectedOwner       = GollumRingDiebSeen


    ThreatBreakdown MordorCatapult_DetailedThreat
        AIKindOf = CREEP_STRUCTURE
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    Behavior = CreateObjectDie ModuleTag_RespawnRingStealer
        DeathTypes           = ALL -EXTRA_2 -EXTRA_3
        CreationList         = OCL_TheRingStealerEgg
    End

    Behavior = CreateObjectDie ModuleTag_RespawnRingCarrier
        DeathTypes           = NONE +EXTRA_2
        CreationList         = OCL_TheRingCarrierEgg
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End
End



ChildObject NeutralGollum_RingStealerFrodo NeutralGollum

    ButtonImage = HIGollum
    SelectPortrait = HPGollumRingdieb

    CommandSet = NeutralGollumRingstealerCommandSet

    Behavior = AnimalAIUpdate ModuleTagWanderAround
        FleeRange           = 200
        FleeDistance        = 800
        WanderPercentage    = 80
        MaxWanderDistance   = 300
        MaxWanderRadius     = 999999
        UpdateTimer         = 1
    End

    MaxSimultaneousOfType = 1

    WeaponSet
        Conditions = None
        DefaultWeaponChoiceCritera = SELECT_AT_RANDOM
        ReadyStatusSharedWithinSet = Yes
        Weapon                = PRIMARY     GollumRingstehlenAttackeFrodo
        OnlyAgainst           = PRIMARY     GANDALF
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle    = Yes
        MoodAttackCheckRate           = 500
        AILuaEventsList               = NeutralGollum_RingStealerFrodoFunctions
    End

    ClientUpdate = EvaAnnounceClientCreate ModuleTag_AnnounceCreate
        AnnouncementEventEnemy = GollumRingDiebSeen
        AnnouncementEventAlly  = GollumRingDiebSeen
        AnnouncementEventOwner = GollumRingDiebSeen

        OnlyIfVisible 	       = Yes
        UseObjectsPosition     = Yes
        CreateFakeRadarEvent   = Yes
    End

    EvaEventDetectedEnemy      = GollumRingDiebSeen
    EvaEventDetectedAlly       = GollumRingDiebSeen
    EvaEventDetectedOwner      = GollumRingDiebSeen


    ThreatBreakdown MordorCatapult_DetailedThreat
        AIKindOf = CREEP_STRUCTURE
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    Body = ActiveBody ModuleTag_02
        MaxHealth         = 1000
    End

    Behavior = CreateObjectDie ModuleTag_RespawnRingStealer
        DeathTypes           = ALL -EXTRA_2 -EXTRA_3
        CreationList         = OCL_TheRingStealerFrodoEgg
    End

    Behavior = CreateObjectDie ModuleTag_RespawnRingCarrier
        DeathTypes           = NONE +EXTRA_2
        CreationList         = OCL_TheRingCarrierFrodoEgg
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End
End


Object MordorShelob


    SelectPortrait = HPShelobNew
    ButtonImage    = HIShelob

    Draw = W3DScriptedModelDraw ModuleTag_01

      OkToChangeModelColor = Yes

        DefaultModelConditionState
            Model                   = MUShelob_SKN
            Skeleton                = MUShelob_SKL
        End

        IdleAnimationState
            Animation                = IDLA
                AnimationName        = MUShelob_IDLA
                AnimationMode        = ONCE
            End
        End


        AnimationState        = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = MUShelob_FLYA
                AnimationMode      = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED
            Animation           = Stun
                AnimationName     = MUShelob_LNDA
                AnimationMode      = ONCE
            End
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName     = MUShelob_GTPA
                AnimationMode      = ONCE
            End
        End


        AnimationState                = DYING
            Animation                = DIEA
                AnimationName        = MUShelob_DIEA
                AnimationMode        = ONCE
            End
        End


        AnimationState                = TURN_LEFT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = MUShelob_TRNL
                AnimationMode        = LOOP
            End
        End

        AnimationState                = TURN_RIGHT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = MUShelob_TRNR
                AnimationMode        = LOOP
            End
        End

        AnimationState                = MOVING BACKING_UP
            Animation                = BAKA
                AnimationName        = MUShelob_BAKA
                AnimationMode        = LOOP
            End
            Flags                    = RANDOMSTART
        End

        AnimationState                =    MOVING ATTACKING
            Animation                =    RUNA
                AnimationName        =    MUShelob_RUNA
                AnimationMode        =    LOOP
                Distance            =    21
            End
        End
        AnimationState                =    MOVING
            Animation                =    WLKA
                AnimationName        =    MUShelob_WLKA
                AnimationMode        =    LOOP
                Distance            =    21
            End
        End


        AnimationState                = FIRING_OR_PREATTACK_A
            Animation                = ATKA
                AnimationName        = MUShelob_ATKA
                AnimationMode        = ONCE
            End
        End

        AnimationState                =    SELECTED
            Animation           = IDLA
                AnimationName     = MUShelob_IDLA
                AnimationMode     = ONCE
                AnimationPriority = 1
            End
            Animation           = IDLA
                AnimationName     = MUShelob_IDLA
                AnimationMode     = ONCE
                AnimationPriority = 1
            End
            Animation                =    AtAttention
                AnimationName        =    MUShelob_ATNA
                AnimationMode        =    ONCE
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState = HIT_REACTION HIT_LEVEL_1
            Animation = Hit_Level_1_a
                AnimationName = MUShelob_HITA
                AnimationMode = ONCE
            End
        End
    End


    Side = Neutral
    EditorSorting = UNIT
    ThreatLevel = 1.0
    TransportSlotCount = TRANSPORTSLOTCOUNT_MONSTER
    WeaponSet
        Conditions = None
        Weapon = PRIMARY    ShelobMandibles
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End
    ArmorSet
        Conditions      = None
        Armor           = ShelobArmor
        DamageFX        = NormalDamageFX
    End
    VisionRange = 120.0
    DisplayName = OBJECT:NeutralShelob
    CrushableLevel = 2
    CommandSet = ShelobCommandSet





    VoiceAttack            = ShelobVoiceAttack
    VoiceAttackCharge        = ShelobVoiceAttack
    VoiceAttackMachine        = ShelobVoiceAttack
    VoiceAttackStructure        = ShelobVoiceAttack
    VoiceCreated            = ShelobVoiceSelect
    VoiceFullyCreated         = ShelobVoiceSelect
    VoiceMove            = ShelobVoiceMove
    VoiceMoveToCamp            = ShelobVoiceMove
    VoiceMoveWhileAttacking        = ShelobVoiceMove
    VoicePriority            = 50
    VoiceRetreatToCastle        = ShelobVoiceDie
    VoiceSelect            = ShelobVoiceSelect
    VoiceSelectBattle         = ShelobVoiceSelect
    VoiceGuard            = ShelobVoiceMove


    SoundAmbient            = ShelobVoiceSinglesLoop
    SoundImpact            = ImpactHorse





    #include "..\includes\StandardUnitEvaEvents.inc"

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_TRNL     Frames:1 11
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_TRNR     Frames:1 11
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_WLKA     Frames:1 17 33
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_RUNA     Frames:1 5 9
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_GTPA     Frames:1 16
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_ATKA     Frames:0 39
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_ATKB     Frames:0 100
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_TRNL     Frames:0 5 10 15
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_TRNR     Frames:0 5 10 15
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_WLKA     Frames:0 8 16 24 32 40
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_RUNA     Frames:0 4 8
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_GTPA     Frames: 10 20
        AnimationSound = Sound: ShelobFootstepAttack     Animation:MUShelob_SKL.MUShelob_ATKA     Frames:26
        AnimationSound = Sound: ShelobFootstepAttack     Animation:MUShelob_SKL.MUShelob_ATKB     Frames:26
        AnimationSound = Sound: ShelobVoiceHurt     Animation:MUShelob_SKL.MUShelob_HITA    Frames:0
        AnimationSound = Sound: ShelobAttackScreech    Animation:MUShelob_SKL.MUShelob_ATKA    Frames:20
        AnimationSound = Sound: ShelobAttackScreech    Animation:MUShelob_SKL.MUShelob_ATKB    Frames:20
        AnimationSound = Sound: TrollBodyfall        Animation:MUShelob_SKL.MUShelob_LNDA    Frames:2
        AnimationSound = Sound: TrollBodyfall        Animation:MUShelob_SKL.MUShelob_DIEA    Frames:6


    End


    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_EACH_OTHER HERO CAN_CLIMB_WALLS

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes
        MoodAttackCheckRate        = 500
        AILuaEventsList                = ShelobFunctions
        MaxCowerTime                =    7500
        MinCowerTime                =    5000
    End

       Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion    =    Terror_Base
        AddEmotion    =    OVERRIDE UncontrollableFear_Base_Evil
            Duration            =    7000
        End
        AddEmotion    =    Alert_Base
        IgnoreVeterancy = Yes
    End

    LocomotorSet
        Locomotor     = ShelobWallScalingLocomotor
        Condition     = SET_NORMAL
        Speed         = 50
    End

    Body = RespawnBody ModuleTag_RespawnBody
        MaxHealth         = 4500
        PermanentlyKilledByFilter    = NONE
    End
	
    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                    = STUNNED
        DeathAnimationTime            = 1133
        RespawnAnim                    = SELECTED
        RespawnFX                    = FX_Resurrection
        RespawnAnimationTime        = 2000
        AutoRespawnAtObjectFilter    = NONE +CASTLE_KEEP
        ButtonImage                    = HIShelob

        RespawnRules =                AutoSpawn:No    Cost:600        Time:12000        Health:100%
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 1000
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL
        SinkDelay = 2500
        SinkRate = 3.00
        DestructionDelay = 20000
        FX = INITIAL FX_GiantSpiderDie
        Sound = INITIAL ShelobVoiceDie
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 2000
        HitReactionThreshold1 = 1.0
    End

      Behavior = SpecialPowerModule ModuleTag_EatStarter
        SpecialPowerTemplate      = SpecialPowerEat
        UpdateModuleStartsAttack  = Yes
    End
    Behavior = SpecialAbilityUpdate ModuleTag_EatUpdate
        SpecialPowerTemplate        = SpecialPowerEat
        StartAbilityRange            = 15.0
        PreparationTime                = 1
        PackTime                    = 3667
        TriggerAttributeModifier    = ShelobSelfHealWhileEating
        AttributeModifierDuration    = 3600
        KillAttributeModifierOnExit = Yes
    End

    Behavior = AutoHealBehavior ModuleTag_SarumanHealing
        StartsActive = Yes
        HealingAmount = 50
        HealingDelay = 1000
        StartHealingDelay = 10000
        HealOnlyIfNotInCombat = Yes
    End

    Geometry = CYLINDER
    GeometryMajorRadius = 25.0
    GeometryMinorRadius = 25.0
    GeometryHeight = 30.0
    GeometryIsSmall = No
    Shadow = SHADOW_DECAL
    ShadowSizeX = 47
    ShadowSizeY = 30
    ShadowOffsetX = -4
    ShadowTexture = ShadowSpider2
End

ChildObject MordorShelobNoFear MordorShelob

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes
        MoodAttackCheckRate        = 500
        AILuaEventsList                = None
        MaxCowerTime                =    7500
        MinCowerTime                =    5000
    End

    Body = RespawnBody ModuleTag_RespawnBody
        MaxHealth         = 3500
        PermanentlyKilledByFilter    = NONE
    End

       Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion    =    Alert_Base
    End

    LocomotorSet
        Locomotor     = ShelobWallScalingLocomotor
        Condition     = SET_NORMAL
        Speed         = 60
    End
End




Object RohanOathbreaker

    SelectPortrait         = UPOathBreakers

    Draw = W3DScriptedModelDraw ModuleTag_01
        DefaultModelConditionState

            Model               = RUPsnt_1_SKN
            Skeleton            = RUPsnt_1_SKL
        End
    End






    Side = Neutral
    IsTrainable = No
    EditorSorting = UNIT
    BuildVariations = RohanOathbreaker1 RohanOathbreaker2 RohanOathbreaker3
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT






End



Object RohanOathbreaker1


    SelectPortrait         = UPOathBreakers

    Draw = W3DHordeModelDraw ModuleTag_01

        DefaultModelConditionState
            Model               = RUOath3A_SKN
            Skeleton            = RUOath3_SKL
            ParticleSysBone = NONE AODTrails FollowBone:No
         End

        IdleAnimationState
            StateName                = STATE_Idle
            Animation                = IDLA
                AnimationName       = RUOath3_IDLB
                AnimationMode       = ONCE
                AnimationSpeedFactorRange = 0.9 1.1
                AnimationBlendTime    = 20
            End
        End


        AnimationState        = DYING
            Animation           = RUNA
                AnimationName     = RUOath3A_DIEA
            End
            EnteringStateFX = FX_AODDeath
        End

        AnimationState        = JUST_BUILT
            Animation           = Built
                AnimationName     = RUOath3A_DIEA
                AnimationMode        = ONCE_BACKWARDS
            End
            Flags                    = START_FRAME_LAST
            EnteringStateFX = FX_AODDeath
        End

        AnimationState        =  OATH_FULLFILLED
            Animation           = WLK
                AnimationName     = RUOath3_WLKA
                AnimationMode     = LOOP
            End
            ParticleSysBone = NONE AODtrackingLightShafts
        End

        AnimationState        =  ATTACKING
            Animation           = ATA1
                AnimationName     = RUOath3_ATKA
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 0.75 1.25
            End
        End

        AnimationState        =  FIRING_A
            Animation           = ATA1
                AnimationName     = RUOath3_ATKA
                AnimationMode     = LOOP
            End
        End

        AnimationState        = MOVING
            Animation           = RUNA
                AnimationName     = RUOath3_RUNA
                AnimationMode     = LOOP
            End
            Flags               = RANDOMSTART
        End

    End


    Side = Neutral
    IsTrainable = No
    EditorSorting = UNIT
    ThreatLevel = 3.0
    ThingClass = HORDE_UNIT
    CommandPoints = 0

    EmotionRange = 0

    TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT
    WeaponSet
        Conditions = None
        Weapon = PRIMARY    OathbreakerSword
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End
    ArmorSet
        Conditions      = None
        Armor           = OathBreakerArmor
        DamageFX        = NormalDamageFX
    End
    VisionRange = 81
    DisplayName = OBJECT:Oathbreaker
    CrushableLevel = 5


    ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS

    CommandSet = GondorFighterCommandSet
    EquivalentTo = RohanOathbreaker



    VoiceAttack            = OathbreakerVoxSelect


    VoiceMove            = OathbreakerVoxSelect
    VoicePriority        = 15
    VoiceSelect            = OathbreakerVoxSelect

    SoundImpact            = ImpactHorse

    UnitSpecificSounds
        VoiceGarrison                        = OathbreakerVoxSelect
        VoiceEnterUnitElvenTransportShip    = OathbreakerVoxSelect
        VoiceEnterUnitEvilMenTransportShip    = OathbreakerVoxSelect
        VoiceEnterUnitMordorMumakil            = OathbreakerVoxSelect
        VoiceEnterUnitSlaughterHouse        = OathbreakerVoxSelect
        VoiceInitiateCaptureBuilding        = OathbreakerVoxSelect
    End

    #include "..\includes\StandardUnitEvaEvents.inc"


    EvaEnemyObjectSightedEvent    = DiscoveredEnemyOathbreaker

    ClientUpdate = EvaAnnounceClientCreate ModuleTag_CreateAnnounce
        AnnouncementEventEnemy = DiscoveredEnemyOathbreaker
        AnnouncementEventAlly = None
        AnnouncementEventOwner = None

        OnlyIfVisible = Yes
        CountAsFirstSightedAnnoucement = Yes
        UseObjectsPosition = No
        CreateFakeRadarEvent = Yes
    End


    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT ATTACK_NEEDS_LINE_OF_SIGHT ARMY_OF_DEAD

    Body = ActiveBody ModuleTag_02
        MaxHealth         = 2000
        MaxHealthDamaged  = 2000

    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle    =    Yes ATTACK_BUILDINGS
        MoodAttackCheckRate            =    500
    End

    LocomotorSet
        Locomotor = ArmyOfTheDeadLocomotor
        Condition = SET_NORMAL
        Speed     = AOD_MEMBER_SPEED
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = OATHBREAKER_LIFETIME
        MaxLifetime        = OATHBREAKER_LIFETIME
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStunnedTimeLow        = 1400
        ShockStunnedTimeHigh    = 2400
        ShockStandingTime        = 2400
    End

    Behavior = SlowDeathBehavior ModuleTag_SlowDeath_01
        DeathTypes = ALL


        DestructionDelay = 3000
        FadeTime = 1000
        FadeDelay = 1000

    End


    Behavior = OathbreakersFadeAwayBehavior ModuleTag_05
        FadeOutTime   = 3500
    End

    Behavior = AODCrushCollide ModuleTag_06
        SmallFXList = FX_AODHitSmall
        MediumFXList = FX_AODHitMedium




        Damage = 20
        DamageType = MAGIC
        DeathType = SUPERNATURAL

        SpecialObject = NONE +MordorBalrog +GondorAragorn +GondorAragornEntwicklung1 +GondorAragornEntwicklung2 +GondorAragornEntwicklung3 +GondorAragornEntwicklung4 -SELECTABLE -CAVALRY -INFANTRY -HERO -MONSTER
        SpecialDamage = 5.0
        SpecialDamageType = MAGIC
        SpecialDeathType = CRUSHED

        SelfDamage = 9999.0
        SelfDamageType = FLAME
        SelfDeathType = BURNED
    End


    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Oathbreaker
    End

    Geometry = CYLINDER
    GeometryMajorRadius = 12.0
    GeometryMinorRadius = 12.0
    GeometryHeight = 19.2
    GeometryIsSmall = No





End



ObjectReskin RohanOathbreaker2 RohanOathbreaker1


    Draw = W3DHordeModelDraw ModuleTag_01

        DefaultModelConditionState
            Model               = RUOath3B_SKN
            Skeleton            = RUOath3_SKL
            ParticleSysBone = NONE AODTrails FollowBone:No
         End

        IdleAnimationState
            StateName                = STATE_Idle
            Animation                = IDLA
                AnimationName       = RUOath3B_IDLB
                AnimationMode       = ONCE
                AnimationSpeedFactorRange = 0.9 1.1
                AnimationBlendTime    = 20
            End
        End

        AnimationState        = DYING
            Animation           = RUNA
                AnimationName     = RUOath3B_DIEA
            End
            EnteringStateFX = FX_AODDeath
        End

        AnimationState        = JUST_BUILT
            Animation           = Built
                AnimationName     = RUOath3A_DIEA
                AnimationMode        = ONCE_BACKWARDS
            End
            Flags                    = START_FRAME_LAST
            EnteringStateFX = FX_AODDeath
        End

        AnimationState        =  OATH_FULLFILLED
            Animation           = WLK
                AnimationName     = RUOath3B_WLKA
                AnimationMode     = LOOP
            End
                ParticleSysBone = NONE AODtrackingLightShafts
        End

        AnimationState        =  ATTACKING
            Animation           = ATA1
                AnimationName     = RUOath3B_ATKA
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 0.75 1.25
            End
        End

        AnimationState        =  FIRING_A
            Animation           = ATA1
                AnimationName     = RUOath3B_ATKA
                AnimationMode     = LOOP
            End
        End

        AnimationState        = MOVING
            Animation           = RUNA
                AnimationName     = RUOath3B_RUNA
                AnimationMode     = LOOP
            End
            Flags               = RANDOMSTART
        End
    End
End



ObjectReskin RohanOathbreaker3 RohanOathbreaker1


    Draw = W3DHordeModelDraw ModuleTag_01

        DefaultModelConditionState
            Model               = RUOath3C_SKN
            Skeleton            = RUOath3_SKL
            ParticleSysBone = NONE AODTrails FollowBone:No
         End

        IdleAnimationState
            StateName                = STATE_Idle
            Animation                = IDLA
                AnimationName       = RUOath3C_IDLB
                AnimationMode       = ONCE
                AnimationSpeedFactorRange = 0.9 1.1
                AnimationBlendTime    = 20
            End
        End

        AnimationState        = DYING
            Animation           = RUNA
                AnimationName     = RUOath3C_DIEA
            End
            EnteringStateFX = FX_AODDeath
        End

        AnimationState        = JUST_BUILT
            Animation           = Built
                AnimationName     = RUOath3A_DIEA
                AnimationMode        = ONCE_BACKWARDS
            End
            Flags                    = START_FRAME_LAST
            EnteringStateFX = FX_AODDeath
        End

        AnimationState        =  OATH_FULLFILLED
            Animation           = WLK
                AnimationName     = RUOath3C_WLKA
                AnimationMode     = LOOP
            End
            ParticleSysBone = NONE AODtrackingLightShafts
        End

        AnimationState        =  ATTACKING
            Animation           = ATA1
                AnimationName     = RUOath3C_ATKA
                AnimationMode     = LOOP
                AnimationSpeedFactorRange = 0.75 1.25
            End
        End

        AnimationState        =  FIRING_A
            Animation           = ATA1
                AnimationName     = RUOath3C_ATKA
                AnimationMode     = LOOP
            End
        End

        AnimationState        = MOVING
            Animation           = RUNA
                AnimationName     = RUOath3C_RUNA
                AnimationMode     = LOOP
            End
            Flags               = RANDOMSTART
        End
    End
End



Object RohanOathbreakersCavalry




    SelectPortrait         = UPOathBreakers

    Draw = W3DScriptedModelDraw ModuleTag_01
        StaticModelLODMode = Yes


        DefaultModelConditionState
            Model           = ruothhrse_skna
            ParticleSysBone = NONE AODTrails FollowBone:No
        End


        IdleAnimationState
            Animation                =    IdleA
                AnimationName        =    RURohrm_SKL.RURohrm_IDLA
                AnimationPriority    =    20
                AnimationMode        =    ONCE
                AnimationBlendTime    =    15
            End
            Animation                =    IdleB
                AnimationName        =    RURohrm_SKL.RURohrm_IDLB
                AnimationMode        =    ONCE
                AnimationBlendTime    =    15
            End
        End

        AnimationState                =    PASSENGER
            Animation                =    grabbed
                AnimationName        =    RURohrm_SKL.RURohrm_GBDA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState                    =    ATTACKING
            Animation                    =    ATA1
                AnimationName            =    RURohrm_SKL.RURohrm_ATRB
                AnimationMode            =    LOOP
            End
        End

        AnimationState                    =    FIRING_A
            Animation                    =    ATA1
                AnimationName            =    RURohrm_SKL.RURohrm_ATRB
                AnimationMode            =    LOOP
            End
        End


        AnimationState        =  OATH_FULLFILLED
            Animation           = WLK
                AnimationName     = RURohrm_WLKA
                AnimationMode     = LOOP
            End
            ParticleSysBone = NONE AODtrackingLightShafts
        End



        AnimationState                =    FREEFALL
            Animation                =    free fall
                AnimationName        =    RURohrm_SKL.RURohrm_FLYB
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState                =    STUNNED_FLAILING
            Animation                =    JustDie
                AnimationName        =    RURohrm_SKL.RURohrm_FLYC
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState                =    STUNNED
            Animation                =    Land
                AnimationName        =    RURohrm_SKL.RURohrm_LNDA
                AnimationMode        =    ONCE
            End
        End

        AnimationState                =    STUNNED_STANDING_UP
            Animation                =    StandUp
                AnimationName        =    RURohrm_SKL.RURohrm_GTPA
                AnimationMode        =    ONCE
            End
        End


        AnimationState                =    DYING
            Animation                =    JustDie
                AnimationName        =    RURohrm_SKL.RURohrm_DIEA
                AnimationMode        =    ONCE
            End
            EnteringStateFX = FX_AODDeath
        End


        AnimationState                =    DEATH_2
            Animation                =    JustDie
                AnimationName       =    RURohrm_SKL.RURohrm_DIEB
                AnimationMode       =    ONCE
            End
            EnteringStateFX = FX_AODDeath
        End

        AnimationState = MOVING ENGAGED
            Animation = Moving_Engaged
                AnimationName = RURohrm_SKL.RURohrm_RUNC
                AnimationMode = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState                =    TURN_LEFT_HIGH_SPEED
            Animation                =    TurnLeft
                AnimationName        =    RURohrm_SKL.RURohrm_TNL1
                AnimationMode        =    LOOP

                AnimationBlendTime    =    20
            End
        End

        AnimationState                =    TURN_RIGHT_HIGH_SPEED
            Animation                =    TurnLeft
                AnimationName        =    RURohrm_SKL.RURohrm_TNR1
                AnimationMode        =    LOOP

                AnimationBlendTime    =    20
            End
        End

        AnimationState                = MOVING WANDER
            Animation                = WLKA
                AnimationName        = RURohrm_SKL.RURohrm_WLKA
                AnimationMode        = LOOP
            End
        End

        AnimationState                =    MOVING TURN_LEFT
            Animation                =    TurnLeft
                AnimationName        =    RURohrm_SKL.RURohrm_TRNL
                AnimationMode        =    LOOP
            End
        End

        AnimationState                =    MOVING TURN_RIGHT
            Animation                =    TurnRight
                AnimationName        =    RURohrm_SKL.RURohrm_TRNR
                AnimationMode        =    LOOP
            End
        End

        AnimationState                =    MOVING ACCELERATE
            Animation                =    Accelerate
                AnimationName        =    RURohrm_SKL.RURohrm_ACCL
                AnimationMode        =    LOOP
            End
        End

        AnimationState                =    MOVING DECELERATE
            Animation                =    Decelerate
                AnimationName        =    RURohrm_SKL.RURohrm_DECL
                AnimationMode        =    ONCE
            End
        End

        AnimationState                =    MOVING
            Animation                =    RunA
                AnimationName        =    RURohrm_SKL.RURohrm_RUNA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState                =    SELECTED
            SimilarRestart            =   Yes
            Animation                =    AtAttention
                AnimationName        =    RURohrm_SKL.RURohrm_ATNA
                AnimationMode        =    ONCE
            End
        End
    End

    ShockwaveResistance = SHOCKWAVE_RESISTANCE_IMMUNE



    Side = Neutral
    IsTrainable = No
    EditorSorting = UNIT
    ThreatLevel = 2.0
    CommandPoints = 0

    EmotionRange = 0

    TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT

    ArmorSet
        Conditions      = None
        Armor           = OathBreakerArmor
        DamageFX        = NormalDamageFX
    End

    WeaponSet
        Conditions = None
        Weapon = PRIMARY    OathbreakerSwordMounted
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI


    End

    VisionRange = 280.0
    DisplayName = OBJECT:Oathbreaker
    CrushableLevel = 5

    CommandSet = GondorFighterCommandSet



    #include "..\includes\StandardUnitEvaEvents.inc"

    VoiceAttack            = OathbreakerVoxSelect


    VoiceMove            = OathbreakerVoxSelect
    VoicePriority        = 16
    VoiceSelect            = OathbreakerVoxSelect


    SoundCrushing        = RohirrimCrushing
    SoundImpact            = ImpactHorse
    SoundMoveStart        = GondorHorseMoveStart

    UnitSpecificSounds
        VoiceGarrison                        = OathbreakerVoxSelect
        VoiceEnterUnitElvenTransportShip    = OathbreakerVoxSelect
        VoiceEnterUnitEvilMenTransportShip    = OathbreakerVoxSelect
        VoiceEnterUnitMordorMumakil            = OathbreakerVoxSelect
        VoiceEnterUnitSlaughterHouse        = OathbreakerVoxSelect
        VoiceInitiateCaptureBuilding        = OathbreakerVoxSelect
    End


    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Oathbreaker
    End


    EvaEnemyObjectSightedEvent    = DiscoveredEnemyOathbreaker

    ClientUpdate = EvaAnnounceClientCreate ModuleTag_CreateAnnounce
        AnnouncementEventEnemy = DiscoveredEnemyOathbreaker
        AnnouncementEventAlly = None
        AnnouncementEventOwner = None

        OnlyIfVisible = Yes
        CountAsFirstSightedAnnoucement = Yes
        UseObjectsPosition = No
        CreateFakeRadarEvent = Yes
    End


    RadarPriority = UNIT
    ThingClass = CAVALRY_UNIT

    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS CAVALRY SCORE INFANTRY ARMY_OF_DEAD

    Body = ActiveBody ModuleTag_02
        MaxHealth         = 2000
        MaxHealthDamaged  = 2000

    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle    =    Yes ATTACK_BUILDINGS
        MoodAttackCheckRate            =    500
    End


    LocomotorSet
        Locomotor = HorseLocomotor
        Condition = SET_NORMAL
        Speed     = AOD_MEMBER_CAVALRY_SPEED
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStunnedTimeLow        = 1400
        ShockStunnedTimeHigh    = 2400
        ShockStandingTime        = 2400
    End

    Behavior = OathbreakersFadeAwayBehavior ModuleTag_05
        FadeOutTime   = 3500
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = OATHBREAKER_LIFETIME
        MaxLifetime        = OATHBREAKER_LIFETIME
    End


    Behavior = AODCrushCollide ModuleTag_06
        SmallFXList = FX_AODHitSmall
        MediumFXList = FX_AODHitMedium




        Damage = 20
        DamageType = MAGIC
        DeathType = SUPERNATURAL

        SpecialObject = NONE +MordorBalrog +GondorAragorn +GondorAragornEntwicklung1 +GondorAragornEntwicklung2 +GondorAragornEntwicklung3 -SELECTABLE -CAVALRY -INFANTRY -HERO -MONSTER
        SpecialDamage = 5.0
        SpecialDamageType = MAGIC
        SpecialDeathType = CRUSHED

        SelfDamage = 9999.0
        SelfDamageType = FLAME
        SelfDeathType = BURNED
    End


    Behavior = SlowDeathBehavior ModuleTag_08
        DeathTypes = ALL
        SinkDelay = 1000
        SinkRate = 1.40
        DestructionDelay = 10000

        DeathFlags = DEATH_2

    End

    Geometry = CYLINDER
    GeometryMajorRadius = 10.4
    GeometryMinorRadius = 10.4
    GeometryHeight = 20.0
    GeometryIsSmall = No





End




Object Marker


    Draw = W3DScriptedModelDraw ModuleTag_01
        OkToChangeModelColor = Yes
        NoRotate = Yes

        DefaultModelConditionState
            Model           = MUSauronEye
        End

    End


    Side = Neutral
    EditorSorting    = UNIT
    ThreatLevel        = 1.0
    CommandPoints    = 0

    VisionRange        = 200.0
    DisplayName        = OBJECT:Marker

    CommandSet        = EmptyCommandSet


      EvaEnemyObjectSightedEvent = None


    RadarPriority = UNIT
    KindOf = SELECTABLE NO_COLLIDE AIRCRAFT UNATTACKABLE MOVE_ONLY CLICK_THROUGH HERO IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION

    Body = ActiveBody ModuleTag_02
        MaxHealth         = 200000
        MaxHealthDamaged  = 100000

    End

    Behavior = AIUpdateInterface    ModuleTag_AIUpdateInterface
    End

    Behavior = PhysicsBehavior        ModuleTag_PhysicsBehavior
    End

    LocomotorSet
        Locomotor = EyeLocomotor
        Condition = SET_NORMAL
        Speed     = 200
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = 60000
        MaxLifetime        = 60000
    End


    Geometry = CYLINDER
    GeometryMajorRadius = 1.0
    GeometryMinorRadius = 1.0
    GeometryHeight        = 1.0
    GeometryIsSmall        = Yes

    Shadow            = SHADOW_ADDITIVE_DECAL_DYNAMIC
    ShadowSizeX        = 400
    ShadowSizeY        = 400
    ShadowTexture    = EXLnzFlar1

    ShadowOpacityStart = 0
    ShadowOpacityFadeInTime = 1000
    ShadowOpacityPeak = 255
    ShadowOpacityFadeOutTime = 1000
    ShadowOpacityEnd = 0
End




Object Crebain

    ButtonImage         = HICrebain
    SelectPortrait      = UPCrebain

    Draw = W3DHordeModelDraw ModuleTag_01

        WadingParticleSys = EntRipples

        StaticModelLODMode = Yes

        DefaultModelConditionState
            Model                    = Crebain_SKN
        End

        IdleAnimationState
            StateName                = Idle
            Animation                = IdleA
                AnimationName       = Crebain_SKL.Crebain_IDL
                AnimationMode       = LOOP
                AnimationBlendTime  = 30
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = JUST_BUILT
            StateName                = State_JustBuilt
            Animation
                AnimationName        = Crebain_SKL.Crebain_SMNA
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
        End

        AnimationState                = DYING DEATH_1
            Animation
                AnimationName        = Crebain_SKL.Crebain_SMNB
                AnimationMode        = ONCE
                AnimationBlendTime    = 15
            End
        End


        AnimationState                = MOVING
            Animation                = RunA
                AnimationName       = Crebain_SKL.Crebain_MOV
                AnimationMode       = LOOP
                AnimationBlendTime  = 30

            End
        End

        AnimationState                =    SELECTED
            StateName                =    State_Selected
            Animation                =    AtAttention
                AnimationName        =    Crebain_SKL.Crebain_IDL
                AnimationMode        =    LOOP
                AnimationBlendTime  = 30
            End
        End

    End




    Side            = Neutral
    EditorSorting    = UNIT
    ThreatLevel        = 0.0
    CommandPoints    = 0
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_IMMUNE

    VisionRange        = 200.0
    DisplayName        = OBJECT:Crebain

    CommandSet        = EmptyCommandSet

    ArmorSet
        Conditions        = None
        Armor             = InvulnerableArmor
    End



    EvaEnemyObjectSightedEvent = None

    SoundAmbient = CrebainAmbientLoop
    SoundMoveStart = CrebainSelect

    VoiceSelect = CrebainSelect




    RadarPriority = UNIT
    KindOf = SELECTABLE NO_COLLIDE MONSTER MOVE_ONLY HERO IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION IGNORES_SELECT_ALL SUMMONED SCORE UNATTACKABLE NOT_AUTOACQUIRABLE NO_BASE_CAPTURE
    SelectionPriority = SELECTION_PRIORITY_CREBAIN

    Body = ActiveBody ModuleTag_02
        MaxHealth         = 1500
        MaxHealthDamaged  = 750
    End

    Behavior = AIUpdateInterface    ModuleTag_AIUpdateInterface
    End

    Behavior = PhysicsBehavior        ModuleTag_PhysicsBehavior
    End

    LocomotorSet
        Locomotor = CrebainLocomotor
        Condition = SET_NORMAL
        Speed     = 200
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = 30000
        MaxLifetime        = 30000
    End


    Behavior = AttributeModifierAuraUpdate ModuleTag_FearMe
        StartsActive    = Yes
        BonusName        = EyeOfSauronFear
        RefreshDelay    = 1000
        Range            = 150.0
        ObjectFilter    = ANY +INFANTRY +CAVALRY
        TargetEnemy        = Yes
        MaxActiveRank    = 1
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Debuff
        StartsActive    = Yes
        BonusName        = GenericDebuff
        AntiCategory    = LEADERSHIP
        Range            = 150
        RefreshDelay    = 2000
        ObjectFilter    = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HORDE -HERO
        TargetEnemy        = Yes
    End


    Behavior = StealthDetectorUpdate StealthDetectorUpdateModuleTag
        DetectionRate        = 500
    End

    Behavior = SlowDeathBehavior ModuleTag_NormalDeath
        DeathTypes            = ALL
        DeathFlags            = DEATH_1
        DestructionDelay    = 2000
        SinkDelay            = 2000

        Sound = INITIAL SpellGenericUnsummonFasterMS
    End

    Geometry = CYLINDER
    GeometryMajorRadius = 50.0
    GeometryMinorRadius = 50.0
    GeometryHeight        = 61.0
    GeometryIsSmall        = No

    AttackContactPoint  = X:40 Y:40 Z:60
    AttackContactPoint  = X:-40 Y:40 Z:60
    AttackContactPoint  = X:-40 Y:-40 Z:60
    AttackContactPoint  = X:40 Y:-40 Z:60

    Shadow            = SHADOW_ADDITIVE_DECAL_DYNAMIC
    ShadowSizeX        = 400
    ShadowSizeY        = 400
    ShadowTexture    = MUSauronEye

    ShadowOpacityStart = 0
    ShadowOpacityFadeInTime = 1000
    ShadowOpacityPeak = 255
    ShadowOpacityFadeOutTime = 1000
    ShadowOpacityEnd = 0

    ShadowOverrideLODVisibility = Yes
End


ObjectReskin WildCaveBats Crebain



    ButtonImage        = HICaveBats
    SelectPortrait         = UPBatCloud

    Draw = W3DHordeModelDraw ModuleTag_01


        WadingParticleSys = EntRipples

        StaticModelLODMode = Yes

        DefaultModelConditionState
            Model                    = Bats_SKN
        End

        IdleAnimationState
            StateName                = Idle
            Animation                = IdleA
                AnimationName       = Bats_SKL.Bats_IDLA
                AnimationMode       = LOOP
                AnimationBlendTime  = 30
            End
            Flags                        = RANDOMSTART
        End

        AnimationState                = JUST_BUILT
            StateName                = State_JustBuilt
            Animation
                AnimationName        = Bats_SKL.Bats_SMNA
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
        End

        AnimationState                = DYING DEATH_1
            Animation
                AnimationName        = Bats_SKL.Bats_SMNB
                AnimationMode        = ONCE
                AnimationBlendTime    = 15
            End
        End


        AnimationState                = MOVING
            Animation                = RunA
                AnimationName       = Bats_SKL.Bats_MOV
                AnimationMode       = LOOP
                AnimationBlendTime  = 30

            End
        End


        AnimationState                =    SELECTED
            StateName                =    State_Selected
            Animation                =    AtAttention
                AnimationName        =    Bats_SKL.Bats_IDLA
                AnimationMode        =    LOOP
                AnimationBlendTime  = 30
            End
        End

    End



    SoundAmbient = CaveBatsAmbientLoop
    SoundMoveStart = CaveBatsSelect

    VoiceSelect = CaveBatsSelect



    DisplayName = OBJECT:CaveBats
End


Object WildBatCloud



    ButtonImage            = HICaveBats
    SelectPortrait        = UPBatCloud

    Draw = W3DHordeModelDraw ModuleTag_01


        WadingParticleSys = EntRipples

        StaticModelLODMode = Yes

        DefaultModelConditionState
            Model                    = Bats_SKN
        End

        IdleAnimationState
            StateName                = Idle
            Animation                = IdleA
                AnimationName       = Bats_SKL.Bats_IDLA
                AnimationMode       = LOOP
                AnimationBlendTime  = 30
            End
            Flags                    = RANDOMSTART
        End


        AnimationState                = JUST_BUILT
            StateName                = State_JustBuilt
            Animation
                AnimationName        = Bats_SKL.Bats_SMNA
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
        End

        AnimationState                = DYING DEATH_1
            Animation
                AnimationName        = Bats_SKL.Bats_SMNB
                AnimationMode        = ONCE
                AnimationBlendTime    = 15
            End
        End

        AnimationState                = MOVING
            Animation                = RunA
                AnimationName       = Bats_SKLBats_SMNABats_MOV
                AnimationMode       = LOOP
                AnimationBlendTime  = 30

            End
        End
    End




    Side                = Neutral
    EditorSorting        = UNIT
    ThreatLevel            = 0.0
    CommandPoints        = 0
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_IMMUNE

    VisionRange            = 200.0
    DisplayName            = OBJECT:BatCloud

    CommandSet            = EmptyCommandSet



    EvaEnemyObjectSightedEvent    = None







    RadarPriority = UNIT
    KindOf = SELECTABLE NO_COLLIDE MONSTER MOVE_ONLY HERO IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION IGNORES_SELECT_ALL SUMMONED SCORE UNATTACKABLE NOT_AUTOACQUIRABLE NO_BASE_CAPTURE

    Body = ActiveBody ModuleTag_02
        MaxHealth         = 200000
        MaxHealthDamaged  = 100000
    End

    Behavior = AIUpdateInterface    ModuleTag_AIUpdateInterface
    End

    Behavior = PhysicsBehavior        ModuleTag_PhysicsBehavior
    End

    Behavior = SlowDeathBehavior ModuleTag_NormalDeath
        DeathTypes            = ALL
        DeathFlags            = DEATH_1
        DestructionDelay    = 2000
        SinkDelay            = 2000

        Sound = INITIAL SpellGenericUnsummonFasterMS
    End


    LocomotorSet
        Locomotor = CrebainLocomotor
        Condition = SET_NORMAL
        Speed     = 200
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = 30000
        MaxLifetime        = 30000
    End

    Behavior = FireWeaponUpdate ModuleTag_PeckTheirEyesOut
        FireWeaponNugget
            WeaponName        = WildFortressBatCloudBasicWeapon
            FireDelay        = 1000
            OneShot            = No
        End
    End





    Geometry            = CYLINDER
    GeometryMajorRadius = 50.0
    GeometryHeight        = 61.0
    GeometryIsSmall        = No

    AttackContactPoint  = X:40 Y:40 Z:60
    AttackContactPoint  = X:-40 Y:40 Z:60
    AttackContactPoint  = X:-40 Y:-40 Z:60
    AttackContactPoint  = X:40 Y:-40 Z:60

    Shadow            = SHADOW_ADDITIVE_DECAL_DYNAMIC
    ShadowSizeX        = 400
    ShadowSizeY        = 400
    ShadowTexture    = MUSauronEye

    ShadowOpacityStart            = 0
    ShadowOpacityFadeInTime        = 1000
    ShadowOpacityPeak            = 255
    ShadowOpacityFadeOutTime    = 1000
    ShadowOpacityEnd            = 0

    ShadowOverrideLODVisibility = Yes
End


Object IsengardMurderOfCrows



    ButtonImage            = HICrebain
    SelectPortrait         = UPCrebain

    Draw = W3DHordeModelDraw ModuleTag_01


        WadingParticleSys = EntRipples

        StaticModelLODMode = Yes

        DefaultModelConditionState
            Model                    = Crebain_SKN
        End

        IdleAnimationState
            StateName                = Idle
            Animation                = IdleA
                AnimationName       = Crebain_SKL.Crebain_IDLA
                AnimationMode       = LOOP
                AnimationBlendTime  = 30
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = MOVING
            Animation                = RunA
                AnimationName       = Crebain_SKL.Crebain_MOV
                AnimationMode       = LOOP
                AnimationBlendTime  = 30

            End
        End

        AnimationState                =    SELECTED
            StateName                =    State_Selected
            Animation                =    AtAttention
                AnimationName        =    Crebain_SKL.Crebain_IDLA
                AnimationMode        =    LOOP
                AnimationBlendTime  =    30
            End
        End
    End


    Side                = Neutral
    EditorSorting        = UNIT
    ThreatLevel            = 0.0
    CommandPoints        = 0
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_IMMUNE

    VisionRange            = 200.0
    DisplayName            = OBJECT:MurderOfCrows

    CommandSet            = EmptyCommandSet



    EvaEnemyObjectSightedEvent    = None







    RadarPriority = UNIT
    KindOf = SELECTABLE NO_COLLIDE MONSTER MOVE_ONLY CLICK_THROUGH HERO IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION IGNORES_SELECT_ALL

    Body = ActiveBody ModuleTag_02
        MaxHealth         = 200000
        MaxHealthDamaged  = 100000
    End

    Behavior = AIUpdateInterface    ModuleTag_AIUpdateInterface
    End

    Behavior = PhysicsBehavior        ModuleTag_PhysicsBehavior
    End

    LocomotorSet
        Locomotor = CrebainLocomotor
        Condition = SET_NORMAL
        Speed     = 200
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = 30000
        MaxLifetime        = 30000
    End

    Behavior = FireWeaponUpdate ModuleTag_PeckTheirEyesOut
        FireWeaponNugget
            WeaponName        = IsengardFortressMurderOfCrowsBasicWeapon
            FireDelay        = 1000
            OneShot            = No
        End
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL
        Sound = INITIAL SpellGenericUnsummonFasterMS
    End

    Geometry            = CYLINDER
    GeometryMajorRadius = 50.0
    GeometryMinorRadius = 50.0
    GeometryHeight        = 61.0
    GeometryIsSmall        = No

    AttackContactPoint  = X:40 Y:40 Z:60
    AttackContactPoint  = X:-40 Y:40 Z:60
    AttackContactPoint  = X:-40 Y:-40 Z:60
    AttackContactPoint  = X:40 Y:-40 Z:60

    Shadow            = SHADOW_ADDITIVE_DECAL_DYNAMIC
    ShadowSizeX        = 400
    ShadowSizeY        = 400
    ShadowTexture    = MUSauronEye

    ShadowOpacityStart            = 0
    ShadowOpacityFadeInTime        = 1000
    ShadowOpacityPeak            = 255
    ShadowOpacityFadeOutTime    = 1000
    ShadowOpacityEnd            = 0

    ShadowOverrideLODVisibility = Yes
End




Object RohanPeasant



    Draw = W3DScriptedModelDraw ModuleTag_01
        DefaultModelConditionState

            Model               = RUPsnt_1_SKN
            Skeleton            = RUPsnt_1_SKL
        End
    End






    Side = Neutral
    EditorSorting = UNIT
    BuildVariations = RohanPeasant1 RohanPeasant3 RohanPeasant4
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT SWARM_DOZER GRAB_AND_DROP DOZER






End




Object RohanPeasant1




    Draw = W3DScriptedModelDraw ModuleTag_01

        StaticModelLODMode = Yes

          OkToChangeModelColor = Yes

        RandomTexture = RUPeasant01.tga 0 RUPeasant01.tga
        RandomTexture = RUPeasant01_Alt.tga 0 RUPeasant01.tga


        DefaultModelConditionState
            Model               = RUPsnt_1_SKN
            Skeleton            = RUPsnt_1_SKL
        End





        AnimationState                        = PASSENGER
            Animation                        = FLLA
                AnimationName                = RUPsnt_1_FLLA
                AnimationMode                = LOOP
            End
        End

        AnimationState        = THROWN_PROJECTILE
            Animation           = FLYA
                AnimationName     = RUPsnt_1_FLYA
                AnimationMode     = LOOP
            End
        End

        AnimationState                        = FREEFALL
            Animation                        = FLYA
                AnimationName                = RUPsnt_1_FLYA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.7    0.7
                AnimationBlendTime            = 10
            End
        End

        AnimationState        = STUNNED_FLAILING
            Animation           = FLYA
                AnimationName     = RUPsnt_1_FLYA
                AnimationMode      = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState                        = DYING SPLATTED
            Animation                        = LNDA
                AnimationName                = RUPsnt_1_LNDA
                AnimationMode                = ONCE
            End
        End

        AnimationState        = DYING
            Animation           = DIEA
                AnimationName     = RUPsnt_1_DIEA
                AnimationMode     = ONCE
            End
            Animation           = DIEB
                AnimationName     = RUPsnt_1_DIEB
                AnimationMode     = ONCE
            End
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = GTPA
                AnimationName     = RUPsnt_1_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End





        End

        AnimationState        = STUNNED
            Animation           = LNDA
                AnimationName     = RUPsnt_1_LNDA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = RUPsnt_1_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End




        AnimationState                =    FIRING_OR_PREATTACK_A
            Animation
                AnimationName        =    RUPsnt_1_ATKA
                AnimationMode        =    LOOP

            End
            Animation
                AnimationName        =    RUPsnt_1_ATKB
                AnimationMode        =    LOOP

            End
        End




        AnimationState                = MOVING BACKING_UP
            Animation                = BAKA
                AnimationName        = RUPsnt_1_BAKA
                AnimationMode        = LOOP
            End








        End











        AnimationState                = MOVING WANDER
            Animation                = WLKA
                AnimationName        = RUPsnt_1_WLKA
                AnimationMode        = LOOP
            End






        End

        AnimationState                = MOVING
            Animation                = RUNA
                AnimationName        = RUPsnt_1_RUNA
                AnimationMode        = LOOP

            End
            Animation                = RUNC
                AnimationName        = RUPsnt_1_RUNC
                AnimationMode        = LOOP

            End
            Flags                    = RANDOMSTART
            ParticleSysBone            = None InfantryDustTrails
        End


        AnimationState = ACTIVELY_CONSTRUCTING DEPLOYED
            Animation                =    Stand
                AnimationName        =    RUPsnt_1_IDLA
                AnimationMode        =    LOOP
            End
        End


        AnimationState                = ACTIVELY_CONSTRUCTING
            Animation                = WRKA
                AnimationName        = RUPsnt_1_WRKA
                AnimationMode        = ONCE
            End
            Animation                = WRKD
                AnimationName        = RUPsnt_1_WRKD
                AnimationMode        = ONCE
            End
            Flags                    = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End



        AnimationState = HIT_REACTION
            Animation = Hit_Level_1_a
                AnimationName = RUPsnt_1_HITA
                AnimationMode = ONCE
            End
        End







        AnimationState                = EMOTION_POINTING
            Animation                = Pointing1
                AnimationName        = RUPsnt_1_PNTA
                AnimationMode        = LOOP
                AnimationSpeedFactorRange = 0.75 1.25
            End
        End


        AnimationState                = EMOTION_AFRAID
            Animation                = &&FEAR&&
                AnimationName        = RUPsnt_1_FERA
                AnimationMode        = LOOP
            End
        End

        AnimationState                = EMOTION_TAUNTING
            Animation                = TNTA
                AnimationName        = RUPsnt_1_TNTA
                AnimationMode        = ONCE
            End
            Animation                = TNTB
                AnimationName        = RUPsnt_1_TNTB
                AnimationMode        = ONCE
            End
            Flags                    = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End


            AnimationState                = EMOTION_CELEBRATING
                Animation                = CHRA
                    AnimationName        = RUPsnt_1_CHRA
                    AnimationMode        = ONCE
                End
                Animation                = CHRB
                    AnimationName        = RUPsnt_1_CHRB
                    AnimationMode        = ONCE
                End
                Flags                    = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
            End

            AnimationState                = EMOTION_ALERT
                StateName                = STATE_Alert
                Animation                = &&ALERT&&
                    AnimationName        = RUPsnt_1_IDLA
                    AnimationMode        = LOOP
                End
            End



        AnimationState                =    SELECTED
            StateName                =    STATE_Selected
            SimilarRestart            =   Yes
            Animation                =    ATNB
                AnimationName        =    RUPsnt_1_ATNB
                AnimationMode        =    LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
                if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
            EndScript
        End


        IdleAnimationState
            StateName            =    STATE_Idle
            Animation           = IDLA
                AnimationName     = RUPsnt_1_IDLA
                AnimationMode     = ONCE
                AnimationPriority = 20
            End

            Animation           = IDLC
                AnimationName     = RUPsnt_1_IDLC
                AnimationMode     = ONCE
                AnimationPriority = 1
            End

            Animation           = IDLD
                AnimationName     = RUPsnt_1_IDLD
                AnimationMode     = ONCE
                AnimationPriority = 2
            End

            Animation           = IDLE
                AnimationName     = RUPsnt_1_IDLE
                AnimationMode     = ONCE
                AnimationPriority = 1
            End

            Animation           = IDLF
                AnimationName     = RUPsnt_1_IDLF
                AnimationMode     = ONCE
                AnimationPriority = 1
            End

            Animation           = IDLG
                AnimationName     = RUPsnt_1_IDLG
                AnimationMode     = ONCE
                AnimationPriority = 1
            End

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
            EndScript
        End



        TransitionState       = TRANS_SelectedToIdle
            Animation           = ATNC
                AnimationName     = RUPsnt_1_ATNC
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 0.7 1.2
            End
        End

        TransitionState                =    TRANS_IdleToSelected
            Animation                =    ATNA
                AnimationName        =    RUPsnt_1_ATNA
                AnimationMode        =    ONCE
                AnimationSpeedFactorRange = 0.7 1.2
            End
        End

    End


    Side = Neutral
    EditorSorting = UNIT
    ThreatLevel = 1.0
    TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT

    CommandPoints = 2

    CommandSet = PeasantCommandSet

    BountyValue = ROHAN_PEASANT_BOUNTY_VALUE


    WeaponSet
        Conditions          = None
        Weapon              = PRIMARY        RohanFighterSword
    End

    WeaponSet
        Conditions            = PLAYER_UPGRADE
        Weapon                = PRIMARY        RohanFighterSwordUpgraded
    End


    ArmorSet
        Conditions      = None
        Armor           = PeasantArmor
        DamageFX        = NormalDamageFX
    End

    ArmorSet
        Conditions      = PLAYER_UPGRADE
        Armor           = SoldierHeavyArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange = VISION_STANDARD_MELEE
    ShroudClearingRange = SHROUD_CLEAR_STANDARD

    DisplayName = OBJECT:RohanPeasant
    CrushableLevel = 0
    CrushRevengeWeapon = BasicInfantryCrushRevenge
    EquivalentTo = RohanPeasant




    VoiceAttack                 = PeasantMaleVoiceAttack
    VoiceAttackCharge             = PeasantMaleVoiceAttackCharge
    VoiceAttackStructure             = PeasantMaleVoiceAttackBuilding
    VoiceAttackMachine             = PeasantMaleVoiceAttack
    VoiceCreated                 = PeasantMaleVoiceSalute
    VoiceFullyCreated             = PeasantMaleVoiceSalute
    VoiceGuard                    = PeasantMaleVoiceMove
    VoiceMove                     = PeasantMaleVoiceMove
    VoiceMoveToCamp                 = PeasantMaleVoiceMoveCamp
    VoiceMoveWhileAttacking         = PeasantMaleVoiceDisengage
    VoicePriority                = 30
    VoiceRetreatToCastle             = PeasantMaleVoiceRetreat
    VoiceSelect                 = PeasantMaleVoiceSelectMS
    VoiceSelectBattle              = PeasantMaleVoiceSelectBattle

    VoiceEnterStateAttack             = PeasantMaleVoiceEnterStateAttack
    VoiceEnterStateAttackCharge         = PeasantMaleVoiceEnterStateAttackCharge
    VoiceEnterStateAttackStructure     = PeasantMaleVoiceEnterStateAttackBuilding
    VoiceEnterStateAttackMachine         = PeasantMaleVoiceEnterStateAttackBuilding
    VoiceEnterStateMove             = PeasantMaleVoiceEnterStateMove
    VoiceEnterStateMoveToCamp         = PeasantMaleVoiceEnterStateMoveCamp
    VoiceEnterStateMoveWhileAttacking     = PeasantMaleVoiceEnterStateDisengage
    VoiceEnterStateRetreatToCastle    = PeasantMaleVoiceEnterStateRetreat

    SoundImpact                    = ImpactHorse

    UnitSpecificSounds
        VoiceGarrison            = PeasantMaleVoiceGarrison
        VoiceRepair                = PeasantMaleVoiceRepair
    End

    #include "..\includes\StandardUnitEvaEvents.inc"

    ClientBehavior = RandomSoundSelectorClientBehavior ModuleTag_RSSCB





        Chance = 5%
        RerollOnEveryFrame = No
        VoicePriority = 32
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:BodyFallGeneric1        Animation:RUPsnt_1_SKL.RUPsnt_1_DIEA    Frames:45
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:RUPsnt_1_SKL.RUPsnt_1_DIEB    Frames:44
        AnimationSound = Sound:BodyFallGeneric1        Animation:RUPsnt_1_SKL.RUPsnt_1_LNDA    Frames:4
    End



    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT DOZER SWARM_DOZER GRAB_AND_DROP



    Body = ActiveBody ModuleTag_02
        CheerRadius       = EMOTION_CHEER_RADIUS
        MaxHealth         = ROHAN_PEASANT_HEALTH
        MaxHealthDamaged  = ROHAN_PEASANT_HEALTH_DAMAGED

    End

    Behavior = WorkerAIUpdate ModuleTag_10
        AutoAcquireEnemiesWhenIdle        = Yes ATTACK_BUILDINGS
        RepairHealthPercentPerSecond    = 0.2%
        AILuaEventsList                    = StandardPeasantFunctions
        AttackPriority                =     AttackPriority_Infantry
        SpecialContactPoints           = Repair
    End

    LocomotorSet
        Locomotor = HumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = HumanWanderLocomotor
        Condition = SET_WANDER
        Speed     = NORMAL_GOOD_INFANTRY_MEMBER_SPEED
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL
        SinkDelay = 3000
        SinkRate = 1.0
        DestructionDelay = 8000
            Sound = INITIAL PeasantMaleVoiceDie
    End





     Behavior = ArmorUpgrade ModuleTag_ArmorUpgradeDrafted
        TriggeredBy = Upgrade_Drafted
        IgnoreArmorUpgrade = Yes
    End

    Behavior = RepairSpecialPower ModuleTag_RepairSPecialPower
        SpecialPowerTemplate      = SpecialRepairStructure
    End




    Behavior = SubObjectsUpgrade Drafted_Upgrade
        TriggeredBy        = Upgrade_Drafted
        ShowSubObjects    = SWORD SHIELD
        HideSubObjects    = HAMMER


    End



    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = HordeMemberCollide ModuleTag_HMC

    End

    Behavior = BezierProjectileBehavior ModuleTag_08
        FirstHeight = 24
        SecondHeight = 24
        FirstPercentIndent = 30%
        SecondPercentIndent = 70%
        TumbleRandomly = Yes

        CrushStyle = Yes
        DieOnImpact = Yes
        BounceCount = 1
        BounceDistance = 40
        BounceFirstHeight = 16
        BounceSecondHeight = 16
        BounceFirstPercentIndent = 20%
        BounceSecondPercentIndent = 80%

        GroundHitFX       = FX_ThrownRockGroundHit
        GroundBounceFX    = FX_ThrownRockBounceHit
    End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 2333
        HitReactionLifeTimer2 = 2333
        HitReactionLifeTimer3 = 2333

        HitReactionThreshold1 = 5.0
        HitReactionThreshold2 = 25.0
        HitReactionThreshold3 = 50.0

        FastHitsResetReaction = Yes
    End


    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Human Unit Peasant Peasant_Male
    End

    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes

  Shadow = SHADOW_DECAL
  ShadowSizeX = 19
  ShadowSizeY = 19
  ShadowTexture = ShadowI

End



ChildObject RohanPeasant2 RohanPeasant1


    Draw = W3DScriptedModelDraw ModuleTag_01

        StaticModelLODMode = Yes

          OkToChangeModelColor = Yes

        RandomTexture = RUPeasant02.tga 0
        RandomTexture = RUPeasant02_Alt.tga 0


        DefaultModelConditionState
            Model               = RUPsnt_2_SKN
            Skeleton            = RUPsnt_2_SKL
        End





        AnimationState        = PASSENGER
            Animation           = FLLA
                AnimationName     = RUPsnt_2_FLLA
                AnimationMode     = LOOP
            End
        End

        AnimationState        = THROWN_PROJECTILE
            Animation           = FLYA
                AnimationName     = RUPsnt_2_FLYA
                AnimationMode     = LOOP
            End
        End



        AnimationState        = DYING
            Animation           = DIEA
                AnimationName     = RUPsnt_2_DIEA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = GTPA
                AnimationName     = RUPsnt_2_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState        = STUNNED
            Animation           = LNDA
                AnimationName     = RUPsnt_2_LNDA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = STUNNED
            Animation           = LNDA
                AnimationName     = RUPsnt_2_LNDA
                AnimationMode     = ONCE
            End
        End



        AnimationState                =    FIRING_OR_PREATTACK_A
            Animation
                AnimationName        =    RUPsnt_2_ATKA
                AnimationMode        =    LOOP

            End
        End




        AnimationState                = MOVING BACKING_UP
            Animation                = &&TERROR&&
                AnimationName        = RUPsnt_2_IDLA
                AnimationMode        = LOOP
            End
        End










        AnimationState                = MOVING WANDER
            Animation                = WLKA
                AnimationName        = RUPsnt_2_WLKA
                AnimationMode        = LOOP
            End

        End

        AnimationState                = MOVING
            Animation                = RUNA
                AnimationName        = RUPsnt_2_RUNA
                AnimationMode        = LOOP
                                AnimationSpeedFactorRange = 1.00 1.15
            End
            Flags                    = RANDOMSTART

        End



        AnimationState = ACTIVELY_CONSTRUCTING DEPLOYED
            Animation                =    Stand
                AnimationName        =    RUPsnt_2_IDLA
                AnimationMode        =    LOOP
            End
        End


        AnimationState                = ACTIVELY_CONSTRUCTING
            Animation                = WRKA
                AnimationName        = RUPsnt_2_WRKA
                AnimationMode        = LOOP
            End
        End



        AnimationState = HIT_REACTION
            Animation = Hit_Level_1_a
                AnimationName = RUPsnt_2_HITA
                AnimationMode = ONCE
            End
        End





        AnimationState                = EMOTION_POINTING
            Animation                = Pointing2
                AnimationName        = RUPsnt_2_PNTA
                AnimationMode        = LOOP
                AnimationSpeedFactorRange = 0.75 1.25
            End
        End



        AnimationState                = EMOTION_AFRAID
            Animation                = &&FEAR&&
                AnimationName        = RUPsnt_2_IDLA
                AnimationMode        = LOOP
            End
        End

        AnimationState                = EMOTION_TAUNTING
            Animation                = &&TAUNT&&
                AnimationName        = RUPsnt_2_IDLA
                AnimationMode        = LOOP
            End
        End


        AnimationState                = EMOTION_CELEBRATING
            Animation                = &&CHEER&&
                AnimationName        = RUPsnt_2_IDLA
                AnimationMode        = LOOP
            End
        End

        AnimationState                = EMOTION_ALERT
            Animation                = &&ALERT&&
                AnimationName        = RUPsnt_2_IDLA
                AnimationMode        = LOOP
            End
        End



    IdleAnimationState
        Animation                = IDLA
            AnimationName        = RUPsnt_2_IDLA
            AnimationMode        = ONCE
        End
    End






    End

    EquivalentTo = RohanPeasant




    VoicePriority = 1
    VoiceFear = NoSound
    VoiceGuard = NoSound

    SoundImpact = ImpactHorse








    #include "..\includes\StandardUnitEvaEvents.inc"



    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Human Unit Peasant
    End





End



ChildObject RohanPeasant3 RohanPeasant1


    Draw = W3DScriptedModelDraw ModuleTag_01

        StaticModelLODMode = Yes

          OkToChangeModelColor = Yes

        RandomTexture = RUPeasant03_Alt.tga 0 RUPeasant03_Alt.tga
        RandomTexture = RUPeasant03.tga 0 RUPeasant03_Alt.tga


        DefaultModelConditionState
            Model               = RUPsnt_3_SKN
            Skeleton            = RUPsnt_3_SKL
        End





        AnimationState                        = PASSENGER
            Animation                        = FLLA
                AnimationName                = RUPsnt_3_FLLA
                AnimationMode                = LOOP
            End
        End

        AnimationState        = THROWN_PROJECTILE
            Animation           = FLYA
                AnimationName     = RUPsnt_3_FLYA
                AnimationMode     = LOOP
            End
        End

        AnimationState                        = FREEFALL
            Animation                        = FLYA
                AnimationName                = RUPsnt_3_FLYA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.7    0.7
                AnimationBlendTime            = 10
            End
        End

        AnimationState        = STUNNED_FLAILING
            Animation           = FLYA
                AnimationName     = RUPsnt_3_FLYA
                AnimationMode      = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState                        = DYING SPLATTED
            Animation                        = LNDA
                AnimationName                = RUPsnt_3_LNDA
                AnimationMode                = ONCE
            End
        End

        AnimationState        = DYING
            Animation           = DIEA
                AnimationName     = RUPsnt_3_DIEA
                AnimationMode     = ONCE
            End
            Animation           = DIEB
                AnimationName     = RUPsnt_3_DIEB
                AnimationMode     = ONCE
            End
            Animation           = DIEC
                AnimationName     = RUPsnt_3_DIEC
                AnimationMode     = ONCE
            End
        End

        AnimationState        = STUNNED_STANDING_UP




            Animation           = GTPB
                AnimationName     = RUPsnt_3_GTPB
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState        = STUNNED
            Animation           = LNDA
                AnimationName     = RUPsnt_3_LNDA
                AnimationMode     = ONCE
            End
        End

        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = RUPsnt_3_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End




        AnimationState                =    FIRING_OR_PREATTACK_A
            Animation                =    ATKA
                AnimationName        =    RUPsnt_3_ATKA
                AnimationMode        =    LOOP

            End
            Animation                =    ATKB
                AnimationName        =    RUPsnt_3_ATKB
                AnimationMode        =    LOOP

            End
        End




        AnimationState                = MOVING BACKING_UP
            Animation                = BAKA
                AnimationName        = RUPsnt_3_BAKA
                AnimationMode        = LOOP
            End
        End










        AnimationState                = MOVING WANDER
            Animation                = WLKA
                AnimationName        = RUPsnt_3_WLKA
                AnimationMode        = LOOP
            End

        End

        AnimationState                = MOVING ATTACKING
            Animation                = RUNE
                AnimationName        = RUPsnt_3_RUNE
                AnimationMode        = LOOP
                AnimationBlendTime    = 15
            End
            Animation                = RUNF
                AnimationName        = RUPsnt_3_RUNF
                AnimationMode        = LOOP
                AnimationBlendTime    = 15
            End

        End

        AnimationState                = MOVING
            Animation                = RUNC
                AnimationName        = RUPsnt_3_RUNC
                AnimationMode        = LOOP
            End
            Animation                = RUND
                AnimationName        = RUPsnt_3_RUND
                AnimationMode        = LOOP
            End
            Flags                    = RANDOMSTART

        End



        AnimationState = ACTIVELY_CONSTRUCTING DEPLOYED
            Animation                =    Stand
                AnimationName        =    RUPsnt_3_IDLA
                AnimationMode        =    LOOP
            End
        End

        AnimationState                = ACTIVELY_CONSTRUCTING
            Animation                = WRKB
                AnimationName        = RUPsnt_3_WRKB
                AnimationMode        = ONCE
            End
            Animation                = WRKC
                AnimationName        = RUPsnt_3_WRKC
                AnimationMode        = ONCE
            End
            Flags                    = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End



        AnimationState = HIT_REACTION
            Animation = Hit_Level_1_a
                AnimationName = RUPsnt_3_HITA
                AnimationMode = ONCE
            End
        End





        AnimationState                = EMOTION_POINTING
            Animation                = Pointing3
                AnimationName        = RUPsnt_3_PNTA
                AnimationMode        = LOOP
                AnimationSpeedFactorRange = 0.75 1.25
            End
        End



        AnimationState                = EMOTION_AFRAID
            Animation                = &&FEAR&&
                AnimationName        = RUPsnt_3_FERA
                AnimationMode        = LOOP
            End
        End

        AnimationState                = EMOTION_TAUNTING
            Animation                = TNTA
                AnimationName        = RUPsnt_3_TNTA
                AnimationMode        = ONCE
            End
            Animation                = TNTB
                AnimationName        = RUPsnt_3_TNTB
                AnimationMode        = ONCE
            End
            Flags                    = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState                = EMOTION_CELEBRATING
            Animation                = CHRA
                AnimationName        = RUPsnt_3_CHRA
                AnimationMode        = ONCE
            End
            Animation                = CHRB
                AnimationName        = RUPsnt_3_CHRB
                AnimationMode        = ONCE
            End
            Flags                    = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = EMOTION_ALERT
            StateName                = STATE_Alert
            Animation                = &&ALERT&&
                AnimationName        = RUPsnt_3_IDLA
                AnimationMode        = LOOP
            End
        End


        AnimationState                =    SELECTED
            StateName                =    STATE_Selected
            SimilarRestart            =   Yes
            Animation                =    ATNB
                AnimationName        =    RUPsnt_3_ATNB
                AnimationMode        =    LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
                if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
            EndScript
        End



        IdleAnimationState
            StateName                =    STATE_Idle
            Animation           = IDLA
                AnimationName     = RUPsnt_3_IDLA
                AnimationMode     = ONCE
                AnimationPriority = 20
            End

            Animation           = IDLC
                AnimationName     = RUPsnt_3_IDLC
                AnimationMode     = ONCE
                AnimationPriority = 1
            End

            Animation           = IDLD
                AnimationName     = RUPsnt_3_IDLD
                AnimationMode     = ONCE
                AnimationPriority = 2
            End

            Animation           = IDLE
                AnimationName     = RUPsnt_3_IDLE
                AnimationMode     = ONCE
                AnimationPriority = 1
            End

            Animation           = IDLF
                AnimationName     = RUPsnt_3_IDLF
                AnimationMode     = ONCE
                AnimationPriority = 1
            End

            Animation           = IDLG
                AnimationName     = RUPsnt_3_IDLG
                AnimationMode     = ONCE
                AnimationPriority = 1
            End

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
            EndScript
        End



        TransitionState       = TRANS_SelectedToIdle
            Animation           = ATNC
                AnimationName     = RUPsnt_3_ATNC
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 0.7 1.2
            End
        End

        TransitionState                =    TRANS_IdleToSelected
            Animation                =    ATNA
                AnimationName        =    RUPsnt_3_ATNA
                AnimationMode        =    ONCE
                AnimationSpeedFactorRange = 0.7 1.2
            End
        End

    End

    EquivalentTo = RohanPeasant




    VoiceAttack                 = PeasantMaleVoiceAttack
    VoiceAttackCharge             = PeasantMaleVoiceAttackCharge
    VoiceAttackStructure             = PeasantMaleVoiceAttackBuilding
    VoiceAttackMachine             = PeasantMaleVoiceAttack
    VoiceCreated                 = PeasantMaleVoiceSalute
    VoiceFullyCreated             = PeasantMaleVoiceSalute
    VoiceGuard                    = PeasantMaleVoiceMove
    VoiceMove                     = PeasantMaleVoiceMove
    VoiceMoveToCamp                 = PeasantMaleVoiceMoveCamp
    VoiceMoveWhileAttacking         = PeasantMaleVoiceDisengage
    VoicePriority                = 30
    VoiceRetreatToCastle             = PeasantMaleVoiceRetreat
    VoiceSelect                 = PeasantMaleVoiceSelectMS
    VoiceSelectBattle              = PeasantMaleVoiceSelectBattle

    VoiceEnterStateAttack             = PeasantMaleVoiceEnterStateAttack
    VoiceEnterStateAttackCharge         = PeasantMaleVoiceEnterStateAttackCharge
    VoiceEnterStateAttackStructure     = PeasantMaleVoiceEnterStateAttackBuilding
    VoiceEnterStateAttackMachine        = PeasantMaleVoiceEnterStateAttackBuilding
    VoiceEnterStateMove             = PeasantMaleVoiceEnterStateMove
    VoiceEnterStateMoveToCamp         = PeasantMaleVoiceEnterStateMoveCamp
    VoiceEnterStateMoveWhileAttacking    = PeasantMaleVoiceEnterStateDisengage
    VoiceEnterStateRetreatToCastle     = PeasantMaleVoiceEnterStateRetreat

    UnitSpecificSounds
        VoiceGarrison                 = PeasantMaleVoiceGarrison
    End


    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Human Unit Peasant Peasant_Male
    End

    #include "..\includes\StandardUnitEvaEvents.inc"

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:RUPsnt_3_SKL.RUPsnt_3_DIEA    Frames:46
        AnimationSound = Sound:BodyFallGeneric1        Animation:RUPsnt_3_SKL.RUPsnt_3_DIEB    Frames:45
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:RUPsnt_3_SKL.RUPsnt_3_DIEC    Frames:35
        AnimationSound = Sound:BodyFallGeneric1        Animation:RUPsnt_3_SKL.RUPsnt_3_LNDA    Frames:8
    End






End



ChildObject RohanPeasant4 RohanPeasant1


    Draw = W3DScriptedModelDraw ModuleTag_01

        StaticModelLODMode = Yes

        OkToChangeModelColor = Yes

        RandomTexture = RUPeasant04.tga 0 RUPeasant04.tga
        RandomTexture = RUPeasant04_Alt.tga 0 RUPeasant04.tga


        DefaultModelConditionState
            Model               = RUPsnt_4_SKN
            Skeleton            = RUPsnt_4_SKL
        End






        AnimationState                        = PASSENGER
            Animation                        = FLLA
                AnimationName                = RUPsnt_4_FLLA
                AnimationMode                = LOOP
            End
        End

        AnimationState                = THROWN_PROJECTILE
            Animation                = FLYA
                AnimationName        = RUPsnt_4_FLYA
                AnimationMode        = LOOP
            End
        End

        AnimationState                        = FREEFALL
            Animation                        = FLYA
                AnimationName                = RUPsnt_4_FLYA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 0.7    0.7
                AnimationBlendTime            = 10
            End
        End

        AnimationState        = STUNNED_FLAILING
            Animation           = FLYA
                AnimationName     = RUPsnt_4_FLYA
                AnimationMode      = LOOP
            End
        End

        AnimationState                        = DYING SPLATTED
            Animation                        = LNDA
                AnimationName                = RUPsnt_4_LNDA
                AnimationMode                = ONCE
            End
        End

        AnimationState                = DYING
            Animation                = DIEA
                AnimationName        = RUPsnt_4_DIEA
                AnimationMode        = ONCE
            End
            Animation                = DIEB
                AnimationName        = RUPsnt_4_DIEB
                AnimationMode        = ONCE
            End
            Animation                = DIEC
                AnimationName        = RUPsnt_4_DIEC
                AnimationMode        = ONCE
            End
        End

        AnimationState                = STUNNED_STANDING_UP
            Animation                = GTPA
                AnimationName        = RUPsnt_4_GTPA
                AnimationMode        = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End




        End

        AnimationState                = STUNNED
            Animation                = LNDA
                AnimationName        = RUPsnt_4_LNDA
                AnimationMode        = ONCE
            End
        End

        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = RUPsnt_4_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End



        AnimationState                =    FIRING_OR_PREATTACK_A
            Animation
                AnimationName        =    RUPsnt_4_ATKA
                AnimationMode        =    LOOP

            End
            Animation
                AnimationName        =    RUPsnt_4_ATKB
                AnimationMode        =    LOOP

            End
        End





        AnimationState                = MOVING BACKING_UP
            Animation                = BAKA
                AnimationName        = RUPsnt_4_BAKA
                AnimationMode        = LOOP
            End
        End










        AnimationState                = MOVING WANDER
            Animation                = WLKA
                AnimationName        = RUPsnt_4_WLKA
                AnimationMode        = LOOP
            End

        End

        AnimationState                = MOVING ATTACKING
            Animation                = RUNB
                AnimationName        = RUPsnt_4_RUNB
                AnimationMode        = LOOP
                AnimationBlendTime    = 15
            End
            Animation                = RUNE
                AnimationName        = RUPsnt_4_RUNE
                AnimationMode        = LOOP
                AnimationBlendTime    = 15
            End

        End

        AnimationState                = MOVING
            Animation                = RUNA
                AnimationName        = RUPsnt_4_RUNA
                AnimationMode        = LOOP
            End
            Animation                = RUNC
                AnimationName        = RUPsnt_4_RUNC
                AnimationMode        = LOOP
            End
            Animation                = RUND
                AnimationName        = RUPsnt_4_RUND
                AnimationMode        = LOOP
            End
            Flags                    = RANDOMSTART

        End





        AnimationState = ACTIVELY_CONSTRUCTING DEPLOYED
            Animation                =    Stand
                AnimationName        =    RUPsnt_4_IDLA
                AnimationMode        =    LOOP
            End
        End

        AnimationState                = ACTIVELY_CONSTRUCTING
            Animation                = WRKA
                AnimationName        = RUPsnt_4_WRKA
                AnimationMode        = LOOP
            End
        End



        AnimationState = HIT_REACTION
            Animation = Hit_Level_1_a
                AnimationName = RUPsnt_4_HITA
                AnimationMode = ONCE
            End
        End





        AnimationState                = EMOTION_POINTING
            Animation                = Pointing4
                AnimationName        = RUPsnt_4_PNTA
                AnimationMode        = LOOP
                AnimationSpeedFactorRange = 0.75 1.25
            End
        End



        AnimationState                = EMOTION_AFRAID
            Animation                = &&FEAR&&
                AnimationName        = RUPsnt_4_FERA
                AnimationMode        = LOOP
            End
        End

        AnimationState                = EMOTION_TAUNTING
            Animation                = TNTA
                AnimationName        = RUPsnt_4_TNTA
                AnimationMode        = LOOP
            End
            Animation                = TNTB
                AnimationName        = RUPsnt_4_TNTB
                AnimationMode        = LOOP
            End
            Flags                    = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState                = EMOTION_CELEBRATING
            Animation                = CHRA
                AnimationName        = RUPsnt_4_CHRA
                AnimationMode        = ONCE
            End
            Animation                = CHRB
                AnimationName        = RUPsnt_4_CHRB
                AnimationMode        = ONCE
            End
            Animation                = CHRC
                AnimationName        = RUPsnt_4_CHRC
                AnimationMode        = ONCE
            End
            Flags                    = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                = EMOTION_ALERT
            StateName                = STATE_Alert
            Animation                = &&ALERT&&
                AnimationName        = RUPsnt_4_IDLA
                AnimationMode        = LOOP
            End
        End



        AnimationState                =    SELECTED
            StateName                =    STATE_Selected
            SimilarRestart            =   Yes
            Animation                =    ATNB
                AnimationName        =    RUPsnt_4_ATNB
                AnimationMode        =    LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
                if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
            EndScript
        End



        IdleAnimationState
            StateName            =    STATE_Idle
            Animation           = IDLA
                AnimationName     = RUPsnt_4_IDLA
                AnimationMode     = ONCE
                AnimationPriority = 20
            End
            Animation           = IDLC
                AnimationName     = RUPsnt_4_IDLC
                AnimationMode     = ONCE
                AnimationPriority = 1
            End
            Animation           = IDLD
                AnimationName     = RUPsnt_4_IDLD
                AnimationMode     = ONCE
                AnimationPriority = 1
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToIdle") end
            EndScript
        End



        TransitionState       = TRANS_SelectedToIdle
            Animation           = ATNC
                AnimationName     = RUPsnt_4_ATNC
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 0.7 1.2
            End
        End

        TransitionState                =    TRANS_IdleToSelected
            Animation                =    ATNA
                AnimationName        =    RUPsnt_4_ATNA
                AnimationMode        =    ONCE
                AnimationSpeedFactorRange = 0.7 1.2
            End
        End



    End

    EquivalentTo = RohanPeasant




    VoiceAttack                    = PeasantFemaleVoiceAttack
    VoiceAttackCharge                = PeasantFemaleVoiceAttackCharge
    VoiceAttackMachine            = PeasantFemaleVoiceAttack
    VoiceAttackStructure            = PeasantFemaleVoiceAttackBuilding
    VoiceCreated                = PeasantFemaleVoiceSalute
    VoiceFullyCreated             = PeasantFemaleVoiceSalute
    VoiceGuard                    = PeasantFemaleVoiceMove
    VoiceMove                    = PeasantFemaleVoiceMove
    VoiceMoveToCamp                = PeasantFemaleVoiceMoveCamp
    VoiceMoveWhileAttacking            = PeasantFemaleVoiceDisengage
    VoicePriority                = 13
    VoiceRetreatToCastle            = PeasantFemaleVoiceRetreat
    VoiceSelect                    = PeasantFemaleVoiceSelectMS
    VoiceSelectBattle             = PeasantFemaleVoiceSelectBattle

    VoiceEnterStateAttack            = PeasantFemaleVoiceEnterStateAttack
    VoiceEnterStateAttackCharge        = PeasantFemaleVoiceEnterStateAttackCharge
    VoiceEnterStateAttackMachine        = PeasantFemaleVoiceEnterStateAttackBuilding
    VoiceEnterStateAttackStructure    = PeasantFemaleVoiceEnterStateAttackBuilding
    VoiceEnterStateMove            = PeasantFemaleVoiceEnterStateMove
    VoiceEnterStateMoveToCamp        = PeasantFemaleVoiceEnterStateMoveCamp
    VoiceEnterStateMoveWhileAttacking    = PeasantFemaleVoiceEnterStateDisengage
    VoiceEnterStateRetreatToCastle    = PeasantFemaleVoiceEnterStateRetreat

    SoundImpact = ImpactHorse

    UnitSpecificSounds
        VoiceGarrison            = PeasantFemaleVoiceGarrison
        VoiceRepair                = PeasantFemaleVoiceRepair
    End

    #include "..\includes\StandardUnitEvaEvents.inc"

    ReplaceModule ModuleTag_RSSCB
        ClientBehavior = RandomSoundSelectorClientBehavior ModuleTag_RSSCB_Woman







            Chance = 1.5%
            RerollOnEveryFrame = No
            VoicePriority = 31
        End
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:RUPsnt_4_SKL.RUPsnt_4_DIEA    Frames:47
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:RUPsnt_4_SKL.RUPsnt_4_DIEB    Frames:43
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:RUPsnt_4_SKL.RUPsnt_4_DIEC    Frames:34
        AnimationSound = Sound:BodyFallGeneric1        Animation:RUPsnt_4_SKL.RUPsnt_4_LNDA    Frames:1
    End


    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Human Unit Peasant Peasant_Female
    End




    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL
        SinkDelay = 3000
        SinkRate = 1.0
        DestructionDelay = 8000
            Sound = INITIAL PeasantFemaleVoiceDie
    End
End


Object RohanPeasantHorde





    Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
        DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED EMOTION_TERROR
        DefaultModelConditionState
            Model = None
        End
        ModelConditionState = HORDE_EMPTY
            Model = None
        End
        ModelConditionState = WORLD_BUILDER
            Model = HordeMarkRUPea
        End
    End

    Side = Neutral
    EditorSorting = UNIT
    EmotionRange = 240
    DisplayName = OBJECT:HordeRohanPeasant

    WeaponSet
        Conditions = None
        Weapon = PRIMARY    NormalMeleeHordeRangefinder
    End

    CommandSet = RohanPeasantHordeCommandSet





     CrushableLevel = 0
    CrusherLevel = 0

    BuildCost = ROHAN_PEASANT_BUILDCOST
    BuildTime = ROHAN_PEASANT_BUILDTIME
    VisionRange = ROHAN_PEASANT_VISION_RANGE
    CommandPoints = 10

    FormationWidth = 2
    FormationDepth = 1


    TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT
    KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE MELEE_HORDE DOZER SWARM_DOZER


    AutoResolveUnitType = AutoResolveUnit_Soldier

    Body = ImmortalBody ModuleTag_ImmortalBody
        MaxHealth = 1
    End

    Behavior = HordeWorkerAIUpdate ModuleTag_HordeAIUpdate
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        MaxCowerTime                =    5000
        MinCowerTime                =    3000
        AILuaEventsList                = InfantryFunctions
        AttackPriority                =     AttackPriority_Infantry
        SpecialContactPoints           = Repair
    End

    Behavior = RepairSpecialPower ModuleTag_RepairSPecialPower
        SpecialPowerTemplate      = SpecialRepairStructure
    End

    Behavior = HordeContain ModuleTag_HordeContain
        ObjectStatusOfContained =
        InitialPayload = RohanPeasant GOOD_MEN_HORDE_SIZE
        Slots = 5
        PassengerFilter = NONE +INFANTRY
        ShowPips = No
        ThisFormationIsTheMainFormation = Yes
        RandomOffset = X:5 Y:5


        BannerCarriersAllowed    = RohanBanner
        BannerCarrierPosition    = UnitType:RohanPeasant        Pos:X:30.0 Y:0.0         for peasant horde


        RankInfo = RankNumber:1 UnitType:RohanPeasant Position:X:0 Y:0    Position:X:0 Y:25        Position:X:0 Y:-25        Position:X:0 Y:50        Position:X:0 Y:-50

        RanksToReleaseWhenAttacking = 1

        MeleeAttackLeashDistance = 25
    End

    Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
        GravityMult = 1.0
    End

    Behavior = CommandButtonHuntUpdate ModuleTag_CommandButtonHuntUpdate
    End

     Behavior = EmotionTrackerUpdate    Module_EmotionTracker

        TauntAndPointDistance        =    INFANTRY_TAUNT_POINT_RADIUS
        TauntAndPointUpdateDelay    =    1000
        TauntAndPointExcluded        =    NONE
        AfraidOf                    =    NONE +GondorGwaihir +RohanTreeBerd +RohanEntFir +RohanEntAsh +RohanEntBirch +MordorMountainTroll +MordorDrummerTroll +MordorFellBeast +MordorWitchKingOnFellBeast +MordorMumakil
        AlwaysAfraidOf                =    NONE +MordorBalrog +RohanOathbreaker +MordorSauron
         PointAt                =    NONE +MordorFellBeast +MordorWitchKingOnFellBeast
        HeroScanDistance        =    150
        FearScanDistance        =    INFANTRY_FEAR_SCAN_RADIUS



        AddEmotion    =    Terror_Base
        AddEmotion    =    Doom_Base
        AddEmotion    =   BraceForBeingCrushed_Base
        AddEmotion    =    UncontrollableFear_Base
        AddEmotion    =    FearIdle_Base
        AddEmotion    =    FearBusy_Base
        AddEmotion    =    Point_Base
        AddEmotion    =    Taunt_Base
        AddEmotion    =    CheerIdle_Base
        AddEmotion    =    CheerBusy_Base
        AddEmotion    =    HeroCheerIdle_Base
        AddEmotion    =    HeroCheerBusy_Base
        AddEmotion    =    Alert_Base
    End

    LocomotorSet
        Locomotor     = NormalMeleeHordeLocomotor
        Condition     = SET_NORMAL
        Speed         = NORMAL_GOOD_INFANTRY_HORDE_SPEED
    End

    Behavior = ProductionUpdate ProductionUpdateModuleTag
        GiveNoXP = Yes
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining
        TriggeredBy = Upgrade_BasicTraining
        LevelsToGain = 1
        LevelCap = 2
    End



    Geometry = BOX
    GeometryMajorRadius = 20.0
    GeometryMinorRadius = 20.0
    GeometryHeight = 20.0
    GeometryIsSmall = No
End




Object GaladrielTornado02




    ButtonImage = HSGaladriel_NaturesWrath
    SelectPortrait         = UPTornado
    Draw = W3DScriptedModelDraw ModuleTag_01
        OkToChangeModelColor = Yes
        DefaultModelConditionState
            Model           = EXTornado_SKN
            ParticleSysBone = NONE TornadoDust01
            ParticleSysBone = NONE TornadoDust02


            ParticleSysBone = NONE TornadoMagic01
            ParticleSysBone = NONE TornadoMagic02
            ParticleSysBone = NONE TornadoMagic03
            ParticleSysBone = B_TORNADO11 TornadoLightning FOLLOWBONE:Yes
            ParticleSysBone = B_TORNADO11 TornadoLightning1 FOLLOWBONE:Yes
            ParticleSysBone = B_TORNADO11 TornadoLightning2 FOLLOWBONE:Yes
            ParticleSysBone = B_TORNADO11 TornadoLightning3 FOLLOWBONE:Yes
            ParticleSysBone = B_TORNADO11 TornadoLightning4 FOLLOWBONE:Yes
            ParticleSysBone = B_TORNADO11 TornadoLightning5 FOLLOWBONE:Yes
            ParticleSysBone = B_TORNADO11 TornadoLightning6 FOLLOWBONE:Yes
            ParticleSysBone = B_TORNADO11 TornadoLightning7 FOLLOWBONE:Yes
            ParticleSysBone = B_TORNADO11 TornadoLightning8 FOLLOWBONE:Yes
            ParticleSysBone = B_TORNADO11 TornadoLightning9 FOLLOWBONE:Yes
        End



        IdleAnimationState
            StateName = State_Idle
            Animation = tornadodefault
                AnimationName = EXTornado_SKL.EXTornado_IDLA
                AnimationMode = ONCE
                AnimationBlendTime = 30
                AnimationSpeedFactorRange = 0.3 0.4
            End


            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "State_JustBuilt"
                    then CurDrawableSetTransitionAnimState("TRANS_JustBuilt_To_Idle")
                end
            EndScript
        End


        AnimationState                = JUST_BUILT
            StateName                = State_JustBuilt
            Animation
                AnimationName        = EXTornado_SKL.EXTornado_SMNA
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
        End
        TransitionState = TRANS_JustBuilt_To_Idle
            Animation = BeingSummoned
                AnimationName = EXTornado_SMNA
                AnimationMode = ONCE
            End

        End
    End

    Draw = W3DTornadoDraw ModuleTag_TornadoDraw

        DecalTemplate
              Texture        = EXTornadoGround
            Style          = SHADOW_ALPHA_DECAL
            OpacityMin     = 5%
            OpacityMax     = 20%
            MaxRadius       = 300.0
            Color          = R:200 G:200 B:200 A:255
            OnlyVisibleToOwningPlayer = Yes
            RotationsPerMinute = 0.4
            SpiralAcceleration = 1.0
        End
        DecalCount        = 7
        DecalMaxRadius    = 300.0


    End


    Side            = Mordor
    EditorSorting    = UNIT
    ThreatLevel        = 0.0
    CommandPoints    = 0
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS

    VisionRange        = 200.0
    DisplayName        = OBJECT:NaturesWrath

    CommandSet        = EmptyCommandSet




    EvaEnemyObjectSightedEvent = None

    SoundAmbient    = TornadoLoopMS
    SoundMoveStart    = TornadoMoveStart

    VoiceAttack        = TornadoSelect
    VoiceMove        = TornadoSelect
    VoiceSelect        = TornadoSelect



    RadarPriority = UNIT
    KindOf = SELECTABLE NO_COLLIDE AIRCRAFT UNATTACKABLE MOVE_ONLY ORIENTS_TO_CAMERA CLICK_THROUGH HERO IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION NOT_AUTOACQUIRABLE IGNORES_SELECT_ALL PASS_EXPERIENCE_TO_PRODUCER

    Body = HighlanderBody ModuleTag_02
        MaxHealth         = 1.0
    End

    Behavior = AIUpdateInterface    ModuleTag_AIUpdateInterface
    End

    Behavior = PhysicsBehavior        ModuleTag_PhysicsBehavior
    End

    LocomotorSet
        Locomotor = TornadoLocomotor
        Condition = SET_NORMAL
        Speed     = 20
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = 60000
        MaxLifetime        = 60000
    End

    Behavior = FireWeaponUpdate ModuleTag_WINDY
        FireWeaponNugget
            WeaponName = TornadoWindWeapon
            FireDelay = 0
            OneShot = No
        End
    End



    Behavior = AttributeModifierAuraUpdate ModuleTag_FearMe
        StartsActive    = Yes
        BonusName        = EyeOfSauronFear
        RefreshDelay    = 1000
        Range            = 150.0
        ObjectFilter    = ANY +INFANTRY +CAVALRY
        TargetEnemy        = Yes
        MaxActiveRank    = 1
    End



    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL
    End

    Geometry = CYLINDER
    GeometryMajorRadius = 1.0
    GeometryMinorRadius = 1.0
    GeometryHeight        = 1.0
    GeometryIsSmall        = Yes



















End




Object GaladrielTornado




    ButtonImage = HSGaladriel_NaturesWrath
    SelectPortrait         = UPTornado
    Draw = W3DScriptedModelDraw ModuleTag_01
        OkToChangeModelColor = Yes
        DefaultModelConditionState
            Model           = EXTornado_SKN

            ParticleSysBone = NONE TornadoDebris01
            ParticleSysBone = NONE TornadoDebris02
            ParticleSysBone = NONE TornadoDust01
            ParticleSysBone = NONE TornadoDust02
        End



        IdleAnimationState
            StateName = State_Idle
            Animation = tornadodefault
                AnimationName = EXTornado_SKL.EXTornado_IDLA
                AnimationMode = ONCE
                AnimationBlendTime = 30
                AnimationSpeedFactorRange = 0.3 0.4
            End


            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "State_JustBuilt"
                    then CurDrawableSetTransitionAnimState("TRANS_JustBuilt_To_Idle")
                end
            EndScript
        End


        AnimationState                = JUST_BUILT
            StateName                = State_JustBuilt
            Animation
                AnimationName        = EXTornado_SKL.EXTornado_SMNA
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
            End
        End
        TransitionState = TRANS_JustBuilt_To_Idle
            Animation = BeingSummoned
                AnimationName = EXTornado_SMNA
                AnimationMode = ONCE
            End

        End
    End

    Draw = W3DTornadoDraw ModuleTag_TornadoDraw

        DecalTemplate
              Texture        = EXTornadoGround
            Style          = SHADOW_ALPHA_DECAL
            OpacityMin     = 5%
            OpacityMax     = 20%
            MaxRadius       = 300.0
            Color          = R:200 G:200 B:200 A:255
            OnlyVisibleToOwningPlayer = Yes
            RotationsPerMinute = 0.4
            SpiralAcceleration = 1.0
        End
        DecalCount        = 7
        DecalMaxRadius    = 300.0


    End


    Side            = Mordor
    EditorSorting    = UNIT
    ThreatLevel        = 0.0
    CommandPoints    = 0
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS

    VisionRange        = 200.0
    DisplayName        = OBJECT:NaturesWrath

    CommandSet        = EmptyCommandSet




    EvaEnemyObjectSightedEvent = None

    SoundAmbient    = TornadoLoopMS
    SoundMoveStart    = TornadoMoveStart

    VoiceAttack        = TornadoSelect
    VoiceMove        = TornadoSelect
    VoiceSelect        = TornadoSelect



    RadarPriority = UNIT
    KindOf = SELECTABLE NO_COLLIDE AIRCRAFT UNATTACKABLE MOVE_ONLY ORIENTS_TO_CAMERA CLICK_THROUGH HERO IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION NOT_AUTOACQUIRABLE IGNORES_SELECT_ALL PASS_EXPERIENCE_TO_PRODUCER

    Body = HighlanderBody ModuleTag_02
        MaxHealth         = 1.0
    End

    Behavior = AIUpdateInterface    ModuleTag_AIUpdateInterface
    End

    Behavior = PhysicsBehavior        ModuleTag_PhysicsBehavior
    End

    LocomotorSet
        Locomotor = TornadoLocomotor
        Condition = SET_NORMAL
        Speed     = 20
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = 60000
        MaxLifetime        = 60000
    End

    Behavior = FireWeaponUpdate ModuleTag_WINDY
        FireWeaponNugget
            WeaponName = TornadoWindWeapon
            FireDelay = 0
            OneShot = No
        End
    End



    Behavior = AttributeModifierAuraUpdate ModuleTag_FearMe
        StartsActive    = Yes
        BonusName        = EyeOfSauronFear
        RefreshDelay    = 1000
        Range            = 150.0
        ObjectFilter    = ANY +INFANTRY +CAVALRY
        TargetEnemy        = Yes
        MaxActiveRank    = 1
    End



    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL
    End

    Geometry = CYLINDER
    GeometryMajorRadius = 1.0
    GeometryMinorRadius = 1.0
    GeometryHeight        = 1.0
    GeometryIsSmall        = Yes



















End



Object ElrondWhirlwind




    ButtonImage = HSGaladriel_NaturesWrath
    SelectPortrait         = UPTornado
    Draw = W3DScriptedModelDraw ModuleTag_01
        OkToChangeModelColor = Yes
        DefaultModelConditionState
            Model           = EXWhirlwind
            ParticleSysBone = NONE WhirlwindDust01
            ParticleSysBone = NONE WhirlwindDust02
        End
    End

     Draw = W3DTornadoDraw ModuleTag_TornadoDraw

        DecalTemplate
              Texture        = EXWhirlwindGround
            Style          = SHADOW_ALPHA_DECAL
            OpacityMin     = 5%
            OpacityMax     = 40%
            MaxRadius       = 100.0
            Color          = R:255 G:255 B:255 A:255
            OnlyVisibleToOwningPlayer = Yes
            RotationsPerMinute = 0.4
            SpiralAcceleration = 1.0
        End
        DecalCount        = 7
        DecalMaxRadius    = 300.0


    End


    Side            = Mordor
    EditorSorting    = UNIT
    ThreatLevel        = 0.0
    CommandPoints    = 0
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS

    VisionRange        = 200.0
    DisplayName        = OBJECT:Whirlwind

    CommandSet        = EmptyCommandSet




    EvaEnemyObjectSightedEvent = None

    SoundAmbient    = TornadoLoopMS
    SoundMoveStart    = TornadoMoveStart

    VoiceAttack        = TornadoSelect
    VoiceMove        = TornadoSelect
    VoiceSelect        = TornadoSelect


    RadarPriority = UNIT
    KindOf = SELECTABLE NO_COLLIDE AIRCRAFT UNATTACKABLE MOVE_ONLY ORIENTS_TO_CAMERA CLICK_THROUGH HERO IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION NOT_AUTOACQUIRABLE IGNORES_SELECT_ALL PASS_EXPERIENCE_TO_PRODUCER

    Body = HighlanderBody ModuleTag_02
        MaxHealth         = 1.0
    End

    Behavior = AIUpdateInterface    ModuleTag_AIUpdateInterface
    End

    Behavior = PhysicsBehavior        ModuleTag_PhysicsBehavior
    End

    LocomotorSet
        Locomotor = TornadoLocomotor
        Condition = SET_NORMAL
        Speed     = 20
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = 60000
        MaxLifetime        = 60000
    End

    Behavior = FireWeaponUpdate ModuleTag_WINDY
        FireWeaponNugget
            WeaponName = WhirlwindWindWeapon
            FireDelay = 0
            OneShot = No
        End
    End



    Behavior = AttributeModifierAuraUpdate ModuleTag_FearMe
        StartsActive    = Yes
        BonusName        = EyeOfSauronFear
        RefreshDelay    = 1000
        Range            = 150.0
        ObjectFilter    = ANY +INFANTRY +CAVALRY
        TargetEnemy        = Yes
        MaxActiveRank    = 1
    End



    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL
        FadeTime = 4000
            FadeDelay = 1000
    End

    Geometry = CYLINDER
    GeometryMajorRadius = 1.0
    GeometryMinorRadius = 1.0
    GeometryHeight        = 1.0
    GeometryIsSmall        = Yes















End


Object ElvenWhirlpool



    Draw = W3DScriptedModelDraw ModuleTag_Draw
        DefaultModelConditionState
            Model = EXWhirl02

            ParticleSysBone NONE WhirlpoolMist04Start

            ParticleSysBone NONE WhirlpoolMist
            ParticleSysBone NONE WhirlpoolMist02
            ParticleSysBone NONE WhirlpoolMist03
            ParticleSysBone NONE WhirlpoolMist04
            ParticleSysBone NONE WhirlpoolMist05
            ParticleSysBone NONE WhirlpoolFoam


            ParticleSysBone NONE WhirlpoolFlashes01
            ParticleSysBone NONE WhirlpoolSparks
        End
    End


    Side                = Elves
    EditorSorting        = UNIT
    ThreatLevel            = 0.0
    CommandPoints        = 0
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_IMMUNE

    ShroudClearingRange        = GOOD_FIRE_SHIP_WHIRLPOOL_RADIUS

    CommandSet        = EmptyCommandSet

    Scale            = 2.0






    SoundAmbient             = ShipWhirlpoolAttack

    EvaEnemyObjectSightedEvent = None



    RadarPriority = UNIT
    KindOf = NO_COLLIDE UNATTACKABLE MOVE_ONLY CLICK_THROUGH IGNORE_FOR_VICTORY IGNORE_FOR_EVA_SPEECH_POSITION NOT_AUTOACQUIRABLE IGNORES_SELECT_ALL

    Body = ActiveBody ModuleTag_Body
        MaxHealth         = 200000
    End

    Behavior = AIUpdateInterface ModuleTag_AIUpdateInterface
    End

    Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
    End

    LocomotorSet
        Locomotor = WhirlpoolLocomotor
        Condition = SET_NORMAL
        Speed     = 0
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = GOOD_FIRE_SHIP_WHIRLPOOL_TIMEOUT
        MaxLifetime        = GOOD_FIRE_SHIP_WHIRLPOOL_TIMEOUT
    End

    Behavior = FireWeaponUpdate ModuleTag_Whirly
        FireWeaponNugget
            WeaponName    = WhirlpoolWeapon
            FireDelay    = 0
            OneShot        = No
        End
    End

    Behavior = SlowDeathBehavior ModuleTag_Death
        DeathTypes = ALL
        DestructionDelay = 5000
        FadeTime = 4000
        FadeDelay = 1000
    End

    Geometry            = CYLINDER
    GeometryMajorRadius = 1.0
    GeometryMinorRadius = 1.0
    GeometryHeight        = 1.0
    GeometryIsSmall        = Yes

End


Object AngmarShadeWolf



    SelectPortrait = KUWerewolfPortrait


    ButtonImage = HIWerewolf

    Draw = W3DScriptedModelDraw ModuleTag_BodyDraw

        OkToChangeModelColor = Yes

        ExtraPublicBone    = B_PASSENGER01




        ModelConditionState = NONE
            Model = KUWWolf_SKN
            ParticleSysBone = None SoWolf_Ambient_fog01
            ParticleSysBone = None SoWolf_Ambient_Embers01
            ParticleSysBone = "Bip L Finger2" SoWolf_Ambient_fog FollowBone:Yes
            ParticleSysBone = "Bip L Finger2" SoWolf_Ambient_Embers FollowBone:Yes
            ParticleSysBone = "Bip R Finger2" SoWolf_Ambient_fog FollowBone:Yes
            ParticleSysBone = "Bip R Finger2" SoWolf_Ambient_Embers FollowBone:Yes
        End


        IdleAnimationState
            StateName = State_Idle
            Animation = Breathe
                AnimationName = KUWWolf_SKL.KUWWolf_IDLA
                AnimationMode = ONCE
                AnimationBlendTime = 10
                AnimationPriority = 3
            End
            Animation = LookAround
                AnimationName = KUWWolf_SKL.KUWWolf_IDLB
                AnimationMode = ONCE
                AnimationBlendTime = 10
                AnimationPriority = 2
            End
            Animation = SnortLikeABull
                AnimationName = KUWWolf_SKL.KUWWolf_IDLC
                AnimationMode = ONCE
                AnimationBlendTime = 10
                AnimationPriority = 1
            End

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "State_JustBuilt"
                    then CurDrawableSetTransitionAnimState("TRANS_JustBuilt_To_Idle")
                end
                if Prev == "State_AboutToHitGround"
                    then CurDrawableSetTransitionAnimState("TRANS_AboutToHitGround_To_Idle")
                end
            EndScript
            ParticleSysBone = None SoWolf_Ambient_snowFollowBone:Yes
        End

        AnimationState                    =    DYING DEATH_1
            Animation                =    Dying
                AnimationName            =    KUWWolf_SKL.KUWWolf_DIEA
                AnimationMode            =    ONCE
            End

        End

        AnimationState                    =    DYING DEATH_2
            Animation                =    FadingOut
                AnimationName            =    KUWWolf_SKL.KUWWolf_RORA
                AnimationMode            =    ONCE
            End
        End



        AnimationState                    =    EATING
            FrameForPristineBonePositions         = 99
            Animation                =    DoingHorribleThingToGrabbedGuy
                AnimationName            =    KUWWolf_SKL.KUWWolf_SPCC
                AnimationMode            =    ONCE
                AnimationBlendTime        =    0
            End

        End

















        AnimationState            = JUST_BUILT
            StateName = State_JustBuilt
            Animation
                AnimationName = KUWWolf_SKL.KUWWolf_RORA
                AnimationMode = MANUAL
                AnimationBlendTime = 0
            End
        End

        TransitionState = TRANS_JustBuilt_To_Idle
            Animation = BeingSummoned
                AnimationName = KUWWolf_SKL.KUWWolf_RORA
                AnimationMode = ONCE
            End
        End

        AnimationState = FIRING_OR_PREATTACK_B
            Animation = CrackThatWhip
                AnimationName = KUWWolf_SKL.KUWWolf_WIPA
                AnimationMode = ONCE
            End

        End

        AnimationState            = SPECIAL_WEAPON_ONE
            Animation
                AnimationName    = KUWWolf_SKL.KUWWolf_SPCB
                AnimationMode   = ONCE
            End
        End

        AnimationState            = SPECIAL_WEAPON_TWO
            Animation
                AnimationName    = KUWWolf_SKL.KUWWolf_CHRA
                AnimationMode   = ONCE
            End
        End

        AnimationState            = SPECIAL_WEAPON_THREE
            Animation
                AnimationName    = KUWWolf_SKL.KUWWolf_SPCA
                AnimationMode   = ONCE
            End
        End

        AnimationState            = TURN_RIGHT
            Animation            = TurningRight
                AnimationName    = KUWWolf_SKL.KUWWolf_TRNR
                AnimationMode   = LOOP
                AnimationBlendTime = 50
            End
        End

        AnimationState            = TURN_LEFT
            Animation            = TurningLeft
                AnimationName    = KUWWolf_SKL.KUWWolf_TRNL
                AnimationMode   = LOOP
                AnimationBlendTime = 50
            End
        End

        AnimationState                = MOVING
            Animation            = Running
                AnimationName        = KUWWolf_SKL.KUWWolf_RUNA
                AnimationMode       = LOOP
                AnimationBlendTime     = 10
                Distance        = 112

            End
            Flags                       = RANDOMSTART
            FXEvent    = Frame:11 FireWhenSkipped Name:FX_WolfRightFootStep
            FXEvent    = Frame:27 FireWhenSkipped Name:FX_WolfLeftFootStep

        End


        AnimationState            = FIRING_OR_PREATTACK_A
            Animation
                AnimationName    = KUWWolf_SKL.KUWWolf_ATKA
                AnimationMode    = ONCE
                UseWeaponTiming    = Yes
            End
            Animation
                AnimationName    = KUWWolf_SKL.KUWWolf_ATKB
                AnimationMode    = ONCE
                UseWeaponTiming    = Yes
            End




            FXEvent    = Frame:20 Name: FX_SOWolfHit
        End

    End


    DisplayName      = OBJECT:ShadeofWolf

    Side = Neutral
    EditorSorting = UNIT
    ThreatLevel = BALROG_THREAT_LEVEL
    ThingClass = CHARACTER_UNIT

    CrusherLevel   = 4
    CrushWeapon = BalrogCrush
    MinCrushVelocityPercent = MINCRUSHVELOCITYPERCENT_STANDARD
    CrushDecelerationPercent = CRUSHDECELERATIONPERCENT_STANDARD

    CrushKnockback     = 40
    CrushZFactor     = 1.0

    Scale = 1.6

    TransportSlotCount = TRANSPORTSLOTCOUNT_MONSTER

    WeaponSet
        Conditions = None
        Weapon = PRIMARY    AngmarShadeofWolfSwipe
    End

    ArmorSet
        Conditions      = None
        Armor           = ShadeofWolfArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange = VISION_BALROG
    ShroudClearingRange = SHROUD_CLEAR_BALROG

    ShockwaveResistance = SHOCKWAVE_RESISTANCE_ALWAYS
    CommandSet = ShadeofWolfCommandSet
    CanPathThroughGates    = No
    IsTrainable = No

    DeadCollideSize = LARGE




    VoiceAttack            = ShadeWolfAttack
    VoiceAttackCharge        = ShadeWolfAttack
    VoiceAttackMachine    = ShadeWolfAttack
    VoiceAttackStructure    = ShadeWolfAttack
    VoiceGuard            = ShadeWolfIdle
    VoiceMove            = ShadeWolfIdle
    VoiceSelect            = ShadeWolfIdle
    VoiceSelectBattle        = ShadeWolfIdle

    SoundAmbient        = ShadeWolfIdle
    SoundImpact            = ImpactHorse

    #include "..\includes\StandardUnitEvaEvents.inc"

    EvaEnemyObjectSightedEvent    = DiscoveredEnemyBalrog

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: BalrogFootstep            Animation: KUWWolf_SKL.KUWWolf_RUNA Frames: 42 17
        AnimationSound = Sound: BalrogFootstep            Animation: KUWWolf_SKL.KUWWolf_TRNR Frames: 21 52
        AnimationSound = Sound: BalrogFootstep            Animation: KUWWolf_SKL.KUWWolf_TRNL Frames: 21 52

        AnimationSound = Sound: ShadeWolfSummonPack        Animation: KUWWolf_SKL.KUWWolf_SPCB Frames: 1
        AnimationSound = Sound: ShadeWolfLament            Animation: KUWWolf_SKL.KUWWolf_CHRA Frames: 21

        AnimationSound = Sound: ShadeWolfSummonHowl        Animation: KUWWolf_SKL.KUWWolf_DIEA Frames: 25
        AnimationSound = Sound: ShadeWolfSummonHowl        Animation: KUWWolf_SKL.KUWWolf_RORA Frames: 21
        AnimationSound = Sound: ShadeWolfSummonHowl        Animation: KUWWolf_SKL.KUWWolf_SPCC Frames: 50

    End




    RadarPriority = UNIT
  KindOf          = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK NO_FREEWILL_ENTER PATH_THROUGH_INFANTRY SCARY BIG_MONSTER CAN_ATTACK_WALLS SUMMONED
  ThreatBreakdown MordorBalrog_DetailedThreat
    AIKindOf = SIEGEWEAPON
  End

  Body            = ActiveBody ModuleTag_02
    MaxHealth         = SHADEOFWOLF_HEALTH
  End

  Behavior = StancesBehavior ModuleTag_StancesBehavior
    StanceTemplate = FighterHorde
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle    = Yes ATTACK_BUILDINGS
    MoodAttackCheckRate            = 500
    AILuaEventsList                = BalrogFunctions
  End

  LocomotorSet
    Locomotor     = ShadeofWolfLocomotor
    Condition     = SET_NORMAL
    Speed         = 144
  End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End


      Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL +FADED
        DestructionDelay = 6000
        FadeDelay            = 4200
        FadeTime            = 3000
        FX = INITIAL FX_SoWolfUnsummonInitial
            FX = FINAL FX_SoWolfUnsummonFinal
            DeathFlags = DEATH_1
    End

      Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        DestructionDelay = 3850
        FadeDelay            = 1000
        FadeTime            = 2666
            FX = INITIAL FX_SoWolfUnsummon
            DeathFlags = DEATH_2
    End





    Behavior = SpecialPowerModule ModuleTag_LamentStarter
        SpecialPowerTemplate      = SpecialAbilityDarkLordsLament
        UpdateModuleStartsAttack  = Yes
        StartsPaused          = No
        InitiateSound        = BalrogRoar
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_LamentWeaponFireUpdate
        SpecialPowerTemplate    = SpecialAbilityDarkLordsLament
        SpecialWeapon            = AngmarDarkLordsLamentWeapon
        WhichSpecialWeapon        = 2
        StartAbilityRange        = 10.0

        SkipContinue            = Yes
        UnpackTime            = 1000
        PackTime            = 2000
        MustFinishAbility        = Yes
    End




    Behavior = SpecialPowerModule ModuleTag_CallPackStarter
        SpecialPowerTemplate        = SpecialAbilityCallPack
        TriggerFX             = FX_SoWolf_SummonPack
        UpdateModuleStartsAttack    = Yes
        StartsPaused            = No
        InitiateSound            = WargHowlAbility
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FloodUpdate
        SpecialPowerTemplate    = SpecialAbilityCallPack

        UnpackTime              = 500
        PackTime                = 1000

        StartAbilityRange     = 100.0

        SpecialWeapon         = ShadeCallthePack
        WhichSpecialWeapon     = 1
    End





    Behavior = SpecialPowerModule ModuleTag_SpecialPowerModuleGrabStarter
        SpecialPowerTemplate        = SpecialAbilityAngmarShadeEatMeGrab
        UpdateModuleStartsAttack    = Yes
        StartsPaused            = No
        InitiateSound            = BalrogChuckle
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WeaponFireSpecialAbilityUpdateGrab
        SpecialPowerTemplate        = SpecialAbilityAngmarShadeEatMeGrab
        SkipContinue            = Yes
        UnpackTime            = 533


        StartAbilityRange        = 12.0

        SpecialWeapon            = AngmarShadeChompWeapon
        ChainedButton            = Command_SpecialAbilityShadeChompFlingPassenger
        CustomAnimAndDuration        = AnimState:EATING AnimTime:3333
        MustFinishAbility        = Yes

        TriggerAttributeModifier    = SharkuManEater
        AttributeModifierDuration    = 20000
        TriggerSound                = SharkuManEaterEatingMS
        BusyForDuration                = 5000
    End

    Behavior = PlayerHealSpecialPower ModuleTag_SpecialPowerModuleFlingPassengerStarter
        SpecialPowerTemplate        = SpecialAbilityAngmarShadeEatMeDrop
        UpdateModuleStartsAttack    = Yes
        StartsPaused            = No
        HealAmount            = 1.0
        HealAsPercent            = Yes
        HealAffects            = HERO
        HealRadius            = 0.0
        HealFX                = FX_SpellHealUnitHealBuff
    End

    Behavior = FlingPassengerSpecialAbilityUpdate ModuleTag_FlingPassengerSpecialAbilityUpdate
        SpecialPowerTemplate            = SpecialAbilityAngmarShadeEatMeDrop
        UnpackTime                = 1250
        FlingPassengerVelocity            = X:0 Y:0 Z:0
        FlingPassengerLandingWarhead        = AngmarShadeChompWarhead
        MustFinishAbility        = Yes
    End

    Behavior = TransportContain ModuleTag_09
        ObjectStatusOfContained = UNSELECTABLE
        PassengerFilter            = ANY +INFANTRY

        Slots                    = 1
        ShowPips                = No
        AllowEnemiesInside        = Yes
        AllowNeutralInside        = Yes
        AllowAlliesInside        = No

        DestroyRidersWhoAreNotFreeToExit = Yes
        ForceOrientationContainer = No
        PassengerBonePrefix = PassengerBone:B_PASSENGER01        KindOf:INFANTRY

    End






    Behavior = AISpecialPowerUpdate ManEaterAI
        CommandButtonName = Command_SpecialAbilityShadeChomp
        SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
    End

    Behavior = AISpecialPowerUpdate CallThePackAI
        CommandButtonName = Command_SpecialAbilityCallPack
        SpecialPowerAIType = AI_SPECIAL_POWER_RANGED_AOE_ATTACK
    End

    Behavior = AISpecialPowerUpdate LamentAI
        CommandButtonName = Command_SpecialAbilityDarkLordsLament
        SpecialPowerRange = 100
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_DEBUFF
    End



    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = BALROG_LIFETIME
        MaxLifetime        = BALROG_LIFETIME
        DeathType        = FADED
    End

    Behavior = CreateObjectDie ModuleTag_CrushUnitsOnDeath
        CreationList = OCL_BalrogDie
     End

    Geometry            = CYLINDER
    GeometryMajorRadius = 18.0
    GeometryHeight        = 90.0
      GeometryOffset        = X:-20 Y:0 Z:0
    GeometryIsSmall        = No

    Shadow                = SHADOW_VOLUME
    ShadowSizeX            = 100
    ShadowSizeY            = 100
    ShadowTexture        = ShadowI
End


Object ShadeCallthePack

     Draw = W3DScriptedModelDraw ModuleTag_01
        DefaultModelConditionState
              Model = None
        End
      End
    EditorSorting   = SYSTEM
    KindOf = NO_COLLIDE IMMOBILE UNATTACKABLE INERT
    ForceLuaRegistration = Yes


    Body = ImmortalBody ModuleTag_02
        MaxHealth = 1
        InitialHealth = 1
    End

    Behavior = DeletionUpdate ModuleTag_03
        MinLifetime = 10000
        MaxLifetime = 10000
    End

    Behavior = FloodUpdate ModuleTag_PackCentral
        AngleOfFlow = 0
        DirectionIsRelative = Yes

        FloodMember
            MemberTemplateName = PackWolf
            ControlPointOffsetOne =        X:-100 Y:10 Z:0
            ControlPointOffsetTwo =        X:-60 Y:35 Z:0
            ControlPointOffsetThree =    X:-10 Y:50 Z:0
            ControlPointOffsetFour =    X:30 Y:50 Z:0
            MemberSpeed = 16
        End

        FloodMember
            MemberTemplateName = PackWolf
            ControlPointOffsetOne =        X:-100 Y:5 Z:0
            ControlPointOffsetTwo =        X:-60 Y:17.5 Z:0
            ControlPointOffsetThree =    X:-10 Y:25 Z:0
            ControlPointOffsetFour =    X:30 Y:25 Z:0
            MemberSpeed = 21
        End

        FloodMember
            MemberTemplateName = PackWolf
            ControlPointOffsetOne =        X:-100 Y:0 Z:0
            ControlPointOffsetTwo =        X:-60 Y:0 Z:0
            ControlPointOffsetThree =    X:-10 Y:0 Z:0
            ControlPointOffsetFour =    X:30 Y:0 Z:0
            MemberSpeed = 25
        End

        FloodMember
            MemberTemplateName = PackWolf
            ControlPointOffsetOne =        X:-100 Y:-5 Z:0
            ControlPointOffsetTwo =        X:-60 Y:-17 Z:0
            ControlPointOffsetThree =    X:-10 Y:-25 Z:0
            ControlPointOffsetFour =    X:30 Y:-25 Z:0
            MemberSpeed = 21
        End

        FloodMember
            MemberTemplateName = PackWolf
            ControlPointOffsetOne =        X:-100 Y:-10 Z:0
            ControlPointOffsetTwo =        X:-60 Y:-35 Z:0
            ControlPointOffsetThree =    X:-10 Y:-50 Z:0
            ControlPointOffsetFour =    X:30 Y:-50 Z:0
            MemberSpeed = 16
        End

    End

    Geometry            = BOX
    GeometryMajorRadius = 10.0
    GeometryMinorRadius = 1.0
    GeometryHeight      = 3.0
    GeometryIsSmall     = No
    Shadow              = NONE
End


Object RadagastCrebain



    ButtonImage         = HICrebain
    SelectPortrait      = UPCrebain

    Draw = W3DHordeModelDraw ModuleTag_01


        WadingParticleSys = EntRipples

        StaticModelLODMode = Yes

        DefaultModelConditionState
            Model                    = Crebain_SKN
        End

        IdleAnimationState
            StateName                = Idle
            Animation                = IdleA
                AnimationName       = Crebain_SKL.Crebain_MOV
                AnimationMode       = LOOP
                AnimationBlendTime  = 30
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState                = DYING DEATH_1
            Animation
                AnimationName        = Crebain_SKL.Crebain_MOV
                AnimationMode        = ONCE
                AnimationBlendTime    = 15
            End
        End


        AnimationState                = MOVING
            Animation                = RunA
                AnimationName       = Crebain_SKL.Crebain_MOV
                AnimationMode       = LOOP
                AnimationBlendTime  = 30

            End
        End

        AnimationState                =    SELECTED
            StateName                =    State_Selected
            Animation                =    AtAttention
                AnimationName        =    Crebain_SKL.Crebain_MOV
                AnimationMode        =    LOOP
                AnimationBlendTime  = 30
            End
        End

    End




    Side            = Neutral
    EditorSorting    = UNIT
    ThreatLevel        = 0.0
    CommandPoints    = 0
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_IMMUNE

    VisionRange         = 300
    ShroudClearingRange = 400
    DisplayName         = OBJECT:Crebain

    CommandSet        = EmptyCommandSet




    EvaEnemyObjectSightedEvent = None

    SoundAmbient = CrebainAmbientLoop
    SoundMoveStart = CrebainSelect

    VoiceSelect = CrebainSelect




    RadarPriority = UNIT
    KindOf = PRELOAD CAN_CAST_REFLECTIONS SCORE NO_FREEWILL_ENTER IGNORE_FOR_VICTORY CANNOT_RETALIATE SELECTABLE MONSTER PATH_THROUGH_EACH_OTHER UNATTACKABLE
    SelectionPriority = SELECTION_PRIORITY_CREBAIN

    Body = ActiveBody ModuleTag_Body
        MaxHealth         = 2000
        MaxHealthDamaged  = 1000
    End


     Behavior = GiantBirdAIUpdate ModuleTag_GiantBirdAI
        AutoAcquireEnemiesWhenIdle     = No ATTACK_BUILDINGS
        MoodAttackCheckRate            = 500
        AILuaEventsList                = DragonStrikeDragonFunctions
        FollowThroughDistance          = 0
        FollowThroughCheckStep         = 0
        FollowThroughGradient          = 0

     End


    Behavior = PhysicsBehavior        ModuleTag_PhysicsBehavior
    End

    LocomotorSet
        Locomotor = FellBeastLocomotor
        Condition = SET_NORMAL
        Speed     = 100
    End


    Behavior = AttributeModifierAuraUpdate ModuleTag_FearMe
        StartsActive    = Yes
        BonusName        = EyeOfSauronFear
        RefreshDelay    = 1000
        Range            = 150.0
        ObjectFilter    = ANY +INFANTRY +CAVALRY
        TargetEnemy        = Yes
        MaxActiveRank    = 1
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Debuff
        StartsActive    = Yes
        BonusName        = GenericDebuff
        AntiCategory    = LEADERSHIP BUFF
        Range            = 200
        RefreshDelay    = 2000
        ObjectFilter    = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HORDE -HERO ENEMIES
        TargetEnemy        = Yes
    End



    Behavior = StrafeAreaUpdate ModuleTag_Strafe
    End




    Behavior = StealthDetectorUpdate StealthDetectorUpdateModuleTag
        DetectionRate         = 500
    End

    Behavior = SlowDeathBehavior ModuleTag_NormalDeath
        DeathTypes          = ALL -FADED
        DestructionDelay    = 500
        ShadowWhenDead      = No
    End

    Behavior = SlowDeathBehavior ModuleTag_FadedSlowDeath
        DeathTypes          = NONE +FADED
        FadeDelay           = 0
        FadeTime            = 1000
        DestructionDelay    = 1000
        ShadowWhenDead      = No
     End

  Behavior = SquishCollide ModuleTag_Splat

  End

    Scale = 0.9
    Geometry = CYLINDER
    GeometryMajorRadius = 50.0
    GeometryMinorRadius = 50.0
    GeometryHeight        = 61.0
    GeometryIsSmall        = No

    Shadow            = SHADOW_ADDITIVE_DECAL_DYNAMIC
    ShadowSizeX        = 400
    ShadowSizeY        = 400
    ShadowTexture    = MUSauronEye

    ShadowOpacityStart = 0
    ShadowOpacityFadeInTime = 1000
    ShadowOpacityPeak = 255
    ShadowOpacityFadeOutTime = 1000
    ShadowOpacityEnd = 0

    ShadowOverrideLODVisibility = Yes
End

