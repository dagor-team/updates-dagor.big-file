Object CreepGroﬂeSpinne

    SelectPortrait = HPShelob

    Draw = W3DScriptedModelDraw ModuleTag_01

        RandomTexture = mushelobh.tga 0 mushelobh.tga
        RandomTexture = mugntspdr.tga 0 mushelobh.tga
        RandomTexture = mugntspdr2.tga 0 mushelobh.tga

        DefaultModelConditionState
            Model               = MUShelob_SKN
            Skeleton            = MUShelob_SKL
        End

        IdleAnimationState
            Animation           = IDLA
                AnimationName    = MUShelob_IDLA
                AnimationMode    = ONCE
            End
            Flags               = RANDOMSTART
        End

        AnimationState            = DYING
            Animation           = DIEA
                AnimationName    = MUShelob_DIEA
                AnimationMode    = ONCE
            End
        End

        AnimationState            =  FIRING_OR_PREATTACK_A
            Animation                        = ATKA
                AnimationName                = MUShelob_ATKA
                AnimationMode                = ONCE
                AnimationSpeedFactorRange    = 0.8 1.25
            End
        End

        AnimationState            = TURN_LEFT
            StateName            = Turn
            Animation            = Walk
                AnimationName    = MUShelob_TRNL
                AnimationMode    = LOOP
            End
        End

        AnimationState            = TURN_RIGHT
            StateName            = Turn
            Animation            = Walk
                AnimationName    = MUShelob_TRNR
                AnimationMode    = LOOP
            End
        End

        AnimationState            = MOVING
            Animation            = RUNA
                AnimationName    = MUShelob_RUNA
                AnimationMode    = LOOP
            End
        End

        AnimationState            = MOVING BACKING_UP
            Animation           = BAKA
                AnimationName    = MUShelob_BAKA
                AnimationMode    = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState            = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName    = MUShelob_FLYA
                AnimationMode    = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState            = STUNNED
            Animation            = Stun
                AnimationName    = MUShelob_LNDA
                AnimationMode    = ONCE
            End
        End

        AnimationState            = STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName    = MUShelob_GTPA
                AnimationMode    = ONCE
            End
        End

        AnimationState            = HIT_REACTION HIT_LEVEL_1
            Animation            = Hit_Level_1_a
                AnimationName    = MUShelob_HITA
                AnimationMode    = ONCE
            End
        End

    End


    Side                = Neutral
    EditorSorting        = UNIT
    ThreatLevel            = 1.0
    VisionRange            = 180.0
    DisplayName            = OBJECT:GiantSpider
    CrushableLevel        = 2
    BuildCost            = 100
    BuildTime            = 15
    CommandPoints             = 10
    CommandSet   =   WildBigSpiderCreepCommandSet
    CrushableLevel = 2
    CrusherLevel                = 2
    CrushWeapon                 = SpiderRiderCrush
    MinCrushVelocityPercent = MINCRUSHVELOCITYPERCENT_STANDARD
    CrushDecelerationPercent = CRUSHDECELERATIONPERCENT_STANDARD

    WeaponSet
        Conditions            = None
        Weapon                = PRIMARY    LargeSpiderMandibles
        AutoChooseSources    = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = BroodmotherArmor
        DamageFX        = NormalDamageFX
    End





    VoiceAttack            = ShelobVoiceAttack
    VoiceAttackCharge        = ShelobVoiceAttack
    VoiceAttackMachine    = ShelobVoiceAttack
    VoiceAttackStructure    = ShelobVoiceAttack
    VoiceCreated        = ShelobVoiceSelect
    VoiceFullyCreated     = ShelobVoiceSelect
    VoiceMove            = ShelobVoiceMove
    VoiceMoveToCamp        = ShelobVoiceMove
    VoiceMoveWhileAttacking    = ShelobVoiceMove
    VoicePriority        = 50
    VoiceRetreatToCastle    = ShelobVoiceDie
    VoiceSelect            = ShelobVoiceSelect
    VoiceSelectBattle     = ShelobVoiceSelect
    VoiceGuard            = ShelobVoiceMove

    SoundAmbient        = SpiderFoleyAmbientLoop
    SoundImpact            = ImpactHorse
    SoundMoveLoop        = SpiderMoveLoop




    #include "..\includes\StandardUnitEvaEvents.inc"


    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: ShelobPoisonStingerStrikeSwish    Animation:MUShelob_SKL.MUShelob_SPCA     Frames:4
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_TRNL     Frames:1 11
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_TRNR     Frames:1 11
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_WLKA     Frames:1 17 33
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_RUNA     Frames:1 5 9
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_GTPA     Frames:1 16
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_ATKA     Frames:0 39
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_ATKB     Frames:0 100
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_TRNL     Frames:0 5 10 15
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_TRNR     Frames:0 5 10 15
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_WLKA     Frames:0 8 16 24 32 40
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_RUNA     Frames:0 4 8
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_GTPA     Frames: 10 20
        AnimationSound = Sound: ShelobFootstepAttack     Animation:MUShelob_SKL.MUShelob_ATKA     Frames:26
        AnimationSound = Sound: ShelobFootstepAttack     Animation:MUShelob_SKL.MUShelob_ATKB     Frames:26
        AnimationSound = Sound: ShelobVoiceHurt     Animation:MUShelob_SKL.MUShelob_HITA    Frames:0
        AnimationSound = Sound: ShelobAttackScreech    Animation:MUShelob_SKL.MUShelob_ATKA    Frames:20
        AnimationSound = Sound: ShelobAttackScreech    Animation:MUShelob_SKL.MUShelob_ATKB    Frames:20
        AnimationSound = Sound: TrollBodyfall        Animation:MUShelob_SKL.MUShelob_LNDA    Frames:4
        AnimationSound = Sound: TrollBodyfall        Animation:MUShelob_SKL.MUShelob_DIEA    Frames:6


    End



    RadarPriority    = UNIT
    KindOf            = PRELOAD MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT ENVIRONMENT SELECTABLE

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle    = Yes
        MoodAttackCheckRate            = 500
        AILuaEventsList                = ShelobFunctions
        MaxCowerTime                = 7500
        MinCowerTime                = 5000
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    LocomotorSet
        Locomotor     = GiantSpiderLocomotor
        Condition     = SET_NORMAL
        Speed         = 60
    End

    Body = ActiveBody ModuleTag_Body
        MaxHealth = 1000
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes            = ALL
        SinkDelay            = 3000
        SinkRate            = 6.5
        DestructionDelay        = 8000
        FX                = INITIAL FX_GiantSpiderDie
        Sound                = INITIAL ShelobVoiceDie
    End

    Behavior = SquishCollide ModuleTag_06

    End


    Behavior = SlavedUpdate ModuleTag_Slave
        GuardMaxRange        = 700.0
        GuardWanderRange    = 400.0
        UseSlaverAsControlForEvaObjectSightedEvents = Yes
    End

    EvaEnemyObjectSightedEvent = DiscoveredEnemySpiderlings
     EvaEnemyObjectSightedAfterRespawnEvent = DiscoveredEnemySpiderlings


    Behavior = WeaponSetUpgrade ModuleTag_VenomUpgrade
        TriggeredBy                = Upgrade_WildSpiderVenomSacks
        CustomAnimAndDuration    = AnimState:USER_1 AnimTime:0
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Spinnendasein
        StartsActive      = Yes
        RefreshDelay      = 2000
        Range             = 100
        TargetEnemy       = Yes
        AntiCategory      = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName         = SpinnendaseinDebuff
        ObjectFilter      = ANY +CAVALRY -GoblinSpiderRider -MordorSchwarzeReiter -MordorSchwarzeReiterHorde -WildZuchtspinnen -WildBannerSpiderRider -INFANTRY -STRUCTURE -BASE_FOUNDATION -HERO -MACHINE -SHIP -DOZER
    End


    Geometry            = CYLINDER
    GeometryMajorRadius = 50.0
    GeometryMinorRadius = 50.0
    GeometryHeight        = 30.0
    GeometryIsSmall        = No


      Shadow = SHADOW_DECAL
      ShadowSizeX = 55
      ShadowSizeY = 30
      ShadowOffsetX = -8
      ShadowTexture = ShadowI
      Scale        = 0.8
End


ChildObject CreepSpinneForLair CreepGroﬂeSpinne
    Scale                = 0.92
    DisplayName          = OBJECT:GiantSpider
    CommandPoints        = 10
End


ChildObject WildBrutmutter CreepGroﬂeSpinne

    SelectPortrait = UPBrutmutter
    ButtonImage     = HSBrutmutter

    Draw = W3DScriptedModelDraw ModuleTag_01

        DefaultModelConditionState
            Model               = wubrutmutter
            Skeleton            = MUShelob_SKL
        End

        IdleAnimationState
            Animation           = IDLA
                AnimationName    = MUShelob_IDLA
                AnimationMode    = ONCE
            End
            Flags               = RANDOMSTART
        End

        AnimationState            = DYING
            Animation           = DIEA
                AnimationName    = MUShelob_DIEA
                AnimationMode    = ONCE
            End
        End

        AnimationState            =  FIRING_OR_PREATTACK_A
            Animation                        = ATKA
                AnimationName                = MUShelob_ATKA
                AnimationMode                = ONCE
                AnimationSpeedFactorRange    = 0.8 1.25
            End
        End

        AnimationState            = TURN_LEFT
            StateName            = Turn
            Animation            = Walk
                AnimationName    = MUShelob_TRNL
                AnimationMode    = LOOP
                AnimationSpeedFactorRange    = 0.8 0.8
            End
        End

        AnimationState            = TURN_RIGHT
            StateName            = Turn
            Animation            = Walk
                AnimationName    = MUShelob_TRNR
                AnimationMode    = LOOP
                AnimationSpeedFactorRange    = 0.8 0.8
            End
        End

        AnimationState            = MOVING
            Animation            = RUNA
                AnimationName    = MUShelob_RUNA
                AnimationMode    = LOOP
                AnimationSpeedFactorRange    = 0.8 0.8
            End
        End

        AnimationState            = MOVING BACKING_UP
            Animation           = BAKA
                AnimationName    = MUShelob_BAKA
                AnimationMode    = LOOP
                AnimationSpeedFactorRange    = 0.8 0.8
            End
            Flags               = RANDOMSTART
        End

        AnimationState            = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName    = MUShelob_FLYA
                AnimationMode    = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState            = STUNNED
            Animation            = Stun
                AnimationName    = MUShelob_LNDA
                AnimationMode    = ONCE
            End
        End

        AnimationState            = STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName    = MUShelob_GTPA
                AnimationMode    = ONCE
            End
        End

        AnimationState            = HIT_REACTION HIT_LEVEL_1
            Animation            = Hit_Level_1_a
                AnimationName    = MUShelob_HITA
                AnimationMode    = ONCE
            End
        End

    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    WeaponSet
        Conditions            = None
        Weapon                = PRIMARY BrutmutterMandibles
        AutoChooseSources     = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = BroodmotherArmor
        DamageFX        = NormalDamageFX
    End
	
    DisplayName          = OBJECT:Brutmutter
    CommandPoints        = 15
    KindOf               = PRELOAD MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT ENVIRONMENT SELECTABLE FS_FACTORY

    Behavior = QueueProductionExitUpdate ModuleTag_11
        UnitCreatePoint         = X:-40.0 Y:0.0 Z:0.0
        NaturalRallyPoint       = X:0 Y:0.0 Z:0.0
        ExitDelay               = 300
        NoExitPath              = Yes
    End


    CommandSet   =   WildBigSpiderCreepCommandSet

    Behavior = SpawnBehavior ModuleTag_SpawnFighters
        SpawnNumber             = 15
        InitialBurst            = 15
        SpawnTemplateName       = WildSpiderling_BigSpidersChild
        SpawnReplaceDelay       = 15000
        FadeInTime              = 1000
        SpawnInsideBuilding     = Yes
    End

    BuildCost            = 1000
    BuildTime            = 30

    Body = ActiveBody ModuleTag_Body
        MaxHealth = BROODMOTHER_HEALTHDAG
    End

    LocomotorSet
        Locomotor     = GiantSpiderLocomotor
        Condition     = SET_NORMAL
        Speed         = 50
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Spinnendasein
        StartsActive      = Yes
        RefreshDelay      = 2000
        Range             = 100
        TargetEnemy       = Yes
        AntiCategory      = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName         = SpinnendaseinDebuff
        ObjectFilter      = ANY +CAVALRY -GoblinSpiderRider -MordorSchwarzeReiter -MordorSchwarzeReiterHorde -WildZuchtspinnen -WildBannerSpiderRider -INFANTRY -STRUCTURE -BASE_FOUNDATION -HERO -MACHINE -SHIP -DOZER
    End

End

ChildObject CreepMittelgroﬂeSpinne CreepGroﬂeSpinne

    Scale                = 0.5

    Body = ActiveBody ModuleTag_Body
        MaxHealth = 250
    End

    Behavior = SlavedUpdate ModuleTag_Slave
        GuardMaxRange       = 500.0
        GuardWanderRange    = 200.0
        UseSlaverAsControlForEvaObjectSightedEvents = Yes
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Spinnendasein
        StartsActive      = Yes
        RefreshDelay      = 2000
        Range             = 100
        TargetEnemy       = Yes
        AntiCategory      = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName         = SpinnendaseinDebuff
        ObjectFilter      = ANY +CAVALRY -GoblinSpiderRider -MordorSchwarzeReiter -MordorSchwarzeReiterHorde -WildZuchtspinnen -WildBannerSpiderRider -INFANTRY -STRUCTURE -BASE_FOUNDATION -HERO -MACHINE -SHIP -DOZER
    End

    CommandPoints             = 0

    GeometryMajorRadius = 25.0
    GeometryMinorRadius = 25.0
    GeometryHeight        = 15.0

End

ChildObject CreepGebaudeSpinne CreepGroﬂeSpinne

    TransportSlotCount  = 1
    CommandPoints       = 0

    Behavior = SlavedUpdate ModuleTag_Slave
        GuardMaxRange        = 300
        GuardWanderRange    = 150
        UseSlaverAsControlForEvaObjectSightedEvents = Yes
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Spinnendasein
        StartsActive      = Yes
        RefreshDelay      = 2000
        Range             = 100
        TargetEnemy       = Yes
        AntiCategory      = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName         = SpinnendaseinDebuff
        ObjectFilter      = ANY +CAVALRY -GoblinSpiderRider -MordorSchwarzeReiter -MordorSchwarzeReiterHorde -WildZuchtspinnen -WildBannerSpiderRider -INFANTRY -STRUCTURE -BASE_FOUNDATION -HERO -MACHINE -SHIP -DOZER
    End

    Scale = 0.66

End




Object CreepKleineSpinne

    SelectPortrait = UPWild_Spiderlings



    Draw = W3DScriptedModelDraw ModuleTag_01
        OkToChangeModelColor = Yes
        DefaultModelConditionState
            Model               = MUGntSpdr_SKN
            Skeleton            = MUGntSpdr_SKL
        End

        IdleAnimationState
            Animation           = IDLA
                AnimationName    = MUGntSpdr_IDLA
                AnimationMode    = ONCE
            End
            Flags               = RANDOMSTART
        End

        AnimationState            = DYING BURNINGDEATH
            Animation
                AnimationName    = MUGntSpdr_DIEA
                AnimationMode    = ONCE
                AnimationBlendTime = 10
            End
        End

        AnimationState            = DYING
            Animation           = DIEA
                AnimationName    = MUGntSpdr_DIEA
                AnimationMode    = ONCE
            End
        End

        AnimationState            = BURNINGDEATH
            Animation
                AnimationName    = MUGntSpdr_MFDA
                AnimationMode    = LOOP
                Distance        = 40
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = MUGntSpdr_IDLA
                AnimationMode                = LOOP
            End
        End

        AnimationState            =  FIRING_OR_PREATTACK_A
            Animation                        = ATKA
                AnimationName                = MUGntSpdr_ATKA
                AnimationMode                = ONCE
                AnimationSpeedFactorRange    = 0.8 1.25
            End
        End



        AnimationState                        = CLIMBING
            StateName                        = STATE_Climbing
            Animation                        = Climbing
                AnimationName                = MUGNTSPDR_WALB
                AnimationMode                = LOOP
                AnimationBlendTime            = 10
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing") return end

            EndScript
        End
        TransitionState = Trans_RunningToClimbing
            Animation = Transition
                AnimationName = MUGNTSPDR_WALA
                AnimationMode = ONCE
            End
        End

        AnimationState                        = RAPPELLING
            StateName                        = STATE_Rappelling
            Animation                        = Rapelling
                AnimationName                = MUGNTSPDR_WALD
                AnimationMode                = LOOP
                AnimationBlendTime            = 10
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToRappelling") return end

            EndScript
        End
        TransitionState = Trans_RunningToRappelling
            Animation = Transition
                AnimationName = MUGNTSPDR_WALG
                AnimationMode = ONCE
            End
        End

        TransitionState = Trans_ClimbingToRunning
            Animation = Transition
                AnimationName = MUGNTSPDR_WALF
                AnimationMode = ONCE
            End
        End
        TransitionState = Trans_RappellingToRunning
            Animation = Transition
                AnimationName = MUGNTSPDR_WALE
                AnimationMode = ONCE
            End
        End


        AnimationState            = TURN_LEFT
            StateName            = Turn
            Animation            = Walk
                AnimationName    = MUGntSpdr_TRNL
                AnimationMode    = LOOP
            End
        End

        AnimationState            = TURN_RIGHT
            StateName            = Turn
            Animation            = Walk
                AnimationName    = MUGntSpdr_TRNR
                AnimationMode    = LOOP
            End
        End

        AnimationState            = MOVING
            Animation            = RUNA
                AnimationName    = MUGntSpdr_RUNA
                AnimationMode    = LOOP
            End

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRunning") return end
                if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
            EndScript
        End

        AnimationState            = MOVING BACKING_UP
            Animation           = BAKA
                AnimationName    = MUGntSpdr_BAKA
                AnimationMode    = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState            = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName    = MUGntSpdr_FLYA
                AnimationMode    = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState            = STUNNED
            Animation            = Stun
                AnimationName    = MUGntSpdr_LNDA
                AnimationMode    = ONCE
            End
        End

        AnimationState            = STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName    = MUGntSpdr_GTPA
                AnimationMode    = ONCE
            End
        End

        AnimationState            = HIT_REACTION HIT_LEVEL_1
            Animation            = Hit_Level_1_a
                AnimationName    = MUGntSpdr_HITA
                AnimationMode    = ONCE
            End
        End

        AnimationState            = SELECTED
            Animation            = Selected
                AnimationName    = MUGntSpdr_IDLA
                AnimationMode    = ONCE
            End
        End

    End


    Side                = Neutral
    EditorSorting        = UNIT
    ThreatLevel            = 1.0
    VisionRange            = 180.0
    DisplayName            = OBJECT:Spider
    CrushableLevel        = 2
    BuildCost            = 50
    BuildTime            = 15
    CommandPoints             = 0
    BountyValue            = WILD_SPIDERLING_BOUNTY_VALUE
    CommandSet            = CreepCommandSet

    WeaponSet
        Conditions            = None
        Weapon                = PRIMARY    MinorSpiderMandibles
        AutoChooseSources    = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = SpiderlingArmor
        DamageFX        = NormalDamageFX
    End





    VoiceAttack            = ShelobVoiceAttack
    VoiceGuard            = ShelobVoiceMove
    VoiceAttackCharge        = ShelobVoiceAttack
    VoiceAttackMachine    = ShelobVoiceAttack
    VoiceAttackStructure    = ShelobVoiceAttack
    VoiceCreated        = ShelobVoiceSelect
    VoiceFear            = SpiderVoxHurt
    VoiceFullyCreated     = ShelobVoiceSelect
    VoiceMove            = ShelobVoiceMove
    VoiceMoveToCamp        = ShelobVoiceMove
    VoiceMoveWhileAttacking    = ShelobVoiceMove
    VoicePriority        = 50
    VoiceRetreatToCastle    = ShelobVoiceDie
    VoiceSelect            = ShelobVoiceSelect
    VoiceSelectBattle     = ShelobVoiceSelect

    SoundAmbient        = SpiderAmbientLoopMS
    SoundImpact            = ImpactHorse
    SoundMoveLoop        = SpiderMoveLoop




    #include "..\includes\StandardUnitEvaEvents.inc"




    RadarPriority    = UNIT
    KindOf                = PRELOAD SELECTABLE CAVALRY PATH_THROUGH_EACH_OTHER PATH_THROUGH_INFANTRY GRAB_AND_DROP HAS_HEALTH_BAR CREEP SCORE CAN_CLIMB_WALLS
    TransportSlotCount  = 1

    Body = ActiveBody ModuleTag_Body
        MaxHealth         = 50
        MaxHealthDamaged  = 25
        BurningDeathBehavior = Yes
        BurningDeathFX       = FX_InfantryBurningFlame
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = FighterHorde
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle    = Yes
        MoodAttackCheckRate            = 500
        AILuaEventsList                = ShelobFunctions
        MaxCowerTime                = 7500
        MinCowerTime                = 5000
        BurningDeathTime            = BURNINGDEATH_DURATION_INFANTRY
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion    =    Terror_Base
        AddEmotion    =    OVERRIDE UncontrollableFear_Base_Evil
            Duration            =    7000
        End
        AddEmotion    =    Alert_Base
    End

    LocomotorSet
        Locomotor     = HeroHumanScalingLocomotorNoBackwards
        Condition     = SET_NORMAL
        Speed         = 50
    End

    LocomotorSet
        Locomotor = BurningDeathLocomotorInfantry
        Condition = SET_BURNINGDEATH
        Speed      = BURNINGDEATH_WANDERSPEED_INFANTRY
    End


    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes            = ALL
        SinkDelay            = 3000
        SinkRate            = 6.5
        DestructionDelay        = 8000
        FX                = INITIAL FX_SmallSpiderDie
        Sound                = INITIAL SpiderVoxDie
    End

    Behavior = BezierProjectileBehavior ModuleTag_08

        FirstHeight                    = 24
        SecondHeight                = 24
        FirstPercentIndent            = 30%
        SecondPercentIndent            = 70%
        TumbleRandomly                = Yes

        CrushStyle                    = Yes
        DieOnImpact                    = Yes
        BounceCount                    = 1
        BounceDistance                = 40
        BounceFirstHeight            = 24
        BounceSecondHeight            = 24
        BounceFirstPercentIndent    = 20%
        BounceSecondPercentIndent    = 80%

        GroundHitFX       = FX_ThrownRockGroundHit
        GroundBounceFX    = FX_ThrownRockBounceHit
    End

    Behavior = SquishCollide ModuleTag_06

    End



    Behavior = SlavedUpdate ModuleTag_Slave
        GuardMaxRange        = 400.0
        GuardWanderRange    = 150.0
        UseSlaverAsControlForEvaObjectSightedEvents = Yes
    End

    EvaEnemyObjectSightedEvent = DiscoveredEnemySpiderlings
     EvaEnemyObjectSightedAfterRespawnEvent = DiscoveredEnemySpiderlings



    FormationPreviewDecal
            Texture = FPspiderCavalrySingle
            Width = 32
            Height = 32
        End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Spinnendasein
        StartsActive      = Yes
        RefreshDelay      = 2000
        Range             = 100
        TargetEnemy       = Yes
        AntiCategory      = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName         = SpinnendaseinDebuff
        ObjectFilter      = ANY +CAVALRY -GoblinSpiderRider -MordorSchwarzeReiter -MordorSchwarzeReiterHorde -WildZuchtspinnen -WildBannerSpiderRider -INFANTRY -STRUCTURE -BASE_FOUNDATION -HERO -MACHINE -SHIP -DOZER
    End

    Scale                = 0.1
    Geometry            = CYLINDER
    GeometryMajorRadius = 10.0
    GeometryMinorRadius = 10.0
    GeometryHeight      = 5.0
    GeometryIsSmall        = Yes

    Shadow = SHADOW_DECAL
    ShadowSizeX = 12
    ShadowSizeY = 8
    ShadowOffsetX = -1
    ShadowTexture = ShadowSpider2
End



ChildObject CreepMiniSpinne CreepKleineSpinne

    Scale                = 0.1

    Body = ActiveBody ModuleTag_Body
        MaxHealth = 50
    End

    CommandPoints           = 0

    Behavior = SlavedUpdate ModuleTag_Slave
        GuardMaxRange        = 300
        GuardWanderRange    = 150
        UseSlaverAsControlForEvaObjectSightedEvents = Yes
    End


    Behavior = AttributeModifierAuraUpdate ModuleTag_Spinnendasein
        StartsActive      = Yes
        RefreshDelay      = 2000
        Range             = 50
        TargetEnemy       = Yes
        AntiCategory      = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName         = SpinnendaseinDebuff
        ObjectFilter      = ANY +CAVALRY -GoblinSpiderRider -MordorSchwarzeReiter -MordorSchwarzeReiterHorde -WildZuchtspinnen -WildBannerSpiderRider -INFANTRY -STRUCTURE -BASE_FOUNDATION -HERO -MACHINE -SHIP -DOZER
    End

    GeometryMajorRadius = 10.0
    GeometryMinorRadius = 10.0
    GeometryHeight      = 5.0

End





Object WildKankraSpiderMember



    SelectPortrait = HPShelob

    Draw = W3DHordeModelDraw ModuleTag_01

        OkToChangeModelColor = Yes

        RandomTexture = mukankra.tga  0 mushelobh.tga

        WadingParticleSys = WaterRipplesTrail

        DefaultModelConditionState
            Model               = MUShelob_SKN
            Skeleton            = MUShelob_SKL
        End

        ModelConditionState = USER_1
            Model               = MUShelob_SKN
            Skeleton            = MUShelob_SKL
            ParticleSysBone     = B_BACK02 SpiderlingVenomSacs FollowBone:Yes
        End


        IdleAnimationState
            Animation           = IDLA
                AnimationName    = MUShelob_IDLA
                AnimationMode    = ONCE
            End
            Flags               = RANDOMSTART
        End

        AnimationState            = DYING
            Animation           = DIEA
                AnimationName    = MUShelob_DIEA
                AnimationMode    = ONCE
            End
        End

        AnimationState            =  FIRING_OR_PREATTACK_A
            Animation                        = ATKA
                AnimationName                = MUShelob_ATKA
                AnimationMode                = ONCE
                AnimationSpeedFactorRange    = 0.8 1.25
            End
        End

        AnimationState            = TURN_LEFT
            StateName            = Turn
            Animation            = Walk
                AnimationName    = MUShelob_TRNL
                AnimationMode    = LOOP
            End
        End

        AnimationState            = TURN_RIGHT
            StateName            = Turn
            Animation            = Walk
                AnimationName    = MUShelob_TRNR
                AnimationMode    = LOOP
            End
        End

        AnimationState            = MOVING
            Animation            = RUNA
                AnimationName    = MUShelob_RUNA
                AnimationMode    = LOOP
            End
        End

        AnimationState            = MOVING BACKING_UP
            Animation           = BAKA
                AnimationName    = MUShelob_BAKA
                AnimationMode    = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState            = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName    = MUShelob_FLYA
                AnimationMode    = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState            = STUNNED
            Animation            = Stun
                AnimationName    = MUShelob_LNDA
                AnimationMode    = ONCE
            End
        End

        AnimationState            = STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName    = MUShelob_GTPA
                AnimationMode    = ONCE
            End
        End

        AnimationState            = HIT_REACTION HIT_LEVEL_1
            Animation            = Hit_Level_1_a
                AnimationName    = MUShelob_HITA
                AnimationMode    = ONCE
            End
        End

    End



    Side            = Wild
    EditorSorting        = UNIT
    ThreatLevel        = 1.0
    BountyValue        = 2

    VisionRange        = 250
    ShroudClearingRange     = 350


    VisionSide = 35%
    VisionRear = 25%

    MaxVisionBonusPercent     = 300%
    VisionBonusTestRadius     = 200
    VisionBonusPercentPerFoot = 2.0%

    DisplayName            = OBJECT:GiantSpider
    BuildCost        = WILD_SPIDERLING_BUILD_COST
    BuildTime        = WILD_SPIDERLING_BUILD_TIME
    CommandSet        = WildBigSpiderForShelobhCommandSet
    CommandPoints        = 10
    TransportSlotCount    = TRANSPORTSLOTCOUNT_UNIT

    CrushableLevel        = 2

    CrusherLevel = 1
    CrushWeapon = SpiderCrush

    MinCrushVelocityPercent = MINCRUSHVELOCITYPERCENT_STANDARD
    CrushDecelerationPercent = CRUSHDECELERATIONPERCENT_STANDARD

    RamPower = 30
    RamZMult = 0.5

    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY WildKankraSpiderMandibles
        AutoChooseSources    = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions        = PLAYER_UPGRADE
        Weapon            = PRIMARY WildKankraSpideVenomMandibles
        AutoChooseSources    = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = BroodmotherArmor
        DamageFX        = NormalDamageFX
    End





    VoiceAttack            = ShelobVoiceAttack
    VoiceAttackCharge        = ShelobVoiceAttack
    VoiceAttackMachine    = ShelobVoiceAttack
    VoiceAttackStructure    = ShelobVoiceAttack
    VoiceCreated            = EVA:SpiderlingsCreated
    VoiceCreated            = +SOUND:WildSpiderlingVoxCreated
    VoiceFullyCreated        = EVA:SpiderlingsCreated
    VoiceFullyCreated        = +SOUND:WildSpiderlingVoxCreated
    VoiceMove            = ShelobVoiceMove
    VoiceMoveToCamp        = ShelobVoiceMove
    VoiceMoveWhileAttacking    = ShelobVoiceMove
    VoicePriority        = 50
    VoiceRetreatToCastle    = ShelobVoiceDie
    VoiceSelect            = ShelobVoiceSelect
    VoiceSelectBattle     = ShelobVoiceSelect
    VoiceGuard            = ShelobVoiceMove

    SoundAmbient        = SpiderFoleyAmbientLoop
    SoundImpact            = ImpactHorse
    SoundMoveLoop        = SpiderMoveLoop



    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: ShelobPoisonStingerStrikeSwish    Animation:MUShelob_SKL.MUShelob_SPCA     Frames:4
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_TRNL     Frames:1 11
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_TRNR     Frames:1 11
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_WLKA     Frames:1 17 33
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_RUNA     Frames:1 5 9
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_GTPA     Frames:1 16
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_ATKA     Frames:0 39
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_ATKB     Frames:0 100
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_TRNL     Frames:0 5 10 15
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_TRNR     Frames:0 5 10 15
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_WLKA     Frames:0 8 16 24 32 40
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_RUNA     Frames:0 4 8
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_GTPA     Frames: 10 20
        AnimationSound = Sound: ShelobFootstepAttack     Animation:MUShelob_SKL.MUShelob_ATKA     Frames:26
        AnimationSound = Sound: ShelobFootstepAttack     Animation:MUShelob_SKL.MUShelob_ATKB     Frames:26
        AnimationSound = Sound: ShelobVoiceHurt     Animation:MUShelob_SKL.MUShelob_HITA    Frames:0
        AnimationSound = Sound: ShelobAttackScreech    Animation:MUShelob_SKL.MUShelob_ATKA    Frames:20
        AnimationSound = Sound: ShelobAttackScreech    Animation:MUShelob_SKL.MUShelob_ATKB    Frames:20
        AnimationSound = Sound: TrollBodyfall        Animation:MUShelob_SKL.MUShelob_LNDA    Frames:4
        AnimationSound = Sound: TrollBodyfall        Animation:MUShelob_SKL.MUShelob_DIEA    Frames:6


    End






    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Spiderling
    End



    RadarPriority    = UNIT
    KindOf            = PRELOAD INFANTRY SCORE ATTACK_NEEDS_LINE_OF_SIGHT ENVIRONMENT SELECTABLE CAN_CLIMB_WALLS

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle    = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate            = 500
        AILuaEventsList                = ShelobFunctions
        MaxCowerTime                = 7500
        MinCowerTime                = 5000
        BurningDeathTime            = BURNINGDEATH_DURATION_INFANTRY
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion    =    Terror_Base
        AddEmotion    =    OVERRIDE UncontrollableFear_Base_Evil
            Duration            =    7000
        End

        AlwaysAfraidOf        =    NONE +CloudBreakSunbeam +SunflareSunbeam

        AddEmotion    =    Alert_Base
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
            StanceTemplate = Hero
    End

    LocomotorSet
        Locomotor     = TestWallScalingHordeLocomotor
        Condition     = SET_NORMAL
        Speed         = NORMAL_MOUNTED_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = BurningDeathLocomotorInfantry
        Condition = SET_BURNINGDEATH
        Speed      = BURNINGDEATH_WANDERSPEED_INFANTRY
    End

    Body = ActiveBody ModuleTag_Body
        MaxHealth         = 600
        MaxHealthDamaged     = 300
        BurningDeathBehavior = Yes
        BurningDeathFX       = FX_InfantryBurningFlame
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes            = ALL -FADED
        SinkDelay            = 3000
        SinkRate            = 6.5
        DestructionDelay        = 8000
        FX                = INITIAL FX_GiantSpiderDie
        Sound                = INITIAL ShelobVoiceDie
    End

    Behavior = SlowDeathBehavior ModuleTag_SlowDeathFaded
        DeathTypes            = NONE +FADED
        FadeDelay            = 0
        FadeTime            = 3000
        DestructionDelay    = 3000
        FX                    = INITIAL FX_SmallSpiderDie
        DeathFlags            = DEATH_1
        Sound = INITIAL SpellGenericUnsummonFasterMS
    End

    Behavior = BezierProjectileBehavior ModuleTag_08

        FirstHeight                    = 24
        SecondHeight                = 24
        FirstPercentIndent            = 30%
        SecondPercentIndent            = 70%
        TumbleRandomly                = Yes

        CrushStyle                    = Yes
        DieOnImpact                    = Yes
        BounceCount                    = 1
        BounceDistance                = 40
        BounceFirstHeight            = 24
        BounceSecondHeight            = 24
        BounceFirstPercentIndent    = 20%
        BounceSecondPercentIndent    = 80%

        GroundHitFX       = FX_ThrownRockGroundHit
        GroundBounceFX    = FX_ThrownRockBounceHit
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = ProductionUpdate ProductionUpdateModuleTag
        GiveNoXP = Yes
    End

    Behavior = WeaponSetUpgrade ModuleTag_VenomUpgrade
        TriggeredBy                = Upgrade_WildSpiderVenomSacks
        CustomAnimAndDuration    = AnimState:USER_1 AnimTime:0
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Spinnendasein
        StartsActive      = Yes
        RefreshDelay      = 2000
        Range             = 100
        TargetEnemy       = Yes
        AntiCategory      = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName         = SpinnendaseinDebuff
        ObjectFilter      = ANY +CAVALRY -GoblinSpiderRider -MordorSchwarzeReiter -MordorSchwarzeReiterHorde -WildZuchtspinnen -WildBannerSpiderRider -INFANTRY -STRUCTURE -BASE_FOUNDATION -HERO -MACHINE -SHIP -DOZER
    End


    Geometry            = CYLINDER
    GeometryMajorRadius = 50.0
    GeometryMinorRadius = 50.0
    GeometryHeight        = 30.0
    GeometryIsSmall        = No


      Shadow = SHADOW_DECAL
      ShadowSizeX = 55
      ShadowSizeY = 30
      ShadowOffsetX = -8
      ShadowTexture = ShadowI
      Scale        = 0.8
End




ChildObject WildKankraSpiderHordeMember WildKankraSpiderMember
    KindOf            = PRELOAD INFANTRY SCORE ATTACK_NEEDS_LINE_OF_SIGHT ENVIRONMENT SELECTABLE CAN_CLIMB_WALLS
End



ObjectReskin WildKankraBannerSpiderling WildKankraSpiderHordeMember


    Draw = W3DScriptedModelDraw ModuleTag_01

        RandomTexture = mushelobh.tga 0 mushelobh.tga
        RandomTexture = mugntspdr.tga 0 mushelobh.tga
        RandomTexture = mugntspdr2.tga 0 mushelobh.tga

        WadingParticleSys = WaterRipplesTrail

        DefaultModelConditionState
            Model               = MUShelob_SKN
            Skeleton            = MUShelob_SKL
        End

        ModelConditionState = USER_1
            Model               = MUShelob_SKN
            Skeleton            = MUShelob_SKL
            ParticleSysBone     = B_BACK02 SpiderlingVenomSacs FollowBone:Yes
        End


        IdleAnimationState
            Animation           = IDLA
                AnimationName    = MUShelob_IDLA
                AnimationMode    = ONCE
            End
            Flags               = RANDOMSTART
        End

        AnimationState            = DYING
            Animation           = DIEA
                AnimationName    = MUShelob_DIEA
                AnimationMode    = ONCE
            End
        End

        AnimationState            =  FIRING_OR_PREATTACK_A
            Animation                        = ATKA
                AnimationName                = MUShelob_ATKA
                AnimationMode                = ONCE
                AnimationSpeedFactorRange    = 0.8 1.25
            End
        End

        AnimationState            = TURN_LEFT
            StateName            = Turn
            Animation            = Walk
                AnimationName    = MUShelob_TRNL
                AnimationMode    = LOOP
            End
        End

        AnimationState            = TURN_RIGHT
            StateName            = Turn
            Animation            = Walk
                AnimationName    = MUShelob_TRNR
                AnimationMode    = LOOP
            End
        End

        AnimationState            = MOVING
            Animation            = RUNA
                AnimationName    = MUShelob_RUNA
                AnimationMode    = LOOP
            End
        End

        AnimationState            = MOVING BACKING_UP
            Animation           = BAKA
                AnimationName    = MUShelob_BAKA
                AnimationMode    = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState            = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName    = MUShelob_FLYA
                AnimationMode    = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState            = STUNNED
            Animation            = Stun
                AnimationName    = MUShelob_LNDA
                AnimationMode    = ONCE
            End
        End

        AnimationState            = STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName    = MUShelob_GTPA
                AnimationMode    = ONCE
            End
        End

        AnimationState            = HIT_REACTION HIT_LEVEL_1
            Animation            = Hit_Level_1_a
                AnimationName    = MUShelob_HITA
                AnimationMode    = ONCE
            End
        End

    End


    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = No
        MoodAttackCheckRate        = 500
        HoldGroundCloseRangeDistance = 40
        AttackPriority                =     AttackPriority_Infantry
        AILuaEventsList                =    IsengardFighterFunctions
        BurningDeathTime            =    BURNINGDEATH_DURATION_INFANTRY
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End




    Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
        IdleSpawnRate            = 10000
        MeleeFreeUnitSpawnTime        = 20000
        DiedRespawnTime            = 10000
        MeleeFreeBannerReSpawnTime    = 20000

        BannerMorphFX        = FX_BannerCarrierMorph
        UnitSpawnFX            = FX_BannerCarrierSpawnUnit
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes            = ALL
        SinkDelay            = 3000
        SinkRate            = 6.5
        DestructionDelay        = 8000
        FX                = INITIAL FX_GiantSpiderDie
        Sound                = INITIAL ShelobVoiceDie
    End

    Geometry            = CYLINDER
    GeometryMajorRadius = 50.0
    GeometryMinorRadius = 50.0
    GeometryHeight        = 30.0
    GeometryIsSmall        = No


      Shadow = SHADOW_DECAL
      ShadowSizeX = 55
      ShadowSizeY = 30
      ShadowOffsetX = -8
      ShadowTexture = ShadowI
      Scale        = 0.8
End


Object WildKankraSpiderMemberHorde

    SelectPortrait = HPShelob
    ButtonImage = HIShelob

    Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
        DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED EMOTION_TERROR EMOTION_LOOK_TO_SKY SIEGE_CONTAIN
        DefaultModelConditionState
            Model = None
        End
        ModelConditionState = HORDE_EMPTY
            Model = None
        End
        ModelConditionState = WORLD_BUILDER
            Model = HordeMarkAUGFi
        End
    End

    Side            = Wild
    EditorSorting    = UNIT
    EmotionRange    = 240
    DisplayName        = OBJECT:WildKankraSpiderMemberHorde
    DisplayNameStrategic = CONTROLBAR:LW_Unit_WildKankraSpiderMemberHorde
    DescriptionStrategic = CONTROLBAR:LW_ToolTip_WildKankraSpiderMemberHorde

    IsAutoBuilt        = Yes

    WeaponSet
        Conditions    = None
        Weapon        = PRIMARY    NormalMeleeHordeRangefinder
    End






    BuildCost        = 600
    BuildTime        = 40

    ShroudClearingRange = WILD_SPIDERLING_SHROUD_RANGE
    VisionRange = WILD_SPIDERLING_HORDE_VISION_RANGE

    VisionSide = 50%
    VisionRear = 25%

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    CrushableLevel    = 2
    CrusherLevel    = 1


    CommandPoints    = 50
    CommandSet    = WildSpiderlingHordeCommandSet
    FormationWidth    = 2
    FormationDepth    = 2

    TransportSlotCount = TRANSPORTSLOTCOUNT_LARGE_HORDE

    KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE MELEE_HORDE ARMY_SUMMARY LARGE_RECTANGLE_PATHFIND CAN_CLIMB_WALLS

    ThreatLevel = WILD_SPIDERLING_HORDE_THREAT
    ThreatBreakdown WildSpiderlingHorde_DetailedThreat
        AIKindOf = CAVALRY
    End

    Body = ImmortalBody ModuleTag_ImmortalBody
        MaxHealth = 1
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = CavalryHorde
    End

    Behavior = HordeAIUpdate ModuleTag_HordeAIUpdate
        AutoAcquireEnemiesWhenIdle    = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        AILuaEventsList            = ShelobFunctions
        MaxCowerTime            = 7500
        MinCowerTime            = 5000
    End

    Behavior = HordeContain ModuleTag_HordeContain
        FrontAngle             = STANDARD_INFANTRY_FRONTANGLE
        FlankedDelay             = STANDARD_INFANTRY_FLANKEDDELAY
        ObjectStatusOfContained    =
        InitialPayload        = WildKankraSpiderMember 10
        Slots            = 10
        PassengerFilter        = ANY +WildKankraSpiderMember
        ShowPips        = No

        RandomOffset        = X:2 Y:2

        MeleeBehavior         = Amoeba
        End


        BannerCarriersAllowed    = WildKankraBannerSpiderling
        BannerCarrierPosition    = UnitType:WildKankraSpiderMember    Pos:X:50.0 Y:0.0     for fighter horde

        RankInfo = RankNumber:1 UnitType:WildKankraSpiderMember Position:X:30 Y:-30 Position:X:30 Y:0 Position:X:30 Y:30
        RankInfo = RankNumber:2 UnitType:WildKankraSpiderMember Position:X:0 Y:-40 Position:X:10 Y:-12 Position:X:-9 Y:13 Position:X:0 Y:41
        RankInfo = RankNumber:3 UnitType:WildKankraSpiderMember Position:X:-31 Y:-30 Position:X:-29 Y:2 Position:X:-30 Y:29

        RanksToReleaseWhenAttacking = 1 2 3

        MeleeAttackLeashDistance = 25
    End


    Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
        GravityMult = 1.0
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion    = Terror_Base
        AddEmotion    = OVERRIDE UncontrollableFear_Base_Evil
            Duration            =    7000
        End

        AlwaysAfraidOf    = NONE +CloudBreakSunbeam +SunflareSunbeam

        AddEmotion = Alert_Base
    End







    LocomotorSet
        Locomotor     = TestWallScalingHordeLocomotor
        Condition     = SET_NORMAL
        Speed         = NORMAL_MOUNTED_FAST_HORDE_SPEED
    End

    Behavior = ProductionUpdate ProductionUpdateModuleTag
        GiveNoXP = Yes
    End

    Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality
        TriggeredBy = Upgrade_WildSpiderVenomSacks
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining
        TriggeredBy            = Upgrade_BasicTraining
        LevelsToGain        = 1
        LevelCap            = 2
    End

    Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
        SkirmishAIOnly = Yes
        StuffToPickUp = ANY +CRATE -TheDroppedRing
        ScanRange = 200
        ScanIntervalSeconds = 0.5
    End

    FormationPreviewItemDecal
            Texture = FPspiderCavalrySingle
            Width=42
               Height=42
        End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Spinnendasein
        StartsActive      = Yes
        RefreshDelay      = 2000
        Range             = 100
        TargetEnemy       = Yes
        AntiCategory      = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName         = SpinnendaseinDebuff
        ObjectFilter      = ANY +CAVALRY -GoblinSpiderRider -MordorSchwarzeReiter -MordorSchwarzeReiterHorde -WildZuchtspinnen -WildBannerSpiderRider -INFANTRY -STRUCTURE -BASE_FOUNDATION -HERO -MACHINE -SHIP -DOZER
    End





    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Geometry            = BOX
    GeometryMajorRadius = 40
    GeometryMinorRadius = 50
    GeometryHeight        = 8.0
    GeometryIsSmall        = No



    AutoResolveUnitType = AutoResolveUnit_Soldier
    AutoResolveCombatChain = AutoResolve_SoldierCombatChain

    AutoResolveBody = AutoResolve_WildSpiderlingHordeBody

    AutoResolveArmor
        Armor = AutoResolve_WildSpiderlingArmor
    End

    AutoResolveWeapon
        RequiredUpgrades = Upgrade_WildSpiderVenomSacks
        Weapon = AutoResolve_WildSpiderlingUpgradedWeapon
    End

    AutoResolveWeapon
        ExcludedUpgrades = Upgrade_WildSpiderVenomSacks
        Weapon = AutoResolve_WildSpiderlingWeapon
    End

    WorldMapArmoryUpgradesAllowed = Upgrade_BasicTraining Upgrade_WildSpiderVenomSacks
End




Object WildKankraSpiderMemberHordeProduce

    SelectPortrait = HPShelob
    ButtonImage = HIShelob

    Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
        DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED EMOTION_TERROR EMOTION_LOOK_TO_SKY SIEGE_CONTAIN
        DefaultModelConditionState
            Model = None
        End
        ModelConditionState = HORDE_EMPTY
            Model = None
        End
        ModelConditionState = WORLD_BUILDER
            Model = HordeMarkAUGFi
        End
    End

    Side            = Wild
    EditorSorting    = UNIT
    EmotionRange    = 240
    DisplayName        = OBJECT:WildKankraSpiderMemberHorde
    DisplayNameStrategic = CONTROLBAR:LW_Unit_WildKankraSpiderMemberHorde
    DescriptionStrategic = CONTROLBAR:LW_ToolTip_WildKankraSpiderMemberHorde

    IsAutoBuilt        = No

    WeaponSet
        Conditions    = None
        Weapon        = PRIMARY    NormalMeleeHordeRangefinder
    End






    BuildCost        = 100
    BuildTime        = 20

    ShroudClearingRange = WILD_SPIDERLING_SHROUD_RANGE
    VisionRange = WILD_SPIDERLING_HORDE_VISION_RANGE

    VisionSide = 50%
    VisionRear = 25%

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    CrushableLevel  = 2
    CrusherLevel    = 1


    CommandPoints    = 10
    CommandSet    = WildBigSpiderCreepCommandSet
    FormationWidth    = 2
    FormationDepth    = 2

    TransportSlotCount = TRANSPORTSLOTCOUNT_LARGE_HORDE

    KindOf = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE MELEE_HORDE ARMY_SUMMARY LARGE_RECTANGLE_PATHFIND CAN_CLIMB_WALLS

    ThreatLevel = WILD_SPIDERLING_HORDE_THREAT
    ThreatBreakdown WildSpiderlingHorde_DetailedThreat
        AIKindOf = CAVALRY
    End

    Body = ImmortalBody ModuleTag_ImmortalBody
        MaxHealth = 1
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = CavalryHorde
    End

    Behavior = HordeAIUpdate ModuleTag_HordeAIUpdate
        AutoAcquireEnemiesWhenIdle    = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        AILuaEventsList            = ShelobFunctions
        MaxCowerTime            = 7500
        MinCowerTime            = 5000
    End

    Behavior = HordeContain ModuleTag_HordeContain
        FrontAngle             = STANDARD_INFANTRY_FRONTANGLE
        FlankedDelay             = STANDARD_INFANTRY_FLANKEDDELAY
        ObjectStatusOfContained    =
        InitialPayload        = WildKankraSpiderMember 1
        Slots            = 1
        PassengerFilter        = ANY +WildKankraSpiderMember
        ShowPips        = No

        RandomOffset        = X:2 Y:2

        MeleeBehavior         = Amoeba
        End

        RankInfo = RankNumber:1 UnitType:WildKankraSpiderMember Position:X:0 Y:0

        RanksToReleaseWhenAttacking = 1

        MeleeAttackLeashDistance = 25
    End


    Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
        GravityMult = 1.0
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion    = Terror_Base
        AddEmotion    = OVERRIDE UncontrollableFear_Base_Evil
            Duration            =    7000
        End

        AlwaysAfraidOf    = NONE +CloudBreakSunbeam +SunflareSunbeam

        AddEmotion = Alert_Base
    End







    LocomotorSet
        Locomotor     = TestWallScalingHordeLocomotor
        Condition     = SET_NORMAL
        Speed         = NORMAL_MOUNTED_FAST_HORDE_SPEED
    End

    Behavior = ProductionUpdate ProductionUpdateModuleTag
        GiveNoXP = Yes
    End

    Behavior = StatusBitsUpgrade ModuleTag_ProductionLegality
        TriggeredBy = Upgrade_WildSpiderVenomSacks
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining
        TriggeredBy            = Upgrade_BasicTraining
        LevelsToGain        = 1
        LevelCap            = 2
    End

    Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
        SkirmishAIOnly = Yes
        StuffToPickUp = ANY +CRATE -TheDroppedRing
        ScanRange = 200
        ScanIntervalSeconds = 0.5
    End

    FormationPreviewItemDecal
            Texture = FPspiderCavalrySingle
            Width=42
               Height=42
        End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Spinnendasein
        StartsActive      = Yes
        RefreshDelay      = 2000
        Range             = 100
        TargetEnemy       = Yes
        AntiCategory      = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName         = SpinnendaseinDebuff
        ObjectFilter      = ANY +CAVALRY -GoblinSpiderRider -MordorSchwarzeReiter -MordorSchwarzeReiterHorde -WildZuchtspinnen -WildBannerSpiderRider -INFANTRY -STRUCTURE -BASE_FOUNDATION -HERO -MACHINE -SHIP -DOZER
    End





    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Geometry            = BOX
    GeometryMajorRadius = 40
    GeometryMinorRadius = 50
    GeometryHeight        = 8.0
    GeometryIsSmall        = No



    AutoResolveUnitType = AutoResolveUnit_Soldier
    AutoResolveCombatChain = AutoResolve_SoldierCombatChain

    AutoResolveBody = AutoResolve_WildSpiderlingHordeBody

    AutoResolveArmor
        Armor = AutoResolve_WildSpiderlingArmor
    End

    AutoResolveWeapon
        RequiredUpgrades = Upgrade_WildSpiderVenomSacks
        Weapon = AutoResolve_WildSpiderlingUpgradedWeapon
    End

    AutoResolveWeapon
        ExcludedUpgrades = Upgrade_WildSpiderVenomSacks
        Weapon = AutoResolve_WildSpiderlingWeapon
    End

    WorldMapArmoryUpgradesAllowed = Upgrade_BasicTraining Upgrade_WildSpiderVenomSacks
End

