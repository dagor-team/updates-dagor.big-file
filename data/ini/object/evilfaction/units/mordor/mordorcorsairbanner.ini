Object MordorCorsairBanner

  ButtonImage = BIArmory_WhiteHandBanner

  SelectPortrait         = UPIsengard_banner

  Draw = W3DScriptedModelDraw ModuleTag_01

        OkToChangeModelColor = Yes
        StaticModelLODMode = Yes

 	RandomTexture  = muorcbanr_cinicorsair.tga  0 muorcbanr_cini.tga

    DefaultModelConditionState
      Model =  MUCorBnr_SKN
      Skeleton = IUBanner_SKL
    End

        ModelConditionState COMING_OUT_OF_FACTORY
            Model = MUCorBnr_SKN
          Skeleton = IUBanner_SKL
        End


        ExtraPublicBone = Glow
        ExtraPublicBone = Adornment
        ExtraPublicBone = Streamers

        IdleAnimationState
            Animation = IDLD
                AnimationName = IUBanner_IDLD
                AnimationMode = ONCE
                AnimationPriority = 5
                AnimationBlendTime  = 15
            End
            Flags               = RESTART_ANIM_WHEN_COMPLETE
            StateName = Idle
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "CloseRange"    then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
                if Prev == "STATE_Selected"    then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") return end
            EndScript
        End

        AnimationState                            = PASSENGER
            Animation                            = Grabbed
                AnimationName                    = IUBanner_FLLA
                AnimationMode                    = LOOP
            End
        End

        AnimationState                            = FREEFALL
            Animation                            = Falling
                AnimationName                    = IUBanner_FLYB
                AnimationMode                    = LOOP
                AnimationBlendTime                = 10
            End
        End

                    AnimationState                        = CLIMBING
                        StateName                        = STATE_Climbing
                        Animation                        = Climbing
                            AnimationName                = MUCorBnr_WALB
                            AnimationMode                = LOOP
                            AnimationBlendTime            = 10
                        End
                        BeginScript
                            Prev = CurDrawablePrevAnimationState()
                            if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing") return end
                            if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToClimbing") return end
                        EndScript
                    End
                    TransitionState = Trans_RunningToClimbing
                        Animation = Transition
                            AnimationName = MUCorBnr_WALA
                            AnimationMode = ONCE
                        End
                    End

                    AnimationState                        = RAPPELLING
                        StateName                        = STATE_Rappelling
                        Animation                        = Rapelling
                            AnimationName                = MUCorBnr_WALD
                            AnimationMode                = LOOP
                            AnimationBlendTime            = 10
                        End
                        BeginScript
                            Prev = CurDrawablePrevAnimationState()
                            if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToRappelling") return end
                            if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRappelling") return end
                        EndScript
                    End
                    TransitionState = Trans_RunningToRappelling
                        Animation = Transition
                            AnimationName = MUCorBnr_WALC
                            AnimationMode = ONCE
                        End
                    End

        AnimationState                             = STUNNED_FLAILING
             Animation                             = Flying
                AnimationName                     = IUBanner_FLYB
                      AnimationMode                     = LOOP
            End
                  Flags = RANDOMSTART
            End

            AnimationState            = DYING BURNINGDEATH
                Animation
                    AnimationName    = IUBanner_DIEA
                    AnimationMode    = ONCE
                    AnimationBlendTime = 10
                End
                Animation
                    AnimationName    = IUBanner_DIEB
                    AnimationMode    = ONCE
                    AnimationBlendTime = 10
                End
                Animation
                    AnimationName    = IUBanner_DIEC
                    AnimationMode    = ONCE
                    AnimationBlendTime = 10
                End
            End

            AnimationState                            = DYING SPLATTED
             Animation                        = Splattered_On_Ground_1
                AnimationName                    = IUBanner_LNDA
                AnimationMode                    = ONCE
            End
            End

     AnimationState = DYING AFLAME
            Animation = Flaming_Death
          AnimationName = MUHarOvr_MFDA
            AnimationMode = ONCE
            End
    End

    AnimationState = DYING WEAPONSTATE_CLOSE_RANGE
            Animation = Dying_1
          AnimationName = IUBanner_DIEC
            AnimationMode = ONCE
            End
            Animation = Dying_2
          AnimationName = IUBanner_DIED
            AnimationMode = ONCE
            End
    End

    AnimationState = DYING
            Animation = Dying_1
          AnimationName = IUBanner_DIEA
            AnimationMode = ONCE
            End
            Animation = Dying_2
          AnimationName = IUBanner_DIEB
            AnimationMode = ONCE
            End
    End

    AnimationState            = BURNINGDEATH
        Animation
            AnimationName    = IUBanner_MFDA
            AnimationMode    = LOOP
            Distance        = 40
        End
    End

    AnimationState                        = PARALYZED
        Animation
            AnimationName                = IUBanner_IDLA
            AnimationMode                = LOOP
        End
    End

    AnimationState  = COMING_OUT_OF_FACTORY
        Animation = Being_Built
            AnimationName        = IUBanner_RUNB
            AnimationMode        = LOOP
            AnimationBlendTime    = 0
        End
    End



    AnimationState = MOVING FIRING_OR_PREATTACK_A
        Animation = TrotAndFire
            AnimationName = IUBanner_RUNB
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART

    End


    AnimationState = MOVING BACKING_UP
        Animation                = BackingUp
            AnimationName        = IUBanner_BAKA
            AnimationMode        = LOOP
            AnimationSpeedFactorRange 1.5 1.5
        End
        Flags = RANDOMSTART
    End

    AnimationState = MOVING EMOTION_TERROR
        Animation = Moving
            AnimationName = IUBanner_RUNA
            AnimationMode = LOOP
        End
        StateName = Moving
        Flags = RANDOMSTART

    End

    AnimationState                =    MOVING DAMAGED
        Flags                    =    RANDOMSTART
        Animation                =    IWKA
            AnimationName        =    IUBanner_IWKA
            AnimationMode        =    LOOP
        End
    End

    AnimationState = MOVING
            Animation = Moving
          AnimationName = IUBanner_RUNA
            AnimationMode = LOOP
            End
            StateName = Moving
            Flags = RANDOMSTART


                        BeginScript
                            Prev = CurDrawablePrevAnimationState()
                            if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRunning") return end
                            if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
                        EndScript


    End
                        TransitionState = Trans_ClimbingToRunning
                            Animation = Transition
                                AnimationName = MUCorBnr_WALC
                                AnimationMode = ONCE
                            End
                        End
                        TransitionState = Trans_RappellingToRunning
                            Animation = Transition
                                AnimationName = MUCorBnr_WALE
                                AnimationMode = ONCE
                            End
                        End




    AnimationState = STUNNED_STANDING_UP
             Animation = Standing_Back_Up
                AnimationName = IUBanner_GTPA
          AnimationMode = ONCE
          AnimationSpeedFactorRange = 1.5 1.5
            End
    End

    AnimationState = STUNNED
             Animation = Splattered_On_Ground_1
                AnimationName = IUBanner_LNDA
          AnimationMode = ONCE
            End




    End



    TransitionState = Trans_Idle_To_Sword
            Animation = Transition
          AnimationName = IUBanner_STHA
            AnimationMode = ONCE
            End
    End

    TransitionState = Trans_Moving_To_Sword
            Animation = Transition
              AnimationName = IUBanner_STHC
                AnimationMode = ONCE
            End
    End

    TransitionState = Trans_Sword_To_Idle
        Animation = Transition
            AnimationName = IUBanner_STHB
            AnimationMode = ONCE
        End
    End





    AnimationState = FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE
        Animation = ATKA1
            AnimationName = IUBanner_ATKA
            AnimationMode = ONCE
            UseWeaponTiming        = Yes
        End
        StateName = CloseRange
    End

    AnimationState = WAR_CHANT
        Animation = Chant
            AnimationName = IUBanner_IDLC
            AnimationMode = LOOP
        End
    End




    AnimationState                            = EMOTION_AFRAID
        Animation                            = FERA
            AnimationName                    = IUBanner_FERA
            AnimationMode                    = LOOP
        End
        Flags = RANDOMSTART
    End
    AnimationState                            = EMOTION_TAUNTING
        Animation                            = TNTA
            AnimationName                    = IUBanner_IDLC
            AnimationMode                    = LOOP
        End
    End









    AnimationState                            = EMOTION_CELEBRATING
        Animation                           = CHRA
            AnimationName                    = IUBanner_CHRA
            AnimationMode                    = ONCE
        End
    End

    AnimationState                            = EMOTION_ALERT
        Animation                            = ALERT
            AnimationName                    = IUBanner_IDLB
            AnimationMode                    = LOOP
        End
        Flags                                = RESTART_ANIM_WHEN_COMPLETE RANDOMSTART
    End

    AnimationState = WEAPONSTATE_CLOSE_RANGE
         Animation = Close_Range_Idle
                AnimationName = IUBanner_IDLB
                AnimationMode = ONCE
        End
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "Moving" then CurDrawableSetTransitionAnimState("Trans_Moving_To_Sword") return end
            if Prev == "Idle"   then CurDrawableSetTransitionAnimState("Trans_Idle_To_Sword") return end
        EndScript
        StateName = CloseRange
    End

    AnimationState                            = RAISING_FLAG
        Animation                           = CHRA
            AnimationName                    = IUBanner_CHRA
            AnimationMode                    = LOOP
        End
    End

       AnimationState        = SELECTED
        StateName           = STATE_Selected
        Animation = IDLA
            AnimationName = IUBanner_IDLA
            AnimationMode = LOOP
        End





        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_To_Selected") end
            if Prev == "CloseRange"    then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
        EndScript
    End



    TransitionState                    =    TRANS_Idle_to_Selected
        Animation                    =    ATNA
            AnimationName            =    IUBanner_ATNA
            AnimationMode            =    ONCE
        End
    End

    TransitionState                    =    TRANS_Selected_to_Idle
        Animation                    =    ATNB
            AnimationName            =    IUBanner_ATNB
            AnimationMode            =    ONCE
        End
    End


    TransitionState                    =    TRANS_Idle_to_Selected2
        Animation                    =    ATNA
            AnimationName            =    IUWargBnr_ATND
            AnimationMode            =    ONCE
        End
    End

    TransitionState                    =    TRANS_Selected_to_Idle2
        Animation                    =    ATNA
            AnimationName            =    IUWargBnr_ATNE
            AnimationMode            =    ONCE
        End
    End
End

    Draw = W3DScriptedModelDraw DustEffects
        DefaultModelConditionState
          Model = None
        End
        IdleAnimationState
        End
        AnimationState = WADING
            ParticleSysBone = None FootstepSlash
        End
        AnimationState = MOVING ACCELERATE USER_2
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING DECELERATE USER_2
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING ACCELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING DECELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING EMOTION_TERROR
        End
        AnimationState = MOVING
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side = Mordor
    EditorSorting = UNIT
    ThreatLevel = 1.0
    BountyValue = 1
    ShockwaveResistance          = 10
    TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT


    WeaponSet
        Conditions            = None
        Weapon                = PRIMARY    CorsairSword
        AutoChooseSources    = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions            = WEAPONSET_TOGGLE_1
        Weapon                = PRIMARY    CorsairFireBomb
    End


    ArmorSet
        Conditions      = None
        Armor           = EVIL_BASIC_SWORDS
        DamageFX        = NormalDamageFX
    End



    VisionRange = VISION_STANDARD_MELEE
    ShroudClearingRange = SHROUD_CLEAR_STANDARD

    DisplayName = OBJECT:CorsairBanner

    CrusherLevel = 0
    CrushableLevel = 0
    MountedCrusherLevel = 1
    MountedCrushableLevel = 3
     CrushRevengeWeapon = BasicInfantryCrushRevenge
    CrushWeapon = WargCrush




  CommandPoints = 0



    VoiceAttack                                = CorsairVoiceAttack
    VoiceAttackCharge                        = CorsairVoiceAttackCharge
    VoiceAttackMachine                        = CorsairVoiceAttack
    VoiceAttackStructure                    = CorsairVoiceAttackBuilding
    VoiceCreated                            = EVA:CorsairsCreated
    VoiceFullyCreated                        = EVA:CorsairsCreated
    VoiceGuard                                = CorsairVoiceMove
    VoiceMove                                = CorsairVoiceMove
    VoiceMoveOverWalls                        = CorsairVoiceMoveWalls
    VoiceMoveToCamp                            = CorsairVoiceMoveCamp
    VoiceMoveWhileAttacking                    = CorsairVoiceDisengage
    VoicePriority                            = 15
    VoiceRetreatToCastle                    = CorsairVoiceRetreat
    VoiceSelect                                = CorsairVoiceSelectMS
    VoiceSelectBattle                         = CorsairVoiceSelectBattle

    SoundImpact                                = ImpactHorse

    UnitSpecificSounds
        VoiceCreatedFromInn                    = EVA:CorsairsCreated-Inn
        VoiceEnterUnitEvilMenTransportShip    = CorsairVoiceMoveShip
        VoiceEnterUnitMordorMumakil            = CorsairVoiceMoveGarrison
        VoiceEnterUnitSlaughterHouse        = CorsairVoiceMoveGarrison
        VoiceFullyCreatedFromInn            = EVA:CorsairsCreated-Inn
        VoiceGarrison                        = CorsairVoiceMoveGarrison
        VoiceInitiateCaptureBuilding        = CorsairVoiceCaptureBuilding
    End

    SoundImpact             = ImpactHorse

    CrowdResponseKey = EvilMen1

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:BodyFallOrc        Animation:IUBanner_SKL.IUBanner_DIEA        Frames:51 78
        AnimationSound = Sound:BodyFallOrc        Animation:IUBanner_SKL.IUBanner_DIEB        Frames:29
        AnimationSound = Sound:BodyFallOrc        Animation:IUBanner_SKL.IUBanner_DIEC        Frames:49
        AnimationSound = Sound:BodyFallOrc        Animation:IUBanner_SKL.IUBanner_LNDA        Frames:4
    End

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:EMOTION_CELEBRATING    Excluded:DYING ENGAGED    Sound:EmotionCorsairVoxCheerLoop
        ModelCondition = Required:EMOTION_TAUNTING        Excluded:DYING ENGAGED    Sound:EmotionCorsairVoxTauntLoop

        ModelCondition = Required:RAISING_FLAG            Excluded:DYING ENGAGED    Sound:EmotionCorsairVoxTauntLoop
    End

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Man Man_Male Corsair
    End



  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT BANNER GRAB_AND_DROP IGNORES_SELECT_ALL CAN_CLIMB_WALLS

    BuildCost           = ISENGARD_BANNER_BUILDCOST
    BuildTime           = STRONG_BUILDTIME

  Body = ActiveBody ModuleTag_02
    MaxHealth         = 480
    MaxHealthDamaged  = 200
    BurningDeathBehavior = Yes
    BurningDeathFX       = FX_InfantryBurningFlame
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = No
    MoodAttackCheckRate        = 500
    HoldGroundCloseRangeDistance = 40
    AttackPriority                =     AttackPriority_Infantry
    AILuaEventsList                =    GondorFighterFunctions
    BurningDeathTime            =    BURNINGDEATH_DURATION_INFANTRY
  End

       Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion    =   BraceForBeingCrushed_Base
    End

    LocomotorSet
        Locomotor     = HumanLocomotor
        Condition     = SET_NORMAL
        Speed         = NORMAL_FOOT_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = WallScalingMeleeHordeLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_FOOT_SLOW_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = BurningDeathLocomotorInfantry
        Condition = SET_BURNINGDEATH
        Speed      = BURNINGDEATH_WANDERSPEED_INFANTRY
    End

  Behavior = DualWeaponBehavior ModuleTag_13
    SwitchWeaponOnCloseRangeDistance = 76
  End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
    ShockStunnedTimeLow        = 1400
    ShockStunnedTimeHigh    = 2400
    ShockStandingTime        = 2133
  End

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40
    DestructionDelay = 8000
    Sound = INITIAL ManEvilGenericVoiceDie
  End

  Behavior = SquishCollide ModuleTag_06

  End

  Behavior = SlowDeathBehavior ModuleTag_07

    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40
    DestructionDelay = 8000
    Sound = INITIAL ManEvilGenericVoiceDie
  End

  Behavior = BezierProjectileBehavior ModuleTag_08

    FirstHeight = 24
    SecondHeight = 24
    FirstPercentIndent = 30%
    SecondPercentIndent = 70%
    TumbleRandomly = Yes

    CrushStyle = Yes
    DieOnImpact = Yes
    BounceCount = 1
    BounceDistance = 40
    BounceFirstHeight = 24
    BounceSecondHeight = 24
    BounceFirstPercentIndent = 20%
    BounceSecondPercentIndent = 80%

    GroundHitFX       = FX_ThrownRockGroundHit
    GroundBounceFX    = FX_ThrownRockBounceHit
  End

    Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
        IdleSpawnRate            = 10000
        MeleeFreeUnitSpawnTime        = 20000
        DiedRespawnTime            = 10000
        MeleeFreeBannerReSpawnTime    = 20000

        BannerMorphFX        = FX_BannerCarrierMorph
        UnitSpawnFX            = FX_BannerCarrierSpawnUnit

        MorphCondition        = UnitType:IsengardWargRider        Locomotor:SET_MOUNTED    ModelState:"USER_2 MOUNTED"
    End

    Behavior = SubObjectsUpgrade Show_Topper
        TriggeredBy        = Upgrade_AllFactionUpgrade
        HideSubObjects    = Glow Glow01 Glow1
    End

  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19
  ShadowSizeY = 19
  ShadowTexture = ShadowI
End

ChildObject MordorCorsairBanner_Slaved MordorCorsairBanner

  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP

    Behavior = SlavedUpdate ModuleTag_Slave
        LeashRange                                  = 250
        GuardMaxRange                               = 0
        GuardWanderRange                            = 0
        AttackRange                                 = 200
        UseSlaverAsControlForEvaObjectSightedEvents = No
        GuardPositionOffset                         = X:-72.0 Y:0 Z:0
        DieOnMastersDeath                           = No
    End

    LocomotorSet
        Locomotor     = HumanLocomotor
        Condition     = SET_NORMAL
        Speed         = NORMAL_FOOT_VERYFAST_MEMBER_SPEED
    End
End

Object UmbarCorsairBanner



  ButtonImage = BIArmory_WhiteHandBanner
  SelectPortrait         = UPIsengard_banner

  Draw = W3DScriptedModelDraw ModuleTag_01

        OkToChangeModelColor = Yes
        StaticModelLODMode = Yes

 	RandomTexture  = muorcbanr_cinicorsair.tga  0 muorcbanr_cini.tga

    DefaultModelConditionState
      Model =  MUCorBnr_SKN
      Skeleton = IUBanner_SKL
    End

        ModelConditionState COMING_OUT_OF_FACTORY
            Model = MUCorBnr_SKN
          Skeleton = IUBanner_SKL
        End



        ExtraPublicBone = Glow
        ExtraPublicBone = Adornment
        ExtraPublicBone = Streamers

        IdleAnimationState
            Animation = IDLD
                AnimationName = IUBanner_IDLD
                AnimationMode = ONCE
                AnimationPriority = 5
                AnimationBlendTime  = 15
            End
            Flags               = RESTART_ANIM_WHEN_COMPLETE
            StateName = Idle
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "CloseRange"    then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
                if Prev == "STATE_Selected"    then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") return end
            EndScript
        End

        AnimationState                            = PASSENGER
            Animation                            = Grabbed
                AnimationName                    = IUBanner_FLLA
                AnimationMode                    = LOOP
            End
        End

        AnimationState                            = FREEFALL
            Animation                            = Falling
                AnimationName                    = IUBanner_FLYB
                AnimationMode                    = LOOP
                AnimationBlendTime                = 10
            End
        End





                    AnimationState                        = CLIMBING
                        StateName                        = STATE_Climbing
                        Animation                        = Climbing
                            AnimationName                = MUCorBnr_WALB
                            AnimationMode                = LOOP
                            AnimationBlendTime            = 10
                        End
                        BeginScript
                            Prev = CurDrawablePrevAnimationState()
                            if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing") return end
                            if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToClimbing") return end
                        EndScript
                    End
                    TransitionState = Trans_RunningToClimbing
                        Animation = Transition
                            AnimationName = MUCorBnr_WALA
                            AnimationMode = ONCE
                        End
                    End

                    AnimationState                        = RAPPELLING
                        StateName                        = STATE_Rappelling
                        Animation                        = Rapelling
                            AnimationName                = MUCorBnr_WALD
                            AnimationMode                = LOOP
                            AnimationBlendTime            = 10
                        End
                        BeginScript
                            Prev = CurDrawablePrevAnimationState()
                            if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToRappelling") return end
                            if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRappelling") return end
                        EndScript
                    End
                    TransitionState = Trans_RunningToRappelling
                        Animation = Transition
                            AnimationName = MUCorBnr_WALC
                            AnimationMode = ONCE
                        End
                    End








        AnimationState                             = STUNNED_FLAILING
             Animation                             = Flying
                AnimationName                     = IUBanner_FLYB
                      AnimationMode                     = LOOP
            End
                  Flags = RANDOMSTART
            End

            AnimationState            = DYING BURNINGDEATH
                Animation
                    AnimationName    = IUBanner_DIEA
                    AnimationMode    = ONCE
                    AnimationBlendTime = 10
                End
                Animation
                    AnimationName    = IUBanner_DIEB
                    AnimationMode    = ONCE
                    AnimationBlendTime = 10
                End
                Animation
                    AnimationName    = IUBanner_DIEC
                    AnimationMode    = ONCE
                    AnimationBlendTime = 10
                End
            End

            AnimationState                            = DYING SPLATTED
             Animation                        = Splattered_On_Ground_1
                AnimationName                    = IUBanner_LNDA
                AnimationMode                    = ONCE
            End
            End

     AnimationState = DYING AFLAME
            Animation = Flaming_Death
          AnimationName = MUHarOvr_MFDA
            AnimationMode = ONCE
            End
    End

    AnimationState = DYING WEAPONSTATE_CLOSE_RANGE
            Animation = Dying_1
          AnimationName = IUBanner_DIEC
            AnimationMode = ONCE
            End
            Animation = Dying_2
          AnimationName = IUBanner_DIED
            AnimationMode = ONCE
            End
    End

    AnimationState = DYING
            Animation = Dying_1
          AnimationName = IUBanner_DIEA
            AnimationMode = ONCE
            End
            Animation = Dying_2
          AnimationName = IUBanner_DIEB
            AnimationMode = ONCE
            End
    End

    AnimationState            = BURNINGDEATH
        Animation
            AnimationName    = IUBanner_MFDA
            AnimationMode    = LOOP
            Distance        = 40
        End
    End

    AnimationState                        = PARALYZED
        Animation
            AnimationName                = IUBanner_IDLA
            AnimationMode                = LOOP
        End
    End

    AnimationState  = COMING_OUT_OF_FACTORY
        Animation = Being_Built
            AnimationName        = IUBanner_RUNB
            AnimationMode        = LOOP
            AnimationBlendTime    = 0
        End
    End



    AnimationState = MOVING FIRING_OR_PREATTACK_A
        Animation = TrotAndFire
            AnimationName = IUBanner_RUNB
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART

    End


    AnimationState = MOVING BACKING_UP
        Animation                = BackingUp
            AnimationName        = IUBanner_BAKA
            AnimationMode        = LOOP
            AnimationSpeedFactorRange 1.5 1.5
        End
        Flags = RANDOMSTART
    End

    AnimationState = MOVING EMOTION_TERROR
        Animation = Moving
            AnimationName = IUBanner_RUNA
            AnimationMode = LOOP
        End
        StateName = Moving
        Flags = RANDOMSTART

    End

    AnimationState                =    MOVING DAMAGED
        Flags                    =    RANDOMSTART
        Animation                =    IWKA
            AnimationName        =    IUBanner_IWKA
            AnimationMode        =    LOOP
        End
    End

    AnimationState = MOVING
            Animation = Moving
          AnimationName = IUBanner_RUNA
            AnimationMode = LOOP
            End
            StateName = Moving
            Flags = RANDOMSTART


                        BeginScript
                            Prev = CurDrawablePrevAnimationState()
                            if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRunning") return end
                            if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
                        EndScript


    End
                        TransitionState = Trans_ClimbingToRunning
                            Animation = Transition
                                AnimationName = MUCorBnr_WALC
                                AnimationMode = ONCE
                            End
                        End
                        TransitionState = Trans_RappellingToRunning
                            Animation = Transition
                                AnimationName = MUCorBnr_WALE
                                AnimationMode = ONCE
                            End
                        End




    AnimationState = STUNNED_STANDING_UP
             Animation = Standing_Back_Up
                AnimationName = IUBanner_GTPA
          AnimationMode = ONCE
          AnimationSpeedFactorRange = 1.5 1.5
            End
    End

    AnimationState = STUNNED
             Animation = Splattered_On_Ground_1
                AnimationName = IUBanner_LNDA
          AnimationMode = ONCE
            End




    End



    TransitionState = Trans_Idle_To_Sword
            Animation = Transition
          AnimationName = IUBanner_STHA
            AnimationMode = ONCE
            End
    End

    TransitionState = Trans_Moving_To_Sword
            Animation = Transition
              AnimationName = IUBanner_STHC
                AnimationMode = ONCE
            End
    End

    TransitionState = Trans_Sword_To_Idle
        Animation = Transition
            AnimationName = IUBanner_STHB
            AnimationMode = ONCE
        End
    End





    AnimationState = FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE
        Animation = ATKA1
            AnimationName = IUBanner_ATKA
            AnimationMode = ONCE
            UseWeaponTiming        = Yes
        End
        StateName = CloseRange
    End

    AnimationState = WAR_CHANT
        Animation = Chant
            AnimationName = IUBanner_IDLC
            AnimationMode = LOOP
        End
    End




    AnimationState                            = EMOTION_AFRAID
        Animation                            = FERA
            AnimationName                    = IUBanner_FERA
            AnimationMode                    = LOOP
        End
        Flags = RANDOMSTART
    End
    AnimationState                            = EMOTION_TAUNTING
        Animation                            = TNTA
            AnimationName                    = IUBanner_IDLC
            AnimationMode                    = LOOP
        End
    End









    AnimationState                            = EMOTION_CELEBRATING
        Animation                           = CHRA
            AnimationName                    = IUBanner_CHRA
            AnimationMode                    = ONCE
        End
    End

    AnimationState                            = EMOTION_ALERT
        Animation                            = ALERT
            AnimationName                    = IUBanner_IDLB
            AnimationMode                    = LOOP
        End
        Flags                                = RESTART_ANIM_WHEN_COMPLETE RANDOMSTART
    End

    AnimationState = WEAPONSTATE_CLOSE_RANGE
         Animation = Close_Range_Idle
                AnimationName = IUBanner_IDLB
                AnimationMode = ONCE
        End
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "Moving" then CurDrawableSetTransitionAnimState("Trans_Moving_To_Sword") return end
            if Prev == "Idle"   then CurDrawableSetTransitionAnimState("Trans_Idle_To_Sword") return end
        EndScript
        StateName = CloseRange
    End

    AnimationState                            = RAISING_FLAG
        Animation                           = CHRA
            AnimationName                    = IUBanner_CHRA
            AnimationMode                    = LOOP
        End
    End

       AnimationState        = SELECTED
        StateName           = STATE_Selected
        Animation = IDLA
            AnimationName = IUBanner_IDLA
            AnimationMode = LOOP
        End





        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_To_Selected") end
            if Prev == "CloseRange"    then CurDrawableSetTransitionAnimState("Trans_Sword_To_Idle") return end
        EndScript
    End



    TransitionState                    =    TRANS_Idle_to_Selected
        Animation                    =    ATNA
            AnimationName            =    IUBanner_ATNA
            AnimationMode            =    ONCE
        End
    End

    TransitionState                    =    TRANS_Selected_to_Idle
        Animation                    =    ATNB
            AnimationName            =    IUBanner_ATNB
            AnimationMode            =    ONCE
        End
    End


    TransitionState                    =    TRANS_Idle_to_Selected2
        Animation                    =    ATNA
            AnimationName            =    IUWargBnr_ATND
            AnimationMode            =    ONCE
        End
    End

    TransitionState                    =    TRANS_Selected_to_Idle2
        Animation                    =    ATNA
            AnimationName            =    IUWargBnr_ATNE
            AnimationMode            =    ONCE
        End
    End
End

    Draw = W3DScriptedModelDraw DustEffects
        DefaultModelConditionState
          Model = None
        End
        IdleAnimationState
        End
        AnimationState = WADING
            ParticleSysBone = None FootstepSlash
        End
        AnimationState = MOVING ACCELERATE USER_2
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING DECELERATE USER_2
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING ACCELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING DECELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING EMOTION_TERROR
        End
        AnimationState = MOVING
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side = Harad
    EditorSorting = UNIT
    ThreatLevel = 1.0
    BountyValue = 1
    ShockwaveResistance          = 10
    TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT


    WeaponSet
        Conditions            = None
        Weapon                = PRIMARY    CorsairSword
        AutoChooseSources    = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions            = WEAPONSET_TOGGLE_1
        Weapon                = PRIMARY    CorsairFireBomb
    End


    ArmorSet
        Conditions      = None
        Armor           = EVIL_BASIC_SWORDS
        DamageFX        = NormalDamageFX
    End



    VisionRange = VISION_STANDARD_MELEE
    ShroudClearingRange = SHROUD_CLEAR_STANDARD

    DisplayName = OBJECT:CorsairBanner

    CrusherLevel = 0
    CrushableLevel = 0
    MountedCrusherLevel = 1
    MountedCrushableLevel = 3
     CrushRevengeWeapon = BasicInfantryCrushRevenge
    CrushWeapon = WargCrush




  CommandPoints = 0



    VoiceAttack                                = CorsairVoiceAttack
    VoiceAttackCharge                        = CorsairVoiceAttackCharge
    VoiceAttackMachine                        = CorsairVoiceAttack
    VoiceAttackStructure                    = CorsairVoiceAttackBuilding
    VoiceCreated                            = EVA:CorsairsCreated
    VoiceFullyCreated                        = EVA:CorsairsCreated
    VoiceGuard                                = CorsairVoiceMove
    VoiceMove                                = CorsairVoiceMove
    VoiceMoveOverWalls                        = CorsairVoiceMoveWalls
    VoiceMoveToCamp                            = CorsairVoiceMoveCamp
    VoiceMoveWhileAttacking                    = CorsairVoiceDisengage
    VoicePriority                            = 15
    VoiceRetreatToCastle                    = CorsairVoiceRetreat
    VoiceSelect                                = CorsairVoiceSelectMS
    VoiceSelectBattle                         = CorsairVoiceSelectBattle

    SoundImpact                                = ImpactHorse

    UnitSpecificSounds
        VoiceCreatedFromInn                    = EVA:CorsairsCreated-Inn
        VoiceEnterUnitEvilMenTransportShip    = CorsairVoiceMoveShip
        VoiceEnterUnitMordorMumakil            = CorsairVoiceMoveGarrison
        VoiceEnterUnitSlaughterHouse        = CorsairVoiceMoveGarrison
        VoiceFullyCreatedFromInn            = EVA:CorsairsCreated-Inn
        VoiceGarrison                        = CorsairVoiceMoveGarrison
        VoiceInitiateCaptureBuilding        = CorsairVoiceCaptureBuilding
    End

    SoundImpact             = ImpactHorse

    CrowdResponseKey = EvilMen1

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:BodyFallOrc        Animation:IUBanner_SKL.IUBanner_DIEA        Frames:51 78
        AnimationSound = Sound:BodyFallOrc        Animation:IUBanner_SKL.IUBanner_DIEB        Frames:29
        AnimationSound = Sound:BodyFallOrc        Animation:IUBanner_SKL.IUBanner_DIEC        Frames:49
        AnimationSound = Sound:BodyFallOrc        Animation:IUBanner_SKL.IUBanner_LNDA        Frames:4
    End

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:EMOTION_CELEBRATING    Excluded:DYING ENGAGED    Sound:EmotionCorsairVoxCheerLoop
        ModelCondition = Required:EMOTION_TAUNTING        Excluded:DYING ENGAGED    Sound:EmotionCorsairVoxTauntLoop

        ModelCondition = Required:RAISING_FLAG            Excluded:DYING ENGAGED    Sound:EmotionCorsairVoxTauntLoop
    End

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Man Man_Male Corsair
    End



  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT BANNER GRAB_AND_DROP IGNORES_SELECT_ALL CAN_CLIMB_WALLS

    BuildCost           = ISENGARD_BANNER_BUILDCOST
    BuildTime           = STRONG_BUILDTIME

  Body = ActiveBody ModuleTag_02
    MaxHealth         = 480
    MaxHealthDamaged  = 200
    BurningDeathBehavior = Yes
    BurningDeathFX       = FX_InfantryBurningFlame
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = No
    MoodAttackCheckRate        = 500
    HoldGroundCloseRangeDistance = 40
    AttackPriority                =     AttackPriority_Infantry
    AILuaEventsList                =    GondorFighterFunctions
    BurningDeathTime            =    BURNINGDEATH_DURATION_INFANTRY
  End

       Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion    =   BraceForBeingCrushed_Base
    End

    LocomotorSet
        Locomotor     = HumanLocomotor
        Condition     = SET_NORMAL
        Speed         = NORMAL_FOOT_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = WallScalingMeleeHordeLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_FOOT_SLOW_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor = BurningDeathLocomotorInfantry
        Condition = SET_BURNINGDEATH
        Speed      = BURNINGDEATH_WANDERSPEED_INFANTRY
    End

  Behavior = DualWeaponBehavior ModuleTag_13
    SwitchWeaponOnCloseRangeDistance = 76
  End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
    ShockStunnedTimeLow        = 1400
    ShockStunnedTimeHigh    = 2400
    ShockStandingTime        = 2133
  End

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40
    DestructionDelay = 8000
    Sound = INITIAL ManEvilGenericVoiceDie
  End

  Behavior = SquishCollide ModuleTag_06

  End

  Behavior = SlowDeathBehavior ModuleTag_07

    DeathTypes = NONE +KNOCKBACK
    SinkDelay = 3000
    SinkRate = 0.40
    DestructionDelay = 8000
    Sound = INITIAL ManEvilGenericVoiceDie
  End

  Behavior = BezierProjectileBehavior ModuleTag_08

    FirstHeight = 24
    SecondHeight = 24
    FirstPercentIndent = 30%
    SecondPercentIndent = 70%
    TumbleRandomly = Yes

    CrushStyle = Yes
    DieOnImpact = Yes
    BounceCount = 1
    BounceDistance = 40
    BounceFirstHeight = 24
    BounceSecondHeight = 24
    BounceFirstPercentIndent = 20%
    BounceSecondPercentIndent = 80%

    GroundHitFX       = FX_ThrownRockGroundHit
    GroundBounceFX    = FX_ThrownRockBounceHit
  End




    Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
        IdleSpawnRate            = 10000
        MeleeFreeUnitSpawnTime        = 20000
        DiedRespawnTime            = 10000
        MeleeFreeBannerReSpawnTime    = 20000

        BannerMorphFX        = FX_BannerCarrierMorph
        UnitSpawnFX            = FX_BannerCarrierSpawnUnit



        MorphCondition        = UnitType:IsengardWargRider        Locomotor:SET_MOUNTED    ModelState:"USER_2 MOUNTED"
    End

    Behavior = SubObjectsUpgrade Show_Topper
        TriggeredBy        = Upgrade_AllFactionUpgrade
        HideSubObjects    = Glow Glow01 Glow1
    End

  Geometry = CYLINDER
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 19.2
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19
  ShadowSizeY = 19
  ShadowTexture = ShadowI
End

ChildObject UmbarCorsairBanner_Slaved UmbarCorsairBanner

  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP

    Behavior = SlavedUpdate ModuleTag_Slave
        LeashRange                                  = 250
        GuardMaxRange                               = 0
        GuardWanderRange                            = 0
        AttackRange                                 = 200
        UseSlaverAsControlForEvaObjectSightedEvents = No
        GuardPositionOffset                         = X:-72.0 Y:0 Z:0
        DieOnMastersDeath                           = No
    End

    LocomotorSet
        Locomotor     = HumanLocomotor
        Condition     = SET_NORMAL
        Speed         = NORMAL_FOOT_VERYFAST_MEMBER_SPEED
    End
End