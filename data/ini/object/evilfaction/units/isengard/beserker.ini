Object IsengardBeserker

    ButtonImage               = UIIsenBeserker
    SelectPortrait            = UPUrukhaiBeserkernew

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_IsengardBeserker

    Draw = W3DScriptedModelDraw ModuleTag_01

    OkToChangeModelColor = No
    StaticModelLODMode = No

        RandomTexture = iuberserker_ea.tga 0 iuberserker_ea.tga
        RandomTexture = iuberserker_ea2.tga 0 iuberserker_ea.tga
        RandomTexture = iuberserker_ea3.tga 0 iuberserker_ea.tga
        RandomTexture = iuberserker_ea4.tga 0 iuberserker_ea.tga
        RandomTexture = iuberserker_ea5.tga 0 iuberserker_ea.tga
        RandomTexture = iuberserker_ea6.tga 0 iuberserker_ea.tga

        DefaultModelConditionState
            Model = iuberserkern_ea
            Skeleton = IUUrukahi_SKL
        End

        IdleAnimationState
            Animation = IDLA
                AnimationName = IUUrukahi_IDLA
                AnimationMode = ONCE
                AnimationBlendTime = 10
            End
            StateName = Idle
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Jump"        then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
                if Prev == "selected"    then CurDrawableSetTransitionAnimState("Trans_Selected_To_Idle") return end
            EndScript
        End

        AnimationState        = THROWN_PROJECTILE
            Animation           = FLYA
                AnimationName     = IUUrukahi_FLYA
                AnimationMode     = LOOP
            End
        End

        AnimationState                        = PASSENGER FREEFALL
            Animation                        = FLLA
                AnimationName                = IUUrukahi_FLLA
                AnimationMode                = LOOP
            End
        End

        AnimationState                        = FREEFALL
            Animation                        = Falling
                AnimationName                = IUUrukahi_FLYA
                AnimationMode                = LOOP
                AnimationBlendTime            = 10
                AnimationSpeedFactorRange    = 0.5    0.5
            End
        End

        AnimationState                        = SPLATTED
            Animation                        = LNDA
                AnimationName                = IUUrukahi_LNDA
                AnimationMode                = ONCE
            End
        End


        AnimationState        = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = IUUrukahi_FLYA
                AnimationMode      = LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
            Flags               = RANDOMSTART
        End


        AnimationState            = DYING BURNINGDEATH DEATH_1
            Animation
                AnimationName    = IUUrukahi_DIEA
                AnimationMode    = ONCE
                AnimationBlendTime = 10
            End
            Animation
                AnimationName    = IUUrukahi_DIEB
                AnimationMode    = ONCE
                AnimationBlendTime = 10
            End
            Animation
                AnimationName    = IUUrukahi_DIEC
                AnimationMode    = ONCE
                AnimationBlendTime = 10
            End
            Animation
                AnimationName    = IUUrukahi_DIEG
                AnimationMode    = ONCE
                AnimationBlendTime = 10
            End
        End
        AnimationState = DYING SPLATTED DEATH_1
            Animation = Dying
                AnimationName = IUUrukahi_LNDA
                AnimationMode = ONCE
            End
        End

        AnimationState = DYING DEATH_1
            Animation = Dying
                AnimationName = IUUrukahi_DIEA
                AnimationMode = ONCE
            End
        End

        AnimationState = DYING DEATH_2
            Animation = ByeBye
                AnimationName = IUUrukahi_IDLA
                AnimationMode = LOOP
            End
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = GTPA
                AnimationName     = IUUrukahi_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState        = STUNNED
            Animation           = LNDA
                AnimationName     = IUUrukahi_LNDA
                AnimationMode     = ONCE
            End
        End









        AnimationState                        = PARALYZED
            Animation
                AnimationName                = IUUrukahi_IDLA
                AnimationMode                = LOOP
            End
        End



        AnimationState = UNPACKING
            Animation = Unpacking_Passenger
                AnimationName = IUBzrkLadr_PLTA
                AnimationMode = ONCE
            End
            StateName = Jump
        End


        AnimationState = MOVING CLIMBING BACKING_UP WEAPONSET_TOGGLE_1
            Animation = Climbing_Down
                AnimationName = IUUrukahi_CLMA
                AnimationMode = LOOP_BACKWARDS
                AnimationSpeedFactorRange = 2.0 2.0
            End
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
        End

        AnimationState = MOVING CLIMBING BACKING_UP
            Animation = Climbing_Down
                AnimationName = IUUrukahi_CLMA
                AnimationMode = LOOP_BACKWARDS
                AnimationSpeedFactorRange = 2.0 2.0
            End
        End

        AnimationState = MOVING WEAPONSET_TOGGLE_1 BACKING_UP
            Animation = MovingTorch
                AnimationName = IUUrukahi_BAKA
                AnimationMode = LOOP
            End
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
        End

        AnimationState = MOVING EMOTION_TERROR
            Animation = TERRORIZED
                AnimationName = IUUrukahi_RUNC

                AnimationMode = LOOP
            End
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
        End

        AnimationState = MOVING BACKING_UP
            Animation = BackingUp
                AnimationName = IUUrukahi_BAKA
                AnimationMode = LOOP
            End
            Flags = RANDOMSTART
        End

        AnimationState = MOVING CLIMBING WEAPONSET_TOGGLE_1
            Animation = Climbing_Up
                AnimationName = IUUrukahi_CLMA
                AnimationMode = LOOP
                AnimationSpeedFactorRange = 2.0 2.0
            End
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
        End

        AnimationState = MOVING CLIMBING
            Animation = Climbing_Up
                AnimationName = IUUrukahi_CLMA
                AnimationMode = LOOP
                AnimationSpeedFactorRange = 2.0 2.0
            End
        End


        AnimationState = TRANSPORT_MOVING PASSENGER WEAPONSET_TOGGLE_1
            Animation = Moving
                AnimationName = IUBzrkLadr_RUNA
                AnimationMode = LOOP
            End
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
        End

        AnimationState = TRANSPORT_MOVING PASSENGER
            Animation = Moving
                AnimationName = IUBzrkLadr_RUNA
                AnimationMode = LOOP
            End
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
        End


        AnimationState = PASSENGER WEAPONSET_TOGGLE_1
            Animation = IdlePassenger
                AnimationName = IUBzrkLadr_IDLA
                AnimationMode = LOOP
            End
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
            Flags = RANDOMSTART

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle"    then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
                if Prev == "selected" then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
                if Prev == "selected_torch" then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
                if Prev == "Emotion" then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
                if Prev == "MovingTorch" then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
                if Prev == "nonTorchState" then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
            EndScript
        End

        AnimationState = PASSENGER
            Animation = IdlePassenger
                AnimationName = IUBzrkLadr_IDLA
                AnimationMode = LOOP
            End

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle"    then CurDrawableSetTransitionAnimState("TRANS_To_Passenger") return end
                if Prev == "selected" then CurDrawableSetTransitionAnimState("TRANS_To_Passenger") return end
                if Prev == "Emotion" then CurDrawableSetTransitionAnimState("TRANS_To_Passenger") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_To_Passenger") return end
                if Prev == "MovingTorch" then CurDrawableSetTransitionAnimState("TRANS_To_Passenger") return end
                if Prev == "nonTorchState" then CurDrawableSetTransitionAnimState("TRANS_To_Passenger") return end
            EndScript
        End


        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = IUUrukAhi_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End



        AnimationState = MOVING WEAPONSET_TOGGLE_1 REALLYDAMAGED
            StateName    = Moving
            Animation = MovingTorch
                AnimationName = IUBzrkr_RUNB
                AnimationMode = LOOP
                AnimationSpeedFactorRange = 1.5 1.5
            End
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Jump"    then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
            EndScript
        End

        AnimationState = MOVING REALLYDAMAGED
            StateName    = Moving
            Animation = Moving
                AnimationName = IUUrukahi_RUNA
                AnimationMode = LOOP
                AnimationSpeedFactorRange = 1.5 1.5
            End
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Jump"    then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
            EndScript
        End

        AnimationState = MOVING WEAPONSET_TOGGLE_1 DAMAGED
            StateName    = Moving
            Animation = MovingTorch
                AnimationName = IUBzrkr_RUNB
                AnimationMode = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Jump"    then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
            EndScript
        End

        AnimationState = MOVING DAMAGED
            StateName    = Moving
            Animation = Moving
                AnimationName = IUUrukahi_RUNA
                AnimationMode = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Jump"    then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
            EndScript
        End

        AnimationState = MOVING WEAPONSET_TOGGLE_1
            StateName    = Moving
            Animation = MovingTorch
                AnimationName = IUBzrkr_RUNB
                AnimationMode = LOOP
            End
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Jump"    then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
            EndScript
        End

        AnimationState = MOVING
            StateName    = Moving
            Animation = Moving
                AnimationName = IUUrukahi_RUNA
                AnimationMode = LOOP
            End
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Jump"    then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
            EndScript
        End


        AnimationState = WEAPON_TOGGLING
            Animation            = Salute
                AnimationName    = IUBZRKR_LITA
                AnimationMode    = ONCE
            End
            ParticleSysBone           = FLAME01 OrcBerserkerFlare99 FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks99 FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke99 FollowBone:Yes
        End

        AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            StateName    = Attacking
             Animation = ATKA
                AnimationName = IUUrukAhi_ATKC
                AnimationMode = ONCE
                UseWeaponTiming    = Yes
            End
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
        End


        AnimationState = FIRING_OR_PREATTACK_B WEAPONSET_TOGGLE_1
            StateName    = Attacking
             Animation = ATKA
                AnimationName = IUBzrkr_LITB
                AnimationMode = ONCE
                UseWeaponTiming    = Yes
            End
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
        End

        AnimationState = FIRING_OR_PREATTACK_A
            StateName = nonTorchState
             Animation = ATKA
                AnimationName = IUUrukAhi_ATKC
                AnimationMode = ONCE
                UseWeaponTiming    = Yes
            End
        End

        TransitionState = Trans_Jump_To_Ready
            Animation = Transition
                AnimationName = IUBzrkLadr_PLTB
                AnimationMode = ONCE
                AnimationBlendTime = 0
            End
        End

        TransitionState = TRANS_Torch_Passenger
            Animation = Transition_to_passenger_with_torch
                AnimationName = IUBzrkLadr_CLMB
                AnimationMode = ONCE
                AnimationBlendTime = 0
            End
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
               ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
        End

        TransitionState = TRANS_To_Passenger
            Animation = Transition_to_passenger
                AnimationName = IUBzrkLadr_CLMB
                AnimationMode = ONCE
                AnimationBlendTime = 0
            End
        End

        AnimationState = WEAPONSET_TOGGLE_1
            StateName    = selected_torch
             Animation = Selected(ATNA)
                AnimationName    = IUUrukahi_IDLA
                AnimationMode    = LOOP
            End
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
        End

        AnimationState                            = RAISING_FLAG
            StateName = Emotion
            Animation                           = CHRA
                AnimationName                    = IUUrukahi_CHRA
                AnimationMode                    = ONCE
                AnimationSpeedFactorRange        = 0.9 1.1
            End
            Animation                           = CHRB
                AnimationName                    = IUUrukahi_CHRB
                AnimationMode                    = ONCE
                AnimationSpeedFactorRange        = 0.9 1.1
            End
            Flags                                = RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState = SELECTED
            StateName    = selected
            Flags        = RESTART_ANIM_WHEN_COMPLETE RANDOMSTART
             Animation = Selected(ATNA)
                AnimationName    = IUUrukahi_ATNB
                AnimationMode    = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle"    then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") return end
            EndScript
        End



        AnimationState                            = EMOTION_AFRAID
            StateName = Emotion
            Animation                            = FERA
                AnimationName                    = IUUrukahi_FERA
                AnimationMode                    = LOOP
            End
            Flags = RANDOMSTART
        End

        AnimationState                            = EMOTION_TAUNTING
            StateName = Emotion
            Animation                            = TNTA
                AnimationName                    = IUUrukahi_TNTA
                AnimationMode                    = LOOP
            End
        End
        AnimationState                            = EMOTION_POINTING
            StateName = Emotion
            Animation                            = Pointing1
                AnimationName                    = IUUrukahi_PNTA
                AnimationMode                    = LOOP
            End
        End
        AnimationState                            = EMOTION_CELEBRATING
            StateName = Emotion
            Animation                           = CHRA
                AnimationName                    = IUUrukahi_CHRA
                AnimationMode                    = ONCE
            End
        End

        AnimationState                            = WAR_CHANT
            Animation                           = CHRA
                AnimationName                    = IUUrukahi_CHRA
                AnimationMode                    = LOOP
            End
        End

        TransitionState = Trans_Selected_To_Idle
            Animation
                AnimationName    = IUUrukahi_ATNC
                AnimationMode    = ONCE
            End
        End

        TransitionState = TRANS_Idle_to_Selected
            Animation
                AnimationName    = IUUrukahi_ATNA
                AnimationMode    = ONCE
            End
        End

End

    Draw = W3DScriptedModelDraw ModuleTag_Light

        DefaultModelConditionState
            Model = None
        End

        ModelConditionState = WEAPONSET_TOGGLE_1
            Model = Invisible
            Shadow                    = SHADOW_ADDITIVE_DECAL_DYNAMIC
            ShadowSizeX                    = 60
            ShadowSizeY                    = 60
            ShadowTexture                = EXFrodoStingGlow
            ShadowOpacityStart        = 0
            ShadowOpacityFadeInTime        = 7000
            ShadowOpacityPeak        = 255
            ShadowOpacityFadeOutTime    = 200
            ShadowOpacityEnd        = 0
            ShadowOverrideLODVisibility     = Yes
        End
    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End


    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side           = Isengard
    EditorSorting  = UNIT
    ThreatLevel    = 80
    ShockwaveResistance  = 45
    ThreatBreakdown   = IsengardBeserker_DetailedThreat
        AIKindOf      = INFANTRY
    End

    Scale             = 1.35

    ThingClass        = HORDE_UNIT
    CommandPoints     = 10
    BuildCost         = 500
    BuildTime         = STRONG_BUILDTIME
    TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT
    MaxSimultaneousOfType = 6
	DisplayMeleeDamage = ISENGARD_BERSERKER_DAMAGE

    WeaponSet
        Conditions     = None
        Weapon         = PRIMARY     IsengardBerserkerSword
    End

    WeaponSet
        Conditions = WEAPONSET_TOGGLE_1
        Weapon         = PRIMARY     IsengardBerserkerSword
        Weapon         = SECONDARY   IsengardBerserkerTorch
        OnlyAgainst    = SECONDARY MINE
    End

    ArmorSet
        Conditions      = None
        Armor           = NonFAMeleeChampionArmor
        DamageFX        = NormalDamageFX
    End


    BuildFadeInOnCreateTime = 2.0

    VisionRange = ISENGARD_BERSERKER_VISION_RANGE
    ShroudClearingRange = ISENGARD_BERSERKER_SHROUD_RANGE

    VisionSide = 35%
    VisionRear = 25%

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 2.0%


    BountyValue         = 30
    DisplayName         = OBJECT:IsengardBerserker
    CrushableLevel         = 0
    CrusherLevel         = 0
    CrushRevengeWeapon     = BasicInfantryCrushRevenge

    CommandSet = IsengardBeserkerCommandSetMod




    VoiceAttack            = BerserkerVoiceAttackMS
    VoiceAttackCharge        = BerserkerVoiceAttackCharge
    VoiceCreated            = EVA:BerserkerCreated
    VoiceFullyCreated         = EVA:BerserkerCreated
    VoiceMove            = BerserkerVoiceMoveMS
    VoicePriority            = 14
    VoiceSelect            = BerserkerVoiceSelectMS
    VoiceSelectBattle         = BerserkerVoiceSelectBattle
    VoiceGuard            = BerserkerVoiceMove

    VoiceEnterStateAttack        = BerserkerVoiceEnterStateAttack
    VoiceEnterStateAttackCharge    = BerserkerVoiceEnterStateAttackCharge

    UnitSpecificSounds
        VoiceEnter                = BerserkerVoiceMoveMS
        VoiceEnterUnitEvilMenTransportShip    = BerserkerVoiceMoveMS
        VoiceEnterUnitMordorMumakil        = BerserkerVoiceMoveMS
        VoiceEnterUnitSlaughterHouse        = BerserkerVoiceMoveMS
        VoiceGarrison                = BerserkerVoiceMoveMS
        VoiceInitiateCaptureBuilding        = BerserkerVoiceMoveMS
    End

    CrowdResponseKey = Uruk

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:RAISING_FLAG            Excluded:DYING ENGAGED    Sound:EmotionUrukCompilationVoxTauntSinglesLoop
    End

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Orc_Infantry UrukHai_Berserker
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:SwordIntoGround        Animation:IUUrukahi_SKL.IUBZRKR_LITA    Frames:21
        AnimationSound = Sound:TorchIgniteFalseStart    Animation:IUUrukahi_SKL.IUBZRKR_LITA    Frames:77
        AnimationSound = Sound:TorchIgnite        Animation:IUUrukahi_SKL.IUBZRKR_LITA    Frames:98
        AnimationSound = Sound:BerserkerSnarl        Animation:IUUrukahi_SKL.IUBZRKR_LITA    Frames:103

        AnimationSound = Sound:BerserkerSuicideYell    Animation:IUUrukahi_SKL.IUBZRKR_LITB    Frames:0
        AnimationSound = Sound:TorchIgnite        Animation:IUUrukahi_SKL.IUBZRKR_LITB    Frames:1

        AnimationSound = Sound:FootstepDirtA        Animation:IUUrukahi_SKL.IUUrukahi_RUNA    Frames:10 22
        AnimationSound = Sound:FootstepDirtA        Animation:IUUrukahi_SKL.IUBzrkr_RUNB    Frames:10 22
        AnimationSound = Sound:FootstepDirtA        Animation:IUUrukahi_SKL.IUUrukahi_RUNC    Frames:5 13

        AnimationSound = Sound:FootstepDirtA        Animation:IUUrukahi_SKL.IUBzrkLadr_CLMB    Frames:14 20 43 45 79 84
        AnimationSound = Sound:FootstepDirtA        Animation:IUUrukahi_SKL.IUUrukahi_CLMA    Frames:0 15
        AnimationSound = Sound:FootstepDirtA        Animation:IUUrukahi_SKL.IUBzrkLadr_PLTA    Frames:23

        AnimationSound = Sound:BodyFallOrc        Animation:IUUrukahi_SKL.IUUrukahi_LNDA    Frames:2
        AnimationSound = Sound:BodyFallOrc        Animation:IUUrukahi_SKL.IUUrukahi_DIEA    Frames:23
    End

    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY SCORE CAN_USE_SIEGE_TOWER CAN_RIDE_SIEGE_LADDER MINE_TRIGGER ARMY_SUMMARY GRAB_AND_DROP URUK HEAVY_MELEE_HITTER CAN_ATTACK

	Body = DelayedDeathBody ModuleTag_02
        CheerRadius                      = EMOTION_CHEER_RADIUS
        MaxHealth                        = ISENGARD_BERSERKER_HEALTH
        MaxHealthDamaged                 = ISENGARD_BERSERKER_HEALTH_DAMAGED
        MaxHealthReallyDamaged           = 50
		ReallyDamagedAttributeModifier	 = BerserkerReallyDamagedAttributeModifier
        DelayedDeathTime                 = 5000
		DelayedDeathPrerequisiteUpgrade  = Upgrade_RaiseSchmiedekunst
        PermanentlyKilledByFilter        = NONE
        BurningDeathBehavior             = Yes
        BurningDeathFX                   = FX_InfantryBurningFlame
    End
	
    Behavior = CommandButtonHuntUpdate ModuleTag_CommandButtonHuntUpdate
    End

    Behavior = AutoHealBehavior ModuleTag_LurtzHealing
        StartsActive            = Yes
        HealingAmount            = HERO_HEAL_AMOUNT
        HealingDelay            = 1500
        StartHealingDelay        = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat    = Yes
    End

    Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
        SkirmishAIOnly                 = Yes
        StuffToPickUp                 = ANY +CRATE -TheDroppedRing
        ScanRange                     = 200
        ScanIntervalSeconds             = 0.5
    End

    Behavior = StancesBehavior ModuleTag_StancesBehaviorboromi
        StanceTemplate = FighterHorde
    End

    Behavior = AttributeModifierUpgrade ModuleTag_AMU
        TriggeredBy = Upgrade_AllFactionUpgrade
        AttributeModifier = FearlessForever
    End

    #include "..\..\..\includes\CaptureBuilding.inc"

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle  =    Yes ATTACK_BUILDINGS
        MoodAttackCheckRate         =    500
        AILuaEventsList             =    ArcherFunctions
        AttackPriority              =    AttackPriority_Infantry
        BurningDeathTime            =    BURNINGDEATH_DURATION_INFANTRY
    End

    LocomotorSet
        Locomotor     = BerserkerLocomotor
        Condition     = SET_NORMAL
        Speed         = NORMAL_FOOT_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor     = BerserkerLocomotor
        Condition     = SET_WANDER
        Speed         = NORMAL_FOOT_FAST_MEMBER_SPEED
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End

	ReplaceModule ModuleTag_DefaultShareExp
       Behavior = ShareExperienceBehavior ModuleTag_DefaultShareExp_Nekromant
          Radius            = 300.0
          ObjectFilter      = ANY +IsengardUrukHauptmann4 ALLIES
          DropOff           = 0.20
       End
    End




    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BonusUnpause
        SpecialPowerTemplate        = SpecialAbilityBonusLeadership
        TriggeredBy                 = Upgrade_ObjectLevel5
    End

    Behavior = SpecialPowerModule ModuleTag_HeroLeadership
        SpecialPowerTemplate        = SpecialAbilityBonusLeadership
        UpdateModuleStartsAttack    = No
        StartsPaused                = Yes
    End


    Behavior = WeaponChangeSpecialPowerModule THING
        SpecialPowerTemplate      = SpecialAbilityBerserkerLightTorch
        FlagsUsedForToggle        = WEAPONSET_TOGGLE_1
        ToggleOnSleepFrames       = 25
        ToggleOffSleepFrames      = 0
        ToggleOnAttributeModifier = BerserkerTorchLightingPenalty
    End

    Behavior = SpecialPowerModule ModuleTag_Leadership
        SpecialPowerTemplate        = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack    = No
        StartsPaused                = No
    End

    Behavior = WeaponSetUpgrade WeaponSetUpgradeModuleTag
        TriggeredBy    = Upgrade_ForgedBlades
    End

    Behavior = SubObjectsUpgrade ForgedBlades_UpgradeStart
        TriggeredBy    = Upgrade_AllFactionUpgrade
        HideSubObjects = Forged_Blade
    End

    Behavior = SubObjectsUpgrade ForgedBlades_Upgrade
        TriggeredBy    = Upgrade_ForgedBlades
        ShowSubObjects = Forged_Blade
    End

    Behavior = AttributeModifierUpgrade ModuleTag_HeavyArmorBonus_Stahlwerk
        TriggeredBy       = Upgrade_TechnologyIsengardGeharteteRustungen
        AttributeModifier = IsengardStahlwerkArmorBonus
    End

    Behavior = AttributeModifierUpgrade ModuleTag_ForgedBladesBonus_Stahlwerk
        TriggeredBy       = Upgrade_ForgedBlades Upgrade_TechnologyIsengardGeharteteWaffen
        RequiresAllTriggers = Yes
        AttributeModifier = IsengardStahlwerkAttackBonus
    End

    Behavior = ProductionUpdate ProductionUpdateModuleTag
        GiveNoXP = Yes
    End

    Behavior = SlowDeathBehavior ModuleTag_GrabandDrop
        DeathTypes       = NONE +EXTRA_8
        SinkDelay        = 3000
        SinkRate         = 0.60
        DestructionDelay = 10000
        DeathFlags       = DEATH_4
        ShadowWhenDead   = Yes
    End

    Behavior = FireWeaponWhenDeadBehavior ModuleTag_GrabandDropImpact
        RequiredStatus  = DEATH_4
        StartsActive    = Yes
        DelayTime       = 0
        DeathWeapon     = GrabandDropInfantryImpactWarhead
        WeaponOffset    = X:0 Y:0 Z:0
    End

    Behavior = BezierProjectileBehavior ModuleTag_BodyHitHuman
       FirstHeight               = 24
       SecondHeight              = 24
       FirstPercentIndent        = 30%
       SecondPercentIndent       = 70%
       TumbleRandomly            = Yes
       CrushStyle                = Yes
       DieOnImpact               = Yes
       BounceCount               = 1
       BounceDistance            = 40
       BounceFirstHeight         = 24
       BounceSecondHeight        = 24
       BounceFirstPercentIndent  = 20%
       BounceSecondPercentIndent = 80%
       GroundHitFX               = FX_GrabandDropInfantryGroundHit
       GroundBounceFX            = FX_GrabandDropInfantryGroundHit
    End


    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes         = ALL -EXTRA_8 -FADED
        SinkDelay          = 4000
        SinkRate           = 1.0
        DestructionDelay   = 10000
        Sound              = INITIAL UrukVoiceDie
        DeathFlags = DEATH_1
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = HordeMemberCollide ModuleTag_HMC

    End





    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate IsengardBerserkerCaptureBuildingAI
        CommandButtonName = Command_CaptureBuilding
        SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
    End

    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes
    Shadow = SHADOW_DECAL
    ShadowSizeX = 19
    ShadowSizeY = 19
    ShadowTexture = ShadowI



    AutoResolveCombatChain = AutoResolve_SoldierCombatChain
    AutoResolveUnitType               = AutoResolveUnit_Support

    AutoResolveBody = AutoResolve_IsengardBeserkerBody

    AutoResolveArmor
        Armor = AutoResolve_IsengardBeserkerArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_IsengardBeserkerWeapon
    End
End


ChildObject IsengardBeserker_Summoned IsengardBeserker
    IsTrainable = No
    CommandPoints = 0
    EquivalentTo = IsengardBeserker

    Behavior = ModelConditionUpgrade ModuleTag_ModellSchwert
        TriggeredBy       = Upgrade_AllFactionUpgrade
        AddConditionFlags = WEAPONSET_TOGGLE_1
        Permanent         = Yes
    End

    Behavior = AttributeModifierUpgrade ModuleTag_ElvenGiftBonus
        TriggeredBy            = Upgrade_AllFactionUpgrade
        AttributeModifier      = BerserkerTorchLightingPenalty
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = 120000
        MaxLifetime        = 120000
        DeathType        = FADED
    End
    Behavior = GrantUpgradeCreate ModuleTag_GrantIsengardForgedBlades
        UpgradeToGrant = Upgrade_ForgedBlades
    End
    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 2500
        DestructionDelay = 2500
        Sound    = INITIAL SpellGenericUnsummonFasterMS
        FX = INITIAL FX_IsengartUnsummonFog
        DeathFlags = DEATH_2
    End
End


Object IsengardBeserker_Show


    ButtonImage                = WOR_Berserker
    SelectPortrait            = UPIsenguard_Beserker

    Draw = W3DScriptedModelDraw ModuleTag_01

    OkToChangeModelColor = No
    StaticModelLODMode = No

        RandomTexture = iuberserker.tga 0 iuberserker.tga
        RandomTexture = iuberserker_bloodlust.tga 0 iuberserker.tga

        DefaultModelConditionState
            Model    = iuberserker
            Skeleton = IUUrukahi_SKL
            Shadow                    = SHADOW_ADDITIVE_DECAL_DYNAMIC
            ShadowSizeX                    = 60
            ShadowSizeY                    = 60
            ShadowTexture                = EXFrodoStingGlow
            ShadowOpacityStart        = 0
            ShadowOpacityFadeInTime        = 7000
            ShadowOpacityPeak        = 255
            ShadowOpacityFadeOutTime    = 200
            ShadowOpacityEnd        = 0
            ShadowOverrideLODVisibility     = Yes
        End


        IdleAnimationState
            Animation = ATKA
                AnimationName = IUBzrkr_LITB
                AnimationMode = LOOP
                AnimationBlendTime = 10
                AnimationSpeedFactorRange = 0.9 0.9
            End
            StateName = Idle
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
        End

        AnimationState = USER_2
            Animation            = State_JustBuilt
                AnimationName    = IUBZRKR_LITA
                AnimationMode    = ONCE
                AnimationBlendTime = 0
                AnimationSpeedFactorRange = 0.8 0.8
            End
            ParticleSysBone           = FLAME01 OrcBerserkerFlare99 FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks99 FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke99 FollowBone:Yes
        End



        AnimationState            = DYING BURNINGDEATH DEATH_1
            Animation
                AnimationName    = IUUrukahi_DIEA
                AnimationMode    = ONCE
                AnimationBlendTime = 10
            End
            Animation
                AnimationName    = IUUrukahi_DIEB
                AnimationMode    = ONCE
                AnimationBlendTime = 10
            End
            Animation
                AnimationName    = IUUrukahi_DIEC
                AnimationMode    = ONCE
                AnimationBlendTime = 10
            End
            Animation
                AnimationName    = IUUrukahi_DIEG
                AnimationMode    = ONCE
                AnimationBlendTime = 10
            End
        End
        AnimationState = DYING SPLATTED DEATH_1
            Animation = Dying
                AnimationName = IUUrukahi_LNDA
                AnimationMode = ONCE
            End
        End

        AnimationState = DYING DEATH_1
            Animation = Dying
                AnimationName = IUUrukahi_DIEA
                AnimationMode = ONCE
            End
        End

        AnimationState = DYING DEATH_2
            Animation = ByeBye
                AnimationName = IUUrukahi_IDLA
                AnimationMode = LOOP
            End
        End

    End



    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End


    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side              = Isengard
    EditorSorting     = UNIT
    ThreatLevel       = ISENGARD_BESERKER_THREAT_LEVEL
    ThreatBreakdown   = IsengardBeserker_DetailedThreat
        AIKindOf      = INFANTRY
    End

    Scale             = 1.25

    ThingClass        = HORDE_UNIT
    CommandPoints     = 0
    BuildCost         = 0
    BuildTime         = 0
    TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT


    ArmorSet
        Conditions      = None
        Armor           = BerserkerArmor
        DamageFX        = NormalDamageFX
    End


    BuildFadeInOnCreateTime = 2.0

    VisionRange = ISENGARD_BERSERKER_VISION_RANGE
    ShroudClearingRange = ISENGARD_BERSERKER_SHROUD_RANGE

    VisionSide = 35%
    VisionRear = 25%

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 2.0%


    BountyValue         = ISENGARD_BERSERKER_BOUNTY_VALUE
    DisplayName         = OBJECT:IsengardBeserker
    CrushableLevel         = 0
    CrusherLevel         = 0
    CrushRevengeWeapon     = BasicInfantryCrushRevenge

    CommandSet = IsengardBeserkerCommandSetMod




    VoiceAttack            = BerserkerVoiceAttackMS
    VoiceAttackCharge        = BerserkerVoiceAttackCharge
    VoiceMove            = BerserkerVoiceMoveMS
    VoicePriority            = 14
    VoiceSelect            = BerserkerVoiceSelectMS
    VoiceSelectBattle         = BerserkerVoiceSelectBattle
    VoiceGuard            = BerserkerVoiceMove

    VoiceEnterStateAttack        = BerserkerVoiceEnterStateAttack
    VoiceEnterStateAttackCharge    = BerserkerVoiceEnterStateAttackCharge

    UnitSpecificSounds
        VoiceEnter                = BerserkerVoiceMoveMS
        VoiceEnterUnitEvilMenTransportShip    = BerserkerVoiceMoveMS
        VoiceEnterUnitMordorMumakil        = BerserkerVoiceMoveMS
        VoiceEnterUnitSlaughterHouse        = BerserkerVoiceMoveMS
        VoiceGarrison                = BerserkerVoiceMoveMS
        VoiceInitiateCaptureBuilding        = BerserkerVoiceMoveMS
    End

    CrowdResponseKey = Uruk

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:RAISING_FLAG            Excluded:DYING ENGAGED    Sound:EmotionUrukCompilationVoxTauntSinglesLoop
    End

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Orc_Infantry UrukHai_Berserker
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:SwordIntoGround        Animation:IUUrukahi_SKL.IUBZRKR_LITA    Frames:21
        AnimationSound = Sound:TorchIgniteFalseStart    Animation:IUUrukahi_SKL.IUBZRKR_LITA    Frames:77
        AnimationSound = Sound:TorchIgnite        Animation:IUUrukahi_SKL.IUBZRKR_LITA    Frames:98

        AnimationSound = Sound:BerserkerSnarl        Animation:IUUrukahi_SKL.IUBZRKR_LITA    Frames:103

        AnimationSound = Sound:BerserkerSuicideYell    Animation:IUUrukahi_SKL.IUBZRKR_LITB    Frames:0
        AnimationSound = Sound:TorchIgnite        Animation:IUUrukahi_SKL.IUBZRKR_LITB    Frames:1

        AnimationSound = Sound:FootstepDirtA        Animation:IUUrukahi_SKL.IUUrukahi_RUNA    Frames:10 22
        AnimationSound = Sound:FootstepDirtA        Animation:IUUrukahi_SKL.IUBzrkr_RUNB    Frames:10 22
        AnimationSound = Sound:FootstepDirtA        Animation:IUUrukahi_SKL.IUUrukahi_RUNC    Frames:5 13

        AnimationSound = Sound:FootstepDirtA        Animation:IUUrukahi_SKL.IUBzrkLadr_CLMB    Frames:14 20 43 45 79 84
        AnimationSound = Sound:FootstepDirtA        Animation:IUUrukahi_SKL.IUUrukahi_CLMA    Frames:0 15
        AnimationSound = Sound:FootstepDirtA        Animation:IUUrukahi_SKL.IUBzrkLadr_PLTA    Frames:23

        AnimationSound = Sound:BodyFallOrc        Animation:IUUrukahi_SKL.IUUrukahi_LNDA    Frames:2
        AnimationSound = Sound:BodyFallOrc        Animation:IUUrukahi_SKL.IUUrukahi_DIEA    Frames:23
    End




    RadarPriority = UNIT
    KindOf = PRELOAD CAN_CAST_REFLECTIONS INFANTRY MINE_TRIGGER ARMY_SUMMARY GRAB_AND_DROP HEAVY_MELEE_HITTER UNATTACKABLE

    Body = ActiveBody ModuleTag_02
        MaxHealth             = ISENGARD_BERSERKER_HEALTH
        MaxHealthDamaged      = ISENGARD_BERSERKER_HEALTH_DAMAGED
        BurningDeathBehavior  = Yes
        BurningDeathFX        = FX_InfantryBurningFlame
        CheerRadius           = EMOTION_CHEER_RADIUS
        DodgePercent          = 80%
    End

    Behavior = CommandButtonHuntUpdate ModuleTag_CommandButtonHuntUpdate
    End

    Behavior = AttributeModifierUpgrade ModuleTag_AMU
        TriggeredBy = Upgrade_AllFactionUpgrade
        AttributeModifier = FearlessForever
    End

    #include "..\..\..\includes\CaptureBuilding.inc"

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle  =    Yes ATTACK_BUILDINGS
        MoodAttackCheckRate         =    500
        AILuaEventsList             =    InfantryFunctions
        AttackPriority              =    AttackPriority_Infantry
        BurningDeathTime            =    BURNINGDEATH_DURATION_INFANTRY
    End


    LocomotorSet
        Locomotor     = BerserkerLocomotor
        Condition     = SET_NORMAL
        Speed         = NORMAL_FOOT_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor     = BerserkerLocomotor
        Condition     = SET_WANDER
        Speed         = NORMAL_FOOT_FAST_MEMBER_SPEED
    End


    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
    End


    Behavior = ProductionUpdate ProductionUpdateModuleTag
        GiveNoXP = Yes
    End


     Behavior = GrantUpgradeCreate ModuleTag_BuildHackUpgrade
           UpgradeToGrant                = Upgrade_TestBuilding
           GiveOnBuildComplete            = Yes
     End

     Behavior = ModelConditionUpgrade ModuleTag_BuildHackUserFlag
           TriggeredBy                    = Upgrade_TestBuilding
           RequiresAllTriggers            = Yes
           AddTempConditionFlag            = ModelConditionState:USER_2
           TempConditionTime            = 5.2
     End


    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes         = ALL
        SinkDelay          = 1
        SinkRate           = 1
        DestructionDelay   = 1
        Sound              = INITIAL UrukVoiceDie
        DeathFlags         = DEATH_1
    End


    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = 6000
        MaxLifetime        = 6000
    End


    Behavior = SquishCollide ModuleTag_06

    End


    Geometry = CYLINDER
    GeometryMajorRadius = 1.0
    GeometryMinorRadius = 1.0
    GeometryHeight = 1.0
    GeometryIsSmall = Yes
    Shadow = SHADOW_DECAL
    ShadowSizeX = 19
    ShadowSizeY = 19
    ShadowTexture = ShadowI

End

