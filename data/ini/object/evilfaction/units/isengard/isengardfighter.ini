Object IsengardFighter

  ButtonImage    = WOR_UrukWarriors
  SelectPortrait = UPUrukhainew

  Draw = W3DHordeModelDraw ModuleTag_01

    OkToChangeModelColor = No
    StaticModelLODMode   = No

    LodOptions    = LOW
        AllowMultipleModels        =    ALLOW_MULTIPLE_MODELS_LOW
        MaxRandomTextures        =    MAX_RANDOM_TEXTURES_LOW
        MaxRandomAnimations        =    MAX_RANDOM_ANIMATIONS_LOW
        MaxAnimFrameDelta        =    MAX_ANIM_FRAME_DELTA_LOW
    End

    LodOptions    = MEDIUM
        AllowMultipleModels        =    ALLOW_MULTIPLE_MODELS_MED
        MaxRandomTextures        =    MAX_RANDOM_TEXTURES_MED
        MaxRandomAnimations        =    MAX_RANDOM_ANIMATIONS_MED
        MaxAnimFrameDelta        =    MAX_ANIM_FRAME_DELTA_MED
    End

    LodOptions    = HIGH
        AllowMultipleModels        =    ALLOW_MULTIPLE_MODELS_HIGH
        MaxRandomTextures        =    MAX_RANDOM_TEXTURES_HIGH
        MaxRandomAnimations        =    MAX_RANDOM_ANIMATIONS_HIGH
        MaxAnimFrameDelta        =    MAX_ANIM_FRAME_DELTA_HIGH
    End

    DefaultModelConditionState
        Model = iuurukhai_skn
        Skeleton = IUUrukahi_SKL
    End

    ModelConditionState WEAPONSET_PLAYER_UPGRADE
        Model = iuurukhai_skn
        Skeleton = IUUrukahi_SKL
    End


    IdleAnimationState
        Animation = IDLB
            AnimationName = IUUrukahi_IDLB
            AnimationMode = ONCE
            AnimationPriority = 20
        End
        Animation = IDLG
            AnimationName = IUUrukahi_IDLG
            AnimationMode = ONCE
            AnimationPriority = 1
        End
        Animation = IDLD
            AnimationName = IUUrukahi_IDLD
            AnimationMode = ONCE
            AnimationPriority = 2
        End
        StateName = Idle
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoard") end
        EndScript
    End


    AnimationState                        = PASSENGER
        Animation                        = Falling
            AnimationName                = IUUrukahi_FLLA
            AnimationMode                = LOOP
        End
    End

    AnimationState                        = FREEFALL
        Animation                        = FLYA
            AnimationName                = IUUrukahi_FLYA
            AnimationMode                = LOOP
            AnimationSpeedFactorRange    = 0.5    0.5
            AnimationBlendTime            = 5
        End
    End

    AnimationState            = STUNNED_FLAILING
        Animation           = StunFlail
            AnimationName   = IUUrukahi_FLYA
            AnimationMode   = LOOP
            AnimationSpeedFactorRange    = 0.4 0.6
        End
        Flags                        = MAINTAIN_FRAME_ACROSS_STATES2
    End

    AnimationState            = DYING BURNINGDEATH DEATH_1
        Animation
            AnimationName    = IUUrukahi_DIEA
            AnimationMode    = ONCE
            AnimationBlendTime = 10
        End
        Animation
            AnimationName    = IUUrukahi_DIEB
            AnimationMode    = ONCE
            AnimationBlendTime = 20
        End
        Animation
            AnimationName    = IUUrukahi_DIEC
            AnimationMode    = ONCE
            AnimationBlendTime = 20
        End
        Animation
            AnimationName    = IUUrukahi_DIEG
            AnimationMode    = ONCE
            AnimationBlendTime = 20
        End
    End

    AnimationState            = DYING SPLATTED DEATH_1
        Animation            = Splat
            AnimationName    = IUUrukahi_LNDA
            AnimationMode    = ONCE
        End
    End

    AnimationState = DYING DEATH_1
        Animation = DIEA
            AnimationName = IUUrukahi_DIEA
            AnimationMode = ONCE
            AnimationPriority = 1
            AnimationSpeedFactorRange    =    0.8 1.25
        End
        Animation = DIEB
            AnimationName = IUUrukahi_DIEB
            AnimationMode = ONCE
            AnimationPriority = 3
            AnimationSpeedFactorRange    =    0.8 1.25
        End
        Animation = DIEC
            AnimationName = IUUrukahi_DIEC
            AnimationMode = ONCE
            AnimationPriority = 2
            AnimationSpeedFactorRange    =    0.8 1.25
        End
        Animation = DIEG
            AnimationName = IUUrukahi_DIEG
            AnimationMode = ONCE
            AnimationPriority = 10
            AnimationSpeedFactorRange    =    0.8 1.25
        End
    End

    AnimationState = DYING DEATH_2
        Animation = ByeBye
            AnimationName = IUUrukahi_IDLA
            AnimationMode = LOOP
        End
    End

    AnimationState            = BURNINGDEATH
        Animation
            AnimationName    = IUUrukahi_MFDA
            AnimationMode    = LOOP
            Distance        = 50
        End
    End

    AnimationState                        = PARALYZED
        Animation
            AnimationName                = IUUrukahi_IDLA
            AnimationMode                = LOOP
        End
    End


    AnimationState        = STUNNED
        Animation           = LNDA
            AnimationName     = IUUrukahi_LNDA
            AnimationMode     = ONCE
        End
    End

    AnimationState        = STUNNED_STANDING_UP
        Animation           = GTPA
            AnimationName     = IUUrukahi_GTPA
            AnimationMode     = ONCE
            AnimationSpeedFactorRange = 1.5 1.5
        End
    End

    AnimationState        = THROWN_PROJECTILE
        Animation           = FLYA
            AnimationName     = IUUrukahi_FLYA
            AnimationMode     = LOOP
        End
    End




    AnimationState = FIRING_OR_PREATTACK_A PASSENGER PASSENGER_VARIATION_1
        Animation = grasping_siege_lefthanded
            AnimationName =  IUUrukahi_BATB
            AnimationMode = ONCE

        End
    End

    AnimationState = FIRING_OR_PREATTACK_A PASSENGER PASSENGER_VARIATION_2
        Animation = grasping_siege_righthanded
            AnimationName = IUUrukahi_BATA
            AnimationMode = ONCE

        End
    End

    AnimationState = FIRING_OR_PREATTACK_B PASSENGER PASSENGER_VARIATION_1
        Animation = grasping_siege_lefthanded
            AnimationName =  IUUrukahi_BATB
            AnimationMode = ONCE

        End
    End
    AnimationState = FIRING_OR_PREATTACK_B PASSENGER PASSENGER_VARIATION_2
        Animation = grasping_siege_righthanded
            AnimationName = IUUrukahi_BATA
            AnimationMode = ONCE

        End
    End

    AnimationState = FIRING_OR_PREATTACK_C PASSENGER PASSENGER_VARIATION_1
        Animation = grasping_siege_lefthanded
            AnimationName =  IUUrukahi_BATB
            AnimationMode = ONCE

        End
    End
    AnimationState = FIRING_OR_PREATTACK_C PASSENGER PASSENGER_VARIATION_2
        Animation = grasping_siege_righthanded
            AnimationName = IUUrukahi_BATA
            AnimationMode = ONCE

        End
    End

    AnimationState = MOVING FIRING_OR_PREATTACK_A
        Animation = TrotAndFire
            AnimationName = IUUrukahi_ATRA
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART

    End




    AnimationState = MOVING BACKING_UP PASSENGER PASSENGER_VARIATION_1
        Animation = moving_siege_lefthanded
            AnimationName =  IUUrukahi_BRNB
            AnimationMode = LOOP_BACKWARDS
        End
    End
    AnimationState = MOVING BACKING_UP PASSENGER PASSENGER_VARIATION_2
        Animation = moving_siege_righthanded
            AnimationName = IUUrukahi_BRNA
            AnimationMode = LOOP_BACKWARDS
        End
    End

    AnimationState = MOVING TURN_LEFT PASSENGER PASSENGER_VARIATION_1
        Animation = moving_siege_lefthanded
            AnimationName =  IUUrukahi_BRNB
            AnimationMode = LOOP_BACKWARDS
        End
    End
    AnimationState = MOVING TURN_LEFT PASSENGER PASSENGER_VARIATION_2
        Animation = moving_siege_righthanded
            AnimationName = IUUrukahi_BRNA
            AnimationMode = LOOP
        End
    End

    AnimationState = MOVING TURN_RIGHT PASSENGER PASSENGER_VARIATION_1
        Animation = moving_siege_lefthanded
            AnimationName =  IUUrukahi_BRNB
            AnimationMode = LOOP
        End
    End
    AnimationState = MOVING TURN_RIGHT PASSENGER PASSENGER_VARIATION_2
        Animation = moving_siege_righthanded
            AnimationName = IUUrukahi_BRNA
            AnimationMode = LOOP_BACKWARDS
        End
    End

    AnimationState = MOVING PASSENGER PASSENGER_VARIATION_1
        Animation = moving_siege_lefthanded
            AnimationName =  IUUrukahi_BRNB
            AnimationMode = LOOP
            AnimationSpeedFactorRange    =    0.7 0.7
        End
    End
    AnimationState = MOVING PASSENGER PASSENGER_VARIATION_2
        Animation = moving_siege_righthanded
            AnimationName = IUUrukahi_BRNA
            AnimationMode = LOOP
            AnimationSpeedFactorRange    =    0.7 0.7
        End
    End


    AnimationState = MOVING CLIMBING BACKING_UP
        Animation = Climbing_Down
            AnimationName = IUUrukahi_CLMA
            AnimationMode = LOOP_BACKWARDS
            AnimationSpeedFactorRange = 2.0 2.0
        End
    End

    AnimationState = MOVING CLIMBING
        Animation = Climbing_Up
            AnimationName = IUUrukahi_CLMA
            AnimationMode = LOOP
            AnimationSpeedFactorRange = 2.0 2.0
        End
    End

    AnimationState = MOVING EMOTION_TERROR
        Animation = TERRORIZED
            AnimationName = IUUrukahi_RUNC
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART
        ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = MOVING BACKING_UP
        Animation = BackingUp
            AnimationName = IUUrukahi_BAKA
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART
    End

    AnimationState = MOVING ALTERNATE_FORMATION
        Animation = Moving
            AnimationName = IUUrukahi_SPCA
            AnimationMode = LOOP
            Distance        = 25
        End
        Flags = RANDOMSTART
        ParticleSysBone = None InfantryDustTrails
    End
    AnimationState = MOVING
        Animation = Moving
            AnimationName = IUUrukahi_RUNA
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART
        ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = FIRING_OR_PREATTACK_A
        Animation = ATKA
            AnimationName = IUUrukahi_ATKA
            AnimationMode = ONCE
        End
        Animation = ATKC
            AnimationName = IUUrukahi_ATKC
            AnimationMode = ONCE
            AnimationSpeedFactorRange    =    0.7 0.7
        End
        Animation = ATKB
            AnimationName = IUUrukahi_ATKB
            AnimationMode = ONCE
        End
    End

    AnimationState = FIRING_OR_PREATTACK_B
        Animation = ATKA
            AnimationName = IUUrukahi_ATKA
            AnimationMode = ONCE
        End
        Animation = ATKC
            AnimationName = IUUrukahi_ATKC
            AnimationMode = ONCE
            AnimationSpeedFactorRange    =    0.7 0.7
        End
        Animation = ATKB
            AnimationName = IUUrukahi_ATKB
            AnimationMode = ONCE
        End
    End

    AnimationState = FIRING_OR_PREATTACK_C
        Animation = ATKA
            AnimationName = IUUrukahi_ATKA
            AnimationMode = ONCE
        End
        Animation = ATKC
            AnimationName = IUUrukahi_ATKC
            AnimationMode = ONCE
            AnimationSpeedFactorRange    =    0.7 0.7
        End
        Animation = ATKB
            AnimationName = IUUrukahi_ATKB
            AnimationMode = ONCE
        End
    End

    AnimationState = WAR_CHANT
        Animation = Chant
            AnimationName = IUUrukahi_TNTA
            AnimationMode = LOOP
        End
    End

    AnimationState                            = EMOTION_UNCONTROLLABLY_AFRAID
        Animation                            = FERA
            AnimationName                    = IUUrukahi_FERA
            AnimationMode                    = LOOP
        End
        Flags = RANDOMSTART
    End

    AnimationState                            = EMOTION_AFRAID
        Animation                            = FERA
            AnimationName                    = IUUrukahi_FERA
            AnimationMode                    = LOOP
        End
        Flags = RANDOMSTART
    End

    AnimationState = BETWEEN_FIRING_SHOTS_A
        Animation = Wait
            AnimationName = IUUrukahi_IDLA
            AnimationMode = ONCE
        End
    End

     AnimationState = ATTACKING
        Animation = IdleAllAttacksComeFrom
            AnimationName = IUUrukahi_IDLA
            AnimationMode = LOOP
        End
    End

    AnimationState                            = EMOTION_TAUNTING
        Animation                            = TNTA
            AnimationName                    = IUUrukahi_TNTA
            AnimationMode                    = LOOP
            AnimationBlendTime                = 10
            AnimationSpeedFactorRange        = 0.8 1.2
        End
        Flags                                = RANDOMSTART
    End

    AnimationState                            = EMOTION_POINTING
        Animation                            = Pointing1
            AnimationName                    = IUUrukahi_PNTA
            AnimationMode                    = LOOP
        End
        Flags                                = RANDOMSTART
    End

    AnimationState                            = EMOTION_CELEBRATING
        Animation                            = CHRA
            AnimationName                    = IUUrukahi_CHRA
            AnimationMode                    = ONCE
            AnimationBlendTime                = 10
        End
        Animation                            = CHRB
            AnimationName                    = IUUrukahi_CHRB
            AnimationMode                    = ONCE
            AnimationBlendTime                = 10
        End
        Animation                            = TNTA
            AnimationName                    = IUUrukahi_TNTA
            AnimationMode                    = ONCE
            AnimationBlendTime                = 10
        End
        Flags                = RESTART_ANIM_WHEN_COMPLETE
    End

    AnimationState                            = EMOTION_ALERT
        Animation                            = ALERT
            AnimationName                    = IUUrukahi_IDLA
            AnimationMode                    = LOOP
        End
        Flags                                = RESTART_ANIM_WHEN_COMPLETE RANDOMSTART
    End


    AnimationState        = RAISING_FLAG
        Animation
            AnimationName = IUUrukahi_CHRA
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 0.9 1.1
        End
        Animation
            AnimationName = IUUrukahi_CHRB
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 0.9 1.1
        End
        Flags = RESTART_ANIM_WHEN_COMPLETE
    End

    AnimationState        = SELECTED
        StateName           = STATE_Selected
        Animation           = ATNB
            AnimationName     = IUUrukahi_ATNB
            AnimationMode     = LOOP
        End
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
        EndScript
    End

    TransitionState       = TRANS_IdleToSelected
        Animation           = ATNA
            AnimationName     = IUUrukahi_ATNA
            AnimationMode     = ONCE
            AnimationSpeedFactorRange = 0.9 1.0
        End
    End

    TransitionState       = TRANS_SelectedToGuard
        Animation           = ATNB
            AnimationName     = IUUrukahi_ATNB
            AnimationMode     = ONCE
            AnimationSpeedFactorRange = 0.9 1.0
        End
    End

    TransitionState        = TRANS_SelectedToBoard
        Animation            = ATNC
            AnimationName    = IUUrukahi_ATNC
            AnimationMode    = ONCE
            AnimationSpeedFactorRange = 0.9 1.0
        End
    End

    AnimationState = PASSENGER PASSENGER_VARIATION_1
        Animation = idle_siege_lefthanded
            AnimationName =  IUUrukahi_BIDB
            AnimationMode = LOOP
        End
    End
    AnimationState = PASSENGER PASSENGER_VARIATION_2
        Animation = idle_siege_righthanded
            AnimationName = IUUrukahi_BIDA
            AnimationMode = LOOP
        End
    End

    AnimationState WEAPONSET_PLAYER_UPGRADE
        Animation = IDLA
            AnimationName = IUUrukahi_IDLA
            AnimationMode = LOOP
        End
        StateName    = Idle
        Flags        = RANDOMSTART
    End

    AnimationState = ALTERNATE_FORMATION
        Animation = IDLB
            AnimationName = IUUrukahi_IDLA
            AnimationMode = LOOP
            AnimationPriority = 20
        End
    End
  End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End


    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side               = Isengard
    EditorSorting      = UNIT
    ThreatLevel        = 1.0
    ThingClass         = HORDE_UNIT
    EmotionRange       = 240
    CommandPoints      = 3
    ShockwaveResistance          = 30
    CommandSet         = IsengardFighterCommandSet
    TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT
    Scale = 1.1

    ShroudClearingRange     = 325
    VisionRange         = 200

    VisionSide         = 35%
    VisionRear         = 25%

    MaxVisionBonusPercent     = 300%
    VisionBonusTestRadius     = 200
    VisionBonusPercentPerFoot = 2.0%

    BountyValue            = 5
    DisplayName            = OBJECT:IsengardFighter
    CrushableLevel         = 0
    CrusherLevel           = 0
    CrushRevengeWeapon     = BasicInfantryCrushRevenge

    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY     UrukHaiSword
        Weapon            = SECONDARY   IsengardFighterSwordUglukHeiﬂblut
        Weapon            = QUATERNARY  IsengardFighterSwordUglukHeiﬂblut
        AutoChooseSources = SECONDARY NONE
        AutoChooseSources = QUATERNARY NONE
    End


    ArmorSet
        Conditions      = None
        Armor           = EVIL_REGULAR_15_SWORDS
        DamageFX        = NormalDamageFX
    End
    ArmorSet
        Conditions      = PLAYER_UPGRADE
        Armor           = EVIL_REGULAR_15_SWORDS_HEAVY_ARMOR
        DamageFX        = NormalDamageFX
    End

    BuildFadeInOnCreateTime = 0




    VoiceAttack                            = UrukWarriorVoiceAttackMS
    VoiceAttackMachine                     = UrukWarriorVoiceAttack
    VoiceAttackCharge                      = UrukWarriorVoiceAttackCharge
    VoiceAttackStructure                   = UrukWarriorVoiceAttackBuilding
    VoiceCreated                           = EVA:UrukCreated
    VoiceFullyCreated                      = EVA:UrukCreated
    VoiceGuard                             = UrukWarriorVoiceMove
    VoiceMove                              = UrukWarriorVoiceMove
    VoiceMoveToCamp                        = UrukWarriorVoiceMoveCamp
    VoiceMoveWhileAttacking                = UrukWarriorVoiceDisengageMS
    VoicePriority                          = 60
    VoiceRetreatToCastle                   = UrukPikemanVoiceRetreatMS
    VoiceSelect                            = UrukWarriorVoiceSelectMS
    VoiceSelectBattle                      = UrukWarriorVoiceSelectBattle

    VoiceEnterStateAttack                  = UrukWarriorVoiceEnterStateAttack
    VoiceEnterStateAttackCharge            = UrukWarriorVoiceEnterStateAttackCharge
    VoiceEnterStateAttackMachine           = UrukWarriorVoiceEnterStateAttackBuilding
    VoiceEnterStateAttackStructure         = UrukWarriorVoiceEnterStateAttackBuilding
    VoiceEnterStateMove                    = UrukWarriorVoiceEnterStateMove
    VoiceEnterStateMoveToCamp              = UrukWarriorVoiceEnterStateMoveCamp
    VoiceEnterStateMoveWhileAttacking      = UrukWarriorVoiceEnterStateDisengage
    VoiceEnterStateRetreatToCastle         = UrukPikemanVoiceEnterStateRetreat

    SoundImpact                            = ImpactHorse

    UnitSpecificSounds
        VoiceGarrison                        = UrukWarriorVoiceGarrison
        VoiceEnterUnitEvilMenTransportShip   = UrukWarriorVoiceMove
        VoiceEnterUnitMordorMumakil          = UrukWarriorVoiceMove
        VoiceEnterUnitSlaughterHouse         = UrukWarriorVoiceGarrisonSlaughterHouse
        VoiceInitiateCaptureBuilding         = UrukWarriorVoiceMove
    End

    CrowdResponseKey = Uruk

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:RAISING_FLAG            Excluded:DYING ENGAGED    Sound:EmotionUrukCompilationVoxTauntSinglesLoop
    End

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Orc_Infantry UrukHai_Swordman
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:BodyFallOrc            Animation:IUUrukahi_SKL.IUUrukahi_DIEA    Frames:18
        AnimationSound = Sound:BodyFallOrc            Animation:IUUrukahi_SKL.IUUrukahi_DIEB    Frames:30
        AnimationSound = Sound:BodyFallOrc            Animation:IUUrukahi_SKL.IUUrukahi_DIEC    Frames:28
        AnimationSound = Sound:BodyFallGeneric2        Animation:IUUrukahi_SKL.IUUrukahi_DIEG    Frames:115
        AnimationSound = Sound:BodyFallOrc            Animation:IUUrukahi_SKL.IUUrukahi_LNDA    Frames:2
        AnimationSound = Sound:BodyFallGeneric2        Animation:IUUrukahi_SKL.IUUrukahi_LNDA    Frames:37
    End



    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE CAN_USE_SIEGE_TOWER URUK GRAB_AND_DROP

    Body = ActiveBody ModuleTag_02
        CheerRadius           = EMOTION_CHEER_RADIUS
        MaxHealth             = 800
        MaxHealthDamaged      = 300
        BurningDeathBehavior  = Yes
        BurningDeathFX        = FX_InfantryBurningFlame
        CheerRadius           = EMOTION_CHEER_RADIUS
    End
	
	ReplaceModule ModuleTag_DefaultShareExp
       Behavior = ShareExperienceBehavior ModuleTag_DefaultShareExp_Nekromant
          Radius            = 300.0
          ObjectFilter      = ANY +IsengardUrukHauptmann1 ALLIES
          DropOff           = 0.20
       End
    End

    Behavior = WeaponSetUpgrade WeaponSetUpgradeModuleTag
        TriggeredBy           = Upgrade_ForgedBlades
    End

    Behavior = ArmorUpgrade ArmorUpgradeModuleTag
        TriggeredBy           = Upgrade_HeavyArmor
        ArmorSetFlag          = PLAYER_UPGRADE
    End

    Behavior = SubObjectsUpgrade Armor_Upgrade
        TriggeredBy       = Upgrade_HeavyArmor
        UpgradeTexture    = chss_uk_fa.tga 0 chss_uk_fa_ha.tga
        UpgradeTexture    = IUUrukahi_l.tga 0 IUUrukahi_HA.tga
        UpgradeTexture    = IUUrukahi.tga 0 IUUrukahi_HA.tga
        RecolorHouse      = No
        ShowSubObjects    = SCHULTER GNLT
        ExcludeSubobjects = Forged_Blade
    End


    Behavior = SubObjectsUpgrade ForgedBlades_Upgrade1
        TriggeredBy       = Upgrade_ForgedBlades
        ShowSubObjects    = Forged_Blade
    End

    Behavior = SubObjectsUpgrade ForgedBlades_Upgrade2
        TriggeredBy       = Upgrade_AllFactionUpgrade
        HideSubObjects    = Forged_Blade SCHULTER GNLT
    End

    Behavior = AttributeModifierUpgrade ModuleTag_HeavyArmorBonus_Stahlwerk
        TriggeredBy       = Upgrade_HeavyArmor Upgrade_TechnologyIsengardGeharteteRustungen
        RequiresAllTriggers = Yes
        AttributeModifier = IsengardStahlwerkArmorBonus
    End

    Behavior = AttributeModifierUpgrade ModuleTag_ForgedBladesBonus_Stahlwerk
        TriggeredBy       = Upgrade_ForgedBlades Upgrade_TechnologyIsengardGeharteteWaffen
        RequiresAllTriggers = Yes
        AttributeModifier = IsengardStahlwerkAttackBonus
    End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle  = Yes ATTACK_BUILDINGS
    AILuaEventsList             = IsengardFighterFunctions
    MoodAttackCheckRate         = 500
    AttackPriority              = AttackPriority_Infantry
    BurningDeathTime            = BURNINGDEATH_DURATION_INFANTRY
  End

  LocomotorSet
    Locomotor     = HumanLocomotor
    Condition     = SET_NORMAL
    Speed         = NORMAL_EVIL_FAST_MEMBER_SPEED
  End

  LocomotorSet
    Locomotor = BurningDeathLocomotorInfantry
    Condition = SET_BURNINGDEATH
    Speed      = BURNINGDEATH_WANDERSPEED_INFANTRY
  End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult = 1.0
    ShockStandingTime        = 2533
  End

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -EXTRA_8 -FADED
    SinkDelay = 3000
    SinkRate = 0.40
    DestructionDelay = 8000
    Sound = INITIAL UrukVoiceDie
    DeathFlags = DEATH_1
  End

    Behavior = SlowDeathBehavior ModuleTag_GrabandDrop
        DeathTypes       = NONE +EXTRA_8
        SinkDelay        = 3000
        SinkRate         = 0.60
        DestructionDelay = 10000
        DeathFlags       = DEATH_4
        ShadowWhenDead   = Yes
    End

    Behavior = FireWeaponWhenDeadBehavior ModuleTag_GrabandDropImpact
        RequiredStatus  = DEATH_4
        StartsActive    = Yes
        DelayTime       = 0
        DeathWeapon     = GrabandDropInfantryImpactWarhead
        WeaponOffset    = X:0 Y:0 Z:0
    End

    Behavior = BezierProjectileBehavior ModuleTag_BodyHitHuman
       FirstHeight               = 24
       SecondHeight              = 24
       FirstPercentIndent        = 30%
       SecondPercentIndent       = 70%
       TumbleRandomly            = Yes
       CrushStyle                = Yes
       DieOnImpact               = Yes
       BounceCount               = 1
       BounceDistance            = 40
       BounceFirstHeight         = 24
       BounceSecondHeight        = 24
       BounceFirstPercentIndent  = 20%
       BounceSecondPercentIndent = 80%
       GroundHitFX               = FX_GrabandDropInfantryGroundHit
       GroundBounceFX            = FX_GrabandDropInfantryGroundHit
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_HauptmannPowerUnpause
        SpecialPowerTemplate = SpecialAbilityUrukHauptmannSchwertkampfer
        TriggeredBy          = Upgrade_IsengardFaction
    End

    Behavior = WeaponModeSpecialPowerUpdate ModuleTag_HauptmannPowerUpdate
        SpecialPowerTemplate = SpecialAbilityUrukHauptmannSchwertkampfer
        Duration             = 20000
        AttributeModifier    = UrukHauptmannSchwertkampferBonus
        LockWeaponSlot       = SECONDARY
        StartsPaused         = Yes
    End



    Behavior = SpecialPowerModule ModuleTag_SturheitStarter
        SpecialPowerTemplate      = SpecialAbilityGimliSturheit
        UpdateModuleStartsAttack  = Yes
        StartsPaused              = No
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_SturheitWeaponFireUpdate
        SpecialPowerTemplate      = SpecialAbilityGimliSturheit
        SpecialWeapon             = GimliSturheitWeapon
        WhichSpecialWeapon        = 1
        StartAbilityRange         = 10.0
        SkipContinue              = Yes
        UnpackTime                = 1000
        PackTime                  = 2000
        MustFinishAbility         = Yes
    End
	
	Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityUpdate
		SpecialAbility      	   = SpecialAbilityGimliSturheit
		MaxScanRange               = 40
        Query                      = 2 ANY +HORDE ENEMIES
        Query                      = 1 ANY +HERO +MONSTER NOT_FLYING_UNITS
    End




    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BonusUnpause
        SpecialPowerTemplate        = SpecialAbilityBonusLeadership
        TriggeredBy                 = Upgrade_ObjectLevel5
    End

    Behavior = SpecialPowerModule ModuleTag_HeroLeadership
        SpecialPowerTemplate        = SpecialAbilityBonusLeadership
        UpdateModuleStartsAttack    = No
        StartsPaused                = Yes
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ComboPowerUnpause
        SpecialPowerTemplate = SpecialAbilityUrukHauptmannCombos
        TriggeredBy          = Upgrade_IsengardFaction
    End

    Behavior = WeaponModeSpecialPowerUpdate ModuleTag_ComboPowerUpdate
        SpecialPowerTemplate = SpecialAbilityUrukHauptmannCombos
        Duration             = 20000
        AttributeModifier    = UrukHauptmannCombosBonus
        LockWeaponSlot       = SECONDARY
        StartsPaused         = Yes
    End

  Behavior = SquishCollide ModuleTag_06

  End

  Behavior = HordeMemberCollide ModuleTag_HMC

  End


  Geometry = CYLINDER
  GeometryMajorRadius = 9.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 20
  GeometryIsSmall = Yes

  Shadow = SHADOW_DECAL
  ShadowSizeX = 22
  ShadowSizeY = 22
  ShadowTexture = ShadowI
End


ChildObject IsengardFighter_Summoned IsengardFighter
    IsTrainable = No
    CommandPoints = 0
    EquivalentTo = IsengardFighter

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime        = 180000
        MaxLifetime        = 180000
        DeathType        = FADED
    End
    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 2500
        DestructionDelay = 2500
        Sound    = INITIAL SpellGenericUnsummonFasterMS
        FX = INITIAL FX_IsengartUnsummonFog
        DeathFlags = DEATH_2
    End
    Behavior = GrantUpgradeCreate ModuleTag_GrantIsengardForgedBlades
        UpgradeToGrant = Upgrade_ForgedBlades
    End
    Behavior = GrantUpgradeCreate ModuleTag_GrantHeavyArmor
        UpgradeToGrant = Upgrade_HeavyArmor
    End
    Behavior = GrantUpgradeCreate ModuleTag_GrantBasicTraining
        UpgradeToGrant = Upgrade_BasicTraining
    End
End


Object IsengardEliteFighter


    SelectPortrait          = UPUrukAxe

  Draw = W3DHordeModelDraw ModuleTag_01

    OkToChangeModelColor = Yes
    StaticModelLODMode   = Yes

    DefaultModelConditionState
        Model    = iuurukuglk
        Skeleton = IUUrukahi_SKL
    End

        IdleAnimationState
            Animation = IDLA
                AnimationName = IUUrukahi_IDLA
                AnimationMode = ONCE
                AnimationBlendTime = 10
            End
            StateName = Idle
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Jump"        then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
                if Prev == "selected"    then CurDrawableSetTransitionAnimState("Trans_Selected_To_Idle") return end
            EndScript
        End

        AnimationState        = THROWN_PROJECTILE
            Animation           = FLYA
                AnimationName     = IUUrukahi_FLYA
                AnimationMode     = LOOP
            End
        End

        AnimationState                        = PASSENGER FREEFALL
            Animation                        = FLLA
                AnimationName                = IUUrukahi_FLLA
                AnimationMode                = LOOP
            End
        End

        AnimationState                        = FREEFALL
            Animation                        = Falling
                AnimationName                = IUUrukahi_FLYA
                AnimationMode                = LOOP
                AnimationBlendTime            = 10
                AnimationSpeedFactorRange    = 0.5    0.5
            End
        End

        AnimationState                        = SPLATTED
            Animation                        = LNDA
                AnimationName                = IUUrukahi_LNDA
                AnimationMode                = ONCE
            End
        End


        AnimationState        = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = IUUrukahi_FLYA
                AnimationMode      = LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
            Flags               = RANDOMSTART
        End


        AnimationState            = DYING BURNINGDEATH DEATH_1
            Animation
                AnimationName    = IUUrukahi_DIEA
                AnimationMode    = ONCE
                AnimationBlendTime = 10
            End
            Animation
                AnimationName    = IUUrukahi_DIEB
                AnimationMode    = ONCE
                AnimationBlendTime = 10
            End
            Animation
                AnimationName    = IUUrukahi_DIEC
                AnimationMode    = ONCE
                AnimationBlendTime = 10
            End
            Animation
                AnimationName    = IUUrukahi_DIEG
                AnimationMode    = ONCE
                AnimationBlendTime = 10
            End
        End
        AnimationState = DYING SPLATTED DEATH_1
            Animation = Dying
                AnimationName = IUUrukahi_LNDA
                AnimationMode = ONCE
            End
        End

        AnimationState = DYING DEATH_1
            Animation = Dying
                AnimationName = IUUrukahi_DIEA
                AnimationMode = ONCE
            End
        End

        AnimationState = DYING DEATH_2
            Animation = ByeBye
                AnimationName = IUUrukahi_IDLA
                AnimationMode = LOOP
            End
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = GTPA
                AnimationName     = IUUrukahi_GTPA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState        = STUNNED
            Animation           = LNDA
                AnimationName     = IUUrukahi_LNDA
                AnimationMode     = ONCE
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = IUUrukahi_IDLA
                AnimationMode                = LOOP
            End
        End



        AnimationState = UNPACKING
            Animation = Unpacking_Passenger
                AnimationName = IUBzrkLadr_PLTA
                AnimationMode = ONCE
            End
            StateName = Jump
        End


        AnimationState = MOVING CLIMBING BACKING_UP WEAPONSET_TOGGLE_1
            Animation = Climbing_Down
                AnimationName = IUUrukahi_CLMA
                AnimationMode = LOOP_BACKWARDS
                AnimationSpeedFactorRange = 2.0 2.0
            End
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
        End

        AnimationState = MOVING CLIMBING BACKING_UP
            Animation = Climbing_Down
                AnimationName = IUUrukahi_CLMA
                AnimationMode = LOOP_BACKWARDS
                AnimationSpeedFactorRange = 2.0 2.0
            End
        End

        AnimationState = MOVING WEAPONSET_TOGGLE_1 BACKING_UP
            Animation = MovingTorch
                AnimationName = IUUrukahi_BAKA
                AnimationMode = LOOP
            End
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
        End

        AnimationState = MOVING EMOTION_TERROR
            Animation = TERRORIZED
                AnimationName = IUUrukahi_RUNC

                AnimationMode = LOOP
            End
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
        End

        AnimationState = MOVING BACKING_UP
            Animation = BackingUp
                AnimationName = IUUrukahi_BAKA
                AnimationMode = LOOP
            End
            Flags = RANDOMSTART
        End

        AnimationState = MOVING CLIMBING WEAPONSET_TOGGLE_1
            Animation = Climbing_Up
                AnimationName = IUUrukahi_CLMA
                AnimationMode = LOOP
                AnimationSpeedFactorRange = 2.0 2.0
            End
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
        End

        AnimationState = MOVING CLIMBING
            Animation = Climbing_Up
                AnimationName = IUUrukahi_CLMA
                AnimationMode = LOOP
                AnimationSpeedFactorRange = 2.0 2.0
            End
        End


        AnimationState = TRANSPORT_MOVING PASSENGER WEAPONSET_TOGGLE_1
            Animation = Moving
                AnimationName = IUBzrkLadr_RUNA
                AnimationMode = LOOP
            End
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
        End

        AnimationState = TRANSPORT_MOVING PASSENGER
            Animation = Moving
                AnimationName = IUBzrkLadr_RUNA
                AnimationMode = LOOP
            End
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
        End


        AnimationState = PASSENGER WEAPONSET_TOGGLE_1
            Animation = IdlePassenger
                AnimationName = IUBzrkLadr_IDLA
                AnimationMode = LOOP
            End
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
            Flags = RANDOMSTART

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle"    then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
                if Prev == "selected" then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
                if Prev == "selected_torch" then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
                if Prev == "Emotion" then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
                if Prev == "MovingTorch" then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
                if Prev == "nonTorchState" then CurDrawableSetTransitionAnimState("TRANS_Torch_Passenger") return end
            EndScript
        End

        AnimationState = PASSENGER
            Animation = IdlePassenger
                AnimationName = IUBzrkLadr_IDLA
                AnimationMode = LOOP
            End

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle"    then CurDrawableSetTransitionAnimState("TRANS_To_Passenger") return end
                if Prev == "selected" then CurDrawableSetTransitionAnimState("TRANS_To_Passenger") return end
                if Prev == "Emotion" then CurDrawableSetTransitionAnimState("TRANS_To_Passenger") return end
                if Prev == "Moving" then CurDrawableSetTransitionAnimState("TRANS_To_Passenger") return end
                if Prev == "MovingTorch" then CurDrawableSetTransitionAnimState("TRANS_To_Passenger") return end
                if Prev == "nonTorchState" then CurDrawableSetTransitionAnimState("TRANS_To_Passenger") return end
            EndScript
        End


        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = RunAndFire
                AnimationName       = IUUrukAhi_ATRA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End



        AnimationState = MOVING WEAPONSET_TOGGLE_1 REALLYDAMAGED
            StateName    = Moving
            Animation = MovingTorch
                AnimationName = IUBzrkr_RUNB
                AnimationMode = LOOP
                AnimationSpeedFactorRange = 1.5 1.5
            End
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Jump"    then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
            EndScript
        End

        AnimationState = MOVING REALLYDAMAGED
            StateName    = Moving
            Animation = Moving
                AnimationName = IUUrukahi_RUNA
                AnimationMode = LOOP
                AnimationSpeedFactorRange = 1.5 1.5
            End
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Jump"    then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
            EndScript
        End

        AnimationState = MOVING WEAPONSET_TOGGLE_1 DAMAGED
            StateName    = Moving
            Animation = MovingTorch
                AnimationName = IUBzrkr_RUNB
                AnimationMode = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Jump"    then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
            EndScript
        End

        AnimationState = MOVING DAMAGED
            StateName    = Moving
            Animation = Moving
                AnimationName = IUUrukahi_RUNA
                AnimationMode = LOOP
                AnimationSpeedFactorRange = 1.1 1.1
            End
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Jump"    then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
            EndScript
        End

        AnimationState = MOVING WEAPONSET_TOGGLE_1
            StateName    = Moving
            Animation = MovingTorch
                AnimationName = IUBzrkr_RUNB
                AnimationMode = LOOP
            End
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Jump"    then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
            EndScript
        End

        AnimationState = MOVING
            StateName    = Moving
            Animation = Moving
                AnimationName = IUUrukahi_RUNA
                AnimationMode = LOOP
            End
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Jump"    then CurDrawableSetTransitionAnimState("Trans_Jump_To_Ready") return end
            EndScript
        End


        AnimationState = WEAPON_TOGGLING
            Animation            = Salute
                AnimationName    = IUBZRKR_LITA
                AnimationMode    = ONCE
            End
            ParticleSysBone           = FLAME01 OrcBerserkerFlare99 FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks99 FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke99 FollowBone:Yes
        End

        AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            StateName    = Attacking
             Animation = ATKA
                AnimationName = IUUrukAhi_ATKC
                AnimationMode = ONCE
                UseWeaponTiming    = Yes
            End
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
        End


        AnimationState = FIRING_OR_PREATTACK_B WEAPONSET_TOGGLE_1
            StateName    = Attacking
             Animation = ATKA
                AnimationName = IUBzrkr_LITB
                AnimationMode = ONCE
                UseWeaponTiming    = Yes
            End
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
        End

        AnimationState = FIRING_OR_PREATTACK_A
            StateName = nonTorchState
             Animation = ATKA
                AnimationName = IUUrukAhi_ATKC
                AnimationMode = ONCE
                UseWeaponTiming    = Yes
            End
        End

        TransitionState = Trans_Jump_To_Ready
            Animation = Transition
                AnimationName = IUBzrkLadr_PLTB
                AnimationMode = ONCE
                AnimationBlendTime = 0
            End
        End

        TransitionState = TRANS_Torch_Passenger
            Animation = Transition_to_passenger_with_torch
                AnimationName = IUBzrkLadr_CLMB
                AnimationMode = ONCE
                AnimationBlendTime = 0
            End
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
               ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
        End

        TransitionState = TRANS_To_Passenger
            Animation = Transition_to_passenger
                AnimationName = IUBzrkLadr_CLMB
                AnimationMode = ONCE
                AnimationBlendTime = 0
            End
        End

        AnimationState = WEAPONSET_TOGGLE_1
            StateName    = selected_torch
             Animation = Selected(ATNA)
                AnimationName    = IUUrukahi_IDLA
                AnimationMode    = LOOP
            End
            ParticleSysBone           = FLAME01 OrcBerserkerFlare FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSparks FollowBone:Yes
            ParticleSysBone           = FLAME01 OrcBerserkerSmoke FollowBone:Yes
        End

        AnimationState                            = RAISING_FLAG
            StateName = Emotion
            Animation                           = CHRA
                AnimationName                    = IUUrukahi_CHRA
                AnimationMode                    = ONCE
                AnimationSpeedFactorRange        = 0.9 1.1
            End
            Animation                           = CHRB
                AnimationName                    = IUUrukahi_CHRB
                AnimationMode                    = ONCE
                AnimationSpeedFactorRange        = 0.9 1.1
            End
            Flags                                = RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState = SELECTED
            StateName    = selected
            Flags        = RESTART_ANIM_WHEN_COMPLETE RANDOMSTART
             Animation = Selected(ATNA)
                AnimationName    = IUUrukahi_ATNB
                AnimationMode    = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle"    then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") return end
            EndScript
        End



        AnimationState                            = EMOTION_AFRAID
            StateName = Emotion
            Animation                            = FERA
                AnimationName                    = IUUrukahi_FERA
                AnimationMode                    = LOOP
            End
            Flags = RANDOMSTART
        End

        AnimationState                            = EMOTION_TAUNTING
            StateName = Emotion
            Animation                            = TNTA
                AnimationName                    = IUUrukahi_TNTA
                AnimationMode                    = LOOP
            End
        End
        AnimationState                            = EMOTION_POINTING
            StateName = Emotion
            Animation                            = Pointing1
                AnimationName                    = IUUrukahi_PNTA
                AnimationMode                    = LOOP
            End
        End
        AnimationState                            = EMOTION_CELEBRATING
            StateName = Emotion
            Animation                           = CHRA
                AnimationName                    = IUUrukahi_CHRA
                AnimationMode                    = ONCE
            End
        End

        AnimationState                            = WAR_CHANT
            Animation                           = CHRA
                AnimationName                    = IUUrukahi_CHRA
                AnimationMode                    = LOOP
            End
        End

        TransitionState = Trans_Selected_To_Idle
            Animation
                AnimationName    = IUUrukahi_ATNC
                AnimationMode    = ONCE
            End
        End

        TransitionState = TRANS_Idle_to_Selected
            Animation
                AnimationName    = IUUrukahi_ATNA
                AnimationMode    = ONCE
            End
        End

End


    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side               = Isengard
    EditorSorting      = UNIT
    ThreatLevel        = 1.0
    ThingClass         = HORDE_UNIT
    EmotionRange       = 240
    CommandPoints      = 0
    IsTrainable        = No
    CommandSet         = IsengardFighterCommandSet
    TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT
    Scale = 1.1

    ShroudClearingRange = 325
    VisionRange         = 200

    VisionSide         = 35%
    VisionRear         = 25%

    MaxVisionBonusPercent     = 300%
    VisionBonusTestRadius     = 200
    VisionBonusPercentPerFoot = 2.0%

    BountyValue          = ISENGARD_URUKFIGHTER_BOUNTY_VALUE
    DisplayName          = OBJECT:IsengardUgluksSpaher
    CrushableLevel       = 0
    CrusherLevel         = 0
    CrushRevengeWeapon 	 = BasicInfantryCrushRevenge

    WeaponSet
        Conditions = None
        Weapon = PRIMARY    UrukHaiSword
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End


    ArmorSet
        Conditions      = None
        Armor           = EdainInfantryArmor
        DamageFX        = NormalDamageFX
    End
    ArmorSet
        Conditions      = PLAYER_UPGRADE
        Armor           = EdainInfantryHeavyArmor
        DamageFX        = NormalDamageFX
    End


    BuildFadeInOnCreateTime = 0





    VoiceAttack                            = UrukWarriorVoiceAttackMS
    VoiceAttackMachine                    = UrukWarriorVoiceAttack
    VoiceAttackCharge                    = UrukWarriorVoiceAttackCharge
    VoiceAttackStructure                = UrukWarriorVoiceAttackBuilding
    VoiceCreated                        = EVA:UrukCreated
    VoiceFullyCreated                     = EVA:UrukCreated
    VoiceGuard                            = UrukWarriorVoiceMove
    VoiceMove                            = UrukWarriorVoiceMove
    VoiceMoveToCamp                        = UrukWarriorVoiceMoveCamp
    VoiceMoveWhileAttacking                = UrukWarriorVoiceDisengageMS
    VoicePriority                        = 54
    VoiceRetreatToCastle                = UrukPikemanVoiceRetreatMS
    VoiceSelect                            = UrukWarriorVoiceSelectMS
    VoiceSelectBattle                     = UrukWarriorVoiceSelectBattle

    VoiceEnterStateAttack                = UrukWarriorVoiceEnterStateAttack
    VoiceEnterStateAttackCharge            = UrukWarriorVoiceEnterStateAttackCharge
    VoiceEnterStateAttackMachine        = UrukWarriorVoiceEnterStateAttackBuilding
    VoiceEnterStateAttackStructure        = UrukWarriorVoiceEnterStateAttackBuilding
    VoiceEnterStateMove                    = UrukWarriorVoiceEnterStateMove
    VoiceEnterStateMoveToCamp            = UrukWarriorVoiceEnterStateMoveCamp
    VoiceEnterStateMoveWhileAttacking    = UrukWarriorVoiceEnterStateDisengage
    VoiceEnterStateRetreatToCastle        = UrukPikemanVoiceEnterStateRetreat

    SoundImpact                            = ImpactHorse

    UnitSpecificSounds
        VoiceGarrison                        = UrukWarriorVoiceGarrison
        VoiceEnterUnitEvilMenTransportShip    = UrukWarriorVoiceMove
        VoiceEnterUnitMordorMumakil            = UrukWarriorVoiceMove
        VoiceEnterUnitSlaughterHouse         = UrukWarriorVoiceGarrisonSlaughterHouse
        VoiceInitiateCaptureBuilding        = UrukWarriorVoiceMove
    End

    CrowdResponseKey = Uruk

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:RAISING_FLAG            Excluded:DYING ENGAGED    Sound:EmotionUrukCompilationVoxTauntSinglesLoop
    End

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Orc_Infantry UrukHai_Swordman
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:BodyFallOrc            Animation:IUUrukahi_SKL.IUUrukahi_DIEA    Frames:18
        AnimationSound = Sound:BodyFallOrc            Animation:IUUrukahi_SKL.IUUrukahi_DIEB    Frames:30
        AnimationSound = Sound:BodyFallOrc            Animation:IUUrukahi_SKL.IUUrukahi_DIEC    Frames:28
        AnimationSound = Sound:BodyFallGeneric2        Animation:IUUrukahi_SKL.IUUrukahi_DIEG    Frames:115
        AnimationSound = Sound:BodyFallOrc            Animation:IUUrukahi_SKL.IUUrukahi_LNDA    Frames:2
        AnimationSound = Sound:BodyFallGeneric2        Animation:IUUrukahi_SKL.IUUrukahi_LNDA    Frames:37
    End



    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE CAN_USE_SIEGE_TOWER URUK GRAB_AND_DROP

    Body = ActiveBody ModuleTag_02
        CheerRadius     = EMOTION_CHEER_RADIUS
        MaxHealth             = 1200
        MaxHealthDamaged      = 600
        BurningDeathBehavior = Yes
        BurningDeathFX       = FX_InfantryBurningFlame
        CheerRadius = EMOTION_CHEER_RADIUS
    End


    Behavior = WeaponSetUpgrade WeaponSetUpgradeModuleTag
        TriggeredBy        = Upgrade_ForgedBlades
    End


    Behavior = ArmorUpgrade ArmorUpgradeModuleTag
        TriggeredBy        = Upgrade_HeavyArmor
        ArmorSetFlag            = PLAYER_UPGRADE
    End

    Behavior = SubObjectsUpgrade Armor_Upgrade
        TriggeredBy       = Upgrade_HeavyArmor
        UpgradeTexture    = IUUrukahi.tga 0 IUUrukahi_HA.tga
        UpgradeTexture    = IUUrukahi_l.tga 0 IUUrukahi_HA.tga
        RecolorHouse      = Yes
        ExcludeSubobjects = Forged_Blade
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = FighterHorde
    End

    Behavior = SubObjectsUpgrade ForgedBlades_Upgrade
        TriggeredBy        = Upgrade_ForgedBlades
        ShowSubObjects    = Forged_Blade
    End

	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		AILuaEventsList               = IsengardFighterFunctions
		MoodAttackCheckRate        = 500
		AttackPriority                =     AttackPriority_Infantry
		BurningDeathTime            =    BURNINGDEATH_DURATION_INFANTRY
	End

	LocomotorSet
		Locomotor     = HumanLocomotor
		Condition     = SET_NORMAL
		Speed         = NORMAL_EVIL_FAST_MEMBER_SPEED
	End

	LocomotorSet
		Locomotor = BurningDeathLocomotorInfantry
		Condition = SET_BURNINGDEATH
		Speed      = BURNINGDEATH_WANDERSPEED_INFANTRY
	End

	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
		ShockStandingTime        = 2533
	End

	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL -EXTRA_8 -FADED
		SinkDelay = 3000
		SinkRate = 0.40
		DestructionDelay = 8000
		DeathFlags       = DEATH_1
		Sound = INITIAL UrukVoiceDie
	End



    Behavior = SlowDeathBehavior ModuleTag_GrabandDrop
        DeathTypes       = NONE +EXTRA_8
        SinkDelay        = 3000
        SinkRate         = 0.60
        DestructionDelay = 10000
        DeathFlags       = DEATH_4
        ShadowWhenDead   = Yes
    End

    Behavior = FireWeaponWhenDeadBehavior ModuleTag_GrabandDropImpact
        RequiredStatus  = DEATH_4
        StartsActive    = Yes
        DelayTime       = 0
        DeathWeapon     = GrabandDropInfantryImpactWarhead
        WeaponOffset    = X:0 Y:0 Z:0
    End

    Behavior = BezierProjectileBehavior ModuleTag_BodyHitHuman
       FirstHeight               = 24
       SecondHeight              = 24
       FirstPercentIndent        = 30%
       SecondPercentIndent       = 70%
       TumbleRandomly            = Yes
       CrushStyle                = Yes
       DieOnImpact               = Yes
       BounceCount               = 1
       BounceDistance            = 40
       BounceFirstHeight         = 24
       BounceSecondHeight        = 24
       BounceFirstPercentIndent  = 20%
       BounceSecondPercentIndent = 80%
       GroundHitFX               = FX_GrabandDropInfantryGroundHit
       GroundBounceFX            = FX_GrabandDropInfantryGroundHit
    End



    Behavior                                = SpecialPowerModule ModuleTag_WitterungUpdate
        SpecialPowerTemplate                = SpecialAbilityUglukHardMarch
        UpdateModuleStartsAttack            = Yes
        StartsPaused                        = No
        AttributeModifier                   = WitterungModifier
        AttributeModifierAffectsSelf        = Yes
        AttributeModifierFX                 = FX_AbwehrLeadership40
    End

    Behavior                                = SpecialAbilityUpdate ModuleTag_WitterungAnimation
        SpecialPowerTemplate                = SpecialAbilityUglukHardMarch
        PreparationTime                     = 0
        PersistentPrepTime                  = 0
        PackTime                            = 1330
        UnpackTime                          = 1000
        UnpackingVariation                  = 2
    End


    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate

        MinLifetime        = DAIN_SUMMON_TIMEOUT
        MaxLifetime        = DAIN_SUMMON_TIMEOUT
        DeathType        = FADED
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 2500
        DestructionDelay = 2500
        Sound    = INITIAL SpellGenericUnsummonFasterMS
        DeathFlags = DEATH_2
    End



  Behavior = SquishCollide ModuleTag_06

  End

  Behavior = HordeMemberCollide ModuleTag_HMC

  End



  Geometry = CYLINDER
  GeometryMajorRadius = 9.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 20
  GeometryIsSmall = Yes

  Shadow = SHADOW_DECAL
  ShadowSizeX = 22
  ShadowSizeY = 22
  ShadowTexture = ShadowI
End

