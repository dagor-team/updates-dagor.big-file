Object WildShelob

    SelectPortrait = HPShelob2
    ButtonImage    = HIShelob2

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_SupportHero

    #include "..\..\..\includes\StunDrawModuleLarge.inc"

    Draw = W3DScriptedModelDraw ModuleTag_01

        RandomTexture = mukankra.tga  0 mushelobh.tga

        DefaultModelConditionState
            Model                   = BUSpiderLord ;MUShelob_SKN
            Skeleton                = MUShelob_SKL
        End

        ModelConditionState         = ONE_RING
            Model                   = BUSpiderLord ;MUShelob_SKN
            Skeleton                = MUShelob_SKL
        End

        #include "shelobanims.inc"
    End

    Side = Wild
    EditorSorting = UNIT
    ThreatLevel = SHELOB_THREAT_LEVEL
    TransportSlotCount = TRANSPORTSLOTCOUNT_MONSTER
    MaxSimultaneousOfType = 1
    DisplayMeleeDamage = MEDIUM_HERO_DAMAGE

    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY    KankraNewMandibles
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions        = WEAPONSET_HERO_MODE
    End

    ArmorSet
        Conditions      = None
        Armor           = MediumHeroArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange = WILD_SHELOB_VISION_RANGE
    ShroudClearingRange = SHROUD_CLEAR_HERO
    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%


    BuildCost        = SHELOBDAG_COST
    BuildTime        = VERY_STRONG_HERO_BUILDTIME
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG

    DisplayName    = OBJECT:WildShelob
    RecruitText    = CONTROLBAR:ShelobRecruitMod
    ReviveText     = CONTROLBAR:ShelobRevive
    Hotkey         = CONTROLBAR:ShelobHotkey

    CrushableLevel = 2

    CrusherLevel                = 2
    CrushWeapon                 = ShelobCrush

    MinCrushVelocityPercent     = MINCRUSHVELOCITYPERCENT_HERO
    CrushDecelerationPercent    = CRUSHDECELERATIONPERCENT_HERO

    CommandSet = WildKankraCommandSet
    CommandPoints        = 0


    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroKillerCombatChain

    AutoResolveBody = AutoResolve_ShelobBody

    AutoResolveArmor
        Armor = AutoResolve_ShelobArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_ShelobWeapon
    End


    VoiceAttack                  = ShelobVoiceAttack
    VoiceAttackCharge            = ShelobVoiceAttack
    VoiceAttackMachine           = ShelobVoiceAttack
    VoiceAttackStructure         = ShelobVoiceAttack
    VoiceCreated                 = EVA:ShelobCreated
    VoiceCreated                 = +SOUND:ShelobVoxCreated
    VoiceFullyCreated            = EVA:ShelobCreated
    VoiceFullyCreated            = +SOUND:ShelobVoxCreated
    VoiceMove                    = ShelobVoiceMove
    VoiceMoveToCamp              = ShelobVoiceMove
    VoiceMoveWhileAttacking      = ShelobVoiceMove
    VoicePriority                = 85
    VoiceRetreatToCastle         = ShelobVoiceDie
    VoiceSelect                  = ShelobVoiceSelect
    VoiceSelectBattle            = ShelobVoiceSelect
    VoiceGuard                   = ShelobVoiceMove

    SoundAmbient                 = ShelobVoiceSinglesLoop
    SoundImpact                  = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitEvilMenTransportShip   = ShelobVoiceMove
        VoiceEnterUnitMordorMumakil          = ShelobVoiceMove
        VoiceEnterUnitSlaughterHouse         = ShelobVoiceMove
        VoiceGarrison                        = ShelobVoiceMove
        VoiceInitiateCaptureBuilding         = ShelobVoiceMove
    End

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    EvaEventDieOwner             = ShelobDie

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: ShelobPoisonStingerStrikeSwish    Animation:MUShelob_SKL.MUShelob_SPCA     Frames:4
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_TRNL     Frames:1 11
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_TRNR     Frames:1 11
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_WLKA     Frames:1 17 33
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_RUNA     Frames:1 5 9
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_GTPA     Frames:1 16
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_ATKA     Frames:0 39
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_ATKB     Frames:0 100
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_TRNL     Frames:0 5 10 15
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_TRNR     Frames:0 5 10 15
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_WLKA     Frames:0 8 16 24 32 40
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_RUNA     Frames:0 4 8
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_GTPA     Frames: 10 20
        AnimationSound = Sound: ShelobFootstepAttack     Animation:MUShelob_SKL.MUShelob_ATKA     Frames:26
        AnimationSound = Sound: ShelobFootstepAttack     Animation:MUShelob_SKL.MUShelob_ATKB     Frames:26
        AnimationSound = Sound: ShelobVoiceHurt     Animation:MUShelob_SKL.MUShelob_HITA    Frames:0
        AnimationSound = Sound: ShelobAttackScreech    Animation:MUShelob_SKL.MUShelob_ATKA    Frames:20
        AnimationSound = Sound: ShelobAttackScreech    Animation:MUShelob_SKL.MUShelob_ATKB    Frames:20
        AnimationSound = Sound: TrollBodyfall        Animation:MUShelob_SKL.MUShelob_LNDA    Frames:4
        AnimationSound = Sound: TrollBodyfall        Animation:MUShelob_SKL.MUShelob_DIEA    Frames:6
    End

    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_EACH_OTHER HERO ARMY_SUMMARY CAN_CLIMB_WALLS HEAVY_MELEE_HITTER

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle  = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate         = 500
        AILuaEventsList             = ShelobFunctions
        MaxCowerTime                = 7500
        MinCowerTime                = 5000
        AttackPriority              = AttackPriority_HeroKiller
    End

    Behavior = CitadelSlaughterHordeContain ModuleTag_SlaughterMe
        PassengerFilter              = NONE +TheDroppedRing
        ObjectStatusOfContained      = UNSELECTABLE ENCLOSED
        ContainMax                   = 1
        AllowEnemiesInside           = No
        AllowAlliesInside            = Yes
        AllowNeutralInside           = No
        AllowOwnPlayerInsideOverride = Yes
        EnterSound                   = ShelobInstillTerrorMS
        EntryOffset                  = X:0.0 Y:0.0 Z:0.0
        EntryPosition                = X:0.0 Y:0.0 Z:0.0
        ExitOffset                   = X:0.0 Y:0.0 Z:0.0
        StatusForRingEntry           = HOLDING_THE_RING
        UpgradeForRingEntry          = Upgrade_RingHero Upgrade_FortressRingHero
        ObjectToDestroyForRingEntry  = NONE +TheDroppedRing
        FXForRingEntry               = FX_OneRingFlareSauron
    End

    Behavior = ModelConditionUpgrade ModulTag_RingHeroMC
        TriggeredBy         = Upgrade_RingHero Upgrade_FortressRingHero
        RequiresAllTriggers = Yes
        AddConditionFlags   = ONE_RING
    End

    Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
        SkirmishAIOnly = Yes
        StuffToPickUp = NONE +TheDroppedRing
        ScanRange = 3000
        ScanIntervalSeconds = 0.5
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion      = Terror_Base
        AddEmotion      = OVERRIDE UncontrollableFear_Base_Evil
        Duration        = 7000
        End
        AlwaysAfraidOf  = NONE +CloudBreakSunbeam +SunflareSunbeam
        AddEmotion      = Alert_Base
        IgnoreVeterancy = Yes
    End

    LocomotorSet
        Locomotor     = ShelobNonWallScalingLocomotor
        Condition     = SET_NORMAL
        Speed         = 80
    End

    Body = RespawnBody ModuleTag_RespawnBody
        MaxHealth                    = SILMARIL_HERO_HEALTH
        PermanentlyKilledByFilter    = NONE
		DodgePercent        = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnimationTime            = 1133
        RespawnAnim                    = SELECTED
        RespawnAnimationTime        = 2000
        AutoRespawnAtObjectFilter    = NONE +CASTLE_KEEP
        ButtonImage                    = HIShelob
        RespawnAsTemplate             = WildShelob

        RespawnRules =    AutoSpawn:No           Cost:SHELOBDAG_COST       Time:VERY_STRONG_HERO_RESPAWNTIME        Health:100%
    End

    Behavior = InvisibilityUpdate ModuleTag_InnateCamouflage
        InvisibilityNugget
            InvisibilityType    = CAMOUFLAGE
            DetectionRange        = CAMOUFLAGE_RADIUS
            ForbiddenConditions    = AWAY_FROM_TREES MOVING FIRING_ANY
        End
        UpdatePeriod            = 2000
        StartsActive            = Yes
    End

    Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityyPoisonedStinger
        SpecialAbility = SpecialAbilityWildShelobPoisonedStinger
        Query = 1 ANY +HERO +MONSTER +INFANTRY +CAVALRY +DOZER -STRUCTURE ENEMIES
    End
    Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityInstillTerror
        SpecialAbility = SpecialAbilityScreech
        Query = 1 ALL ENEMIES -STRUCTURE
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 1000
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL
        SinkDelay = 2500
        SinkRate = 3.00
        DestructionDelay = 20000
        FX = INITIAL FX_GiantSpiderDie
        Sound = INITIAL ShelobVoiceDie
        DeathFlags            = DEATH_1
    End

    Behavior = SquishCollide ModuleTag_06
    End

    Behavior = ProductionUpdate ProductionUpdateModuleTag
    End


    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 2000
        HitReactionThreshold1 = 1.0
    End

    Behavior = AutoHealBehavior ModuleTag_SarumanHealing
        StartsActive = Yes
        HealingAmount = 50
        HealingDelay = 1000
        StartHealingDelay = 10000
        HealOnlyIfNotInCombat = Yes
    End


    Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag
        FireWeaponNugget
            WeaponName = KankraWebStateEffect
            FireDelay = 0
            OneShot = No
        End
        HeroModeTrigger = Yes
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EinnistenEnabler
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten
        TriggeredBy              = Upgrade_Level_1
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_IgniteStarter
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten
        UpdateModuleStartsAttack = Yes

    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten
        UnpackingVariation       = 1
        UnpackTime               = 1800
        PackTime                 = 1600
        AwardXPForTriggering     = 0
        HeroAttributeModifier    = ShelobProduceState
        HeroEffectDuration       = 60000
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra2
        TriggeredBy     = Upgrade_Level_2
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra22
        TriggeredBy     = Upgrade_Level_2
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra222
        TriggeredBy     = Upgrade_Level_2
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining
        TriggeredBy    = Upgrade_Level_2
        LevelsToGain   = 1
        LevelCap       = 2
    End

    Behavior = CommandSetUpgrade ModuleTag_Train2
        TriggeredBy    = Upgrade_Level_2
        CommandSet     = WildKankraCommandSet_Lvl2
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EinnistenEnabler2
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten2
        TriggeredBy              = Upgrade_Level_1
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_IgniteStarter2
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten2
        UpdateModuleStartsAttack = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate2
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten2
        UnpackingVariation       = 1
        UnpackTime               = 1800
        PackTime                 = 1600
        AwardXPForTriggering     = 0
        HeroAttributeModifier    = ShelobProduceState2
        HeroEffectDuration       = 60000
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra3
        TriggeredBy     = Upgrade_Level_3
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra33
        TriggeredBy     = Upgrade_Level_3
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra333
        TriggeredBy     = Upgrade_Level_3
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra3333
        TriggeredBy     = Upgrade_Level_3
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining2
        TriggeredBy    = Upgrade_Level_3
        LevelsToGain   = 1
        LevelCap       = 3
    End

    Behavior = CommandSetUpgrade ModuleTag_Train3
        TriggeredBy    = Upgrade_Level_3
        CommandSet     = WildKankraCommandSet_Lvl3
    End




    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EinnistenEnabler3
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten3
        TriggeredBy              = Upgrade_Level_1
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_IgniteStarter3
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten3
        UpdateModuleStartsAttack = Yes

    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate3
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten3
        UnpackingVariation       = 1
        UnpackTime               = 1800
        PackTime                 = 1600
        AwardXPForTriggering     = 0
        HeroAttributeModifier    = ShelobProduceState3
        HeroEffectDuration       = 60000
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra4
        TriggeredBy     = Upgrade_Level_4
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra44
        TriggeredBy     = Upgrade_Level_4
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra444
        TriggeredBy     = Upgrade_Level_4
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra4444
        TriggeredBy     = Upgrade_Level_4
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra44444
        TriggeredBy     = Upgrade_Level_4
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining3
        TriggeredBy    = Upgrade_Level_4
        LevelsToGain   = 1
        LevelCap       = 4
    End

    Behavior = CommandSetUpgrade ModuleTag_Train4
        TriggeredBy    = Upgrade_Level_4
        CommandSet     = WildKankraCommandSet_Lvl4
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EinnistenEnabler4
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten4
        TriggeredBy              = Upgrade_Level_1
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_IgniteStarter4
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten4
        UpdateModuleStartsAttack = Yes

    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate4
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten4
        UnpackingVariation       = 1
        UnpackTime               = 1800
        PackTime                 = 1600
        AwardXPForTriggering     = 0
        HeroAttributeModifier    = ShelobProduceState4
        HeroEffectDuration       = 60000
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra5
        TriggeredBy     = Upgrade_Level_5
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra55
        TriggeredBy     = Upgrade_Level_5
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra555
        TriggeredBy     = Upgrade_Level_5
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra5555
        TriggeredBy     = Upgrade_Level_5
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining4
        TriggeredBy    = Upgrade_Level_5
        LevelsToGain   = 1
        LevelCap       = 5
    End

    Behavior = CommandSetUpgrade ModuleTag_Train5
        TriggeredBy    = Upgrade_Level_5
        CommandSet     = WildKankraCommandSet_Lvl5
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EinnistenEnabler5
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten5
        TriggeredBy              = Upgrade_Level_1
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_IgniteStarter5
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten5
        UpdateModuleStartsAttack = Yes

    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate5
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten5
        UnpackingVariation       = 1
        UnpackTime               = 1800
        PackTime                 = 1600
        AwardXPForTriggering     = 0
        HeroAttributeModifier    = ShelobProduceState5
        HeroEffectDuration       = 60000
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra6
        TriggeredBy     = Upgrade_Level_6
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra66
        TriggeredBy     = Upgrade_Level_6
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra666
        TriggeredBy     = Upgrade_Level_6
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra6666
        TriggeredBy     = Upgrade_Level_6
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra66666
        TriggeredBy     = Upgrade_Level_6
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra666666
        TriggeredBy     = Upgrade_Level_6
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining5
        TriggeredBy    = Upgrade_Level_6
        LevelsToGain   = 1
        LevelCap       = 6
    End

    Behavior = CommandSetUpgrade ModuleTag_Train6
        TriggeredBy    = Upgrade_Level_6
        CommandSet     = WildKankraCommandSet_Lvl6
    End




    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EinnistenEnabler6
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten6
        TriggeredBy              = Upgrade_Level_1
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_IgniteStarter6
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten6
        UpdateModuleStartsAttack = Yes

    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate6
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten6
        UnpackingVariation       = 1
        UnpackTime               = 1800
        PackTime                 = 1600
        AwardXPForTriggering     = 0
        HeroAttributeModifier    = ShelobProduceState6
        HeroEffectDuration       = 60000
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra7
        TriggeredBy     = Upgrade_Level_7
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra77
        TriggeredBy     = Upgrade_Level_7
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra777
        TriggeredBy     = Upgrade_Level_7
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra7777
        TriggeredBy     = Upgrade_Level_7
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra77777
        TriggeredBy     = Upgrade_Level_7
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra777777
        TriggeredBy     = Upgrade_Level_9
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra7777777
        TriggeredBy     = Upgrade_Level_9
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End


    Behavior = LevelUpUpgrade ModuleTag_BasicTraining6
        TriggeredBy    = Upgrade_Level_7
        LevelsToGain   = 1
        LevelCap       = 7
    End

    Behavior = CommandSetUpgrade ModuleTag_Train7
        TriggeredBy    = Upgrade_Level_7
        CommandSet     = WildKankraCommandSet_Lvl7
    End




    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EinnistenEnabler7
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten7
        TriggeredBy              = Upgrade_Level_1
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_IgniteStarter7
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten7
        UpdateModuleStartsAttack = Yes

    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate7
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten7
        UnpackingVariation       = 1
        UnpackTime               = 1800
        PackTime                 = 1600
        AwardXPForTriggering     = 0
        HeroAttributeModifier    = ShelobProduceState7
        HeroEffectDuration       = 60000
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra8
        TriggeredBy     = Upgrade_Level_8
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra88
        TriggeredBy     = Upgrade_Level_8
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra888
        TriggeredBy     = Upgrade_Level_8
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra8888
        TriggeredBy     = Upgrade_Level_8
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End


    Behavior = ObjectCreationUpgrade ModuleTag_Kankra88888
        TriggeredBy     = Upgrade_Level_8
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra888888
        TriggeredBy     = Upgrade_Level_8
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra8888888
        TriggeredBy     = Upgrade_Level_8
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra88888888
        TriggeredBy     = Upgrade_Level_8
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End


    Behavior = LevelUpUpgrade ModuleTag_BasicTraining7
        TriggeredBy    = Upgrade_Level_8
        LevelsToGain   = 1
        LevelCap       = 8
    End

    Behavior = CommandSetUpgrade ModuleTag_Train8
        TriggeredBy    = Upgrade_Level_8
        CommandSet     = WildKankraCommandSet_Lvl8
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EinnistenEnabler8
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten8
        TriggeredBy              = Upgrade_Level_1
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_IgniteStarter8
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten8
        UpdateModuleStartsAttack = Yes

    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate8
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten8
        UnpackingVariation       = 1
        UnpackTime               = 1800
        PackTime                 = 1600
        AwardXPForTriggering     = 0
        HeroAttributeModifier    = ShelobProduceState8
        HeroEffectDuration       = 60000
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra9
        TriggeredBy     = Upgrade_Level_9
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra99
        TriggeredBy     = Upgrade_Level_9
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra999
        TriggeredBy     = Upgrade_Level_9
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra9999
        TriggeredBy     = Upgrade_Level_9
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra99999
        TriggeredBy     = Upgrade_Level_9
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra999999
        TriggeredBy     = Upgrade_Level_9
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra9999999
        TriggeredBy     = Upgrade_Level_9
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra99999999
        TriggeredBy     = Upgrade_Level_9
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra999999999
        TriggeredBy     = Upgrade_Level_9
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining8
        TriggeredBy    = Upgrade_Level_9
        LevelsToGain   = 1
        LevelCap       = 9
    End

    Behavior = CommandSetUpgrade ModuleTag_Train9
        TriggeredBy    = Upgrade_Level_9
        CommandSet     = WildKankraCommandSet_Lvl9
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EinnistenEnabler9
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten9
        TriggeredBy              = Upgrade_Level_1
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_IgniteStarter9
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten9
        UpdateModuleStartsAttack = Yes

    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate9
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten9
        UnpackingVariation       = 1
        UnpackTime               = 1800
        PackTime                 = 1600
        AwardXPForTriggering     = 0
        HeroAttributeModifier    = ShelobProduceState8
        HeroEffectDuration       = 60000
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra10
        TriggeredBy     = Upgrade_Level_10
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra1010
        TriggeredBy     = Upgrade_Level_10
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Kankra101010
        TriggeredBy     = Upgrade_Level_10
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildBrutmutter
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining9
        TriggeredBy    = Upgrade_Level_10
        LevelsToGain   = 1
        LevelCap       = 10
    End

    Behavior = CommandSetUpgrade ModuleTag_Train10
        TriggeredBy    = Upgrade_Level_10
        CommandSet     = WildKankraCommandSet_Lvl10
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ShelobWebbingEnabler
        SpecialPowerTemplate          = SpecialAbilityShelobSpinnennetz
        TriggeredBy                   = Upgrade_Level_1
        ObeyRechageOnTrigger          = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_ShelobWebbingStarter
        SpecialPowerTemplate          = SpecialAbilityShelobSpinnennetz
        UpdateModuleStartsAttack      = Yes
        StartsPaused                  = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_ShelobWebbingUpdate
        SpecialPowerTemplate          = SpecialAbilityShelobSpinnennetz
        SkipContinue                  = Yes
        UnpackTime                    = 1500
        PackTime                      = 1000
        BusyForDuration               = 1000
        AwardXPForTriggering          = 0
        StartAbilityRange             = 400.0
        ApproachRequiresLOS           = Yes
        SpecialWeapon                 = ShelobSpinnennetz
        WhichSpecialWeapon            = 3
    End

    Behavior = AutoAbilityBehavior ModuleTag_ShelobWebbingAutoAbilityy
	SpecialAbility 	= SpecialAbilityShelobSpinnennetz
	ForbiddenStatus = INSIDE_GARRISON

	Query 		= 1 ANY +HERO +MONSTER ENEMIES

	Query 		= 1 ANY +CAVALRY +INFANTRY ENEMIES

    End





     Behavior = UnpauseSpecialPowerUpgrade ModuleTag_InstillTerrorEnabler
        SpecialPowerTemplate        = SpecialAbilityScreech
        TriggeredBy                 = Upgrade_Level_1
        ObeyRechageOnTrigger        = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_InstillTerror
        SpecialPowerTemplate        = SpecialAbilityScreech
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_InstillTerrorSAUpdate
        SpecialPowerTemplate        = SpecialAbilityScreech
        UnpackTime                  = 1
        AwardXPForTriggering        = 0
        TriggerSound                = ShelobInstillTerrorMS
        EffectRange                 = 180
        UnpackTime                  = 100
        PreparationTime             = 1
        PackTime                    = 2500
        CustomAnimAndDuration       = AnimState:SPECIAL_WEAPON_TWO AnimTime:2500
    End



     Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SpinnenlarvenEnabler
        SpecialPowerTemplate     = SpecialAbilityKankraSpinneneier
        TriggeredBy              = Upgrade_Level_3
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_SpinnenlarvenStarter
        SpecialPowerTemplate     = SpecialAbilityKankraSpinneneier
        UpdateModuleStartsAttack = Yes
        StartsPaused             = Yes
        InitiateSound            = ShelobVoxPoisonStinger
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_SpinnenlarvenUpdate
        SpecialPowerTemplate    = SpecialAbilityKankraSpinneneier
        SkipContinue            = Yes
        UnpackTime              = 250
        PreparationTime         = 500
        MustFinishAbility       = Yes
        AwardXPForTriggering    = 0
        StartAbilityRange       = 20.0
        SpecialWeapon           = SpinnenlarvenWeapon
        WhichSpecialWeapon      = 1
    End




    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_PoisonedStingerEnabler
        SpecialPowerTemplate = SpecialAbilityWildShelobPoisonedStinger
        TriggeredBy = Upgrade_Level_6
        ObeyRechageOnTrigger      = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_PoisonedStingerStarter
        SpecialPowerTemplate        = SpecialAbilityWildShelobPoisonedStinger
        UpdateModuleStartsAttack    = Yes
        StartsPaused            = Yes
        InitiateSound            = ShelobVoxPoisonStinger
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_PoisonedStingerUpdate
        SpecialPowerTemplate    = SpecialAbilityWildShelobPoisonedStinger
        SkipContinue            = Yes

        UnpackTime                = 250
        PreparationTime            = 500
        MustFinishAbility        = Yes

        AwardXPForTriggering        = 0
        StartAbilityRange            = 15.0

        SpecialWeapon                = WildShelobPoisonedStinger
        WhichSpecialWeapon            = 1
    End




    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TunnelEnabler
        SpecialPowerTemplate        = SpecialAbilityWildShelobTunnel
        TriggeredBy                 = Upgrade_Level_7
        ObeyRechageOnTrigger        = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_TeleportStarter
        SpecialPowerTemplate        = SpecialAbilityWildShelobTunnel
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = Yes
        InitiateSound               = ShelobVoxTunnel
    End

    Behavior = TeleportSpecialAbilityUpdate ModuleTag_TeleportUpdate
        SpecialPowerTemplate        = SpecialAbilityWildShelobTunnel

        UnpackTime                  = 1800
        PackTime                    = 1300
        UnpackingVariation          = 3

        ApproachRequiresLOS         = No
        BusyForDuration             = 1800

        MaxDistance                 = WILD_SHELOB_TUNNEL_DISTANCE


    End



    Behavior = SpecialPowerModule ModuleTag_EatStarter
        SpecialPowerTemplate        = SpecialPowerEat
        UpdateModuleStartsAttack    = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_EatUpdate
        SpecialPowerTemplate        = SpecialPowerEat
        StartAbilityRange           = 15.0
        PreparationTime             = 1
        PackTime                    = 3667
        TriggerAttributeModifier    = ShelobSelfHealWhileEating
        AttributeModifierDuration   = 3600
        KillAttributeModifierOnExit = Yes
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Spinnendasein
        StartsActive      = Yes
        RefreshDelay      = 2000
        Range             = 100
        TargetEnemy       = Yes
        AntiCategory      = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName         = SpinnendaseinDebuff
        ObjectFilter      = ANY +CAVALRY -INFANTRY -STRUCTURE -BASE_FOUNDATION -HERO -MACHINE -SHIP -DOZER
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SpinnenkokonEnabler
        SpecialPowerTemplate      = SpecialAbilityDerRingNenya
        TriggeredBy               = Upgrade_Level_5
        ObeyRechageOnTrigger      = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_SpinnenkokonPower
        SpecialPowerTemplate      = SpecialAbilityDerRingNenya
        OCL                       = OCL_SpawnKokonEgg
        CreateLocation            = CREATE_AT_LOCATION
        StartsPaused              = Yes
        TriggerFX                 = FX_SpiderlingsSummonStart
    End

    Behavior = SpecialAbilityUpdate ModuleTag_OCLSpawnSpinnenkokonUpdate
        SpecialPowerTemplate       = SpecialAbilityDerRingNenya
        UnpackTime                 = 1
        PreparationTime            = 3
        PackTime                   = 1000
        AwardXPForTriggering       = 0
        FreezeAfterTriggerDuration = 0
    End



    Behavior = SpecialPowerModule ModuleTag_WachsenStarter
         SpecialPowerTemplate           = SpecialAbilityGandalfVerfuhrte
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Wachsen
         SpecialPowerTemplate           = SpecialAbilityGandalfVerfuhrte
         MountedTemplate                = WildShelob_Lvl3
         SynchronizeTimerOnSpecialPower = SpecialAbilityKankraSpinneneier SpecialAbilityScreech SpecialAbilityKankraEinnisten SpecialAbilityKankraEinnisten2 SpecialAbilityShelobSpinnennetz SpecialAbilityWildShelobPoisonedStinger SpecialAbilityWildShelobTunnel
         UnpackTime                     = 0
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_fressenEnabler
        SpecialPowerTemplate            = SpecialAbilityGandalfGeprufte
    End

    Behavior = SpecialPowerModule ModuleTag_fressenStarter
         SpecialPowerTemplate           = SpecialAbilityGandalfGeprufte
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = No
    End

   Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_fressen
         SpecialPowerTemplate           = SpecialAbilityGandalfGeprufte
         MountedTemplate                = WildShelobRing
         SynchronizeTimerOnSpecialPower = SpecialAbilityKankraSpinneneier SpecialAbilityScreech SpecialAbilityShelobProduceModus SpecialAbilityKankraEinnisten2 SpecialAbilityShelobSpinnennetz SpecialAbilityWildShelobPoisonedStinger SpecialAbilityWildShelobTunnel
         UnpackTime                     = OBJECT_TOGGLE_TIME
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End

    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy                     = Upgrade_RingHero
        GetUpgradeCommandButtonName     = Command_SpecialAbilityShelobhRingModus
    End



    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End


    Behavior = AISpecialPowerUpdate InstillTerrorAI
        CommandButtonName = Command_WildShelobInstillTerrorMod
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate PoisonedStingerAI
        CommandButtonName = Command_WildShelobPoisonedStinger
        SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
        SpecialPowerRadius = 100
    End

    Behavior = AISpecialPowerUpdate FireballAI
        CommandButtonName = Command_SpecialAbilityKankraNetz
        SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
    End

    Scale = 3.15
    Geometry = CYLINDER
    GeometryMajorRadius = 26.0
    GeometryMinorRadius = 26.0
    GeometryHeight = 32.0
    GeometryIsSmall = No
    Shadow = SHADOW_DECAL
    ShadowSizeX = 48
    ShadowSizeY = 32
    ShadowOffsetX = -4
    ShadowTexture = ShadowSpider2
End

ChildObject WildShelob_Lvl3 WildShelob

    Scale = 3.22

    CommandSet = WildKankraCommandSet_Lvl3_Gewachsen


    Behavior = ObjectCreationUpgrade ModuleTag_Orophin2
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Orophin3
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining2
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EinnistenEnabler3
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten3
        TriggeredBy              = Upgrade_Level_1
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_IgniteStarter3
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten3
        UpdateModuleStartsAttack = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate3
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten3
        UnpackingVariation       = 1
        UnpackTime               = 1800
        PackTime                 = 1600
        AwardXPForTriggering     = 0
        HeroAttributeModifier    = ShelobProduceState3
        HeroEffectDuration       = 60000
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Orophin4
        TriggeredBy     = Upgrade_Level_4
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining3
        TriggeredBy    = Upgrade_Level_4
        LevelsToGain   = 1
        LevelCap       = 4
    End

    Behavior = CommandSetUpgrade ModuleTag_Train2
        TriggeredBy    = Upgrade_Level_4
        CommandSet     = WildKankraCommandSet_Lvl4
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EinnistenEnabler4
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten4
        TriggeredBy              = Upgrade_Level_1
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_IgniteStarter4
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten4
        UpdateModuleStartsAttack = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate4
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten4
        UnpackingVariation       = 1
        UnpackTime               = 1800
        PackTime                 = 1600
        AwardXPForTriggering     = 0
        HeroAttributeModifier    = ShelobProduceState4
        HeroEffectDuration       = 60000
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Orophin5
        TriggeredBy     = Upgrade_Level_5
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Orophin6
        TriggeredBy     = Upgrade_Level_5
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining4
        TriggeredBy    = Upgrade_Level_5
        LevelsToGain   = 1
        LevelCap       = 5
    End

    Behavior = CommandSetUpgrade ModuleTag_Train3
        TriggeredBy    = Upgrade_Level_5
        CommandSet     = WildKankraCommandSet_Lvl5
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EinnistenEnabler5
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten5
        TriggeredBy              = Upgrade_Level_1
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_IgniteStarter5
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten5
        UpdateModuleStartsAttack = Yes

    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate5
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten5
        UnpackingVariation       = 1
        UnpackTime               = 1800
        PackTime                 = 1600
        AwardXPForTriggering     = 0
        HeroAttributeModifier    = ShelobProduceState5
        HeroEffectDuration       = 60000
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Orophin7
        TriggeredBy     = Upgrade_Level_6
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Orophin8
        TriggeredBy     = Upgrade_Level_6
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining5
        TriggeredBy    = Upgrade_Level_6
        LevelsToGain   = 1
        LevelCap       = 6
    End






    Behavior = SpecialPowerModule ModuleTag_WachsenStarter
         SpecialPowerTemplate           = SpecialAbilityGandalfVerfuhrte
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Wachsen
         SpecialPowerTemplate           = SpecialAbilityGandalfVerfuhrte
         MountedTemplate                = WildShelob_Lvl6
         SynchronizeTimerOnSpecialPower = SpecialAbilityKankraSpinneneier SpecialAbilityScreech SpecialAbilityShelobSpinnennetz SpecialAbilityWildShelobPoisonedStinger SpecialAbilityWildShelobTunnel
         UnpackTime                     = 0
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End
End

ChildObject WildShelob_Lvl6 WildShelob

    Scale = 1.35

    CommandSet = WildKankraCommandSet_Lvl6_Gewachsen

    Behavior = ObjectCreationUpgrade ModuleTag_Orophin7
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Orophin8
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining5
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EinnistenEnabler6
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten6
        TriggeredBy              = Upgrade_Level_1
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_IgniteStarter6
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten6
        UpdateModuleStartsAttack = Yes

    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate6
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten6
        UnpackingVariation       = 1
        UnpackTime               = 1800
        PackTime                 = 1600
        AwardXPForTriggering     = 0
        HeroAttributeModifier    = ShelobProduceState6
        HeroEffectDuration       = 60000
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Orophin9
        TriggeredBy     = Upgrade_Level_7
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Orophin10
        TriggeredBy     = Upgrade_Level_7
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildSpiderlingForShelobh
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining6
        TriggeredBy    = Upgrade_Level_7
        LevelsToGain   = 1
        LevelCap       = 7
    End

    Behavior = CommandSetUpgrade ModuleTag_Train4
        TriggeredBy    = Upgrade_Level_7
        CommandSet     = WildKankraCommandSet_Lvl7
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EinnistenEnabler7
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten7
        TriggeredBy              = Upgrade_Level_1
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_IgniteStarter7
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten7
        UpdateModuleStartsAttack = Yes

    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate7
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten7
        UnpackingVariation       = 1
        UnpackTime               = 1800
        PackTime                 = 1600
        AwardXPForTriggering     = 0
        HeroAttributeModifier    = ShelobProduceState7
        HeroEffectDuration       = 60000
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Orophin11
        TriggeredBy     = Upgrade_Level_8
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Orophin12
        TriggeredBy     = Upgrade_Level_8
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining7
        TriggeredBy    = Upgrade_Level_8
        LevelsToGain   = 1
        LevelCap       = 8
    End

    Behavior = CommandSetUpgrade ModuleTag_Train5
        TriggeredBy    = Upgrade_Level_8
        CommandSet     = WildKankraCommandSet_Lvl8
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EinnistenEnabler8
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten8
        TriggeredBy              = Upgrade_Level_1
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_IgniteStarter8
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten8
        UpdateModuleStartsAttack = Yes

    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate8
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten8
        UnpackingVariation       = 1
        UnpackTime               = 1800
        PackTime                 = 1600
        AwardXPForTriggering     = 0
        HeroAttributeModifier    = ShelobProduceState8
        HeroEffectDuration       = 60000
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Orophin13
        TriggeredBy     = Upgrade_Level_9
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Orophin14
        TriggeredBy     = Upgrade_Level_9
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining8
        TriggeredBy    = Upgrade_Level_9
        LevelsToGain   = 1
        LevelCap       = 9
    End


    Behavior = SpecialPowerModule ModuleTag_WachsenStarter
         SpecialPowerTemplate           = SpecialAbilityGandalfVerfuhrte
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Wachsen
         SpecialPowerTemplate           = SpecialAbilityGandalfVerfuhrte
         MountedTemplate                = WildShelob_Lvl9
         SynchronizeTimerOnSpecialPower = SpecialAbilityKankraSpinneneier SpecialAbilityScreech SpecialAbilityShelobSpinnennetz SpecialAbilityWildShelobPoisonedStinger SpecialAbilityWildShelobTunnel
         UnpackTime                     = 0
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End
End

ChildObject WildShelob_Lvl9 WildShelob

    Scale = 1.5


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_EinnistenEnabler9
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten9
        TriggeredBy              = Upgrade_Level_1
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_IgniteStarter9
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten9
        UpdateModuleStartsAttack = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate9
        SpecialPowerTemplate     = SpecialAbilityKankraEinnisten9
        UnpackingVariation       = 1
        UnpackTime               = 1800
        PackTime                 = 1600
        AwardXPForTriggering     = 0
        HeroAttributeModifier    = ShelobProduceState9
        HeroEffectDuration       = 60000
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Orophin15
        TriggeredBy     = Upgrade_Level_10
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildMiniSpiderForShelobh
    End

    Behavior = ObjectCreationUpgrade ModuleTag_Orophin16
        TriggeredBy     = Upgrade_Level_10
        Delay           = 500
        Offset          = X:30 Y:0 Z:0
        ThingToSpawn    = WildBrutmutter
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining9
        TriggeredBy    = Upgrade_Level_10
        LevelsToGain   = 1
        LevelCap       = 10
    End

    Behavior = CommandSetUpgrade ModuleTag_Train6
        TriggeredBy    = Upgrade_Level_10
        CommandSet     = WildKankraCommandSet_Lvl10
    End
End

Object WildShelobRing


    SelectPortrait = HPShelob
    ButtonImage    = HIShelob

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_SupportHero

    #include "..\..\..\includes\StunDrawModuleLarge.inc"

    ShockwaveResistance   = SHOCKWAVE_RESISTANCE_IMMUNE

    Draw = W3DScriptedModelDraw ModuleTag_01

        RandomTexture = mukankra.tga  0 mushelobh.tga

        DefaultModelConditionState
            Model            = MUShelob_SKN
            Skeleton         = MUShelob_SKL
        End

        ModelConditionState  = USER_2
            Model            = MUShelob_SKN
            Skeleton         = MUShelob_SKL
        End

        ModelConditionState  = HERO
            ParticleSysBone  = B_NECK UngoliathFlareResurrection FollowBone:No
            ParticleSysBone  = B_NECK UngoliathInitialCenter FollowBone:No
            ParticleSysBone  = B_NECK UngoliathInitialVortex FollowBone:No
            ParticleSysBone  = B_NECK GandalfWhiteGlow FollowBone:Yes
        End


        IdleAnimationState
            Animation                = IDLA
                AnimationName        = MUShelob_IDLA
                AnimationMode        = ONCE
            End
        End


    AnimationState                        = CLIMBING
        StateName                        = STATE_Climbing
        Animation                        = Climbing
            AnimationName                = MUShelob_WALB
            AnimationMode                = LOOP
            AnimationBlendTime            = 15
        End
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing") return end
        EndScript
    End
    TransitionState = Trans_RunningToClimbing
        Animation = Transition
            AnimationName = MUShelob_WALA
            AnimationMode = ONCE
        End
    End
    AnimationState                        = RAPPELLING
        StateName                        = STATE_Rappelling
        Animation                        = Rapelling
            AnimationName                = MUShelob_WALD
            AnimationMode                = LOOP
            AnimationBlendTime            = 15
        End
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToRappelling") return end
        EndScript
    End
    TransitionState = Trans_RunningToRappelling
        Animation = Transition
            AnimationName = MUShelob_WALD
            AnimationMode = ONCE
        End
    End
    TransitionState = Trans_ClimbingToRunning
        Animation = Transition
            AnimationName = MUShelob_WALC
            AnimationMode = ONCE
        End
    End
    TransitionState = Trans_RappellingToRunning
        Animation = Transition
            AnimationName = MUShelob_WALE
            AnimationMode = ONCE
        End
    End



        AnimationState        = STUNNED_FLAILING
            Animation           = StunFlail
                AnimationName     = MUShelob_FLYA
                AnimationMode      = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED
            Animation           = Stun
                AnimationName     = MUShelob_LNDA
                AnimationMode      = ONCE
            End
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = Stun
                AnimationName     = MUShelob_GTPA
                AnimationMode      = ONCE
            End
        End


        AnimationState                = DYING
            Animation                = DIEA
                AnimationName        = MUShelob_DIEA
                AnimationMode        = ONCE
            End
        End



        AnimationState                = TURN_LEFT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = MUShelob_TRNL
                AnimationMode        = LOOP
            End
        End

        AnimationState                = TURN_RIGHT
            StateName                = Turn
            Animation                = Walk
                AnimationName        = MUShelob_TRNR
                AnimationMode        = LOOP
            End
        End

        AnimationState                = MOVING BACKING_UP
            Animation                = BAKA
                AnimationName        = MUShelob_BAKA
                AnimationMode        = LOOP
            End
            Flags                    = RANDOMSTART
        End

        AnimationState                =    MOVING ATTACKING
            Animation                =    RUNA
                AnimationName        =    MUShelob_RUNA
                AnimationMode        =    LOOP
                Distance            =    21
            End
        End
        AnimationState                =    MOVING
            StateName                = STATE_Running
            Animation                =    WLKA
                AnimationName        =    MUShelob_WLKA
                AnimationMode        =    LOOP
                Distance            =    21
            End

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRunning") return end
                if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
            EndScript


        End


        AnimationState                = PACKING_TYPE_1
            Animation
                AnimationName        = MUShelob_ATKC
                AnimationMode        = ONCE
            End
        End

        AnimationState                = PACKING_TYPE_2
            Animation
                AnimationName        = MUShelob_ATKC
                AnimationMode        = ONCE
            End
        End

        AnimationState                = PACKING_TYPE_3
            Animation
                AnimationName        = MUShelob_ATKC
                AnimationMode        = ONCE
            End
        End

        AnimationState                = SPECIAL_WEAPON_ONE
            Animation
                AnimationName            = MUShelob_ATKC
                AnimationMode            = ONCE
            End
        End

        AnimationState                = SPECIAL_WEAPON_THREE
            Animation
                AnimationName            = MUShelob_ATKC
                AnimationMode            = ONCE
            End
        End



        AnimationState                = FIRING_OR_PREATTACK_A
            Animation                = ATKA
                AnimationName        = MUShelob_ATKA
                AnimationMode        = ONCE
            End
        End

        AnimationState                =    SELECTED
            Animation           = IDLA
                AnimationName     = MUShelob_IDLA
                AnimationMode     = ONCE
                AnimationPriority = 1
            End
            Animation           = IDLA
                AnimationName     = MUShelob_IDLA
                AnimationMode     = ONCE
                AnimationPriority = 1
            End
            Animation                =    AtAttention
                AnimationName        =    MUShelob_ATNA
                AnimationMode        =    ONCE
            End
            Flags                    = RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState = HIT_REACTION HIT_LEVEL_1
            Animation = Hit_Level_1_a
                AnimationName = MUShelob_HITA
                AnimationMode = ONCE
            End
        End
    End

    Side = Wild
    EditorSorting = UNIT
    ThreatLevel = SHELOB_THREAT_LEVEL
    TransportSlotCount = TRANSPORTSLOTCOUNT_MONSTER
    MaxSimultaneousOfType = 1
    DisplayMeleeDamage = STRONG_HERO_DAMAGE

    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY    KankraRingMandibles
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = SilmarilHeroArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange = WILD_SHELOB_VISION_RANGE
    ShroudClearingRange = SHROUD_CLEAR_HERO
    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%


    BuildCost      = SILMARIL_HERO_COST
    BuildTime      = SILMARIL_HERO_BUILDTIME

    DisplayName    = OBJECT:WildShelob
    RecruitText    = CONTROLBAR:ShelobRecruitMod
    ReviveText     = CONTROLBAR:ShelobRevive
    Hotkey         = CONTROLBAR:ShelobHotkey

    CrushableLevel 		= 3
    CrusherLevel                = 3
    CrushWeapon                 = ShelobCrushSilmaril

    MinCrushVelocityPercent     = MINCRUSHVELOCITYPERCENT_HERO
    CrushDecelerationPercent    = CRUSHDECELERATIONPERCENT_HERO

    CommandSet 	         = WildKankraRingCommandSet
    CommandPoints        = 0


    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroKillerCombatChain

    AutoResolveBody = AutoResolve_ShelobBody

    AutoResolveArmor
        Armor = AutoResolve_ShelobArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_ShelobWeapon
    End



    VoiceAttack                    = ShelobVoiceAttack
    VoiceAttackCharge            = ShelobVoiceAttack
    VoiceAttackMachine            = ShelobVoiceAttack
    VoiceAttackStructure        = ShelobVoiceAttack
    VoiceCreated                = EVA:ShelobCreated
    VoiceCreated                = +SOUND:ShelobVoxCreated
    VoiceFullyCreated            = EVA:ShelobCreated
    VoiceFullyCreated            = +SOUND:ShelobVoxCreated
    VoiceMove                    = ShelobVoiceMove
    VoiceMoveToCamp                = ShelobVoiceMove
    VoiceMoveWhileAttacking        = ShelobVoiceMove
    VoicePriority                = 90
    VoiceRetreatToCastle        = ShelobVoiceDie
    VoiceSelect                    = ShelobVoiceSelect
    VoiceSelectBattle             = ShelobVoiceSelect
    VoiceGuard                    = ShelobVoiceMove

    SoundAmbient                = ShelobVoiceSinglesLoop
    SoundImpact                    = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitEvilMenTransportShip    = ShelobVoiceMove
        VoiceEnterUnitMordorMumakil            = ShelobVoiceMove
        VoiceEnterUnitSlaughterHouse        = ShelobVoiceMove
        VoiceGarrison                        = ShelobVoiceMove
        VoiceInitiateCaptureBuilding        = ShelobVoiceMove
    End

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
    EvaEventDieOwner             = ShelobDie

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: ShelobPoisonStingerStrikeSwish    Animation:MUShelob_SKL.MUShelob_SPCA     Frames:4
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_TRNL     Frames:1 11
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_TRNR     Frames:1 11
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_WLKA     Frames:1 17 33
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_RUNA     Frames:1 5 9
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_GTPA     Frames:1 16
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_ATKA     Frames:0 39
        AnimationSound = Sound: ShelobMove        Animation:MUShelob_SKL.MUShelob_ATKB     Frames:0 100
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_TRNL     Frames:0 5 10 15
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_TRNR     Frames:0 5 10 15
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_WLKA     Frames:0 8 16 24 32 40
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_RUNA     Frames:0 4 8
        AnimationSound = Sound: ShelobFootstep        Animation:MUShelob_SKL.MUShelob_GTPA     Frames: 10 20
        AnimationSound = Sound: ShelobFootstepAttack     Animation:MUShelob_SKL.MUShelob_ATKA     Frames:26
        AnimationSound = Sound: ShelobFootstepAttack     Animation:MUShelob_SKL.MUShelob_ATKB     Frames:26
        AnimationSound = Sound: ShelobVoiceHurt     Animation:MUShelob_SKL.MUShelob_HITA    Frames:0
        AnimationSound = Sound: ShelobAttackScreech    Animation:MUShelob_SKL.MUShelob_ATKA    Frames:20
        AnimationSound = Sound: ShelobAttackScreech    Animation:MUShelob_SKL.MUShelob_ATKB    Frames:20
        AnimationSound = Sound: TrollBodyfall        Animation:MUShelob_SKL.MUShelob_LNDA    Frames:4
        AnimationSound = Sound: TrollBodyfall        Animation:MUShelob_SKL.MUShelob_DIEA    Frames:6
    End


    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_EACH_OTHER HERO ARMY_SUMMARY CAN_CLIMB_WALLS HEAVY_MELEE_HITTER FS_FACTORY SCARY

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        AILuaEventsList            = ShelobRingFunctions
        MaxCowerTime               = 7500
        MinCowerTime               = 5000
        AttackPriority             = AttackPriority_HeroKiller
    End

       Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion     =    Terror_Base
        AddEmotion     =    OVERRIDE UncontrollableFear_Base_Evil
        Duration       =    7000
        End

        AlwaysAfraidOf     = NONE +CloudBreakSunbeam +SunflareSunbeam
        AddEmotion         = Alert_Base
        IgnoreVeterancy    = Yes
    End

    LocomotorSet
        Locomotor     = ShelobNonWallScalingLocomotor
        Condition     = SET_NORMAL
        Speed         = 90
    End

    Body = RespawnBody ModuleTag_RespawnBody
        MaxHealth         	     = SHELOBDAG_HEALTH
        PermanentlyKilledByFilter    = NONE
		DodgePercent        = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnimationTime          = 1133
        RespawnAnim                 = SELECTED
        RespawnAnimationTime        = 2000
        AutoRespawnAtObjectFilter   = NONE +CASTLE_KEEP
        ButtonImage                 = HIShelob
        RespawnAsTemplate           = WildShelob

        RespawnRules =                AutoSpawn:No    Cost:SILMARIL_HERO_COST        Time:SILMARIL_HERO_RESPAWNTIME        Health:100%
    End

    Behavior = InvisibilityUpdate ModuleTag_InnateCamouflage
        InvisibilityNugget
            InvisibilityType     = CAMOUFLAGE
            DetectionRange       = CAMOUFLAGE_RADIUS
            ForbiddenConditions  = AWAY_FROM_TREES MOVING FIRING_ANY
        End
        UpdatePeriod            = 2000
        StartsActive            = Yes
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 1000
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL
        SinkDelay = 2500
        SinkRate = 3.00
        DestructionDelay = 20000
        FX = INITIAL FX_GiantSpiderDie
        Sound = INITIAL ShelobVoiceDie
    End

    Behavior = SquishCollide ModuleTag_06

    End


    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 2000
        HitReactionThreshold1 = 1.0
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SilmarilHeroLeadershipStart
        SpecialPowerTemplate    = SpecialAbilityFakeLeadership3
    End

    Behavior = SpecialPowerModule ModuleTag_SilmarilHeroLeadershipUpdate
        SpecialPowerTemplate        = SpecialAbilityFakeLeadership3
        UpdateModuleStartsAttack    = No
        StartsPaused                = No
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_SilmarilHeroLeadership
        StartsActive     = Yes
        BonusName        = SilmarilHeroGlobalLeadership
        RefreshDelay     = 2000
        Range            = 1250
        ObjectFilter     = ALL -HERO -MACHINE -SHIP -DOZER -STRUCTURE ALLIES
    End


    Behavior = SpecialPowerModule ModuleTag_DreadVisageUpdate
        SpecialPowerTemplate     = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack = Yes
        StartsPaused             = No
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura
        StartsActive     = Yes
        RefreshDelay     = 2000
        Range            = 300
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF
        BonusName        = GenericDebuff
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION +HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Spinnendasein
        StartsActive      = Yes
        RefreshDelay      = 2000
        Range             = 100
        TargetEnemy       = Yes
        AntiCategory      = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName         = SpinnendaseinDebuff
        ObjectFilter      = ANY +CAVALRY -INFANTRY -STRUCTURE -BASE_FOUNDATION -HERO -MACHINE -SHIP -DOZER
    End

    Behavior = RadiateFearUpdate ModuleTag_DreadVisageFear
        InitiallyActive        = Yes
        WhichSpecialPower      = 1
        GenerateFear           = Yes
        EmotionPulseRadius     = 300
        EmotionPulseInterval   = 2000
    End


    Behavior = SpecialPowerModule ModuleTag_LichtfresserinSpecialStarter
        UpdateModuleStartsAttack     = No
        SpecialPowerTemplate         = SpecialPowerKankraLichtfresserin
        StartsPaused                 = No
        AttributeModifier            = LichtfresserinSelfModifier
        AttributeModifierRange       = 1
        AttributeModifierAffectsSelf = Yes
        AttributeModifierAffects     = NONE +WildShelobRing
        AttributeModifierFX          = FX_LichtfresserinFX
    End

    Behavior = ModelConditionSpecialAbilityUpdate ModuleTag_LichtfresserinSpecialUpdate
        SpecialPowerTemplate         = SpecialPowerKankraLichtfresserin
        UnpackTime                   = 2500
        PackTime                     = 2500
        AwardXPForTriggering         = 0
        MustFinishAbility            = Yes
    End

    Behavior = ModelConditionUpgrade ModulTag_StatLichtfresserin
        TriggeredBy                  = Upgrade_TestBuilding
        AddConditionFlags            = USER_2
    End


     Behavior = UnpauseSpecialPowerUpgrade ModuleTag_InstillTerrorEnabler
        SpecialPowerTemplate        = SpecialAbilityScreech
        TriggeredBy                 = Upgrade_Level_1
        ObeyRechageOnTrigger        = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_InstillTerror
        SpecialPowerTemplate        = SpecialAbilityScreech
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_InstillTerrorSAUpdate
        SpecialPowerTemplate        = SpecialAbilityScreech
        UnpackTime                  = 1
        AwardXPForTriggering        = 0
        TriggerSound                = ShelobInstillTerrorMS
        EffectRange                 = 600
        UnpackTime                  = 100
        PreparationTime             = 1
        PackTime                    = 2500
        CustomAnimAndDuration       = AnimState:SPECIAL_WEAPON_TWO AnimTime:2500
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_DunkelheitEnabler
        SpecialPowerTemplate      = SpecialAbilityNetzausDunkelheit
        TriggeredBy               = Upgrade_Level_1
    End

    Behavior = SpecialPowerModule ModuleTag_DunkelheitStarter
        SpecialPowerTemplate      = SpecialAbilityNetzausDunkelheit
        StartsPaused              = Yes
        UpdateModuleStartsAttack  = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_DunkelheitBlastWeaponFireUpdate
        SpecialPowerTemplate      = SpecialAbilityNetzausDunkelheit
        WhichSpecialWeapon        = 2
        SkipContinue              = Yes
        FreezeAfterTriggerDuration = 100
        UnpackTime                = 700
        PreparationTime           = 1

        PackTime                  = 100
        AwardXPForTriggering      = 0
        StartAbilityRange         = 300
        SpecialWeapon             = NetzausDunkelheitWeapon
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_VerkorperungEnabler
        SpecialPowerTemplate     = SpecialAbilityHeroBlink
        TriggeredBy              = Upgrade_Level_3
    End

    Behavior = SpecialPowerModule ModuleTag_VerkorperungStarter
        SpecialPowerTemplate     = SpecialAbilityHeroBlink
        UpdateModuleStartsAttack = Yes
        TriggerFX                = FX_KankraDunkelheitFx
        StartsPaused             = Yes
    End

    Behavior = TeleportSpecialAbilityUpdate ModuleTag_VerkorperungUpdate
        SpecialPowerTemplate     = SpecialAbilityHeroBlink
        UnpackingVariation       = 3
        UnpackTime               = 1500
        PackTime                 = 1000
        ApproachRequiresLOS      = No
        BusyForDuration          = 8000
        DestinationWeaponName    = BlinkItKankra
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_KokonEnabler
        SpecialPowerTemplate     = SpecialAbilityKokonausDunkelheit
        TriggeredBy              = Upgrade_Level_5
    End

    Behavior = OCLSpecialPower ModuleTag_OCLSpecialPowerKokon
        SpecialPowerTemplate     = SpecialAbilityKokonausDunkelheit
        OCL                      = OCL_SpawnKokonausDunkelheit
        CreateLocation           = USE_OWNER_OBJECT
        StartsPaused             = Yes
        SetModelCondition        = ModelConditionState:SPECIAL_WEAPON_TWO
        SetModelConditionTime    = 2.1
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_LebenslichtEnabler
        SpecialPowerTemplate     = SpecialAbilityUngoliathLichtfresserin
        TriggeredBy              = Upgrade_Level_7
    End

    Behavior = SpecialPowerModule ModuleTag_LebenslichtStarter
        SpecialPowerTemplate     = SpecialAbilityUngoliathLichtfresserin
        UpdateModuleStartsAttack = Yes
        StartsPaused             = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_LebenslichtUpdate
        SpecialPowerTemplate     = SpecialAbilityUngoliathLichtfresserin
        UnpackingVariation       = 1
        UnpackTime               = 1800
        PackTime                 = 1600
        AwardXPForTriggering     = 0
        HeroAttributeModifier    = UngoliathLichtfresser
        HeroEffectDuration       = 20000
    End

    Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag2
        FireWeaponNugget
            WeaponName = UngoliathLichtfresserinHeroEffect
            FireDelay  = 2500
            OneShot    = No
        End
        HeroModeTrigger = Yes
    End

    Behavior = SpecialEnemySenseUpdate ModuleTag_StingSeesOrcs
        SpecialEnemyFilter = ANY +INFANTRY +HERO +CAVALRY
        ScanRange          = 250
        ScanInterval       = 2000
    End


    Behavior = DarknessSpecialPower ModuleTag_GandalfsWorte
        SpecialPowerTemplate          = SpecialAbilityerschlingendeGier
        AttributeModifier             = VerschlingendeGierModifier
        AttributeModifierAffects      = NONE +WildShelobRing ALLIES
        AttributeModifierWeatherBased = Yes
        WeatherDuration               = 300000
        ChangeWeather                 = CLOUDY
        AvailableAtStart              = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_GandalfsWorteAnimation
        UnpackTime                    = 2500
        UnpackingVariation            = 3
        SpecialPowerTemplate          = SpecialAbilityerschlingendeGier
        PreparationTime               = 0
        PersistentPrepTime            = 0
        PackTime                      = 5000
    End

    Behavior = ObjectCreationUpgrade MakeTheDeath
        TriggeredBy       = Upgrade_TestBuilding_2
        Delay             = 0
        ThingToSpawn      = KankraSelfDeathPing
        Offset            = X:0.0 Y:0.0 Z:0.0
    End

    Behavior = ObjectCreationUpgrade MakeTheDeath2
        TriggeredBy       = Upgrade_TestBuilding_2
        Delay             = 0
        ThingToSpawn      = KankraGierSpiderPing
        Offset            = X:0.0 Y:0.0 Z:0.0
    End

    Behavior = ProductionUpdate ProductionUpdateModuleTag
        GiveNoXP = Yes
    End

    Behavior = AutoHealBehavior ModuleTag_AragornHealing
        StartsActive      = Yes
        HealingAmount     = 75
        HealingDelay      = 2000
        StartHealingDelay = 3000
        HealOnlyIfNotInCombat = Yes
    End



    Behavior = RemoveUpgradeUpgrade ModuleTag_RemoveRing
        TriggeredBy                   = Upgrade_AllFactionUpgrade
        UpgradeToRemove               = Upgrade_FortressRingHero Upgrade_RingHero
        RemoveFromAllPlayerObjects    = Yes
        SuppressEvaEventForRemoval    = Yes
    End

    Behavior = FXListDie ModuleTag_AnnounceWeLostTheRing
        DeathFX = GandalfAnnounceFortressDeathLostRingFX
    End

    Behavior = CreateObjectDie ModuleTag_DropTheRing
        CreationList = OCL_TheOneRing
    End

    Behavior = AttributeModifierUpgrade ModuleTag_RingBonus
        TriggeredBy       = Upgrade_AllFactionUpgrade
        AttributeModifier = KankraRingBonus
    End


    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End


    Behavior = AISpecialPowerUpdate InstillTerrorAI
        CommandButtonName = Command_WildShelobInstillTerrorMod
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate PoisonedStingerAI
        CommandButtonName = Command_WildShelobPoisonedStinger
        SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
        SpecialPowerRadius = 100
    End

    Behavior = AISpecialPowerUpdate FireballAI
        CommandButtonName = Command_SpecialAbilityKankraNetz
        SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
    End

    Behavior = AISpecialPowerUpdate AragornBladeMasterAI
        CommandButtonName = Command_SpecialAbilityKankraLichtfresserin
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Scale = 1.75
    Geometry = CYLINDER
    GeometryMajorRadius = 46.0
    GeometryMinorRadius = 46.0
    GeometryHeight = 44.0
    GeometryIsSmall = No
    Shadow = SHADOW_DECAL
    ShadowSizeX = 68
    ShadowSizeY = 48
    ShadowOffsetX = -7
    ShadowTexture = ShadowSpider2
End
