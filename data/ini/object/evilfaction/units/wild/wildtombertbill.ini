Object GoblinBillTomBert

    ButtonImage       = HSTomBertBil
    SelectPortrait    = UPTomBertBil

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_GoblinCaveTroll

    Draw = W3DScriptedModelDraw ModuleTag_01

        OkToChangeModelColor        = Yes
        ShowShadowWhileContained    = Yes
        StaticModelLODMode          = Yes

        ExtraPublicBone             = TRUNK01

        RandomTexture = Bert.tga 0 mucavtroll.tga
        RandomTexture = Tom.tga 0 mucavtroll.tga
        RandomTexture = Bill.tga 0 mucavtroll.tga

        DefaultModelConditionState
            Model = MuCavTroll_SKN
            WeaponLaunchBone = PRIMARY Firepoint
        End



        ModelConditionState    = DYING DECAY SPLATTED
            Model                = MUCavTroll_DISA
            RetainSubObjects    = Yes
        End

        IdleAnimationState
            StateName                = Idle
            AllowRepeatInRandomPick    = Yes
            SimilarRestart            = Yes

            Animation = Breathe
                AnimationName = MuCavTroll_SKL.MuCavTroll_IDLA
                AnimationMode = ONCE
                AnimationPriority = 100
            End
            Animation = BellyScratch
                AnimationName = MuCavTroll_SKL.MuCavTroll_IDLC
                AnimationMode = ONCE
                AnimationPriority = 5
            End
            Animation = RubHead
                AnimationName = MuCavTroll_SKL.MuCavTroll_IDLK
                AnimationMode = ONCE
                AnimationPriority = 5
            End
            Animation = WipeNose
                AnimationName = MuCavTroll_SKL.MuCavTroll_IDLN
                AnimationMode = ONCE
                AnimationPriority = 5
            End
            Animation = LittleRoar
                AnimationName = MuCavTroll_SKL.MuCavTroll_IDLM
                AnimationMode = ONCE
                AnimationPriority = 3
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                CurDrawableHideSubObjectPermanently("ROCK")
            EndScript
        End


        AnimationState         = DYING DECAY SPLATTED
            Animation            = dead1
                AnimationName       = MUCavTroll_DISA.MUCavTroll_DISA
                AnimationMode      = ONCE
            End
        End

        ModelConditionState    = DYING DECAY WEAPONSET_TOGGLE_1
            Model                = MUCavTroll_DISC
            RetainSubObjects    = Yes
        End

        AnimationState         = DYING DECAY WEAPONSET_TOGGLE_1
            Animation            = dead1
                AnimationName       = MUCavTroll_DISC.MUCavTroll_DISC
                AnimationMode      = ONCE
            End
        End

        ModelConditionState    = DYING DECAY DEATH_1
            Model                = MUCavTroll_DISB
            RetainSubObjects    = Yes
        End

        AnimationState         = DYING DECAY DEATH_1
            Animation            = dead1
                AnimationName       = MUCavTroll_DISB.MUCavTroll_DISB
                AnimationMode      = ONCE
            End
        End

        ModelConditionState    = DYING DECAY DEATH_2
            Model                = MUCavTroll_DISC
            RetainSubObjects = Yes
        End

        AnimationState         = DYING DECAY DEATH_2
            Animation            = dead1
                AnimationName       = MUCavTroll_DISC.MUCavTroll_DISC
                AnimationMode      = ONCE
            End
        End


        AnimationState = STUNNED_FLAILING
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_FLYA
                AnimationMode = LOOP
            End
        End


        AnimationState = DYING WEAPONSET_TOGGLE_1
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_DIEE
                AnimationMode = ONCE
            End
        End

        AnimationState = DYING SPLATTED
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_LNDA
                AnimationMode = ONCE
            End
        End

        AnimationState = DYING DEATH_1
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_DIEB
                AnimationMode = ONCE
            End

                ParticleSysBone = B_PELVIS TrollSplatDust
                ParticleSysBone = BAT_HEAD TrollSplatDust
        End

        AnimationState = DYING DEATH_2
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_DIEC
                AnimationMode = ONCE
            End

                ParticleSysBone = BAT_SPINE1 TrollSplatDust1
                ParticleSysBone = BAT_HEAD TrollSplatDust1
        End

        ModelConditionState = DYING
            Model = MuCavTroll_SKN
        End
        AnimationState = DYING
            Animation
                AnimationName     =  MuCavTroll_SKL.MuCavTroll_DIEC
                AnimationMode     = ONCE
            End
        End

        ModelConditionState = STONED
            Model            = MuCavTroll_SKN
            Texture            = MuCavTroll.tga MUCavTroll_R.tga
        End

        AnimationState        = STONED
            Animation            = Stoned
                AnimationName        = MuCavTroll_SKL.MuCavTroll_MFDA
                AnimationMode        = MANUAL
                AnimationBlendTime    = 40
            End
            Flags    = RANDOMSTART
        End

        AnimationState                = STUNNED_STANDING_UP
            Animation                = MuCavTroll_GTPA
                AnimationName        = MuCavTroll_SKL.MuCavTroll_GTPA
                AnimationMode        = ONCE
            End
        End

        AnimationState                = STUNNED
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_LNDA
                AnimationMode = ONCE
            End
            ParticleSysBone = B_PELVIS TrollSplatDust2
            ParticleSysBone = BAT_HEAD TrollSplatDust2
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = MuCavTroll_IDLA
                AnimationMode                = LOOP
            End
        End































        AnimationState = SPECIAL_WEAPON_ONE
            Animation = Punch
                AnimationName = MuCavTroll_SKL.MuCavTroll_ATKF
                AnimationMode = ONCE
            End
            Animation = Backhand
                AnimationName = MuCavTroll_SKL.MuCavTroll_ATKG
                AnimationMode = ONCE
            End
        End


        AnimationState = WEAPONSET_RAMPAGE
            Animation = GetMad
                    AnimationName = MuCavTroll_SKL.MuCavTroll_RPGC
                    AnimationMode = LOOP
                End
            End



        AnimationState = FIRING_OR_PREATTACK_A WEAPONSTATE_ONE






            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_ATKC
                AnimationMode = ONCE
                UseWeaponTiming        = Yes
            End
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_ATKD
                AnimationMode = ONCE
                UseWeaponTiming        = Yes
            End
        End


        AnimationState = TURN_LEFT WEAPONSTATE_ONE
            Animation = Moving
                AnimationName = MuCavTroll_SKL.MuCavTroll_TRNL
                AnimationMode = LOOP
                AnimationBlendTime = 10
            End
            ParticleSysBone = None InfantryDustTrails
            BeginScript
                CurDrawableShowSubObjectPermanently("Trunk01")
            EndScript
        End

        AnimationState = TURN_RIGHT WEAPONSTATE_ONE
            Animation = Moving
                AnimationName = MuCavTroll_SKL.MuCavTroll_TRNR
                AnimationMode = LOOP
                AnimationBlendTime = 10
            End
            ParticleSysBone = None InfantryDustTrails
            BeginScript
                CurDrawableShowSubObjectPermanently("Trunk01")
            EndScript
        End

        AnimationState = MOVING WEAPONSTATE_ONE
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_RUNA
                AnimationMode = LOOP

            End
            Flags               = RANDOMSTART
            ParticleSysBone     = None InfantryDustTrails
            FXEvent    = Frame:5 FireWhenSkipped Name:FX_TrollRightFootStep
            FXEvent    = Frame:18 FireWhenSkipped Name:FX_TrollLeftFootStep
        End































        AnimationState = FIRING_OR_PREATTACK_A WEAPONSTATE_ONE






            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_ATKC
                AnimationMode = ONCE
                UseWeaponTiming        = Yes
            End
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_ATKD
                AnimationMode = ONCE
                UseWeaponTiming        = Yes
            End
        End


        AnimationState = FIRING_OR_PREATTACK_B WEAPONSTATE_ONE
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_ATRA
                AnimationMode = ONCE
                UseWeaponTiming        = Yes
            End
        End

        AnimationState = PREPARING
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_GRBC
                AnimationMode = ONCE
            End
        End

        AnimationState = PACKING WEAPONSTATE_ONE
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_GRBD
                AnimationMode = ONCE
            End
            BeginScript
                CurDrawableShowSubObjectPermanently("Trunk01")
            EndScript
        End

        AnimationState = EMOTION_CELEBRATING WEAPONSTATE_ONE
            Animation = DeepRoar
                AnimationName    =    MuCavTroll_SKL.MuCavTroll_IDLF
                AnimationMode    =    LOOP
            End
        End

        AnimationState = USER_2 WEAPONSTATE_ONE
             Animation = ReactToTrollPoke
                 AnimationName = MuCavTroll_SKL.MuCavTroll_HITD
                 AnimationMode = ONCE
             End
        End

        AnimationState                    = EMOTION_TAUNTING WEAPONSTATE_ONE
            Animation
                AnimationName            = MUMntTroll_SKL.MUMntTroll_IDLB
                AnimationMode            = ONCE
                AnimationPriority        = 20
            End
            Animation                    = Taunting3
                AnimationName            = MUMntTroll_SKL.MUMntTroll_IDLM
                AnimationMode            = ONCE
                AnimationPriority        = 10
            End
            Animation                    = Taunting4
                AnimationName            = MUMntTroll_SKL.MUMntTroll_IDLE
                AnimationMode            = ONCE
                AnimationPriority        = 5
            End
        End

        AnimationState = WEAPONSTATE_ONE
            AllowRepeatInRandomPick    = Yes
            SimilarRestart            = Yes

            Animation = BreathWithClub
                AnimationName = MuCavTroll_SKL.MuCavTroll_IDLB
                AnimationMode = ONCE
                AnimationPriority = 30
                AnimationSpeedFactorRange = 0.8 1.0
            End
            Animation = BreathWithClub
                AnimationName = MuCavTroll_SKL.MuCavTroll_IDLB
                AnimationMode = ONCE
                AnimationPriority = 30
                AnimationSpeedFactorRange = 0.8 1.0
            End
            Animation = RoarAndThumpClub
                AnimationName = MuCavTroll_SKL.MuCavTroll_IDLE
                AnimationMode = ONCE
                AnimationPriority = 5
                AnimationBlendTime = 3
            End
            Animation = ScratchButt
                AnimationName = MuCavTroll_SKL.MuCavTroll_IDLG
                AnimationMode = ONCE
                AnimationPriority = 2
                AnimationBlendTime = 3
            End
            Flags = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                CurDrawableShowSubObjectPermanently("Trunk01")
            EndScript
        End



















































        AnimationState = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            StateName = Throw
            Animation
                AnimationName        = MuCavTroll_SKL.MuCavTroll_THRA
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
            End
            LuaEvent = Frame:24 Data: hide_rock
            FrameForPristineBonePositions = 24
        End

        AnimationState = RELOADING_A WEAPONSET_TOGGLE_1
            Animation
                AnimationName        = MuCavTroll_SKL.MuCavTroll_GRBE
                AnimationMode        = ONCE
            End
            FXEvent    = Frame:21    Name: FX_CaveTrollRockGrab
            FXEvent    = Frame:38    Name: FX_CaveTrollRockYank
            LuaEvent = Frame:37 Data: show_rock
        End






















        AnimationState = FIRING_OR_PREATTACK_B WEAPONSET_TOGGLE_1
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_ATKJ
                AnimationMode = ONCE
                UseWeaponTiming        = Yes
            End
        End

        AnimationState = TURN_LEFT WEAPONSET_TOGGLE_1
            Animation = Moving
                AnimationName = MUCavTroll_SKL.MUCavTroll_TRNL
                AnimationMode = LOOP
                AnimationBlendTime = 10
            End
            ParticleSysBone = None InfantryDustTrails
        End

        AnimationState = TURN_RIGHT WEAPONSET_TOGGLE_1
            Animation = Moving
                AnimationName = MUCavTroll_SKL.MUCavTroll_TRNR
                AnimationMode = LOOP
                AnimationBlendTime = 10
            End
            ParticleSysBone = None InfantryDustTrails
        End

        AnimationState = MOVING WEAPONSET_TOGGLE_1
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_RUNA
                AnimationMode = LOOP

            End
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
            FXEvent    = Frame:5 FireWhenSkipped Name:FX_TrollRightFootStep
            FXEvent    = Frame:18 FireWhenSkipped Name:FX_TrollLeftFootStep
        End














        AnimationState = HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
            Animation = Hit_Level_1_a
                AnimationName = MuCavTroll_SKL.MuCavTroll_HITD
                AnimationMode = ONCE
            End
        End

        AnimationState = HIT_REACTION HIT_LEVEL_2 WEAPONSET_TOGGLE_1
            Animation = Hit_Level_2
                AnimationName = MuCavTroll_SKL.MuCavTroll_HITC
                AnimationMode = ONCE
            End
        End

        AnimationState = HIT_REACTION HIT_LEVEL_3 WEAPONSET_TOGGLE_1
            Animation = Hit_Level_3
                AnimationName = MuCavTroll_SKL.MuCavTroll_HITA
                AnimationMode = ONCE
            End
        End

        AnimationState = REACT_1 WEAPONSET_TOGGLE_1
            Animation = Click_React_1
                AnimationName = MuCavTroll_SKL.MuCavTroll_RCTA
                AnimationMode = ONCE
            End
        End

        AnimationState = REACT_2 WEAPONSET_TOGGLE_1
            Animation = Click_React_2
                AnimationName = MuCavTroll_SKL.MuCavTroll_RCTB
                AnimationMode = ONCE
            End
        End

        AnimationState = REACT_3 WEAPONSET_TOGGLE_1
            Animation = Click_React_3
                AnimationName = MuCavTroll_SKL.MuCavTroll_RCTC
                AnimationMode = ONCE
            End
        End

        AnimationState = REACT_4 WEAPONSET_TOGGLE_1
            Animation = Click_React_4
                AnimationName = MuCavTroll_SKL.MuCavTroll_RCTD
                AnimationMode = ONCE
            End
        End

        AnimationState = REACT_5 WEAPONSET_TOGGLE_1
            Animation = Click_React_5
                AnimationName = MuCavTroll_SKL.MuCavTroll_RCTE
                AnimationMode = ONCE
            End
        End

        AnimationState = USER_2 WEAPONSET_TOGGLE_1
             Animation = ReactToTrollPoke
                 AnimationName = MuCavTroll_SKL.MuCavTroll_HITD
                 AnimationMode = ONCE
             End
        End

        AnimationState = SWAPPING_TO_WEAPONSET_1 WEAPONSET_TOGGLE_1
            Animation
                AnimationName    = MuCavTroll_SKL.MuCavTroll_GRBE
                AnimationMode    = MANUAL
            End
        End

        AnimationState                    = EMOTION_TAUNTING WEAPONSET_TOGGLE_1
            Animation
                AnimationName            = MUMntTroll_SKL.MUMntTroll_IDLB
                AnimationMode            = ONCE
                AnimationPriority        = 20
            End
            Animation                    = Taunting3
                AnimationName            = MUMntTroll_SKL.MUMntTroll_IDLM
                AnimationMode            = ONCE
                AnimationPriority        = 10
            End
        End

        AnimationState = WEAPONSET_TOGGLE_1
            AllowRepeatInRandomPick            = Yes
            SimilarRestart                    = Yes

            Animation = BreatheWithRock
                AnimationName                = MuCavTroll_SKL.MuCavTroll_IDLB
                AnimationMode                = ONCE
                AnimationPriority            = 10
                AnimationSpeedFactorRange    = 0.8 1.2
            End





            Flags = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                CurDrawableShowSubObjectPermanently("ROCK")
            EndScript
        End




        AnimationState = UNPACKING
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_GRBA
                AnimationMode = ONCE
            End
            FrameForPristineBonePositions = 14
        End

        AnimationState = TURN_LEFT
            Animation = Moving
                AnimationName = MuCavTroll_SKL.MuCavTroll_TRNL
                AnimationMode = LOOP
                AnimationBlendTime = 10
            End
            ParticleSysBone = None InfantryDustTrails
        End

        AnimationState = TURN_RIGHT
            Animation = Moving
                AnimationName = MuCavTroll_SKL.MuCavTroll_TRNR
                AnimationMode = LOOP
                AnimationBlendTime = 10
            End
            ParticleSysBone = None InfantryDustTrails
        End














        AnimationState = FIRING_OR_PREATTACK_A
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_ATKA
                AnimationMode = ONCE
                UseWeaponTiming        = Yes
            End
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_ATKE
                AnimationMode = ONCE
                UseWeaponTiming        = Yes
            End
        End


        AnimationState = FIRING_OR_PREATTACK_B
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_ATKJ
                AnimationMode = ONCE
                UseWeaponTiming        = Yes
            End
        End


        AnimationState = FIRING_OR_PREATTACK_C
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_ATRB
                AnimationMode = ONCE
                UseWeaponTiming        = Yes
            End
        End

        AnimationState                = MOVING PANICKING
            Animation                = RUNM
                AnimationName        =  MuCavTroll_SKL.MuCavTroll_MFDA
                AnimationMode        = LOOP
            End
            Flags                    = RANDOMSTART
        End

























        AnimationState = MOVING
            Animation = Charging
                AnimationName = MuCavTroll_SKL.MuCavTroll_RUNB
                AnimationMode = LOOP

            End
            Flags = RANDOMSTART
            ParticleSysBone = None InfantryDustTrails
                FXEvent    = Frame:5 FireWhenSkipped Name:FX_TrollRightFootStep
                FXEvent    = Frame:18 FireWhenSkipped Name:FX_TrollLeftFootStep
        End

        AnimationState = ENGAGED
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_IDLA
                AnimationMode = LOOP
            End
        End


        AnimationState = JUST_BUILT
            Animation
                AnimationName = MuCavTroll_SKL.MuCavTroll_WLKD
                AnimationMode = ONCE
                AnimationBlendTime = 0
                AnimationSpeedFactorRange = 0.9 0.9
            End
        End


        AnimationState = HIT_REACTION HIT_LEVEL_1
            Animation = Hit_Level_1_a
                AnimationName = MuCavTroll_SKL.MuCavTroll_HITD
                AnimationMode = ONCE
            End
        End

        AnimationState = HIT_REACTION HIT_LEVEL_2
            Animation = Hit_Level_2
                AnimationName = MuCavTroll_SKL.MuCavTroll_HITC
                AnimationMode = ONCE
            End
        End

        AnimationState = HIT_REACTION HIT_LEVEL_3
            Animation = Hit_Level_3
                AnimationName = MuCavTroll_SKL.MuCavTroll_HITA
                AnimationMode = ONCE
            End
        End

        AnimationState = REACT_1
            Animation = Click_React_1
                AnimationName = MuCavTroll_SKL.MuCavTroll_RCTA
                AnimationMode = ONCE
            End
        End

        AnimationState = REACT_2
            Animation = Click_React_2
                AnimationName = MuCavTroll_SKL.MuCavTroll_RCTB
                AnimationMode = ONCE
            End
        End

        AnimationState = REACT_3
            Animation = Click_React_3
                AnimationName = MuCavTroll_SKL.MuCavTroll_RCTC
                AnimationMode = ONCE
            End
        End

        AnimationState = REACT_4
            Animation = Click_React_4
                AnimationName = MuCavTroll_SKL.MuCavTroll_RCTD
                AnimationMode = ONCE
            End
        End

        AnimationState = REACT_5
            Animation = Click_React_5
                AnimationName = MuCavTroll_SKL.MuCavTroll_RCTE
                AnimationMode = ONCE
            End
        End

        AnimationState = USER_2
            Animation = ReactToTrollPoke
                AnimationName = MuCavTroll_SKL.MuCavTroll_HITA
                AnimationMode = ONCE
            End
        End



        AnimationState = EMOTION_CELEBRATING
            Animation
                AnimationName    =    MuCavTroll_SKL.MuCavTroll_IDLF
                AnimationMode    =    LOOP
            End
        End

        AnimationState                    = EMOTION_TAUNTING
            Animation
                AnimationName            = MUMntTroll_SKL.MUMntTroll_IDLB
                AnimationMode            = ONCE
                AnimationPriority        = 20
            End
            Animation                    = Taunting3
                AnimationName            = MUMntTroll_SKL.MUMntTroll_IDLM
                AnimationMode            = ONCE
                AnimationPriority        = 10
            End
        End


    End













    Draw = W3DScriptedModelDraw DustEffects
        DefaultModelConditionState
          Model = None
        End
        IdleAnimationState
        End
        AnimationState =  MOVING WADING
            ParticleSysBone = None FootstepSlash
        End
        AnimationState = MOVING ACCELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState =  MOVING ACCELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOUNTED MOVING
        End
    End

    #include "..\..\..\includes\StunDrawModuleLarge.inc"







    Side                = Wild
    EditorSorting            = UNIT

    ThreatLevel            = CAVE_TROLL_THREAT_LEVEL
    ThreatBreakdown MordorCatapult_DetailedThreat
        AIKindOf = CAVALRY
    End

    TransportSlotCount        = TRANSPORTSLOTCOUNT_MONSTER
    ShowHealthInSelectionDecal    = Yes
    CommandSet            = TomBillBertCommandSet
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG
	DisplayMeleeDamage = WEAK_HERO_DAMAGE

    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY         TomBertBillPunch
        Weapon            = SECONDARY       TomBertBillBash
        OnlyAgainst       = SECONDARY       STRUCTURE BLOCKING_GATE
        Weapon            = TERTIARY        TomBertBillPunch
        OnlyInCondition   = TERTIARY        MOVING
    End

    WeaponSet
        Conditions        = RAMPAGE WEAPONSET_TOGGLE_1
        Weapon            = PRIMARY      TomBertBillRampage
    End

    WeaponSet
        Conditions        = WEAPONSET_TOGGLE_1
        Weapon            = PRIMARY    TomBertBillThrow
    End

    WeaponSet
        Conditions        = RAMPAGE
        Weapon            = PRIMARY      TomBertBillRampage
    End

    WeaponSet
        Conditions        = RAMPAGE PASSENGER_TYPE_ONE
        Weapon            = PRIMARY      TomBertBillTreeRampage
    End

    WeaponSet
        Conditions        = PASSENGER_TYPE_ONE
        Weapon            = PRIMARY      TomBertBillClubSwing
        Weapon            = SECONDARY    TomBertBillClubSwing
        OnlyInCondition   = SECONDARY    MOVING
    End

    WeaponSet
        Conditions        = PASSENGER_TYPE_TWO
        Weapon            = PRIMARY     CaveTrollGoblinThrow
    End

    ArmorSet
        Conditions      = None
        Armor           = MediumHeroArmor
        DamageFX        = NormalDamageFX
    End



    VisionRange            = 200
    ShroudClearingRange    = 300
    BountyValue            = MORDOR_TROLL_BOUNTY_VALUE
    DisplayName            = OBJECT:GoblinBilbosTrolle
    CrushableLevel            = 2
    CrusherLevel            = 2
    UseCrushAttack            = No
    CrushWeapon            = TrollCrush

    RamPower            = 20
    RamZMult            = 0.5
    CrushKnockback            = 30
    CrushZFactor            = 1.0
    CommandPoints          = 0
    Scale = 1.15



    VoiceAttack                          = BertHobbitVoiceAttack
    VoiceAttackCharge                    = BertHobbitVoiceAttack
    VoiceAttackMachine                   = BertHobbitVoiceAttack
    VoiceAttackStructure                 = BertHobbitVoiceAttack
    VoiceGuard                           = BertHobbitVoiceSelect
    VoiceFear                            = BertHobbitVoiceHelpMe
    VoiceMove                            = BertHobbitVoiceMove
    VoiceMoveToCamp                      = BertHobbitVoiceMove
    VoiceMoveWhileAttacking              = BertHobbitVoiceMove
    VoicePriority                        = 80
    VoiceSelect                          = BertHobbitVoiceSelect
    VoiceSelectBattle                    = BertHobbitVoiceSelect
    VoiceCreated                         = BertHobbitVoiceCreated
    VoiceFullyCreated                    = BertHobbitVoiceCreated

    SoundImpact                          = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitEvilMenTransportShip    = BertHobbitVoiceMove
        VoiceEnterUnitMordorMumakil        = BertHobbitVoiceMove
        VoiceEnterUnitSlaughterHouse        = BertHobbitVoiceMove
        VoiceGarrison                = BertHobbitVoiceMove
        VoiceInitiateCaptureBuilding        = BertHobbitVoiceMove
    End

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:TrollBodyfall        Animation:MUCavTroll_SKL.MUCavTroll_DieB Frames:33
        AnimationSound = Sound:TrollBodyfall        Animation:MUCavTroll_SKL.MUCavTroll_DieC Frames:84
        AnimationSound = Sound:TrollBodyfall        Animation:MUCavTroll_SKL.MUCavTroll_LndA Frames:3 21
        AnimationSound = Sound:TrollIdleRubHeadVox    Animation:MUCavTroll_SKL.MUCavTroll_IDLK Frames:0
        AnimationSound = Sound:TrollBodyfall        Animation:MUCavTroll_SKL.MUCavTroll_RCTB Frames:3

        AnimationSound = Sound:TrollRoar        Animation:MUCavTroll_SKL.MUCavTroll_IDLE Frames:10 Animation:MUCavTroll_SKL.MUCavTroll_IDLG Frames:78 Animation:MUCavTroll_SKL.MUCavTroll_IDLK Frames:0 Animation:MUCavTroll_SKL.MUCavTroll_IDLM Frames:0 Animation:MUCavTroll_SKL.MUCavTroll_ATKA Frames:12 Animation:MUCavTroll_SKL.MUCavTroll_ATKC Frames:17 Animation:MUCavTroll_SKL.MUCavTroll_ATKD Frames:10 Animation:MUCavTroll_SKL.MUCavTroll_ATKE Frames:14 Animation:MUCavTroll_SKL.MUCavTroll_ATKF Frames:3 Animation:MUCavTroll_SKL.MUCavTroll_ATKG Frames:13 Animation:MUCavTroll_SKL.MUCavTroll_HITC Frames:21 Animation:MUCavTroll_SKL.MUCavTroll_HITD Frames:10 Animation:MUCavTroll_SKL.MUCavTroll_MFDA Frames:47 Animation:MUCavTroll_SKL.MUCavTroll_RCTD Frames:29 Animation:MUCavTroll_SKL.MUCavTroll_RCTE Frames:53 Animation:MUCavTroll_SKL.MUCavTroll_RPGC Frames:0 32 59 88
        AnimationSound = Sound:TrollIdleYell01        Animation:MUCavTroll_SKL.MUCavTroll_IDLF Frames:37
        AnimationSound = Sound:TrollTreeShakeYell    Animation:MUCavTroll_SKL.MUCavTroll_GRBA Frames:14  Animation:MUCavTroll_SKL.MUCavTroll_GRBB Frames:12
        AnimationSound = Sound:TrollTreeShakeYell    Animation:MUCavTroll_SKL.MUCavTroll_GRBC Frames:26  Animation:MUCavTroll_SKL.MUCavTroll_GRBD Frames:28
        AnimationSound = Sound:TrollFootstep        Animation:MUCavTroll_SKL.MUCavTroll_RUNA Frames:4 17  Animation:MUCavTroll_SKL.MUCavTroll_RUNB Frames:4 17  Animation:MUCavTroll_SKL.MUCavTroll_WLKA Frames:0 15  Animation:MUCavTroll_SKL.MUCavTroll_WLKB Frames:0 20  Animation:MUCavTroll_SKL.MUCavTroll_WLKD Frames:0 22 Animation:MUCavTroll_SKL.MUCavTroll_TRNL Frames:15 27 Animation:MUCavTroll_SKL.MUCavTroll_TRNR Frames:15 27 Animation:MUCavTroll_SKL.MUCavTroll_RCTD Frames:7 66 Animation:MUCavTroll_SKL.MUCavTroll_GTPA Frames:12 80 97 Animation:MUCavTroll_SKL.MUCavTroll_MFDA Frames:4 17 29 42
        AnimationSound = Sound:TrollFootstepRampage    Animation:MUCavTroll_SKL.MUCavTroll_RPGC Frames:43 61 77 93 100 116 123 139 149
        AnimationSound = Sound:TrollTreeSwingLight    Animation:MUCavTroll_SKL.MUCavTroll_IDLE Frames:49 Animation:MUCavTroll_SKL.MUCavTroll_RPGC Frames:112
        AnimationSound = Sound:TrollGrabRock        Animation:MuCavTroll_SKL.MuCavTroll_GRBB Frames:0
        AnimationSound = Sound:TrollGetupShakeHeadVox    Animation:MuCavTroll_SKL.MuCavTroll_GTPA Frames:31
        AnimationSound = Sound:ImpactTrollTreeLight    Animation:MUCavTroll_SKL.MUCavTroll_IDLE Frames:55
    End

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
          Key         = Troll

    End



    RadarPriority    = UNIT
    KindOf           = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS HEAVY_MELEE_HITTER TROLL_BUFF_NUGGET MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT NO_FREEWILL_ENTER PATH_THROUGH_INFANTRY SCARY CAN_ATTACK_WALLS ARMY_SUMMARY TROLL SIEGEENGINE
        BuildCost    = MEDIUM_HERO_COST
        BuildTime    = MEDIUM_HERO_BUILDTIME

    Body = DelayedDeathBody ModuleTag_02
        MaxHealth            = VERY_STRONG_HERO_HEALTH
        MaxHealthDamaged        = 250
        MaxHealthReallyDamaged        = 100
        RecoveryTime            = 5000
        DoHealthCheck            = No
        DelayedDeathTime        = 5000
        CanRespawn            = No
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Artillery
        End


    Behavior = AutoPickUpUpdate AutoPickUpForOrcsToHold
        ScanDelayTime        = 0
        ScanDistance        = 300000
        PickUpFilter        = NONE +GoblinFighter +GoblinArcher

        RunFromButton        = Yes
        RunFromButtonNumber     = 3
    End


    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy = Upgrade_SwitchToRockThrowing
        GetUpgradeCommandButtonName = Command_ToggleMountainTrollRockThrow
    End





    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        AILuaEventsList            = CreepTrollFunctions
        RampageTime                = 4470
        AttackPriority             = AttackPriority_Cavalry
    End

    Behavior = AutoPickUpUpdate AutoPickUpForTrees
        ScanDelayTime            = 0
        ScanDistance            = 300
        PickUpFilter            = NONE +TREE

        RunFromButton            = Yes
        RunFromButtonNumber         = 2
    End



    Behavior = BoredUpdate BoredModuleTagOne
        ScanDelayTime    = 15000
        ScanDistance    = 70
        BoredFilter        = NONE +GoblinCaveTroll
        SpecialPowerTemplate = SpecialAbilityMountainTrollBored
    End

       Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion            = Terror_Base
        AddEmotion            = Doom_Base
        AddEmotion            = BraceForBeingCrushed_Base
        AddEmotion            = UncontrollableFear_Base


        AddEmotion            = Point_Base
        AddEmotion            = Taunt_Base
         AddEmotion            = CheerIdle_Base
        AddEmotion            = CheerBusy_Base
        AddEmotion            = HeroCheerIdle_Base
        AddEmotion            = HeroCheerBusy_Base
        AddEmotion            = Alert_Base
    End

    LocomotorSet
        Locomotor = TrollLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_FOOT_MED_MEMBER_SPEED
    End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 1500
        HitReactionLifeTimer2 = 3000
        HitReactionLifeTimer3 = 2000

        HitReactionThreshold1 = 0.0
        HitReactionThreshold2 = 50.0
        HitReactionThreshold3 = 200.0
    End

    Behavior = ClickReactionBehavior ClickBehaviorModuleTag
        ClickReactionTimer    = 600
        ReactionFrames1        = 15
        ReactionFrames2        = 7
        ReactionFrames3        = 7
        ReactionFrames4        = 15
        ReactionFrames5        = 18
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult            = 0.0
        ShockStandingTime        = 4600
        FirstHeight            = 0
        SecondHeight            = 0
    End

    Behavior = SlowDeathBehavior ModuleTag_50
        DeathTypes            = ALL
        DestructionDelay        = 35000
        DecayBeginTime            = 3000
        SinkDelay            = 10000
        SinkRate            = 0.64
        Sound                = INITIAL BertHobbitVoiceDie
        ProbabilityModifier         = 50
        DeathFlags            = DEATH_1
    End

    Behavior = SlowDeathBehavior ModuleTag_51
        DeathTypes            = ALL
        DestructionDelay        = 35000
        DecayBeginTime            = 4500
        SinkDelay            = 11500
        SinkRate            = 0.64
        Sound                = INITIAL BertHobbitVoiceDie
        ProbabilityModifier         = 50
        DeathFlags            = DEATH_2
    End


    Behavior = AutoHealBehavior ModuleTag_RogashHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 5000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End


    Behavior = SquishCollide ModuleTag_06

    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_Pillage
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        TriggeredBy               = Upgrade_MiniHordeLvl2
    End

    Behavior = SpecialPowerModule ModuleTag_PillageUpdate
        SpecialPowerTemplate        = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack    = No
        StartsPaused                = Yes
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_PillageAura
        StartsActive     = No
        BonusName        = LurtzPassiveOutlawLeadership
        TriggeredBy      = Upgrade_MiniHordeLvl2
        RefreshDelay     = 2000
        Range            = 250
        AllowSelf        = Yes
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -DOZER
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SpawnKochtopfEnabler
        SpecialPowerTemplate     = SpecialAbilitySkullTotemKing
        TriggeredBy              = Upgrade_MiniHordeLvl4
    End

    Behavior = SpecialPowerModule ModuleTag_SpawnKochtopftarter
        SpecialPowerTemplate     = SpecialAbilitySkullTotemKing
        UpdateModuleStartsAttack = Yes
        StartsPaused             = Yes
        InitiateSound            = TrollVoiceSelect
     End

    Behavior = ActivateModuleSpecialPower ModuleTag_SpawnKochtopfUpdate
        SpecialPowerTemplate     = SpecialAbilitySkullTotemKing
        StartAbilityRange        = 25
        MustFinishAbility        = Yes
        UnpackTime               = 800
        PackTime                 = 1200
        UnpackingVariation       = 1
        TriggerSpecialPower      = ModuleTag_SpawnKochtopfPower2 OBJECTPOS
    End

    Behavior = OCLSpecialPower ModuleTag_SpawnKochtopfPower2
        SpecialPowerTemplate     = SpecialAbilitySkullTotemKing2
        OCL                      = OCL_SpawnKochtopf
        CreateLocation           = CREATE_AT_LOCATION
        StartsPaused             = No
    End



    Behavior = GrabPassengerSpecialPower ModuleTag_07
        SpecialPowerTemplate        = SpecialAbilityGrabPassenger
        UpdateModuleStartsAttack    = Yes
        AllowTree            = Yes
        InitiateFX            = FX_TrollGrabInitiate
    End

    Behavior = SpecialAbilityUpdate ModuleTag_08
        SpecialPowerTemplate        = SpecialAbilityGrabPassenger
        StartAbilityRange           = 8.0

        UnpackTime                  = 300
        PreparationTime             = 1
        PersistentPrepTime          = 630
        PackTime                    = 1000
        GrabPassengerAnimAndDuration       = AnimState:EATING AnimTime:3000 TriggerTime:1400
        AwardXPForTriggering        = 0

        RejectedConditions        = WEAPON_TOGGLE
    End

     Behavior = SpecialPowerModule ModuleTag_MordorMtTrollBoredAbility
        SpecialPowerTemplate        = SpecialAbilityMountainTrollBored
        UpdateModuleStartsAttack    = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_MordorMtTrollBored
        SpecialPowerTemplate        = SpecialAbilityMountainTrollBored
        UnpackTime                  = 800
        PackTime            = 1200
        AwardXPForTriggering        = 0
        StartAbilityRange        = 12.0
        SpecialWeapon            = MordorMtTrollBored
        WhichSpecialWeapon        = 1
        RejectedConditions        = WEAPON_TOGGLE
    End

    Behavior = TransportContain ModuleTag_09
        ObjectStatusOfContained = UNSELECTABLE
        PassengerFilter            = ANY +CLUB +ORC +INFANTRY
        ManualPickUpFilter        = ANY +CLUB -ORC -INFANTRY
        Slots                = 1
        ShowPips            = No
        AllowEnemiesInside        = Yes
        AllowNeutralInside        = Yes
        AllowAlliesInside        = Yes
        DamagePercentToUnits        = 0%
        TypeOneForWeaponSet        = CLUB
        TypeOneForWeaponState        = CLUB
        ForceOrientationContainer    = No

        TypeOneForWeaponSet        = CLUB
        TypeTwoForWeaponSet        = INFANTRY

        PassengerBonePrefix         = PassengerBone:TRUNK01        KindOf:CLUB
        PassengerBonePrefix         = PassengerBone:TRUNK01        KindOf:INFANTRY

        EjectPassengersOnDeath = No
    End






    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End


    Behavior = AISpecialPowerUpdate ToggleSiegeModeAI
        CommandButtonName     = Command_ToggleMountainTrollRockThrow
        SpecialPowerAIType     = AI_SPECIAL_POWER_TOGGLE_SIEGE
    End

    Geometry        = CYLINDER
    GeometryMajorRadius    = 19.6
    GeometryHeight         = 34.0
    GeometryIsSmall        = No
    Shadow            = SHADOW_VOLUME_NON_SELF_2



    AutoResolveUnitType    = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

     AutoResolveBody = AutoResolve_WildCaveTrollBody

     AutoResolveArmor
         Armor = AutoResolve_WildCaveTrollArmor
     End

     AutoResolveWeapon
         Weapon = AutoResolve_WildCaveTrollWeapon
     End
End


Object GoblinBillTomBertHorde

    ButtonImage       = HSTomBertBil
    SelectPortrait    = UPTomBertBil

    Draw = W3DScriptedModelDraw ModuleTag_W3DModelDraw
        DependencySharedModelFlags = EMOTION_ALERT EMOTION_MORALE_HIGH EMOTION_MORALE_LOW EMOTION_AFRAID EMOTION_COWER SELECTED EMOTION_TERROR EMOTION_LOOK_TO_SKY
        DefaultModelConditionState
            Model     = None
        End
        ModelConditionState = HORDE_EMPTY
            Model     = None
        End
        ModelConditionState = WORLD_BUILDER
            Model     = HordeMarkIUPik
        End
    End

    Side            = Wild
    EditorSorting        = UNIT
    EmotionRange        = 240
    DisplayName        = OBJECT:GoblinBillTomBertHorde
    DisplayNameStrategic     = CONTROLBAR:LW_Unit_GoblinBillTomBertHorde
    DescriptionStrategic     = CONTROLBAR:LW_ToolTip_GoblinBillTomBertHorde
    MaxSimultaneousOfType = 1

    WeaponSet
        Conditions     = None
        Weapon         = PRIMARY    NormalMeleeHordeRangefinder
    End

    WeaponSet
        Conditions     = WEAPONSET_TOGGLE_1
        Weapon         = PRIMARY    GondorRangerMissileHordeRangefinder
    End

    BuildCost        = MEDIUM_HERO_COST
    BuildTime        = MEDIUM_HERO_BUILDTIME

    ShroudClearingRange = ANGMAR_HILLTROLL_SHROUD_RANGE
    VisionRange         = ANGMAR_HILLTROLL_HORDE_VISION_RANGE

    VisionSide         = 50%
    VisionRear         = 25%

    MaxVisionBonusPercent     = 300%
    VisionBonusTestRadius     = 200
    VisionBonusPercentPerFoot = 1.0%


    CrushableLevel      = 2
    CrusherLevel        = 0
    CommandPoints       = 0

    CommandSet          = TomBillBertCommandSet

    FormationWidth         = 2
    FormationDepth         = 2

    TransportSlotCount    = TRANSPORTSLOTCOUNT_LARGE_HORDE
    KindOf            = SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT INFANTRY HORDE MELEE_HORDE ARMY_SUMMARY LARGE_RECTANGLE_PATHFIND TROLL
    #include "..\..\..\includes\StandardHordeEvaEvents.inc"

    ThreatLevel = WILD_MAURADER_HORDE_THREAT
    ThreatBreakdown WildMauraderHorde_DetailedThreat
        AIKindOf = CAVALRY
    End

    Body = ImmortalBody ModuleTag_ImmortalBody
        MaxHealth = 1
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = FighterHorde
    End

    Behavior = HordeAIUpdate ModuleTag_HordeAIUpdate
        AutoAcquireEnemiesWhenIdle    = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        AILuaEventsList            = InfantryFunctions
        MaxCowerTime            = 5000
        MinCowerTime            = 3000
        AttackPriority            = AttackPriority_Spearman
    End

    Behavior = HordeContain ModuleTag_HordeContain
        ObjectStatusOfContained =
        InitialPayload        = GoblinBillTomBert 3
        PassengerFilter        = NONE +MONSTER
        Slots            = 3
        ShowPips        = No
        ThisFormationIsTheMainFormation = Yes
        MeleeBehavior = Amoeba
        End

        RankInfo        = RankNumber:1 UnitType:GoblinBillTomBert Position:X:10 Y:0
        RankInfo        = RankNumber:2 UnitType:GoblinBillTomBert Position:X:-30 Y:25  Position:X:-30  Y:-25

        RanksToReleaseWhenAttacking = 1 2

        UseSlowHordeMovement     = Yes
        MeleeAttackLeashDistance = 150
    End


    Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
        GravityMult = 1.0
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        AddEmotion            = Terror_Base
        AddEmotion            = Doom_Base
        AddEmotion            = BraceForBeingCrushed_Base
        AddEmotion            = UncontrollableFear_Base


        AddEmotion            = Point_Base
        AddEmotion            = Taunt_Base
         AddEmotion            = CheerIdle_Base
        AddEmotion            = CheerBusy_Base
        AddEmotion            = HeroCheerIdle_Base
        AddEmotion            = HeroCheerBusy_Base
        AddEmotion            = Alert_Base
    End

    #include "..\..\..\includes\CaptureBuilding.inc"

    LocomotorSet
        Locomotor     = NormalMeleeHordeLocomotor
        Condition     = SET_NORMAL
        Speed         = TROLL_SPEED
    End

    Behavior = ProductionUpdate ProductionUpdateModuleTag
        GiveNoXP = Yes
    End

    Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
        SkirmishAIOnly = Yes
        StuffToPickUp = ANY +CRATE -TheDroppedRing
        ScanRange = 200
        ScanIntervalSeconds = 0.5
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_Pillage
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        TriggeredBy               = Upgrade_MiniHordeLvl2
    End

    Behavior = SpecialPowerModule ModuleTag_PillageUpdate
        SpecialPowerTemplate        = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack    = No
        StartsPaused                = Yes
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_PillageAura
        StartsActive     = No
        BonusName        = LurtzPassiveOutlawLeadership
        TriggeredBy      = Upgrade_MiniHordeLvl2
        RefreshDelay     = 2000
        Range            = 250
        AllowSelf        = Yes
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -DOZER
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SpawnKochtopfEnabler
        SpecialPowerTemplate     = SpecialAbilitySkullTotemKing
        TriggeredBy              = Upgrade_MiniHordeLvl4
    End

    Behavior = SpecialPowerModule ModuleTag_SpawnKochtopftarter
        SpecialPowerTemplate     = SpecialAbilitySkullTotemKing
        UpdateModuleStartsAttack = Yes
        StartsPaused             = Yes
        InitiateSound            = TrollVoiceSelect
     End

    Behavior = ActivateModuleSpecialPower ModuleTag_SpawnKochtopfUpdate
        SpecialPowerTemplate     = SpecialAbilitySkullTotemKing
        StartAbilityRange        = 25
        MustFinishAbility        = Yes
        UnpackTime               = 800
        PackTime                 = 1200
        UnpackingVariation       = 1
        TriggerSpecialPower      = ModuleTag_SpawnKochtopfPower2 OBJECTPOS
    End

    Behavior = OCLSpecialPower ModuleTag_SpawnKochtopfPower2
        SpecialPowerTemplate     = SpecialAbilitySkullTotemKing2
        OCL                      = OCL_SpawnKochtopf
        CreateLocation           = CREATE_AT_LOCATION
        StartsPaused             = No
    End



    Behavior = AutoHealBehavior ModuleTag_HearthHeal
        StartsActive              = No
        HealOnlyIfNotInCombat     = Yes
        HealOnlyIfNotUnderAttack  = Yes
        TriggeredBy               = Upgrade_MiniHordeLvl2
        HealingAmount             = 30
        Radius                    = 100
        StartHealingDelay         = 7500
        HealingDelay              = 5000
        UnitHealPulseFX           = FX_SpellHealUnitHealBuff
        NonStackable              = Yes
        RespawnNearbyHordeMembers = Yes
        RespawnFXList             = FX_BannerCarrierSpawnUnit
        RespawnMinimumDelay       = 200
    End








    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate WildMarauderHordeCaptureBuildingAI
        CommandButtonName = Command_CaptureBuilding
        SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
    End

    Geometry            = BOX
    GeometryMajorRadius = 33
    GeometryMinorRadius = 33
    GeometryHeight      = 34
    GeometryIsSmall     = No


    AutoResolveUnitType    = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

     AutoResolveBody = AutoResolve_WildCaveTrollBody

     AutoResolveArmor
         Armor = AutoResolve_WildCaveTrollArmor
     End

     AutoResolveWeapon
         Weapon = AutoResolve_WildCaveTrollWeapon
     End

End




Object WildKochtopf

    Draw = W3DScriptedModelDraw ModuleTag_Draw

        DefaultModelConditionState
            Model           = MUCauldron
            ParticleSysBone = None TaintHCPing HouseColor:Yes
            ParticleSysBone = None GoblinKingTaint
            Shadow =  SHADOW_ALPHA_DECAL_DYNAMIC
            ShadowSizeX = 200
            ShadowSizeY = 200
            ShadowTexture = EXTaint
            ShadowOpacityStart = 0
            ShadowOpacityFadeInTime = 1000
            ShadowOpacityPeak = 175
            ShadowOpacityFadeOutTime = 1000
            ShadowOpacityEnd = 0
            ShadowOverrideLODVisibility = Yes
        End

    End


    DisplayName          = OBJECT:WildKochtopf
    EditorSorting        = MISC_MAN_MADE
    Side                 = Wild
    ShroudClearingRange  = SHROUD_CLEAR_SKULL_TOTEM
    KindOf               = STRUCTURE IMMOBILE IGNORE_FOR_VICTORY
    RadarPriority        = UNIT

    Body                 = ActiveBody ModuleTag_Body
        MaxHealth        = SKULL_TOTEM_HEALTH
    End

    Behavior = DestroyDie ModuleTagDeath_Die
        DeathTypes       = ALL
    End

    Behavior = StealthDetectorUpdate ModuleTag_DetectStealth
        DetectionRate    = SKULL_TOTEM_STEALTH_DETECT_RATE
        DetectionRange   = SKULL_TOTEM_STEALTH_DETECT_RADIUS
    End


    Behavior = PassiveAreaEffectBehavior ModuleTag_SplashOfHealingWater_Ahh
        EffectRadius             = 180
        PingDelay                = 3000
        HealPercentPerSecond     = 2%
        AllowFilter              = ANY +INFANTRY +CAVALRY +MONSTER -MACHINE -IMMOBILE +DOZER
        NonStackable             = Yes
        HealFX                   = FX_SpellHealUnitHealBuff
    End




    Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
        IdleSpawnRate            = 10000
        UnitSpawnFX              = FX_BannerCarrierSpawnUnit


        ReplenishNearbyHorde     = Yes
        ReplenishAllNearbyHordes = Yes
        ScanHordeDistance        = 180
    End

    Geometry             = CYLINDER
    GeometryMajorRadius  = 10.0
    GeometryHeight       = 12.0
    GeometryIsSmall      = No
    BuildCompletion      = PLACED_BY_PLAYER
    GeometryContactPoint = X:0.0    Y:0.0        Z:0
    GeometryContactPoint = X:0.0    Y:0.0        Z:20.0        Swoop

End


