Object AngbandBalrog

    SelectPortrait = HPBalrog
    ButtonImage    = HIAngbandBalrog_Wotr

    DescriptionStrategic  = CONTROLBAR:LW_ToolTip_AngbandBalrog



    Draw = W3DScriptedModelDraw ModuleTag_BodyDraw

    ExtraPublicBone = ZZZPASSENGERBON
    ExtraPublicBone = ZZZWHIPCOIL
    ExtraPublicBone = SWORD

        DefaultModelConditionState
            Model             	    = MUBalrog_SKN
            ParticleSysBone         = SWORD BalrogSwordFlare FollowBone:Yes
            ParticleSysBone         = SWORD BalrogSwordEmbers FollowBone:Yes
            ParticleSysBone         = UPPER BODY BalrogManeFlare FollowBone:Yes
            ParticleSysBone         = MANEBONE BalrogManeEmbers FollowBone:Yes
            ParticleSysBone         = UPPER BODY BalrogManeFire FollowBone:Yes
            ParticleSysBone         = RTWINGBONE BalrogWingSmokeLite FollowBone:Yes
            ParticleSysBone         = LFWINGBONE BalrogWingSmokeLite FollowBone:Yes
        End

        ModelConditionState = HIT_LEVEL_2
            Model             = MUBalLIT_SKN
        End

        ModelConditionState = HERO
            Model             	    = MUBalIGNT_SKN
            ParticleSysBone         = UPPER BODY BalrogManeFlare FollowBone:Yes
            ParticleSysBone         = MANEBONE BalrogManeEmbers FollowBone:Yes
            ParticleSysBone         = UPPER BODY BalrogManeFire FollowBone:Yes
            ParticleSysBone         = RTWINGBONE BalrogWingEmbers FollowBone:Yes
            ParticleSysBone         = LFWINGBONE BalrogWingEmbers FollowBone:Yes
            ParticleSysBone         = SWORD BalrogSwordFlare FollowBone:Yes
            ParticleSysBone         = SWORD BalrogSwordEmbers FollowBone:Yes
            ParticleSysBone         = NONE BalrogIgniteHeatWave FollowBone:No
        End



        IdleAnimationState
            StateName = State_Idle
            Animation = Breathe
                AnimationName = MUBalrog_SKL.MUBalrog_IDLA
                AnimationMode = ONCE
                AnimationBlendTime = 10
                AnimationPriority = 10
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "State_JustBuilt"
                    then CurDrawableSetTransitionAnimState("TRANS_JustBuilt_To_Idle")
                end
                if Prev == "State_AboutToHitGround"
                    then CurDrawableSetTransitionAnimState("TRANS_AboutToHitGround_To_Idle")
                end
            EndScript
        End

        AnimationState            = USER_2
            StateName = State_JustBuilt
            Animation = Borning
                AnimationName = MUBalrog_SKL.MUBalrog_RORA
                AnimationMode = ONCE
            End
        ParticleSysBone = None BalrogSummonLightShafts FollowBone:No
        ParticleSysBone = None BalrogSummonCracks FollowBone:No
        ParticleSysBone = None  BalrogSummonChunks FollowBone:No
        ParticleSysBone = None BalrogSummonChunksSmall FollowBone:No
        ParticleSysBone = None BalrogSummonHeatWave FollowBone:No
        End

        AnimationState                    =    DYING DEATH_1
            Animation                    =    Dying
                AnimationName            =    MUBalrog_SKL.MUBalrog_DIEA
                AnimationMode            =    ONCE
            End
            ParticleSysBone = None BalrogFallDust FollowBone:No
        End

        AnimationState                    =    DYING DEATH_2
            Animation                    =    FadingOut
                AnimationName            =    MUBalrog_SKL.MUBalrog_RORC
                AnimationMode            =    ONCE
            End
        End

        AnimationState                    =    HIT_LEVEL_2
            Animation                    =    Owowowowowowowow
                AnimationName            =    MUBalrog_SKL.MUBalrog_HITB
                AnimationMode            =    ONCE
            End
        End

        AnimationState                    =    EATING
            Animation                    =    DoingHorribleThingToGrabbedGuy
                AnimationName            =    MUBalrog_SKL.MUBalrog_BRNA
                AnimationMode            =    ONCE
                AnimationBlendTime        =    0
            End

                ParticleSysBone = ZZZPassengerBon balrogHandSqueezeFlames FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon balrogHandSqueezeFlames2 FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon balrogHandSqueezeFlamesFinal FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon BalrogHandSqueezeFlash FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon BalrogHandSmoke FollowBone:Yes
                ParticleSysBone = RING_2_L balrogHandAsh FollowBone:Yes
                ParticleSysBone = RING_2_L balrogHandAshSmall FollowBone:Yes
        End

        AnimationState                    =    UNPACKING PACKING_TYPE_3
            Animation                    =    GrabbingToTouching
                AnimationName            =    MUBalrog_SKL.MUBalrog_GRBA
                AnimationMode            =    ONCE
                AnimationBlendTime        =    0
            End
        End

        AnimationState                    =    PACKING PACKING_TYPE_3
            Animation                    =    GrabbingFollowThrough
                AnimationName            =    MUBalrog_SKL.MUBalrog_GRBC
                AnimationMode            =    ONCE
                AnimationBlendTime        =    0
            End
        End

        AnimationState            = JUST_BUILT
            StateName = State_JustBuilt
            Animation = Borning
                AnimationName = MUBalrog_SKL.MUBalrog_RORA
                AnimationMode = ONCE
            End
        ParticleSysBone = None BalrogSummonLightShafts FollowBone:No
        ParticleSysBone = None BalrogSummonCracks FollowBone:No
        ParticleSysBone = None  BalrogSummonChunks FollowBone:No
        ParticleSysBone = None BalrogSummonChunksSmall FollowBone:No
        ParticleSysBone = None BalrogSummonHeatWave FollowBone:No
        End


        TransitionState = TRANS_JustBuilt_To_Idle
            Animation = BeingSummoned
                AnimationName = MUBalrog_SKL.MUBalrog_RORA
                AnimationMode = ONCE
            End
        End

        AnimationState = FIRING_OR_PREATTACK_B
            Animation = CrackThatWhip
                AnimationName = MUBalrog_SKL.MUBalrog_WIPA
                AnimationMode = ONCE
            End
                ParticleSysBone = RTHANDBONE BalrogWhip2swordEfx FollowBone:Yes
        End

        AnimationState            = SPECIAL_POWER_1
            Animation            = RoaringFear
                AnimationName    = MUBalrog_SKL.MUBalrog_RORB
                AnimationMode   = ONCE
            End
                ParticleSysBone = BAT_JAW BalrogScreamEffect FollowBone:Yes
                FXEvent            = Frame:20 Name:FX_BalrogScreamEfx
                ParticleSysBone = BAT_JAW balrogPixelDisplScrm FollowBone:Yes
                ParticleSysBone = BAT_JAW balrogScrmEmbers FollowBone:Yes
        End

        AnimationState            = SPECIAL_WEAPON_ONE
            Animation            = BreathingFireAnimation
                AnimationName    = MUBalrog_SKL.MUBalrog_FIRA
                AnimationMode   = ONCE
            End

                ParticleSysBone = BAT_JAW balrogFireBreath FollowBone:Yes
                ParticleSysBone = BAT_JAW balrogBreathEmbers FollowBone:Yes
                ParticleSysBone = BAT_JAW balrogBreathSmoke FollowBone:Yes
                ParticleSysBone = BAT_JAW balrogBreathProxy FollowBone:Yes
            End

        AnimationState            = SPECIAL_WEAPON_TWO UNPACKING
            StateName            = State_LeapStart
            Animation            = GettingReadyToLeap
                AnimationName    = MUBalrog_SKL.MUBalrog_JMP1
                AnimationMode   = ONCE
            End
        End

        AnimationState            = SPECIAL_WEAPON_TWO PACKING
            Animation            = FirstWingBeatGoingUp
                AnimationName    = MUBalrog_SKL.MUBalrog_JMP2
                AnimationMode   = ONCE
            End
        End

        AnimationState            = ABOUT_TO_HIT
            StateName            = State_AboutToHitGround
            Animation            = StartingToLandToTouchingGround
                AnimationName    = MUBalrog_SKL.MUBalrog_LND1
                AnimationMode   = ONCE
            End
        End

        AnimationState            = THROWN_PROJECTILE
            Animation            = HurtlingThroughAir
                AnimationName    = MUBalrog_SKL.MUBalrog_FLYA
                AnimationMode   = LOOP
                AnimationBlendTime = 10
            End
        End

        TransitionState = TRANS_AboutToHitGround_To_Idle
            Animation = SplashAtEndOfJump
                AnimationName = MUBalrog_SKL.MUBalrog_LND2
                AnimationMode = ONCE
                AnimationBlendTime = 0
            End
        End

        AnimationState            = TURN_RIGHT
            Animation            = TurningRight
                AnimationName    = MUBalrog_SKL.MUBalrog_TRNA
                AnimationMode   = LOOP
                AnimationBlendTime = 10
            End
        End

        AnimationState            = TURN_LEFT
            Animation            = TurningLeft
                AnimationName    = MUBalrog_SKL.MUBalrog_TRNB
                AnimationMode   = LOOP
                AnimationBlendTime = 10
            End
        End

        AnimationState            = MOVING
            Animation            = Running
                AnimationName    = MUBalrog_SKL.MUBalrog_WLKA
                AnimationMode   = LOOP
                AnimationBlendTime = 10
            End


            FXEvent    = Frame:20 FireWhenSkipped Name:FX_BalrogRightFootStep
            FXEvent    = Frame:44 FireWhenSkipped Name:FX_BalrogLeftFootStep
        End

        AnimationState            = WEAPONSET_HERO_MODE UNPACKING PACKING_TYPE_1
            Animation = StartIgniteRoar
                AnimationName = MUBalrog_SKL.MUBalrog_IGNTA
                AnimationMode = ONCE
            End
        End

        AnimationState            = HERO PACKING PACKING_TYPE_1
            Animation = FinishIgniteRoar
                AnimationName = MUBalrog_SKL.MUBalrog_IGNTB
                AnimationMode = ONCE
            End

            EnteringStateFX = FX_BalrogIgniteStart
        End

        AnimationState            = FIRING_OR_PREATTACK_A
            Animation            = Swipe
                AnimationName    = MUBalrog_SKL.MUBalrog_ATKB
                AnimationMode    = ONCE
                UseWeaponTiming    = Yes
            End
        End

        AnimationState            = FIRING_OR_PREATTACK_C
            Animation            = Chop
                AnimationName    = MUBalrog_SKL.MUBalrog_ATKA
                AnimationMode    = ONCE
                UseWeaponTiming    = Yes
            End
            ParticleSysBone        = SWORDBONE BalrogSword FollowBone:Yes
        End
    End



    Draw = W3DScriptedModelDraw ModuleTag_Armor
        OkToChangeModelColor  = Yes
        UseStandardModelNames = Yes
        StaticModelLODMode = Yes

        DefaultModelConditionState
            Model = aubalrog_arm
        End



        IdleAnimationState
            StateName = State_Idle
            Animation = Breathe
                AnimationName = MUBalrog_SKL.MUBalrog_IDLA
                AnimationMode = ONCE
                AnimationBlendTime = 10
                AnimationPriority = 10
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "State_JustBuilt"
                    then CurDrawableSetTransitionAnimState("TRANS_JustBuilt_To_Idle")
                end
                if Prev == "State_AboutToHitGround"
                    then CurDrawableSetTransitionAnimState("TRANS_AboutToHitGround_To_Idle")
                end
            EndScript
        End

        AnimationState            = USER_2
            StateName = State_JustBuilt
            Animation = Borning
                AnimationName = MUBalrog_SKL.MUBalrog_RORA
                AnimationMode = ONCE
            End
        ParticleSysBone = None BalrogSummonLightShafts FollowBone:No
        ParticleSysBone = None BalrogSummonCracks FollowBone:No
        ParticleSysBone = None  BalrogSummonChunks FollowBone:No
        ParticleSysBone = None BalrogSummonChunksSmall FollowBone:No
        ParticleSysBone = None BalrogSummonHeatWave FollowBone:No
        End

        AnimationState                    =    DYING DEATH_1
            Animation                    =    Dying
                AnimationName            =    MUBalrog_SKL.MUBalrog_DIEA
                AnimationMode            =    ONCE
            End
            ParticleSysBone = None BalrogFallDust FollowBone:No
        End

        AnimationState                    =    DYING DEATH_2
            Animation                    =    FadingOut
                AnimationName            =    MUBalrog_SKL.MUBalrog_RORC
                AnimationMode            =    ONCE
            End
        End

        AnimationState                    =    HIT_LEVEL_2
            Animation                    =    Owowowowowowowow
                AnimationName            =    MUBalrog_SKL.MUBalrog_HITB
                AnimationMode            =    ONCE
            End
        End

        AnimationState                    =    EATING
            Animation                    =    DoingHorribleThingToGrabbedGuy
                AnimationName            =    MUBalrog_SKL.MUBalrog_BRNA
                AnimationMode            =    ONCE
                AnimationBlendTime        =    0
            End

                ParticleSysBone = ZZZPassengerBon balrogHandSqueezeFlames FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon balrogHandSqueezeFlames2 FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon balrogHandSqueezeFlamesFinal FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon BalrogHandSqueezeFlash FollowBone:Yes
                ParticleSysBone = ZZZPassengerBon BalrogHandSmoke FollowBone:Yes
                ParticleSysBone = RING_2_L balrogHandAsh FollowBone:Yes
                ParticleSysBone = RING_2_L balrogHandAshSmall FollowBone:Yes
        End

        AnimationState                    =    UNPACKING PACKING_TYPE_3
            Animation                    =    GrabbingToTouching
                AnimationName            =    MUBalrog_SKL.MUBalrog_GRBA
                AnimationMode            =    ONCE
                AnimationBlendTime        =    0
            End
        End

        AnimationState                    =    PACKING PACKING_TYPE_3
            Animation                    =    GrabbingFollowThrough
                AnimationName            =    MUBalrog_SKL.MUBalrog_GRBC
                AnimationMode            =    ONCE
                AnimationBlendTime        =    0
            End
        End

        AnimationState            = JUST_BUILT
            StateName = State_JustBuilt
            Animation = Borning
                AnimationName = MUBalrog_SKL.MUBalrog_RORA
                AnimationMode = ONCE
            End
        ParticleSysBone = None BalrogSummonLightShafts FollowBone:No
        ParticleSysBone = None BalrogSummonCracks FollowBone:No
        ParticleSysBone = None  BalrogSummonChunks FollowBone:No
        ParticleSysBone = None BalrogSummonChunksSmall FollowBone:No
        ParticleSysBone = None BalrogSummonHeatWave FollowBone:No
        End


        TransitionState = TRANS_JustBuilt_To_Idle
            Animation = BeingSummoned
                AnimationName = MUBalrog_SKL.MUBalrog_RORA
                AnimationMode = ONCE
            End
        End

        AnimationState = FIRING_OR_PREATTACK_B
            Animation = CrackThatWhip
                AnimationName = MUBalrog_SKL.MUBalrog_WIPA
                AnimationMode = ONCE
            End
                ParticleSysBone = RTHANDBONE BalrogWhip2swordEfx FollowBone:Yes
        End

        AnimationState            = SPECIAL_POWER_1
            Animation            = RoaringFear
                AnimationName    = MUBalrog_SKL.MUBalrog_RORB
                AnimationMode   = ONCE
            End
                ParticleSysBone = BAT_JAW BalrogScreamEffect FollowBone:Yes
                FXEvent            = Frame:20 Name:FX_BalrogScreamEfx
                ParticleSysBone = BAT_JAW balrogPixelDisplScrm FollowBone:Yes
                ParticleSysBone = BAT_JAW balrogScrmEmbers FollowBone:Yes
        End

        AnimationState            = SPECIAL_WEAPON_ONE
            Animation            = BreathingFireAnimation
                AnimationName    = MUBalrog_SKL.MUBalrog_FIRA
                AnimationMode   = ONCE
            End
                ParticleSysBone = BAT_JAW balrogFireBreath FollowBone:Yes
                ParticleSysBone = BAT_JAW balrogBreathEmbers FollowBone:Yes
                ParticleSysBone = BAT_JAW balrogBreathSmoke FollowBone:Yes
                ParticleSysBone = BAT_JAW balrogBreathProxy FollowBone:Yes
            End

        AnimationState            = SPECIAL_WEAPON_TWO UNPACKING
            StateName            = State_LeapStart
            Animation            = GettingReadyToLeap
                AnimationName    = MUBalrog_SKL.MUBalrog_JMP1
                AnimationMode   = ONCE
            End
        End

        AnimationState            = SPECIAL_WEAPON_TWO PACKING
            Animation            = FirstWingBeatGoingUp
                AnimationName    = MUBalrog_SKL.MUBalrog_JMP2
                AnimationMode   = ONCE
            End
        End

        AnimationState            = ABOUT_TO_HIT
            StateName            = State_AboutToHitGround
            Animation            = StartingToLandToTouchingGround
                AnimationName    = MUBalrog_SKL.MUBalrog_LND1
                AnimationMode   = ONCE
            End
        End

        AnimationState            = THROWN_PROJECTILE
            Animation            = HurtlingThroughAir
                AnimationName    = MUBalrog_SKL.MUBalrog_FLYA
                AnimationMode   = LOOP
                AnimationBlendTime = 10
            End
        End

        TransitionState = TRANS_AboutToHitGround_To_Idle
            Animation = SplashAtEndOfJump
                AnimationName = MUBalrog_SKL.MUBalrog_LND2
                AnimationMode = ONCE
                AnimationBlendTime = 0
            End
        End

        AnimationState            = TURN_RIGHT
            Animation            = TurningRight
                AnimationName    = MUBalrog_SKL.MUBalrog_TRNA
                AnimationMode   = LOOP
                AnimationBlendTime = 10
            End
        End

        AnimationState            = TURN_LEFT
            Animation            = TurningLeft
                AnimationName    = MUBalrog_SKL.MUBalrog_TRNB
                AnimationMode   = LOOP
                AnimationBlendTime = 10
            End
        End

        AnimationState            = MOVING
            Animation            = Running
                AnimationName    = MUBalrog_SKL.MUBalrog_WLKA
                AnimationMode   = LOOP
                AnimationBlendTime = 10
            End


            FXEvent    = Frame:20 FireWhenSkipped Name:FX_BalrogRightFootStep
            FXEvent    = Frame:44 FireWhenSkipped Name:FX_BalrogLeftFootStep
        End

        AnimationState            = WEAPONSET_HERO_MODE UNPACKING PACKING_TYPE_1
            Animation = StartIgniteRoar
                AnimationName = MUBalrog_SKL.MUBalrog_IGNTA
                AnimationMode = ONCE
            End
        End

        AnimationState            = HERO PACKING PACKING_TYPE_1
            Animation = FinishIgniteRoar
                AnimationName = MUBalrog_SKL.MUBalrog_IGNTB
                AnimationMode = ONCE
            End

            EnteringStateFX = FX_BalrogIgniteStart
        End

        AnimationState            = FIRING_OR_PREATTACK_A
            Animation            = Swipe
                AnimationName    = MUBalrog_SKL.MUBalrog_ATKB
                AnimationMode    = ONCE
                UseWeaponTiming    = Yes
            End
        End

        AnimationState            = FIRING_OR_PREATTACK_C
            Animation            = Chop
                AnimationName    = MUBalrog_SKL.MUBalrog_ATKA
                AnimationMode    = ONCE
                UseWeaponTiming    = Yes
            End
            ParticleSysBone        = SWORDBONE BalrogSword FollowBone:Yes
        End
    End



    Draw = W3DScriptedModelDraw ModuleTag_WhipDraw
        GlowEnabled = Yes
        GlowEmissive = Yes
        ShadowForceDisable = Yes

        DefaultModelConditionState
            Model = None
        End

        ModelConditionState = FIRING_OR_PREATTACK_B
            Model = MUBalsWhip_SKN
        End


        IdleAnimationState
        End

        AnimationState = FIRING_OR_PREATTACK_B
            Animation = CrackThatWhip
                AnimationName = MUBalsWhip_SKL.MUBalsWhip_WIPA
                AnimationMode = ONCE
                AnimationBlendTime = 0
            End
        End
            WadingParticleSys = BalrogRiverSteam
    End

    #include "..\..\..\includes\StunDrawModuleLarge.inc"







    Side                              = Wild
    EditorSorting                     = UNIT
    ShockwaveResistance               = 500
    ThreatLevel                       = 1500
    ThingClass                        = CHARACTER_UNIT
    TransportSlotCount                = TRANSPORTSLOTCOUNT_NOT_TRANSPORTABLE
    BountyValue                       = 500
    MaxSimultaneousOfType             = 2

    BuildCost                         = 1800
    BuildTime                         = HEROIC_BUILDTIME

    VisionRange                       = VISION_BALROG
    ShroudClearingRange               = SHROUD_CLEAR_BALROG

    DisplayName                       = OBJECT:AngbandBalrog

    CanPathThroughGates               = No
    CrusherLevel                      = 3
    CrushWeapon                       = BalrogCrush
    DeadCollideSize                   = LARGE
    IsTrainable                       = Yes

    CommandSet                        = AngbandBalrogCommandSet
    CommandPoints                     = 50





    WeaponSet
        Conditions                    = None
        Weapon                        = PRIMARY    AngbandBalrogSwordSwipe
        Weapon                        = SECONDARY  AngbandBalrogWhip
        Weapon                        = TERTIARY   AngbandBalrogSwordChop
        AutoChooseSources             = SECONDARY  None
        OnlyAgainst                   = TERTIARY   STRUCTURE BIG_MONSTER
    End





    ArmorSet
        Conditions                    = None
        Armor                         = AngbandBalrogArmor
        DamageFX                      = NormalDamageFX
    End

    ArmorSet
        Conditions                    = PLAYER_UPGRADE
        Armor                         = AngbandBalrogArmorUpgrade
        DamageFX                      = NormalDamageFX
    End





    AutoResolveUnitType               = AutoResolveUnit_Monster
    AutoResolveCombatChain            = AutoResolve_MonsterCombatChain

    AutoResolveBody                   = AutoResolve_EliteLegndaryMonsterBody

    AutoResolveArmor
        Armor                         = AutoResolve_EliteLegndaryMonsterArmor
    End

    AutoResolveWeapon
        Weapon                        = AutoResolve_EliteLegndaryMonsterWeapon
    End





    VoiceCreated                      = BalrogSummonRoar
    VoiceFullyCreated                 = BalrogSummonRoar
    VoiceAttack                       = BalrogVoiceAttack
    VoiceAttackCharge                 = BalrogVoiceAttack
    VoiceAttackMachine                = BalrogVoiceAttack
    VoiceAttackStructure              = BalrogVoiceAttack
    VoiceGuard                        = BalrogVoiceMove
    VoiceMove                         = BalrogVoiceMove
    VoiceSelect                       = BalrogVoiceSelect
    VoiceSelectBattle                 = BalrogVoiceSelect

    SoundAmbient                      = BalrogAmbientLoop
    SoundImpact                       = ImpactHorse


    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: BalrogFootstep               Animation: MUBalrog_SKL.MUBalrog_WLKA Frames: 42 17
        AnimationSound = Sound: BalrogFootstep               Animation: MUBalrog_SKL.MUBalrog_TRNA Frames: 21 52
        AnimationSound = Sound: BalrogFootstep               Animation: MUBalrog_SKL.MUBalrog_TRNB Frames: 21 52

        AnimationSound = Sound: BalrogWhipPart1              Animation: MUBalrog_SKL.MUBalrog_WIPA Frames: 1
        AnimationSound = Sound: BalrogWhipPart2              Animation: MUBalrog_SKL.MUBalrog_WIPA Frames: 21
        AnimationSound = Sound: ImpactWhipCrack              Animation: MUBalrog_SKL.MUBalrog_WIPA Frames: 34

        AnimationSound = Sound: BalrogSwordSwipe             Animation: MUBalrog_SKL.MUBalrog_ATKB Frames: 32
        AnimationSound = Sound: BalrogSwordSwipe             Animation: MUBalrog_SKL.MUBalrog_ATKA Frames: 32
        AnimationSound = Sound: ImpactBalrogAttackGeneric    Animation: MUBalrog_SKL.MUBalrog_ATKA Frames: 41
        AnimationSound = Sound: ImpactBalrogAttackGeneric    Animation: MUBalrog_SKL.MUBalrog_ATKB Frames: 40
        AnimationSound = Sound: ImpactBalrogAttackGeneric    Animation: MUBalrog_SKL.MUBalrog_ATKC Frames: 27 53 88

        AnimationSound = Sound: BalrogJump_Part1             Animation: MUBalrog_SKL.MUBalrog_JMP1 Frames: 0
        AnimationSound = Sound: BalrogJump_Part2             Animation: MUBalrog_SKL.MUBalrog_JMP1 Frames: 41
        AnimationSound = Sound: BalrogWingFlaps              Animation: MUBalrog_SKL.MUBalrog_FLYA Frames: 9
        AnimationSound = Sound: BalrogLand                   Animation: MUBalrog_SKL.MUBalrog_LND1 Frames: 0
        AnimationSound = Sound: BalrogWingFlaps              Animation: MUBalrog_SKL.MUBalrog_JMP2 Frames: 0
        AnimationSound = Sound: BalrogLandSwordHit           Animation: MUBalrog_SKL.MUBalrog_LND2 Frames: 6
        AnimationSound = Sound: BalrogIdleB_Part3            Animation: MUBalrog_SKL.MUBalrog_LND2 Frames: 27

        AnimationSound = Sound: BalrogBreathFireExhale       Animation: MUBalrog_SKL.MUBalrog_FIRA Frames: 31
        AnimationSound = Sound: BalrogBreathFireInhale       Animation: MUBalrog_SKL.MUBalrog_FIRA Frames: 0

        AnimationSound = Sound: BalrogRoar                   Animation: MUBalrog_SKL.MUBalrog_RORB Frames: 25
        AnimationSound = Sound: BalrogVanquishedRoar         Animation: MUBalrog_SKL.MUBalrog_RORC Frames: 21
        AnimationSound = Sound: BalrogVanquished             Animation: MUBalrog_SKL.MUBalrog_RORC Frames: 50

        AnimationSound = Sound: BalrogInjuredB_Part1         Animation: MUBalrog_SKL.MUBalrog_HITB Frames: 0
        AnimationSound = Sound: BalrogInjuredB_Part2         Animation: MUBalrog_SKL.MUBalrog_HITB Frames: 70

        AnimationSound = Sound: BalrogChuckle                Animation: MUBalrog_SKL.MUBalrog_IDLA Frames: 1
        AnimationSound = Sound: BalrogContentVox             Animation: MUBalrog_SKL.MUBalrog_IDLA Frames: 0
        AnimationSound = Sound: BalrogIdleB_Part1            Animation: MUBalrog_SKL.MUBalrog_IDLB Frames: 0
        AnimationSound = Sound: BalrogIdleB_Part2            Animation: MUBalrog_SKL.MUBalrog_IDLB Frames: 37
        AnimationSound = Sound: BalrogIdleB_Part3            Animation: MUBalrog_SKL.MUBalrog_IDLB Frames: 95
        AnimationSound = Sound: BalrogIdleC_Part2            Animation: MUBalrog_SKL.MUBalrog_IDLC Frames: 29
        AnimationSound = Sound: BalrogIdleC_Part3            Animation: MUBalrog_SKL.MUBalrog_IDLC Frames: 60
        AnimationSound = Sound: BalrogFootstep               Animation: MUBalrog_SKL.MUBalrog_IDLC Frames: 61

        AnimationSound = Sound: BalrogDieVox                 Animation: MUBalrog_SKL.MUBalrog_DIEA Frames: 13
        AnimationSound = Sound: BalrogBodyfall1              Animation: MUBalrog_SKL.MUBalrog_DIEA Frames: 56
        AnimationSound = Sound: BalrogBodyfall2              Animation: MUBalrog_SKL.MUBalrog_DIEA Frames: 57
        AnimationSound = Sound: OliphantFall                 Animation: MUBalrog_SKL.MUBalrog_DIEA Frames: 21
        AnimationSound = Sound: BalrogLandSwordHit           Animation: MUBalrog_SKL.MUBalrog_DIEA Frames: 54

        AnimationSound = Sound: BalrogIgnite                 Animation: MUBalrog_SKL.MUBalrog_IGNTA Frames: 51
    End







    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS ARMY_SUMMARY MONSTER SCORE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT NO_FREEWILL_ENTER PATH_THROUGH_INFANTRY SCARY BIG_MONSTER CAN_ATTACK_WALLS SCARY

    ThreatBreakdown MordorBalrog_DetailedThreat
        AIKindOf             = SIEGEWEAPON
    End

    Body = ActiveBody ModuleTag_02
        CheerRadius                  = EMOTION_CHEER_RADIUS
        MaxHealth                    = 7000
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
       StanceTemplate = FighterHorde
    End

    Behavior = AIUpdateInterface ModuleTag_03
       AutoAcquireEnemiesWhenIdle       = Yes ATTACK_BUILDINGS
       MoodAttackCheckRate              = 500
       AILuaEventsList                  = BalrogFunctions
    End

    Behavior = AutoHealBehavior ModuleTag_BalrogHealing
        StartsActive                    = Yes
        HealingAmount                   = BALROG_HEAL_AMOUNT
        HealingDelay                    = 1000
        StartHealingDelay               = MONSTER_HEAL_DELAY
        HealOnlyIfNotInCombat           = Yes
    End

    LocomotorSet
        Locomotor = BalrogLocomotor
        Condition = SET_NORMAL
        Speed     = 35
    End

    Behavior = BezierProjectileBehavior ModuleTag_Projectile
        FirstHeight                     = 104
        SecondHeight                    = 52
        FirstPercentIndent              = 20%
        SecondPercentIndent             = 70%
        TumbleRandomly                  = Yes
        CrushStyle                      = Yes
        BounceCount                     = 0
        FinalStuckTime                  = 1766
        GroundHitFX                     = FX_BalrogJumpHitGround
        GroundHitWeapon                 = RohanGimliLeapWarhead
        PreLandingStateTime             = 300
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult              = 1.0
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes               = ALL
        DestructionDelay         = 2500
        FX                       = FINAL FX_BalrogFinalDeath
        DeathFlags               = DEATH_1
    End

    Behavior = CreateObjectDie ModuleTag_CrushUnitsOnDeath
        CreationList             = OCL_BalrogDie
    End

    Behavior = RadiateFearUpdate ModuleTag_GoldenArrowDaylightUpdate
        EmotionPulseRadius          = 200
        EmotionPulseInterval        = 2500
        GenerateFear                = Yes
        InitiallyActive             = Yes
        VictimFilter                = ALL ENEMIES
    End

    Behavior = AttributeModifierUpgrade ModuleTag_AMU
        TriggeredBy                = Upgrade_AllFactionUpgrade
        AttributeModifier          = FearlessForever
    End

    Behavior = GrantUpgradeCreate ModuleTag_BuildHackUpgrade
       UpgradeToGrant                 = Upgrade_TestBuilding
       GiveOnBuildComplete            = Yes
    End

    Behavior = ModelConditionUpgrade ModuleTag_BuildHackUserFlag
       TriggeredBy                    = Upgrade_TestBuilding
       RequiresAllTriggers            = Yes
       AddTempConditionFlag           = ModelConditionState:USER_2
       TempConditionTime              = 4.0
    End


    Behavior = LevelUpUpgrade ModuleTag_BasicTraining
        TriggeredBy               = Upgrade_Level_1
        LevelsToGain              = 1
        LevelCap                  = 10
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining02
        TriggeredBy               = Upgrade_AngbandBalrogPeitsche
        LevelsToGain              = 2
        LevelCap                  = 10
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining03
        TriggeredBy               = Upgrade_AngbandBalrogSchreien
        LevelsToGain              = 2
        LevelCap                  = 10
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining04
        TriggeredBy               = Upgrade_AngbandBalrogFlugel
        LevelsToGain              = 2
        LevelCap                  = 10
    End

    Behavior = LevelUpUpgrade ModuleTag_BasicTraining05
        TriggeredBy               = Upgrade_AngbandBalrogVerbrennen
        LevelsToGain              = 2
        LevelCap                  = 10
    End

    Behavior = SubObjectsUpgrade ModuleTag_AlleTeileVerstecken
         TriggeredBy              = Upgrade_Level_1
         HideSubObjects           = BALROGFIRENORMA SWORDFIRE
    End

    Behavior = SubObjectsUpgrade ModuleTag_NeueTextur
        TriggeredBy               = Upgrade_Level_2
        UpgradeTexture            = mubalrog.tga 0 mubalrog_01.tga
    End

    Behavior = SubObjectsUpgrade ModuleTag_NeueTextur02
        TriggeredBy               = Upgrade_Level_4
        UpgradeTexture            = mubalrog.tga 0 mubalrog_02.tga
    End

    Behavior = SubObjectsUpgrade ModuleTag_NeueTextur03
        TriggeredBy               = Upgrade_Level_6
        UpgradeTexture            = mubalrog.tga 0 mubalrog_03.tga
    End

    Behavior = SubObjectsUpgrade ModuleTag_NeueTextur04
        TriggeredBy               = Upgrade_Level_8
        UpgradeTexture            = mubalrog.tga 0 mubalrog_04.tga
    End

    Behavior = SubObjectsUpgrade ModuleTag_Feuer
        TriggeredBy                = Upgrade_Level_10
        ShowSubObjects             = BALROGFIRENORMA SWORDFIRE
    End

    Behavior = ModelConditionUpgrade ModuleTag_Feuer02
        TriggeredBy                = Upgrade_Level_10
        AddConditionFlags          = USER_3
    End











    Behavior = SpecialPowerModule ModuleTag_BlackRiderDreadVisageUpdate
       SpecialPowerTemplate                = SpecialAbilityAngbandBalrogLeadership
       UpdateModuleStartsAttack            = Yes
       StartsPaused                        = No
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisage
       StartsActive                        = Yes
       BonusName                           = AngbandBalrogLeadershipBonus
       RefreshDelay                        = 2000
       Range                               = 250
       TargetEnemy                         = Yes
       AntiCategory                        = LEADERSHIP BUFF
       ObjectFilter                        = ANY +INFANTRY +CAVALRY +HERO +HORDE -STRUCTURE -BASE_FOUNDATION
    End





    Behavior = SpecialPowerModule ModuleTag_IgniteStarter
        SpecialPowerTemplate               = SpecialAbilityHeroMode
        UpdateModuleStartsAttack           = Yes
        StartsPaused                       = No
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate
        SpecialPowerTemplate               = SpecialAbilityHeroMode
        UnpackingVariation                 = 1
        UnpackTime                         = 1800
        PackTime                           = 1600
        AwardXPForTriggering               = 0
        HeroAttributeModifier              = BalrogIgniteState
        HeroEffectDuration                 = 30000
    End

    Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag
        FireWeaponNugget
            WeaponName                     = MordorBalrogHeroEffect
            FireDelay                      = 0
            OneShot                        = No
        End
        HeroModeTrigger                    = Yes
    End

    Behavior = AutoAbilityBehavior ModuleTag_BladeOfPurityAutoAbility
	SpecialAbility			   = SpecialAbilityHeroMode
	MaxScanRange			   = 200
	Query				   = 1 ALL ENEMIES -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL
    End





     Behavior = SpecialPowerModule ModuleTag_FireWhipStarter
	 SpecialPowerTemplate		= SpecialAbilityFireWhip
	 UpdateModuleStartsAttack	= Yes
     End

     Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_SpecialAbilityFireWhipUpdate
	 SpecialPowerTemplate   	= SpecialAbilityFireWhip
	 WhichSpecialWeapon		= 3
	 SkipContinue			= Yes
	 UnpackTime             	= 1400
	 PackTime			= 1600
	 AwardXPForTriggering    	= 0
	 StartAbilityRange		= 240.0
	 MustFinishAbility		= Yes
	 SpecialWeapon			= MordorBalrogWhip
     End

     Behavior = AutoAbilityBehavior ModuleTag_SmiteAutoAbility
	 SpecialAbility			= SpecialAbilityFireWhip
	 MaxScanRange			= 240
	 Query				= 1 ANY ENEMIES +HERO
	 Query				= 1 ANY ENEMIES +STRUCTURE -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL -FS_BASE_DEFENSE
     End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ScreamEnabler
        SpecialPowerTemplate               = SpecialAbilityBalrogScream
        TriggeredBy                        = Upgrade_AngbandBalrogSchreien Upgrade_Level_6
	RequiresAllTriggers		   = No
    End

    Behavior = SpecialPowerModule ModuleTag_ScreamStarter
        SpecialPowerTemplate               = SpecialAbilityBalrogScream
        UpdateModuleStartsAttack           = Yes
        StartsPaused                       = Yes
    End

    Behavior = ModelConditionSpecialAbilityUpdate ModuleTag_ScreamUpdate
        SpecialPowerTemplate               = SpecialAbilityBalrogScream
        UnpackTime                         = 1500
        PreparationTime                    = 1
        PackTime                           = 1800
        AwardXPForTriggering               = 0
        WhichSpecialPower                  = 1
    End

    Behavior = AutoAbilityBehavior ModuleTag_ScreechAutoAbility
	SpecialAbility			= SpecialAbilityBalrogScream
	MaxScanRange			= 150
	Query				= 40 ALL ENEMIES -STRUCTURE -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL -FS_BASE_DEFENSE
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_LeapEnabler
        SpecialPowerTemplate               = SpecialAbilityBalrogWings
        TriggeredBy                        = Upgrade_AngbandBalrogFlugel Upgrade_Level_8
	RequiresAllTriggers		   = No
    End

    Behavior = SpecialPowerModule ModuleTag_LeapStarter
        SpecialPowerTemplate               = SpecialAbilityBalrogWings
        UpdateModuleStartsAttack           = Yes
        StartsPaused                       = Yes
        InitiateSound                      = BalrogSpecialPowerRoar
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_LeapUpdate
        SpecialPowerTemplate               = SpecialAbilityBalrogWings
        UnpackTime                         = 1733
        PackTime                           = 1160
        AwardXPForTriggering               = 0
        StartAbilityRange                  = 300.0
        ApproachRequiresLOS                = No
        SpecialWeapon                      = MordorBalrogLeap
        BusyForDuration                    = 4000
        WhichSpecialWeapon                 = 2
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BreathEnabler
        SpecialPowerTemplate               = SpecialAbilityBalrogBreath
        TriggeredBy                        = Upgrade_AngbandBalrogVerbrennen Upgrade_Level_10
	RequiresAllTriggers		   = No
    End

    Behavior = SpecialPowerModule ModuleTag_BreathStarter
        SpecialPowerTemplate               = SpecialAbilityBalrogBreath
        UpdateModuleStartsAttack           = Yes
        StartsPaused                       = Yes
        InitiateSound                      = BalrogSpecialPowerRoar
        SetModelCondition		   = ModelConditionState:USER_6
	SetModelConditionTime		   = 3.0
	DisableDuringAnimDuration	   = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_BreathUpdate
        SpecialPowerTemplate               = SpecialAbilityBalrogBreath
        UnpackTime                         = 1300
        PackTime                           = 3700
        AwardXPForTriggering               = 0
        StartAbilityRange                  = 40.0
        SpecialWeapon                      = AngbandBalrogBreath
        WhichSpecialWeapon                 = 1
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FeuerpeitscheBonusUnpause
        SpecialPowerTemplate               = SpecialAbilityBalrogFeuerpeitscheBonus
        TriggeredBy                        = Upgrade_AngbandBalrogPeitsche Upgrade_Level_4
	RequiresAllTriggers		   = No
    End

    Behavior = SpecialPowerModule ModuleTag_FeuerpeitscheBonusPower
        SpecialPowerTemplate               = SpecialAbilityBalrogFeuerpeitscheBonus
        UpdateModuleStartsAttack           = No
        StartsPaused                       = Yes
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_FeuerpeitscheBonusUpdate
        StartsActive                       = No
        BonusName                          = AngbandBalrogFeuerpeitscheBonus
        TriggeredBy                        = Upgrade_AngbandBalrogPeitsche Upgrade_Level_4
        RefreshDelay                       = 2000
        Range                              = 1
        AllowSelf                          = Yes
        ObjectFilter                       = NONE +AngbandBalrog
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SchreienBonusUnpause
        SpecialPowerTemplate               = SpecialAbilityBalrogSchreienBonus
        TriggeredBy                        = Upgrade_AngbandBalrogSchreien Upgrade_Level_6
	RequiresAllTriggers		   = No
    End

    Behavior = SpecialPowerModule ModuleTag_SchreienBonusPower
        SpecialPowerTemplate               = SpecialAbilityBalrogSchreienBonus
        UpdateModuleStartsAttack           = No
        StartsPaused                       = Yes
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_SchreienBonusUpdate
        StartsActive                       = No
        BonusName                          = AngbandBalrogSchreienBonus
        TriggeredBy                        = Upgrade_AngbandBalrogSchreien Upgrade_Level_6
        RefreshDelay                       = 2000
        Range                              = 1
        AllowSelf                          = Yes
        ObjectFilter                       = NONE +AngbandBalrog
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FlugelBonusUnpause
        SpecialPowerTemplate               = SpecialAbilityBalrogFlugelBonus
        TriggeredBy                        = Upgrade_AngbandBalrogFlugel Upgrade_Level_8
	RequiresAllTriggers		   = No
    End

    Behavior = SpecialPowerModule ModuleTag_FlugelBonusPower
        SpecialPowerTemplate               = SpecialAbilityBalrogFlugelBonus
        UpdateModuleStartsAttack           = No
        StartsPaused             	   = Yes
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_FlugelBonusUpdate
        StartsActive                       = No
        BonusName                          = AngbandBalrogFlugelBonus
        TriggeredBy                        = Upgrade_AngbandBalrogFlugel Upgrade_Level_8
        RefreshDelay                       = 2000
        Range                              = 1
        AllowSelf                          = Yes
        ObjectFilter                       = NONE +AngbandBalrog
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_VerbrennenBonusUnpause
        SpecialPowerTemplate               = SpecialAbilityBalrogVerbrennenBonus
        TriggeredBy                        = Upgrade_AngbandBalrogVerbrennen Upgrade_Level_10
	RequiresAllTriggers		   = No
    End

    Behavior = SpecialPowerModule ModuleTag_VerbrennenBonusPower
        SpecialPowerTemplate               = SpecialAbilityBalrogVerbrennenBonus
        UpdateModuleStartsAttack           = No
        StartsPaused             	   = Yes
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_VerbrennenBonusUpdate
        StartsActive                       = No
        BonusName                          = AngbandBalrogVerbrennenBonus
        TriggeredBy                        = Upgrade_AngbandBalrogVerbrennen Upgrade_Level_10
        RefreshDelay                       = 2000
        Range                              = 1
        AllowSelf                          = Yes
        ObjectFilter                       = NONE +AngbandBalrog
    End


   Behavior = ArmorUpgrade ModuleTag_ArmorUpgrade
        TriggeredBy   = Upgrade_Level_10
        ArmorSetFlag  = PLAYER_UPGRADE
    End





    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName  = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName  = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName  = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End


    Behavior = AISpecialPowerUpdate Ignite_AI
        CommandButtonName  = Command_SpecialAbilityIgnite
        SpecialPowerAIType = AI_SPELLBOOK_ALWAYS_FIRE
    End

    Behavior = AISpecialPowerUpdate Scream_AI
        CommandButtonName  = Command_AngbandBalrogScream
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
        SpecialPowerRange  = 100
    End

    Behavior = AISpecialPowerUpdate Wings_AI
        CommandButtonName  = Command_AngbandBalrogWings
        SpecialPowerAIType = AI_SPECIAL_POWER_RANGED_AOE_ATTACK
        SpecialPowerRadius = 50
    End

    Behavior = AISpecialPowerUpdate Breath_AI
        CommandButtonName  = Command_AngbandBalrogBreath
        SpecialPowerAIType = AI_SPELLBOOK_ARMY_BREAKER
    End


    Behavior = AISpecialPowerUpdate FireWhipAI
	CommandButtonName = Command_SpecialAbilityFireWhip
	SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
	SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER_STRUCTURES
    End

    Scale               = 0.86
    Geometry            = CYLINDER
    GeometryMajorRadius = 30.0
    GeometryHeight      = 70.0
    GeometryIsSmall     = No
    Shadow              = SHADOW_VOLUME
    ShadowSizeX         = 100
    ShadowSizeY         = 100
    ShadowTexture       = ShadowI
End

