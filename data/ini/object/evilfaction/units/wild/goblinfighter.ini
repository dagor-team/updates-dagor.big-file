Object GoblinFighter

    ButtonImage    = UPWild_GoblinWarrior2
    SelectPortrait = UPWild_GoblinWarrior

  Draw = W3DHordeModelDraw ModuleTag_01

    OkToChangeModelColor = Yes
    StaticModelLODMode   = Yes

        LodOptions                            = LOW
            AllowMultipleModels                = ALLOW_MULTIPLE_MODELS_LOW
            MaxRandomTextures                = MAX_RANDOM_TEXTURES_LOW
            MaxRandomAnimations                = MAX_RANDOM_ANIMATIONS_LOW
            MaxAnimFrameDelta                = MAX_ANIM_FRAME_DELTA_LOW
        End

        LodOptions                            = MEDIUM
            AllowMultipleModels                = ALLOW_MULTIPLE_MODELS_MED
            MaxRandomTextures                = MAX_RANDOM_TEXTURES_MED
            MaxRandomAnimations                = MAX_RANDOM_ANIMATIONS_MED
            MaxAnimFrameDelta                = MAX_ANIM_FRAME_DELTA_MED
        End

        LodOptions                            = HIGH
            AllowMultipleModels                = ALLOW_MULTIPLE_MODELS_HIGH
            MaxRandomTextures                = MAX_RANDOM_TEXTURES_HIGH
            MaxRandomAnimations                = MAX_RANDOM_ANIMATIONS_HIGH
            MaxAnimFrameDelta                = MAX_ANIM_FRAME_DELTA_HIGH
        End

        WadingParticleSys = WaterRipplesTrail

    DefaultModelConditionState
       Model    = wuorkfi_ska
       Model    = wuorkfi_skb  ExtraMesh:Yes
       Model    = wuorkfi_skc  ExtraMesh:Yes
       Model    = wuorkfi_skd  ExtraMesh:Yes
       Model    = wuorkfi_ske  ExtraMesh:Yes
       Model    = wuorkfi_skf  ExtraMesh:Yes
       Model    = wuorkfi_skg  ExtraMesh:Yes
       
       Skeleton = MUGblnSwrd_SKL
    End

    ModelConditionState = USER_1
       Model    = wuorkfi_ska
       Model    = wuorkfi_skb  ExtraMesh:Yes
       Model    = wuorkfi_skc  ExtraMesh:Yes
       Model    = wuorkfi_skd  ExtraMesh:Yes
       Model    = wuorkfi_ske  ExtraMesh:Yes
       Model    = wuorkfi_skf  ExtraMesh:Yes
       Model    = wuorkfi_skg  ExtraMesh:Yes
       
       Skeleton = MUGblnSwrd_SKL
       ParticleSysBone = FORGED_BLADE GoblinPoisonSword FollowBone:Yes
    End

        #include "goblinfighteranims.inc"
  End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side             = Wild
    IsTrainable      = Yes
    EditorSorting    = UNIT
    ThreatLevel      = 1.0
    ThingClass       = HORDE_UNIT
    CommandPoints    = 2
    TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT
    ShockwaveResistance  = 5

    WeaponSet
        Conditions = None
        Weapon = PRIMARY    GoblinFighterSword
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End


    ArmorSet
        Conditions      = None
        Armor           = GoblinArmor
        DamageFX        = NormalDamageFX
    End

    ArmorSet
        Conditions      = PLAYER_UPGRADE
        Armor           = GoblinScavengedArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange = 200
    ShroudClearingRange = 250

    VisionSide = 35%
    VisionRear = 25%

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 2.0%

    DisplayName           = OBJECT:GoblinFighter
    CrushableLevel        = 0
    CrusherLevel          = 0
    BountyValue           = 1
    CrushRevengeWeapon    = BasicInfantryCrushRevenge
    CommandSet            = GoblinFighterModCommandSet

    VoiceAttack                                = GoblinWarriorVoiceAttack
    VoiceAttackCharge                        = GoblinWarriorVoiceAttackCharge
    VoiceAttackMachine                        = GoblinWarriorVoiceAttack
    VoiceAttackStructure                    = GoblinWarriorVoiceAttackBuilding
    VoiceCreated                            = EVA:GoblinWarriorCreated
    VoiceFullyCreated                        = EVA:GoblinWarriorCreated
    VoiceGuard                                = GoblinWarriorVoiceGuard
    VoiceMove                                = GoblinWarriorVoiceMove
    VoiceMoveOverWalls                        = GoblinWarriorVoiceMoveWalls
    VoiceMoveToCamp                            = GoblinWarriorVoiceMoveCamp
    VoiceMoveWhileAttacking                    = GoblinWarriorVoiceDisengage
    VoicePriority                            = 30
    VoiceRetreatToCastle                    = GoblinWarriorVoiceRetreat
    VoiceSelect                                = GoblinWarriorVoiceSelectMS
    VoiceSelectBattle                         = GoblinWarriorVoiceSelectBattle

    VoiceEnterStateAttack                    = GoblinWarriorVoiceEnterStateAttack
    VoiceEnterStateAttackCharge                = GoblinWarriorVoiceEnterStateAttackCharge
    VoiceEnterStateAttackMachine            = GoblinWarriorVoiceEnterStateAttack
    VoiceEnterStateAttackStructure            = GoblinWarriorVoiceEnterStateAttackBuilding
    VoiceEnterStateMove                        = GoblinWarriorVoiceEnterStateMove
    VoiceEnterStateMoveOverWalls            = GoblinWarriorVoiceEnterStateMoveWalls
    VoiceEnterStateMoveToCamp                = GoblinWarriorVoiceEnterStateMoveCamp
    VoiceEnterStateMoveWhileAttacking        = GoblinWarriorVoiceEnterStateDisengage
    VoiceEnterStateRetreatToCastle            = GoblinWarriorVoiceEnterStateRetreat

    SoundImpact                                = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitEvilMenTransportShip    = GoblinWarriorVoiceMoveShip
        VoiceEnterUnitMordorMumakil            = GoblinWarriorVoiceMoveGarrison
        VoiceEnterUnitSlaughterHouse        = GoblinWarriorVoiceMoveGarrison
        VoiceGarrison                        = GoblinWarriorVoiceMoveGarrison
        VoiceInitiateCaptureBuilding        = GoblinWarriorVoiceCaptureBuilding
    End

    CrowdResponseKey = Goblin

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo


        ModelCondition = Required:RAISING_FLAG            Excluded:DYING ENGAGED    Sound:EmotionGoblinCompilationVoxTauntSinglesLoop
    End

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:BodyFallGeneric2    Animation:MUGblnSwrd_SKL.MUGblnSwrd_DIEA    Frames:10
        AnimationSound = Sound:BodyFallGeneric2    Animation:MUGblnSwrd_SKL.MUGblnSwrd_DIEB    Frames:7
        AnimationSound = Sound:BodyFallOrc         Animation:MUGblnSwrd_SKL.MUGblnSwrd_LNDB    Frames:6
        AnimationSound = Sound:BodyFallOrc         Animation:MUGblnSwrd_SKL.MUGblnSwrd_LNDC    Frames:3
    End

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Goblin
    End

    Behavior = SpecialPowerModule ModuleTag_PoisonedBladeSpecialPower
        SpecialPowerTemplate        = SpecialAbilityGoblinFighterPoisonedBlades
        StartsPaused                = No
    End

    Behavior = WeaponModeSpecialPowerUpdate ModuleTag_PoisonedBladeUpdate
        SpecialPowerTemplate        = SpecialAbilityGoblinFighterPoisonedBlades
        Duration                    = 20000
        WeaponSetFlags                = WEAPONSET_TOGGLE_1
        StartsPaused                = No
    End

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP ORC CAN_USE_SIEGE_TOWER

  Body = ActiveBody ModuleTag_02
    MaxHealth         = GOBLIN_FIGHTER_HEALTH
    MaxHealthDamaged  = GOBLIN_FIGHTER_HEALTH_DAMAGED
    BurningDeathBehavior = Yes
    BurningDeathFX       = FX_InfantryBurningFlame
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle    = Yes ATTACK_BUILDINGS
    MoodAttackCheckRate           = 500
    AILuaEventsList               = GoblinFighterFunctions
    AttackPriority                = AttackPriority_Infantry
    BurningDeathTime              = BURNINGDEATH_DURATION_INFANTRY
  End

  LocomotorSet
    Locomotor     = HumanLocomotor
    Condition     = SET_NORMAL
    Speed         = NORMAL_WILD_FAST_MEMBER_SPEED
  End

  LocomotorSet
    Locomotor     = HumanWanderLocomotor
    Condition     = SET_WANDER
    Speed         = NORMAL_WILD_FAST_MEMBER_SPEED
  End

    LocomotorSet
        Locomotor = BurningDeathLocomotorInfantry
        Condition = SET_BURNINGDEATH
        Speed      = BURNINGDEATH_WANDERSPEED_INFANTRY
    End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult                = 1.0
    ShockStunnedTimeLow        = 800
    ShockStunnedTimeHigh    = 1000
    ShockStandingTime        = 2133
  End

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes            = ALL -KNOCKBACK -EXTRA_8
    SinkDelay            = 3000
    SinkRate            = 0.40
    DestructionDelay    = 8000
    Sound                = INITIAL GoblinVoxDieMS
  End

  Behavior = SquishCollide ModuleTag_06
  End

  Behavior = HordeMemberCollide ModuleTag_HMC
  End

  Behavior = SlowDeathBehavior ModuleTag_07

    DeathTypes            = NONE +KNOCKBACK
    SinkDelay            = 3000
    SinkRate            = 0.40
    DestructionDelay    = 8000
    Sound                = INITIAL GoblinVoxDieMS
  End

    Behavior = SlowDeathBehavior ModuleTag_GrabandDrop
        DeathTypes       = NONE +EXTRA_8
        SinkDelay        = 3000
        SinkRate         = 0.60
        DestructionDelay = 10000
        DeathFlags       = DEATH_4
        ShadowWhenDead   = Yes
    End

    Behavior = FireWeaponWhenDeadBehavior ModuleTag_GrabandDropImpact
        RequiredStatus  = DEATH_4
        StartsActive    = Yes
        DelayTime       = 0
        DeathWeapon     = GrabandDropInfantryImpactWarhead
        WeaponOffset    = X:0 Y:0 Z:0
    End

    Behavior = BezierProjectileBehavior ModuleTag_BodyHitHuman
       FirstHeight               = 24
       SecondHeight              = 24
       FirstPercentIndent        = 30%
       SecondPercentIndent       = 70%
       TumbleRandomly            = Yes
       CrushStyle                = Yes
       DieOnImpact               = Yes
       BounceCount               = 1
       BounceDistance            = 40
       BounceFirstHeight         = 24
       BounceSecondHeight        = 24
       BounceFirstPercentIndent  = 20%
       BounceSecondPercentIndent = 80%
       GroundHitFX               = FX_GrabandDropInfantryGroundHit
       GroundBounceFX            = FX_GrabandDropInfantryGroundHit
    End

    Behavior = ArmorUpgrade WildModuleArmorUpgrade
        TriggeredBy        =    Upgrade_HeavyArmor
        ArmorSetFlag       =    PLAYER_UPGRADE
    End

    Behavior = SubObjectsUpgrade ModuleTag_Making2
        TriggeredBy       = Upgrade_HeavyArmor
        HideSubObjects    = HEAD03 HEAD02
        ShowSubObjects    = SHOULDER ARM HEAD01 SHIELD
    End

    Behavior = SubObjectsUpgrade ModuleTag_MakingPlundern
        TriggeredBy       = Upgrade_PlunderKeulen
        ShowSubObjects    = KEULE
        HideSubObjects    = WEAPON01 WEAPON02 WEAPON03 WEAPON04 WEAPON05
    End


    Behavior = WeaponSetUpgrade WeaponSetUpgradeModuleTag
        TriggeredBy = Upgrade_WildOrcVenomSacks
        CustomAnimAndDuration = AnimState:USER_1 AnimTime:0
    End

    Behavior = WeaponSetUpgrade WeaponSetUpgradeModuleTagPlundern
        TriggeredBy = Upgrade_PlunderKeulen
    End

  Scale = 0.95
  Geometry                = CYLINDER
  GeometryMajorRadius    = 8.0
  GeometryMinorRadius    = 8.0
  GeometryHeight        = 19.2
  GeometryIsSmall        = Yes

  Shadow                = SHADOW_DECAL
  ShadowSizeX            = 11
  ShadowSizeY            = 11
  ShadowTexture            = ShadowI
End

ChildObject GoblinFighterGroﬂork_Summoned GoblinFighter

    EquivalentTo = GoblinFighter

    Behavior = GrantUpgradeCreate ModuleTag_GrantIsengardForgedBlades
        UpgradeToGrant = Upgrade_ForgedBlades
    End
    Behavior = GrantUpgradeCreate ModuleTag_GrantHeavyArmor
        UpgradeToGrant = Upgrade_HeavyArmor
    End
    Behavior = GrantUpgradeCreate ModuleTag_GrantBasicTraining
        UpgradeToGrant = Upgrade_BasicTraining
    End

End


Object GoblinFighterGroﬂork

    ButtonImage    = WOR_GoblinFighters
    SelectPortrait = UPWild_GoblinWarrior

  Draw = W3DHordeModelDraw ModuleTag_01

    OkToChangeModelColor = Yes
    StaticModelLODMode   = Yes

        LodOptions                            = LOW
            AllowMultipleModels                = ALLOW_MULTIPLE_MODELS_LOW
            MaxRandomTextures                = MAX_RANDOM_TEXTURES_LOW
            MaxRandomAnimations                = MAX_RANDOM_ANIMATIONS_LOW
            MaxAnimFrameDelta                = MAX_ANIM_FRAME_DELTA_LOW
        End

        LodOptions                            = MEDIUM
            AllowMultipleModels                = ALLOW_MULTIPLE_MODELS_MED
            MaxRandomTextures                = MAX_RANDOM_TEXTURES_MED
            MaxRandomAnimations                = MAX_RANDOM_ANIMATIONS_MED
            MaxAnimFrameDelta                = MAX_ANIM_FRAME_DELTA_MED
        End

        LodOptions                            = HIGH
            AllowMultipleModels                = ALLOW_MULTIPLE_MODELS_HIGH
            MaxRandomTextures                = MAX_RANDOM_TEXTURES_HIGH
            MaxRandomAnimations                = MAX_RANDOM_ANIMATIONS_HIGH
            MaxAnimFrameDelta                = MAX_ANIM_FRAME_DELTA_HIGH
        End

        WadingParticleSys = WaterRipplesTrail

    DefaultModelConditionState
       Model    = wuorkfi_ska
       Model    = wuorkfi_skb  ExtraMesh:Yes
       Model    = wuorkfi_skc  ExtraMesh:Yes
       Model    = wuorkfi_skd  ExtraMesh:Yes
       Model    = wuorkfi_ske  ExtraMesh:Yes
       Model    = wuorkfi_skf  ExtraMesh:Yes
       Model    = wuorkfi_skg  ExtraMesh:Yes
       
       Skeleton = MUGblnSwrd_SKL
    End

    ModelConditionState = USER_1
       Model    = wuorkfi_ska
       Model    = wuorkfi_skb  ExtraMesh:Yes
       Model    = wuorkfi_skc  ExtraMesh:Yes
       Model    = wuorkfi_skd  ExtraMesh:Yes
       Model    = wuorkfi_ske  ExtraMesh:Yes
       Model    = wuorkfi_skf  ExtraMesh:Yes
       Model    = wuorkfi_skg  ExtraMesh:Yes
       
       Skeleton = MUGblnSwrd_SKL
       ParticleSysBone = FORGED_BLADE GoblinPoisonSword FollowBone:Yes
    End

        #include "goblinfighteranims.inc"
  End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"

    Side        = Wild
    IsTrainable    = Yes
    EditorSorting    = UNIT
    ThreatLevel    = 1.0
    ThingClass    = HORDE_UNIT
    CommandPoints    = 2
    TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT
    ShockwaveResistance          = 10

    WeaponSet
        Conditions = None
        Weapon = PRIMARY    GoblinFighterSword
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = EdainOrcArmor
        DamageFX        = NormalDamageFX
    End

    ArmorSet
        Conditions        = PLAYER_UPGRADE
        Armor            = EdainOrcScavengedArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange = 200
    ShroudClearingRange = 250

    VisionSide = 35%
    VisionRear = 25%

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 2.0%

    DisplayName           = OBJECT:GoblinFighter
    CrushableLevel        = 0
    CrusherLevel          = 0
    BountyValue = 1
    CrushRevengeWeapon    = BasicInfantryCrushRevenge
    CommandSet            = GoblinFighterModCommandSet

    VoiceAttack                                = GoblinWarriorVoiceAttack
    VoiceAttackCharge                        = GoblinWarriorVoiceAttackCharge
    VoiceAttackMachine                        = GoblinWarriorVoiceAttack
    VoiceAttackStructure                    = GoblinWarriorVoiceAttackBuilding
    VoiceCreated                            = EVA:GoblinWarriorCreated
    VoiceFullyCreated                        = EVA:GoblinWarriorCreated
    VoiceGuard                                = GoblinWarriorVoiceGuard
    VoiceMove                                = GoblinWarriorVoiceMove
    VoiceMoveOverWalls                        = GoblinWarriorVoiceMoveWalls
    VoiceMoveToCamp                            = GoblinWarriorVoiceMoveCamp
    VoiceMoveWhileAttacking                    = GoblinWarriorVoiceDisengage
    VoicePriority                            = 30
    VoiceRetreatToCastle                    = GoblinWarriorVoiceRetreat
    VoiceSelect                                = GoblinWarriorVoiceSelectMS
    VoiceSelectBattle                         = GoblinWarriorVoiceSelectBattle

    VoiceEnterStateAttack                    = GoblinWarriorVoiceEnterStateAttack
    VoiceEnterStateAttackCharge                = GoblinWarriorVoiceEnterStateAttackCharge
    VoiceEnterStateAttackMachine            = GoblinWarriorVoiceEnterStateAttack
    VoiceEnterStateAttackStructure            = GoblinWarriorVoiceEnterStateAttackBuilding
    VoiceEnterStateMove                        = GoblinWarriorVoiceEnterStateMove
    VoiceEnterStateMoveOverWalls            = GoblinWarriorVoiceEnterStateMoveWalls
    VoiceEnterStateMoveToCamp                = GoblinWarriorVoiceEnterStateMoveCamp
    VoiceEnterStateMoveWhileAttacking        = GoblinWarriorVoiceEnterStateDisengage
    VoiceEnterStateRetreatToCastle            = GoblinWarriorVoiceEnterStateRetreat

    SoundImpact                                = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitEvilMenTransportShip    = GoblinWarriorVoiceMoveShip
        VoiceEnterUnitMordorMumakil            = GoblinWarriorVoiceMoveGarrison
        VoiceEnterUnitSlaughterHouse        = GoblinWarriorVoiceMoveGarrison
        VoiceGarrison                        = GoblinWarriorVoiceMoveGarrison
        VoiceInitiateCaptureBuilding        = GoblinWarriorVoiceCaptureBuilding
    End

    CrowdResponseKey = Goblin

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo

        ModelCondition = Required:RAISING_FLAG            Excluded:DYING ENGAGED    Sound:EmotionGoblinCompilationVoxTauntSinglesLoop
    End

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
          MaxUpdateRangeCap = 800
        AnimationSound = Sound:BodyFallGeneric2    Animation:MUGblnSwrd_SKL.MUGblnSwrd_DIEA    Frames:10
        AnimationSound = Sound:BodyFallGeneric2    Animation:MUGblnSwrd_SKL.MUGblnSwrd_DIEB    Frames:7
        AnimationSound = Sound:BodyFallOrc        Animation:MUGblnSwrd_SKL.MUGblnSwrd_LNDB    Frames:6
        AnimationSound = Sound:BodyFallOrc        Animation:MUGblnSwrd_SKL.MUGblnSwrd_LNDC    Frames:3
    End

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Goblin
    End


    Behavior = SpecialPowerModule ModuleTag_PoisonedBladeSpecialPower
        SpecialPowerTemplate        = SpecialAbilityGoblinFighterPoisonedBlades
        StartsPaused                = No
    End

    Behavior = WeaponModeSpecialPowerUpdate ModuleTag_PoisonedBladeUpdate
        SpecialPowerTemplate        = SpecialAbilityGoblinFighterPoisonedBlades
        Duration                    = 20000
        WeaponSetFlags                = WEAPONSET_TOGGLE_1
        StartsPaused                = No
    End

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP ORC CAN_USE_SIEGE_TOWER

  Body = ActiveBody ModuleTag_02
    MaxHealth         = 275
    MaxHealthDamaged  = 125
    BurningDeathBehavior = Yes
    BurningDeathFX       = FX_InfantryBurningFlame
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle    = Yes ATTACK_BUILDINGS
    MoodAttackCheckRate           = 500
    AILuaEventsList               = GoblinFighterFunctions
    AttackPriority                = AttackPriority_Infantry
    BurningDeathTime              = BURNINGDEATH_DURATION_INFANTRY
  End

  LocomotorSet
    Locomotor     = HumanLocomotor
    Condition     = SET_NORMAL
    Speed         = NORMAL_WILD_FAST_MEMBER_SPEED
  End

  LocomotorSet
    Locomotor     = HumanWanderLocomotor
    Condition     = SET_WANDER
    Speed         = NORMAL_WILD_FAST_MEMBER_SPEED
  End

    LocomotorSet
        Locomotor = BurningDeathLocomotorInfantry
        Condition = SET_BURNINGDEATH
        Speed      = BURNINGDEATH_WANDERSPEED_INFANTRY
    End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult                = 1.0
    ShockStunnedTimeLow        = 800
    ShockStunnedTimeHigh    = 1000
    ShockStandingTime        = 2133
  End

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes            = ALL -KNOCKBACK -EXTRA_8
    SinkDelay            = 3000
    SinkRate            = 0.40
    DestructionDelay    = 8000
    Sound                = INITIAL GoblinVoxDieMS
  End

  Behavior = SquishCollide ModuleTag_06
  End

  Behavior = HordeMemberCollide ModuleTag_HMC
  End

  Behavior = SlowDeathBehavior ModuleTag_07

    DeathTypes            = NONE +KNOCKBACK
    SinkDelay            = 3000
    SinkRate            = 0.40
    DestructionDelay    = 8000
    Sound                = INITIAL GoblinVoxDieMS
  End

    Behavior = SlowDeathBehavior ModuleTag_GrabandDrop
        DeathTypes       = NONE +EXTRA_8
        SinkDelay        = 3000
        SinkRate         = 0.60
        DestructionDelay = 10000
        DeathFlags       = DEATH_4
        ShadowWhenDead   = Yes
    End

    Behavior = FireWeaponWhenDeadBehavior ModuleTag_GrabandDropImpact
        RequiredStatus  = DEATH_4
        StartsActive    = Yes
        DelayTime       = 0
        DeathWeapon     = GrabandDropInfantryImpactWarhead
        WeaponOffset    = X:0 Y:0 Z:0
    End

    Behavior = BezierProjectileBehavior ModuleTag_BodyHitHuman
       FirstHeight               = 24
       SecondHeight              = 24
       FirstPercentIndent        = 30%
       SecondPercentIndent       = 70%
       TumbleRandomly            = Yes
       CrushStyle                = Yes
       DieOnImpact               = Yes
       BounceCount               = 1
       BounceDistance            = 40
       BounceFirstHeight         = 24
       BounceSecondHeight        = 24
       BounceFirstPercentIndent  = 20%
       BounceSecondPercentIndent = 80%
       GroundHitFX               = FX_GrabandDropInfantryGroundHit
       GroundBounceFX            = FX_GrabandDropInfantryGroundHit
    End

    Behavior = ArmorUpgrade WildModuleArmorUpgrade
        TriggeredBy        =    Upgrade_HeavyArmor
        ArmorSetFlag       =    PLAYER_UPGRADE
    End

    Behavior = SubObjectsUpgrade ModuleTag_Making2
        TriggeredBy       = Upgrade_HeavyArmor
        HideSubObjects    = HEAD03 HEAD02
        ShowSubObjects    = SHOULDER ARM HEAD01 SHIELD
    End

    Behavior = SubObjectsUpgrade ModuleTag_MakingPlundern
        TriggeredBy       = Upgrade_PlunderKeulen
        ShowSubObjects    = KEULE
        HideSubObjects    = WEAPON01 WEAPON02 WEAPON03 WEAPON04 WEAPON05
    End


    Behavior = WeaponSetUpgrade WeaponSetUpgradeModuleTag
        TriggeredBy = Upgrade_WildOrcVenomSacks
        CustomAnimAndDuration = AnimState:USER_1 AnimTime:0
    End

    Behavior = WeaponSetUpgrade WeaponSetUpgradeModuleTagPlundern
        TriggeredBy = Upgrade_PlunderKeulen
    End

    Behavior = GrantUpgradeCreate ModuleTag_GrantIsengardForgedBlades
        UpgradeToGrant = Upgrade_HeavyArmor
    End
    Behavior = GrantUpgradeCreate ModuleTag_GrantHeavyArmor
        UpgradeToGrant = Upgrade_PlunderKeulen
    End

  Scale = 0.95
  Geometry               = CYLINDER
  GeometryMajorRadius    = 8.0
  GeometryMinorRadius    = 8.0
  GeometryHeight         = 19.2
  GeometryIsSmall        = Yes

  Shadow                 = SHADOW_DECAL
  ShadowSizeX            = 11
  ShadowSizeY            = 11
  ShadowTexture          = ShadowI
End


Object GoblinFighterUpgraded

    ButtonImage    = BIDurbagashWarrior
    SelectPortrait = UPDurbagashWarrior

  Draw = W3DHordeModelDraw ModuleTag_01

    OkToChangeModelColor = Yes
    StaticModelLODMode   = Yes

        LodOptions                            = LOW
            AllowMultipleModels                = ALLOW_MULTIPLE_MODELS_LOW
            MaxRandomTextures                = MAX_RANDOM_TEXTURES_LOW
            MaxRandomAnimations                = MAX_RANDOM_ANIMATIONS_LOW
            MaxAnimFrameDelta                = MAX_ANIM_FRAME_DELTA_LOW
        End

        LodOptions                            = MEDIUM
            AllowMultipleModels                = ALLOW_MULTIPLE_MODELS_MED
            MaxRandomTextures                = MAX_RANDOM_TEXTURES_MED
            MaxRandomAnimations                = MAX_RANDOM_ANIMATIONS_MED
            MaxAnimFrameDelta                = MAX_ANIM_FRAME_DELTA_MED
        End

        LodOptions                            = HIGH
            AllowMultipleModels                = ALLOW_MULTIPLE_MODELS_HIGH
            MaxRandomTextures                = MAX_RANDOM_TEXTURES_HIGH
            MaxRandomAnimations                = MAX_RANDOM_ANIMATIONS_HIGH
            MaxAnimFrameDelta                = MAX_ANIM_FRAME_DELTA_HIGH
        End

        WadingParticleSys = WaterRipplesTrail

	RandomTexture  = mugobarch_dd.tga 0 mugobarch_dd.tga
	RandomTexture  = mugobarch_dd02.tga 0 mugobarch_dd.tga

	RandomTexture  = mbblackgt1.tga 0 mbblackgt1.tga
	RandomTexture  = mugblnswrd_dd.tga 0 mugblnswrd_dd.tga
	RandomTexture  = mugobweap.tga 0 mugobweap.tga

	RandomTexture  = wugobsword.tga 0 wugobsword.tga

	RandomTexture  = wuhob_armor.tga 0 wuhob_armor.tga

	RandomTexture  = wuhob_armor2.tga 0 wuhob_armor2.tga

	RandomTexture  = wuhob_helm.tga 0 wuhob_helm.tga
	RandomTexture  = wuhob_helm_02.tga 0 wuhob_helm.tga

	RandomTexture  = wumorgob_stuff.tga 0 wumorgob_stuff.tga

	RandomTexture  = wuhob_axe.tga 0 wuhob_axe.tga

    DefaultModelConditionState
       Model    = mugblnsw_dd1
       Model    = mugblnsw_dd2  ExtraMesh:Yes
       Model    = mugblnsw_dd3  ExtraMesh:Yes
       Model    = mugblnsw_dd4  ExtraMesh:Yes
       Skeleton = MUGblnSwrd_SKL
    End

    ModelConditionState = WEAPONSET_TOGGLE_1
       Model    = mugblnsw_dd1
       Model    = mugblnsw_dd2  ExtraMesh:Yes
       Model    = mugblnsw_dd3  ExtraMesh:Yes
       Model    = mugblnsw_dd4  ExtraMesh:Yes
       Skeleton = MUGblnSwrd_SKL
       ParticleSysBone = FORGED_BLADE GoblinPoisonSword FollowBone:Yes
    End

        #include "goblinfighteranims.inc"
  End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"

    Side                  = Wild
    IsTrainable           = Yes
    EditorSorting         = UNIT
    ThreatLevel           = 1.0
    ThingClass            = HORDE_UNIT
    CommandPoints         = 2
    TransportSlotCount    = TRANSPORTSLOTCOUNT_UNIT
    ShockwaveResistance   = 10

    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY GoblinFighterSwordAzog
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions        = WEAPONSET_TOGGLE_1
        Weapon            = PRIMARY GoblinFighterSwordPoisonedUpgradedAzog
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions        = None
        Armor             = EdainOrcScavengedArmor
        DamageFX          = NormalDamageFX
    End

    VisionRange = 200
    ShroudClearingRange = 250

    VisionSide = 35%
    VisionRear = 25%

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 2.0%

    DisplayName           = OBJECT:GoblinFighterBolg
    CrushableLevel        = 0
    CrusherLevel          = 0
    BountyValue 	  = 2
    CrushRevengeWeapon    = BasicInfantryCrushRevenge
    CommandSet            = GoblinFighterModCommandSet_Summoned

    VoiceAttack                                = GoblinWarriorVoiceAttack
    VoiceAttackCharge                        = GoblinWarriorVoiceAttackCharge
    VoiceAttackMachine                        = GoblinWarriorVoiceAttack
    VoiceAttackStructure                    = GoblinWarriorVoiceAttackBuilding
    VoiceCreated                            = EVA:GoblinWarriorCreated
    VoiceFullyCreated                        = EVA:GoblinWarriorCreated
    VoiceGuard                                = GoblinWarriorVoiceGuard
    VoiceMove                                = GoblinWarriorVoiceMove
    VoiceMoveOverWalls                        = GoblinWarriorVoiceMoveWalls
    VoiceMoveToCamp                            = GoblinWarriorVoiceMoveCamp
    VoiceMoveWhileAttacking                    = GoblinWarriorVoiceDisengage
    VoicePriority                            = 30
    VoiceRetreatToCastle                    = GoblinWarriorVoiceRetreat
    VoiceSelect                                = GoblinWarriorVoiceSelectMS
    VoiceSelectBattle                         = GoblinWarriorVoiceSelectBattle

    VoiceEnterStateAttack                    = GoblinWarriorVoiceEnterStateAttack
    VoiceEnterStateAttackCharge                = GoblinWarriorVoiceEnterStateAttackCharge
    VoiceEnterStateAttackMachine            = GoblinWarriorVoiceEnterStateAttack
    VoiceEnterStateAttackStructure            = GoblinWarriorVoiceEnterStateAttackBuilding
    VoiceEnterStateMove                        = GoblinWarriorVoiceEnterStateMove
    VoiceEnterStateMoveOverWalls            = GoblinWarriorVoiceEnterStateMoveWalls
    VoiceEnterStateMoveToCamp                = GoblinWarriorVoiceEnterStateMoveCamp
    VoiceEnterStateMoveWhileAttacking        = GoblinWarriorVoiceEnterStateDisengage
    VoiceEnterStateRetreatToCastle            = GoblinWarriorVoiceEnterStateRetreat

    SoundImpact                                = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitEvilMenTransportShip    = GoblinWarriorVoiceMoveShip
        VoiceEnterUnitMordorMumakil            = GoblinWarriorVoiceMoveGarrison
        VoiceEnterUnitSlaughterHouse        = GoblinWarriorVoiceMoveGarrison
        VoiceGarrison                        = GoblinWarriorVoiceMoveGarrison
        VoiceInitiateCaptureBuilding        = GoblinWarriorVoiceCaptureBuilding
    End

    CrowdResponseKey = Goblin

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:RAISING_FLAG            Excluded:DYING ENGAGED    Sound:EmotionGoblinCompilationVoxTauntSinglesLoop
    End

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:BodyFallGeneric2    Animation:MUGblnSwrd_SKL.MUGblnSwrd_DIEA    Frames:10
        AnimationSound = Sound:BodyFallGeneric2    Animation:MUGblnSwrd_SKL.MUGblnSwrd_DIEB    Frames:7
        AnimationSound = Sound:BodyFallOrc         Animation:MUGblnSwrd_SKL.MUGblnSwrd_LNDB    Frames:6
        AnimationSound = Sound:BodyFallOrc         Animation:MUGblnSwrd_SKL.MUGblnSwrd_LNDC    Frames:3
    End

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Goblin
    End

    Behavior = SpecialPowerModule ModuleTag_PoisonedBladeSpecialPower
        SpecialPowerTemplate        = SpecialAbilityGoblinFighterPoisonedBlades
        StartsPaused                = No
    End

    Behavior = WeaponModeSpecialPowerUpdate ModuleTag_PoisonedBladeUpdate
        SpecialPowerTemplate        = SpecialAbilityGoblinFighterPoisonedBlades
        Duration                    = 20000
        WeaponSetFlags              = WEAPONSET_TOGGLE_1
        StartsPaused                = No
    End

  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT GRAB_AND_DROP ORC

  Body = ActiveBody ModuleTag_02
    MaxHealth            = 300
    MaxHealthDamaged     = 130
    BurningDeathBehavior = Yes
    BurningDeathFX       = FX_InfantryBurningFlame
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle    = Yes ATTACK_BUILDINGS
    MoodAttackCheckRate           = 500
    AILuaEventsList               = GoblinFighterFunctions
    AttackPriority                = AttackPriority_Infantry
    BurningDeathTime              = BURNINGDEATH_DURATION_INFANTRY
  End

  LocomotorSet
    Locomotor     = HumanLocomotor
    Condition     = SET_NORMAL
    Speed         = NORMAL_WILD_FAST_MEMBER_SPEED
  End

  LocomotorSet
    Locomotor     = HumanWanderLocomotor
    Condition     = SET_WANDER
    Speed         = NORMAL_WILD_FAST_MEMBER_SPEED
  End

    LocomotorSet
        Locomotor = BurningDeathLocomotorInfantry
        Condition = SET_BURNINGDEATH
        Speed      = BURNINGDEATH_WANDERSPEED_INFANTRY
    End

  Behavior = PhysicsBehavior ModuleTag_04
    GravityMult                = 1.0
    ShockStunnedTimeLow        = 800
    ShockStunnedTimeHigh    = 1000
    ShockStandingTime        = 2133
  End

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes            = ALL -KNOCKBACK -EXTRA_8
    SinkDelay            = 3000
    SinkRate            = 0.40
    DestructionDelay    = 8000
    Sound                = INITIAL GoblinVoxDieMS
  End

  Behavior = SquishCollide ModuleTag_06
  End

  Behavior = HordeMemberCollide ModuleTag_HMC
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes            = NONE +KNOCKBACK
    SinkDelay            = 3000
    SinkRate            = 0.40
    DestructionDelay    = 8000
    Sound                = INITIAL GoblinVoxDieMS
  End

    Behavior = SlowDeathBehavior ModuleTag_GrabandDrop
        DeathTypes       = NONE +EXTRA_8
        SinkDelay        = 3000
        SinkRate         = 0.60
        DestructionDelay = 10000
        DeathFlags       = DEATH_4
        ShadowWhenDead   = Yes
    End

    Behavior = FireWeaponWhenDeadBehavior ModuleTag_GrabandDropImpact
        RequiredStatus  = DEATH_4
        StartsActive    = Yes
        DelayTime       = 0
        DeathWeapon     = GrabandDropInfantryImpactWarhead
        WeaponOffset    = X:0 Y:0 Z:0
    End

    Behavior = BezierProjectileBehavior ModuleTag_BodyHitHuman
       FirstHeight               = 24
       SecondHeight              = 24
       FirstPercentIndent        = 30%
       SecondPercentIndent       = 70%
       TumbleRandomly            = Yes
       CrushStyle                = Yes
       DieOnImpact               = Yes
       BounceCount               = 1
       BounceDistance            = 40
       BounceFirstHeight         = 24
       BounceSecondHeight        = 24
       BounceFirstPercentIndent  = 20%
       BounceSecondPercentIndent = 80%
       GroundHitFX               = FX_GrabandDropInfantryGroundHit
       GroundBounceFX            = FX_GrabandDropInfantryGroundHit
    End

    Behavior = SubObjectsUpgrade Armor_Upgrade
	TriggeredBy	= Upgrade_AllFactionUpgrade
	ShowSubObjects	= SHIELD01 SHIELD02 SHIELD03 SHIELD04
	HideSubObjects	= SHIELD05
	ShowSubObjects	= GAUNTLETS01 GAUNTLETS02 GAUNTLETS03
	ShowSubObjects	= GREAVES01 GREAVES02 GREAVES03
	ShowSubObjects	= HELMET01 HELMET02 HELMET03 HELMET04
	ShowSubObjects	= SHOULDER01 SHOULDER02 SHOULDER03
	ShowSubObjects	= PBACKARMOR01 PBACKARMOR02 PBACKARMOR03
        ShowSubObjects  = FEET SHOULDER

	RecolorHouse    = No
	ExcludeSubobjects = Forged_Blade
    End

    Behavior = WeaponSetUpgrade WeaponSetUpgradeModuleTag
        TriggeredBy 	      = Upgrade_WildOrcVenomSacks
        CustomAnimAndDuration = AnimState:USER_1 AnimTime:0
    End

  Geometry               = CYLINDER
  GeometryMajorRadius    = 8.0
  GeometryMinorRadius    = 8.0
  GeometryHeight         = 19.2
  GeometryIsSmall        = Yes

  Shadow                 = SHADOW_DECAL
  ShadowSizeX            = 11
  ShadowSizeY            = 11
  ShadowTexture          = ShadowI
End


ChildObject GoblinFighterUpgraded_Slaved GoblinFighterUpgraded

      CommandPoints = 0

      EvaEnemyObjectSightedEvent = GoblinCreepSighted
      EvaEnemyObjectSightedAfterRespawnEvent = GoblinCreepSighted

    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER CAN_USE_SIEGE_TOWER THROWN_OBJECT ORC GRAB_AND_DROP CREEP SCORE CAN_ATTACK

    VisionRange = CREEP_VISION

    ThreatBreakdown MordorGoblinSwordsmanSlaved_ThreatBreakdown
        AIKindOf = CREEP
    End

    VoiceAttack                             = GoblinCreepVoxAttack
    VoiceAttackAir                            = GoblinCreepVoxAttack
    VoiceAttackStructure                    = GoblinCreepVoxAttack
    VoiceAttackCharge                        = GoblinCreepVoxAttack
    VoiceMove                                 = GoblinCreepVoxMove
    VoiceMoveWhileAttacking                    = GoblinCreepVoxMove
    VoicePriority                            = 3
    VoiceRetreatToCastle                    = GoblinCreepVoxMove
    VoiceSelect                             = GoblinCreepVoxSelectMS
    VoiceSelectBattle                        = GoblinCreepVoxSelectMS

    SoundImpact                             = ImpactHorse

    UnitSpecificSounds
        VoiceGarrison                        = GoblinCreepVoxMove
        VoiceEnterUnitSlaughterHouse        = GoblinCreepVoxMove
        VoiceEnterUnitMordorMumakil            = GoblinCreepVoxMove
        VoiceEnterUnitEvilMenTransportShip    = GoblinCreepVoxMove
        VoiceEnterUnitTransportShip            = GoblinCreepVoxMove
        VoiceInitiateCaptureBuilding        = GoblinCreepVoxMove
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -KNOCKBACK
        SinkDelay = 3000
        SinkRate = 0.40
        DestructionDelay = 8000
        Sound = INITIAL GoblinCreepVoxDie
    End

    Behavior = SlavedUpdate ModuleTag_Slave
        GuardMaxRange        = 300
        GuardWanderRange    = 50
        UseSlaverAsControlForEvaObjectSightedEvents = Yes
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = FighterHorde
    End

     Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance        =    350
        TauntAndPointUpdateDelay    =    1000
        TauntAndPointExcluded        =    NONE
        AfraidOf                    =    EMOTION_AFRAIDOF_OBJECTFILTER
        AlwaysAfraidOf                =    EMOTION_ALWAYS_AFRAIDOF_OBJECTFILTER
        PointAt                        =    EMOTION_POINTAT_OBJECTFILTER
        HeroScanDistance            =    150
        FearScanDistance            =    250

        AddEmotion    =    Terror_Base
        AddEmotion    =    Doom_Base
        AddEmotion    =   BraceForBeingCrushed_Base
        AddEmotion    =    UncontrollableFear_Base_Evil
        AddEmotion    =    FearIdle_Base
        AddEmotion    =    FearBusy_Base
        AddEmotion    =    Point_Base
        AddEmotion    =    Taunt_Base
        AddEmotion    =    CheerIdle_Base
        AddEmotion    =    CheerBusy_Base
        AddEmotion    =    HeroCheerIdle_Base
        AddEmotion    =    HeroCheerBusy_Base
        AddEmotion    =    Alert_Base
    End
End

ChildObject GoblinFighterUpgraded_Slaved02 GoblinFighterUpgraded

    EquivalentTo = GoblinFighterUpgraded
  	
	VisionSide	= 100%
	VisionRear	= 100%

    CommandPoints = 0

	Behavior = SlavedUpdate ModuleTag_Slave
		GuardMaxRange					= 350	
		GuardWanderRange				= 100
		AttackRange					= 2000
		UseSlaverAsControlForEvaObjectSightedEvents	= Yes		
		GuardPositionOffset				= X:0 Y:0 Z:0
		DieOnMastersDeath				= Yes
	End
End