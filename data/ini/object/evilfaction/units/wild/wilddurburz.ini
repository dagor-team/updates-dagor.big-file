Object WildDurburz

    SelectPortrait = HPDurbutz
    ButtonImage    = HIDurbutz

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_GoblinKing

    Draw = W3DScriptedModelDraw ModuleTag_DRAW

     RandomTexture = wudurbutzhead.tga  0 CHSS_OR_gear_02.tga
     RandomTexture = wudurbutzshldr.tga  0 CHSS_OR_gear_01.tga
     RandomTexture = chss_or.tga  0 wudurbutz.tga


     DefaultModelConditionState
      Model               = wilddurburz_dd
      Skeleton              = chss_gb_u_skl
      WeaponLaunchBone        = PRIMARY B_CLUB
    End

	ModelConditionState = WEAPONSET_HERO_MODE
		Model		= wilddurburz_dd2
		Skeleton	= chss_gb_u_skl
    End

AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN CREATE_A_HERO_EXAMINE_SELF CREATE_A_HERO_SELECTED_CHEER 
    StateName               = STATE_ExamineSelf
    Animation               = ExamineSelf
        AnimationName       = CHSS_GB_C_CLRA
        AnimationMode       = ONCE
        AnimationBlendTime = 20
    End
End

AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN CREATE_A_HERO_EXAMINE_WEAPON_RIGHT CREATE_A_HERO_SELECTED_CHEER 
    StateName               = STATE_ExamineWeapon
    Animation               = WeaponSwap
        AnimationName       = CHSS_GB_C_WPNA
        AnimationMode       = ONCE
        AnimationBlendTime = 20
    End
End

AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN USER_75
     StateName               = STATE_SwapModels
     Animation               = WeaponSwap
         AnimationName       = CHSS_GB_C_ATNB CHSS_GB_C_ATND
         AnimationMode       = MANUAL
         AnimationBlendTime = 0
     End
End

AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN CREATE_A_HERO_SELECTED_CHEER
    StateName = STATE_SelectedCheer
    Animation = Foot_ATNB 
        AnimationName       = CHSS_GB_C_ATNB CHSS_GB_C_ATND
        AnimationMode       = ONCE
        AnimationPriority  = 90
        AnimationBlendTime = 20
    End
    Animation = Foot_ATND 
        AnimationName       = CHSS_GB_C_ATND CHSS_GB_C_ATNB
        AnimationMode       = ONCE
        AnimationPriority  = 10
        AnimationBlendTime = 20
    End
    Animation = Foot_ATNE 
        AnimationName       = CHSS_GB_C_ATNE CHSS_GB_C_ATND CHSS_GB_C_ATNB
        AnimationMode       = ONCE
        AnimationPriority  = 3
        AnimationBlendTime = 20
    End
    Flags =    RESTART_ANIM_WHEN_COMPLETE
    BeginScript 
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Unselected" then 
            CurDrawableSetTransitionAnimState("Trans_SelectedCheer") 
        end
    EndScript
End

AnimationState = CREATE_A_HERO_IN_CREATION_SCREEN
    StateName = STATE_Unselected
    Animation = Foot_ATNB 
        AnimationName       = CHSS_GB_C_ATNB CHSS_GB_C_ATND
        AnimationMode       = ONCE
        AnimationPriority   = 90
        AnimationBlendTime = 10
    End
    Animation = Foot_ATND 
        AnimationName       = CHSS_GB_C_ATND CHSS_GB_C_ATNB
        AnimationMode       = ONCE
        AnimationPriority   = 10
        AnimationBlendTime = 10
    End
    Animation = Foot_ATNE 
        AnimationName       = CHSS_GB_C_ATNE CHSS_GB_C_ATND CHSS_GB_C_ATNB
        AnimationMode       = ONCE
        AnimationPriority   = 3
        AnimationBlendTime = 10
    End
    Flags =    RESTART_ANIM_WHEN_COMPLETE
     BeginScript 
         Prev = CurDrawablePrevAnimationState()
         if Prev == "STATE_SwapModels" then 
             CurDrawableSetTransitionAnimState("Trans_SwapModels") 
         end
     EndScript
End

TransitionState = Trans_ExamineWeapon
    Animation = Transition
        AnimationName = CHSS_GB_C_WPNA
        AnimationMode = ONCE
        AnimationBlendTime = 20
    End
End
TransitionState = Trans_ExamineSelf
    Animation = Transition
        AnimationName = CHSS_GB_C_CLRA
        AnimationMode = ONCE
        AnimationBlendTime = 20
    End
End
TransitionState = Trans_SelectedCheer
    Animation = Transition
        AnimationName = CHSS_GB_C_SLCA
        AnimationMode = ONCE
        AnimationBlendTime = 20
    End
End

TransitionState = Trans_SwapModels
    StateName = STATE_Unselected
    Animation = Transition
        AnimationName = CHSS_GB_C_ATNB CHSS_GB_C_ATND
        AnimationMode = ONCE
        AnimationBlendTime = 0
    End
End



AnimationState                        = CLIMBING WEAPONSET_TOGGLE_1
    StateName                        = STATE_Climbing
    Animation                        = Climbing
        AnimationName                = CHSS_GB_U_RUNB 
        AnimationMode                = LOOP
        AnimationBlendTime            = 10
    End
    BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing_WeaponToggle") return end
    EndScript
End
TransitionState = Trans_RunningToClimbing_WeaponToggle
    Animation = Transition
        AnimationName = CHSS_GB_U_IBFC  
        AnimationMode = ONCE
    End
End

AnimationState                        = CLIMBING
    StateName                        = STATE_Climbing
    Animation                        = Climbing
        AnimationName                = CHSS_GB_U_RUNB 
        AnimationMode                = LOOP
        AnimationBlendTime            = 10
    End
    BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing") return end
    EndScript
End
TransitionState = Trans_RunningToClimbing
    Animation = Transition
        AnimationName = CHSS_GB_U_IBFC
        AnimationMode = ONCE
    End
End

AnimationState                        = RAPPELLING WEAPONSET_TOGGLE_1
    StateName                        = STATE_Rappelling
    Animation                        = Rapelling
        AnimationName                = CHSS_GB_U_HITA  
        AnimationMode                = LOOP
        AnimationBlendTime            = 10
    End
    BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRappelling") return end
    EndScript
End
AnimationState                        = RAPPELLING
    StateName                        = STATE_Rappelling
    Animation                        = Rapelling
        AnimationName                = CHSS_GB_U_HITA  
        AnimationMode                = LOOP
        AnimationBlendTime            = 10
    End
    BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Climbing"  then CurDrawableSetTransitionAnimState("Trans_ClimbingToRappelling") return end
    EndScript
End
TransitionState = Trans_ClimbingToRappelling
    Animation = Transition
        AnimationName = CHSS_GB_U_HITA   
        AnimationMode = ONCE
    End
End
TransitionState = Trans_RappellingToRunning_WeaponToggle
    Animation = Transition
        AnimationName = MUGblnSwrd_B_WALE
        AnimationMode = ONCE
    End
End
TransitionState = Trans_RappellingToRunning
    Animation = Transition
        AnimationName = MUGblnSwrd_U_WALE
        AnimationMode = ONCE
    End
End
    




AnimationState                    =    DYING AFLAME MOUNTED
    Animation                    =    Fire
        AnimationName            =    CHSS_GB_M_MFDA 
        AnimationSpeedFactorRange = 0.9 1.1
    End
    BeginScript
        CurDrawableHideSubObject("arrow") 
    EndScript
End

AnimationState                =    DYING SPLATTED MOUNTED
    Animation
        AnimationName        =    CHSS_GB_M_LNDA
        AnimationMode        =    ONCE
    End
End
AnimationState        = DYING MOUNTED
    StateName           = STATE_Sword
    Animation
        AnimationName     = CHSS_GB_M_DIEA
        AnimationMode     = ONCE
    End
End

AnimationState                =    STUNNED_STANDING_UP MOUNTED
    Animation
        AnimationName        =    CHSS_GB_M_GTPA
        AnimationMode        =    ONCE
        AnimationSpeedFactorRange = 1.5 1.5
    End
End

AnimationState                =    STUNNED MOUNTED
    Animation
        AnimationName        =    CHSS_GB_M_LNDA
        AnimationMode        =    ONCE
    End
End

AnimationState                =    FREEFALL MOUNTED
    Animation
        AnimationName        =    CHSS_GB_M_FLYA
        AnimationMode        =    LOOP
    End
    Flags                    =    RANDOMSTART
End

AnimationState                =    STUNNED_FLAILING MOUNTED
    Animation
        AnimationName        =    CHSS_GB_M_FLYA
        AnimationMode        =    LOOP
    End
    Flags                    =    RANDOMSTART
End

AnimationState        = PASSENGER MOUNTED
    Animation
        AnimationName       = CHSS_GB_M_GBDA
        AnimationMode       = LOOP
    End
    Flags               = RANDOMSTART
End

AnimationState        = MOUNTED LEVELED    
    Animation
        AnimationName           = CHSS_GB_M_LVLA
        AnimationMode       = ONCE
    End
End

       
AnimationState                = FIRING_OR_PREATTACK_A MOUNTED    
    Animation
        AnimationName        = CHSS_GB_M_ATKA CHSS_GB_M_ATKB
        AnimationMode        = ONCE
        UseWeaponTiming        = Yes
    End
End


AnimationState                =    MOUNTED TURN_LEFT_HIGH_SPEED
    Animation
        AnimationName        =    CHSS_GB_M_TNL1
        AnimationMode        =    LOOP
        AnimationSpeedFactorRange= 1.8 1.8
        AnimationBlendTime    =    20
    End
End

AnimationState                =    MOUNTED TURN_RIGHT_HIGH_SPEED
    Animation
        AnimationName        =    CHSS_GB_M_TNR1
        AnimationMode        =    LOOP
        AnimationSpeedFactorRange= 1.8 1.8
        AnimationBlendTime    =    20
    End
End

AnimationState                =    MOVING TURN_LEFT MOUNTED
    Animation
        AnimationName        =    CHSS_GB_M_TRNL
        AnimationMode        =    LOOP
    End
End

AnimationState                =    MOVING TURN_RIGHT MOUNTED
    Animation
        AnimationName        =    CHSS_GB_M_TRNR
        AnimationMode        =    LOOP
    End
End

AnimationState                =    MOVING ACCELERATE MOUNTED
    Animation
        AnimationName        =    CHSS_GB_M_ACCL
        AnimationMode        =    LOOP
    End
End

AnimationState                =    MOVING DECELERATE MOUNTED
    Animation
        AnimationName        =    CHSS_GB_M_DECL
        AnimationMode        =    ONCE
    End
End

AnimationState                =    MOVING WALKING MOUNTED
    Animation
        AnimationName        =    CHSS_GB_M_WLKA
        AnimationMode        =    LOOP
    End
    Flags                    =    RANDOMSTART 
End

AnimationState                =    MOVING BACKING_UP MOUNTED
    Animation
        AnimationName        =    CHSS_GB_M_BAKA
        AnimationMode        =    LOOP
    End
    Flags                    =    RANDOMSTART
End

AnimationState        = MOUNTED MOVING FIRING_OR_PREATTACK_A
    ShareAnimation        = Yes
    Animation
        AnimationName       = CHSS_GB_M_ATRA
        AnimationMode       = LOOP
    End
    Flags               = RANDOMSTART  
End

AnimationState                =    MOVING MOUNTED
    Animation
        AnimationName        =    CHSS_GB_M_RUNA
        AnimationMode        =    LOOP
    End
     Flags                    =    RANDOMSTART
End

AnimationState                =    SELECTED MOUNTED
    SimilarRestart            =   Yes            
    StateName                =    AtAttentionIdleMounted
    Animation                =    ATNB
        AnimationName        =    CHSS_GB_M_ATNB
        AnimationMode        =    LOOP
    End
    BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Select") end
        if Prev == "AtAttentionIdleMounted" then CurDrawableSetTransitionAnimState("TRANS_Select") end
    EndScript
End

TransitionState                =    TRANS_Select
    Animation
        AnimationName        =    CHSS_GB_M_ATNA
        AnimationMode        =    ONCE
    End
End

AnimationState                = MOUNTED
    Animation
        AnimationName        =    CHSS_GB_M_IDLA
        AnimationPriority    =    20
        AnimationMode        =    ONCE
        AnimationBlendTime    =    15
    End
    Flags                =    RESTART_ANIM_WHEN_COMPLETE
End


AnimationState        = STUNNED_FLAILING WEAPONSET_TOGGLE_1
    StateName           = STATE_Bow
    Animation
        AnimationName     = CHSS_GB_B_FLYA
        AnimationMode     = LOOP
    End
    Flags               = RANDOMSTART
End

AnimationState        = STUNNED_FLAILING 
    StateName           = STATE_Sword
    Animation
        AnimationName     = CHSS_GB_U_FLYA
        AnimationMode     = LOOP
    End
    Flags               = RANDOMSTART
End

AnimationState        = DYING SPLATTED WEAPONSET_TOGGLE_1
    StateName           = STATE_Bow
    Animation
        AnimationName     = CHSS_GB_B_LNDA
        AnimationMode     = ONCE
    End
End

AnimationState        = DYING SPLATTED
    StateName           = STATE_Sword
    Animation
        AnimationName     = CHSS_GB_U_LNDA
        AnimationMode     = ONCE
    End
End

AnimationState        = DYING WEAPONSET_TOGGLE_1
    StateName           = STATE_Bow
    Animation
        AnimationName     = CHSS_GB_B_DIEA
        AnimationMode     = ONCE
    End
End

AnimationState        = DYING
    StateName           = STATE_Sword
    Animation
        AnimationName     = CHSS_GB_U_DIEA
        AnimationMode     = ONCE
    End
    Animation           = GUHero_DIEB
        AnimationName     = CHSS_GB_U_DIEB
        AnimationMode     = ONCE
    End
End


AnimationState        = STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
    StateName           = STATE_Bow
    Animation
        AnimationName     = CHSS_GB_B_GTPA
        AnimationMode     = ONCE
        AnimationSpeedFactorRange = 1.5 1.5
    End
End

AnimationState        = STUNNED_STANDING_UP
    StateName           = STATE_Sword
    Animation
        AnimationName     = CHSS_GB_U_GTPA
        AnimationMode     = ONCE
        AnimationSpeedFactorRange = 1.5 1.5
    End
End

AnimationState        = STUNNED WEAPONSET_TOGGLE_1
    StateName           = STATE_Bow
    Animation
        AnimationName     = CHSS_GB_B_LNDA
        AnimationMode     = ONCE
    End
End

AnimationState        = STUNNED 
    StateName           = STATE_Sword
    Animation           = GUHero_LNDA
        AnimationName     = CHSS_GB_U_LNDA
        AnimationMode     = ONCE
    End
End                


AnimationState                = PACKING_TYPE_1  WEAPONSET_TOGGLE_1
    StateName                = rainofarrows
    Animation
        AnimationName        = CHSS_GB_B_ATKA2
        AnimationMode        = LOOP
    End
End


AnimationState                = PACKING_TYPE_1
    StateName                = Curse
    Animation
        AnimationName        = CHSS_GB_U_LVLA
        AnimationMode        = ONCE
    End
End


AnimationState                = PACKING_TYPE_3
    StateName                = Curse
    Animation
        AnimationName        = CHSS_GB_U_SPCA
        AnimationMode        = ONCE
    End

End


AnimationState        =  SPECIAL_WEAPON_TWO
    StateName = STATE_Bow
    Animation
        AnimationName       = CHSS_GB_U_SPCL CHSS_GB_U_ATKC
        AnimationMode       = ONCE
    End
    FrameForPristineBonePositions = 59
    BeginScript
        CurDrawableShowSubObject("arrow")
    EndScript
End
        


        AnimationState        = MOVING USER_4 
            StateName           = Slaughter
            Flags               = RANDOMSTART
            Animation           = GUHero_ATKE
                AnimationName     = CHSS_GB_U_ATKE
                AnimationMode     = LOOP
            End
            StateName           = NoSword
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
            EndScript
        End


        AnimationState            = MOVING WEAPONSET_TOGGLE_1 
            StateName           = STATE_RunningBow
            Flags               = RANDOMSTART
            Animation
                AnimationName   = CHSS_GB_B_RUNA
                AnimationSpeedFactorRange = 0.85 0.85
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
                if Prev == "STATE_RunningSword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Running") end
                if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning_WeaponToggle") return end
            EndScript
        End

        AnimationState            = MOVING
            StateName           = STATE_RunningSword
            Flags               = RANDOMSTART
            Animation
                AnimationName   = CHSS_GB_U_RUNA
                AnimationSpeedFactorRange = 0.85 0.85
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
                if Prev == "STATE_RunningBow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword_Running") end
                if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
            EndScript
        End


        AnimationState                    =    PREATTACK_A WEAPONSET_TOGGLE_1
            StateName                    =    STATE_Firing
            Animation                    =    ReadyToDrawn
                AnimationName            =    CHSS_GB_B_ATKA1
                AnimationMode            =    ONCE
            End
        End

        AnimationState                    =    FIRING_OR_RELOADING_A WEAPONSET_TOGGLE_1
            StateName                    =    STATE_Firing
            Animation                    =    LooseReloadDraw
                AnimationName            =    CHSS_GB_B_ATKA2
                AnimationMode            =    ONCE

                AnimationSpeedFactorRange = 1.1 1.1     

            End
        End


        AnimationState                = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            StateName                = STATE_Firing
            Animation
                AnimationName        = CHSS_GB_B_ATKA1
                AnimationMode        = ONCE
                UseWeaponTiming        = No 
            End
        End

        AnimationState                = FIRING_OR_PREATTACK_A 
            Animation
                AnimationName        = CHSS_GB_U_ATKA1 CHSS_GB_U_ATKA CHSS_GB_U_ATKB
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
            End
        End


        AnimationState = EMOTION_ALERT HIT_REACTION WEAPONSET_TOGGLE_1
            Animation
                AnimationName = CHSS_GB_B_HITA
                AnimationMode = ONCE
            End
        End

        AnimationState = HIT_REACTION WEAPONSET_TOGGLE_1
            Animation
                AnimationName = CHSS_GB_B_HITA
                AnimationMode = ONCE
            End
        End

        AnimationState = HIT_REACTION
            Animation = Sword_HITA
                AnimationName = CHSS_GB_U_HITA
                AnimationMode = ONCE
            End
            Animation = Sword_HITB
                AnimationName = CHSS_GB_U_HITB
                AnimationMode = ONCE
            End

            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                if PrevAnim == "Foot_IDLB"
                then
                    return "Sword_HITB"
                else
                    return "Swort_HITA"
                end
            EndScript
        End
   

        AnimationState                = SPECIAL_POWER_1 
            StateName                = STATE_ready
            Animation
                AnimationName        = CHSS_GB_U_SPCA
                AnimationMode        = ONCE
            End
            ParticleSysBone            = B_SWORDBONE ElendilFlare FollowBone:Yes
            ParticleSysBone            = B_SWORDBONE ElendilSwordFlare FollowBone:Yes
        End

        AnimationState          =    SPECIAL_WEAPON_ONE
            StateName          =    Attacking
            Animation
                AnimationName =    CHSS_GB_U_SPCA
                AnimationMode =    ONCE
            End
        End

        AnimationState          =    SPECIAL_WEAPON_TWO MOUNTED
            StateName          =    Attacking
            Animation
                AnimationName =    CHSS_GB_U_SPLD CHSS_GB_U_ATKA
                AnimationMode =    ONCE
            End
        End
    
        AnimationState          =    SPECIAL_WEAPON_TWO
            StateName          =    Attacking
            Animation
                AnimationName =    CHSS_GB_U_SPCB CHSS_GB_U_ATKA
                AnimationMode =    ONCE
            End
        End


        AnimationState          =    SPECIAL_WEAPON_THREE MOUNTED  
            StateName          =    Attacking
            Animation          =    StaffLaser
                AnimationName =    CHSS_GB_U_SPCD CHSS_GB_U_ATKA
                AnimationMode =    ONCE
            End
            FXEvent              =    Frame:30 Name:FX_GandalfStaffFlare
        End


        AnimationState          =    SPECIAL_WEAPON_THREE 
            StateName          =    Attacking
            Animation          =    StaffLaser
                AnimationName =    CHSS_GB_U_SPCE CHSS_GB_U_ATKA
                AnimationMode =    ONCE
            End
            FXEvent              =    Frame:30 Name:FX_GandalfStaffFlare
        End
        
        AnimationState          =    SPECIAL_WEAPON_FOUR
            StateName          =    Attacking
            Animation
                AnimationName =    CHSS_GB_U_SPCD
                AnimationMode =    ONCE
            End
            FrameForPristineBonePositions    = 44
        End

        AnimationState          =    SPECIAL_WEAPON_FIVE
            StateName          =    Attacking
            Animation
                AnimationName =    CHSS_GB_U_SPCE
                AnimationMode =    ONCE
            End
        End


        AnimationState          =    PACKING_TYPE_1 UNPACKING
            StateName          =    Attacking
            Animation          =    LightningSwordStart
                AnimationName =    CHSS_GB_U_SPCC CHSS_GB_U_ATKA
                AnimationMode =    ONCE
            End
            FXEvent              =    Frame:14 Name:FX_CreateAHeroLightningCharge
            FXEvent              =    Frame:14 Name:FX_GandalfLightningSword    FrameStop:70
        End
    
        AnimationState          =    PACKING_TYPE_1 PREPARING
            StateName          =    Attacking
            Animation          =    LightningSwordLoop
                AnimationName =    CHSS_GB_U_SPCA CHSS_GB_U_ATKA
                AnimationMode =    LOOP
            End
        End

        AnimationState          =    PACKING_TYPE_1 PACKING
            StateName          =    Attacking
            Animation          =    LightningSwordPutAway
                AnimationName =    CHSS_GB_U_SPCB CHSS_GB_U_ATKA
                AnimationMode =    ONCE
            End
        End

        AnimationState          =    PACKING_TYPE_2 CREATE_A_HERO_20 CREATE_A_HERO_21
            Animation
                AnimationName =    CHSS_GB_U_SPCC
                AnimationMode =    LOOP
            End
        End


        AnimationState          =    PACKING_TYPE_2 UNPACKING
            StateName          =    Attacking
            Animation          =    LightningSwordStart
                AnimationName =    CHSS_GB_U_SPCC CHSS_GB_U_ATKA
                AnimationMode =    ONCE
            End
            FXEvent              =    Frame:14 Name:FX_CreateAHeroLightningCharge
            FXEvent              =    Frame:14 Name:FX_GandalfLightningSword    FrameStop:70
        End
    
        AnimationState          =    PACKING_TYPE_2 PREPARING
            StateName          =    Attacking
            Animation          =    LightningSwordLoop
                AnimationName =    CHSS_GB_U_SPCA CHSS_GB_U_ATKA
                AnimationMode =    LOOP
            End
        End

        AnimationState          =    PACKING_TYPE_2 PACKING
            StateName          =    Attacking
            Animation          =    LightningSwordPutAway
                AnimationName =    CHSS_GB_U_SPCB CHSS_GB_U_ATKA
                AnimationMode =    ONCE
            End
        End
        

        AnimationState        = PACKING_TYPE_2 WEAPONSET_TOGGLE_1
            StateName          =    CaptainPower
            Animation           = GUHero_CHRC
                AnimationName     = CHSS_GB_U_CHRC
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.2 1.2
            End
        End


        AnimationState        = PACKING_TYPE_2
            StateName          =    STATE_CaptainBow
            Animation           = GUHero_CHRD
                AnimationName     = CHSS_GB_U_SPCE CHSS_GB_U_SPCA CHSS_GB_U_CHRD
                AnimationMode     = ONCE
            End
        End


        AnimationState          =    PACKING_TYPE_3 UNPACKING
            StateName          =    Attacking
            Animation          =    LightningSwordStart
                AnimationName =    CHSS_GB_U_SPCC CHSS_GB_U_ATKA
                AnimationMode =    ONCE
            End
            FXEvent              =    Frame:14 Name:FX_CreateAHeroLightningCharge
            FXEvent              =    Frame:14 Name:FX_GandalfLightningSword    FrameStop:70
        End
    
        AnimationState          =    PACKING_TYPE_3 PREPARING
            StateName          =    Attacking
            Animation          =    LightningSwordLoop
                AnimationName =    CHSS_GB_U_SPCA CHSS_GB_U_ATKA
                AnimationMode =    LOOP
            End
        End

        AnimationState          =    PACKING_TYPE_3 PACKING
            StateName          =    Attacking
            Animation          =    LightningSwordPutAway
                AnimationName =    CHSS_GB_U_SPCB CHSS_GB_U_ATKA
                AnimationMode =    ONCE
            End
        End
        
        AnimationState          =    PACKING_TYPE_4 UNPACKING      
            Animation          
                AnimationName =    CHSS_GB_U_SPCA
                AnimationMode =    ONCE
            End
        End
    
        AnimationState          =    PACKING_TYPE_4 PREPARING
            Animation         
                AnimationName =    CHSS_GB_U_SPCA
                AnimationMode =    ONCE
            End
        End

        AnimationState          =    PACKING_TYPE_4 PACKING
            Animation          
                AnimationName =    CHSS_GB_U_SPCA
                AnimationMode =    ONCE
            End
        End
        


        AnimationState          =    PACKING_TYPE_5 PACKING WEAPONSET_TOGGLE_1
            Animation          
                AnimationName =    CHSS_GB_B_SPCB
                AnimationMode =    ONCE
                AnimationSpeedFactorRange = 0.7333 0.7333
            End
        End
        

        AnimationState          =    PACKING_TYPE_5 PACKING
            Animation          
                AnimationName =    CHSS_GB_U_SPCB
                AnimationMode =    ONCE
            End
        End
        


        AnimationState          =    PACKING_TYPE_6 PACKING
            Animation          
                AnimationName =    CHSS_GB_U_SPCD
                AnimationMode =    ONCE
            End
        End



        AnimationState                = LEVELED WEAPONSET_TOGGLE_1    
            Animation                = LevelUp
                AnimationName        = CHSS_GB_B_CHRA CHSS_GB_B_LVLA
                AnimationMode        = ONCE
            End
        End

        AnimationState                = LEVELED                         
            Animation                = LevelUp
                AnimationName        = CHSS_GB_U_CHRA CHSS_GB_U_LVLA
                AnimationMode        = ONCE
            End
        End




        AnimationState                =    EMOTION_CELEBRATING MOUNTED
            Animation 
                AnimationName        =    CHSS_GB_M_CHRA CHSS_GB_M_IRFA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                =    EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
            Animation 
                AnimationName        =    CHSS_GB_B_CHRA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState                =    EMOTION_CELEBRATING
            Animation = CHRA
                AnimationName        =    CHSS_GB_U_CHRA CHSS_GB_U_TNTA
                AnimationMode        =    ONCE
            End
            Animation = CHRB
                AnimationName        =    CHSS_GB_U_CHRB CHSS_GB_U_CHRA CHSS_GB_U_TNTA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End
        

        AnimationState                =    EMOTION_TAUNTING MOUNTED
            Animation 
                AnimationName        =    CHSS_GB_M_TNTA CHSS_GB_M_IRFA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End
        

        AnimationState                =    EMOTION_TAUNTING WEAPONSET_TOGGLE_1
            Animation 
                AnimationName        =    CHSS_GB_B_TNTA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End
        

        AnimationState                =    EMOTION_TAUNTING
            Animation = CHRA
                AnimationName        =    CHSS_GB_U_TNTA
                AnimationMode        =    ONCE
            End
            Animation = CHRB
                AnimationName        =    CHSS_GB_U_TNTB CHSS_GB_U_TNTA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End
        

        


        AnimationState                = ENGAGED
            StateName                = STATE_ready
            Animation
                AnimationName        = CHSS_GB_U_IDLA
                AnimationMode        = ONCE
            End
        End
        

        AnimationState                = WEAPONSET_TOGGLE_1
            StateName                = STATE_Idle_Bow
            Animation
                AnimationName        =    CHSS_GB_B_IDLA
                AnimationPriority    =    20
                AnimationMode        =    ONCE
                AnimationBlendTime    =    15
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
            EndScript
        End

        IdleAnimationState
            StateName                    = STATE_Idle_Sword    
            Animation = Foot_IDLB 
                AnimationName       = CHSS_GB_U_IDLB
                AnimationMode       = ONCE
                AnimationPriority   = 20
            End
            Animation = Foot_IDLC 
                AnimationName       = CHSS_GB_U_IBFA
                AnimationMode       = ONCE
                AnimationPriority   = 2
            End

            BeginScript
                CurDrawableHideSubObject("arrow")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoredSword") end
                if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
            EndScript
        End
        


        TransitionState = TRANS_BoredToSelectedSword
            Animation = ANTD
                AnimationName    = CHSS_GB_U_ATNA CHSS_GB_U_ATND CHSS_GB_U_IDLA
                AnimationMode    = ONCE
            End        
        End
        
        TransitionState = TRANS_SelectedToBoredSword
            Animation            = ATNF
                AnimationName    = CHSS_GB_U_ATNC CHSS_GB_U_ATNF CHSS_GB_U_ATNE
                AnimationMode    = ONCE
            End        
        End    

        TransitionState = TRANS_BoredToSelectedBow
            Animation = ATNC
                AnimationName        = CHSS_GB_U_ATNF CHSS_GB_U_ATNE
                AnimationMode        = ONCE
            End        
        End
        
        TransitionState = TRANS_CaptainBowToSelectedBow
            Animation = ATNC
                AnimationName        = CHSS_GB_U_ATNF
                AnimationMode        = ONCE
                AnimationBlendTime    = 10
                AnimationSpeedFactorRange = 1.5 1.5
            End        
        End
        
        TransitionState = TRANS_SelectedToBoredBow
            Animation            = ATNA
                AnimationName    = CHSS_GB_U_ATNF
                AnimationMode    = ONCE
            End        
        End    


        TransitionState       = TRANS_BowToSword
            Animation           = CUHero_STHA
                AnimationName     = CHSS_GB_B_STHA
                AnimationMode     = ONCE
            End
        End

        TransitionState       = TRANS_SwordToBow
            Animation           = CUHero_STHB
                AnimationName     = CHSS_GB_U_STHA
                AnimationMode     = ONCE
            End
        End    

        TransitionState               = TRANS_BowToSword_Running
            Animation               = DrawSwords
                AnimationName       = CHSS_GB_B_STHB
                AnimationMode       = ONCE
            End
        End
        
        TransitionState               = TRANS_SwordToBow_Running
            Animation               = DrawBow
                AnimationName       = CHSS_GB_U_STHB
                AnimationMode       = ONCE
            End
        End



         AnimationState        =  SPECIAL_WEAPON_SIX
            StateName = Attacking_throw
            Animation
                AnimationName        = chss_gb_u_atkb
                AnimationMode       = ONCE
                AnimationBlendTime    = 0
                                AnimationSpeedFactorRange = 0.7 0.7
            End
            BeginScript
                CurDrawableShowSubObject("spear")
            EndScript
        End
       
    End


    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side = Wild
    EditorSorting = UNIT
    ThreatLevel = GOBLIN_KING_THREAT_LEVEL
    ThingClass = CHARACTER_UNIT
    TransportSlotCount = TRANSPORTSLOTCOUNT_HERO
    BuildCost           = DURBURZDAG_COST
    BuildTime           = MEDIUM_HERO_BUILDTIME
    BountyValue         = WILD_GOBLIN_KING_BOUNTY_VALUE
    MaxSimultaneousOfType = 1
    DisplayMeleeDamage = WEAK_HERO_DAMAGE

    WeaponSet
        Conditions            = None
        Weapon                = PRIMARY  DurbutzBlade
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = WeakHeroArmorMounted
        DamageFX        = NormalDamageFX
    End


    VisionRange = VISION_STANDARD_HORSE
    ShroudClearingRange = SHROUD_CLEAR_HERO

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    DisplayName = OBJECT:WildDurbutz
    RecruitText = CONTROLBAR:WildDurbutzRecruit
    ReviveText    = CONTROLBAR:WildDurbutzRevive
    Hotkey        = CONTROLBAR:WildDurbutzHotkey
    CrusherLevel = 0
    CrushableLevel = 2
    Scale = 1.05

    CommandSet = WildDurburzCommandSet
    CommandPoints = 0

    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_GoblinKingBody

    AutoResolveArmor
        Armor = AutoResolve_GoblinKingArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_GoblinKingWeapon
    End

    AutoResolveLeadership = AutoResolve_GoblinKingBonus


    VoiceAttack                    = BolgVoiceAttack
    VoiceAttackCharge              = BolgVoiceAttack
    VoiceAttackMachine             = BolgVoiceAttack
    VoiceAttackStructure           = BolgVoiceAttack
    VoiceCreated                   = BolgVoiceSelect
    VoiceFullyCreated              = BolgVoiceSelect
    VoiceGuard                     = BolgVoiceMove
    VoiceMove                      = BolgVoiceMove
    VoiceMoveToCamp                = BolgVoiceMove
    VoiceMoveWhileAttacking        = BolgVoiceMove
    VoicePriority                  = 85
    VoiceSelect                    = BolgVoiceSelect
    VoiceSelectBattle              = BolgVoiceSelectinBattle

    VoiceEnterStateAttackCharge    = BolgVoiceSelect

    CrowdResponseKey = Goblin

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Goblin Hero
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:BodyFallOrc                      Animation:CHSS_GB_U_SKL.CHSS_GB_U_DTHA    Frames:73
        AnimationSound = Sound:BodyFallOrc                      Animation:CHSS_GB_U_SKL.CHSS_GB_U_LNDA    Frames:5
    End



    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance               = 200
        TauntAndPointUpdateDelay            = 10000
        PointAt                             = ANY +HERO
        AddEmotion            =    Doom_Base
        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
        AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base
        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End

    RadarPriority = UNIT
    KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_EACH_OTHER SCORE ARMY_SUMMARY HEAVY_MELEE_HITTER CAN_CLIMB_WALLS
    PathfindDiameter = 40.0

    Body = RespawnBody ModuleTag_RespawnBody
        MaxHealth                  = DURBURZDAG_HEALTH
        PermanentlyKilledByFilter  = NONE
        DodgePercent               = HERO_DODGE_PERCENT
        BurningDeathBehavior       = Yes
        BurningDeathFX             = FX_InfantryBurningFlame
    End


    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                     = DYING
        DeathAnimationTime            = 6500
        RespawnAnim                   = LEVELED
        RespawnAnimationTime          = 2000
        AutoRespawnAtObjectFilter     = NONE +CASTLE_KEEP
        ButtonImage                   = HIDurbutz
        RespawnRules =    AutoSpawn:No           Cost:DURBURZDAG_COST       Time:MEDIUM_HERO_RESPAWNTIME        Health:100%
    End

    Behavior = AutoHealBehavior ModuleTag_GoblinKingHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 1000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End


    Behavior                         = UnpauseSpecialPowerUpgrade ModuleTag_OrkhordeEnabler
        SpecialPowerTemplate         = SpecialAbilityBannerderOrkhorde
        TriggeredBy                  = Upgrade_Level_1
    End

    Behavior                         = OCLSpecialPower ModuleTag_OrkhordeSpecialPower
        SpecialPowerTemplate         = SpecialAbilityBannerderOrkhorde
        OCL                          = OCL_BannerderOrkhorde

        CreateLocation               = CREATE_AT_LOCATION
        StartsPaused                 = No
    End




    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_OCLSpawnMarvelegEnabler
       SpecialPowerTemplate        = SpecialAbilityBannerderOrkhordeKing
       TriggeredBy                 = Upgrade_Level_1
    End
    Behavior = OCLSpecialPower  ModuleTag_OCLSpawnMarveleg
       SpecialPowerTemplate        = SpecialAbilityBannerderOrkhordeKing
       OCL                         = OCL_BannerderOrkhordeKing
       CreateLocation              = CREATE_AT_LOCATION
       StartsPaused                = No
    End
    Behavior = SpecialAbilityUpdate ModuleTag_OCLSpawnMarvelegUpdate
        SpecialPowerTemplate       = SpecialAbilityBannerderOrkhordeKing
        UnpackTime                 = 1
        PreparationTime            = 3
        PackTime                   = 2096
        AwardXPForTriggering       = 0
        FreezeAfterTriggerDuration = 0
    End



    Behavior                         = UnpauseSpecialPowerUpgrade ModuleTag_FledermausschwarmeSummonEnabler
        SpecialPowerTemplate         = SpecialAbilityHalldesNebelgebirges
        TriggeredBy                  = Upgrade_Level_7
    End
    Behavior                         = OCLSpecialPower ModuleTag_FledermausschwarmeOCLSpecialPower
        SpecialPowerTemplate         = SpecialAbilityHalldesNebelgebirges
        OCL                          = OCL_SpawnBolgBatsEgg
        TriggerFX                    = FX_SummonAzogGarde
        CreateLocation               = CREATE_AT_LOCATION
        StartsPaused                 = Yes
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BlutigesAntreibenEnabler
        SpecialPowerTemplate     = SpecialAbilityBlutigesAntreiben
        TriggeredBy              = Upgrade_Level_3
    End
    Behavior = SpecialPowerModule ModuleTag_BlutigesAntreibenPower
        SpecialPowerTemplate     = SpecialAbilityBlutigesAntreiben
        UpdateModuleStartsAttack = Yes
        StartsPaused             = Yes
    End
    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_BlutigesAntreibenUpdate
        SpecialPowerTemplate     = SpecialAbilityBlutigesAntreiben
        SkipContinue             = Yes
        UnpackTime               = 1500
        PreparationTime          = 1
        PersistentPrepTime       = 1000
        PackTime                 = 500
        AwardXPForTriggering     = 0
        StartAbilityRange        = 290
        ApproachRequiresLOS      = Yes
        SpecialWeapon            = BlutigesAntreibenWeapon
        MustFinishAbility        = Yes
        WhichSpecialWeapon       = 2
        BusyForDuration          = 2500
    End

    Behavior = AutoAbilityBehavior ModuleTag_BlutigesAntreibenAutoAbility
        SpecialAbility          = SpecialAbilityBlutigesAntreiben
        MaxScanRange            = #SUBTRACT( SARUMAN_LIGHTNING_RANGE 25 )
        Query                   = 1 ALL -STRUCTURE ALLIES
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BlutigesAntreibenEnablerKing
        SpecialPowerTemplate     = SpecialAbilityBlutigesAntreibenKing
        TriggeredBy              = Upgrade_Level_3
    End
    Behavior = SpecialPowerModule ModuleTag_BlutigesAntreibenPowerKing
        SpecialPowerTemplate     = SpecialAbilityBlutigesAntreibenKing
        UpdateModuleStartsAttack = Yes
        StartsPaused             = Yes
    End
    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_BlutigesAntreibenUpdateKing
        SpecialPowerTemplate     = SpecialAbilityBlutigesAntreibenKing
        SkipContinue             = Yes
        UnpackTime               = 1500
        PreparationTime          = 1
        PersistentPrepTime       = 1000
        PackTime                 = 500
        AwardXPForTriggering     = 0
        StartAbilityRange        = 290
        ApproachRequiresLOS      = Yes
        SpecialWeapon            = BlutigesAntreibenWeaponKing
        MustFinishAbility        = Yes
        WhichSpecialWeapon       = 2
        BusyForDuration          = 2500
    End
    Behavior = AutoAbilityBehavior ModuleTag_BlutigesAntreibenAutoAbilityKing
        SpecialAbility          = SpecialAbilityBlutigesAntreibenKing
        MaxScanRange            = #SUBTRACT( SARUMAN_LIGHTNING_RANGE 25 )
        Query                   = 1 ALL -STRUCTURE ALLIES
    End




    Behavior = SpecialPowerModule ModuleTag_HordenStarter
        SpecialPowerTemplate         = SpecialAbilityDieHordenSammeln
        StartsPaused                 = No
        UpdateModuleStartsAttack     = Yes
    End
    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_HordenUpdate
        SpecialPowerTemplate         = SpecialAbilityDieHordenSammeln
        WhichSpecialWeapon           = 1
        SkipContinue                 = Yes
        FreezeAfterTriggerDuration   = 100
        UnpackTime                   = 1000
        PreparationTime              = 1
        PackTime                     = 100
        AwardXPForTriggering         = 0
        StartAbilityRange            = 270
        SpecialWeapon                = DieHordenSammelnWeapon
    End


    Behavior = AttributeModifierAuraUpdate ModuleTag_HerrderPlunderhordenLeadershipKing
        StartsActive             = No
        BonusName                = DurburzKingLeadership
        TriggeredBy              = Upgrade_GlobalFirstAgeSpell Upgrade_DurbutzCrown
		RequiresAllTriggers		 = Yes
        RefreshDelay             = 2000
        Range                    = 400
        ObjectFilter         = NONE +GoblinFighterHordeUpgraded +GoblinSpearHordeUpgraded +GoblinArcherBolgHorde +WildMarauderSwordHorde +WildMarauderHorde +GoblinSpearUpgraded +GoblinFighterUpgraded +GoblinArcherBolg +WildMarauder +WildMarauderSwords ALLIES
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_UnpauseLeibgarde
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        TriggeredBy               = Upgrade_Level_10
    End
    Behavior = SpecialPowerModule ModuleTag_LeibgardeUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = No
        StartsPaused              = Yes
    End

    Behavior = QueueProductionExitUpdate ModuleTag_Leibgarde
        UnitCreatePoint         = X:-32.0 Y:0.0 Z:0.0
        NaturalRallyPoint       = X:0 Y:0.0 Z:0.0
        ExitDelay               = 300
        NoExitPath              = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters2
        TriggeredBy          = Upgrade_Level_10
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderLeibgarde
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters3
        TriggeredBy          = Upgrade_Level_10
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderLeibgarde2
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters4
        TriggeredBy          = Upgrade_Level_10
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderLeibgarde3
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters5
        TriggeredBy          = Upgrade_Level_10
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderLeibgarde4
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters6
        TriggeredBy          = Upgrade_Level_10
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderLeibgarde5
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters7
        TriggeredBy          = Upgrade_Level_10
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderLeibgarde6
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End


    Behavior = SpawnBehavior ModuleTag_SpawnFighters12
        TriggeredBy          = Upgrade_DurbutzCrown Upgrade_Level_10
        RequiresAllTriggers  = Yes
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderSwordsLeibgarde
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters13
        TriggeredBy          = Upgrade_DurbutzCrown Upgrade_Level_10
        RequiresAllTriggers  = Yes
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderSwordsLeibgarde2
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters14
        TriggeredBy          = Upgrade_DurbutzCrown Upgrade_Level_10
        RequiresAllTriggers  = Yes
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderSwordsLeibgarde3
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters15
        TriggeredBy          = Upgrade_DurbutzCrown Upgrade_Level_10
        RequiresAllTriggers  = Yes
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderSwordsLeibgarde4
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters16
        TriggeredBy          = Upgrade_DurbutzCrown Upgrade_Level_10
        RequiresAllTriggers  = Yes
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderSwordsLeibgarde5
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters17
        TriggeredBy          = Upgrade_DurbutzCrown Upgrade_Level_10
        RequiresAllTriggers  = Yes
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderSwordsLeibgarde6
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End


    #include "..\..\..\includes\CaptureBuilding.inc"

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        BurningDeathTime           = BURNINGDEATH_DURATION_INFANTRY
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL
        Speed     = 52
    End

    LocomotorSet
        Locomotor = BurningDeathLocomotorInfantry
        Condition = SET_BURNINGDEATH
        Speed     = BURNINGDEATH_WANDERSPEED_INFANTRY
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 4500
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL
        SinkDelay = 3000
        SinkRate = 1.40
        DestructionDelay = 8000
        Sound = INITIAL GoblinKingVoiceDie
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 1800
        HitReactionThreshold1 = 5.0
        FastHitsResetReaction = No
    End

    Behavior = CommandSetUpgrade ModueTag_CommandSetKing
        TriggeredBy   = Upgrade_DurbutzCrown
        CommandSet    = WildDurburzCommandSetKing
    End
	
	; Behavior = CommandSetUpgrade ModueTag_CommandSetKing
        ; TriggeredBy   = Upgrade_DurbutzCrown
        ; CommandSet    = WildDurburzCommandSetKing
    ; End

    Behavior = GrantUpgradeCreate ModuleTag_VoraussetzungKrone
        UpgradeToGrant      = Upgrade_AbendsternSpellbook
        GiveOnBuildComplete = Yes
    End



    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName  = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName  = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName  = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate ElvenLorienWarriorHordeCaptureBuildingAI
        CommandButtonName  = Command_CaptureBuilding
        SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
    End

    Behavior = AISpecialPowerUpdate TrainAlliesL1AI
        CommandButtonName = Command_SpecialAbilityBannerderOrkhorde
        SpecialPowerAIType = AI_SPECIAL_POWER_GIVEXP_AOE
    End

    Behavior = AISpecialPowerUpdate TrainAlliesL3AI
        CommandButtonName = Command_BlutigesAntreibenBolg
        SpecialPowerAIType = AI_SPECIAL_POWER_GIVEXP_AOE
    End

    Behavior = AISpecialPowerUpdate SummonAlliesHotWL1AI
        CommandButtonName = Command_DurbutzHallderNebelberge
        SpecialPowerAIType = AI_SPECIAL_POWER_TARGETAOE_SUMMON
        SpecialPowerRadius = 30.0
    End

    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes
    Shadow = SHADOW_DECAL
    ShadowSizeX = 20
    ShadowSizeY = 20
    ShadowTexture = ShadowI
End


Object WildDurburz_old

    SelectPortrait = HPDurbutz
    ButtonImage    = HIDurbutz

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_GoblinKing

    Draw = W3DScriptedModelDraw ModuleTag_DRAW

     RandomTexture = wudurbutzhead.tga  0 CHSS_OR_gear_02.tga
     RandomTexture = wudurbutzshldr.tga  0 CHSS_OR_gear_01.tga
     RandomTexture = chss_or.tga  0 wudurbutz.tga

     DefaultModelConditionState
        Model                = WUDurbutz_SKN
        Skeleton             = CHSS_GB_U_SKL
        WeaponLaunchBone     = PRIMARY B_HandR
    End


    IdleAnimationState
        Animation = IDLB
            AnimationName = CHSS_GB_U_IDLB
            AnimationMode = ONCE
            AnimationPriority = 20
        End
        Animation = IDLG
            AnimationName = CHSS_GB_U_IDLG
            AnimationMode = ONCE
            AnimationPriority = 1
        End
        Animation = IDLD
            AnimationName = CHSS_GB_U_IDLD
            AnimationMode = ONCE
            AnimationPriority = 2
        End
        StateName = Idle
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoard") end
        EndScript
    End


    AnimationState                        = PASSENGER
        Animation                        = Falling
            AnimationName                = CHSS_GB_U_FLLA
            AnimationMode                = LOOP
        End
    End

    AnimationState                        = FREEFALL
        Animation                        = FLYA
            AnimationName                = CHSS_GB_U_FLYA
            AnimationMode                = LOOP
            AnimationSpeedFactorRange    = 0.5    0.5
            AnimationBlendTime            = 5
        End
    End

    AnimationState            = STUNNED_FLAILING
        Animation           = StunFlail
            AnimationName   = CHSS_GB_U_FLYA
            AnimationMode   = LOOP
            AnimationSpeedFactorRange    = 0.4 0.6
        End
        Flags                        = MAINTAIN_FRAME_ACROSS_STATES2
    End

    AnimationState            = DYING BURNINGDEATH
        Animation
            AnimationName    = CHSS_GB_U_DIEA
            AnimationMode    = ONCE
            AnimationBlendTime = 10
        End
        Animation
            AnimationName    = CHSS_GB_U_DIEB
            AnimationMode    = ONCE
            AnimationBlendTime = 20
        End
        Animation
            AnimationName    = CHSS_GB_U_DIEC
            AnimationMode    = ONCE
            AnimationBlendTime = 20
        End
        Animation
            AnimationName    = CHSS_GB_U_DIEG
            AnimationMode    = ONCE
            AnimationBlendTime = 20
        End
    End

    AnimationState            = DYING SPLATTED
        Animation            = Splat
            AnimationName    = CHSS_GB_U_LNDA
            AnimationMode    = ONCE
        End
    End

    AnimationState = DYING
        Animation = DIEA
            AnimationName = CHSS_GB_U_DIEA
            AnimationMode = ONCE
            AnimationPriority = 1
            AnimationSpeedFactorRange    =    0.8 1.25
        End
        Animation = DIEB
            AnimationName = CHSS_GB_U_DIEB
            AnimationMode = ONCE
            AnimationPriority = 3
            AnimationSpeedFactorRange    =    0.8 1.25
        End
        Animation = DIEC
            AnimationName = CHSS_GB_U_DIEC
            AnimationMode = ONCE
            AnimationPriority = 2
            AnimationSpeedFactorRange    =    0.8 1.25
        End
        Animation = DIEG
            AnimationName = CHSS_GB_U_DIEG
            AnimationMode = ONCE
            AnimationPriority = 10
            AnimationSpeedFactorRange    =    0.8 1.25
        End
    End

    AnimationState            = BURNINGDEATH
        Animation
            AnimationName    = CHSS_GB_U_MFDA
            AnimationMode    = LOOP
            Distance        = 50
        End
    End

    AnimationState                        = PARALYZED
        Animation
            AnimationName                = CHSS_GB_U_IDLA
            AnimationMode                = LOOP
        End
    End


    AnimationState        = STUNNED
        Animation           = LNDA
            AnimationName     = CHSS_GB_U_LNDA
            AnimationMode     = ONCE
        End
    End

    AnimationState        = STUNNED_STANDING_UP
        Animation           = GTPA
            AnimationName     = CHSS_GB_U_GTPA
            AnimationMode     = ONCE
            AnimationSpeedFactorRange = 1.5 1.5
        End
    End

    AnimationState        = THROWN_PROJECTILE
        Animation           = FLYA
            AnimationName     = CHSS_GB_U_FLYA
            AnimationMode     = LOOP
        End
    End

    AnimationState = MOVING FIRING_OR_PREATTACK_A
        Animation = TrotAndFire
            AnimationName = CHSS_GB_U_ATRA
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART

    End
    AnimationState = MOVING EMOTION_TERROR
        Animation = TERRORIZED
            AnimationName = CHSS_GB_U_RUNC
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART
        ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = MOVING BACKING_UP
        Animation = BackingUp
            AnimationName = CHSS_GB_U_BAKA
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART
    End

    AnimationState = MOVING WEAPONSET_HERO_MODE
        Animation = Moving
            AnimationName = CHSS_GB_U_MFDA
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART
        ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = MOVING
        Animation = Moving
            AnimationName = CHSS_GB_U_RUNA
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART
        ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = MOVING HERO
        Animation = Moving
            AnimationName = CHSS_GB_U_MFDA
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART
        ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = MOVING FIRING_OR_PREATTACK_A HERO
        Animation = TrotAndFire
            AnimationName = CHSS_GB_U_ATRA
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART

    End

    AnimationState = MOVING FIRING_OR_PREATTACK_A WEAPONSET_HERO_MODE
        Animation = TrotAndFire
            AnimationName = CHSS_GB_U_MFDA
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART
        ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = FIRING_OR_PREATTACK_C
        Animation
            AnimationName = CHSS_GB_U_MFDA
            AnimationMode = ONCE

        End
    End

    AnimationState  = HERO
        Animation = IDLA
            AnimationName = CHSS_GB_U_MFDA
            AnimationMode = ONCE
            AnimationPriority = 20
        End
        StateName = Idle
    End

    AnimationState  = WEAPONSET_HERO_MODE
        Animation = IDLA
            AnimationName = CHSS_GB_U_MFDA
            AnimationMode = ONCE
            AnimationPriority = 20
        End
        StateName = Idle
    End

    AnimationState        = SELECTED WEAPONSET_HERO_MODE
        StateName           = STATE_Selected
        Animation           = ATNB
            AnimationName     = CHSS_GB_U_MFDA
            AnimationMode     = LOOP
        End
    End

    AnimationState        = SELECTED HERO
        StateName           = STATE_Selected
        Animation           = ATNB
            AnimationName     = CHSS_GB_U_MFDA
            AnimationMode     = LOOP
        End
    End



        AnimationState = HIT_REACTION HIT_LEVEL_1
            Animation = Hit_Level_1_a
                AnimationName = CHSS_GB_U_HITC
                AnimationMode = ONCE
            End
            Animation = Hit_Level_1_a
                AnimationName = CHSS_GB_U_HITE
                AnimationMode = ONCE
            End
        End

        AnimationState = HIT_REACTION HIT_LEVEL_2
            Animation = Hit_Level_1_a
                AnimationName = CHSS_GB_U_HITD
                AnimationMode = ONCE
           End
        End

    AnimationState = FIRING_OR_PREATTACK_A
        Animation = ATKA
            AnimationName = CHSS_GB_U_ATKA
            AnimationMode = ONCE
            UseWeaponTiming    = Yes
            AnimationPriority    =    5
        End
        Animation = ATKC
            AnimationName = CHSS_GB_U_ATKC
            AnimationMode = ONCE
            UseWeaponTiming    = Yes
            AnimationPriority    =    5


        End
        Animation = ATKB
            AnimationName = CHSS_GB_U_ATKB
            AnimationMode = ONCE
            UseWeaponTiming    = Yes
            AnimationPriority    =    5

        End
    End

    AnimationState = SPECIAL_WEAPON_ONE
        Animation = SPCB
            AnimationName = CHSS_GB_U_SPCB
            AnimationMode = ONCE
        End
    End

    AnimationState = SPECIAL_WEAPON_TWO
        Animation = CINA
            AnimationName = CHSS_GB_U_CINA
            AnimationMode = ONCE
        End
    End



    AnimationState = WAR_CHANT
        Animation = Chant
            AnimationName = CHSS_GB_U_TNTA
            AnimationMode = LOOP
        End
    End

    AnimationState                            = EMOTION_UNCONTROLLABLY_AFRAID
        Animation                            = FERA
            AnimationName                    = CHSS_GB_U_FERA
            AnimationMode                    = LOOP
        End
        Flags = RANDOMSTART
    End



    AnimationState                            = EMOTION_AFRAID
        Animation                            = FERA
            AnimationName                    = CHSS_GB_U_FERA
            AnimationMode                    = LOOP
        End
        Flags = RANDOMSTART
    End

    AnimationState = BETWEEN_FIRING_SHOTS_A
        Animation = Wait
            AnimationName = CHSS_GB_U_IDLA
            AnimationMode = ONCE
        End
    End

     AnimationState = ATTACKING
        Animation = IdleAllAttacksComeFrom
            AnimationName = CHSS_GB_U_IDLA
            AnimationMode = LOOP
        End
    End

    AnimationState                            = EMOTION_TAUNTING
        Animation                            = TNTA
            AnimationName                    = CHSS_GB_U_TNTA
            AnimationMode                    = LOOP
            AnimationBlendTime                = 10
            AnimationSpeedFactorRange        = 0.8 1.2
        End
        Flags                                = RANDOMSTART
    End

    AnimationState                            = EMOTION_POINTING
        Animation                            = Pointing1
            AnimationName                    = CHSS_GB_U_PNTA
            AnimationMode                    = LOOP
        End
        Flags                                = RANDOMSTART
    End

    AnimationState                            = EMOTION_CELEBRATING
        Animation                            = CHRA
            AnimationName                    = CHSS_GB_U_CHRA
            AnimationMode                    = ONCE
            AnimationBlendTime                = 10
        End
        Animation                            = CHRB
            AnimationName                    = CHSS_GB_U_CHRB
            AnimationMode                    = ONCE
            AnimationBlendTime                = 10
        End
        Animation                            = TNTA
            AnimationName                    = CHSS_GB_U_TNTA
            AnimationMode                    = ONCE
            AnimationBlendTime                = 10
        End
        Flags                = RESTART_ANIM_WHEN_COMPLETE
    End

    AnimationState                            = EMOTION_ALERT
        Animation                            = ALERT
            AnimationName                    = CHSS_GB_U_IDLA
            AnimationMode                    = LOOP
        End
        Flags                                = RESTART_ANIM_WHEN_COMPLETE RANDOMSTART
    End


    AnimationState        = RAISING_FLAG
        Animation
            AnimationName = CHSS_GB_U_CHRA
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 0.9 1.1
        End
        Animation
            AnimationName = CHSS_GB_U_CHRB
            AnimationMode = ONCE
            AnimationSpeedFactorRange = 0.9 1.1
        End
        Flags = RESTART_ANIM_WHEN_COMPLETE
    End

    AnimationState        = SELECTED
        StateName           = STATE_Selected
        Animation           = ATNB
            AnimationName     = CHSS_GB_U_ATNB
            AnimationMode     = LOOP
        End
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_IdleToSelected") end
        EndScript
    End

    TransitionState       = TRANS_IdleToSelected
        Animation           = ATNA
            AnimationName     = CHSS_GB_U_ATNA
            AnimationMode     = ONCE
            AnimationSpeedFactorRange = 0.9 1.0
        End
    End

    TransitionState       = TRANS_SelectedToGuard
        Animation           = ATNB
            AnimationName     = CHSS_GB_U_ATNB
            AnimationMode     = ONCE
            AnimationSpeedFactorRange = 0.9 1.0
        End
    End

    TransitionState        = TRANS_SelectedToBoard
        Animation            = ATNC
            AnimationName    = CHSS_GB_U_ATNC
            AnimationMode    = ONCE
            AnimationSpeedFactorRange = 0.9 1.0
        End
    End

End


    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side = Wild
    EditorSorting = UNIT
    ThreatLevel = GOBLIN_KING_THREAT_LEVEL
    ThingClass = CHARACTER_UNIT
    TransportSlotCount = TRANSPORTSLOTCOUNT_HERO
    BuildCost           = DURBURZDAG_COST
    BuildTime           = MEDIUM_HERO_BUILDTIME
    BountyValue         = WILD_GOBLIN_KING_BOUNTY_VALUE
    MaxSimultaneousOfType = 1
    DisplayMeleeDamage = WEAK_HERO_DAMAGE

    WeaponSet
        Conditions            = None
        Weapon                = PRIMARY  DurbutzBlade
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = WeakHeroArmorMounted
        DamageFX        = NormalDamageFX
    End


    VisionRange = VISION_STANDARD_HORSE
    ShroudClearingRange = SHROUD_CLEAR_HERO

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    DisplayName = OBJECT:WildDurbutz
    RecruitText = CONTROLBAR:WildDurbutzRecruit
    ReviveText    = CONTROLBAR:WildDurbutzRevive
    Hotkey        = CONTROLBAR:WildDurbutzHotkey
    CrusherLevel = 0
    CrushableLevel = 2
    Scale = 1.05

    CommandSet = WildDurburzCommandSet
    CommandPoints = 0




    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_GoblinKingBody

    AutoResolveArmor
        Armor = AutoResolve_GoblinKingArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_GoblinKingWeapon
    End

    AutoResolveLeadership = AutoResolve_GoblinKingBonus


    VoiceAttack                    = BolgVoiceAttack
    VoiceAttackCharge              = BolgVoiceAttack
    VoiceAttackMachine             = BolgVoiceAttack
    VoiceAttackStructure           = BolgVoiceAttack
    VoiceCreated                   = BolgVoiceSelect
    VoiceFullyCreated              = BolgVoiceSelect
    VoiceGuard                     = BolgVoiceMove
    VoiceMove                      = BolgVoiceMove
    VoiceMoveToCamp                = BolgVoiceMove
    VoiceMoveWhileAttacking        = BolgVoiceMove
    VoicePriority                  = 85
    VoiceSelect                    = BolgVoiceSelect
    VoiceSelectBattle              = BolgVoiceSelectinBattle

    VoiceEnterStateAttackCharge    = BolgVoiceSelect

    CrowdResponseKey = Goblin

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Goblin Hero
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:BodyFallOrc                      Animation:CHSS_GB_U_SKL.CHSS_GB_U_DTHA    Frames:73
        AnimationSound = Sound:BodyFallOrc                      Animation:CHSS_GB_U_SKL.CHSS_GB_U_LNDA    Frames:5
    End



    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance               = 200
        TauntAndPointUpdateDelay            = 10000
        PointAt                             = ANY +HERO
        AddEmotion            =    Doom_Base
        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
        AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base
        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End

    RadarPriority = UNIT
    KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_EACH_OTHER SCORE ARMY_SUMMARY HEAVY_MELEE_HITTER CAN_CLIMB_WALLS
    PathfindDiameter = 40.0

    Body = RespawnBody ModuleTag_RespawnBody
        MaxHealth                  = DURBURZDAG_HEALTH
        PermanentlyKilledByFilter  = NONE
        DodgePercent               = HERO_DODGE_PERCENT
        BurningDeathBehavior       = Yes
        BurningDeathFX             = FX_InfantryBurningFlame
    End


    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                     = DYING
        DeathAnimationTime            = 6500
        RespawnAnim                   = LEVELED
        RespawnAnimationTime          = 2000
        AutoRespawnAtObjectFilter     = NONE +CASTLE_KEEP
        ButtonImage                   = HIDurbutz

        RespawnRules =    AutoSpawn:No           Cost:DURBURZDAG_COST       Time:MEDIUM_HERO_RESPAWNTIME        Health:100%
    End

    Behavior = AutoHealBehavior ModuleTag_GoblinKingHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 1000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End





    Behavior                         = UnpauseSpecialPowerUpgrade ModuleTag_OrkhordeEnabler
        SpecialPowerTemplate         = SpecialAbilityBannerderOrkhorde
        TriggeredBy                  = Upgrade_Level_1
    End

    Behavior                         = OCLSpecialPower ModuleTag_OrkhordeSpecialPower
        SpecialPowerTemplate         = SpecialAbilityBannerderOrkhorde
        OCL                          = OCL_BannerderOrkhorde

        CreateLocation               = CREATE_AT_LOCATION
        StartsPaused                 = No
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_OCLSpawnMarvelegEnabler
       SpecialPowerTemplate        = SpecialAbilityBannerderOrkhordeKing
       TriggeredBy                 = Upgrade_Level_1
    End

    Behavior = OCLSpecialPower  ModuleTag_OCLSpawnMarveleg
       SpecialPowerTemplate        = SpecialAbilityBannerderOrkhordeKing
       OCL                         = OCL_BannerderOrkhordeKing
       CreateLocation              = CREATE_AT_LOCATION
       StartsPaused                = No
    End

    Behavior = SpecialAbilityUpdate ModuleTag_OCLSpawnMarvelegUpdate
        SpecialPowerTemplate       = SpecialAbilityBannerderOrkhordeKing
        UnpackTime                 = 1
        PreparationTime            = 3
        PackTime                   = 2096
        AwardXPForTriggering       = 0
        FreezeAfterTriggerDuration = 0
    End







    Behavior                         = UnpauseSpecialPowerUpgrade ModuleTag_FledermausschwarmeSummonEnabler
        SpecialPowerTemplate         = SpecialAbilityHalldesNebelgebirges
        TriggeredBy                  = Upgrade_Level_7
    End

    Behavior                         = OCLSpecialPower ModuleTag_FledermausschwarmeOCLSpecialPower
        SpecialPowerTemplate         = SpecialAbilityHalldesNebelgebirges
        OCL                          = OCL_SpawnBolgBatsEgg
        TriggerFX                    = FX_SummonAzogGarde
        CreateLocation               = CREATE_AT_LOCATION
        StartsPaused                 = Yes
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BlutigesAntreibenEnabler
        SpecialPowerTemplate     = SpecialAbilityBlutigesAntreiben
        TriggeredBy              = Upgrade_Level_3
    End

    Behavior = SpecialPowerModule ModuleTag_BlutigesAntreibenPower
        SpecialPowerTemplate     = SpecialAbilityBlutigesAntreiben
        UpdateModuleStartsAttack = Yes
        StartsPaused             = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_BlutigesAntreibenUpdate
        SpecialPowerTemplate     = SpecialAbilityBlutigesAntreiben
        SkipContinue             = Yes
        UnpackTime               = 1500
        PreparationTime          = 1
        PersistentPrepTime       = 1000
        PackTime                 = 500
        AwardXPForTriggering     = 0
        StartAbilityRange        = 290
        ApproachRequiresLOS      = Yes
        SpecialWeapon            = BlutigesAntreibenWeapon
        MustFinishAbility        = Yes
        WhichSpecialWeapon       = 2
        BusyForDuration          = 2500
    End

    Behavior = AutoAbilityBehavior ModuleTag_BlutigesAntreibenAutoAbility
        SpecialAbility          = SpecialAbilityBlutigesAntreiben
        MaxScanRange            = #SUBTRACT( SARUMAN_LIGHTNING_RANGE 25 )
        Query                   = 1 ALL -STRUCTURE ALLIES
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BlutigesAntreibenEnablerKing
        SpecialPowerTemplate     = SpecialAbilityBlutigesAntreibenKing
        TriggeredBy              = Upgrade_Level_3
    End

    Behavior = SpecialPowerModule ModuleTag_BlutigesAntreibenPowerKing
        SpecialPowerTemplate     = SpecialAbilityBlutigesAntreibenKing
        UpdateModuleStartsAttack = Yes
        StartsPaused             = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_BlutigesAntreibenUpdateKing
        SpecialPowerTemplate     = SpecialAbilityBlutigesAntreibenKing
        SkipContinue             = Yes
        UnpackTime               = 1500
        PreparationTime          = 1
        PersistentPrepTime       = 1000
        PackTime                 = 500
        AwardXPForTriggering     = 0
        StartAbilityRange        = 290
        ApproachRequiresLOS      = Yes
        SpecialWeapon            = BlutigesAntreibenWeaponKing
        MustFinishAbility        = Yes
        WhichSpecialWeapon       = 2
        BusyForDuration          = 2500
    End

    Behavior = AutoAbilityBehavior ModuleTag_BlutigesAntreibenAutoAbilityKing
        SpecialAbility          = SpecialAbilityBlutigesAntreibenKing
        MaxScanRange            = #SUBTRACT( SARUMAN_LIGHTNING_RANGE 25 )
        Query                   = 1 ALL -STRUCTURE ALLIES
    End







    Behavior = SpecialPowerModule ModuleTag_HordenStarter
        SpecialPowerTemplate         = SpecialAbilityDieHordenSammeln
        StartsPaused                 = No
        UpdateModuleStartsAttack     = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_HordenUpdate
        SpecialPowerTemplate         = SpecialAbilityDieHordenSammeln
        WhichSpecialWeapon           = 1
        SkipContinue                 = Yes
        FreezeAfterTriggerDuration   = 100
        UnpackTime                   = 1000
        PreparationTime              = 1
        PackTime                     = 100
        AwardXPForTriggering         = 0
        StartAbilityRange            = 270
        SpecialWeapon                = DieHordenSammelnWeapon
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_UnpauseLeibgarde
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        TriggeredBy               = Upgrade_Level_10
    End

    Behavior = SpecialPowerModule ModuleTag_LeibgardeUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = No
        StartsPaused              = Yes
    End

    Behavior = QueueProductionExitUpdate ModuleTag_Leibgarde
        UnitCreatePoint         = X:-32.0 Y:0.0 Z:0.0
        NaturalRallyPoint       = X:0 Y:0.0 Z:0.0
        ExitDelay               = 300
        NoExitPath              = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters2
        TriggeredBy          = Upgrade_Level_10
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderLeibgarde
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters3
        TriggeredBy          = Upgrade_Level_10
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderLeibgarde2
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters4
        TriggeredBy          = Upgrade_Level_10
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderLeibgarde3
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters5
        TriggeredBy          = Upgrade_Level_10
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderLeibgarde4
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters6
        TriggeredBy          = Upgrade_Level_10
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderLeibgarde5
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters7
        TriggeredBy          = Upgrade_Level_10
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderLeibgarde6
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End


    Behavior = SpawnBehavior ModuleTag_SpawnFighters12
        TriggeredBy          = Upgrade_DurbutzCrown Upgrade_Level_10
        RequiresAllTriggers  = Yes
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderSwordsLeibgarde
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters13
        TriggeredBy          = Upgrade_DurbutzCrown Upgrade_Level_10
        RequiresAllTriggers  = Yes
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderSwordsLeibgarde2
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters14
        TriggeredBy          = Upgrade_DurbutzCrown Upgrade_Level_10
        RequiresAllTriggers  = Yes
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderSwordsLeibgarde3
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters15
        TriggeredBy          = Upgrade_DurbutzCrown Upgrade_Level_10
        RequiresAllTriggers  = Yes
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderSwordsLeibgarde4
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters16
        TriggeredBy          = Upgrade_DurbutzCrown Upgrade_Level_10
        RequiresAllTriggers  = Yes
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderSwordsLeibgarde5
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters17
        TriggeredBy          = Upgrade_DurbutzCrown Upgrade_Level_10
        RequiresAllTriggers  = Yes
        SpawnNumber          = 1
        InitialBurst         = 1
        SpawnTemplateName    = WildMarauderSwordsLeibgarde6
        SpawnReplaceDelay    = 10000
        FadeInTime           = 1000
        CanReclaimOrphans    = Yes
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End



    #include "..\..\..\includes\CaptureBuilding.inc"

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        BurningDeathTime           = BURNINGDEATH_DURATION_INFANTRY
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL
        Speed     = 52
    End

    LocomotorSet
        Locomotor = BurningDeathLocomotorInfantry
        Condition = SET_BURNINGDEATH
        Speed     = BURNINGDEATH_WANDERSPEED_INFANTRY
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 4500
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL
        SinkDelay = 3000
        SinkRate = 1.40
        DestructionDelay = 8000
        Sound = INITIAL GoblinKingVoiceDie
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 1800
        HitReactionThreshold1 = 5.0
        FastHitsResetReaction = No
    End

    Behavior = CommandSetUpgrade ModueTag_CommandSetKing
        TriggeredBy   = Upgrade_DurbutzCrown
        CommandSet    = WildDurburzCommandSetKing
    End

    Behavior = GrantUpgradeCreate ModuleTag_VoraussetzungKrone
        UpgradeToGrant      = Upgrade_AbendsternSpellbook
        GiveOnBuildComplete = Yes
    End






    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName  = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName  = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName  = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate ElvenLorienWarriorHordeCaptureBuildingAI
        CommandButtonName  = Command_CaptureBuilding
        SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
    End


    Behavior = AISpecialPowerUpdate TrainAlliesL1AI
        CommandButtonName = Command_SpecialAbilityBannerderOrkhorde
        SpecialPowerAIType = AI_SPECIAL_POWER_GIVEXP_AOE
    End

    Behavior = AISpecialPowerUpdate TrainAlliesL3AI
        CommandButtonName = Command_BlutigesAntreibenBolg
        SpecialPowerAIType = AI_SPECIAL_POWER_GIVEXP_AOE
    End

    Behavior = AISpecialPowerUpdate SummonAlliesHotWL1AI
        CommandButtonName = Command_DurbutzHallderNebelberge
        SpecialPowerAIType = AI_SPECIAL_POWER_TARGETAOE_SUMMON
        SpecialPowerRadius = 30.0
    End

    Geometry = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryMinorRadius = 8.0
    GeometryHeight = 19.2
    GeometryIsSmall = Yes
    Shadow = SHADOW_DECAL
    ShadowSizeX = 20
    ShadowSizeY = 20
    ShadowTexture = ShadowI
End