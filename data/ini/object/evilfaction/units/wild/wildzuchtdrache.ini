Object WildZuchtdracheBaby

    SelectPortrait = HPSummonedDragon
    ButtonImage    = HISummonedDragon

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_WildZuchtdracheBaby

    Draw = W3DScriptedModelDraw ModuleTag_01
        StaticModelLODMode = Yes

        RandomTextureFixedRandomIndex    = Yes
        RandomTexture                    = SumnDragonD_C.tga     0 SumnDragon_C.tga
        RandomTexture                    = SumnDragonD2_C.tga    0 SumnDragon2_C.tga

        DefaultModelConditionState
            Model = Zuchtdrache_SKN
            Skeleton = SumnDrag_SKL
            ParticleSysBone = B_MAINBONE SummonedDragonWaves    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonSmokeWaves FollowBone:Yes
        End


        IdleAnimationState
            StateName = STATE_Idle
            Animation = Breathe
                AnimationName = SumnDrag_IDLA
                AnimationMode = ONCE
                AnimationPriority = 5
            End
            ParticleSysBone = BAT_HEAD SummonedDragonFireSnort    FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonSnortEmbers    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonWaves    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonSmokeWaves FollowBone:Yes

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Selected"    then
                CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle") return end
            EndScript
        End












        AnimationState                    =    DYING DEATH_1
            Animation                    =    Dying
                AnimationName            =    SumnDrag_DIEA
                AnimationMode            =    ONCE
                AnimationBlendTime        =    15
            End
            ParticleSysBone = BAT_HEAD SummonedDragonDeathEmbers        FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonDeathSmoke            FollowBone:Yes
            ParticleSysBone = NONE SummonedDragonDeathDust        FollowBone:Yes

        End

        AnimationState                    =    DYING DEATH_2
            Animation                    =    JumpingAwayAtTimeUp
                AnimationName            =    SumnDrag_JMPB
                AnimationMode            =    ONCE
                AnimationBlendTime        =    15
            End
            ParticleSysBone = BAT_HEAD SummonedDragonDeathEmbers        FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonDeathSmoke            FollowBone:Yes
        End

        AnimationState = FIRING_OR_PREATTACK_A MOVING
            Animation
                AnimationName                = SumnDrag_WLKA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 1.3 1.3
            End
            ParticleSysBone = B_MAINBONE SummonedDragonWaves    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonSmokeWaves FollowBone:Yes
        End

        AnimationState = FIRING_OR_PREATTACK_A
            Animation            = Burninate
                AnimationName    = SumnDrag_ATKA
                AnimationMode    = ONCE
            End
            ParticleSysBone = BAT_HEAD SummonedDragonFireBreath2    FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonHeat    FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonEmbers        FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonSmoke            FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonFireProxy2            FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonWaves    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonSmokeWaves FollowBone:Yes
        End

        AnimationState = HIT_REACTION HIT_LEVEL_1
            Animation
                AnimationName    = SumnDrag_HITA
                AnimationMode    = ONCE
            End
        End

        AnimationState = MOVING TURN_RIGHT_HIGH_SPEED
            Animation
                AnimationName    = SumnDrag_WLKA
                AnimationMode    = LOOP
                AnimationSpeedFactorRange = 1.8 1.8
                AnimationBlendTime        =    15
            End
        End

        AnimationState = MOVING TURN_LEFT_HIGH_SPEED
            Animation
                AnimationName    = SumnDrag_WLKA
                AnimationMode    = LOOP
                AnimationSpeedFactorRange = 1.8 1.8
                AnimationBlendTime        =    15
            End
        End

        AnimationState = TURN_LEFT
            Animation            = Left
                AnimationName    = SumnDrag_TRNL
                AnimationMode    = LOOP
                AnimationSpeedFactorRange = 0.85 0.85
                AnimationBlendTime        =    15
            End
        End

        AnimationState = TURN_RIGHT
            Animation            = YourOtherLeft
                AnimationName    = SumnDrag_TRNR
                AnimationMode    = LOOP
                AnimationSpeedFactorRange = 0.85 0.85
                AnimationBlendTime        =    15
            End
        End

        AnimationState = MOVING ACCELERATE
            Animation
                AnimationName    = SumnDrag_ACCL
                AnimationMode    = ONCE
                AnimationSpeedFactorRange = 2.0 2.0
                AnimationBlendTime        =    15
            End
        End

        AnimationState = MOVING DECELERATE
            Animation
                AnimationName    = SumnDrag_DECL
                AnimationMode    = ONCE
                AnimationSpeedFactorRange = 0.9 0.9
            End

        End

































        AnimationState = MOVING
            Animation
                AnimationName    = SumnDrag_WLKA
                AnimationMode    = LOOP
                AnimationSpeedFactorRange = 1.4 1.4
            End
        End

        AnimationState = SELECTED
            Animation
                AnimationName    = SumnDrag_IDLA
                AnimationMode    = LOOP
                AnimationSpeedFactorRange = 1.3 1.3
            End

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Idle"    then
                    CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected")
                    return
                end
            EndScript
        End

        TransitionState = TRANS_Idle_to_Selected
            Animation            = Salute
                AnimationName    = SumnDrag_RORA
                AnimationMode    = ONCE
            End
            ParticleSysBone = BAT_HEAD SummonedDragonFireRoar    FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonSmokeRoar    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonWaves    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonSmokeWaves FollowBone:Yes
        End

        TransitionState = TRANS_Selected_to_Idle
            Animation            = ATNC
                AnimationName    = SumnDrag_IDLA
                AnimationMode    = ONCE
            End
        End

        TransitionState = TRANS_JustBuilt_To_Idle
            Animation = BeingSummoned
                AnimationName = SumnDrag_LNDA
                AnimationMode = ONCE
            End
        End
    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbigbox
        End
    End

    Side                 = Wild
    EditorSorting        = UNIT
    ThreatLevel          = FIRE_DRAKE_THREAT_LEVEL
    CommandSet           = ZuchtdracheBabyCommandSet
    ShockwaveResistance  = SHOCKWAVE_RESISTANCE_ALWAYS
    ShroudClearingRange  = SHROUD_CLEAR_GIANT
    VisionRange          = 200
    TransportSlotCount   = TRANSPORTSLOTCOUNT_MONSTER
    KindOf               = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT SCORE

    ThreatLevel          = SUMMONEDDRAGON_THREAT_LEVEL
    RadarPriority        = UNIT
    CommandPoints        = 30
    BuildTime            = ELITE_BUILDTIME
    BuildCost            = 800
    MaxSimultaneousOfType = 3
    Scale                = 0.4
    DisplayName          = OBJECT:WildBabyZuchtdrache
    BountyValue          = FIREDRAKE_BOUNTY_VALUE


    ThreatBreakdown GoblinFighterHorde_DetailedThreat
        AIKindOf = CAVALRY
    End

    WeaponSet
        Conditions = None
        Weapon     = PRIMARY    ZuchtdracheBabyFireBreath
    End

    ArmorSet
        Conditions = None
        Armor      = EdainSmallDragonArmor
        DamageFX   = NormalDamageFX
    End

    Body = ActiveBody ModuleTag_Body
        MaxHealth  = 5000
    End





    VoiceAttack                            = FireDrakeVoxAttack
    VoiceAttackAir                        = FireDrakeVoxAttack
    VoiceAttackCharge                    = FireDrakeVoxAttack
    VoiceAttackMachine                    = FireDrakeVoxAttack
    VoiceAttackStructure                = FireDrakeVoxAttack
    VoiceCreated                        = EVA:FireDrakeCreated
    VoiceCreated                        = +SOUND:FireDrakeVoxCreated
    VoiceFullyCreated                    = EVA:FireDrakeCreated
    VoiceFullyCreated                    = +SOUND:FireDrakeVoxCreated
    VoiceGuard                            = FireDrakeVoxMove
    VoiceMove                            = FireDrakeVoxMove
    VoiceMoveToCamp                        = FireDrakeVoxMove
    VoiceMoveWhileAttacking                = FireDrakeVoxMove
    VoicePriority                        = 55
    VoiceRetreatToCastle                = FireDrakeVoxMove
    VoiceSelect                            = FireDrakeVoxSelectMS
    VoiceSelectBattle                     = FireDrakeVoxSelectMS

    SoundImpact                    = ImpactHorse
    SoundAmbient                = FireDrakeVoxAmbientLoop

    UnitSpecificSounds
        VoiceEnterUnitEvilMenTransportShip    = FireDrakeVoxMove
        VoiceEnterUnitMordorMumakil            = FireDrakeVoxMove
        VoiceEnterUnitSlaughterHouse        = FireDrakeVoxMove
        VoiceGarrison                        = FireDrakeVoxMove
        VoiceInitiateCaptureBuilding        = FireDrakeVoxMove
    End

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:FIRING_OR_PREATTACK_A        Excluded:DYING    Sound:DragonAllyFirebreathMS
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_WLKA     Frames: 19 40
        AnimationSound = Sound: BalrogLand                Animation:SumnDrag_SKL.SumnDrag_LNDA     Frames: 27
        AnimationSound = Sound: FellBeastWingFlaps        Animation:SumnDrag_SKL.SumnDrag_LNDA     Frames: 27
        AnimationSound = Sound: FellBeastWingFlaps        Animation:SumnDrag_SKL.SumnDrag_JMPB     Frames: 24 51 83
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_JMPB     Frames: 10
        AnimationSound = Sound: DragonAllyVoxRoar        Animation:SumnDrag_SKL.SumnDrag_JMPB     Frames: 28
        AnimationSound = Sound: DragonAllyVoxHurt        Animation:SumnDrag_SKL.SumnDrag_HITA     Frames: 14
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_TRNL     Frames: 11 22 33 44
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_TRNR     Frames: 11 22 33 44
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_ACCL     Frames: 18 23
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_DECL     Frames: 17 25
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_JMPB     Frames: 11 21
        AnimationSound = Sound: FellBeastWingFlaps        Animation:SumnDrag_SKL.SumnDrag_JMPB     Frames: 19 55 85
        AnimationSound = Sound: DragonAllyVoxRoar        Animation:SumnDrag_SKL.SumnDrag_JMPB     Frames: 31
        AnimationSound = Sound: FellBeastWingFlaps        Animation:SumnDrag_SKL.SumnDrag_LNDB     Frames: 1
        AnimationSound = Sound: BalrogLand                Animation:SumnDrag_SKL.SumnDrag_LNDB     Frames: 26
        AnimationSound = Sound: DragonAllyVoxRoarBig    Animation:SumnDrag_SKL.SumnDrag_RORA     Frames: 14
    End





    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

      Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 2000
        HitReactionThreshold1 = 200
    End


    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes          = ALL -FADED
        DestructionDelay    = 20000
        DecayBeginTime      = 3000
        SinkDelay           = 5000
        SinkRate            = 2.0
        DeathFlags          = DEATH_1
        Sound               = INITIAL DragonAllyVoxDie

    End

    Behavior = SlowDeathBehavior ModuleTag_ConstructionDeath
        DeathTypes          = NONE +FADED
        DeathFlags          = DEATH_2
        FadeDelay           = 0
        FadeTime            = 5000
        DestructionDelay    = 5000
        Sound               = INITIAL DragonAllyUnsummon
    End

    Behavior = AIUpdateInterface ModuleTag_AI
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
    End

    Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
        GravityMult = 1.0
    End


    Behavior = AutoHealBehavior ModuleTag_MumakilHealing
       StartsActive          = Yes
       HealingAmount         = MONSTER_HEAL_AMOUNT
       HealingDelay          = 1000
       StartHealingDelay     = MONSTER_HEAL_DELAY
       HealOnlyIfNotInCombat = Yes
    End


    Behavior = SpecialPowerModule ModuleTag_TeleportStarter
        SpecialPowerTemplate        = SpecialAbilitySummonedDragonReposition
        UpdateModuleStartsAttack    = Yes
        InitiateSound               = DragonAllyVoxTeleport
    End

    Behavior = TeleportSpecialAbilityUpdate ModuleTag_TeleportUpdate
        SpecialPowerTemplate    = SpecialAbilitySummonedDragonReposition
        UnpackTime              = 3800
        PackTime                = 3500
        PreparationTime         = 1
        ApproachRequiresLOS     = No
        BusyForDuration         = 5000
        DestinationWeaponName   = SummonDragonBlowBack
    End


     Behavior = SpecialPowerModule ModuleTag_HorseToggleStarter
         SpecialPowerTemplate        = SpecialAbilityToggleMounted
         UpdateModuleStartsAttack    = Yes
         StartsPaused                = No
     End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_HorseToggle
         SpecialPowerTemplate    = SpecialAbilityToggleMounted
         MountedTemplate            = WildZuchtdrache
         SynchronizeTimerOnSpecialPower = SpecialAbilitySummonedDragonReposition
         UnpackTime              = OBJECT_TOGGLE_TIME
         PreparationTime         = 0
         PackTime                = 0
         OpacityTarget            = .0
         AwardXPForTriggering    = 0
         IgnoreFacingCheck        = Yes
    End

    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy                     = Upgrade_Level_4
        GetUpgradeCommandButtonName     = Command_ZuchtdracheEntwickling1
    End



    LocomotorSet
        Locomotor     = SummonedDragonLocomotor
        Condition     = SET_NORMAL
        Speed         = 30
    End

    Geometry            = CYLINDER
    GeometryMajorRadius = 24
    GeometryHeight        = 10.0
    GeometryOffset        = X:-10 Y:0 Z:0
    GeometryIsSmall        = No
    Shadow                = SHADOW_VOLUME


    AutoResolveUnitType               = AutoResolveUnit_Monster
    AutoResolveCombatChain            = AutoResolve_MonsterCombatChain

    AutoResolveBody = AutoResolve_MordorAttackTrollBody

    AutoResolveArmor
        Armor = AutoResolve_MordorAttackTrollArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_MordorAttackTrollWeapon
    End
End

ChildObject WildZuchtdracheBaby_Slaved WildZuchtdracheBaby

      CommandPoints = 25

      EvaEnemyObjectSightedEvent = DiscoveredEnemyDrake
      EvaEnemyObjectSightedAfterRespawnEvent = DiscoveredEnemyDrake

    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT SCORE CREEP

    VisionRange = CREEP_VISION
    DisplayName = OBJECT:GenericFireDrake
    Behavior = SlavedUpdate ModuleTag_Slave
        GuardMaxRange        = 300
        GuardWanderRange    = 75
        UseSlaverAsControlForEvaObjectSightedEvents = Yes
    End

End


Object WildZuchtdrache

    SelectPortrait = HPSummonedDragon
    ButtonImage    = HISummonedDragon

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_WildZuchtdrache

      EquivalentTo = WildZuchtdracheBaby

    Draw = W3DScriptedModelDraw ModuleTag_01
        StaticModelLODMode = Yes

        RandomTextureFixedRandomIndex    = Yes
        RandomTexture                    = SumnDragonD_C.tga     0 SumnDragon_C.tga
        RandomTexture                    = SumnDragonD2_C.tga    0 SumnDragon2_C.tga

        DefaultModelConditionState
            Model = SumnDrag_SKN
            Skeleton = SumnDrag_SKL
            ParticleSysBone = B_MAINBONE SummonedDragonWaves    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonSmokeWaves FollowBone:Yes
        End


        IdleAnimationState
            StateName = STATE_Idle
            Animation = Breathe
                AnimationName = SumnDrag_IDLA
                AnimationMode = ONCE
                AnimationPriority = 5
            End
            ParticleSysBone = BAT_HEAD SummonedDragonFireSnort    FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonSnortEmbers    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonWaves    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonSmokeWaves FollowBone:Yes

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Selected"    then
                CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle") return end
            EndScript
        End












        AnimationState                    =    DYING DEATH_1
            Animation                    =    Dying
                AnimationName            =    SumnDrag_DIEA
                AnimationMode            =    ONCE
                AnimationBlendTime        =    15
            End
            ParticleSysBone = BAT_HEAD SummonedDragonDeathEmbers        FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonDeathSmoke            FollowBone:Yes
            ParticleSysBone = NONE SummonedDragonDeathDust        FollowBone:Yes

        End

        AnimationState                    =    DYING DEATH_2
            Animation                    =    JumpingAwayAtTimeUp
                AnimationName            =    SumnDrag_JMPB
                AnimationMode            =    ONCE
                AnimationBlendTime        =    15
            End
            ParticleSysBone = BAT_HEAD SummonedDragonDeathEmbers        FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonDeathSmoke            FollowBone:Yes
        End

        AnimationState = FIRING_OR_PREATTACK_A MOVING
            Animation
                AnimationName                = SumnDrag_WLKA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 1.3 1.3
            End
            ParticleSysBone = B_MAINBONE SummonedDragonWaves    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonSmokeWaves FollowBone:Yes
        End

        AnimationState = FIRING_OR_PREATTACK_A
            Animation            = Burninate
                AnimationName    = SumnDrag_ATKA
                AnimationMode    = ONCE
            End
            ParticleSysBone = BAT_HEAD SummonedDragonFireBreath2    FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonHeat    FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonEmbers        FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonSmoke            FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonFireProxy2            FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonWaves    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonSmokeWaves FollowBone:Yes
        End

        AnimationState = HIT_REACTION HIT_LEVEL_1
            Animation
                AnimationName    = SumnDrag_HITA
                AnimationMode    = ONCE
            End
        End

        AnimationState = MOVING TURN_RIGHT_HIGH_SPEED
            Animation
                AnimationName    = SumnDrag_WLKA
                AnimationMode    = LOOP
                AnimationSpeedFactorRange = 1.8 1.8
                AnimationBlendTime        =    15
            End
        End

        AnimationState = MOVING TURN_LEFT_HIGH_SPEED
            Animation
                AnimationName    = SumnDrag_WLKA
                AnimationMode    = LOOP
                AnimationSpeedFactorRange = 1.8 1.8
                AnimationBlendTime        =    15
            End
        End

        AnimationState = TURN_LEFT
            Animation            = Left
                AnimationName    = SumnDrag_TRNL
                AnimationMode    = LOOP
                AnimationSpeedFactorRange = 0.85 0.85
                AnimationBlendTime        =    15
            End
        End

        AnimationState = TURN_RIGHT
            Animation            = YourOtherLeft
                AnimationName    = SumnDrag_TRNR
                AnimationMode    = LOOP
                AnimationSpeedFactorRange = 0.85 0.85
                AnimationBlendTime        =    15
            End
        End

        AnimationState = MOVING ACCELERATE
            Animation
                AnimationName    = SumnDrag_ACCL
                AnimationMode    = ONCE
                AnimationSpeedFactorRange = 2.0 2.0
                AnimationBlendTime        =    15
            End
        End

        AnimationState = MOVING DECELERATE
            Animation
                AnimationName    = SumnDrag_DECL
                AnimationMode    = ONCE
                AnimationSpeedFactorRange = 0.9 0.9
            End

        End






















        AnimationState = PACKING
            StateName                = STATE_Land
            Animation
                AnimationName        = SumnDrag_LNDB
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
                AnimationSpeedFactorRange = 0.5 0.5
            End
            ParticleSysBone = NONE SummonedDragonDust    FollowBone:Yes
        End

        AnimationState = MOVING
            Animation
                AnimationName    = SumnDrag_WLKA
                AnimationMode    = LOOP
                AnimationSpeedFactorRange = 1.4 1.4
            End
        End

        AnimationState = SELECTED
            Animation
                AnimationName    = SumnDrag_IDLA
                AnimationMode    = LOOP
                AnimationSpeedFactorRange = 1.3 1.3
            End

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Idle"    then
                    CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected")
                    return
                end
            EndScript
        End

        TransitionState = TRANS_Idle_to_Selected
            Animation            = Salute
                AnimationName    = SumnDrag_RORA
                AnimationMode    = ONCE
            End
            ParticleSysBone = BAT_HEAD SummonedDragonFireRoar    FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonSmokeRoar    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonWaves    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonSmokeWaves FollowBone:Yes
        End

        TransitionState = TRANS_Selected_to_Idle
            Animation            = ATNC
                AnimationName    = SumnDrag_IDLA
                AnimationMode    = ONCE
            End
        End

        TransitionState = TRANS_JustBuilt_To_Idle
            Animation = BeingSummoned
                AnimationName = SumnDrag_LNDA
                AnimationMode = ONCE
            End
        End

    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbigbox
        End
    End


    Side                 = Wild
    EditorSorting        = UNIT
    ThreatLevel          = FIRE_DRAKE_THREAT_LEVEL
    CommandSet           = ZuchtdracheCommandSet
    ShockwaveResistance  = SHOCKWAVE_RESISTANCE_ALWAYS
    ShroudClearingRange  = SHROUD_CLEAR_GIANT
    VisionRange          = 200
    TransportSlotCount   = TRANSPORTSLOTCOUNT_MONSTER
    KindOf               = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT SCORE SCARY ARMY_SUMMARY
    ThreatLevel          = SUMMONEDDRAGON_THREAT_LEVEL
    RadarPriority        = UNIT
    CommandPoints        = 35
    BuildTime            = ELITE_BUILDTIME
    BuildCost            = 600
    MaxSimultaneousOfType = 3
    Scale                = 0.7
    DisplayName          = OBJECT:WildZuchtdrache
    BountyValue          = FIREDRAKE_BOUNTY_VALUE

    WeaponSet
        Conditions = None
        Weapon     = PRIMARY    ZuchtdracheFireBreath
    End

    ArmorSet
        Conditions = None
        Armor      = EdainMediumDragonArmor
        DamageFX   = NormalDamageFX
    End

    Body = ActiveBody ModuleTag_Body
        MaxHealth  = 5000
    End

    ThreatBreakdown GoblinFighterHorde_DetailedThreat
        AIKindOf = CAVALRY
    End



    VoiceAttack                  = DragonAllyVoxAttack
    VoiceMove                    = DragonAllyVoxMove
    VoicePriority                = 70
    VoiceSelect                  = DragonAllyVoxSelect

    SoundImpact                  = ImpactHorse
    SoundAmbient                 = FireDrakeVoxAmbientLoop


    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:FIRING_OR_PREATTACK_A        Excluded:DYING    Sound:DragonAllyFirebreathMS
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_WLKA     Frames: 19 40
        AnimationSound = Sound: BalrogLand                Animation:SumnDrag_SKL.SumnDrag_LNDA     Frames: 27
        AnimationSound = Sound: FellBeastWingFlaps        Animation:SumnDrag_SKL.SumnDrag_LNDA     Frames: 27
        AnimationSound = Sound: FellBeastWingFlaps        Animation:SumnDrag_SKL.SumnDrag_JMPB     Frames: 24 51 83
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_JMPB     Frames: 10
        AnimationSound = Sound: DragonAllyVoxRoar        Animation:SumnDrag_SKL.SumnDrag_JMPB     Frames: 28
        AnimationSound = Sound: DragonAllyVoxHurt        Animation:SumnDrag_SKL.SumnDrag_HITA     Frames: 14
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_TRNL     Frames: 11 22 33 44
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_TRNR     Frames: 11 22 33 44
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_ACCL     Frames: 18 23
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_DECL     Frames: 17 25
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_JMPB     Frames: 11 21
        AnimationSound = Sound: FellBeastWingFlaps        Animation:SumnDrag_SKL.SumnDrag_JMPB     Frames: 19 55 85
        AnimationSound = Sound: DragonAllyVoxRoar        Animation:SumnDrag_SKL.SumnDrag_JMPB     Frames: 31
        AnimationSound = Sound: FellBeastWingFlaps        Animation:SumnDrag_SKL.SumnDrag_LNDB     Frames: 1
        AnimationSound = Sound: BalrogLand                Animation:SumnDrag_SKL.SumnDrag_LNDB     Frames: 26
        AnimationSound = Sound: DragonAllyVoxRoarBig    Animation:SumnDrag_SKL.SumnDrag_RORA     Frames: 14
    End



    EvaEnemyObjectSightedEvent = DiscoveredEnemyDragon

    ClientUpdate = EvaAnnounceClientCreate ModuleTag_CreateAnnounce
        AnnouncementEventEnemy = DiscoveredEnemyDragon
        AnnouncementEventAlly = None
        AnnouncementEventOwner = None

        OnlyIfVisible = Yes
        CountAsFirstSightedAnnoucement = Yes
        UseObjectsPosition = No
        CreateFakeRadarEvent = Yes
    End



    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

      Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 2000
        HitReactionThreshold1 = 200
    End


    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes          = ALL -FADED
        DestructionDelay    = 20000
        DecayBeginTime      = 3000
        SinkDelay           = 5000
        SinkRate            = 2.0
        DeathFlags          = DEATH_1
        Sound               = INITIAL DragonAllyVoxDie

    End

    Behavior = SlowDeathBehavior ModuleTag_ConstructionDeath
        DeathTypes          = NONE +FADED
        DeathFlags          = DEATH_2
        FadeDelay           = 0
        FadeTime            = 5000
        DestructionDelay    = 5000
        Sound               = INITIAL DragonAllyUnsummon
    End

    Behavior = AIUpdateInterface ModuleTag_AI
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
    End

    Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
        GravityMult = 1.0
    End

    Behavior = SpecialPowerModule ModuleTag_TeleportStarter
        SpecialPowerTemplate        = SpecialAbilitySummonedDragonReposition
        UpdateModuleStartsAttack    = Yes
        InitiateSound               = DragonAllyVoxTeleport
    End

    Behavior = TeleportSpecialAbilityUpdate ModuleTag_TeleportUpdate
        SpecialPowerTemplate    = SpecialAbilitySummonedDragonReposition
        UnpackTime              = 3800
        PackTime                = 3500
        PreparationTime         = 1
        ApproachRequiresLOS     = No
        BusyForDuration         = 5000
        DestinationWeaponName   = SummonDragonBlowBack
    End
















    Behavior = SpecialPowerModule ModuleTag_HorseToggleStarter
         SpecialPowerTemplate        = SpecialAbilityToggleMounted
         UpdateModuleStartsAttack    = Yes
         StartsPaused                = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_HorseToggle
         SpecialPowerTemplate    = SpecialAbilityToggleMounted
         MountedTemplate            = WildZuchtdracheOld
         SynchronizeTimerOnSpecialPower = SpecialAbilitySummonedDragonReposition
         UnpackTime              = OBJECT_TOGGLE_TIME
         PreparationTime         = 0
         PackTime                = 0
         OpacityTarget            = .0
         AwardXPForTriggering    = 0
         IgnoreFacingCheck        = Yes
    End


    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy                     = Upgrade_Level_8
        GetUpgradeCommandButtonName     = Command_ZuchtdracheEntwickling2
    End


    Behavior = AutoHealBehavior ModuleTag_MumakilHealing
       StartsActive          = Yes
       HealingAmount         = MONSTER_HEAL_AMOUNT
       HealingDelay          = 1000
       StartHealingDelay     = MONSTER_HEAL_DELAY
       HealOnlyIfNotInCombat = Yes
    End


    LocomotorSet
        Locomotor     = SummonedDragonLocomotor
        Condition     = SET_NORMAL
        Speed         = 42
    End

    Geometry            = CYLINDER
    GeometryMajorRadius = 42
    GeometryHeight        = 20.0
    GeometryOffset        = X:-10 Y:0 Z:0
    GeometryIsSmall        = No
    Shadow                = SHADOW_VOLUME


    AutoResolveUnitType               = AutoResolveUnit_Monster
    AutoResolveCombatChain            = AutoResolve_MonsterCombatChain

    AutoResolveBody = AutoResolve_MordorAttackTrollBody

    AutoResolveArmor
        Armor = AutoResolve_MordorAttackTrollArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_MordorAttackTrollWeapon
    End
End


Object WildZuchtdracheOld

    SelectPortrait = HPSummonedDragon
    ButtonImage    = HISummonedDragon

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_WildOldZuchtdrache

      EquivalentTo = WildZuchtdracheBaby

    Draw = W3DScriptedModelDraw ModuleTag_01
        StaticModelLODMode = Yes

        RandomTextureFixedRandomIndex    = Yes
        RandomTexture                    = SumnDragonD_C.tga     0 SumnDragon_C.tga
        RandomTexture                    = SumnDragonD2_C.tga    0 SumnDragon2_C.tga

        DefaultModelConditionState
            Model = SumnDrag_SKN
            Skeleton = SumnDrag_SKL
            ParticleSysBone = B_MAINBONE SummonedDragonWaves    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonSmokeWaves FollowBone:Yes
        End


        IdleAnimationState
            StateName = STATE_Idle
            Animation = Breathe
                AnimationName = SumnDrag_IDLA
                AnimationMode = ONCE
                AnimationPriority = 5
            End
            ParticleSysBone = BAT_HEAD SummonedDragonFireSnort    FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonSnortEmbers    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonWaves    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonSmokeWaves FollowBone:Yes

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Selected"    then
                CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle") return end
            EndScript
        End

        AnimationState            = USER_2
            StateName = State_JustBuilt
            Animation
                AnimationName = SumnDrag_LNDB
                AnimationMode = ONCE
                AnimationBlendTime = 0
                AnimationSpeedFactorRange    =    0.5 0.5
            End
            ParticleSysBone = NONE SummonedDragonDust    FollowBone:Yes
        End

        AnimationState                    =    DYING DEATH_1
            Animation                    =    Dying
                AnimationName            =    SumnDrag_DIEA
                AnimationMode            =    ONCE
                AnimationBlendTime        =    15
            End
            ParticleSysBone = BAT_HEAD SummonedDragonDeathEmbers        FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonDeathSmoke            FollowBone:Yes
            ParticleSysBone = NONE SummonedDragonDeathDust        FollowBone:Yes

        End

        AnimationState                    =    DYING DEATH_2
            Animation                    =    JumpingAwayAtTimeUp
                AnimationName            =    SumnDrag_JMPB
                AnimationMode            =    ONCE
                AnimationBlendTime        =    15
            End
            ParticleSysBone = BAT_HEAD SummonedDragonDeathEmbers        FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonDeathSmoke            FollowBone:Yes
        End

        AnimationState = FIRING_OR_PREATTACK_A MOVING
            Animation
                AnimationName                = SumnDrag_WLKA
                AnimationMode                = LOOP
                AnimationSpeedFactorRange    = 1.3 1.3
            End
            ParticleSysBone = B_MAINBONE SummonedDragonWaves    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonSmokeWaves FollowBone:Yes
        End

        AnimationState = FIRING_OR_PREATTACK_A
            Animation            = Burninate
                AnimationName    = SumnDrag_ATKA
                AnimationMode    = ONCE
            End
            ParticleSysBone = BAT_HEAD SummonedDragonFireBreath2    FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonHeat    FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonEmbers        FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonSmoke            FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonFireProxy2            FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonWaves    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonSmokeWaves FollowBone:Yes
        End

        AnimationState = HIT_REACTION HIT_LEVEL_1
            Animation
                AnimationName    = SumnDrag_HITA
                AnimationMode    = ONCE
            End
        End

        AnimationState = MOVING TURN_RIGHT_HIGH_SPEED
            Animation
                AnimationName    = SumnDrag_WLKA
                AnimationMode    = LOOP
                AnimationSpeedFactorRange = 1.8 1.8
                AnimationBlendTime        =    15
            End
        End

        AnimationState = MOVING TURN_LEFT_HIGH_SPEED
            Animation
                AnimationName    = SumnDrag_WLKA
                AnimationMode    = LOOP
                AnimationSpeedFactorRange = 1.8 1.8
                AnimationBlendTime        =    15
            End
        End

        AnimationState = TURN_LEFT
            Animation            = Left
                AnimationName    = SumnDrag_TRNL
                AnimationMode    = LOOP
                AnimationSpeedFactorRange = 0.85 0.85
                AnimationBlendTime        =    15
            End
        End

        AnimationState = TURN_RIGHT
            Animation            = YourOtherLeft
                AnimationName    = SumnDrag_TRNR
                AnimationMode    = LOOP
                AnimationSpeedFactorRange = 0.85 0.85
                AnimationBlendTime        =    15
            End
        End

        AnimationState = MOVING ACCELERATE
            Animation
                AnimationName    = SumnDrag_ACCL
                AnimationMode    = ONCE
                AnimationSpeedFactorRange = 2.0 2.0
                AnimationBlendTime        =    15
            End
        End

        AnimationState = MOVING DECELERATE
            Animation
                AnimationName    = SumnDrag_DECL
                AnimationMode    = ONCE
                AnimationSpeedFactorRange = 0.9 0.9
            End

        End

        AnimationState = UNPACKING
            StateName            = STATE_TakeOff
            Animation
                AnimationName    = SumnDrag_JMPB
                AnimationMode    = ONCE
            End
            ParticleSysBone = NONE SummonedDragonDust    FollowBone:Yes
        End




        AnimationState = PREPARING
            Animation
                AnimationName        = SumnDrag_JMPB
                AnimationMode        = ONCE
            End
            Flags = START_FRAME_LAST
        End


        AnimationState = PACKING
            StateName                = STATE_Land
            Animation
                AnimationName        = SumnDrag_LNDB
                AnimationMode        = ONCE
                AnimationBlendTime    = 0
                AnimationSpeedFactorRange = 0.5 0.5
            End
            ParticleSysBone = NONE SummonedDragonDust    FollowBone:Yes
        End

        AnimationState = MOVING
            Animation
                AnimationName    = SumnDrag_WLKA
                AnimationMode    = LOOP
                AnimationSpeedFactorRange = 1.4 1.4
            End
        End

        AnimationState = SELECTED
            Animation
                AnimationName    = SumnDrag_IDLA
                AnimationMode    = LOOP
                AnimationSpeedFactorRange = 1.3 1.3
            End

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Idle"    then
                    CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected")
                    return
                end
            EndScript
        End

        TransitionState = TRANS_Idle_to_Selected
            Animation            = Salute
                AnimationName    = SumnDrag_RORA
                AnimationMode    = ONCE
            End
            ParticleSysBone = BAT_HEAD SummonedDragonFireRoar    FollowBone:Yes
            ParticleSysBone = BAT_HEAD SummonedDragonSmokeRoar    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonWaves    FollowBone:Yes
            ParticleSysBone = B_MAINBONE SummonedDragonSmokeWaves FollowBone:Yes
        End

        TransitionState = TRANS_Selected_to_Idle
            Animation            = ATNC
                AnimationName    = SumnDrag_IDLA
                AnimationMode    = ONCE
            End
        End

        TransitionState = TRANS_JustBuilt_To_Idle
            Animation = BeingSummoned
                AnimationName = SumnDrag_LNDA
                AnimationMode = ONCE
            End
        End

    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbigbox
        End
    End


    Side                 = Wild
    EditorSorting        = UNIT
    ThreatLevel          = FIRE_DRAKE_THREAT_LEVEL
    CommandSet           = ZuchtdracheOldCommandSet
    ShockwaveResistance  = SHOCKWAVE_RESISTANCE_ALWAYS
    ShroudClearingRange  = SHROUD_CLEAR_GIANT
    VisionRange          = 200
    TransportSlotCount   = TRANSPORTSLOTCOUNT_MONSTER
    KindOf               = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT SCORE SCARY ARMY_SUMMARY
    ThreatLevel          = SUMMONEDDRAGON_THREAT_LEVEL
    RadarPriority        = UNIT
    CommandPoints        = 40
    BuildTime            = ELITE_BUILDTIME
    BuildCost            = 600
    MaxSimultaneousOfType = 3
    Scale                = 0.9
    DisplayName          = OBJECT:WildOldZuchtdrache
    BountyValue          = FIREDRAKE_BOUNTY_VALUE

    WeaponSet
        Conditions = None
        Weapon     = PRIMARY    ZuchtdracheOldFireBreath
    End

    ArmorSet
        Conditions = None
        Armor      = EdainLargeDragonArmor
        DamageFX   = NormalDamageFX
    End

    Body = ActiveBody ModuleTag_Body
        MaxHealth  = 5000
    End

    ThreatBreakdown GoblinFighterHorde_DetailedThreat
        AIKindOf = CAVALRY
    End



    VoiceAttack                  = DragonAllyVoxAttack
    VoiceMove                    = DragonAllyVoxMove
    VoicePriority                = 70
    VoiceSelect                  = DragonAllyVoxSelect


    SoundImpact                  = ImpactHorse

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:FIRING_OR_PREATTACK_A        Excluded:DYING    Sound:DragonAllyFirebreathMS
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_WLKA     Frames: 19 40
        AnimationSound = Sound: BalrogLand                Animation:SumnDrag_SKL.SumnDrag_LNDA     Frames: 27
        AnimationSound = Sound: FellBeastWingFlaps        Animation:SumnDrag_SKL.SumnDrag_LNDA     Frames: 27
        AnimationSound = Sound: FellBeastWingFlaps        Animation:SumnDrag_SKL.SumnDrag_JMPB     Frames: 24 51 83
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_JMPB     Frames: 10
        AnimationSound = Sound: DragonAllyVoxRoar        Animation:SumnDrag_SKL.SumnDrag_JMPB     Frames: 28
        AnimationSound = Sound: DragonAllyVoxHurt        Animation:SumnDrag_SKL.SumnDrag_HITA     Frames: 14
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_TRNL     Frames: 11 22 33 44
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_TRNR     Frames: 11 22 33 44
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_ACCL     Frames: 18 23
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_DECL     Frames: 17 25
        AnimationSound = Sound: DragonAllyFootstep        Animation:SumnDrag_SKL.SumnDrag_JMPB     Frames: 11 21
        AnimationSound = Sound: FellBeastWingFlaps        Animation:SumnDrag_SKL.SumnDrag_JMPB     Frames: 19 55 85
        AnimationSound = Sound: DragonAllyVoxRoar        Animation:SumnDrag_SKL.SumnDrag_JMPB     Frames: 31
        AnimationSound = Sound: FellBeastWingFlaps        Animation:SumnDrag_SKL.SumnDrag_LNDB     Frames: 1
        AnimationSound = Sound: BalrogLand                Animation:SumnDrag_SKL.SumnDrag_LNDB     Frames: 26
        AnimationSound = Sound: DragonAllyVoxRoarBig    Animation:SumnDrag_SKL.SumnDrag_RORA     Frames: 14
    End



    EvaEnemyObjectSightedEvent = DiscoveredEnemyDragon

    ClientUpdate = EvaAnnounceClientCreate ModuleTag_CreateAnnounce
        AnnouncementEventEnemy = DiscoveredEnemyDragon
        AnnouncementEventAlly = None
        AnnouncementEventOwner = None

        OnlyIfVisible = Yes
        CountAsFirstSightedAnnoucement = Yes
        UseObjectsPosition = No
        CreateFakeRadarEvent = Yes
    End



    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

      Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 2000
        HitReactionThreshold1 = 200
    End



    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes          = ALL -FADED
        DestructionDelay    = 20000
        DecayBeginTime      = 3000
        SinkDelay           = 5000
        SinkRate            = 2.0
        DeathFlags          = DEATH_1
        Sound               = INITIAL DragonAllyVoxDie
        OCL                 = INITIAL OCL_SummonedDragonDeathCrush
    End

    Behavior = SlowDeathBehavior ModuleTag_ConstructionDeath
        DeathTypes          = NONE +FADED
        DeathFlags          = DEATH_2
        FadeDelay           = 0
        FadeTime            = 5000
        DestructionDelay    = 5000
        Sound               = INITIAL DragonAllyUnsummon
    End

    Behavior = AIUpdateInterface ModuleTag_AI
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
    End

    Behavior = PhysicsBehavior ModuleTag_PhysicsBehavior
        GravityMult = 1.0
    End


     Behavior = SpecialPowerModule ModuleTag_HorseToggleStarter
         SpecialPowerTemplate        = SpecialAbilityToggleMounted
         UpdateModuleStartsAttack    = Yes
         StartsPaused                = No
     End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_HorseToggle
         SpecialPowerTemplate    = SpecialAbilityToggleMounted
         MountedTemplate            = WildZuchtdracheOldFlying
         SynchronizeTimerOnSpecialPower = SpecialAbilitySummonedDragonReposition SpecialAbilityDrogothFireball
         UnpackTime              = MORDOR_MOUNT_TIME
         PreparationTime         = 0
         PackTime                = 0
         OpacityTarget            = .0
         AwardXPForTriggering    = 0
         IgnoreFacingCheck        = Yes
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FireballUnpause
        SpecialPowerTemplate  = SpecialAbilityDrogothFireball
        TriggeredBy           = Upgrade_MiniHordeLvl1
        ObeyRechageOnTrigger  = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_FireballStarter
        SpecialPowerTemplate        = SpecialAbilityDrogothFireball
        UpdateModuleStartsAttack    = Yes
        StartsPaused            = Yes
        InitiateSound            = DrogothVoxAttack
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FireballUpdate
        SpecialPowerTemplate    = SpecialAbilityDrogothFireball
        WhichSpecialWeapon        = 1
        UnpackTime                 = 1800
        PreparationTime            = 10
        PackTime                = 950
        AwardXPForTriggering    = 0
        StartAbilityRange        = DROGOTH_FIREBALL_RANGE
        MustFinishAbility        = Yes
        SpecialWeapon            = DrogothFireball
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TeleportUnpause
        SpecialPowerTemplate  = SpecialAbilitySummonedDragonReposition
        TriggeredBy           = Upgrade_MiniHordeLvl1
        ObeyRechageOnTrigger  = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_TeleportStarter
        SpecialPowerTemplate        = SpecialAbilitySummonedDragonReposition
        UpdateModuleStartsAttack    = Yes
        StartsPaused            = Yes
        InitiateSound               = DragonAllyVoxTeleport
    End

    Behavior = TeleportSpecialAbilityUpdate ModuleTag_TeleportUpdate
        SpecialPowerTemplate    = SpecialAbilitySummonedDragonReposition
        UnpackTime              = 3800
        PackTime                = 3500
        PreparationTime         = 1
        ApproachRequiresLOS     = No
        BusyForDuration         = 5000
        DestinationWeaponName   = SummonDragonBlowBack
    End
















    Behavior = AutoHealBehavior ModuleTag_MumakilHealing
       StartsActive          = Yes
       HealingAmount         = MONSTER_HEAL_AMOUNT
       HealingDelay          = 1000
       StartHealingDelay     = MONSTER_HEAL_DELAY
       HealOnlyIfNotInCombat = Yes
    End


    LocomotorSet
        Locomotor     = SummonedDragonLocomotor
        Condition     = SET_NORMAL
        Speed         = 54
    End

    Geometry            = CYLINDER
    GeometryMajorRadius = 50
    GeometryHeight        = 20.0
    GeometryOffset        = X:-10 Y:0 Z:0
    GeometryIsSmall        = No
    Shadow                = SHADOW_VOLUME


    AutoResolveUnitType               = AutoResolveUnit_Monster
    AutoResolveCombatChain            = AutoResolve_MonsterCombatChain

    AutoResolveBody = AutoResolve_MordorAttackTrollBody

    AutoResolveArmor
        Armor = AutoResolve_MordorAttackTrollArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_MordorAttackTrollWeapon
    End
End



Object WildZuchtdracheOldFlying

    SelectPortrait = HPSummonedDragon
    ButtonImage    = HISummonedDragon

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_WildFlyOldZuchtdrache

      EquivalentTo = WildZuchtdracheBaby

    Draw = W3DScriptedModelDraw ModuleTag_01

        OkToChangeModelColor = Yes

        StaticModelLODMode = Yes

        RandomTextureFixedRandomIndex    = Yes
        RandomTexture                    = SumnDragonD_C.tga     0 wusmaugea1.tga
        RandomTexture                    = SumnDragonD2_C.tga    0 wusmaugea2.tga

        DefaultModelConditionState
            Model            = WUSmaug_SKN
            WeaponLaunchBone = PRIMARY BAT_JAW
            WeaponLaunchBone = SECONDARY BAT_TAIL08
        End


        IdleAnimationState
            StateName = Idle
            Animation = IDLA
                AnimationName = WUDrogoth_SKL.WUDrogoth_FLYA
                AnimationMode = LOOP

                AnimationSpeedFactorRange = 0.95 1.05
            End
            BeginScript
                 Prev = CurDrawablePrevAnimationState()
                 if Prev == "STATE_WingBlastLoop" then
                     CurDrawableSetTransitionAnimState("TRANS_WingBlastStop") end
             EndScript
        End





        AnimationState = RUBBLE
            Animation = RubbleDieF
                AnimationName = WUDrogoth_SKL.WUDrogoth_DIEC
                AnimationMode = ONCE
                AnimationBlendTime = 8
            End
        End

        TransitionState = Trans_Dying
            Animation = Transition
                AnimationName = WUDrogoth_SKL.WUDrogoth_DIEA
                AnimationMode = ONCE
                AnimationBlendTime = 3
            End
        End

        AnimationState = DYING DEATH_1
            StateName = DYING
            Animation = DyingA
                AnimationName = WUDrogoth_SKL.WUDrogoth_DIEB
                AnimationMode = ONCE
                AnimationBlendTime = 4
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle"     then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "Moving"   then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "Freefall" then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "Climbing" then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "Diving"   then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "backup"   then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "STUNNED"  then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "Claw"     then CurDrawableSetTransitionAnimState("Trans_Dying") return end
                if Prev == "STATE_WingBlastLoop"     then CurDrawableSetTransitionAnimState("Trans_Dying") return end
           EndScript
        End


          AnimationState = DYING DEATH_2
               StateName = DYING
            Animation = DyingA
                AnimationName = WUDrogoth_SKL.WUDrogoth_DIEK
                  AnimationMode = ONCE


              End
        End












         AnimationState    = BACKING_UP
               StateName = backup
               Animation = IDLA
                   AnimationName = WUDrogoth_SKL.WUDrogoth_FLYA
                   AnimationMode = LOOP

                AnimationSpeedFactorRange = 0.95 1.05
               End
           End

           AnimationState = DIVING
               StateName = Diving
               Animation = Diving
                   AnimationName = WUDrogoth_SKL.WUDrogoth_FLYA
                   AnimationMode = LOOP

                 AnimationSpeedFactorRange = 0.95 1.05
              End
           End



        AnimationState = ABOUT_TO_HIT
            StateName = Claw
            Animation = Claw
                AnimationName = WUDrogoth_SKL.WUDrogoth_ATKA
                AnimationMode = LOOP

            End
        End



        AnimationState            = SPECIAL_WEAPON_ONE
            Animation
                AnimationName    = WUDrogoth_SKL.WUDrogoth_SPCA
                AnimationMode   = LOOP
            End
        End



        AnimationState            = SPECIAL_WEAPON_TWO
            Animation
                AnimationName    = WUDrogoth_SKL.WUDrogoth_SPCB
                AnimationMode   = LOOP
            End

            ParticleSysBone = BAT_HEAD DrogothFireBreath FollowBone:Yes
            ParticleSysBone = BAT_JAW balrogBreathEmbers FollowBone:Yes
            ParticleSysBone = BAT_JAW balrogBreathSmoke FollowBone:Yes
            ParticleSysBone = BAT_HEAD DrogothBreathProxy FollowBone:Yes
        End



        AnimationState           = SPECIAL_WEAPON_THREE
            Animation
                AnimationName        = WUDrogoth_SKL.WUDrogoth_SPCA
                AnimationMode        = ONCE
                AnimationBlendTime    = 20
            End

        End

































        AnimationState            = USER_1
            Animation
                AnimationName    = WUDrogoth_SKL.WUDrogoth_SPCF
                AnimationMode    = ONCE
            End
        End


        AnimationState = CLIMBING
            StateName = Climbing
            Animation = Moving
                AnimationName = WUDrogoth_SKL.WUDrogoth_FLYA
                AnimationMode = LOOP

                AnimationSpeedFactorRange = 0.95 1.05
            End
        End
        AnimationState = FREEFALL
            StateName = Freefall
            Animation = Moving
                AnimationName = WUDrogoth_SKL.WUDrogoth_FLYA
                AnimationMode = LOOP

            End
        End

        AnimationState = MOVING
            StateName = Moving
            Animation = Moving
                AnimationName = WUDrogoth_SKL.WUDrogoth_FLYB
                AnimationMode = LOOP

                AnimationSpeedFactorRange = 0.9 1.1
            End
              BeginScript
                 Prev = CurDrawablePrevAnimationState()
                 if Prev == "Idle"    then CurDrawableSetTransitionAnimState("Trans_Begin_Moving") return end
                 if Prev == "Climbing"    then CurDrawableSetTransitionAnimState("Trans_Begin_Moving") return end
                 if Prev == "STATE_WingBlastLoop" then
                     CurDrawableSetTransitionAnimState("TRANS_WingBlastStop") end
             EndScript
         End

           TransitionState = Trans_Begin_Moving
               Animation = Transition
                   AnimationName = WUDrogoth_SKL.WUDrogoth_FLYC
                   AnimationMode = ONCE
                   AnimationBlendTime = 6
               End
           End

           AnimationState = LEVELED
            Animation
                AnimationName = WUDrogoth_SKL.WUDrogoth_LVLA
                AnimationMode = LOOP
            End
        End









    End


    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbigbox
        End
    End


    Side                 = Wild
    EditorSorting        = UNIT
    ThreatLevel          = FIRE_DRAKE_THREAT_LEVEL
    CommandSet           = ZuchtdracheOldFlyingCommandSet
    ShockwaveResistance  = SHOCKWAVE_RESISTANCE_ALWAYS
    VisionRange          = VISION_FLIER
    ShroudClearingRange  = SHROUD_CLEAR_FLIER
    TransportSlotCount   = TRANSPORTSLOTCOUNT_MONSTER
    KindOf               = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS SCORE NO_FREEWILL_ENTER SCARY MONSTER CANNOT_RETALIATE ARMY_SUMMARY GIANT_BIRD
    ThreatLevel          = SUMMONEDDRAGON_THREAT_LEVEL
    RadarPriority        = UNIT
    CommandPoints        = 40
    BuildTime            = ELITE_BUILDTIME
    BuildCost            = 600
    MaxSimultaneousOfType = 3
    Scale                = 1.25
    BountyValue          = FIREDRAKE_BOUNTY_VALUE
    RamPower            = 45
    RamZMult            = 0.5
    CrusherLevel        = 3
    CrushKnockback        = 50
    CrushZFactor        = 1.0
    DisplayName          = OBJECT:WildFlyOldZuchtdrache

    ThreatBreakdown GoblinFighterHorde_DetailedThreat
        AIKindOf = CAVALRY
    End

    WeaponSet



        Weapon                = SECONDARY        NazgulPlowAttack
        PreferredAgainst    = SECONDARY        STRUCTURE MACHINE HORDE INFANTRY CAVALRY

        Weapon                = TERTIARY        NazgulClawAttack
        OnlyAgainst            = TERTIARY        MONSTER

        ReadyStatusSharedWithinSet = Yes
    End


    ArmorSet
        Conditions = None
        Armor      = EdainFlyingDragonArmor
        DamageFX   = NormalDamageFX
    End

    Body = ActiveBody ModuleTag_Body
        MaxHealth  = 5000
    End





    VoiceAttack                  = DragonAllyVoxAttack
    VoiceMove                    = DragonAllyVoxMove
    VoicePriority                = 70
    VoiceSelect                  = DragonAllyVoxSelect


    SoundImpact                  = ImpactHorse

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_foo
        ModelCondition = Required:SPECIAL_WEAPON_TWO    Excluded:DYING Sound:DrogothIncinerateMS
        ModelCondition = Required:SPECIAL_WEAPON_THREE    Excluded:DYING Sound:DrogothWingBlastLoop
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: FellBeastWingFlaps            Animation:WUDrogoth_SKL.WUDrogoth_FLYA     Frames: 1
        AnimationSound = Sound: FellBeastWingFlaps            Animation:WUDrogoth_SKL.WUDrogoth_FLYB     Frames: 1
        AnimationSound = Sound: FellBeastWingFlaps            Animation:WUDrogoth_SKL.WUDrogoth_FLYC     Frames: 1 43 91
        AnimationSound = Sound: FellBeastWingFlapsShort        Animation:WUDrogoth_SKL.WUDrogoth_HITA     Frames: 11
        AnimationSound = Sound: FellBeastWingFlaps            Animation:WUDrogoth_SKL.WUDrogoth_LVLA     Frames: 1 42
        AnimationSound = Sound: DrogothVoxVeterancy            Animation:WUDrogoth_SKL.WUDrogoth_LVLA     Frames: 15
        AnimationSound = Sound: FellBeastWingFlapsShort        Animation:WUDrogoth_SKL.WUDrogoth_SPC1     Frames: 1 22
        AnimationSound = Sound: DrogothWingBlastWingFlaps    Animation:WUDrogoth_SKL.WUDrogoth_SPC1     Frames: 56
        AnimationSound = Sound: DrogothWingBlastWingFlaps    Animation:WUDrogoth_SKL.WUDrogoth_SPC2     Frames: 0
        AnimationSound = Sound: FellBeastWingFlapsShort        Animation:WUDrogoth_SKL.WUDrogoth_SPC3     Frames: 1
        AnimationSound = Sound: FellBeastWingFlaps            Animation:WUDrogoth_SKL.WUDrogoth_SPCA     Frames: 1 41
        AnimationSound = Sound: FellBeastWingFlaps            Animation:WUDrogoth_SKL.WUDrogoth_SPCB     Frames: 1 37 71 106
        AnimationSound = Sound: FellBeastWingFlaps            Animation:WUDrogoth_SKL.WUDrogoth_SPCF     Frames: 1
        AnimationSound = Sound: DrogothWingBlastWingFlaps    Animation:WUDrogoth_SKL.WUDrogoth_SPCF     Frames: 28
    End



    EvaEnemyObjectSightedEvent = DiscoveredEnemyDragon

    ClientUpdate = EvaAnnounceClientCreate ModuleTag_CreateAnnounce
        AnnouncementEventEnemy = DiscoveredEnemyDragon
        AnnouncementEventAlly = None
        AnnouncementEventOwner = None

        OnlyIfVisible = Yes
        CountAsFirstSightedAnnoucement = Yes
        UseObjectsPosition = No
        CreateFakeRadarEvent = Yes
    End



    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End



    Behavior = GiantBirdSlowDeathBehavior ModuleTag_GiantBirdSlowDeath
        DeathTypes                   = ALL -FADED
        SinkDelay                    = 15000
        SinkRate                     = 1.0
        DestructionDelay             = 20000
        Sound                        = INITIAL DrogothVoxDie
        Weapon                       = HIT_GROUND FlyingUnitDeathWarhead
        FX                           = HIT_GROUND FX_TrebuchetImpactHit
        Sound                        = HIT_GROUND FellBeastDieImpact
        CrashAvoidKindOfs            = STRUCTURE
        CrashAvoidRadius             = CRASH_AVOID_RADIUS
        CrashAvoidStrength           = 0.3
        NeedToMaintainFlailingHeight = No
        DeathFlags                   = DEATH_1
    End



    Behavior = SpecialPowerModule ModuleTag_FellbeastLevelAttack
        SpecialPowerTemplate      = SpecialAbilityLevelAttack
        UpdateModuleStartsAttack  = Yes
    End

    Behavior = FellBeastSwoopPower ModuleTag_FellBeastSwoopPower
        SpecialPowerTemplate        = SpecialAbilityLevelAttack
        UnpackTime                    = 1
        AwardXPForTriggering        = 0
        StartAbilityRange            = 1000.0
    End


     Behavior = GiantBirdAIUpdate ModuleTag_GiantBirdAI
        AutoAcquireEnemiesWhenIdle    = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate            = 500
        AILuaEventsList                = FellBeastFunctions
        FollowThroughDistance        = 200
        FollowThroughCheckStep        = 50
        FollowThroughGradient        = 1.0

        GrabTossTimeTrigger            = 2.5
        GrabTossHeightTrigger        = 100.0
        TossFX                        = FX_DiebyFalling
        SpecialContactPoints        = Swoop

        AttackPriority = AttackPriority_FellBeast
      End

    LocomotorSet
        Locomotor = FellBeastLocomotor
        Condition = SET_NORMAL
        Speed     = 95
    End
    LocomotorSet
        Locomotor = FellBeastLocomotor
        Condition = SET_SUPERSONIC
        Speed     = 150
    End
    LocomotorSet
        Locomotor = FellBeastLocomotor
        Condition = SET_WANDER
        Speed     = 78
    End
    LocomotorSet
        Locomotor = FellBeastSwoopLocomotor
        Condition = SET_PANIC
        Speed     = 160
    End

    Behavior = PhysicsBehavior ModuleTag_04
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FireballUnpause
        SpecialPowerTemplate  = SpecialAbilityDrogothFireball
        TriggeredBy           = Upgrade_MiniHordeLvl1
        ObeyRechageOnTrigger  = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_FireballStarter
        SpecialPowerTemplate        = SpecialAbilityDrogothFireball
        UpdateModuleStartsAttack    = Yes
        StartsPaused            = Yes
        InitiateSound            = DrogothVoxAttack
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FireballUpdate
        SpecialPowerTemplate    = SpecialAbilityDrogothFireball
        WhichSpecialWeapon        = 1
        UnpackTime                 = 1800
        PreparationTime            = 10
        PackTime                = 950
        AwardXPForTriggering    = 0
        StartAbilityRange        = DROGOTH_FIREBALL_RANGE
        MustFinishAbility        = Yes
        SpecialWeapon            = DrogothFireball
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TeleportUnpause
        SpecialPowerTemplate  = SpecialAbilitySummonedDragonReposition
        TriggeredBy           = Upgrade_MiniHordeLvl1
        ObeyRechageOnTrigger  = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_TeleportStarter
        SpecialPowerTemplate        = SpecialAbilitySummonedDragonReposition
        UpdateModuleStartsAttack    = Yes
        StartsPaused            = Yes
        InitiateSound               = DragonAllyVoxTeleport
    End

    Behavior = TeleportSpecialAbilityUpdate ModuleTag_TeleportUpdate
        SpecialPowerTemplate    = SpecialAbilitySummonedDragonReposition
        UnpackTime              = 3800
        PackTime                = 3500
        PreparationTime         = 1
        ApproachRequiresLOS     = No
        BusyForDuration         = 5000
        DestinationWeaponName   = SummonDragonBlowBack
    End


















    Behavior = SpecialPowerModule ModuleTag_DismountStarter
        SpecialPowerTemplate        = SpecialAbilityToggleMountedFromFellBeast
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Dismount
         SpecialPowerTemplate    = SpecialAbilityToggleMountedFromFellBeast
         StartAbilityRange        = 50.0
         MountedTemplate            = WildZuchtdracheOld
         SynchronizeTimerOnSpecialPower = SpecialAbilitySummonedDragonReposition SpecialAbilityDrogothFireball
         UnpackTime              = OBJECT_TOGGLE_TIME
         PreparationTime         = 1
         PackTime                = 0
         OpacityTarget            = 1
         AwardXPForTriggering    = 0
         IgnoreFacingCheck        = Yes
    End


    Behavior = AutoHealBehavior ModuleTag_MumakilHealing
       StartsActive          = Yes
       HealingAmount         = MONSTER_HEAL_AMOUNT
       HealingDelay          = 1000
       StartHealingDelay     = MONSTER_HEAL_DELAY
       HealOnlyIfNotInCombat = Yes
    End


    FormationPreviewDecal
            Texture = FPflyingUnitDecal
            Width = 128
            Height = 128
        End

    Behavior = SquishCollide ModuleTag_06
    End

    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End


    Geometry            = CYLINDER
    GeometryMinorRadius = 39.0
    GeometryMajorRadius = 39.0
    GeometryHeight        = 40.0
    GeometryOffset        = X:0 Y:0 Z:-10
    GeometryIsSmall        = No
    Shadow                = SHADOW_VOLUME_NON_SELF_3
    ShadowSunAngle        = 89



    AutoResolveUnitType               = AutoResolveUnit_Monster
    AutoResolveCombatChain            = AutoResolve_MonsterCombatChain

    AutoResolveBody = AutoResolve_MordorAttackTrollBody

    AutoResolveArmor
        Armor = AutoResolve_MordorAttackTrollArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_MordorAttackTrollWeapon
    End

End


