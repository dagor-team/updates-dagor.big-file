


Object DunkelelfenArchangel

    SelectPortrait = UPArchangel



    Draw = W3DScriptedModelDraw ModuleTag_DRAW

        DefaultModelConditionState
            Model                = museraphim_skn
            Skeleton             = char_fe_u_skl
            ModelAnimationPrefix = char_fe
        End





AnimationState        = STUNNED_FLAILING WEAPONSET_TOGGLE_1
    StateName           = STATE_Bow
    Animation
        AnimationName     = #(MODEL)_B_FLYA
        AnimationMode     = LOOP
    End
    Flags               = RANDOMSTART
End

AnimationState        = STUNNED_FLAILING
    StateName           = STATE_Sword
    Animation
        AnimationName     = #(MODEL)_U_FLYA
        AnimationMode     = LOOP
    End
    Flags               = RANDOMSTART
End


AnimationState        = DYING SPLATTED WEAPONSET_TOGGLE_1
    StateName           = STATE_Bow
    Animation
        AnimationName     = #(MODEL)_B_LNDA
        AnimationMode     = ONCE
    End
End

AnimationState        = DYING SPLATTED
    StateName           = STATE_Sword
    Animation
        AnimationName     = #(MODEL)_U_LNDA
        AnimationMode     = ONCE
    End
End

AnimationState        = DYING WEAPONSET_TOGGLE_1
    StateName           = STATE_Bow
    Animation
        AnimationName     = #(MODEL)_B_DIEA
        AnimationMode     = ONCE
    End
End

AnimationState        = DYING
    StateName           = STATE_Sword
    Animation
        AnimationName     = #(MODEL)_U_DIEA
        AnimationMode     = ONCE
    End
    Animation           = GUHero_DIEB
        AnimationName     = #(MODEL)_U_DIEB
        AnimationMode     = ONCE
    End
End





AnimationState        = STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
    StateName           = STATE_Bow
    Animation
        AnimationName     = #(MODEL)_B_GTPA
        AnimationMode     = ONCE
        AnimationSpeedFactorRange = 1.5 1.5
    End
End

AnimationState        = STUNNED_STANDING_UP
    StateName           = STATE_Sword
    Animation
        AnimationName     = #(MODEL)_U_GTPA
        AnimationMode     = ONCE
        AnimationSpeedFactorRange = 1.5 1.5
    End
End

AnimationState        = STUNNED WEAPONSET_TOGGLE_1
    StateName           = STATE_Bow
    Animation
        AnimationName     = #(MODEL)_B_LNDA
        AnimationMode     = ONCE
    End
End

AnimationState        = STUNNED
    StateName           = STATE_Sword
    Animation           = GUHero_LNDA
        AnimationName     = #(MODEL)_U_LNDA
        AnimationMode     = ONCE
    End
End





AnimationState                = PACKING_TYPE_1  WEAPONSET_TOGGLE_1
    StateName                = rainofarrows
    Animation
        AnimationName        = #(MODEL)_B_ATKA2
        AnimationMode        = LOOP
    End

End


AnimationState                = PACKING_TYPE_1
    StateName                = Curse
    Animation
        AnimationName        = #(MODEL)_U_LVLA
        AnimationMode        = ONCE
    End

End


AnimationState                = PACKING_TYPE_3
    StateName                = Curse
    Animation
        AnimationName        = #(MODEL)_U_SPCA
        AnimationMode        = ONCE
    End

End


AnimationState        =  SPECIAL_WEAPON_TWO
    StateName = STATE_Bow
    Animation
        AnimationName       = #(MODEL)_U_SPCL #(MODEL)_U_ATKC
        AnimationMode       = ONCE
    End
    FrameForPristineBonePositions = 59
    BeginScript
        CurDrawableShowSubObject("arrow")
    EndScript
End



        AnimationState        = MOVING USER_4
            StateName           = Slaughter
            Flags               = RANDOMSTART

            Animation           = GUHero_ATKE
                AnimationName     = #(MODEL)_U_ATKE
                AnimationMode     = LOOP
            End
            StateName           = NoSword
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
            EndScript
        End


        AnimationState            = MOVING WEAPONSET_TOGGLE_1
            StateName           = STATE_RunningBow
            Flags               = RANDOMSTART

            Animation
                AnimationName   = #(MODEL)_B_RUNA

                AnimationSpeedFactorRange = 0.85 0.85

            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
                if Prev == "STATE_RunningSword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Running") end
                if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning_WeaponToggle") return end
            EndScript
        End


        AnimationState            = MOVING
            StateName           = STATE_RunningSword
            Flags               = RANDOMSTART

            Animation
                AnimationName   = #(MODEL)_U_RUNA

                AnimationSpeedFactorRange = 0.85 0.85

            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
                if Prev == "STATE_RunningBow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword_Running") end
                if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
            EndScript
        End



        AnimationState                    =    PREATTACK_A WEAPONSET_TOGGLE_1
            StateName                    =    STATE_Firing
            Animation                    =    ReadyToDrawn
                AnimationName            =    #(MODEL)_B_ATKA1
                AnimationMode            =    ONCE


            End
        End

        AnimationState                    =    FIRING_OR_RELOADING_A WEAPONSET_TOGGLE_1
            StateName                    =    STATE_Firing
            Animation                    =    LooseReloadDraw
                AnimationName            =    #(MODEL)_B_ATKA2
                AnimationMode            =    ONCE

                AnimationSpeedFactorRange = 1.1 1.1

            End
        End


        AnimationState                    =    CONTINUOUS_FIRE_MEAN WEAPONSET_TOGGLE_1
            Animation                    =    HangFrameWhileCoasting
                AnimationName            =    #(MODEL)_B_ATKA2
                AnimationMode            =    MANUAL
            End
        End



        AnimationState                = FIRING_OR_PREATTACK_A
            Animation
                AnimationName        = #(MODEL)_U_ATKA1 #(MODEL)_U_ATKA #(MODEL)_U_ATKB
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
            End
        End






        AnimationState = EMOTION_ALERT HIT_REACTION WEAPONSET_TOGGLE_1
            Animation
                AnimationName = #(MODEL)_B_HITA
                AnimationMode = ONCE
            End
        End

        AnimationState = HIT_REACTION WEAPONSET_TOGGLE_1
            Animation
                AnimationName = #(MODEL)_B_HITA
                AnimationMode = ONCE
            End
        End

        AnimationState = HIT_REACTION
            Animation
                AnimationName = #(MODEL)_U_HITA
                AnimationMode = ONCE
            End
        End



        AnimationState                = SPECIAL_POWER_1
            StateName                = STATE_ready
            Animation
                AnimationName        = #(MODEL)_U_SPCA
                AnimationMode        = ONCE
            End
        End


        AnimationState          =    SPECIAL_WEAPON_ONE
            StateName          =    Attacking
            Animation
                AnimationName =    #(MODEL)_U_SPCA
                AnimationMode =    ONCE
            End
            ParticleSysBone       = B_HAND_R PhialofGaladriel FollowBone:Yes
            EnteringStateFX       = FX_BlendendesLicht
        End


        AnimationState          =    SPECIAL_WEAPON_TWO MOUNTED
            StateName          =    Attacking
            Animation
                AnimationName =    #(MODEL)_U_SPLD #(MODEL)_U_ATKA
                AnimationMode =    ONCE
            End
        End


        AnimationState          =    SPECIAL_WEAPON_TWO
            StateName          =    Attacking
            Animation
                AnimationName =    #(MODEL)_U_SPCB #(MODEL)_U_ATKA
                AnimationMode =    ONCE
            End
        End


        AnimationState          =    SPECIAL_WEAPON_THREE MOUNTED
            StateName          =    Attacking
            Animation          =    StaffLaser
                AnimationName =    #(MODEL)_U_SPCD #(MODEL)_U_ATKA
                AnimationMode =    ONCE
            End
            FXEvent              =    Frame:30 Name:FX_GandalfStaffFlare
        End


        AnimationState          =    SPECIAL_WEAPON_THREE
            StateName          =    Attacking
            Animation          =    StaffLaser
                AnimationName =    #(MODEL)_U_SPCE #(MODEL)_U_ATKA
                AnimationMode =    ONCE
            End
            FXEvent              =    Frame:30 Name:FX_GandalfStaffFlare
        End


        AnimationState          =    SPECIAL_WEAPON_FOUR
            StateName          =    Attacking
            Animation
                AnimationName =    #(MODEL)_U_SPCD
                AnimationMode =    ONCE
            End
            FrameForPristineBonePositions    = 44
        End

        AnimationState          =    SPECIAL_WEAPON_FIVE
            StateName          =    Attacking
            Animation
                AnimationName =    #(MODEL)_U_SPCE
                AnimationMode =    ONCE
            End
        End

        AnimationState          =    SPECIAL_WEAPON_SIX
            StateName          =    Attacking
            Animation
                AnimationName =    #(MODEL)_U_SPCF
                AnimationMode =    ONCE
            End
        End


        AnimationState          =    PACKING_TYPE_1 UNPACKING
            StateName          =    Attacking
            Animation          =    LightningSwordStart
                AnimationName =    #(MODEL)_U_SPCC #(MODEL)_U_ATKA
                AnimationMode =    ONCE
            End
            FXEvent              =    Frame:14 Name:FX_AnarionLightningCharge

            FXEvent              =    Frame:14 Name:FX_AnarionLightningSword    FrameStop:70
        End

        AnimationState          =    PACKING_TYPE_1 PREPARING
            StateName          =    Attacking
            Animation          =    LightningSwordLoop
                AnimationName =    #(MODEL)_U_SPCA #(MODEL)_U_ATKA
                AnimationMode =    LOOP
            End
        End

        AnimationState          =    PACKING_TYPE_1 PACKING
            StateName          =    Attacking
            Animation          =    LightningSwordPutAway
                AnimationName =    #(MODEL)_U_SPCB #(MODEL)_U_ATKA
                AnimationMode =    ONCE
            End
        End


        AnimationState          =    PACKING_TYPE_2 UNPACKING
            StateName          =    Attacking
            Animation          =    LightningSwordStart
                AnimationName =    #(MODEL)_U_SPCC #(MODEL)_U_ATKA
                AnimationMode =    ONCE
            End
            FXEvent              =    Frame:14 Name:FX_CreateAHeroLightningCharge

            FXEvent              =    Frame:14 Name:FX_GandalfLightningSword    FrameStop:70
        End

        AnimationState          =    PACKING_TYPE_2 PREPARING
            StateName          =    Attacking
            Animation          =    LightningSwordLoop
                AnimationName =    #(MODEL)_U_SPCA #(MODEL)_U_ATKA
                AnimationMode =    LOOP
            End
        End

        AnimationState          =    PACKING_TYPE_2 PACKING
            StateName          =    Attacking
            Animation          =    LightningSwordPutAway
                AnimationName =    #(MODEL)_U_SPCB #(MODEL)_U_ATKA
                AnimationMode =    ONCE
            End
        End


        AnimationState        = PACKING_TYPE_2 WEAPONSET_TOGGLE_1
            StateName          =    CaptainPower
            Animation           = GUHero_CHRC
                AnimationName     = #(MODEL)_U_CHRC
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.2 1.2
            End
        End


        AnimationState        = PACKING_TYPE_2
            StateName          =    STATE_CaptainBow
            Animation           = GUHero_CHRD
                AnimationName     = #(MODEL)_U_SPCE #(MODEL)_U_SPCA #(MODEL)_U_CHRD
                AnimationMode     = ONCE

            End
        End


        AnimationState          =    PACKING_TYPE_3 UNPACKING
            StateName          =    Attacking
            Animation          =    LightningSwordStart
                AnimationName =    #(MODEL)_U_SPCC #(MODEL)_U_ATKA
                AnimationMode =    ONCE
            End
            FXEvent              =    Frame:14 Name:FX_CreateAHeroLightningCharge

            FXEvent              =    Frame:14 Name:FX_GandalfLightningSword    FrameStop:70
        End

        AnimationState          =    PACKING_TYPE_3 PREPARING
            StateName          =    Attacking
            Animation          =    LightningSwordLoop
                AnimationName =    #(MODEL)_U_SPCA #(MODEL)_U_ATKA
                AnimationMode =    LOOP
            End
        End

        AnimationState          =    PACKING_TYPE_3 PACKING
            StateName          =    Attacking
            Animation          =    LightningSwordPutAway
                AnimationName =    #(MODEL)_U_SPCB #(MODEL)_U_ATKA
                AnimationMode =    ONCE
            End
        End


        AnimationState          =    PACKING_TYPE_4 UNPACKING
            Animation
                AnimationName =    #(MODEL)_U_SPCA
                AnimationMode =    ONCE
            End
        End

        AnimationState          =    PACKING_TYPE_4 PREPARING
            Animation
                AnimationName =    #(MODEL)_U_SPCA
                AnimationMode =    ONCE
            End
        End

        AnimationState          =    PACKING_TYPE_4 PACKING
            Animation
                AnimationName =    #(MODEL)_U_SPCA
                AnimationMode =    ONCE
            End
        End


        AnimationState          =    PACKING_TYPE_5 PACKING WEAPONSET_TOGGLE_1
            Animation
                AnimationName =    #(MODEL)_B_SPCB
                AnimationMode =    ONCE
                AnimationSpeedFactorRange = 0.7333 0.7333
            End
        End


        AnimationState          =    PACKING_TYPE_5 PACKING
            Animation
                AnimationName =    #(MODEL)_U_SPCB
                AnimationMode =    ONCE
            End
        End


        AnimationState          =    PACKING_TYPE_6 PACKING
            Animation
                AnimationName =    #(MODEL)_U_SPCD
                AnimationMode =    ONCE
            End
        End





        AnimationState                = LEVELED WEAPONSET_TOGGLE_1
            Animation                = LevelUp
                AnimationName        = #(MODEL)_B_CHRA #(MODEL)_B_LVLA
                AnimationMode        = ONCE
            End
        End

        AnimationState                = LEVELED
            Animation                = LevelUp
                AnimationName        = #(MODEL)_U_CHRA #(MODEL)_U_LVLA
                AnimationMode        = ONCE
            End
        End




        AnimationState                =    EMOTION_CELEBRATING MOUNTED
            Animation
                AnimationName        =    #(MODEL)_M_CHRA #(MODEL)_M_IRFA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState                =    EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
            Animation
                AnimationName        =    #(MODEL)_B_CHRA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState                =    EMOTION_CELEBRATING
            Animation CHRA
                AnimationName        =    #(MODEL)_U_CHRA #(MODEL)_U_TNTA
                AnimationMode        =    ONCE
            End
            Animation CHRB
                AnimationName        =    #(MODEL)_U_CHRB #(MODEL)_U_CHRA #(MODEL)_U_TNTA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState                =    EMOTION_TAUNTING MOUNTED
            Animation
                AnimationName        =    #(MODEL)_M_TNTA #(MODEL)_M_IRFA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState                =    EMOTION_TAUNTING WEAPONSET_TOGGLE_1
            Animation
                AnimationName        =    #(MODEL)_B_TNTA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState                =    EMOTION_TAUNTING
            Animation CHRA
                AnimationName        =    #(MODEL)_U_TNTA
                AnimationMode        =    ONCE
            End
            Animation CHRB
                AnimationName        =    #(MODEL)_U_TNTB #(MODEL)_U_TNTA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End



        AnimationState                = ENGAGED
            StateName                = STATE_ready
            Animation
                AnimationName        = #(MODEL)_U_IDLA
                AnimationMode        = ONCE
            End
        End


        AnimationState                = WEAPONSET_TOGGLE_1
            StateName                = STATE_Idle_Bow
            Animation
                AnimationName        =    #(MODEL)_B_IDLA
                AnimationPriority    =    20
                AnimationMode        =    ONCE
                AnimationBlendTime    =    15
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
            EndScript
        End

        IdleAnimationState
            StateName                    = STATE_Idle_Sword
            Animation = Foot_IDLB
                AnimationName       = #(MODEL)_U_IDLB
                AnimationMode       = ONCE
                AnimationPriority   = 20
            End
            Animation = Foot_IDLC
                AnimationName       = #(MODEL)_U_IBFA
                AnimationMode       = ONCE
                AnimationPriority   = 2
            End






            BeginScript
                CurDrawableHideSubObject("arrow")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoredSword") end
                if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
            EndScript
        End




        TransitionState = TRANS_BoredToSelectedSword

            Animation = ANTD
                AnimationName    = #(MODEL)_U_ATNA #(MODEL)_U_ATND #(MODEL)_U_IDLA
                AnimationMode    = ONCE
            End
        End

        TransitionState = TRANS_SelectedToBoredSword
            Animation            = ATNF
                AnimationName    = #(MODEL)_U_ATNC #(MODEL)_U_ATNF #(MODEL)_U_ATNE
                AnimationMode    = ONCE
            End
        End

        TransitionState = TRANS_BoredToSelectedBow
            Animation = ATNC
                AnimationName        = #(MODEL)_U_ATNF #(MODEL)_U_ATNE
                AnimationMode        = ONCE
            End
        End

        TransitionState = TRANS_CaptainBowToSelectedBow
            Animation = ATNC
                AnimationName        = #(MODEL)_U_ATNF
                AnimationMode        = ONCE
                AnimationBlendTime    = 10
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        TransitionState = TRANS_SelectedToBoredBow
            Animation            = ATNA
                AnimationName    = #(MODEL)_U_ATNF
                AnimationMode    = ONCE
            End
        End


        TransitionState       = TRANS_BowToSword
            Animation           = CUHero_STHA
                AnimationName     = #(MODEL)_B_STHA
                AnimationMode     = ONCE
            End
        End

        TransitionState       = TRANS_SwordToBow
            Animation           = CUHero_STHB
                AnimationName     = #(MODEL)_U_STHA
                AnimationMode     = ONCE
            End
        End

        TransitionState               = TRANS_BowToSword_Running
            Animation               = DrawSwords
                AnimationName       = #(MODEL)_B_STHB
                AnimationMode       = ONCE
            End
        End

        TransitionState               = TRANS_SwordToBow_Running
            Animation               = DrawBow
                AnimationName       = #(MODEL)_U_STHB
                AnimationMode       = ONCE
            End
        End

    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End



    Side                        = Angmar
    EditorSorting               = UNIT
    ThreatLevel                 = HALDIR_THREAT_LEVEL
    ThingClass                  = CHARACTER_UNIT
    BuildCost                   = 5000
    BuildTime                   = STRONG_BUILDTIME
    ShockwaveResistance         = SHOCKWAVE_RESISTANCE_STRONG
    TransportSlotCount          = TRANSPORTSLOTCOUNT_HERO
    VisionRange                 = VISION_HERO_RANGED
    ShroudClearingRange         = SHROUD_CLEAR_RANGED_HERO
    MaxSimultaneousOfType       = 1
    MaxVisionBonusPercent       = 300%
    VisionBonusTestRadius       = 200
    VisionBonusPercentPerFoot   = 1.0%

    BountyValue                  = ELVEN_HALDIR_BOUNTY_VALUE
    Hotkey                       = CONTROLBAR:ArchangelHotkey
    DisplayName                  = OBJECT:Archangel
    CrushableLevel               = 2
    CommandSet                   = ArchangelCommandSet
    CommandPoints                = 15

    HeroSortOrder                = 50

    WeaponSet
        Conditions               = None
        Weapon                   = PRIMARY ArchangelSword
        AutoChooseSources        = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = HeroArmor
        DamageFX        = NormalDamageFX
    End



    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_HaldirBody

    AutoResolveArmor
        Armor = AutoResolve_HaldirArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_HaldirWeapon
    End

    AutoResolveLeadership = AutoResolve_HaldirBonus




            VoiceAttack                             = HeroElfFemaleVoiceAttack
            VoiceAttackAir                            = HeroElfFemaleVoiceAttack
            VoiceAttackCharge                         = HeroElfFemaleVoiceAttackCharge
            VoiceAttackMachine                         = HeroElfFemaleVoiceAttack
            VoiceAttackStructure                     = HeroElfFemaleVoiceAttack
            VoiceCreated                            = HeroElfFemaleArcherVoiceSalute
            VoiceFear                                = HeroElfFemaleVoiceHelpMe
            VoiceFullyCreated                        = HeroElfFemaleArcherVoiceSalute
            VoiceGuard                                = HeroElfFemaleVoiceMove
            VoiceMove                                 = HeroElfFemaleVoiceMove
            VoiceMoveToCamp                         = HeroElfFemaleVoiceMove
            VoiceMoveWhileAttacking                 = HeroElfFemaleVoiceMove
            VoicePriority                            = 95
            VoiceRetreatToCastle                     = HeroElfFemaleVoiceMove
            VoiceSelect                             = HeroElfFemaleVoiceSelectMS
            VoiceSelectBattle                          = HeroElfFemaleVoiceSelectBattle

            SoundImpact                                = ImpactHorse

            UnitSpecificSounds
                VoiceEnterUnitElvenTransportShip    = HeroElfFemaleVoiceMove
                VoiceEnterUnitMordorMumakil            = HeroElfFemaleVoiceMove
                VoiceEnterUnitSlaughterHouse        = HeroElfFemaleVoiceMove
                VoiceEnterUnitTransportShip            = HeroElfFemaleVoiceMove
                VoiceGarrison                        = HeroElfFemaleVoiceMove
                VoiceInitiateCaptureBuilding        = HeroElfFemaleVoiceCaptureBuilding
            End

    CrowdResponseKey = ElfHero



    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key    = Humanoid_Male Elf Elf_Male Unit Infantry Hero
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap                    = 800
        AnimationSound                        = Sound:ArrowDrawBow                    Animation:EUHaldir_SKL.EUHaldir_ATA1    Frames:6
        AnimationSound                        = Sound:ArrowDrawBow                    Animation:EUHaldir_SKL.EUHaldir_ATA2    Frames:18

        AnimationSound                        = Sound:SwordShingClean1                Animation:EUHaldir_SKL.EUHaldir_STHA     Frames:24
        AnimationSound                        = Sound:SwordIntoScabbard1                Animation:EUHaldir_SKL.EUHaldir_STHB     Frames:9
        AnimationSound                        = Sound:WeaponSwitchBow                    Animation:EUHaldir_SKL.EUHaldir_STHB     Frames:15

        AnimationSound                        = Sound:SwordShingClean1                 Animation:EUHaldir_SKL.EUHaldir_STHC     Frames:20
        AnimationSound                        = Sound:SwordIntoScabbard1                Animation:EUHaldir_SKL.EUHaldir_STHD     Frames:5
        AnimationSound                        = Sound:WeaponSwitchBow                 Animation:EUHaldir_SKL.EUHaldir_STHD     Frames:8

        AnimationSound                        = Sound:SwordShingClean1                 Animation:EUHaldir_SKL.EUHaldir_RUNC     Frames:14
        AnimationSound                        = Sound:SwordIntoScabbard1                Animation:EUHaldir_SKL.EUHaldir_RUNT     Frames:4
        AnimationSound                        = Sound:WeaponSwitchBow                 Animation:EUHaldir_SKL.EUHaldir_RUNT     Frames:16

        AnimationSound                        = Sound:BodyFallSoldier                    Animation:EUHaldir_SKL.EUHaldir_LNDA    Frames:9
        AnimationSound                        = Sound:BodyFallSoldier                    Animation:EUHaldir_SKL.EUHaldir_LNDB    Frames:1

        AnimationSound                        = Sound:BodyFallGenericNoArmor            Animation:EUHaldir_SKL.EUHaldir_DIEB     Frames:82
        AnimationSound                        = Sound:BodyFallSoldier                    Animation:EUHaldir_SKL.EUHaldir_DIEBV5     Frames:25
        AnimationSound                        = Sound:BodyFallSoldier                    Animation:EUHaldir_SKL.EUHaldir_DIESV4     Frames:26
        AnimationSound                        = Sound:BodyFallGenericNoArmor            Animation:EUHaldir_SKL.EUHaldir_DIESV5    Frames:100
    End





    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1                = 1500
        HitReactionThreshold1                = 400
        FastHitsResetReaction                = Yes
    End





    RadarPriority                           = UNIT
    KindOf                                  = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT ARMY_SUMMARY ATTACK_NEEDS_LINE_OF_SIGHT HEAVY_MELEE_HITTER
    PathfindDiameter                        = 40.0


    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius                         = EMOTION_CHEER_RADIUS
        MaxHealth                           = 5000
        PermanentlyKilledByFilter           = NONE
        DodgePercent                        = HERO_DODGE_PERCENT
    End


    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance                = 200
        TauntAndPointUpdateDelay            = 10000
        PointAt                                = ANY +HERO
        AddEmotion            =    Doom_Base



        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
         AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base


        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End

    Behavior = AutoHealBehavior ModuleTag_LegolasHealing
        StartsActive                         = Yes
        HealingAmount                        = HERO_HEAL_AMOUNT
        HealingDelay                         = 1000
        StartHealingDelay                    = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat                = Yes
    End

    Behavior = AutoHealBehavior ModuleTag_ElvenGiftHealing
        StartsActive                = No
        TriggeredBy                    = Upgrade_ElvenGift
        HealingAmount                = ELVEN_GIFT_REGEN_AMOUNT
        HealingDelay                = ELVEN_GIFT_REGEN_DELAY
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End
    Behavior = AttributeModifierUpgrade ModuleTag_ElvenGiftBonus
        TriggeredBy = Upgrade_ElvenGift
        AttributeModifier = SpellBookElvenGifts
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate                        = Hero
    End







    Behavior = SpecialPowerModule ModuleTag_IstariLightPower
        SpecialPowerTemplate        = SpecialAbilityLightingBolt
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = No

    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_IstariLightUpdate
        SpecialPowerTemplate    = SpecialAbilityLightingBolt
        SkipContinue            = Yes
        UnpackTime              = 1500
        PreparationTime         = 1
        PersistentPrepTime      = 1000
        PackTime                = 500
        AwardXPForTriggering    = 0
        StartAbilityRange       = 290
        ApproachRequiresLOS     = Yes
        SpecialWeapon           = ArchangelLightningBlastWeapon
        MustFinishAbility       = Yes
        WhichSpecialWeapon      = 3
        BusyForDuration         = 2500
    End







    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle            = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate                    = 500
        CanAttackWhileContained                = Yes
        AILuaEventsList                        = LegolasFunctions
    End


    Behavior = AutoAbilityBehavior ModuleTag_HaldirAutoAbility
    End

    LocomotorSet
        Locomotor                            = HumanLocomotor
        Condition                            = SET_NORMAL
        Speed                                = NORMAL_ELVEN_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor                            = HumanWanderLocomotor
        Condition                            = SET_WANDER
        Speed                                = NORMAL_GOOD_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor                            = HumanPanicLocomotor
        Condition                            = SET_PANIC
        Speed                                = NORMAL_ELVEN_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor                            = HumanScaredLocomotor
        Condition                            = SET_SCARED
        Speed                                = NORMAL_ELVEN_FAST_MEMBER_SPEED
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult                          = 1.0
        ShockStandingTime                    = 2000
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes                           = ALL -FADED
        SinkDelay                            = 3000
        SinkRate                             = 0.5
        DestructionDelay                     = 15000

        DeathFlags                           = DEATH_1
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes                           = NONE +FADED
        FadeDelay                            = 0
        FadeTime                             = 5000
        DestructionDelay                     = 5000
        DeathFlags                           = DEATH_2
        FX                                   = INITIAL FX_UnSummonElvenAllies
    End

    Behavior = SquishCollide ModuleTag_06
    End

    Behavior = BezierProjectileBehavior ModuleTag_08
        FirstHeight                           = 25
        SecondHeight                          = 25
        FirstPercentIndent                    = 30%
        SecondPercentIndent                   = 70%
        TumbleRandomly                        = Yes
        CrushStyle                            = Yes
        DieOnImpact                           = Yes
        BounceCount                           = 1
        BounceDistance                        = 41
        BounceFirstHeight                     = 25
        BounceSecondHeight                    = 25
        BounceFirstPercentIndent              = 20%
        BounceSecondPercentIndent             = 80%
        GroundHitFX                           = FX_ThrownRockGroundHit
        GroundBounceFX                        = FX_ThrownRockBounceHit
    End





    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Geometry             = CYLINDER
    GeometryMajorRadius  = 8.0
    GeometryHeight       = 19.2
    GeometryIsSmall      = Yes
    Shadow               = SHADOW_DECAL
    ShadowSizeX          = 19
    ShadowSizeY          = 19
    ShadowTexture        = ShadowI
End


Object Seraphim



	ButtonImage    = HeSeraphimButtonImage
	SelectPortrait = HeSeraphimPortrait

    Draw = W3DScriptedModelDraw ModuleTag_DRAW

        DefaultModelConditionState
            Model                = seraphim_skn
            Model                = euseraphim_skn ExtraMesh:Yes
            Skeleton             = char_fe_u_skl
            ModelAnimationPrefix = char_fe
        End





AnimationState        = STUNNED_FLAILING WEAPONSET_TOGGLE_1
    StateName           = STATE_Bow
    Animation
        AnimationName     = #(MODEL)_B_FLYA
        AnimationMode     = LOOP
    End
    Flags               = RANDOMSTART
End

AnimationState        = STUNNED_FLAILING
    StateName           = STATE_Sword
    Animation
        AnimationName     = #(MODEL)_U_FLYA
        AnimationMode     = LOOP
    End
    Flags               = RANDOMSTART
End


AnimationState        = DYING SPLATTED WEAPONSET_TOGGLE_1
    StateName           = STATE_Bow
    Animation
        AnimationName     = #(MODEL)_B_LNDA
        AnimationMode     = ONCE
    End
End

AnimationState        = DYING SPLATTED
    StateName           = STATE_Sword
    Animation
        AnimationName     = #(MODEL)_U_LNDA
        AnimationMode     = ONCE
    End
End

AnimationState        = DYING WEAPONSET_TOGGLE_1
    StateName           = STATE_Bow
    Animation
        AnimationName     = #(MODEL)_B_DIEA
        AnimationMode     = ONCE
    End
End

AnimationState        = DYING
    StateName           = STATE_Sword
    Animation
        AnimationName     = #(MODEL)_U_DIEA
        AnimationMode     = ONCE
    End
    Animation           = GUHero_DIEB
        AnimationName     = #(MODEL)_U_DIEB
        AnimationMode     = ONCE
    End
End





AnimationState        = STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
    StateName           = STATE_Bow
    Animation
        AnimationName     = #(MODEL)_B_GTPA
        AnimationMode     = ONCE
        AnimationSpeedFactorRange = 1.5 1.5
    End
End

AnimationState        = STUNNED_STANDING_UP
    StateName           = STATE_Sword
    Animation
        AnimationName     = #(MODEL)_U_GTPA
        AnimationMode     = ONCE
        AnimationSpeedFactorRange = 1.5 1.5
    End
End

AnimationState        = STUNNED WEAPONSET_TOGGLE_1
    StateName           = STATE_Bow
    Animation
        AnimationName     = #(MODEL)_B_LNDA
        AnimationMode     = ONCE
    End
End

AnimationState        = STUNNED
    StateName           = STATE_Sword
    Animation           = GUHero_LNDA
        AnimationName     = #(MODEL)_U_LNDA
        AnimationMode     = ONCE
    End
End





AnimationState                = PACKING_TYPE_1  WEAPONSET_TOGGLE_1
    StateName                = rainofarrows
    Animation
        AnimationName        = #(MODEL)_B_ATKA2
        AnimationMode        = LOOP
    End

End


AnimationState                = PACKING_TYPE_1
    StateName                = Curse
    Animation
        AnimationName        = #(MODEL)_U_LVLA
        AnimationMode        = ONCE
    End

End


AnimationState                = PACKING_TYPE_3
    StateName                = Curse
    Animation
        AnimationName        = #(MODEL)_U_SPCA
        AnimationMode        = ONCE
    End

End


AnimationState        =  SPECIAL_WEAPON_TWO
    StateName = STATE_Bow
    Animation
        AnimationName       = #(MODEL)_U_SPCL #(MODEL)_U_ATKC
        AnimationMode       = ONCE
    End
    FrameForPristineBonePositions = 59
    BeginScript
        CurDrawableShowSubObject("arrow")
    EndScript
End



        AnimationState        = MOVING USER_4
            StateName           = Slaughter
            Flags               = RANDOMSTART

            Animation           = GUHero_ATKE
                AnimationName     = #(MODEL)_U_ATKE
                AnimationMode     = LOOP
            End
            StateName           = NoSword
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
            EndScript
        End


        AnimationState            = MOVING WEAPONSET_TOGGLE_1
            StateName           = STATE_RunningBow
            Flags               = RANDOMSTART

            Animation
                AnimationName   = #(MODEL)_B_RUNA

                AnimationSpeedFactorRange = 0.85 0.85

            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
                if Prev == "STATE_RunningSword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Running") end
                if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning_WeaponToggle") return end
            EndScript
        End


        AnimationState            = MOVING
            StateName           = STATE_RunningSword
            Flags               = RANDOMSTART

            Animation
                AnimationName   = #(MODEL)_U_RUNA

                AnimationSpeedFactorRange = 0.85 0.85

            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
                if Prev == "STATE_RunningBow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword_Running") end
                if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
            EndScript
        End



        AnimationState                    =    PREATTACK_A WEAPONSET_TOGGLE_1
            StateName                    =    STATE_Firing
            Animation                    =    ReadyToDrawn
                AnimationName            =    #(MODEL)_B_ATKA1
                AnimationMode            =    ONCE


            End
        End

        AnimationState                    =    FIRING_OR_RELOADING_A WEAPONSET_TOGGLE_1
            StateName                    =    STATE_Firing
            Animation                    =    LooseReloadDraw
                AnimationName            =    #(MODEL)_B_ATKA2
                AnimationMode            =    ONCE

                AnimationSpeedFactorRange = 1.1 1.1

            End
        End


        AnimationState                    =    CONTINUOUS_FIRE_MEAN WEAPONSET_TOGGLE_1
            Animation                    =    HangFrameWhileCoasting
                AnimationName            =    #(MODEL)_B_ATKA2
                AnimationMode            =    MANUAL
            End
        End




        AnimationState                = FIRING_OR_PREATTACK_A
            Animation
                AnimationName        = #(MODEL)_U_ATKA1 #(MODEL)_U_ATKA #(MODEL)_U_ATKB
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
            End
        End






        AnimationState = EMOTION_ALERT HIT_REACTION WEAPONSET_TOGGLE_1
            Animation
                AnimationName = #(MODEL)_B_HITA
                AnimationMode = ONCE
            End
        End

        AnimationState = HIT_REACTION WEAPONSET_TOGGLE_1
            Animation
                AnimationName = #(MODEL)_B_HITA
                AnimationMode = ONCE
            End
        End

        AnimationState = HIT_REACTION
            Animation
                AnimationName = #(MODEL)_U_HITA
                AnimationMode = ONCE
            End
        End



        AnimationState                = SPECIAL_POWER_1
            StateName                = STATE_ready
            Animation
                AnimationName        = #(MODEL)_U_SPCA
                AnimationMode        = ONCE
            End
        End


        AnimationState          =    SPECIAL_WEAPON_ONE
            StateName          =    Attacking
            Animation
                AnimationName =    #(MODEL)_U_SPCA
                AnimationMode =    ONCE
            End
            ParticleSysBone       = B_HAND_R PhialofGaladriel FollowBone:Yes
            EnteringStateFX       = FX_BlendendesLicht
        End


        AnimationState          =    SPECIAL_WEAPON_TWO MOUNTED
            StateName          =    Attacking
            Animation
                AnimationName =    #(MODEL)_U_SPLD #(MODEL)_U_ATKA
                AnimationMode =    ONCE
            End
        End


        AnimationState          =    SPECIAL_WEAPON_TWO
            StateName          =    Attacking
            Animation
                AnimationName =    #(MODEL)_U_SPCB #(MODEL)_U_ATKA
                AnimationMode =    ONCE
            End
        End


        AnimationState          =    SPECIAL_WEAPON_THREE MOUNTED
            StateName          =    Attacking
            Animation          =    StaffLaser
                AnimationName =    #(MODEL)_U_SPCD #(MODEL)_U_ATKA
                AnimationMode =    ONCE
            End
            FXEvent              =    Frame:30 Name:FX_GandalfStaffFlare
        End


        AnimationState          =    SPECIAL_WEAPON_THREE
            StateName          =    Attacking
            Animation          =    StaffLaser
                AnimationName =    #(MODEL)_U_SPCE #(MODEL)_U_ATKA
                AnimationMode =    ONCE
            End
            FXEvent              =    Frame:30 Name:FX_GandalfStaffFlare
        End


        AnimationState          =    SPECIAL_WEAPON_FOUR
            StateName          =    Attacking
            Animation
                AnimationName =    #(MODEL)_U_SPCD
                AnimationMode =    ONCE
            End
            FrameForPristineBonePositions    = 44
        End

        AnimationState          =    SPECIAL_WEAPON_FIVE
            StateName          =    Attacking
            Animation
                AnimationName =    #(MODEL)_U_SPCE
                AnimationMode =    ONCE
            End
        End

        AnimationState          =    SPECIAL_WEAPON_SIX
            StateName          =    Attacking
            Animation
                AnimationName =    #(MODEL)_U_SPCF
                AnimationMode =    ONCE
            End
        End


        AnimationState          =    PACKING_TYPE_1 UNPACKING
            StateName          =    Attacking
            Animation          =    LightningSwordStart
                AnimationName =    #(MODEL)_U_SPCC #(MODEL)_U_ATKA
                AnimationMode =    ONCE
            End
            FXEvent              =    Frame:14 Name:FX_AnarionLightningCharge

            FXEvent              =    Frame:14 Name:FX_AnarionLightningSword    FrameStop:70
        End

        AnimationState          =    PACKING_TYPE_1 PREPARING
            StateName          =    Attacking
            Animation          =    LightningSwordLoop
                AnimationName =    #(MODEL)_U_SPCA #(MODEL)_U_ATKA
                AnimationMode =    LOOP
            End
        End

        AnimationState          =    PACKING_TYPE_1 PACKING
            StateName          =    Attacking
            Animation          =    LightningSwordPutAway
                AnimationName =    #(MODEL)_U_SPCB #(MODEL)_U_ATKA
                AnimationMode =    ONCE
            End
        End


        AnimationState          =    PACKING_TYPE_2 UNPACKING
            StateName          =    Attacking
            Animation          =    LightningSwordStart
                AnimationName =    #(MODEL)_U_SPCC #(MODEL)_U_ATKA
                AnimationMode =    ONCE
            End
            FXEvent              =    Frame:14 Name:FX_CreateAHeroLightningCharge

            FXEvent              =    Frame:14 Name:FX_GandalfLightningSword    FrameStop:70
        End

        AnimationState          =    PACKING_TYPE_2 PREPARING
            StateName          =    Attacking
            Animation          =    LightningSwordLoop
                AnimationName =    #(MODEL)_U_SPCA #(MODEL)_U_ATKA
                AnimationMode =    LOOP
            End
        End

        AnimationState          =    PACKING_TYPE_2 PACKING
            StateName          =    Attacking
            Animation          =    LightningSwordPutAway
                AnimationName =    #(MODEL)_U_SPCB #(MODEL)_U_ATKA
                AnimationMode =    ONCE
            End
        End


        AnimationState        = PACKING_TYPE_2 WEAPONSET_TOGGLE_1
            StateName          =    CaptainPower
            Animation           = GUHero_CHRC
                AnimationName     = #(MODEL)_U_CHRC
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 1.2 1.2
            End
        End


        AnimationState        = PACKING_TYPE_2
            StateName          =    STATE_CaptainBow
            Animation           = GUHero_CHRD
                AnimationName     = #(MODEL)_U_SPCE #(MODEL)_U_SPCA #(MODEL)_U_CHRD
                AnimationMode     = ONCE

            End
        End


        AnimationState          =    PACKING_TYPE_3 UNPACKING
            StateName          =    Attacking
            Animation          =    LightningSwordStart
                AnimationName =    #(MODEL)_U_SPCC #(MODEL)_U_ATKA
                AnimationMode =    ONCE
            End
            FXEvent              =    Frame:14 Name:FX_CreateAHeroLightningCharge

            FXEvent              =    Frame:14 Name:FX_GandalfLightningSword    FrameStop:70
        End

        AnimationState          =    PACKING_TYPE_3 PREPARING
            StateName          =    Attacking
            Animation          =    LightningSwordLoop
                AnimationName =    #(MODEL)_U_SPCA #(MODEL)_U_ATKA
                AnimationMode =    LOOP
            End
        End

        AnimationState          =    PACKING_TYPE_3 PACKING
            StateName          =    Attacking
            Animation          =    LightningSwordPutAway
                AnimationName =    #(MODEL)_U_SPCB #(MODEL)_U_ATKA
                AnimationMode =    ONCE
            End
        End


        AnimationState          =    PACKING_TYPE_4 UNPACKING
            Animation
                AnimationName =    #(MODEL)_U_SPCA
                AnimationMode =    ONCE
            End
        End

        AnimationState          =    PACKING_TYPE_4 PREPARING
            Animation
                AnimationName =    #(MODEL)_U_SPCA
                AnimationMode =    ONCE
            End
        End

        AnimationState          =    PACKING_TYPE_4 PACKING
            Animation
                AnimationName =    #(MODEL)_U_SPCA
                AnimationMode =    ONCE
            End
        End




        AnimationState          =    PACKING_TYPE_5 PACKING WEAPONSET_TOGGLE_1
            Animation
                AnimationName =    #(MODEL)_B_SPCB
                AnimationMode =    ONCE
                AnimationSpeedFactorRange = 0.7333 0.7333
            End
        End


        AnimationState          =    PACKING_TYPE_5 PACKING
            Animation
                AnimationName =    #(MODEL)_U_SPCB
                AnimationMode =    ONCE
            End
        End


        AnimationState          =    PACKING_TYPE_6 PACKING
            Animation
                AnimationName =    #(MODEL)_U_SPCD
                AnimationMode =    ONCE
            End
        End





        AnimationState                = LEVELED WEAPONSET_TOGGLE_1
            Animation                = LevelUp
                AnimationName        = #(MODEL)_B_CHRA #(MODEL)_B_LVLA
                AnimationMode        = ONCE
            End
        End

        AnimationState                = LEVELED
            Animation                = LevelUp
                AnimationName        = #(MODEL)_U_CHRA #(MODEL)_U_LVLA
                AnimationMode        = ONCE
            End
        End




        AnimationState                =    EMOTION_CELEBRATING MOUNTED
            Animation
                AnimationName        =    #(MODEL)_M_CHRA #(MODEL)_M_IRFA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState                =    EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
            Animation
                AnimationName        =    #(MODEL)_B_CHRA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState                =    EMOTION_CELEBRATING
            Animation CHRA
                AnimationName        =    #(MODEL)_U_CHRA #(MODEL)_U_TNTA
                AnimationMode        =    ONCE
            End
            Animation CHRB
                AnimationName        =    #(MODEL)_U_CHRB #(MODEL)_U_CHRA #(MODEL)_U_TNTA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState                =    EMOTION_TAUNTING MOUNTED
            Animation
                AnimationName        =    #(MODEL)_M_TNTA #(MODEL)_M_IRFA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState                =    EMOTION_TAUNTING WEAPONSET_TOGGLE_1
            Animation
                AnimationName        =    #(MODEL)_B_TNTA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState                =    EMOTION_TAUNTING
            Animation CHRA
                AnimationName        =    #(MODEL)_U_TNTA
                AnimationMode        =    ONCE
            End
            Animation CHRB
                AnimationName        =    #(MODEL)_U_TNTB #(MODEL)_U_TNTA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End



        AnimationState                = ENGAGED
            StateName                = STATE_ready
            Animation
                AnimationName        = #(MODEL)_U_IDLA
                AnimationMode        = ONCE
            End
        End


        AnimationState                = WEAPONSET_TOGGLE_1
            StateName                = STATE_Idle_Bow
            Animation
                AnimationName        =    #(MODEL)_B_IDLA
                AnimationPriority    =    20
                AnimationMode        =    ONCE
                AnimationBlendTime    =    15
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwordToBow") end
            EndScript
        End

        IdleAnimationState
            StateName                    = STATE_Idle_Sword
            Animation = Foot_IDLB
                AnimationName       = #(MODEL)_U_IDLB
                AnimationMode       = ONCE
                AnimationPriority   = 20
            End
            Animation = Foot_IDLC
                AnimationName       = #(MODEL)_U_IBFA
                AnimationMode       = ONCE
                AnimationPriority   = 2
            End






            BeginScript
                CurDrawableHideSubObject("arrow")
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoredSword") end
                if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
            EndScript
        End




        TransitionState = TRANS_BoredToSelectedSword

            Animation = ANTD
                AnimationName    = #(MODEL)_U_ATNA #(MODEL)_U_ATND #(MODEL)_U_IDLA
                AnimationMode    = ONCE
            End
        End

        TransitionState = TRANS_SelectedToBoredSword
            Animation            = ATNF
                AnimationName    = #(MODEL)_U_ATNC #(MODEL)_U_ATNF #(MODEL)_U_ATNE
                AnimationMode    = ONCE
            End
        End

        TransitionState = TRANS_BoredToSelectedBow
            Animation = ATNC
                AnimationName        = #(MODEL)_U_ATNF #(MODEL)_U_ATNE
                AnimationMode        = ONCE
            End
        End

        TransitionState = TRANS_CaptainBowToSelectedBow
            Animation = ATNC
                AnimationName        = #(MODEL)_U_ATNF
                AnimationMode        = ONCE
                AnimationBlendTime    = 10
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        TransitionState = TRANS_SelectedToBoredBow
            Animation            = ATNA
                AnimationName    = #(MODEL)_U_ATNF
                AnimationMode    = ONCE
            End
        End


        TransitionState       = TRANS_BowToSword
            Animation           = CUHero_STHA
                AnimationName     = #(MODEL)_B_STHA
                AnimationMode     = ONCE
            End
        End

        TransitionState       = TRANS_SwordToBow
            Animation           = CUHero_STHB
                AnimationName     = #(MODEL)_U_STHA
                AnimationMode     = ONCE
            End
        End

        TransitionState               = TRANS_BowToSword_Running
            Animation               = DrawSwords
                AnimationName       = #(MODEL)_B_STHB
                AnimationMode       = ONCE
            End
        End

        TransitionState               = TRANS_SwordToBow_Running
            Animation               = DrawBow
                AnimationName       = #(MODEL)_U_STHB
                AnimationMode       = ONCE
            End
        End

    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    Draw = W3DScriptedModelDraw ModuleTag_LightController
        DefaultModelConditionState
            Model = NONE
        End

        ModelConditionState = HERO
            Model = MMDGRTHALLCNTRB
            Shadow                       = SHADOW_ADDITIVE_DECAL_DYNAMIC
            ShadowSizeX                  = 400
            ShadowSizeY                  = 400
            ShadowTexture                = EXGandalfGlow
            ShadowOpacityStart           = 0
            ShadowOpacityFadeInTime      = 1000
            ShadowOpacityPeak            = 255
            ShadowOpacityFadeOutTime     = 1000
            ShadowOpacityEnd             = 0
            ShadowOverrideLODVisibility  = Yes
        End
    End



    Side                        = Angmar
    EditorSorting               = UNIT
    ThreatLevel                 = HALDIR_THREAT_LEVEL
    ThingClass                  = CHARACTER_UNIT
    BuildCost                   = 5000
    BuildTime                   = STRONG_BUILDTIME
    ShockwaveResistance         = SHOCKWAVE_RESISTANCE_STRONG
    TransportSlotCount          = TRANSPORTSLOTCOUNT_HERO
    VisionRange                 = VISION_HERO_RANGED
    ShroudClearingRange         = SHROUD_CLEAR_RANGED_HERO
    MaxSimultaneousOfType       = 1
    MaxVisionBonusPercent       = 300%
    VisionBonusTestRadius       = 200
    VisionBonusPercentPerFoot   = 1.0%

    BountyValue                  = ELVEN_HALDIR_BOUNTY_VALUE
    Hotkey                       = CONTROLBAR:SeraphimHotkey
    DisplayName                  = OBJECT:Seraphim
    CrushableLevel               = 3
    CommandSet                   = SeraphimCommandSet
    CommandPoints                = 0

    HeroSortOrder                = 50

    WeaponSet
        Conditions               = None
        Weapon                   = PRIMARY HuldigtEalendrilSword
        AutoChooseSources        = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions               = WEAPONSET_TOGGLE_1
        Weapon                   = PRIMARY HuldigtEalendrilBow
        AutoChooseSources        = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      	 = None
        Armor           	 = MediumHeroArmor
        DamageFX       		 = NormalDamageFX
    End



    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_HaldirBody

    AutoResolveArmor
        Armor = AutoResolve_HaldirArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_HaldirWeapon
    End

    AutoResolveLeadership = AutoResolve_HaldirBonus




            VoiceAttack                             = HeroElfFemaleVoiceAttack
            VoiceAttackAir                          = HeroElfFemaleVoiceAttack
            VoiceAttackCharge                       = HeroElfFemaleVoiceAttackCharge
            VoiceAttackMachine                      = HeroElfFemaleVoiceAttack
            VoiceAttackStructure                    = HeroElfFemaleVoiceAttack
            VoiceCreated                            = HeroElfFemaleArcherVoiceSalute
            VoiceFear                               = HeroElfFemaleVoiceHelpMe
            VoiceFullyCreated                       = HeroElfFemaleArcherVoiceSalute
            VoiceGuard                              = HeroElfFemaleVoiceMove
            VoiceMove                               = HeroElfFemaleVoiceMove
            VoiceMoveToCamp                         = HeroElfFemaleVoiceMove
            VoiceMoveWhileAttacking                 = HeroElfFemaleVoiceMove
            VoicePriority                           = 95
            VoiceRetreatToCastle                    = HeroElfFemaleVoiceMove
            VoiceSelect                             = HeroElfFemaleVoiceSelectMS
            VoiceSelectBattle                       = HeroElfFemaleVoiceSelectBattle

            SoundImpact                             = ImpactHorse

            UnitSpecificSounds
                VoiceEnterUnitElvenTransportShip    = HeroElfFemaleVoiceMove
                VoiceEnterUnitMordorMumakil         = HeroElfFemaleVoiceMove
                VoiceEnterUnitSlaughterHouse        = HeroElfFemaleVoiceMove
                VoiceEnterUnitTransportShip         = HeroElfFemaleVoiceMove
                VoiceGarrison                       = HeroElfFemaleVoiceMove
                VoiceInitiateCaptureBuilding        = HeroElfFemaleVoiceCaptureBuilding
            End

    CrowdResponseKey = ElfHero

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key    = Humanoid_Male Elf Elf_Male Unit Infantry Hero
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap                     = 800
        AnimationSound                        = Sound:ArrowDrawBow                    Animation:EUHaldir_SKL.EUHaldir_ATA1     Frames:6
        AnimationSound                        = Sound:ArrowDrawBow                    Animation:EUHaldir_SKL.EUHaldir_ATA2     Frames:18

        AnimationSound                        = Sound:SwordShingClean1                Animation:EUHaldir_SKL.EUHaldir_STHA     Frames:24
        AnimationSound                        = Sound:SwordIntoScabbard1              Animation:EUHaldir_SKL.EUHaldir_STHB     Frames:9
        AnimationSound                        = Sound:WeaponSwitchBow                 Animation:EUHaldir_SKL.EUHaldir_STHB     Frames:15

        AnimationSound                        = Sound:SwordShingClean1                Animation:EUHaldir_SKL.EUHaldir_STHC     Frames:20
        AnimationSound                        = Sound:SwordIntoScabbard1              Animation:EUHaldir_SKL.EUHaldir_STHD     Frames:5
        AnimationSound                        = Sound:WeaponSwitchBow                 Animation:EUHaldir_SKL.EUHaldir_STHD     Frames:8

        AnimationSound                        = Sound:SwordShingClean1                Animation:EUHaldir_SKL.EUHaldir_RUNC     Frames:14
        AnimationSound                        = Sound:SwordIntoScabbard1              Animation:EUHaldir_SKL.EUHaldir_RUNT     Frames:4
        AnimationSound                        = Sound:WeaponSwitchBow                 Animation:EUHaldir_SKL.EUHaldir_RUNT     Frames:16

        AnimationSound                        = Sound:BodyFallSoldier                 Animation:EUHaldir_SKL.EUHaldir_LNDA     Frames:9
        AnimationSound                        = Sound:BodyFallSoldier                 Animation:EUHaldir_SKL.EUHaldir_LNDB     Frames:1

        AnimationSound                        = Sound:BodyFallGenericNoArmor          Animation:EUHaldir_SKL.EUHaldir_DIEB     Frames:82
        AnimationSound                        = Sound:BodyFallSoldier                 Animation:EUHaldir_SKL.EUHaldir_DIEBV5   Frames:25
        AnimationSound                        = Sound:BodyFallSoldier                 Animation:EUHaldir_SKL.EUHaldir_DIESV4   Frames:26
        AnimationSound                        = Sound:BodyFallGenericNoArmor          Animation:EUHaldir_SKL.EUHaldir_DIESV5   Frames:100
    End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1                = 1500
        HitReactionThreshold1                = 400
        FastHitsResetReaction                = Yes
    End

    Behavior = SubObjectsUpgrade ModuleTag_Making
        TriggeredBy       = Upgrade_AllFactionUpgrade
        HideSubObjects    = BOW_04 BOX48 GROUND
    End




    RadarPriority                           = UNIT
    KindOf                                  = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY PATH_THROUGH_EACH_OTHER SCORE THROWN_OBJECT ARMY_SUMMARY ATTACK_NEEDS_LINE_OF_SIGHT HEAVY_MELEE_HITTER
    CamouflageDetectionMultiplier           = CAMOUFLAGE_DETECTION_DISTANCE_MEDIUM
    PathfindDiameter                        = 40.0


    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius                         = EMOTION_CHEER_RADIUS
        MaxHealth                           = 5000
        PermanentlyKilledByFilter           = NONE
        DodgePercent                        = HERO_DODGE_PERCENT
    End


    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance              = 200
        TauntAndPointUpdateDelay           = 10000
        PointAt                            = ANY +HERO
        AddEmotion            =    Doom_Base
        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
        AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base
        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End

    Behavior = AutoHealBehavior ModuleTag_LegolasHealing
        StartsActive                         = Yes
        HealingAmount                        = HERO_HEAL_AMOUNT
        HealingDelay                         = 1000
        StartHealingDelay                    = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat                = Yes
    End

    Behavior = AutoHealBehavior ModuleTag_ElvenGiftHealing
        StartsActive               = No
        TriggeredBy                = Upgrade_ElvenGift
        HealingAmount              = ELVEN_GIFT_REGEN_AMOUNT
        HealingDelay               = ELVEN_GIFT_REGEN_DELAY
        StartHealingDelay 	   = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat      = Yes
    End
    Behavior = AttributeModifierUpgrade ModuleTag_ElvenGiftBonus
        TriggeredBy = Upgrade_ElvenGift
        AttributeModifier = SpellBookElvenGifts
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate                        = Hero
    End






    Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag
        FireWeaponNugget
            WeaponName = SeraphimHeroEffect
            FireDelay = 0
            OneShot = No
        End
        HeroModeTrigger = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_IgniteStarter
        SpecialPowerTemplate      = SpecialAbilitySerHeroMode
        UpdateModuleStartsAttack  = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_IgniteUpdate
        SpecialPowerTemplate      = SpecialAbilitySerHeroMode
        UnpackingVariation        = 1
        UnpackTime                = 1800
        PackTime                  = 1600
        AwardXPForTriggering      = 0
        HeroAttributeModifier     = SeraphimHeroEffect
        HeroEffectDuration        = 30000
    End

    Behavior = AutoAbilityBehavior ModuleTag_IgniteAutoAbility
	SpecialAbility		  = SpecialAbilitySerHeroMode
	MaxScanRange		  = 50
	Query			  = 5 ALL ENEMIES -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL
    End





    Behavior = SpecialPowerModule ModuleTag_IstariLightPower
        SpecialPowerTemplate        = SpecialAbilityLightingBolt
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = No
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_IstariLightUpdate
        SpecialPowerTemplate    = SpecialAbilityLightingBolt
        SkipContinue            = Yes
        UnpackTime              = 1500
        PreparationTime         = 1
        PersistentPrepTime      = 1000
        PackTime                = 500
        AwardXPForTriggering    = 0
        StartAbilityRange       = 290
        ApproachRequiresLOS     = Yes
        SpecialWeapon           = SerLightningBlastWeapon
        MustFinishAbility       = Yes
        WhichSpecialWeapon      = 3
        BusyForDuration         = 2500
    End

    Behavior = AutoAbilityBehavior ModuleTag_IstariLightAutoAbility
	SpecialAbility		= SpecialAbilityLightingBolt
	ForbiddenStatus 	= INSIDE_GARRISON
	MaxScanRange		= 300
	Query			= 20 ALL ENEMIES -STRUCTURE -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL -FS_BASE_DEFENSE
    End






    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = No
        StartsPaused              = No
    End

    Behavior = PassiveAreaEffectBehavior ModuleTag_SplashOfHealingWater_Ahh
        EffectRadius         = 120
        PingDelay            = 2000
        HealPercentPerSecond = 2%
        AllowFilter          = ANY +INFANTRY +CAVALRY +HERO -MACHINE +MONSTER -IMMOBILE +DOZER
        NonStackable         = Yes
        HealFX               = FX_SpellHealUnitHealBuff
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle          = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate                 = 500
        CanAttackWhileContained             = Yes
        AILuaEventsList                     = LegolasFunctions
    End

    LocomotorSet
        Locomotor                            = HumanLocomotor
        Condition                            = SET_NORMAL
        Speed                                = NORMAL_ELVEN_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor                            = HumanWanderLocomotor
        Condition                            = SET_WANDER
        Speed                                = NORMAL_GOOD_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor                            = HumanPanicLocomotor
        Condition                            = SET_PANIC
        Speed                                = NORMAL_ELVEN_FAST_MEMBER_SPEED
    End

    LocomotorSet
        Locomotor                            = HumanScaredLocomotor
        Condition                            = SET_SCARED
        Speed                                = NORMAL_ELVEN_FAST_MEMBER_SPEED
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult                          = 1.0
        ShockStandingTime                    = 2000
    End

    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes                           = ALL -FADED
        SinkDelay                            = 3000
        SinkRate                             = 0.5
        DestructionDelay                     = 15000

        DeathFlags                           = DEATH_1
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes                           = NONE +FADED
        FadeDelay                            = 0
        FadeTime                             = 5000
        DestructionDelay                     = 5000
        DeathFlags                           = DEATH_2
        FX                                   = INITIAL FX_UnSummonElvenAllies
    End

    Behavior = SquishCollide ModuleTag_06
    End

    Behavior = BezierProjectileBehavior ModuleTag_08
        FirstHeight                           = 25
        SecondHeight                          = 25
        FirstPercentIndent                    = 30%
        SecondPercentIndent                   = 70%
        TumbleRandomly                        = Yes
        CrushStyle                            = Yes
        DieOnImpact                           = Yes
        BounceCount                           = 1
        BounceDistance                        = 41
        BounceFirstHeight                     = 25
        BounceSecondHeight                    = 25
        BounceFirstPercentIndent              = 20%
        BounceSecondPercentIndent             = 80%
        GroundHitFX                           = FX_ThrownRockGroundHit
        GroundBounceFX                        = FX_ThrownRockBounceHit
    End





    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate LightningStormAI
	CommandButtonName = Command_SerThunderBolt
	SpecialPowerAIType = AI_SPELLBOOK_ASSIST_BATTLE_DEBUFF
	SpecialPowerRadius = SARUMAN_LIGHTNING_RADIUS
    End

    Behavior = AISpecialPowerUpdate LightOfTheStarsAI
	CommandButtonName = Command_SpecialAbilitySerIgnite
	SpecialPowerAIType = AI_SPELLBOOK_ALWAYS_FIRE
    End


    Geometry            = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryHeight      = 19.2
    GeometryIsSmall     = Yes
    Shadow              = SHADOW_DECAL
    ShadowSizeX         = 19
    ShadowSizeY         = 19
    ShadowTexture       = ShadowI
End

