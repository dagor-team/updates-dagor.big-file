Object AngmarMorchant

    SelectPortrait = HPMorchant
    ButtonImage    = HIMorchant

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_SupportHero

    Draw = W3DScriptedModelDraw ModuleTag_DRAW

     RandomTexture = kumorquant_gntl.tga  0 chhw_sm_gear_02.tga

    DefaultModelConditionState
       Model            = kumorch_skn
    End

    ModelConditionState = COMING_OUT_OF_FACTORY
       Model            = kumorch_skn
    End

    ModelConditionState = WEAPONSET_HERO_MODE
       Model            = kumorch_skn
       ParticleSysBone  = NONE MorchantBannzirkelFX FollowBone:No
    End

    ModelConditionState = WEAPONLOCK_SECONDARY
       Model            = kumorch_skn
       ParticleSysBone  = NONE EaNewSchleier1 FollowBone:No
       ParticleSysBone  = NONE EaNewSchleier2 FollowBone:No
    End



    IdleAnimationState
        Animation = TNTC
            AnimationName        = EUMthlnd_SKL.EUMthlnd_TNTC
            AnimationMode        = ONCE
            AnimationPriority    = 10
            AnimationBlendTime    = 15
        End
        Animation = TNTA
            AnimationName        = EUMthlnd_SKL.EUMthlnd_TNTA
            AnimationMode        = ONCE
            AnimationPriority    = 10
            AnimationBlendTime    = 5
        End
        Animation = IDLA
            AnimationName        = EUMthlnd_SKL.EUMthlnd_IDLB
            AnimationMode        = ONCE
            AnimationPriority    = 30
            AnimationBlendTime    = 15
        End
        Animation = IDLB
            AnimationName        = EUMthlnd_SKL.EUMthlnd_IDLC
            AnimationMode        = ONCE
            AnimationPriority    = 10
            AnimationBlendTime    = 15
        End
        Animation = IDLC
            AnimationName        = EUMthlnd_SKL.EUMthlnd_IDLD
            AnimationMode        = ONCE
            AnimationPriority    = 30
            AnimationBlendTime    = 15
        End
        Animation = IDLC
            AnimationName        = EUMthlnd_SKL.EUMthlnd_IDLE
            AnimationMode        = ONCE
            AnimationPriority    = 30
            AnimationBlendTime    = 10
        End
        StateName = Bored
    BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Planted"    then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end

    EndScript
    End





    AnimationState                        = PASSENGER
        Animation                        = Grabbed
            AnimationName                = EUMthlnd_SKL.EUMthlnd_FLYA
            AnimationMode                = LOOP
        End
    End

    AnimationState                        = FREEFALL
        StateName                        = STATE_Falling
        Animation                        = Falling
            AnimationName                = EUMthlnd_SKL.EUMthlnd_FLYA
            AnimationMode                = LOOP
            AnimationBlendTime            = 10
        End
    End


    AnimationState                        = DYING SPLATTED
         Animation                        = Splat
            AnimationName                = EUMthlnd_SKL.EUMthlnd_LNDA
            AnimationMode                = ONCE
        End
    End

    AnimationState    = DYING BURNINGDEATH
        Animation
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEA
            AnimationMode = ONCE
            AnimationBlendTime = 10
        End
        Animation
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEB
            AnimationMode = ONCE
            AnimationBlendTime = 10
        End
        Animation
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEC
            AnimationMode = ONCE
            AnimationBlendTime = 10
        End
    End








    AnimationState = STUNNED_FLAILING
        Animation
            AnimationName = EUMthlnd_SKL.EUMthlnd_FLYA
            AnimationMode = LOOP
        End
   End



     AnimationState = DYING AFLAME
        Animation = Flaming_Death
            AnimationName = EUMthlnd_SKL.EUMthlnd_MFDA
            AnimationMode = ONCE
        End
    End

    AnimationState = DYING EMOTION_ALERT
        Animation = Dying_1
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEA
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
        Animation = Dying_2
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEB
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
        Animation = Dying_3
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEC
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
    End

    AnimationState = DYING
        Animation = Dying_1
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEA
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
        Animation = Dying_2
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEB
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
        Animation = Dying_3
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEC
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
    End

        AnimationState                        = BURNINGDEATH
            Animation
                AnimationName                = EUMthlnd_SKL.EUMthlnd_MFDA
                AnimationMode                = LOOP
                Distance                    = 110
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = EUMthlnd_SKL.EUMthlnd_IDLA
                AnimationMode                = LOOP
            End
        End


    AnimationState = STUNNED_STANDING_UP
        Animation
            AnimationName = EUMthlnd_SKL.EUMthlnd_GTPA
            AnimationMode = ONCE
        End
    End

    AnimationState                        = STUNNED
        Animation
            AnimationName                = EUMthlnd_SKL.EUMthlnd_LNDA
            AnimationMode                = ONCE
        End
    End


    AnimationState  = COMING_OUT_OF_FACTORY
        Animation = Being_Built
            AnimationName        = EUMthlnd_SKL.EUMthlnd_RUNA
            AnimationMode        = LOOP
            AnimationBlendTime    = 0
        End
    End


    AnimationState = MOVING FIRING_OR_PREATTACK_A
        Animation = TrotAndFire
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUNC
            AnimationMode = LOOP
        End
        Animation = TrotAndFire2
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUND
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART

    End

    AnimationState = MOVING FIRING_OR_PREATTACK_B
        Animation = TrotAndFire
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUNC
            AnimationMode = LOOP
        End
        Animation = TrotAndFire2
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUND
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART

    End


    AnimationState = MOVING BACKING_UP
        Animation = Moving_Back
            AnimationName = EUMthlnd_SKL.EUMthlnd_BAKA
            AnimationMode = LOOP
        End
    End

    AnimationState = MOVING EMOTION_AFRAID
        Animation = Moving_1
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUNE
            AnimationMode = LOOP
        End
        Flags = MAINTAIN_FRAME_ACROSS_STATES
        ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = MOVING EMOTION_ALERT
        Animation = TrotAndFire
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUNC
            AnimationMode = LOOP
        End
        Animation = TrotAndFire2
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUND
            AnimationMode = LOOP
        End
        Flags = MAINTAIN_FRAME_ACROSS_STATES
        ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = MOVING ATTACKING
        Animation = TrotAndFire
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUNC
            AnimationMode = LOOP
        End
        Animation = TrotAndFire2
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUND
            AnimationMode = LOOP
        End
        Flags = MAINTAIN_FRAME_ACROSS_STATES
        ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = MOVING ENGAGED
        Animation = TrotAndFire
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUNC
            AnimationMode = LOOP
        End
        Animation = TrotAndFire2
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUND
            AnimationMode = LOOP
        End
        Flags = MAINTAIN_FRAME_ACROSS_STATES
        ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = MOVING
        Animation = TrotAndFire
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUNA
            AnimationMode = LOOP
        End




        ParticleSysBone = None InfantryDustTrails
    End




    AnimationState =  FIRING_OR_PREATTACK_A
        Animation = KickSinceWeAreMelee
            AnimationName        = EUMthlnd_SKL.EUMthlnd_ATKA
            AnimationMode        = ONCE
            UseWeaponTiming        = Yes
        End
        Animation = KickSinceWeAreMelee
            AnimationName        = EUMthlnd_SKL.EUMthlnd_ATKB
            AnimationMode        = ONCE
            UseWeaponTiming        = Yes
        End
        Animation = KickSinceWeAreMelee
            AnimationName        = EUMthlnd_SKL.EUMthlnd_ATKC
            AnimationMode        = ONCE
            UseWeaponTiming        = Yes
        End
    End

    AnimationState =  FIRING_OR_PREATTACK_A WEAPONLOCK_SECONDARY
        Animation = KickSinceWeAreMelee
            AnimationName        = EUMthlnd_SKL.EUMthlnd_ATKA
            AnimationMode        = ONCE
            UseWeaponTiming        = Yes
        End
        Animation = KickSinceWeAreMelee
            AnimationName        = EUMthlnd_SKL.EUMthlnd_ATKB
            AnimationMode        = ONCE
            UseWeaponTiming        = Yes
        End
        Animation = KickSinceWeAreMelee
            AnimationName        = EUMthlnd_SKL.EUMthlnd_ATKC
            AnimationMode        = ONCE
            UseWeaponTiming        = Yes
        End
    End

    AnimationState =  FIRING_OR_PREATTACK_B
        Animation = KickSinceWeAreMelee
            AnimationName        = EUMthlnd_SKL.EUMthlnd_ATKA
            AnimationMode        = ONCE
            UseWeaponTiming        = Yes
        End
        Animation = KickSinceWeAreMelee
            AnimationName        = EUMthlnd_SKL.EUMthlnd_ATKB
            AnimationMode        = ONCE
            UseWeaponTiming        = Yes
        End
        Animation = KickSinceWeAreMelee
            AnimationName        = EUMthlnd_SKL.EUMthlnd_ATKC
            AnimationMode        = ONCE
            UseWeaponTiming        = Yes
        End
    End




    AnimationState                            = WAR_CHANT
        Animation                            = Chant
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_CHRA
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
        Animation                            = Chant
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_CHRB
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
        Animation                            = Chant
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_CHRC
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
        Flags                                = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
    End


    AnimationState                            = EMOTION_CELEBRATING
        Animation                            = CHRA
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_CHRA
            AnimationMode                    = ONCE
            AnimationBlendTime                = 10
        End
        Animation                            = CHRB
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_CHRB
            AnimationMode                    = ONCE
            AnimationBlendTime                = 10
        End
        Animation                            = TNTA
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_CHRC
            AnimationMode                    = ONCE
            AnimationBlendTime                = 10
        End
        Flags                = RESTART_ANIM_WHEN_COMPLETE
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Planted"    then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
        EndScript
    End

    AnimationState                            = EMOTION_TAUNTING
        Animation                            = TNTC
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_TNTC
            AnimationMode                    = ONCE
        End
        Animation                            = TNTA
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_TNTA
            AnimationMode                    = ONCE
        End
        Animation                            = TNTB
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_TNTB
            AnimationMode                    = ONCE
        End
        Flags                                = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Planted"    then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
        EndScript
    End

    AnimationState                            = EMOTION_POINTING
        Animation                            = Pointing1
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_PNTA
            AnimationMode                    = ONCE
        End
        Animation                            = Pointing1
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_TNTC
            AnimationMode                    = ONCE
        End
        Flags                                = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Planted"    then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
        EndScript
    End

    AnimationState                            = EMOTION_ALERT
        Animation                            = ALERT
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_IDLA
            AnimationMode                    = LOOP
        End
        Flags                                = RESTART_ANIM_WHEN_COMPLETE MAINTAIN_FRAME_ACROSS_STATES2
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Planted"    then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
        EndScript
    End

    AnimationState                            = ATTACKING
        Animation                            = ALERT
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_IDLA
            AnimationMode                    = LOOP
        End
        Flags                                = RESTART_ANIM_WHEN_COMPLETE MAINTAIN_FRAME_ACROSS_STATES2
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Planted"    then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
        EndScript
    End

    AnimationState                            = ENGAGED
        Animation                            = ALERT
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_IDLA
            AnimationMode                    = LOOP
        End
        Flags                                = RESTART_ANIM_WHEN_COMPLETE MAINTAIN_FRAME_ACROSS_STATES2
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Planted"    then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
        EndScript
    End


    AnimationState                        = RAISING_FLAG
        Animation                        = CHRA
            AnimationName                = EUMthlnd_SKL.EUMthlnd_CHRA
            AnimationMode                = ONCE
            AnimationSpeedFactorRange    = 0.9 1.1
        End
        Animation                        = CHRB
            AnimationName                = EUMthlnd_SKL.EUMthlnd_CHRB
            AnimationMode                = ONCE
            AnimationSpeedFactorRange    = 0.9 1.1
        End
        Flags                            = RESTART_ANIM_WHEN_COMPLETE
    End


    AnimationState           = SPECIAL_WEAPON_ONE
        Animation            = FEAR
            AnimationName    = EUMthlnd_SKL.EUMthlnd_CINA
            AnimationMode    = ONCE
        End
    End

    AnimationState           = USER_2
        Animation            = FEAR
            AnimationName    = EUMthlnd_SKL.EUMthlnd_CINA
            AnimationMode    = ONCE
        End
    End

        AnimationState                = PACKING_TYPE_1
            StateName                = Dominate
            Animation
                AnimationName        = EUMthlnd_SKL.EUMthlnd_TNTC
                AnimationMode        = ONCE
                AnimationBlendTime  = 5
            End
            FXEvent    = Frame:6    Name: FX_SarumanDominateAtSelf
        End

    AnimationState = SELECTED
        Animation                = Selected_Loop
            AnimationName        = EUMthlnd_SKL.EUMthlnd_ATNB
            AnimationMode        = LOOP
            AnimationBlendTime    = 10
        End
        StateName                = Selected
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Planted"    then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
            if Prev == "Bored" then CurDrawableSetTransitionAnimState("TRANS_BS_Normal") end
        EndScript
        Flags = RESTART_ANIM_WHEN_COMPLETE
    End




    TransitionState = Trans_Down_To_Up
        Animation = Transition
            AnimationName = EUMthlnd_SKL.EUMthlnd_PLTC
            AnimationMode = ONCE
        End
    End

    TransitionState = Trans_Up_To_Down
        Animation = Transition
            AnimationName = EUMthlnd_SKL.EUMthlnd_PLTA
            AnimationMode = ONCE
        End
    End

    TransitionState = TRANS_BS_Normal
        Animation = Transition
            AnimationName                = EUMthlnd_SKL.EUMthlnd_ATNA
            AnimationMode                = ONCE
            AnimationBlendTime            = 10
            AnimationMustCompleteBlend    = Yes
        End
    End

 End



    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side                = Angmar
    EditorSorting       = UNIT
    ThreatLevel         = GLORFINDEL_THREAT_LEVEL
    ThingClass          = CHARACTER_UNIT
    TransportSlotCount    = TRANSPORTSLOTCOUNT_HERO
    BuildCost           = MEDIUM_HERO_COST
    BuildTime           = MEDIUM_HERO_BUILDTIME
    BountyValue         = ELVEN_GLORFINDEL_BOUNTY_VALUE
    DisplayMeleeDamage  = MEDIUM_HERO_DAMAGE
    MaxSimultaneousOfType = 1
    Scale 				= 1.1


    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY      AngmarMorchantSpeer
        Weapon            = SECONDARY    AngmarMorchantSpeer
        AutoChooseSources = SECONDARY NONE
    End

    ArmorSet
        Conditions        = None
        Armor             = MediumHeroArmor
        DamageFX          = NormalDamageFX
    End



    VisionRange           = 300
    ShroudClearingRange   = 400

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    DisplayName               = OBJECT:AngmarMorchant
    RecruitText               = CONTROLBAR:AngmarMorchantRecruit
    ReviveText                = CONTROLBAR:AngmarMorchantRevive
    Hotkey                    = CONTROLBAR:AngmarMorchantHotkey

    CrusherLevel = 0
    CrushableLevel = 2

    CommandSet        = AngmarMorchantCommandSet
    CommandPoints     = 0



    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_GlorfindelBody

    AutoResolveArmor
        Armor = AutoResolve_GlorfindelArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_GlorfindelWeapon
    End






    VoiceAttack                              = MorchantVoiceAttack
    VoiceAttackAir                           = MorchantVoiceAttack
    VoiceAttackCharge                        = MorchantVoiceAttack
    VoiceAttackMachine                       = MorchantVoiceAttack
    VoiceAttackStructure                     = MorchantVoiceAttack
    VoiceFear                                = MorchantVoiceFear
    VoiceCreated                             = MorchantVoiceRecruit
    VoiceFullyCreated                        = MorchantVoiceRecruit
    VoiceGuard                               = MorchantVoiceMove
    VoiceMove                                = MorchantVoiceMove
    VoiceMoveToCamp                          = MorchantVoiceMove
    VoiceMoveWhileAttacking                  = MorchantVoiceMove
    VoicePriority                            = 90
    VoiceRetreatToCastle                     = MorchantVoiceMove
    VoiceSelect                              = MorchantVoiceSelect
    VoiceSelectBattle                        = MorchantVoiceSelectinBattle


    UnitSpecificSounds
        VoiceEnterUnitElvenTransportShip     = MorchantVoiceMove
        VoiceGarrison                        = MorchantVoiceMove
        VoiceInitiateCaptureBuilding         = MorchantVoiceMove
    End



    CrowdResponseKey = ElfHero

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
    EvaEventDieOwner        = GlorfindelDie

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Elf Elf_Male Unit Infantry Hero

    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:BodyFallOrc            Animation:EUMthlnd_SKL.EUMthlnd_DIEC    Frames:56
        AnimationSound = Sound:BodyFallOrc            Animation:EUMthlnd_SKL.EUMthlnd_DTHA    Frames:23
        AnimationSound = Sound:BodyFallOrc            Animation:EUMthlnd_SKL.EUMthlnd_DTHB    Frames:34
        AnimationSound = Sound:BodyFallOrc            Animation:EUMthlnd_SKL.EUMthlnd_LNDD    Frames:2
        AnimationSound = Sound:BodyFallOrc            Animation:EUMTHLND_SKL.EUMTHLND_LNDA    Frames:6
        AnimationSound = Sound:BodyFallGeneric1       Animation:EUMTHLND_SKL.EUMTHLND_DIEA    Frames:50
        AnimationSound = Sound:BodyFallGeneric1       Animation:EUMTHLND_SKL.EUMTHLND_DIEB    Frames:75
        AnimationSound = Sound:BodyFallGeneric1       Animation:EUMTHLND_SKL.EUMTHLND_DIEC    Frames:53
    End


    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance                = 300
        TauntAndPointUpdateDelay            = 10000
        AddEmotion            =    Doom_Base



        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
         AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base


        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End



    RadarPriority = UNIT
    KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_EACH_OTHER SCORE ARMY_SUMMARY HEAVY_MELEE_HITTER SCARY
    PathfindDiameter = 40.0
    CamouflageDetectionMultiplier = 2.0

    Body = RespawnBody ModuleTag_RespawnBody
        MaxHealth                    = MEDIUM_HERO_HEALTH
        PermanentlyKilledByFilter    = NONE
        DodgePercent                 = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                       = DYING
        DeathAnimationTime              = 6500
        RespawnAnim                     = LEVELED
        RespawnAnimationTime            = 2000
        AutoRespawnAtObjectFilter       = NONE +CASTLE_KEEP
        ButtonImage                     = HIMorchant
		
        RespawnRules =    AutoSpawn:No           Cost:MEDIUM_HERO_COST       Time:MEDIUM_HERO_RESPAWNTIME        Health:100%
    End

    Behavior = AutoHealBehavior ModuleTag_GlorfindelHealing
        StartsActive            = Yes
        HealingAmount            = HERO_HEAL_AMOUNT
        HealingDelay            = 1000
        StartHealingDelay        = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat    = Yes
    End


    #include "..\..\..\includes\DefaultInvisibilityUpdate.inc"

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    #include "..\..\..\includes\CaptureBuilding.inc"







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_MearasEnabler
        SpecialPowerTemplate            = SpecialAbilityToggleberegondWeapon
        TriggeredBy                     = Upgrade_Level_1
        ObeyRechageOnTrigger            = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_MearasStarter
         SpecialPowerTemplate           = SpecialAbilityToggleberegondWeapon
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = Yes
         AvailableAtStart               = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Mearas
         SpecialPowerTemplate           = SpecialAbilityToggleberegondWeapon
         MountedTemplate                = AngmarMorchantHorse
         SynchronizeTimerOnSpecialPower = SpecialAbilityWildShelobPoisonedStinger SpecialAbilityAragornBladeMaster SpecialAbilityKingofDunharg SpecialAbilityAngmarGunstlingDuellant SpecialAbilityArkaneGeheimnisse SpecialAbilityIsengardSharkuManEaterGrab
         UnpackTime                     = OBJECT_TOGGLE_TIME
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_WolfEnabler
        SpecialPowerTemplate            = SpecialAbilityToggleMountedWitchkingSauronsDiener
        TriggeredBy                     = Upgrade_Level_1
        ObeyRechageOnTrigger            = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_WolfStarter
         SpecialPowerTemplate           = SpecialAbilityToggleMountedWitchkingSauronsDiener
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = Yes
         AvailableAtStart               = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Wolf
         SpecialPowerTemplate           = SpecialAbilityToggleMountedWitchkingSauronsDiener
         MountedTemplate                = AngmarMorchantWolf
         SynchronizeTimerOnSpecialPower = SpecialAbilityWildShelobPoisonedStinger SpecialAbilityAragornBladeMaster SpecialAbilityKingofDunharg SpecialAbilityAngmarGunstlingDuellant SpecialAbilityArkaneGeheimnisse SpecialAbilityIsengardSharkuManEaterGrab
         UnpackTime                     = OBJECT_TOGGLE_TIME
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_WargEnabler
        SpecialPowerTemplate            = SpecialAbilityToggleSauronGestaltenAnnatar
        TriggeredBy                     = Upgrade_Level_1
        ObeyRechageOnTrigger            = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_WargStarter
         SpecialPowerTemplate           = SpecialAbilityToggleSauronGestaltenAnnatar
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = Yes
         AvailableAtStart               = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Warg
         SpecialPowerTemplate           = SpecialAbilityToggleSauronGestaltenAnnatar
         MountedTemplate                = AngmarMorchantWarg
         SynchronizeTimerOnSpecialPower = SpecialAbilityWildShelobPoisonedStinger SpecialAbilityAragornBladeMaster SpecialAbilityKingofDunharg SpecialAbilityAngmarGunstlingDuellant SpecialAbilityArkaneGeheimnisse SpecialAbilityIsengardSharkuManEaterGrab
         UnpackTime                     = OBJECT_TOGGLE_TIME
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SpiderEnabler
        SpecialPowerTemplate            = SpecialAbilityToggleSauronGestaltenWerwolf
        TriggeredBy                     = Upgrade_Level_1
        ObeyRechageOnTrigger            = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_SpiderStarter
         SpecialPowerTemplate           = SpecialAbilityToggleSauronGestaltenWerwolf
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = Yes
         AvailableAtStart               = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Spider
         SpecialPowerTemplate           = SpecialAbilityToggleSauronGestaltenWerwolf
         MountedTemplate                = AngmarMorchantSpider
         SynchronizeTimerOnSpecialPower = SpecialAbilityWildShelobPoisonedStinger SpecialAbilityAragornBladeMaster SpecialAbilityKingofDunharg SpecialAbilityAngmarGunstlingDuellant SpecialAbilityArkaneGeheimnisse SpecialAbilityIsengardSharkuManEaterGrab
         UnpackTime                     = OBJECT_TOGGLE_TIME
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End







    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate
        SpecialPowerTemplate     = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack = No
        StartsPaused             = No
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura
        StartsActive     = Yes
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff1
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura2
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_2
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff2
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura3
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_3
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff3
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura4
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_4
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff4
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura5
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_5
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff5
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura6
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_6
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff6
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura7
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_7
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff7
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura8
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_8
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff8
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura9
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_9
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff9
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura10
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_10
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff10
        ObjectFilter     = ANY +HERO -INFANTRY -CAVALRY -STRUCTURE -BASE_FOUNDATION -HORDE
    End


    Behavior = SpecialPowerModule ModuleTag_EyeStarter
        SpecialPowerTemplate        = SpecialAbilityEyeOfSauronAntiCategory
        UpdateModuleStartsAttack    = No
        AntiCategory                = LEADERSHIP BUFF STUN STRUCTURE INNATE_ARMOR
        AttributeModifierAffects    = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION  -HERO -HORDE
        AttributeModifier           = EyeOfSauronAntiCategory
        AttributeModifierRange      = 150.0
        StartsPaused                = No
    End







    Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag
        FireWeaponNugget
            WeaponName = MorchantBannzirkelEffect
            FireDelay = 0
            OneShot = No
        End
        HeroModeTrigger = Yes
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BannzirkelEnabler
        SpecialPowerTemplate       = SpecialAbilityKingofDunharg
        TriggeredBy                = Upgrade_Level_5
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_BannzirkelStarter
        SpecialPowerTemplate       = SpecialAbilityKingofDunharg
        UpdateModuleStartsAttack   = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_BannzirkelUpdate
        SpecialPowerTemplate       = SpecialAbilityKingofDunharg
        UnpackingVariation         = 1
        UnpackTime                 = 1800
        PackTime                   = 1600
        AwardXPForTriggering       = 0
        HeroAttributeModifier      = MorchantBannzirkelDebuff
        HeroEffectDuration         = 30000
    End








    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ArkanEnabler
        SpecialPowerTemplate       = SpecialAbilityArkaneGeheimnisse
        TriggeredBy                = Upgrade_Level_10
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLSpecialPowerArkan
        SpecialPowerTemplate       = SpecialAbilityArkaneGeheimnisse
        OCL                        = OCL_MorchantSchwarzeMagie

        CreateLocation             = CREATE_AT_LOCATION
        StartsPaused               = Yes
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SchattenwanderungEnabler
        SpecialPowerTemplate    = SpecialAbilityAngmarGunstlingDuellant
        TriggeredBy             = Upgrade_Level_7
        ObeyRechageOnTrigger    = Yes
    End

    Behavior = WeaponModeSpecialPowerUpdate ModuleTag_SchattenwanderungPowerUpdate
        SpecialPowerTemplate    = SpecialAbilityAngmarGunstlingDuellant
        Duration                = 30000
        AttributeModifier       = MorchantBonus
        LockWeaponSlot          = SECONDARY
        StartsPaused            = Yes
    End

    Behavior = MonitorConditionUpdate ModuleTag_CommandSetSwapperWanderung
        ModelConditionFlags      = WEAPONLOCK_SECONDARY
        ModelConditionCommandSet = AngmarMorchantCommandSet_SchattenModule
    End

    Behavior = SpecialPowerModule ModuleTag_TeleportStarter
        SpecialPowerTemplate     = SpecialAbilityMorchantHeroBlink
        UpdateModuleStartsAttack = Yes
        TriggerFX                = FX_BlinkMorchant
        StartsPaused             = No
    End

    Behavior = TeleportSpecialAbilityUpdate ModuleTag_TeleportUpdate
        SpecialPowerTemplate     = SpecialAbilityMorchantHeroBlink
        UnpackingVariation       = 1
        UnpackTime               = 100
        PackTime                 = 100
        ApproachRequiresLOS      = No
        BusyForDuration          = 100
        DestinationWeaponName    = CreateaHeroBlinkDestination.
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_PoisonedStingerEnabler
        SpecialPowerTemplate     = SpecialAbilityWildShelobPoisonedStinger
        TriggeredBy              = Upgrade_Level_6
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_PoisonedStingerStarter
        SpecialPowerTemplate     = SpecialAbilityWildShelobPoisonedStinger
        UpdateModuleStartsAttack = Yes
        StartsPaused             = Yes
        InitiateSound            = ShelobVoxPoisonStinger
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_PoisonedStingerUpdate
        SpecialPowerTemplate     = SpecialAbilityWildShelobPoisonedStinger
        SkipContinue             = Yes
        UnpackTime               = 250
        PreparationTime          = 500
        MustFinishAbility        = Yes
        AwardXPForTriggering     = 0
        StartAbilityRange        = 15.0
        SpecialWeapon            = WildShelobPoisonedStinger
        WhichSpecialWeapon       = 1
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ManEaterEnabler
        SpecialPowerTemplate        = SpecialAbilityIsengardSharkuManEaterGrab
        TriggeredBy                 = Upgrade_Level_7
        ObeyRechageOnTrigger        = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_SpecialPowerModuleGrabStarter
        SpecialPowerTemplate        = SpecialAbilityIsengardSharkuManEaterGrab
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = Yes
        InitiateSound               = SharkuManeaterStartMS
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WeaponFireSpecialAbilityUpdateGrab
        SpecialPowerTemplate        = SpecialAbilityIsengardSharkuManEaterGrab
        SkipContinue                = Yes
        UnpackTime                  = 933

        StartAbilityRange           = 8.0

        SpecialWeapon               = IsengardSharkuManEaterGrab
        ChainedButton               = Command_SpecialAbilityIsengardSharkuManEaterFlingPassenger
        CustomAnimAndDuration       = AnimState:EATING AnimTime:3300

        TriggerAttributeModifier    = SharkuManEater
        AttributeModifierDuration   = 20000
        TriggerSound                = SharkuManEaterEatingMS
        BusyForDuration             = 2000
    End

    Behavior = PlayerHealSpecialPower ModuleTag_SpecialPowerModuleFlingPassengerStarter
        SpecialPowerTemplate        = SpecialAbilityIsengardSharkuManEaterDrop
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = No
        HealAmount                  = 1.0
        HealAsPercent               = Yes
        HealAffects                 = HERO
        HealRadius                  = 0.0
        HealFX                      = FX_SpellHealUnitHealBuff
    End

    Behavior = FlingPassengerSpecialAbilityUpdate ModuleTag_FlingPassengerSpecialAbilityUpdate
        SpecialPowerTemplate         = SpecialAbilityIsengardSharkuManEaterDrop
        UnpackTime                   = 1250
        FlingPassengerVelocity       = X:0 Y:0 Z:0
        FlingPassengerLandingWarhead = IsengardSharkuManEaterWarhead
    End



    Behavior = MonitorConditionUpdate ModuleTag_CommandSetSwapper1
        WeaponSetFlags            = WEAPONSET_TOGGLE_1
        WeaponToggleCommandSet    = AngmarMorchantCommandSet_Mount
    End

    Behavior = MonitorConditionUpdate ModuleTag_CommandSetSwapper2
        WeaponSetFlags            = WEAPONSET_TOGGLE_2
        WeaponToggleCommandSet    = AngmarMorchantCommandSet
    End



    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        CanAttackWhileContained    = Yes
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_ELVEN_FAST_MEMBER_SPEED
    End



    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 2000
    End


    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes           = ALL
        SinkDelay            = 5000
        SinkRate             = 10.0
        DestructionDelay     = 1800
        Sound                = INITIAL MorchantVoiceDie
    End



    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End





    Behavior = PassiveAreaEffectBehavior ModuleTag_SplashOfHealingWater_Ahh
        UpgradeRequired      = Upgrade_TestBuilding_2
        EffectRadius         = 150
        PingDelay            = 2000
        HealPercentPerSecond = 3%
        AllowFilter          = ANY +INFANTRY +CAVALRY +HERO -MACHINE +MONSTER -IMMOBILE +DOZER
        NonStackable         = Yes
        HealFX               = FX_SpellHealUnitBuffAngmarCaliz
    End

    Behavior = FireWeaponUpdate ModuleTag_WeaponFiring
        FireWeaponNugget
            WeaponName = MorchantMachtHKModifierWeapon
            Offset = X:0 Y:0 Z:0
            FireDelay = 0
            OneShot = No
        End
    End






    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName  = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName  = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName  = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate ElvenLorienWarriorHordeCaptureBuildingAI
        CommandButtonName  = Command_CaptureBuilding
        SpecialPowerAIType = AI_SPECIAL_POWER_CAPTURE_BUILDING
    End

    Behavior = AISpecialPowerUpdate MorchantBannzirkel_AI
        CommandButtonName  = Command_SpecialAbilityMorchantBannzirkel
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate ArkaneGeheimnisse_AI
        CommandButtonName  = Command_SpecialAbilityArkaneGeheimnisse
        SpecialPowerAIType = AI_SPECIAL_POWER_TARGETAOE_SUMMON
    End



    Geometry            = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryHeight        = 25
    GeometryIsSmall        = Yes
    Shadow                = SHADOW_DECAL
    ShadowSizeX            = 20
    ShadowSizeY            = 20
    ShadowTexture        = ShadowI
End


Object AngmarMorchantHorse

    SelectPortrait = HPMorchant
    ButtonImage = HIMorchant

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_Glorfindel

     EquivalentTo = AngmarMorchant

    Draw = W3DScriptedModelDraw ModuleTag_DRAW

     RandomTexture = kumorquant_gntl.tga  0 chhw_sm_gear_02.tga

        DefaultModelConditionState
            Model                = kumorch_hos
        End

        ModelConditionState      = SWAPPING_TO_WEAPONSET_1
            Model                = kumorch_hos
        End



        ModelConditionState        = WEAPONSET_PLAYER_UPGRADE USER_2 SWAPPING_TO_WEAPONSET_2
            Model                = RURhrmArch_SKN
            WeaponLaunchBone    = SECONDARY FIREAROWTIP
            ParticleSysBone        = FireArowTip arrowFire FollowBone:Yes
        End
        ModelConditionState        = WEAPONSET_PLAYER_UPGRADE USER_2 WEAPONSET_TOGGLE_1
            Model                = RURhrmArch_SKN
            WeaponLaunchBone    = SECONDARY FIREAROWTIP
            ParticleSysBone        = FireArowTip arrowFire FollowBone:Yes
        End


        ModelConditionState        = SWAPPING_TO_WEAPONSET_2
            Model                = RURhrmArch_SKN
            WeaponLaunchBone    = SECONDARY FIREAROWTIP
        End
        ModelConditionState        = WEAPONSET_TOGGLE_1
            Model                = RURhrmArch_SKN
            WeaponLaunchBone    = SECONDARY FIREAROWTIP
        End






        AnimationState                =    PASSENGER WEAPONSET_TOGGLE_1
            Animation                =    grabbed
                AnimationName        =    RURhrmArch_SKL.RURhrmArch_GBDA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End


        AnimationState                =    FREEFALL WEAPONSET_TOGGLE_1
            Animation                =    free fall
                AnimationName        =    RURhrmArch_SKL.RURhrmArch_FLYA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState                =    STUNNED_FLAILING WEAPONSET_TOGGLE_1
            Animation                =    JustDie
                AnimationName        =    RURhrmArch_SKL.RURhrmArch_FLYC
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState                = DYING BURNINGDEATH
            Animation
                AnimationName        = RURohrm_SKL.RURohrm_DIEA
                AnimationMode        = ONCE
                AnimationBlendTime    = 10
            End
        End


        AnimationState                =    DYING SPLATTED WEAPONSET_TOGGLE_1
            Animation                =    splatted
                AnimationName        =    RURhrmArch_SKL.RURhrmArch_LNDA
                AnimationMode        =    ONCE
                AnimationBlendTime  =   2
            End
            FXEvent    = Frame:2 Name:FX_SplatDust
        End

        AnimationState                =    DYING WEAPONSET_TOGGLE_1
            Animation                =    JustDie
                AnimationName        =    RURhrmArch_SKL.RURhrmArch_DIEA
                AnimationMode        =    ONCE
            End
        End

        AnimationState                =    STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
            Animation                =    StandUp
                AnimationName        =    RURhrmArch_SKL.RURhrmArch_GTPA
                AnimationMode        =    ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState                =    STUNNED WEAPONSET_TOGGLE_1
            Animation                =    Land
                AnimationName        =    RURhrmArch_SKL.RURhrmArch_LNDA
                AnimationMode        =    ONCE
            End
        End



        AnimationState                =    FIRING_OR_PREATTACK_B MOVING TURRET_ANGLE_90 WEAPONSET_TOGGLE_1
            Animation                =    MoveAndFireBow
                AnimationName        =    RURhrmArch_SKL.RURhrmArch_ATKF
                AnimationMode        =    ONCE
                AnimationBlendTime        =    15
            End
            Flags                    = MAINTAIN_FRAME_ACROSS_STATES
            FrameForPristineBonePositions = 20
        End
        AnimationState                =    FIRING_OR_PREATTACK_B MOVING TURRET_ANGLE_180 WEAPONSET_TOGGLE_1
            Animation                =    MoveAndFireBow
                AnimationName        =    RURhrmArch_SKL.RURhrmArch_ATKH
                AnimationMode        =    ONCE
                AnimationBlendTime        =    15
            End
            Flags                    = MAINTAIN_FRAME_ACROSS_STATES
            FrameForPristineBonePositions = 20
        End
        AnimationState                =    FIRING_OR_PREATTACK_B MOVING TURRET_ANGLE_270 WEAPONSET_TOGGLE_1
            Animation                =    MoveAndFireBow
                AnimationName        =    RURhrmArch_SKL.RURhrmArch_ATKJ
                AnimationMode        =    ONCE
                AnimationBlendTime        =    15
            End
            Flags                    = MAINTAIN_FRAME_ACROSS_STATES
            FrameForPristineBonePositions = 20
        End
        AnimationState                =    FIRING_OR_PREATTACK_B MOVING WEAPONSET_TOGGLE_1
            Animation                =    MoveAndFireBow
                AnimationName        =    RURhrmArch_SKL.RURhrmArch_ATKD
                AnimationMode        =    ONCE
                AnimationBlendTime        =    15
            End
            Flags                    = MAINTAIN_FRAME_ACROSS_STATES
            FrameForPristineBonePositions = 20
        End




        AnimationState                    = MOVING BACKING_UP WEAPONSET_TOGGLE_1
            Animation                    = BACKING UP
                AnimationName            = RURhrmArch_SKL.RURhrmArch_BAKA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    =    MOVING TURN_LEFT_HIGH_SPEED WEAPONSET_TOGGLE_1
            Animation                    =    TurnLeft
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_TNL1
                AnimationMode            =    LOOP
                AnimationBlendTime        =    20
            End
        End

        AnimationState                    =    MOVING TURN_RIGHT_HIGH_SPEED WEAPONSET_TOGGLE_1
            Animation                    =    TurnRight
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_TNR1
                AnimationMode            =    LOOP
                AnimationBlendTime        =    20
            End
        End

        AnimationState                    = MOVING WANDER WEAPONSET_TOGGLE_1
            Animation                    = WLKA
                AnimationName            = RURhrmArch_SKL.RURhrmArch_WLKA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    =    MOVING TURN_LEFT WEAPONSET_TOGGLE_1
            Animation                    =    TurnLeft
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_TRNL
                AnimationMode            =    LOOP
            End
        End

        AnimationState                    =    MOVING TURN_RIGHT WEAPONSET_TOGGLE_1
            Animation                    =    TurnRight
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_TRNR
                AnimationMode            =    LOOP
            End
        End

        AnimationState                    = MOVING ENGAGED WEAPONSET_TOGGLE_1
            Animation                    = Moving_Engaged
                AnimationName            = RURhrmArch_SKL.RURhrmArch_RUNC
                AnimationMode            = LOOP
            End
            Flags                        = RANDOMSTART
        End









        AnimationState                    =    MOVING ACCELERATE WEAPONSET_TOGGLE_1
            Animation                    =    RunA
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_ACCL
                AnimationMode            =    LOOP
            End
            Flags                        =    RANDOMSTART
        End

        AnimationState                    =    DECELERATE WEAPONSET_TOGGLE_1
            Animation                    =    RunA
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_DECL
                AnimationMode            =    LOOP
                AnimationSpeedFactorRange = 0.55 0.55
            End
            Flags                        =    RANDOMSTART
        End

        AnimationState                    =    MOVING WEAPONSET_TOGGLE_1
            Animation                    =    RunA
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_RUNA
                AnimationMode            =    LOOP
                Distance                =   40
            End
            Flags                        =    RANDOMSTART
        End



        AnimationState                    =    FIRING_OR_PREATTACK_B WEAPONSET_PLAYER_UPGRADE USER_2 TURRET_ANGLE_90 WEAPONSET_TOGGLE_1
            Animation                    =    AttackA1
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_ATKL
                AnimationMode            =    ONCE
                AnimationBlendTime        =    15
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES
            FrameForPristineBonePositions = 20
        End
        AnimationState                    =    FIRING_OR_PREATTACK_B WEAPONSET_PLAYER_UPGRADE USER_2 TURRET_ANGLE_180 WEAPONSET_TOGGLE_1
            Animation                    =    AttackA1
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_ATKN
                AnimationMode            =    ONCE
                AnimationBlendTime        =    15
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES
            FrameForPristineBonePositions = 20
        End
        AnimationState                    =    FIRING_OR_PREATTACK_B WEAPONSET_PLAYER_UPGRADE USER_2 TURRET_ANGLE_270 WEAPONSET_TOGGLE_1
            Animation                    =    AttackA1
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_ATKP
                AnimationMode            =    ONCE
                AnimationBlendTime        =    15
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES
            FrameForPristineBonePositions = 20
        End
        AnimationState                    =    FIRING_OR_PREATTACK_B WEAPONSET_PLAYER_UPGRADE USER_2 WEAPONSET_TOGGLE_1
            Animation                    =    AttackA1
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_ATKB
                AnimationMode            =    ONCE
                AnimationBlendTime        =    15
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES
            FrameForPristineBonePositions = 20
        End




        AnimationState                    =    FIRING_OR_PREATTACK_B TURRET_ANGLE_90 WEAPONSET_TOGGLE_1
            Animation                    =    AttackA1
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_ATKL
                AnimationMode            =    ONCE
                AnimationBlendTime        =    15
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES
            FrameForPristineBonePositions = 20
        End
        AnimationState                    =    FIRING_OR_PREATTACK_B TURRET_ANGLE_180 WEAPONSET_TOGGLE_1
            Animation                    =    AttackA1
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_ATKN
                AnimationMode            =    ONCE
                AnimationBlendTime        =    15
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES
            FrameForPristineBonePositions = 20
        End
        AnimationState                    =    FIRING_OR_PREATTACK_B TURRET_ANGLE_270 WEAPONSET_TOGGLE_1
            Animation                    =    AttackA1
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_ATKP
                AnimationMode            =    ONCE
                AnimationBlendTime        =    15
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES
            FrameForPristineBonePositions = 20
        End
        AnimationState                    =    FIRING_OR_PREATTACK_B WEAPONSET_TOGGLE_1
            Animation                    =    AttackA1
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_ATKB
                AnimationMode            =    ONCE
                AnimationBlendTime        =    15
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES
            FrameForPristineBonePositions = 20
        End


        AnimationState                    =    BETWEEN_FIRING_SHOTS_B WEAPONSET_TOGGLE_1
            Animation                    =    BetweenFiringShots
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_IDLA
                AnimationMode            =    LOOP
                AnimationBlendTime        =   15
            End
        End



        AnimationState                    = MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY WEAPONSET_TOGGLE_1
            Animation                    = TerrorFromTheSky
                AnimationName            = RURhrmArch_SKL.RURhrmArch_RUNB
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = MOVING EMOTION_TERROR WEAPONSET_TOGGLE_1
            Animation                    = TerrorFromTheSky
                AnimationName            = RURhrmArch_SKL.RURhrmArch_RUNB
                AnimationMode            = LOOP
            End
        End



        AnimationState                    =    EMOTION_ALERT EMOTION_AFRAID WEAPONSET_TOGGLE_1
            Animation                    =    Apprehensive
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_APPA
                AnimationMode            =    LOOP
            End
        End



        AnimationState                    = EMOTION_AFRAID WEAPONSET_TOGGLE_1
            Animation                    = FERA
                AnimationName            = RURhrmArch_SKL.RURhrmArch_FERA
                AnimationMode            = LOOP
            End




        End




        AnimationState                    =    EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
            Animation                    =    CheerA
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_CHRA
                AnimationMode            =    ONCE
            End
            Animation                    =    CheerB
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_CHRB
                AnimationMode            =    ONCE
            End
            Animation                    =    CheerD
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_CHRD
                AnimationMode            =    ONCE
            End
            Animation                    =    Salute
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_SLTA
                AnimationMode            =    ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End



        AnimationState                    = EMOTION_TAUNTING WEAPONSET_TOGGLE_1
            Animation                    = Taunting
                AnimationName            = RURhrmArch_SKL.RURhrmArch_TNTA
                AnimationMode            = ONCE
            End
            Animation                    = Taunting2
                AnimationName            = RURhrmArch_SKL.RURhrmArch_TNTB
                AnimationMode            = ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End



        AnimationState                    = EMOTION_POINTING WEAPONSET_TOGGLE_1
            Animation                    = Pointing1
                AnimationName            = RURhrmArch_SKL.RURhrmArch_PNTA
                AnimationMode            = LOOP
            End
        End



        AnimationState                    = EMOTION_ALERT WEAPONSET_TOGGLE_1
            Animation                    = IDLA
                AnimationName            = RURhrmArch_SKL.RURhrmArch_IDLA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    =    ATTACKING WEAPONSET_TOGGLE_1
            Animation                    =    Reloading
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_IDLA
                AnimationMode            =    LOOP
            End
        End



        AnimationState                    = SWAPPING_TO_WEAPONSET_1
            StateName                    = State_PuttingSpearAway
            Animation
                AnimationName            = RURohrm_SKL.RURohrm_WPNB
                AnimationMode            = ONCE_BACKWARDS
                AnimationSpeedFactorRange = 0.5 0.7
            End
            Flags                        = START_FRAME_LAST
        End

        AnimationState                    =    RAISING_FLAG WEAPONSET_TOGGLE_1
            Animation                    =    CheerA
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_CHRA
                AnimationMode            =    ONCE
                AnimationSpeedFactorRange = 0.9 1.1
            End
            Animation                    =    CheerB
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_CHRB
                AnimationMode            =    ONCE
                AnimationSpeedFactorRange = 0.9 1.1
            End
            Animation                    =    CheerD
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_CHRD
                AnimationMode            =    ONCE
                AnimationSpeedFactorRange = 0.9 1.1
            End
            Animation                    =    Salute
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_SLTA
                AnimationMode            =    ONCE
                AnimationSpeedFactorRange = 0.9 1.1
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End



        AnimationState                    = SELECTED WEAPONSET_TOGGLE_1
            StateName                    = State_Selected
            SimilarRestart                = Yes
            Animation                    = AtAttention
                AnimationName            = RURhrmArch_SKL.RURhrmArch_ATNB
                AnimationMode            = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then
                    CurDrawableSetTransitionAnimState("TRANS_Idle_to_SelectedWEAPONSET1")
                elseif Prev == "State_PuttingSpearAway" then
                    CurDrawableSetTransitionAnimState("TRANS_SpearAway_To_SelectedWEAPONSET1")
                end
            EndScript
        End


        AnimationState                    = SWAPPING_TO_WEAPONSET_2
            StateName                    = State_PuttingBowAway
            Animation
                AnimationName            = RURhrmArch_SKL.RURhrmArch_WPNA
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 0.5 0.6
            End
        End


        AnimationState                    =    WEAPONSET_TOGGLE_1
            StateName                    =    Idle
            Animation                    =    IDLB
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_IDLB
                AnimationMode            =    LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "State_Selected" then
                    CurDrawableSetTransitionAnimState("TRANS_Selected_to_IdleWEAPONSET1")
                elseif Prev == "State_PuttingSpearAway" then
                    CurDrawableSetTransitionAnimState("TRANS_SpearAway_To_IdleWEAPONSET1")
                end
            EndScript
        End

        TransitionState                    =    TRANS_Idle_to_SelectedWEAPONSET1
            Animation                    =    ATNA
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_ATNA
                AnimationMode            =    ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
        End

        TransitionState                    =    TRANS_SpearAway_To_SelectedWEAPONSET1
            Animation                    =    ATNA
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_WPNA
                AnimationMode            =    ONCE_BACKWARDS
            End
            Flags                        = START_FRAME_LAST
        End

        TransitionState                    =    TRANS_Selected_to_IdleWEAPONSET1
            Animation                    =    ATNC
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_ATNA
                AnimationMode            =    ONCE_BACKWARDS
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Flags                        = START_FRAME_LAST
        End

        TransitionState                    =    TRANS_SpearAway_To_IdleWEAPONSET1
            Animation
                AnimationName            =    RURhrmArch_SKL.RURhrmArch_WPNA
                AnimationMode            =    ONCE_BACKWARDS
            End
            Flags                        = START_FRAME_LAST
        End





        IdleAnimationState
            StateName                =    Idle
            Animation                =    IdleB
                AnimationName        =    RURohrm_SKL.RURohrm_IDLB
                AnimationMode        =    ONCE
                AnimationBlendTime    =    15
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "State_Selected" then
                    CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle")
                elseif Prev == "State_PuttingBowAway" then
                    CurDrawableSetTransitionAnimState("TRANS_BowAway_To_Idle")
                end
            EndScript
        End

        AnimationState                =    PASSENGER
            Animation                =    grabbed
                AnimationName        =    RURohrm_SKL.RURohrm_GBDA
                AnimationMode        =    LOOP
            End
        End


        AnimationState                =    FREEFALL
            Animation                =    free fall
                AnimationName        =    RURohrm_SKL.RURohrm_FLYB
                AnimationMode        =    LOOP
                AnimationBlendTime    =    10
            End
        End

        AnimationState                =    STUNNED_FLAILING
            Animation                =    JustDie
                AnimationName        =    RURohrm_SKL.RURohrm_FLYC
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End


        AnimationState                =    DYING DEATH_1 SPLATTED
            Animation                =    splatted
                AnimationName        =    RURohrm_SKL.RURohrm_LNDA
                AnimationMode        =    ONCE
                AnimationBlendTime  =   2
            End
            FXEvent    = Frame:2 Name:FX_SplatDust
        End



        AnimationState                =    DYING DEATH_1
            Animation                =    JustDie
                AnimationName        =    RURohrm_SKL.RURohrm_DIEA
                AnimationMode        =    ONCE
            End
        End

        AnimationState                =    DYING DEATH_2
            Animation                =    FadeOut
                AnimationName        =    RURohrm_SKL.RURohrm_IDLB
                AnimationMode        =    ONCE
            End
        End

        AnimationState                =    STUNNED_STANDING_UP
            Animation                =    StandUp
                AnimationName        =    RURohrm_SKL.RURohrm_GTPA
                AnimationMode        =    ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState                =    STUNNED
            Animation                =    Land
                AnimationName        =    RURohrm_SKL.RURohrm_LNDA
                AnimationMode        =    ONCE
            End
        End



        AnimationState                        = BURNINGDEATH
            Animation
                AnimationName                = RURohrm_SKL.RURohrm_MFDA
                AnimationMode                = LOOP
                Distance                    = 100
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = RURohrm_SKL.RURohrm_IDLB
                AnimationMode                = LOOP
            End
        End


        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = TrotAndFire
                AnimationName       = RURohrm_SKL.RURohrm_ATRB
                AnimationMode       = LOOP
                Distance            = 70
            End
            Flags               = RANDOMSTART
        End



        AnimationState                    = MOVING BACKING_UP
            Animation                    = BACKING UP
                AnimationName            = RURohrm_SKL.RURohrm_BAKA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    =    TURN_LEFT_HIGH_SPEED
            Animation                    =    TurnLeft
                AnimationName            =    RURohrm_SKL.RURohrm_TNL1
                AnimationMode            =    LOOP
                AnimationBlendTime        =    20
            End
        End

        AnimationState                    =    TURN_RIGHT_HIGH_SPEED
            Animation                    =    TurnRight
                AnimationName            =    RURohrm_SKL.RURohrm_TNR1
                AnimationMode            =    LOOP
                AnimationBlendTime        =    20
            End
        End

        AnimationState                    = MOVING WANDER
            Animation                    = WLKA
                AnimationName            = RURohrm_SKL.RURohrm_WLKA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    =    MOVING TURN_LEFT
            Animation                    =    TurnLeft
                AnimationName            =    RURohrm_SKL.RURohrm_TRNL
                AnimationMode            =    LOOP
            End
        End

        AnimationState                    =    MOVING TURN_RIGHT
            Animation                    =    TurnRight
                AnimationName            =    RURohrm_SKL.RURohrm_TRNR
                AnimationMode            =    LOOP
            End
        End

        AnimationState                    = MOVING ENGAGED
            Animation                    = Moving_Engaged
                AnimationName            = RURohrm_SKL.RURohrm_RUNC
                AnimationMode            = LOOP
            End
            Flags                        = RANDOMSTART
        End









        AnimationState                    = MOVING ACCELERATE
            Animation                    = Accelerate
                AnimationName            = RURohrm_SKL.RURohrm_ACCL
                AnimationMode            = ONCE
            End
        End

        AnimationState                    = DECELERATE
            Animation                    = Decelerate
                AnimationName            = RURohrm_SKL.RURohrm_DECL
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 0.55 0.55
            End
        End

        AnimationState                    =    MOVING
            Animation                    =    RunA
                AnimationName            =    RURohrm_SKL.RURohrm_RUNA
                AnimationMode            =    LOOP
                Distance                =   40
            End
            Flags                        =    RANDOMSTART
        End





        AnimationState                    =    FIRING_OR_PREATTACK_A
            Animation                    =    AttackA1
                AnimationName            =    RURohrm_SKL.RURohrm_ATKA
                AnimationMode            =    ONCE
            End
        End





        AnimationState                    = MOVING EMOTION_TERROR EMOTION_LOOK_TO_SKY
            Animation                    = TerrorFromTheSky
                AnimationName            = RURohrm_SKL.RURohrm_RUNB
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = MOVING EMOTION_TERROR
            Animation                    = TerrorFromTheSky
                AnimationName            = RURohrm_SKL.RURohrm_RUNB
                AnimationMode            = LOOP
            End
        End



        AnimationState                    =    EMOTION_ALERT EMOTION_AFRAID
            Animation                    =    Apprehensive
                AnimationName            =    RURohrm_SKL.RURohrm_APPA
                AnimationMode            =    LOOP
            End
        End



        AnimationState                    = EMOTION_AFRAID
            Animation                    = FERA
                AnimationName            = RURohrm_SKL.RURohrm_FERA
                AnimationMode            = LOOP
            End




        End



        AnimationState                    =    EMOTION_CELEBRATING
            Animation                    =    CheerA
                AnimationName            =    RURohrm_SKL.RURohrm_CHRA
                AnimationMode            =    ONCE
            End
            Animation                    =    CheerB
                AnimationName            =    RURohrm_SKL.RURohrm_CHRB
                AnimationMode            =    ONCE
            End
            Animation                    =    CheerC
                AnimationName            =    RURohrm_SKL.RURohrm_CHRC
                AnimationMode            =    ONCE
            End
            Animation                    =    CheerD
                AnimationName            =    RURohrm_SKL.RURohrm_CHRD
                AnimationMode            =    ONCE
            End
            Animation                    =    Salute
                AnimationName            =    RURohrm_SKL.RURohrm_SLTA
                AnimationMode            =    ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End



        AnimationState                    = EMOTION_TAUNTING
            Animation                    = Taunting
                AnimationName            = RURohrm_SKL.RURohrm_TNTA
                AnimationMode            = ONCE
            End
            Animation                    = Taunting2
                AnimationName            = RURohrm_SKL.RURohrm_TNTB
                AnimationMode            = ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End



        AnimationState                    = EMOTION_POINTING
            Animation                    = Pointing1
                AnimationName            = RURohrm_SKL.RURohrm_PNTA
                AnimationMode            = LOOP
            End
        End



        AnimationState                    = EMOTION_ALERT
            Animation                    = IDLA
                AnimationName            = RURohrm_SKL.RURohrm_IDLA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    =    RAISING_FLAG
            Animation                    =    CheerA
                AnimationName            =    RURohrm_SKL.RURohrm_CHRA
                AnimationMode            =    ONCE
                AnimationSpeedFactorRange = 0.9 1.1
            End
            Animation                    =    CheerB
                AnimationName            =    RURohrm_SKL.RURohrm_CHRB
                AnimationMode            =    ONCE
                AnimationSpeedFactorRange = 0.9 1.1
            End
            Animation                    =    CheerC
                AnimationName            =    RURohrm_SKL.RURohrm_CHRC
                AnimationMode            =    ONCE
                AnimationSpeedFactorRange = 0.9 1.1
            End
            Animation                    =    CheerD
                AnimationName            =    RURohrm_SKL.RURohrm_CHRD
                AnimationMode            =    ONCE
                AnimationSpeedFactorRange = 0.9 1.1
            End
            Animation                    =    Salute
                AnimationName            =    RURohrm_SKL.RURohrm_SLTA
                AnimationMode            =    ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End




        AnimationState                    = SELECTED
            StateName                    = State_Selected

            Animation                    = AtAttention
                AnimationName            = RURohrm_SKL.RURohrm_IDLA
                AnimationMode            = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then
                    CurDrawableSetTransitionAnimState("TRANS_Idle_To_Selected")
                elseif Prev == "State_PuttingBowAway" then
                    CurDrawableSetTransitionAnimState("TRANS_BowAway_To_Selected")
                end
            EndScript
        End


        TransitionState                    =    TRANS_Idle_to_Selected
            Animation                    =    ATNA
                AnimationName            =    RURohrm_SKL.RURohrm_ATNA
                AnimationMode            =    ONCE
                AnimationSpeedFactorRange = 1.0 1.0
            End
        End

        TransitionState                    =    TRANS_BowAway_To_Selected
            Animation
                AnimationName            =    RURohrm_SKL.RURohrm_WPNB
                AnimationMode            =    ONCE
            End
        End

        TransitionState                    =    TRANS_Selected_to_Idle
            Animation                    =    ATNC
                AnimationName            =    RURohrm_SKL.RURohrm_ATNA
                AnimationMode            =    ONCE_BACKWARDS
                AnimationSpeedFactorRange = 0.6 1.0
            End
            Flags                        = START_FRAME_LAST
        End

        TransitionState                    =    TRANS_BowAway_To_Idle
            Animation
                AnimationName            =    RURohrm_SKL.RURohrm_WPNB
                AnimationMode            =    ONCE
            End
        End

    End




    Draw = W3DScriptedModelDraw DustEffects
        DefaultModelConditionState
          Model = None
        End
        IdleAnimationState
        End
        AnimationState = MOVING WADING
            ParticleSysBone = None FootstepSlash
        End
        AnimationState = MOVING ACCELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING DECELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING
        End
    End


    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side                = Angmar
    EditorSorting       = UNIT
    ThreatLevel         = GLORFINDEL_THREAT_LEVEL
    ThingClass          = CHARACTER_UNIT
    TransportSlotCount  = TRANSPORTSLOTCOUNT_HERO
    BuildCost           = MEDIUM_HERO_COST
    BuildTime           = MEDIUM_HERO_BUILDTIME
    BountyValue         = ELVEN_GLORFINDEL_BOUNTY_VALUE
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG
    DisplayMeleeDamage  = MEDIUM_HERO_DAMAGE
    MaxSimultaneousOfType = 1
    Scale = 1.1


    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY     AngmarMorchantSpeer
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions        = None
        Armor             = MediumHeroArmorMounted
        DamageFX          = NormalDamageFX
    End



    VisionRange           = 300
    ShroudClearingRange   = 400

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    DisplayName               = OBJECT:AngmarMorchant
    RecruitText               = CONTROLBAR:AngmarMorchantRecruit
    ReviveText                = CONTROLBAR:AngmarMorchantRevive
    Hotkey                    = CONTROLBAR:AngmarMorchantHotkey

    CrusherLevel = 1
    MountedCrusherLevel = 1
    CrushableLevel = 2
    MountedCrushableLevel = 2

    CrushWeapon        = HeroCrush

    MinCrushVelocityPercent     = MINCRUSHVELOCITYPERCENT_HERO
    CrushDecelerationPercent    = CRUSHDECELERATIONPERCENT_HERO

    CrushKnockback = 40
    CrushZFactor = 1.0
    CommandSet        = AngmarMorchantCommandSet_Horse
    CommandPoints     = 0



    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_GlorfindelBody

    AutoResolveArmor
        Armor = AutoResolve_GlorfindelArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_GlorfindelWeapon
    End






    VoiceAttack                              = MorchantVoiceAttack
    VoiceAttackAir                           = MorchantVoiceAttack
    VoiceAttackCharge                        = MorchantVoiceAttack
    VoiceAttackMachine                       = MorchantVoiceAttack
    VoiceAttackStructure                     = MorchantVoiceAttack
    VoiceFear                                = MorchantVoiceFear
    VoiceCreated                             = MorchantVoiceRecruit
    VoiceFullyCreated                        = MorchantVoiceRecruit
    VoiceGuard                               = MorchantVoiceMove
    VoiceMove                                = MorchantVoiceMove
    VoiceMoveToCamp                          = MorchantVoiceMove
    VoiceMoveWhileAttacking                  = MorchantVoiceMove
    VoicePriority                            = 90
    VoiceRetreatToCastle                     = MorchantVoiceMove
    VoiceSelect                              = MorchantVoiceSelect
    VoiceSelectBattle                        = MorchantVoiceSelectinBattle

    SoundImpact                              = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitElvenTransportShip     = MorchantVoiceMove
        VoiceGarrison                        = MorchantVoiceMove
        VoiceInitiateCaptureBuilding         = MorchantVoiceMove
    End



    CrowdResponseKey = ElfHero

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
    EvaEventDieOwner        = GlorfindelDie

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Elf Elf_Male Unit Infantry Hero

    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: HorseMoveFootstepsLoose        Animation: RURohrm_SKL.RURohrm_ACCL    Frames: 8 30
        AnimationSound = Sound: HorseMoveFootstepsLoose        Animation: RURohrm_SKL.RURohrm_RUNA    Frames: 0
        AnimationSound = Sound: HorseMoveFootstepsLoose        Animation: RURohrm_SKL.RURohrm_RUNB    Frames: 0
        AnimationSound = Sound: HorseMoveFootstepsLoose        Animation: RURohrm_SKL.RURohrm_RUNC    Frames: 0
        AnimationSound = Sound: HorseMoveFootstepsLoose        Animation: RURohrm_SKL.RURohrm_TNL1    Frames: 0
        AnimationSound = Sound: HorseMoveFootstepsLoose        Animation: RURohrm_SKL.RURohrm_TNR1    Frames: 0
        AnimationSound = Sound: HorseMoveFootstepsLoose        Animation: RURohrm_SKL.RURohrm_TRNL    Frames: 0
        AnimationSound = Sound: HorseMoveFootstepsLoose        Animation: RURohrm_SKL.RURohrm_TRNR    Frames: 0
        AnimationSound = Sound: HorseWhinny            Animation: RURohrm_SKL.RURohrm_CHRB    Frames: 8
        AnimationSound = Sound: HorseWhinny            Animation: RURohrm_SKL.RURohrm_CHRC    Frames: 15
        AnimationSound = Sound: HorseWhinny            Animation: RURohrm_SKL.RURohrm_DIEA    Frames: 0

        AnimationSound = Sound: BodyFallGeneric1        Animation: RURohrm_SKL.RURohrm_DIEA    Frames: 10 46

        AnimationSound = Sound: BodyFallGeneric1        Animation: RURohrm_SKL.RURohrm_LNDA    Frames: 3 11

    End


    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance                = 300
        TauntAndPointUpdateDelay            = 10000
        AddEmotion            =    Doom_Base



        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
         AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base


        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End




    RadarPriority = UNIT
    KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_EACH_OTHER SCORE ARMY_SUMMARY HEAVY_MELEE_HITTER SCARY
    PathfindDiameter = 40.0
    CamouflageDetectionMultiplier = 2.0

    Body = RespawnBody ModuleTag_RespawnBody
        MaxHealth                    = MEDIUM_HERO_HEALTH
        PermanentlyKilledByFilter    = NONE
        DodgePercent                 = HERO_DODGE_PERCENT
    End

    Behavior = AutoHealBehavior ModuleTag_GlorfindelHealing
        StartsActive            = Yes
        HealingAmount            = HERO_HEAL_AMOUNT
        HealingDelay            = 1000
        StartHealingDelay        = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat    = Yes
    End

    #include "..\..\..\includes\DefaultInvisibilityUpdate.inc"

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    #include "..\..\..\includes\CaptureBuilding.inc"






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_MearasEnabler
        SpecialPowerTemplate            = SpecialAbilityToggleberegondWeapon
        TriggeredBy                     = Upgrade_Level_1
        ObeyRechageOnTrigger            = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_MearasStarter
         SpecialPowerTemplate           = SpecialAbilityToggleberegondWeapon
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = Yes
         AvailableAtStart               = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Mearas
         SpecialPowerTemplate           = SpecialAbilityToggleberegondWeapon
         MountedTemplate                = AngmarMorchant
         SynchronizeTimerOnSpecialPower = SpecialAbilityWildShelobPoisonedStinger SpecialAbilityAragornBladeMaster SpecialAbilityKingofDunharg SpecialAbilityAngmarGunstlingDuellant SpecialAbilityArkaneGeheimnisse SpecialAbilityIsengardSharkuManEaterGrab
         UnpackTime                     = OBJECT_TOGGLE_TIME
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End







    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate
        SpecialPowerTemplate     = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack = No
        StartsPaused             = No
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura
        StartsActive     = Yes
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff1
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura2
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_2
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff2
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura3
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_3
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff3
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura4
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_4
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff4
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura5
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_5
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff5
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura6
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_6
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff6
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura7
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_7
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff7
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura8
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_8
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff8
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura9
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_9
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff9
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura10
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_10
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff10
        ObjectFilter     = ANY +HERO -INFANTRY -CAVALRY -STRUCTURE -BASE_FOUNDATION -HORDE
    End


    Behavior = SpecialPowerModule ModuleTag_EyeStarter
        SpecialPowerTemplate        = SpecialAbilityEyeOfSauronAntiCategory
        UpdateModuleStartsAttack    = No
        AntiCategory                = LEADERSHIP BUFF STUN STRUCTURE INNATE_ARMOR
        AttributeModifierAffects    = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION  -HERO -HORDE
        AttributeModifier           = EyeOfSauronAntiCategory
        AttributeModifierRange      = 150.0
        StartsPaused                = No
    End







    Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag
        FireWeaponNugget
            WeaponName = MorchantBannzirkelEffect
            FireDelay = 0
            OneShot = No
        End
        HeroModeTrigger = Yes
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BannzirkelEnabler
        SpecialPowerTemplate       = SpecialAbilityKingofDunharg
        TriggeredBy                = Upgrade_Level_5
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_BannzirkelStarter
        SpecialPowerTemplate       = SpecialAbilityKingofDunharg
        UpdateModuleStartsAttack   = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_BannzirkelUpdate
        SpecialPowerTemplate       = SpecialAbilityKingofDunharg
        UnpackingVariation         = 1
        UnpackTime                 = 1800
        PackTime                   = 1600
        AwardXPForTriggering       = 0
        HeroAttributeModifier      = MorchantBannzirkelDebuff
        HeroEffectDuration         = 30000
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ArkanEnabler
        SpecialPowerTemplate       = SpecialAbilityArkaneGeheimnisse
        TriggeredBy                = Upgrade_Level_10
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLSpecialPowerArkan
        SpecialPowerTemplate       = SpecialAbilityArkaneGeheimnisse
        OCL                        = OCL_MorchantSchwarzeMagie

        CreateLocation             = CREATE_AT_LOCATION
        StartsPaused               = Yes
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SchattenwanderungEnabler
        SpecialPowerTemplate    = SpecialAbilityAngmarGunstlingDuellant
        TriggeredBy             = Upgrade_Level_7
        ObeyRechageOnTrigger    = Yes
    End

    Behavior = WeaponModeSpecialPowerUpdate ModuleTag_SchattenwanderungPowerUpdate
        SpecialPowerTemplate    = SpecialAbilityAngmarGunstlingDuellant
        Duration                = 30000
        AttributeModifier       = MorchantBonus
        LockWeaponSlot          = SECONDARY
        StartsPaused            = Yes
    End

    Behavior = MonitorConditionUpdate ModuleTag_CommandSetSwapperWanderung
        ModelConditionFlags      = WEAPONLOCK_SECONDARY
        ModelConditionCommandSet = AngmarMorchantCommandSet_SchattenModule
    End

    Behavior = SpecialPowerModule ModuleTag_TeleportStarter
        SpecialPowerTemplate     = SpecialAbilityMorchantHeroBlink
        UpdateModuleStartsAttack = Yes
        TriggerFX                = FX_BlinkMorchant
        StartsPaused             = No
    End

    Behavior = TeleportSpecialAbilityUpdate ModuleTag_TeleportUpdate
        SpecialPowerTemplate     = SpecialAbilityMorchantHeroBlink
        UnpackingVariation       = 1
        UnpackTime               = 100
        PackTime                 = 100
        ApproachRequiresLOS      = No
        BusyForDuration          = 100
        DestinationWeaponName    = CreateaHeroBlinkDestination.
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_PoisonedStingerEnabler
        SpecialPowerTemplate     = SpecialAbilityWildShelobPoisonedStinger
        TriggeredBy              = Upgrade_Level_6
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_PoisonedStingerStarter
        SpecialPowerTemplate     = SpecialAbilityWildShelobPoisonedStinger
        UpdateModuleStartsAttack = Yes
        StartsPaused             = Yes
        InitiateSound            = ShelobVoxPoisonStinger
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_PoisonedStingerUpdate
        SpecialPowerTemplate     = SpecialAbilityWildShelobPoisonedStinger
        SkipContinue             = Yes
        UnpackTime               = 250
        PreparationTime          = 500
        MustFinishAbility        = Yes
        AwardXPForTriggering     = 0
        StartAbilityRange        = 15.0
        SpecialWeapon            = WildShelobPoisonedStinger
        WhichSpecialWeapon       = 1
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ManEaterEnabler
        SpecialPowerTemplate        = SpecialAbilityIsengardSharkuManEaterGrab
        TriggeredBy                 = Upgrade_Level_7
        ObeyRechageOnTrigger        = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_SpecialPowerModuleGrabStarter
        SpecialPowerTemplate        = SpecialAbilityIsengardSharkuManEaterGrab
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = Yes
        InitiateSound               = SharkuManeaterStartMS
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WeaponFireSpecialAbilityUpdateGrab
        SpecialPowerTemplate        = SpecialAbilityIsengardSharkuManEaterGrab
        SkipContinue                = Yes
        UnpackTime                  = 933

        StartAbilityRange           = 8.0

        SpecialWeapon               = IsengardSharkuManEaterGrab
        ChainedButton               = Command_SpecialAbilityIsengardSharkuManEaterFlingPassenger
        CustomAnimAndDuration       = AnimState:EATING AnimTime:3300

        TriggerAttributeModifier    = SharkuManEater
        AttributeModifierDuration   = 20000
        TriggerSound                = SharkuManEaterEatingMS
        BusyForDuration             = 2000
    End

    Behavior = PlayerHealSpecialPower ModuleTag_SpecialPowerModuleFlingPassengerStarter
        SpecialPowerTemplate        = SpecialAbilityIsengardSharkuManEaterDrop
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = No
        HealAmount                  = 1.0
        HealAsPercent               = Yes
        HealAffects                 = HERO
        HealRadius                  = 0.0
        HealFX                      = FX_SpellHealUnitHealBuff
    End

    Behavior = FlingPassengerSpecialAbilityUpdate ModuleTag_FlingPassengerSpecialAbilityUpdate
        SpecialPowerTemplate         = SpecialAbilityIsengardSharkuManEaterDrop
        UnpackTime                   = 1250
        FlingPassengerVelocity       = X:0 Y:0 Z:0
        FlingPassengerLandingWarhead = IsengardSharkuManEaterWarhead
    End



    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        CanAttackWhileContained    = Yes
    End


    LocomotorSet
        Locomotor = HeroHorseLocomotor
        Condition = SET_NORMAL
        Speed     = 90
    End



    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 2000
    End


    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes           = ALL
        SinkDelay            = 5000
        SinkRate             = 10.0
        DestructionDelay     = 1800
        Sound                = INITIAL MorchantVoiceDie
    End



    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End





    Behavior = PassiveAreaEffectBehavior ModuleTag_SplashOfHealingWater_Ahh
        UpgradeRequired      = Upgrade_TestBuilding_2
        EffectRadius         = 150
        PingDelay            = 2000
        HealPercentPerSecond = 3%
        AllowFilter          = ANY +INFANTRY +CAVALRY +HERO -MACHINE +MONSTER -IMMOBILE +DOZER
        NonStackable         = Yes
        HealFX               = FX_SpellHealUnitBuffAngmarCaliz
    End

    Behavior = FireWeaponUpdate ModuleTag_WeaponFiring
        FireWeaponNugget
            WeaponName = MorchantMachtHKModifierWeapon
            Offset = X:0 Y:0 Z:0
            FireDelay = 0
            OneShot = No
        End
    End





    Behavior = AISpecialPowerUpdate GlorfindelToggleMountedAI
        CommandButtonName = Command_MountHorseGlorfindel
        SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_MOUNTED
    End

    Behavior = AISpecialPowerUpdate BladeOfPurityAI
        CommandButtonName = Command_SpecialAbilityGlorfindelBladeOfPurity
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate WindRiderAI
        CommandButtonName = Command_SpecialAbilityGlorfindelWindRider
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate StarLightAI
        CommandButtonName = Command_GlorfindelStarlight
        SpecialPowerAIType = AI_SPECIAL_POWER_HEAL_AOE
    End

    Behavior = AISpecialPowerUpdate ThunderboltAI
        CommandButtonName = Command_GlorfindelHopeLight
        SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
    End



    Geometry            = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryHeight        = 25
    GeometryIsSmall        = Yes
    Shadow                = SHADOW_DECAL
    ShadowSizeX            = 20
    ShadowSizeY            = 20
    ShadowTexture        = ShadowI
End



Object AngmarMorchantWarg



    SelectPortrait = HPMorchant


    ButtonImage = HIMorchant

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_Glorfindel

     EquivalentTo = AngmarMorchant

    Draw = W3DScriptedModelDraw ModuleTag_DRAW

     RandomTexture = kumorquant_gntl.tga  0 chhw_sm_gear_02.tga

       ExtraPublicBone    = B_PASSENGER01

        DefaultModelConditionState
            Model                    = kumorch_wag
            Skeleton                 = IUShrkMnt_SKL
        End



        AnimationState                        = PASSENGER
            Animation                        = Grabbed
                AnimationName                = IUShrkMnt_GBDA
                AnimationMode                = LOOP
            End
        End

        AnimationState                        = FREEFALL
            Animation                        = freefall
                AnimationName                = IUShrkMnt_FLYA
                AnimationMode                = LOOP
                AnimationBlendTime            = 10
            End
        End

        AnimationState                =    STUNNED_FLAILING
            Animation                =    JustDie
                AnimationName       =    IUShrkMnt_FLYA
                AnimationMode       =    LOOP
            End
        End

        AnimationState                =    DYING SPLATTED
            Animation                =    splatted
                AnimationName        =    IUShrkMnt_LNDA
                AnimationMode        =    ONCE
            End
        End

        AnimationState = EATING
            FrameForPristineBonePositions = 99
            Animation
                AnimationName = IUShrkMnt_SPCA
                AnimationMode = ONCE
            End
        End

        AnimationState                =    DYING
            Animation                =    JustDie
                AnimationName        =    IUShrkMnt_DIEA
                AnimationMode        =    ONCE
            End
        End

        AnimationState                =    STUNNED_STANDING_UP
            Animation                =    StandUp
                AnimationName       =    IUShrkMnt_GTPA
                AnimationMode       =    ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState                =    STUNNED
            Animation                =    Land
                AnimationName       =    IUShrkMnt_LNDA
                AnimationMode       =    ONCE
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = IUShrkMnt_IDLB
                AnimationMode                = LOOP
            End
        End




        AnimationState  = COMING_OUT_OF_FACTORY
            Animation = Being_Built
                AnimationName        = IUShrkMnt_RUNA
                AnimationMode        = LOOP
                AnimationBlendTime    = 0
            End
        End

        AnimationState = MOVING FIRING_OR_PREATTACK_A
            Animation = TrotAndFire
                AnimationName = IUShrkMnt_ATRA
                AnimationMode = LOOP
            End
            Flags = RANDOMSTART

        End

        AnimationState                =    TURN_LEFT_HIGH_SPEED
            Animation                =    MTurnLeft
                AnimationName        =    IUShrkMnt_RUNA
                AnimationMode        =    LOOP
            End
        End

        AnimationState                =    TURN_RIGHT_HIGH_SPEED
            Animation                =    MTurnRight
                AnimationName        =    IUShrkMnt_RUNA
                AnimationMode        =    LOOP
            End
        End

        AnimationState                =    TURN_LEFT
            Animation                =    TurnRight
                AnimationName        =    IUShrkMnt_TRNL
                AnimationMode        =    LOOP
                AnimationSpeedFactorRange = 2.0 2.0
            End
        End

        AnimationState                =    TURN_RIGHT
            Animation                =    TurnRight
                AnimationName        =    IUShrkMnt_TRNR
                AnimationMode        =    LOOP
                AnimationSpeedFactorRange = 2.0 2.0
            End
        End

        AnimationState                =    MOVING ACCELERATE
            Animation                =    Accelerate
                AnimationName        =    IUShrkMnt_ACCL
                AnimationMode        =    ONCE
            End

        End

        AnimationState                =    MOVING DECELERATE
            Animation                =    Decelerate
                AnimationName        =    IUShrkMnt_DECL
                AnimationMode        =    ONCE
            End

        End








        AnimationState                =    MOVING
            ShareAnimation            =    Yes
            Animation                =    RunA
                AnimationName        =    IUShrkMnt_RUNA
                AnimationMode        =    LOOP
            End

        End


        AnimationState                =    BETWEEN_FIRING_SHOTS_A
            Animation                =    BetweenFiringShots
                AnimationName        =    IUShrkMnt_IDLA
                AnimationMode        =    LOOP
                AnimationBlendTime    =   10
            End
        End

        AnimationState                =    FIRING_OR_PREATTACK_A
            Animation                =    AttackA3
                AnimationName        =    IUShrkMnt_ATKA
                AnimationMode        =    ONCE
                UseWeaponTiming        =    Yes
                AnimationBlendTime  =    10
            End
        End

        AnimationState = PACKING_TYPE_1
            StateName         = SPELL
            Animation         = SPCB
                AnimationName = IUShrkMnt_SPCB
                AnimationMode = ONCE
            End
        End

        AnimationState                =    ATTACKING
            Animation                =    AttackA3
                AnimationName        =    IUShrkMnt_ATKA
                AnimationMode        =    MANUAL
            End
        End


        AnimationState = WAR_CHANT
            Animation = Chant
                AnimationName = IUShrkMnt_TNTA
                AnimationMode = LOOP
            End
        End



        AnimationState                    = EMOTION_TAUNTING
            Animation                    = TNTA
                AnimationName            = IUShrkMnt_TNTA
                AnimationMode            = LOOP
            End
            Flags                    = RANDOMSTART
        End

        AnimationState                    = EMOTION_CELEBRATING
            Animation                   = CHRA
                AnimationName            = IUShrkMnt_CHRA
                AnimationMode            = ONCE
            End
            Flags                    = RANDOMSTART
        End


        AnimationState                            = EMOTION_ALERT
            StateName                            = STATE_Ready
            Animation                            = ALERT
                AnimationName                    = IUShrkMnt_IDLA
                AnimationMode                    = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Selected" then CurDrawableSetTransitionAnimState("Selected_to_Ready") end
            EndScript
        End

        AnimationState                    = RAISING_FLAG
            Animation                   = CHRA
                AnimationName            = IUShrkMnt_CHRA
                AnimationMode            = LOOP
            End
        End


        AnimationState                =    SELECTED
            SimilarRestart            =   Yes
            Animation                =    AtAttention
                AnimationName        =    IUShrkMnt_ATNB
                AnimationMode        =    LOOP
            End
            StateName                = Selected
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("Idle_to_Selected") end
                if Prev == "STATE_Ready" then CurDrawableSetTransitionAnimState("Ready_to_Selected") end
            EndScript
        End

        IdleAnimationState
            Animation
                AnimationName        =    IUShrkMnt_IDLB
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationPriority   =    10
            End
            Animation
                AnimationName        =    IUShrkMnt_IDLC
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationPriority   =    2
            End
            Animation
                AnimationName        =    IUShrkMnt_IDLD
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationPriority   =    2
            End
            StateName                = Idle
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Selected" then CurDrawableSetTransitionAnimState("Selected_to_Idle") end
            EndScript
        End


        TransitionState       = Selected_to_Idle
            Animation           = ATNE
                AnimationName        =    IUShrkMnt_ATNC
                AnimationMode        =    ONCE
                AnimationSpeedFactorRange = 0.7 1.3
            End
        End

        TransitionState       = Idle_to_Selected
            Animation           = ATND
                AnimationName     = IUShrkMnt_ATNA
                AnimationMode   =    ONCE
                AnimationSpeedFactorRange = 0.7 1.3
            End
        End

        TransitionState       = Ready_to_Selected
            Animation           = ATNC
                AnimationName     = IUShrkMnt_ATNA
                AnimationMode   =    ONCE
                AnimationSpeedFactorRange = 0.7 1.3
            End
        End

        TransitionState       = Selected_to_Ready
            Animation           = ATNCReverse
                AnimationName     = IUShrkMnt_ATNC
                AnimationMode   =    ONCE_BACKWARDS
                AnimationSpeedFactorRange = 0.7 1.3
            End
        End

    End

    Draw = W3DScriptedModelDraw DustEffects
        DefaultModelConditionState
          Model = None
        End
        IdleAnimationState
        End
        AnimationState = MOVING WADING
            ParticleSysBone = None FootstepSlash
        End
        AnimationState = MOVING ACCELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING DECELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING
        End
    End



    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side                = Angmar
    EditorSorting       = UNIT
    ThreatLevel         = GLORFINDEL_THREAT_LEVEL
    ThingClass          = CHARACTER_UNIT
    TransportSlotCount  = TRANSPORTSLOTCOUNT_HERO
    BuildCost           = MEDIUM_HERO_COST
    BuildTime           = MEDIUM_HERO_BUILDTIME
    BountyValue         = ELVEN_GLORFINDEL_BOUNTY_VALUE
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG
    DisplayMeleeDamage  = MEDIUM_HERO_DAMAGE
    MaxSimultaneousOfType = 1
    Scale = 1.02


    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY     AngmarMorchantSpeer
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions        = None
        Armor             = MediumHeroArmorMounted
        DamageFX          = NormalDamageFX
    End



    VisionRange           = 300
    ShroudClearingRange   = 400

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    DisplayName               = OBJECT:AngmarMorchant
    RecruitText               = CONTROLBAR:AngmarMorchantRecruit
    ReviveText                = CONTROLBAR:AngmarMorchantRevive
    Hotkey                    = CONTROLBAR:AngmarMorchantHotkey

    CrusherLevel = 2
    MountedCrusherLevel = 2
    CrushableLevel = 2
    MountedCrushableLevel = 2

    CrushWeapon        = HeroCrush

    MinCrushVelocityPercent     = MINCRUSHVELOCITYPERCENT_HERO
    CrushDecelerationPercent    = CRUSHDECELERATIONPERCENT_HERO

    CrushKnockback = 40
    CrushZFactor = 1.0
    CommandSet        = AngmarMorchantCommandSet_Warg
    CommandPoints     = 0



    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_GlorfindelBody

    AutoResolveArmor
        Armor = AutoResolve_GlorfindelArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_GlorfindelWeapon
    End






    VoiceAttack                              = MorchantVoiceAttack
    VoiceAttackAir                           = MorchantVoiceAttack
    VoiceAttackCharge                        = MorchantVoiceAttack
    VoiceAttackMachine                       = MorchantVoiceAttack
    VoiceAttackStructure                     = MorchantVoiceAttack
    VoiceFear                                = MorchantVoiceFear
    VoiceCreated                             = MorchantVoiceRecruit
    VoiceFullyCreated                        = MorchantVoiceRecruit
    VoiceGuard                               = MorchantVoiceMove
    VoiceMove                                = MorchantVoiceMove
    VoiceMoveToCamp                          = MorchantVoiceMove
    VoiceMoveWhileAttacking                  = MorchantVoiceMove
    VoicePriority                            = 90
    VoiceRetreatToCastle                     = MorchantVoiceMove
    VoiceSelect                              = MorchantVoiceSelect
    VoiceSelectBattle                        = MorchantVoiceSelectinBattle

    SoundAmbient                             = WargAmbienceVOX
    SoundImpact                              = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitElvenTransportShip     = MorchantVoiceMove
        VoiceGarrison                        = MorchantVoiceMove
        VoiceInitiateCaptureBuilding         = MorchantVoiceMove
    End



    CrowdResponseKey = ElfHero

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
    EvaEventDieOwner        = GlorfindelDie

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Elf Elf_Male Unit Infantry Hero

    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:WargMoveFootsteps         Animation:IUShrkMnt_SKL.IUShrkMnt_RUNA     Frames:0
        AnimationSound = Sound:WargMoveFootsteps         Animation:IUShrkMnt_SKL.IUShrkMnt_TNL1     Frames:0
        AnimationSound = Sound:WargMoveFootsteps         Animation:IUShrkMnt_SKL.IUShrkMnt_TNR1     Frames:0
        AnimationSound = Sound:WargMoveFootsteps         Animation:IUShrkMnt_SKL.IUShrkMnt_TRNL     Frames:0
        AnimationSound = Sound:WargMoveFootsteps         Animation:IUShrkMnt_SKL.IUShrkMnt_TRNR     Frames:0
        AnimationSound = Sound:WargMoveFootsteps         Animation:IUShrkMnt_SKL.IUShrkMnt_ACCL     Frames:0

        AnimationSound = Sound:WargRiderTauntCallouts     Animation:IUShrkMnt_SKL.IUShrkMnt_TNTA     Frames:27

        AnimationSound = Sound:WargTauntCallouts         Animation:IUShrkMnt_SKL.IUShrkMnt_TNTA     Frames:26
        AnimationSound = Sound:WargTauntCallouts         Animation:IUShrkMnt_SKL.IUShrkMnt_ATND     Frames:7
        AnimationSound = Sound:WargTauntCallouts         Animation:IUShrkMnt_SKL.IUShrkMnt_HWLA     Frames:17
        AnimationSound = Sound:WargTauntFootstep         Animation:IUShrkMnt_SKL.IUShrkMnt_TNTA     Frames:7 12 64 73

        AnimationSound = Sound:WargSaddleFoleySingles     Animation:IUShrkMnt_SKL.IUShrkMnt_TNTA     Frames:25
        AnimationSound = Sound:WargSaddleFoleySingles     Animation:IUShrkMnt_SKL.IUShrkMnt_RUNA     Frames:5
        AnimationSound = Sound:WargSaddleFoleySingles     Animation:IUShrkMnt_SKL.IUShrkMnt_TNL1     Frames:5
        AnimationSound = Sound:WargSaddleFoleySingles     Animation:IUShrkMnt_SKL.IUShrkMnt_TNR1     Frames:5
        AnimationSound = Sound:WargSaddleFoleySingles     Animation:IUShrkMnt_SKL.IUShrkMnt_ACCL     Frames:5
        AnimationSound = Sound:WargSaddleFoleySingles     Animation:IUShrkMnt_SKL.IUShrkMnt_ATNA     Frames:5
        AnimationSound = Sound:WargSaddleFoleySingles     Animation:IUShrkMnt_SKL.IUShrkMnt_ATND     Frames:5
        AnimationSound = Sound:WargSaddleFoleySingles     Animation:IUShrkMnt_SKL.IUShrkMnt_GTPA     Frames:5 101
        AnimationSound = Sound:WargSaddleFoleySingles     Animation:IUShrkMnt_SKL.IUShrkMnt_HWLA     Frames:15
        AnimationSound = Sound:WargSaddleFoleySingles     Animation:IUShrkMnt_SKL.IUShrkMnt_RDYA     Frames:5
        AnimationSound = Sound:WargSaddleFoleySingles     Animation:IUShrkMnt_SKL.IUShrkMnt_RDYB     Frames:5

        AnimationSound = Sound:BuildingWargPitRiderDrop    Animation:IUShrkMnt_SKL.IUShrkMnt_BLDB    Frames:44

        AnimationSound = Sound:BodyFallOrc             Animation:IUShrkMnt_SKL.IUShrkMnt_DIEB    Frames:10
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:IUShrkMnt_SKL.IUShrkMnt_DIEB    Frames:45
        AnimationSound = Sound:BodyFallOrc             Animation:IUShrkMnt_SKL.IUShrkMnt_LNDA    Frames:1 17
    End


    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance                = 300
        TauntAndPointUpdateDelay            = 10000
        AddEmotion            =    Doom_Base



        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
         AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base


        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End




    RadarPriority = UNIT
    KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_EACH_OTHER SCORE ARMY_SUMMARY HEAVY_MELEE_HITTER SCARY
    PathfindDiameter = 40.0
    CamouflageDetectionMultiplier = 2.0

    Body = RespawnBody ModuleTag_RespawnBody
        MaxHealth                    = MEDIUM_HERO_HEALTH
        PermanentlyKilledByFilter    = NONE
        DodgePercent                 = HERO_DODGE_PERCENT
    End

    Behavior = AutoHealBehavior ModuleTag_GlorfindelHealing
        StartsActive            = Yes
        HealingAmount            = HERO_HEAL_AMOUNT
        HealingDelay            = 1000
        StartHealingDelay        = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat    = Yes
    End

    #include "..\..\..\includes\DefaultInvisibilityUpdate.inc"

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    #include "..\..\..\includes\CaptureBuilding.inc"







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_MearasEnabler
        SpecialPowerTemplate            = SpecialAbilityToggleberegondWeapon
        TriggeredBy                     = Upgrade_Level_1
        ObeyRechageOnTrigger            = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_MearasStarter
         SpecialPowerTemplate           = SpecialAbilityToggleberegondWeapon
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = Yes
         AvailableAtStart               = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Mearas
         SpecialPowerTemplate           = SpecialAbilityToggleberegondWeapon
         MountedTemplate                = AngmarMorchant
         SynchronizeTimerOnSpecialPower = SpecialAbilityWildShelobPoisonedStinger SpecialAbilityAragornBladeMaster SpecialAbilityKingofDunharg SpecialAbilityAngmarGunstlingDuellant SpecialAbilityArkaneGeheimnisse SpecialAbilityIsengardSharkuManEaterGrab
         UnpackTime                     = OBJECT_TOGGLE_TIME
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End







    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate
        SpecialPowerTemplate     = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack = No
        StartsPaused             = No
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura
        StartsActive     = Yes
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff1
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura2
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_2
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff2
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura3
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_3
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff3
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura4
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_4
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff4
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura5
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_5
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff5
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura6
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_6
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff6
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura7
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_7
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff7
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura8
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_8
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff8
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura9
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_9
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff9
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura10
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_10
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff10
        ObjectFilter     = ANY +HERO -INFANTRY -CAVALRY -STRUCTURE -BASE_FOUNDATION -HORDE
    End


    Behavior = SpecialPowerModule ModuleTag_EyeStarter
        SpecialPowerTemplate        = SpecialAbilityEyeOfSauronAntiCategory
        UpdateModuleStartsAttack    = No
        AntiCategory                = LEADERSHIP BUFF STUN STRUCTURE INNATE_ARMOR
        AttributeModifierAffects    = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION  -HERO -HORDE
        AttributeModifier           = EyeOfSauronAntiCategory
        AttributeModifierRange      = 150.0
        StartsPaused                = No
    End







    Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag
        FireWeaponNugget
            WeaponName = MorchantBannzirkelEffect
            FireDelay = 0
            OneShot = No
        End
        HeroModeTrigger = Yes
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BannzirkelEnabler
        SpecialPowerTemplate       = SpecialAbilityKingofDunharg
        TriggeredBy                = Upgrade_Level_5
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_BannzirkelStarter
        SpecialPowerTemplate       = SpecialAbilityKingofDunharg
        UpdateModuleStartsAttack   = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_BannzirkelUpdate
        SpecialPowerTemplate       = SpecialAbilityKingofDunharg
        UnpackingVariation         = 1
        UnpackTime                 = 1800
        PackTime                   = 1600
        AwardXPForTriggering       = 0
        HeroAttributeModifier      = MorchantBannzirkelDebuff
        HeroEffectDuration         = 30000
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ArkanEnabler
        SpecialPowerTemplate       = SpecialAbilityArkaneGeheimnisse
        TriggeredBy                = Upgrade_Level_10
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLSpecialPowerArkan
        SpecialPowerTemplate       = SpecialAbilityArkaneGeheimnisse
        OCL                        = OCL_MorchantSchwarzeMagie

        CreateLocation             = CREATE_AT_LOCATION
        StartsPaused               = Yes
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SchattenwanderungEnabler
        SpecialPowerTemplate    = SpecialAbilityAngmarGunstlingDuellant
        TriggeredBy             = Upgrade_Level_7
        ObeyRechageOnTrigger    = Yes
    End

    Behavior = WeaponModeSpecialPowerUpdate ModuleTag_SchattenwanderungPowerUpdate
        SpecialPowerTemplate    = SpecialAbilityAngmarGunstlingDuellant
        Duration                = 30000
        AttributeModifier       = MorchantBonus
        LockWeaponSlot          = SECONDARY
        StartsPaused            = Yes
    End

    Behavior = MonitorConditionUpdate ModuleTag_CommandSetSwapperWanderung
        ModelConditionFlags      = WEAPONLOCK_SECONDARY
        ModelConditionCommandSet = AngmarMorchantCommandSet_SchattenModule
    End

    Behavior = SpecialPowerModule ModuleTag_TeleportStarter
        SpecialPowerTemplate     = SpecialAbilityMorchantHeroBlink
        UpdateModuleStartsAttack = Yes
        TriggerFX                = FX_BlinkMorchant
        StartsPaused             = No
    End

    Behavior = TeleportSpecialAbilityUpdate ModuleTag_TeleportUpdate
        SpecialPowerTemplate     = SpecialAbilityMorchantHeroBlink
        UnpackingVariation       = 1
        UnpackTime               = 100
        PackTime                 = 100
        ApproachRequiresLOS      = No
        BusyForDuration          = 100
        DestinationWeaponName    = CreateaHeroBlinkDestination.
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_PoisonedStingerEnabler
        SpecialPowerTemplate     = SpecialAbilityWildShelobPoisonedStinger
        TriggeredBy              = Upgrade_Level_6
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_PoisonedStingerStarter
        SpecialPowerTemplate     = SpecialAbilityWildShelobPoisonedStinger
        UpdateModuleStartsAttack = Yes
        StartsPaused             = Yes
        InitiateSound            = ShelobVoxPoisonStinger
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_PoisonedStingerUpdate
        SpecialPowerTemplate     = SpecialAbilityWildShelobPoisonedStinger
        SkipContinue             = Yes
        UnpackTime               = 250
        PreparationTime          = 500
        MustFinishAbility        = Yes
        AwardXPForTriggering     = 0
        StartAbilityRange        = 15.0
        SpecialWeapon            = WildShelobPoisonedStinger
        WhichSpecialWeapon       = 1
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ManEaterEnabler
        SpecialPowerTemplate        = SpecialAbilityIsengardSharkuManEaterGrab
        TriggeredBy                 = Upgrade_Level_7
        ObeyRechageOnTrigger        = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_SpecialPowerModuleGrabStarter
        SpecialPowerTemplate        = SpecialAbilityIsengardSharkuManEaterGrab
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = Yes
        InitiateSound               = SharkuManeaterStartMS
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WeaponFireSpecialAbilityUpdateGrab
        SpecialPowerTemplate        = SpecialAbilityIsengardSharkuManEaterGrab
        SkipContinue                = Yes
        UnpackTime                  = 933

        StartAbilityRange           = 8.0

        SpecialWeapon               = IsengardSharkuManEaterGrab
        ChainedButton               = Command_SpecialAbilityIsengardSharkuManEaterFlingPassenger
        CustomAnimAndDuration       = AnimState:EATING AnimTime:3300

        TriggerAttributeModifier    = SharkuManEater
        AttributeModifierDuration   = 20000
        TriggerSound                = SharkuManEaterEatingMS
        BusyForDuration             = 2000
    End

    Behavior = PlayerHealSpecialPower ModuleTag_SpecialPowerModuleFlingPassengerStarter
        SpecialPowerTemplate        = SpecialAbilityIsengardSharkuManEaterDrop
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = No
        HealAmount                  = 1.0
        HealAsPercent               = Yes
        HealAffects                 = HERO
        HealRadius                  = 0.0
        HealFX                      = FX_SpellHealUnitHealBuff
    End

    Behavior = FlingPassengerSpecialAbilityUpdate ModuleTag_FlingPassengerSpecialAbilityUpdate
        SpecialPowerTemplate         = SpecialAbilityIsengardSharkuManEaterDrop
        UnpackTime                   = 1250
        FlingPassengerVelocity       = X:0 Y:0 Z:0
        FlingPassengerLandingWarhead = IsengardSharkuManEaterWarhead
    End




    Behavior = TransportContain ModuleTag_09
        ObjectStatusOfContained = UNSELECTABLE
        PassengerFilter            = NONE +INFANTRY -HERO

        Slots                    = 1
        ShowPips                = No
        AllowEnemiesInside        = Yes
        AllowNeutralInside        = Yes
        AllowAlliesInside        = No

        DestroyRidersWhoAreNotFreeToExit = Yes
        ForceOrientationContainer = No
        PassengerBonePrefix = PassengerBone:B_PASSENGER01        KindOf:INFANTRY

    End



    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        CanAttackWhileContained    = Yes
    End


    LocomotorSet
        Locomotor = WargLocomotor
        Condition = SET_NORMAL
        Speed     = 110
    End



    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 2000
    End


    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes           = ALL
        SinkDelay            = 5000
        SinkRate             = 10.0
        DestructionDelay     = 1800
        Sound                = INITIAL MorchantVoiceDie
    End



    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End





    Behavior = PassiveAreaEffectBehavior ModuleTag_SplashOfHealingWater_Ahh
        UpgradeRequired      = Upgrade_TestBuilding_2
        EffectRadius         = 150
        PingDelay            = 2000
        HealPercentPerSecond = 3%
        AllowFilter          = ANY +INFANTRY +CAVALRY +HERO -MACHINE +MONSTER -IMMOBILE +DOZER
        NonStackable         = Yes
        HealFX               = FX_SpellHealUnitBuffAngmarCaliz
    End

    Behavior = FireWeaponUpdate ModuleTag_WeaponFiring
        FireWeaponNugget
            WeaponName = MorchantMachtHKModifierWeapon
            Offset = X:0 Y:0 Z:0
            FireDelay = 0
            OneShot = No
        End
    End






    Behavior = AISpecialPowerUpdate GlorfindelToggleMountedAI
        CommandButtonName = Command_MountHorseGlorfindel
        SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_MOUNTED
    End

    Behavior = AISpecialPowerUpdate BladeOfPurityAI
        CommandButtonName = Command_SpecialAbilityGlorfindelBladeOfPurity
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate WindRiderAI
        CommandButtonName = Command_SpecialAbilityGlorfindelWindRider
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate StarLightAI
        CommandButtonName = Command_GlorfindelStarlight
        SpecialPowerAIType = AI_SPECIAL_POWER_HEAL_AOE
    End

    Behavior = AISpecialPowerUpdate ThunderboltAI
        CommandButtonName = Command_GlorfindelHopeLight
        SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
    End



    Geometry            = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryHeight        = 25
    GeometryIsSmall        = Yes
    Shadow                = SHADOW_DECAL
    ShadowSizeX            = 20
    ShadowSizeY            = 20
    ShadowTexture        = ShadowI
End

Object AngmarMorchantWolf



    SelectPortrait = HPMorchant


    ButtonImage = HIMorchant

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_Glorfindel

     EquivalentTo = AngmarMorchant

    Draw = W3DScriptedModelDraw ModuleTag_DRAW

     RandomTexture = kumorquant_gntl.tga  0 chhw_sm_gear_02.tga

        DefaultModelConditionState
            Model                   = kumorch_wlf
            Skeleton                = KUOrcRider_SKL
        End



        AnimationState                        = PASSENGER
            Animation                        = Grabbed
                AnimationName                = KUOrcRider_GBDA
                AnimationMode                = LOOP
            End
        End

        AnimationState                        = FREEFALL
            Animation                        = freefall
                AnimationName                = KUOrcRider_FLYA
                AnimationMode                = LOOP
                AnimationBlendTime            = 10
            End
        End

        AnimationState                =    STUNNED_FLAILING
            Animation                =    JustDie
                AnimationName       =    KUOrcRider_FLYA
                AnimationMode       =    LOOP
            End
        End

        AnimationState                =    DYING BURNINGDEATH DEATH_1
            Animation
                AnimationName        =    KUOrcRider_DIEA
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
            End
            Animation
                AnimationName        =    KUOrcRider_DIEB
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
            End
        End

        AnimationState                =    DYING SPLATTED DEATH_1
            Animation                =    splatted
                AnimationName        =    KUOrcRider_LNDA
                AnimationMode        =    ONCE
            End
        End



        AnimationState                =    DYING DEATH_1
            Animation                =    JustDie
                AnimationName        =    KUOrcRider_DIEA
                AnimationMode        =    ONCE
            End
            Animation                =    JustDie
                AnimationName        =    KUOrcRider_DIEB
                AnimationMode        =    ONCE
            End
        End

        AnimationState                =    DYING DEATH_2
            Animation                =    ByeBye
                AnimationName        =    KUOrcRider_IDLC
                AnimationMode        =    LOOP
            End
        End

        AnimationState                =    STUNNED_STANDING_UP
            Animation                =    StandUp
                AnimationName       =    KUOrcRider_GTPA
                AnimationMode       =    ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState                =    STUNNED
            Animation                =    Land
                AnimationName       =    KUOrcRider_LNDA
                AnimationMode       =    ONCE
            End
        End

        AnimationState                        = BURNINGDEATH
            Animation
                AnimationName                = KUOrcRider_MFDA
                AnimationMode                = ONCE
                Distance                    = 50
            End
            Flags                            = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = KUOrcRider_IDLA
                AnimationMode                = LOOP
            End
        End




        AnimationState  = COMING_OUT_OF_FACTORY
            Animation = Being_Built
                AnimationName        = KUOrcRider_RUNA
                AnimationMode        = LOOP
                AnimationBlendTime    = 0
            End
        End

        AnimationState = MOVING FIRING_OR_PREATTACK_A
            Animation = TrotAndFire
                AnimationName = KUOrcRider_RUNB
                AnimationMode = LOOP
            End

        End

        AnimationState                =    TURN_LEFT_HIGH_SPEED
            Animation                =    MTurnLeft
                AnimationName        =    KUOrcRider_TRNL
                AnimationMode        =    LOOP
            End
        End

        AnimationState                =    TURN_RIGHT_HIGH_SPEED
            Animation                =    MTurnRight
                AnimationName        =    KUOrcRider_TRNR
                AnimationMode        =    LOOP
            End
        End

        AnimationState                =    TURN_LEFT
            Animation                =    TurnRight
                AnimationName        =    KUOrcRider_TRNL
                AnimationMode        =    LOOP
                AnimationSpeedFactorRange = 2.0 2.0
            End
        End

        AnimationState                =    TURN_RIGHT
            Animation                =    TurnRight
                AnimationName        =    KUOrcRider_TRNR
                AnimationMode        =    LOOP
                AnimationSpeedFactorRange = 2.0 2.0
            End
        End

        AnimationState                =    MOVING ACCELERATE
            Animation                =    Accelerate
                AnimationName        =    KUOrcRider_ACCL
                AnimationMode        =    ONCE
            End

        End

        AnimationState                =    DECELERATE
            Animation                =    Decelerate
                AnimationName        =    KUOrcRider_DECL
                AnimationMode        =    ONCE
                AnimationSpeedFactorRange = 0.4 0.4
            End

        End

        AnimationState                =    MOVING BACKING_UP
            Animation                =    BackingUpA
                AnimationName        =    KUOrcRider_BAKA
                AnimationMode        =    LOOP
                AnimationSpeedFactorRange = 3.0 3.0
            End
        End

        AnimationState                =    MOVING
            ShareAnimation            =    Yes
            Animation                =    RunA
                AnimationName        =    KUOrcRider_RUNA
                AnimationMode        =    LOOP
            End

        End


        AnimationState                =    BETWEEN_FIRING_SHOTS_A
            Animation                =    BetweenFiringShots
                AnimationName        =    KUOrcRider_IDLA
                AnimationMode        =    LOOP
                AnimationBlendTime    =   10
            End
        End

        AnimationState                =    FIRING_OR_PREATTACK_A
            Animation
                AnimationName        =    KUOrcRider_ATKA
                AnimationMode        =    ONCE
                UseWeaponTiming        =    Yes
                AnimationBlendTime  =    10
            End
            Animation
                AnimationName        =    KUOrcRider_ATKB
                AnimationMode        =    ONCE
                UseWeaponTiming        =    Yes
                AnimationBlendTime  =    10
            End
            Animation
                AnimationName        =    KUOrcRider_ATKC
                AnimationMode        =    ONCE
                UseWeaponTiming        =    Yes
                AnimationBlendTime  =    10
            End
        End

        AnimationState                    = EMOTION_UNCONTROLLABLY_AFRAID
            Animation                    = FERA
                AnimationName            = KUOrcRider_FERA
                AnimationMode            = LOOP
            End
        End

        AnimationState                =    ATTACKING
            Animation                =    AttackA3
                AnimationName        =    KUOrcRider_IDLA
                AnimationMode        =    LOOP
                AnimationBlendTime  =    10
            End
            Animation                =    AttackA3
                AnimationName        =    KUOrcRider_IDLA
                AnimationMode        =    LOOP
                AnimationBlendTime  =    10
            End
        End


        AnimationState = WAR_CHANT
            Animation = Chant
                AnimationName = KUOrcRider_TNTA
                AnimationMode = LOOP
            End
        End


        AnimationState                    = EMOTION_ALERT EMOTION_AFRAID
            Animation                    = Apprehensive
                AnimationName            = KUOrcRider_FERA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = EMOTION_AFRAID
            Animation                    = FERA
                AnimationName            = KUOrcRider_FERA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = EMOTION_TAUNTING
            Animation                    = TNTA
                AnimationName            = KUOrcRider_TNTA
                AnimationMode            = LOOP
            End
            Animation                    = TNTB
                AnimationName            = KUOrcRider_TNTB
                AnimationMode            = LOOP
            End
            Flags                    = RANDOMSTART
        End
        AnimationState                    = EMOTION_POINTING
            Animation                    = Pointing1A
                AnimationName            = KUOrcRider_PNTA
                AnimationMode            = LOOP
            End
            Animation                    = Pointing1B
                AnimationName            = KUOrcRider_PNTB
                AnimationMode            = LOOP
            End
            Flags                    = RANDOMSTART
        End
        AnimationState                    = EMOTION_CELEBRATING
            Animation                   = CHRA
                AnimationName            = KUOrcRider_CHRA
                AnimationMode            = ONCE
            End
            Animation                   = CHRB
                AnimationName            = KUOrcRider_CHRB
                AnimationMode            = ONCE
            End
            Flags                    = RANDOMSTART
        End


        AnimationState                            = EMOTION_ALERT
            StateName                            = STATE_Ready
            Animation                            = ALERT
                AnimationName                    = KUOrcRider_IDLA
                AnimationMode                    = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Selected" then CurDrawableSetTransitionAnimState("Selected_to_Ready") end
            EndScript
        End

        AnimationState                    = RAISING_FLAG
            Animation
                AnimationName            = KUOrcRider_CHRA
                AnimationMode            = LOOP
            End
            Animation
                AnimationName            = KUOrcRider_CHRB
                AnimationMode            = LOOP
            End
        End


        AnimationState                =    SELECTED
            SimilarRestart            =   Yes
            Animation                =    AtAttention
                AnimationName        =    KUOrcRider_ATNB
                AnimationMode        =    LOOP
            End
            StateName                = Selected
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("Idle_to_Selected") end
                if Prev == "STATE_Ready" then CurDrawableSetTransitionAnimState("Ready_to_Selected") end
            EndScript
        End

        IdleAnimationState
            Animation
                AnimationName        =    KUOrcRider_IDLC
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationPriority   =    20
            End
            Animation
                AnimationName        =    KUOrcRider_IDLD
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationPriority   =    1
            End
            Animation
                AnimationName        =    KUOrcRider_IDLB
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationPriority   =    1
            End
            StateName                = Idle
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Selected" then CurDrawableSetTransitionAnimState("Selected_to_Idle") end
            EndScript
        End


        TransitionState       = Selected_to_Idle
            Animation           = ATNE
                AnimationName        =    KUOrcRider_ATNC
                AnimationMode        =    ONCE

            End
        End

        TransitionState       = Idle_to_Selected
            Animation           = ATND
                AnimationName     = KUOrcRider_ATNA
                AnimationMode   =    ONCE

            End
        End

        TransitionState       = Ready_to_Selected
            Animation           = ATNC
                AnimationName     = KUOrcRider_ATNA
                AnimationMode   =    ONCE

            End
        End

        TransitionState       = Selected_to_Ready
            Animation           = ATNCReverse
                AnimationName     = KUOrcRider_ATNC
                AnimationMode   =    ONCE

            End
        End

    End


    Draw = W3DScriptedModelDraw DustEffects
        DefaultModelConditionState
          Model = None
        End
        IdleAnimationState
        End
        AnimationState = MOVING WADING
            ParticleSysBone = None FootstepSlash
        End
        AnimationState = MOVING ACCELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING DECELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING
        End
    End



    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side                = Angmar
    EditorSorting       = UNIT
    ThreatLevel         = GLORFINDEL_THREAT_LEVEL
    ThingClass          = CHARACTER_UNIT
    TransportSlotCount  = TRANSPORTSLOTCOUNT_HERO
    BuildCost           = MEDIUM_HERO_COST
    BuildTime           = MEDIUM_HERO_BUILDTIME
    BountyValue         = ELVEN_GLORFINDEL_BOUNTY_VALUE
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG
    DisplayMeleeDamage  = MEDIUM_HERO_DAMAGE
    MaxSimultaneousOfType = 1
    Scale = 1.1


    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY     AngmarMorchantSpeer
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions        = None
        Armor             = MediumHeroArmor
        DamageFX          = NormalDamageFX
    End


    VisionRange           = 300
    ShroudClearingRange   = 400

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    DisplayName               = OBJECT:AngmarMorchant
    RecruitText               = CONTROLBAR:AngmarMorchantRecruit
    ReviveText                = CONTROLBAR:AngmarMorchantRevive
    Hotkey                    = CONTROLBAR:AngmarMorchantHotkey

    CrusherLevel = 1
    MountedCrusherLevel = 1
    CrushableLevel = 2
    MountedCrushableLevel = 2

    CrushWeapon        = HeroCrush

    MinCrushVelocityPercent     = MINCRUSHVELOCITYPERCENT_HERO
    CrushDecelerationPercent    = CRUSHDECELERATIONPERCENT_HERO

    CrushKnockback = 40
    CrushZFactor = 1.0
    CommandSet        = AngmarMorchantCommandSet_Wolf
    CommandPoints     = 0



    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_GlorfindelBody

    AutoResolveArmor
        Armor = AutoResolve_GlorfindelArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_GlorfindelWeapon
    End






    VoiceAttack                              = MorchantVoiceAttack
    VoiceAttackAir                           = MorchantVoiceAttack
    VoiceAttackCharge                        = MorchantVoiceAttack
    VoiceAttackMachine                       = MorchantVoiceAttack
    VoiceAttackStructure                     = MorchantVoiceAttack
    VoiceFear                                = MorchantVoiceFear
    VoiceCreated                             = MorchantVoiceRecruit
    VoiceFullyCreated                        = MorchantVoiceRecruit
    VoiceGuard                               = MorchantVoiceMove
    VoiceMove                                = MorchantVoiceMove
    VoiceMoveToCamp                          = MorchantVoiceMove
    VoiceMoveWhileAttacking                  = MorchantVoiceMove
    VoicePriority                            = 90
    VoiceRetreatToCastle                     = MorchantVoiceMove
    VoiceSelect                              = MorchantVoiceSelect
    VoiceSelectBattle                        = MorchantVoiceSelectinBattle

    SoundImpact                              = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitElvenTransportShip     = MorchantVoiceMove
        VoiceGarrison                        = MorchantVoiceMove
        VoiceInitiateCaptureBuilding         = MorchantVoiceMove
    End



    CrowdResponseKey = ElfHero

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
    EvaEventDieOwner        = GlorfindelDie

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Elf Elf_Male Unit Infantry Hero

    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:WargMoveFootsteps         Animation:KUOrcRider_RUNA     Frames:0
        AnimationSound = Sound:WargMoveFootsteps         Animation:KUOrcRider_TNL1     Frames:0
        AnimationSound = Sound:WargMoveFootsteps         Animation:KUOrcRider_TNR1     Frames:0
        AnimationSound = Sound:WargMoveFootsteps         Animation:KUOrcRider_TRNL     Frames:0
        AnimationSound = Sound:WargMoveFootsteps         Animation:KUOrcRider_TRNR     Frames:0
        AnimationSound = Sound:WargMoveFootsteps         Animation:KUOrcRider_ACCL     Frames:0

        AnimationSound = Sound:WargRiderTauntCallouts     Animation:KUOrcRider_TNTA     Frames:27

        AnimationSound = Sound:WargTauntCallouts         Animation:KUOrcRider_TNTA     Frames:26
        AnimationSound = Sound:WargTauntCallouts         Animation:KUOrcRider_ATND     Frames:7
        AnimationSound = Sound:WargTauntCallouts         Animation:KUOrcRider_HWLA     Frames:17
        AnimationSound = Sound:WargTauntFootstep         Animation:KUOrcRider_TNTA     Frames:7 12 64 73

        AnimationSound = Sound:WargSaddleFoleySingles     Animation:KUOrcRider_TNTA     Frames:25
        AnimationSound = Sound:WargSaddleFoleySingles     Animation:KUOrcRider_RUNA     Frames:5
        AnimationSound = Sound:WargSaddleFoleySingles     Animation:KUOrcRider_TNL1     Frames:5
        AnimationSound = Sound:WargSaddleFoleySingles     Animation:KUOrcRider_TNR1     Frames:5
        AnimationSound = Sound:WargSaddleFoleySingles     Animation:KUOrcRider_ACCL     Frames:5
        AnimationSound = Sound:WargSaddleFoleySingles     Animation:KUOrcRider_ATNA     Frames:5
        AnimationSound = Sound:WargSaddleFoleySingles     Animation:KUOrcRider_ATND     Frames:5
        AnimationSound = Sound:WargSaddleFoleySingles     Animation:KUOrcRider_GTPA     Frames:5 101
        AnimationSound = Sound:WargSaddleFoleySingles     Animation:KUOrcRider_HWLA     Frames:15
        AnimationSound = Sound:WargSaddleFoleySingles     Animation:KUOrcRider_RDYA     Frames:5
        AnimationSound = Sound:WargSaddleFoleySingles     Animation:KUOrcRider_RDYB     Frames:5

        AnimationSound = Sound:BuildingWargPitRiderDrop    Animation:KUOrcRider_BLDB    Frames:44

        AnimationSound = Sound:BodyFallOrc                 Animation:KUOrcRider_DIEB    Frames:10
        AnimationSound = Sound:BodyFallGenericNoArmor    Animation:KUOrcRider_DIEB    Frames:45
        AnimationSound = Sound:BodyFallOrc                 Animation:KUOrcRider_LNDA    Frames:1 17

        AnimationSound = Sound:BodyFallGeneric1        Animation:KUOrcRider_DIEC    Frames:16
        AnimationSound = Sound:BodyFallGeneric1        Animation:KUOrcRider_DIEC    Frames:30

        AnimationSound = Sound:WargTauntCallouts    Animation:KUOrcRider_PNTC    Frames:7 22
        AnimationSound = Sound:WargTauntCallouts    Animation:KUOrcRider_TNTB    Frames:6 21 34 56 70
        AnimationSound = Sound:WargTauntCallouts    Animation:KUOrcRider_TNTC    Frames:7 44
    End


    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance                = 300
        TauntAndPointUpdateDelay            = 10000
        AddEmotion            =    Doom_Base



        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
         AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base


        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End




    RadarPriority = UNIT
    KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_EACH_OTHER SCORE ARMY_SUMMARY HEAVY_MELEE_HITTER SCARY
    PathfindDiameter = 40.0
    CamouflageDetectionMultiplier = 2.0

    Body = RespawnBody ModuleTag_RespawnBody
        MaxHealth                    = MEDIUM_HERO_HEALTH
        PermanentlyKilledByFilter    = NONE
        DodgePercent                 = HERO_DODGE_PERCENT
    End

    Behavior = AutoHealBehavior ModuleTag_GlorfindelHealing
        StartsActive            = Yes
        HealingAmount            = HERO_HEAL_AMOUNT
        HealingDelay            = 1000
        StartHealingDelay        = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat    = Yes
    End

    #include "..\..\..\includes\DefaultInvisibilityUpdate.inc"

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    #include "..\..\..\includes\CaptureBuilding.inc"







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_MearasEnabler
        SpecialPowerTemplate            = SpecialAbilityToggleberegondWeapon
        TriggeredBy                     = Upgrade_Level_1
        ObeyRechageOnTrigger            = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_MearasStarter
         SpecialPowerTemplate           = SpecialAbilityToggleberegondWeapon
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = Yes
         AvailableAtStart               = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Mearas
         SpecialPowerTemplate           = SpecialAbilityToggleberegondWeapon
         MountedTemplate                = AngmarMorchant
         SynchronizeTimerOnSpecialPower = SpecialAbilityWildShelobPoisonedStinger SpecialAbilityAragornBladeMaster SpecialAbilityKingofDunharg SpecialAbilityAngmarGunstlingDuellant SpecialAbilityArkaneGeheimnisse SpecialAbilityIsengardSharkuManEaterGrab
         UnpackTime                     = OBJECT_TOGGLE_TIME
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End







    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate
        SpecialPowerTemplate     = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack = No
        StartsPaused             = No
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura
        StartsActive     = Yes
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff1
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura2
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_2
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff2
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura3
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_3
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff3
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura4
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_4
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff4
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura5
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_5
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff5
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura6
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_6
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff6
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura7
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_7
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff7
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura8
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_8
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff8
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura9
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_9
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff9
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura10
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_10
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff10
        ObjectFilter     = ANY +HERO -INFANTRY -CAVALRY -STRUCTURE -BASE_FOUNDATION -HORDE
    End


    Behavior = SpecialPowerModule ModuleTag_EyeStarter
        SpecialPowerTemplate        = SpecialAbilityEyeOfSauronAntiCategory
        UpdateModuleStartsAttack    = No
        AntiCategory                = LEADERSHIP BUFF STUN STRUCTURE INNATE_ARMOR
        AttributeModifierAffects    = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION  -HERO -HORDE
        AttributeModifier           = EyeOfSauronAntiCategory
        AttributeModifierRange      = 150.0
        StartsPaused                = No
    End







    Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag
        FireWeaponNugget
            WeaponName = MorchantBannzirkelEffect
            FireDelay = 0
            OneShot = No
        End
        HeroModeTrigger = Yes
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BannzirkelEnabler
        SpecialPowerTemplate       = SpecialAbilityKingofDunharg
        TriggeredBy                = Upgrade_Level_5
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_BannzirkelStarter
        SpecialPowerTemplate       = SpecialAbilityKingofDunharg
        UpdateModuleStartsAttack   = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_BannzirkelUpdate
        SpecialPowerTemplate       = SpecialAbilityKingofDunharg
        UnpackingVariation         = 1
        UnpackTime                 = 1800
        PackTime                   = 1600
        AwardXPForTriggering       = 0
        HeroAttributeModifier      = MorchantBannzirkelDebuff
        HeroEffectDuration         = 30000
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ArkanEnabler
        SpecialPowerTemplate       = SpecialAbilityArkaneGeheimnisse
        TriggeredBy                = Upgrade_Level_10
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLSpecialPowerArkan
        SpecialPowerTemplate       = SpecialAbilityArkaneGeheimnisse
        OCL                        = OCL_MorchantSchwarzeMagie

        CreateLocation             = CREATE_AT_LOCATION
        StartsPaused               = Yes
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SchattenwanderungEnabler
        SpecialPowerTemplate    = SpecialAbilityAngmarGunstlingDuellant
        TriggeredBy             = Upgrade_Level_7
        ObeyRechageOnTrigger    = Yes
    End

    Behavior = WeaponModeSpecialPowerUpdate ModuleTag_SchattenwanderungPowerUpdate
        SpecialPowerTemplate    = SpecialAbilityAngmarGunstlingDuellant
        Duration                = 30000
        AttributeModifier       = MorchantBonus
        LockWeaponSlot          = SECONDARY
        StartsPaused            = Yes
    End

    Behavior = MonitorConditionUpdate ModuleTag_CommandSetSwapperWanderung
        ModelConditionFlags      = WEAPONLOCK_SECONDARY
        ModelConditionCommandSet = AngmarMorchantCommandSet_SchattenModule
    End

    Behavior = SpecialPowerModule ModuleTag_TeleportStarter
        SpecialPowerTemplate     = SpecialAbilityMorchantHeroBlink
        UpdateModuleStartsAttack = Yes
        TriggerFX                = FX_BlinkMorchant
        StartsPaused             = No
    End

    Behavior = TeleportSpecialAbilityUpdate ModuleTag_TeleportUpdate
        SpecialPowerTemplate     = SpecialAbilityMorchantHeroBlink
        UnpackingVariation       = 1
        UnpackTime               = 100
        PackTime                 = 100
        ApproachRequiresLOS      = No
        BusyForDuration          = 100
        DestinationWeaponName    = CreateaHeroBlinkDestination.
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_PoisonedStingerEnabler
        SpecialPowerTemplate     = SpecialAbilityWildShelobPoisonedStinger
        TriggeredBy              = Upgrade_Level_6
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_PoisonedStingerStarter
        SpecialPowerTemplate     = SpecialAbilityWildShelobPoisonedStinger
        UpdateModuleStartsAttack = Yes
        StartsPaused             = Yes
        InitiateSound            = ShelobVoxPoisonStinger
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_PoisonedStingerUpdate
        SpecialPowerTemplate     = SpecialAbilityWildShelobPoisonedStinger
        SkipContinue             = Yes
        UnpackTime               = 250
        PreparationTime          = 500
        MustFinishAbility        = Yes
        AwardXPForTriggering     = 0
        StartAbilityRange        = 15.0
        SpecialWeapon            = WildShelobPoisonedStinger
        WhichSpecialWeapon       = 1
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ManEaterEnabler
        SpecialPowerTemplate        = SpecialAbilityIsengardSharkuManEaterGrab
        TriggeredBy                 = Upgrade_Level_7
        ObeyRechageOnTrigger        = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_SpecialPowerModuleGrabStarter
        SpecialPowerTemplate        = SpecialAbilityIsengardSharkuManEaterGrab
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = Yes
        InitiateSound               = SharkuManeaterStartMS
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WeaponFireSpecialAbilityUpdateGrab
        SpecialPowerTemplate        = SpecialAbilityIsengardSharkuManEaterGrab
        SkipContinue                = Yes
        UnpackTime                  = 933

        StartAbilityRange           = 8.0

        SpecialWeapon               = IsengardSharkuManEaterGrab
        ChainedButton               = Command_SpecialAbilityIsengardSharkuManEaterFlingPassenger
        CustomAnimAndDuration       = AnimState:EATING AnimTime:3300

        TriggerAttributeModifier    = SharkuManEater
        AttributeModifierDuration   = 20000
        TriggerSound                = SharkuManEaterEatingMS
        BusyForDuration             = 2000
    End

    Behavior = PlayerHealSpecialPower ModuleTag_SpecialPowerModuleFlingPassengerStarter
        SpecialPowerTemplate        = SpecialAbilityIsengardSharkuManEaterDrop
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = No
        HealAmount                  = 1.0
        HealAsPercent               = Yes
        HealAffects                 = HERO
        HealRadius                  = 0.0
        HealFX                      = FX_SpellHealUnitHealBuff
    End

    Behavior = FlingPassengerSpecialAbilityUpdate ModuleTag_FlingPassengerSpecialAbilityUpdate
        SpecialPowerTemplate         = SpecialAbilityIsengardSharkuManEaterDrop
        UnpackTime                   = 1250
        FlingPassengerVelocity       = X:0 Y:0 Z:0
        FlingPassengerLandingWarhead = IsengardSharkuManEaterWarhead
    End




    Behavior = TransportContain ModuleTag_09
        ObjectStatusOfContained = UNSELECTABLE
        PassengerFilter            = NONE +INFANTRY -HERO

        Slots                    = 1
        ShowPips                = No
        AllowEnemiesInside        = Yes
        AllowNeutralInside        = Yes
        AllowAlliesInside        = No

        DestroyRidersWhoAreNotFreeToExit = Yes
        ForceOrientationContainer = No
        PassengerBonePrefix = PassengerBone:B_PASSENGER01        KindOf:INFANTRY

    End


    Behavior = QueueProductionExitUpdate ModuleTag_11
        UnitCreatePoint         = X:-30.0 Y:0.0 Z:0.0
        NaturalRallyPoint       = X:-30 Y:0.0 Z:0.0
        ExitDelay               = 250
        NoExitPath              = Yes
    End

    Behavior = SpawnBehavior ModuleTag_SpawnFighters
        SpawnNumber             = 5
        InitialBurst            = 5
        SpawnTemplateName       = AngmarDireWolf_Sauron
        SpawnReplaceDelay       = 15000
        FadeInTime              = 1000
        SpawnInsideBuilding     = Yes
    End


    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        CanAttackWhileContained    = Yes
    End


    LocomotorSet
        Locomotor = WargLocomotor
        Condition = SET_NORMAL
        Speed     = 100
    End



    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 2000
    End


    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes           = ALL
        SinkDelay            = 5000
        SinkRate             = 10.0
        DestructionDelay     = 1800
        Sound                = INITIAL MorchantVoiceDie
    End



    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End





    Behavior = PassiveAreaEffectBehavior ModuleTag_SplashOfHealingWater_Ahh
        UpgradeRequired      = Upgrade_TestBuilding_2
        EffectRadius         = 150
        PingDelay            = 2000
        HealPercentPerSecond = 3%
        AllowFilter          = ANY +INFANTRY +CAVALRY +HERO -MACHINE +MONSTER -IMMOBILE +DOZER
        NonStackable         = Yes
        HealFX               = FX_SpellHealUnitBuffAngmarCaliz
    End

    Behavior = FireWeaponUpdate ModuleTag_WeaponFiring
        FireWeaponNugget
            WeaponName = MorchantMachtHKModifierWeapon
            Offset = X:0 Y:0 Z:0
            FireDelay = 0
            OneShot = No
        End
    End

    Behavior = ObjectCreationUpgrade ModuleTag_IamAI4
        TriggeredBy  = Upgrade_EasyAISinglePlayer Upgrade_EasyAIMultiPlayer Upgrade_MediumAISinglePlayer Upgrade_MediumAIMultiPlayer Upgrade_HardAISinglePlayer Upgrade_HardAIMultiPlayer Upgrade_BrutalAISinglePlayer Upgrade_BrutalAIMultiPlayer
        Delay        = 320000
        GrantUpgrade = Upgrade_TestBuilding_2
    End





    Behavior = AISpecialPowerUpdate GlorfindelToggleMountedAI
        CommandButtonName = Command_MountHorseGlorfindel
        SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_MOUNTED
    End

    Behavior = AISpecialPowerUpdate BladeOfPurityAI
        CommandButtonName = Command_SpecialAbilityGlorfindelBladeOfPurity
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate WindRiderAI
        CommandButtonName = Command_SpecialAbilityGlorfindelWindRider
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate StarLightAI
        CommandButtonName = Command_GlorfindelStarlight
        SpecialPowerAIType = AI_SPECIAL_POWER_HEAL_AOE
    End

    Behavior = AISpecialPowerUpdate ThunderboltAI
        CommandButtonName = Command_GlorfindelHopeLight
        SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
    End



    Geometry            = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryHeight        = 25
    GeometryIsSmall        = Yes
    Shadow                = SHADOW_DECAL
    ShadowSizeX            = 20
    ShadowSizeY            = 20
    ShadowTexture        = ShadowI
End

Object AngmarMorchantSpider



    SelectPortrait = HPMorchant


    ButtonImage = HIMorchant

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_Glorfindel

     EquivalentTo = AngmarMorchant

    Draw = W3DScriptedModelDraw ModuleTag_DRAW

     RandomTexture = kumorquant_gntl.tga  0 chhw_sm_gear_02.tga

       ExtraPublicBone    = B_PASSENGER01


        DefaultModelConditionState
            Model                       = kumorch_spd
            Skeleton                    = MUSpidRdr_SKL
        End





        AnimationState                        = CLIMBING
            StateName                        = STATE_Climbing
            Animation                        = Climbing
                AnimationName                = MUSpidRdr_WALB
                AnimationMode                = LOOP
                AnimationBlendTime            = 10
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToClimbing") return end

            EndScript
        End
        TransitionState = Trans_RunningToClimbing
            Animation = Transition
                AnimationName = MUSpidRdr_WALC
                AnimationMode = ONCE
            End
        End
        AnimationState                        = RAPPELLING
            StateName                        = STATE_Rappelling
            Animation                        = Rapelling
                AnimationName                = MUSpidRdr_WALD
                AnimationMode                = LOOP
                AnimationBlendTime            = 10
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Running"  then CurDrawableSetTransitionAnimState("Trans_RunningToRappelling") return end

            EndScript
        End
        TransitionState = Trans_RunningToRappelling
            Animation = Transition
                AnimationName = MUSpidRdr_WALG
                AnimationMode = ONCE
            End
        End
        TransitionState = Trans_ClimbingToRunning
            Animation = Transition
                AnimationName = MUSpidRdr_WALF
                AnimationMode = ONCE
            End
        End
        TransitionState = Trans_RappellingToRunning
            Animation = Transition
                AnimationName = MUSpidRdr_WALE
                AnimationMode = ONCE
            End
        End




        AnimationState                    = PASSENGER WEAPONSET_TOGGLE_1
            StateName                    = STATE_Grabbed
            Animation                    = Bow
                AnimationName            = MUSpidRdr_FLYB
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = PASSENGER
            StateName                    = STATE_Grabbed
            Animation                    = Sword
                AnimationName            = MUSpidRdr_FLYA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = FREEFALL WEAPONSET_TOGGLE_1
            StateName                    = STATE_Falling
            Animation                    = Bow
                AnimationName            = MUSpidRdr_FLYB
                AnimationMode            = LOOP
                AnimationBlendTime        = 10
            End
        End

        AnimationState                    = FREEFALL
            StateName                    = STATE_Falling
            Animation                    = Sword
                AnimationName            = MUSpidRdr_FLYA
                AnimationMode            = LOOP
                AnimationBlendTime        = 10
            End
        End

        AnimationState                    = STUNNED_FLAILING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Fly
            Animation
                AnimationName           = MUSpidRdr_FLYB
                AnimationMode           = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES2
        End

        AnimationState                    = STUNNED_FLAILING
            StateName                    = STATE_Fly
            Animation                   = Sword
                AnimationName           = MUSpidRdr_FLYA
                AnimationMode           = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES2
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "Ready_Bow" or PrevState == "Moving_Bow" or PrevState == "Bored_Bow"
                then
                    CurDrawableShowSubObject("arrrow")
                    return "WantSword"
                elseif PrevState == "STATE_Fly"
                then
                    if PrevAnim == "Bow" or PrevAnim == "WantSword"
                    then
                        CurDrawableShowSubObject("arrrow")
                        return "WantSword"
                    end
                end

                CurDrawableHideSubObject("arrrow")
                return "Sword"
            EndScript
        End

        AnimationState                    = DYING BURNINGDEATH
            Animation                    = Bow
                AnimationName            = MUSpidRdr_DIEB
                AnimationMode            = ONCE
                AnimationBlendTime        = 10
            End
        End

        AnimationState                    = DYING SPLATTED WEAPONSET_TOGGLE_1
            StateName                    = STATE_Dead
            Animation                    = Bow
                AnimationName            = MUSpidRdr_LNDB
                AnimationMode            = ONCE
            End
        End

        AnimationState                    = DYING  SPLATTED
            StateName                    = STATE_Dead
            Animation                    = Sword
                AnimationName            = MUSpidRdr_LNDA
                AnimationMode            = ONCE
            End
        End



        AnimationState                    = DYING WEAPONSET_TOGGLE_1
            Animation                   = Bow1
                AnimationName           = MUSpidRdr_DIEB
                AnimationMode           = ONCE
            End
            Animation                   = Bow2
                AnimationName           = MUSpidRdr_DIED
                AnimationMode           = ONCE
            End
            Animation                   = WantBow
                AnimationName           = MUSpidRdr_LNDB
                AnimationMode           = ONCE
            End
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()

                if PrevState == "STATE_Fly"
                then
                    CurDrawableHideSubObject("arrrow")
                    return "WantBow"
                end

                if GetClientRandomNumberReal(0,2) < 1
                then
                    CurDrawableShowSubObject("arrrow")
                    return "Bow1"
                else
                    CurDrawableShowSubObject("arrrow")
                    return "Bow2"
                end
            EndScript
        End

        AnimationState                    = DYING
            Animation                   = Sword1
                AnimationName           = MUSpidRdr_DIEA
                AnimationMode           = ONCE
            End
            Animation                   = WantSword
                AnimationName           = MUSpidRdr_DIEC
                AnimationMode           = ONCE
            End

            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_Fly"
                then
                    CurDrawableShowSubObject("arrrow")
                    return "WantSword"
                end

                CurDrawableHideSubObject("arrrow")
                if GetClientRandomNumberReal(0,2) < 1
                then
                    return "Sword1"
                else
                    return "WantSword"
                end
            EndScript
        End

        AnimationState                    = STUNNED_STANDING_UP WEAPONSET_TOGGLE_1
            StateName                    = STATE_GetUp
            Animation                   = Bow
                AnimationName           = MUSpidRdr_GTPB
                AnimationMode           = ONCE
            End
            Animation                   = WantBow
                AnimationName           = MUSpidRdr_GTPA
                AnimationMode           = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_GetUp" or PrevState == "STATE_Land"
                then
                    if PrevAnim == "WantBow" or PrevAnim == "Sword"
                    then
                        CurDrawableHideSubObject("arrrow")
                        return "WantBow"
                    end
                else
                    CurDrawableShowSubObject("arrrow")
                    return "Bow"
                end
            EndScript
        End

        AnimationState                    = STUNNED_STANDING_UP
            StateName                    = STATE_GetUp
            Animation                   = Sword
                AnimationName           = MUSpidRdr_GTPA
                AnimationMode           = ONCE
            End
            Animation                   = WantSword
                AnimationName           = MUSpidRdr_GTPB
                AnimationMode           = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_GetUp" or PrevState == "STATE_Land"
                then
                    if PrevAnim == "Bow" or PrevAnim == "WantSword"
                    then
                        CurDrawableShowSubObject("arrrow")
                        return "WantSword"
                    end
                end

                CurDrawableHideSubObject("arrrow")
                return "Sword"
            EndScript
        End

        AnimationState                    = STUNNED WEAPONSET_TOGGLE_1
            StateName                    = STATE_Land
            Animation                   = Bow
                AnimationName           = MUSpidRdr_LNDA
                AnimationMode           = ONCE
            End
            Animation                   = WantBow
                AnimationName           = MUSpidRdr_LNDB
                AnimationMode           = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES3
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_Fly"
                then
                    if PrevAnim == "WantBow" or PrevAnim == "Sword"
                    then
                        CurDrawableHideSubObject("arrrow")
                        return "WantBow"
                    end
                end

                CurDrawableShowSubObject("arrrow")
                return "Bow"
            EndScript
        End

        AnimationState                    = STUNNED
            StateName                    = STATE_Land
            Animation                   = Sword
                AnimationName           = MUSpidRdr_LNDA
                AnimationMode           = ONCE
            End
            Animation                   = WantSword
                AnimationName           = MUSpidRdr_LNDB
                AnimationMode           = ONCE
            End
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                PrevAnim = CurDrawablePrevAnimation()
                if PrevState == "STATE_Fly"
                then
                    if PrevAnim == "WantSword" or PrevAnim == "Bow"
                    then
                        CurDrawableShowSubObject("arrrow")
                        return "WantSword"
                    end
                end
                Flags                        = MAINTAIN_FRAME_ACROSS_STATES3
                CurDrawableHideSubObject("arrrow")
                return "Sword"
            EndScript
        End

        AnimationState                        = BURNINGDEATH
            Animation
                AnimationName                = MUSpidRdr_MFDA
                AnimationMode                = LOOP
                Distance                    = 55
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = MUSpidRdr_IDLA
                AnimationMode                = LOOP
            End
        End

        AnimationState                    = ATTACKING TURN_LEFT WEAPONSET_TOGGLE_1
            StateName                    = Moving_Bow
            SimilarRestart                = Yes
            Animation                   = run_s
                AnimationName           = MUSpidRdr_TNLBH
                AnimationMode           = LOOP
            End
        End

        AnimationState                    = ATTACKING TURN_LEFT
            StateName                    = Moving_Sword
            SimilarRestart                = Yes
            Animation                   = run_s
                AnimationName           = MUSpidRdr_TRNLH
                AnimationMode           = LOOP
            End
        End

        AnimationState                    = ATTACKING TURN_RIGHT WEAPONSET_TOGGLE_1
            StateName                    = Moving_Bow
            SimilarRestart                = Yes
            Animation                   = run_s
                AnimationName           = MUSpidRdr_TNRBH
                AnimationMode           = LOOP
            End
        End

        AnimationState                    = ATTACKING TURN_RIGHT
            StateName                    = Moving_Sword
            SimilarRestart                = Yes
            Animation                   = run_s
                AnimationName           = MUSpidRdr_TRNRH
                AnimationMode           = LOOP
            End
        End

















        AnimationState                    = FIRING_OR_PREATTACK_A WEAPONSET_TOGGLE_1
            Animation
                AnimationName            = MUSpidRdr_ATKB
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
            End

            Flags                        = MAINTAIN_FRAME_ACROSS_STATES
            FrameForPristineBonePositions = 16

            BeginScript
                CurDrawableShowSubObject("arrrow")
            EndScript
        End

        AnimationState                    =    BETWEEN_FIRING_SHOTS_A WEAPONSET_TOGGLE_1
            Animation                    =    BetweenFiringShots
                AnimationName            =    MUSpidRdr_IDLB
                AnimationMode            =    LOOP
                AnimationBlendTime        =   15
            End
        End

        AnimationState                    = FIRING_OR_PREATTACK_A MOVING
            StateName                    = Ready_Sword

            Animation                   = AttackWithSwordWhileMoving
                AnimationName           = MUSpidRdr_ATRA
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            BeginScript
                CurDrawableHideSubObject("arrrow")
            EndScript
        End

        AnimationState                    = FIRING_OR_PREATTACK_A
            StateName                    = Ready_Sword

            Animation                   = AttackWithSwordA
                AnimationName           = MUSpidRdr_ATKA
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            Animation                   = AttackWithSwordB
                AnimationName           = MUSpidRdr_ATKC
                AnimationMode           = ONCE
                UseWeaponTiming            = Yes
            End
            BeginScript
                CurDrawableHideSubObject("arrrow")
            EndScript
        End




        AnimationState                    = MOVING BACKING_UP WEAPONSET_TOGGLE_1
            StateName                    = STATE_BackingUp
            Animation                    = Bow
                AnimationName            = MUSpidRdr_BAKB
                AnimationMode            = LOOP
            End
            Animation                    = WantBow
                AnimationName            = MUSpidRdr_BAKA
                AnimationMode            = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                CurDrawableShowSubObject("arrrow")
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                if PrevState == "STATE_BackingUp"
                then
                    if PrevAnim == "WantBow" or PrevAnim == "Sword"
                    then
                        return "WantBow"
                    end
                end

                return "Bow"
            EndScript
        End

        AnimationState                    = MOVING BACKING_UP
            StateName                    = STATE_BackingUp
            Animation                    = Sword
                AnimationName            = MUSpidRdr_BAKA
                AnimationMode            = LOOP
            End
            Animation                    = WantSword
                AnimationName            = MUSpidRdr_BAKB
                AnimationMode            = LOOP
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES4
            BeginScript
                CurDrawableHideSubObject("arrrow")
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                if PrevState == "STATE_BackingUp"
                then
                    if PrevAnim == "Bow" or PrevAnim == "WantSword"
                    then
                        return "WantSword"
                    end
                end

                return "Sword"
            EndScript
        End



        AnimationState                    = TURN_LEFT_HIGH_SPEED WEAPONSET_TOGGLE_1
            StateName                    = Moving_Bow
            SimilarRestart                = Yes
            Animation                   = run_s
                AnimationName           = MUSpidRdr_TNLBH
                AnimationMode           = LOOP
            End
        End

        AnimationState                    = TURN_LEFT_HIGH_SPEED
            StateName                    = Moving_Sword
            SimilarRestart                = Yes
            Animation                   = run_s
                AnimationName           = MUSpidRdr_TRNLH
                AnimationMode           = LOOP
            End
        End

        AnimationState                    = TURN_RIGHT_HIGH_SPEED  WEAPONSET_TOGGLE_1
            StateName                    = Moving_Bow
            SimilarRestart                = Yes
            Animation                   = run_s
                AnimationName           = MUSpidRdr_TNRBH
                AnimationMode           = LOOP
            End
        End

        AnimationState                    = TURN_RIGHT_HIGH_SPEED
            StateName                    = Moving_Sword
            SimilarRestart                = Yes
            Animation                   = run_s
                AnimationName           = MUSpidRdr_TRNRH
                AnimationMode           = LOOP
            End
        End

        AnimationState                    = TURN_LEFT  WEAPONSET_TOGGLE_1
            StateName                    = Moving_Bow
            SimilarRestart                = Yes
            Animation                   = run_s
                AnimationName           = MUSpidRdr_TNLBH
                AnimationMode           = LOOP
            End
        End

        AnimationState                    = TURN_LEFT
            StateName                    = Moving_Sword
            SimilarRestart                = Yes
            Animation                   = run_s
                AnimationName           = MUSpidRdr_TRNLH
                AnimationMode           = LOOP
            End
        End

        AnimationState                    = TURN_RIGHT WEAPONSET_TOGGLE_1
            StateName                    = Moving_Bow
            SimilarRestart                = Yes
            Animation                   = run_s
                AnimationName           = MUSpidRdr_TNRBH
                AnimationMode           = LOOP
            End
        End

        AnimationState                    = TURN_RIGHT
            StateName                    = Moving_Sword
            SimilarRestart                = Yes
            Animation                   = run_s
                AnimationName           = MUSpidRdr_TRNRH
                AnimationMode           = LOOP
            End
        End





        AnimationState                    = MOVING WEAPONSET_TOGGLE_1
            StateName                    = Moving_Bow
            SimilarRestart                = Yes
            Animation                   = run_b
                AnimationName           = MUSpidRdr_RUND
                AnimationMode           = LOOP
            End
            Animation                    = finishrun_s
                AnimationName           = MUSpidRdr_RUNC
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
            End
            Animation                    = runtrans_sb
                AnimationName           = MUSpidRdr_RUNC
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
            End
            Animation                    = runtrans_bs_finish
                AnimationName           = MUSpidRdr_RUNC
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
            End
            Animation                    = runnoblend_b
                AnimationName           = MUSpidRdr_RUND
                AnimationMode           = LOOP
                AnimationBlendTime        = 0
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE

            BeginScript
                CurDrawableShowSubObject("arrrow")
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()



                Prev = CurDrawablePrevAnimationState()
                if PrevState == "STATE_Climbing"
                then
                    CurDrawableSetTransitionAnimState("Trans_ClimbingToRunning")
                    return
                elseif PrevState == "STATE_Rappelling"
                then
                    CurDrawableSetTransitionAnimState("Trans_RappellingToRunning")
                    return
                elseif PrevState == "Moving_Sword"
                then
                    if PrevAnim == "runtrans_bs"
                    then
                        return "runtrans_bs_finish"
                    elseif PrevAnim == "finishrun_b"
                    then
                        return "runnoblend_b"
                    else
                        return "finishrun_s"
                    end
                elseif PrevAnim == "finishrun_s" or PrevAnim == "runtrans_bs_finish" or PrevAnim == "WantBow"
                then
                    return "runtrans_sb"
                elseif PrevAnim == "runtrans_sb" or PrevAnim == "run_b" or PrevAnim == "runnoblend_b"
                then
                    return "runnoblend_b"
                else
                    return "run_b"
                end
            EndScript
        End

        AnimationState                    = MOVING
            StateName                    = Moving_Sword
            SimilarRestart                = Yes
            Animation                   = run_s
                AnimationName           = MUSpidRdr_RUNC
                AnimationMode           = LOOP
            End
            Animation                    = finishrun_b
                AnimationName           = MUSpidRdr_RUND
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
            End
            Animation                    = runtrans_bs
                AnimationName           = MUSpidRdr_RUND
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
            End
            Animation                    = runtrans_sb_finish
                AnimationName           = MUSpidRdr_RUND
                AnimationMode           = ONCE
                AnimationBlendTime        = 0
            End
            Animation                    = runnoblend_s
                AnimationName           = MUSpidRdr_RUNC
                AnimationMode           = LOOP
                AnimationBlendTime        = 0
            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevAnim    = CurDrawablePrevAnimation()
                PrevState    = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrrow")

                if PrevState == "Moving_Bow"
                then
                    if PrevAnim == "runtrans_sb"
                    then
                        return "runtrans_sb_finish"
                    elseif PrevAnim == "finishrun_s"
                    then
                        return "runnoblend_s"
                    else
                        return "finishrun_b"
                    end
                elseif PrevAnim == "finishrun_b" or PrevAnim == "runtrans_sb_finish" or PrevAnim == "WantSword"
                then
                    return "runtrans_bs"
                elseif PrevAnim == "runtrans_bs" or PrevAnim == "run_s" or PrevAnim == "runnoblend_s"
                then
                    return "runnoblend_s"
                else
                    return "run_s"
                end
            EndScript
        End




        AnimationState                    = CONTINUOUS_FIRE_MEAN
            Animation                    = HangFrameWhileCoasting
                AnimationName            = MUSpidRdr_ATKB
                AnimationMode            = LOOP
                AnimationBlendTime        = 0
            End
            Flags                        = START_FRAME_LAST

            BeginScript
                CurDrawableShowSubObject("arrrow")
                if CurDrawablePrevAnimationState() == "STATE_Firing" then CurDrawableAllowToContinue() end
            EndScript









        End

        AnimationState                    = CONTINUOUS_FIRE_SLOW
            StateName                    = Ready_Bow
            Animation                    = PutAwayArrow
                AnimationName            = MUSpidRdr_ATKB
                AnimationMode            = ONCE
            End

            BeginScript
                CurDrawableShowSubObject("arrrow")
            EndScript
        End



        AnimationState                    = ATTACKING WEAPONSET_TOGGLE_1
            StateName                    = Ready_Bow

            Animation                    = IDLB
                AnimationName            = MUSpidRdr_IDLB
                AnimationMode            = LOOP
            End

            BeginScript
                CurDrawableShowSubObject("arrrow")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                end
            EndScript
        End



        AnimationState                    = EMOTION_UNCONTROLLABLY_AFRAID  WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = MUSpidRdr_FERB
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
            End
            Animation                    = Bow2
                AnimationName            = MUSpidRdr_FERB
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrrow")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                end
            EndScript
        End
            AnimationState                    = EMOTION_UNCONTROLLABLY_AFRAID
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = MUSpidRdr_FERA
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = MUSpidRdr_FERB
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrrow")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                end
            EndScript
        End




        AnimationState                    = EMOTION_ALERT WEAPONSET_TOGGLE_1
            StateName                    = Ready_Bow

            Animation                    = Alert_1
                AnimationName            = MUSpidRdr_IDLB
                AnimationMode            = LOOP
            End

            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrrow")
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                end
            EndScript
        End
        AnimationState                    = ENGAGED WEAPONSET_TOGGLE_1
            StateName                    = Ready_Bow

            Animation                    = Alert_1
                AnimationName            = MUSpidRdr_IDLB
                AnimationMode            = LOOP
            End

            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrrow")
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                end
            EndScript
        End

        AnimationState                    = EMOTION_ALERT
            StateName                    = Ready_Sword

            Animation                    = Alert_1
                AnimationName            = MUSpidRdr_IDLA
                AnimationMode            = LOOP
            End

            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrrow")
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                end
            EndScript
        End
        AnimationState                    = ENGAGED
            StateName                    = Ready_Sword

            Animation                    = Alert_1
                AnimationName            = MUSpidRdr_IDLA
                AnimationMode            = LOOP
            End

            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrrow")
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                end
            EndScript
        End




        AnimationState                    = EMOTION_AFRAID  WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = MUSpidRdr_FERB
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
            End
            Animation                    = Bow2
                AnimationName            = MUSpidRdr_FERB
                AnimationMode            = ONCE
                AnimationBlendTime        = 15
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrrow")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                end
            EndScript
        End

        AnimationState                    = EMOTION_AFRAID
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = MUSpidRdr_FERA
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = MUSpidRdr_FERA
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrrow")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                end
            EndScript
        End

        AnimationState                    = EMOTION_POINTING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = MUSpidRdr_PNTB
                AnimationMode            = ONCE
            End
            Animation                    = Bow2
                AnimationName            = MUSpidRdr_PNTB
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrrow")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                end
            EndScript
        End

        AnimationState                    = EMOTION_POINTING
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = MUSpidRdr_PNTA
                AnimationMode            = ONCE
            End
            Animation                    = Sword2
                AnimationName            = MUSpidRdr_PNTA
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrrow")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                end
            EndScript
        End


        AnimationState                    = ATTACKING
            StateName                    = Ready_Sword

            Animation                    = Alert_1
                AnimationName            = MUSpidRdr_IDLA
                AnimationMode            = LOOP
            End

            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrrow")
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                end
            EndScript
        End



        AnimationState                =    SELECTED  WEAPONSET_TOGGLE_1
            StateName               =    Selected_Bow

            Animation                =    ATNE
                AnimationName        =    MUSpidRdr_ATNF
                AnimationMode        =    LOOP
            End

            BeginScript
                CurDrawableShowSubObject("arrrow")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Emotion_Bow" or Prev == "STATE_Emotion_Sword" then CurDrawableAllowToContinue() end
                if Prev == "Bored_Bow" then CurDrawableSetTransitionAnimState("TRANS_BS_Bow")                end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Selected")
                end
            EndScript
        End

        AnimationState                    = RAISING_FLAG WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = MUSpidRdr_CHRA
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrrow")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                end
            EndScript
        End

        AnimationState                    = RAISING_FLAG
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = MUSpidRdr_CHRB
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrrow")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                end
            EndScript
        End

        AnimationState                =    SELECTED
            StateName                =    Selected_Sword

            Animation                =    ATNA
                AnimationName        =    MUSpidRdr_ATNB
                AnimationMode        =    LOOP
            End

            BeginScript
                CurDrawableHideSubObject("arrrow")

                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Emotion_Bow" or Prev == "STATE_Emotion_Sword" then CurDrawableAllowToContinue() end
                if Prev == "Bored_Sword"        then CurDrawableSetTransitionAnimState("TRANS_BS_Sword")        end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Selected")
                end

            EndScript
        End




        AnimationState                         = HIT_REACTION HIT_LEVEL_1 WEAPONSET_TOGGLE_1
            StateName                        = Bored_Bow
            Animation                         = Hit_Level_1_a
                AnimationName                = MUSpidRdr_HITB
                AnimationMode                 = ONCE
            End
        End

        AnimationState                        = HIT_REACTION HIT_LEVEL_1
            StateName                        = Bored_Sword
            Animation                        = Hit_Level_1_a
                AnimationName                = MUSpidRdr_HITA
                AnimationMode                = ONCE
            End
        End



        AnimationState                    = EMOTION_TAUNTING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = MUSpidRdr_TNTB
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrrow")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                end
            EndScript
        End

        AnimationState                    = EMOTION_TAUNTING
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = MUSpidRdr_TNTA
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrrow")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                end
            EndScript
        End



        AnimationState                    = EMOTION_CELEBRATING WEAPONSET_TOGGLE_1
            StateName                    = STATE_Emotion_Bow
            Animation                    = Bow
                AnimationName            = MUSpidRdr_CHRA
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableShowSubObject("arrrow")

                if PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                end
            EndScript
        End

        AnimationState                    = EMOTION_CELEBRATING
            StateName                    = STATE_Emotion_Sword
            Animation                    = Sword
                AnimationName            = MUSpidRdr_CHRB
                AnimationMode            = ONCE
            End
            Flags                        = MAINTAIN_FRAME_ACROSS_STATES RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                PrevState = CurDrawablePrevAnimationState()
                CurDrawableHideSubObject("arrrow")

                if PrevState == "STATE_Emotion_Bow"
                then
                    CurDrawableAllowToContinue()
                    if( CurDrawablePrevAnimFraction() > .89 )
                    then
                        CurDrawableSetTransitionAnimState("TRANS_BowToSword_Ready")
                    end
                elseif PrevState == "STATE_Emotion_Sword"
                then
                    CurDrawableAllowToContinue()
                end
            EndScript
        End



        IdleAnimationState
            StateName                    = Bored_Sword

            Animation                   = Idle_Sword1
                AnimationName           = MUSpidRdr_IDLA
                AnimationMode           = ONCE
            End
            Animation                   = Idle_Sword2
                AnimationName           = MUSpidRdr_IDLA
                AnimationMode           = ONCE
            End
            Animation                   = Idle_Sword3
                AnimationName           = MUSpidRdr_IDLA
                AnimationMode           = ONCE
            End
            Animation                    = IdleNoFidget
                AnimationName            = MUSpidRdr_IDLA
                AnimationMode            = ONCE
                AnimationPriority        = 20
            End
            Animation                    = IdleNoFidget2
                AnimationName            = MUSpidRdr_IDLA
                AnimationMode            = ONCE
                AnimationPriority        = 0
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                CurDrawableHideSubObject("arrrow")

                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "TRANS_SB_Sword"        then return "IdleNoFidget" end
                if Prev == "Selected_Sword"        then CurDrawableSetTransitionAnimState("TRANS_SB_Sword")        end
                if Prev == "Selected_Bow" or Prev == "Moving_Bow" or Prev == "Ready_Bow" or Prev == "Bored_Bow" or PrevAnim == "WantSword"
                then
                    CurDrawableSetTransitionAnimState("TRANS_BowToSword_Selected")
                end
            EndScript
        End

        AnimationState                    = WEAPONSET_TOGGLE_1
            StateName                    = Bored_Bow

            Animation                    = IdleBowB
                AnimationName            = MUSpidRdr_IDLB
                AnimationMode            = ONCE
            End
            Animation                    = IdleBowD
                AnimationName            = MUSpidRdr_IDLB
                AnimationMode            = ONCE
            End
            Animation                    = IdleNoFidget
                AnimationName            = MUSpidRdr_IDLB
                AnimationMode            = ONCE
                AnimationPriority        = 20
            End
            Animation                    = IdleNoFidget2
                AnimationName            = MUSpidRdr_IDLB
                AnimationMode            = ONCE
                AnimationPriority        = 10
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                CurDrawableShowSubObject("arrrow")
                PrevAnim = CurDrawablePrevAnimation()
                Prev = CurDrawablePrevAnimationState()
                if Prev == "TRANS_SB_Bow" then return "IdleNoFidget" end
                if Prev == "Selected_Bow"        then CurDrawableSetTransitionAnimState("TRANS_SB_Bow")        end
                if Prev == "Selected_Sword" or Prev == "Moving_Sword" or Prev == "Ready_Sword" or Prev == "Bored_Sword" or PrevAnim == "WantBow"
                then
                    CurDrawableSetTransitionAnimState("TRANS_SwordToBow_Selected")
                end
            EndScript
        End




        TransitionState                   = TRANS_BS_Bow
            Animation                   = ATND
                AnimationName             = MUSpidRdr_ATNG
                AnimationMode             = ONCE_BACKWARDS
                AnimationBlendTime        = 10
            End
            Flags                        = START_FRAME_LAST
        End

        TransitionState                   = TRANS_SB_Bow
            Animation                   = ATND
                AnimationName             = MUSpidRdr_ATNG
                AnimationMode             = ONCE
            End
        End



        TransitionState                   = TRANS_BS_Sword
            Animation
                AnimationName             = MUSpidRdr_ATNC
                AnimationMode             = ONCE_BACKWARDS
            End
            Flags                        = START_FRAME_LAST
        End

        TransitionState                   = TRANS_SB_Sword
            Animation                   = ATNA
                AnimationName             = MUSpidRdr_ATNC
                AnimationMode             = ONCE
            End
        End



        TransitionState                   = TRANS_BowToSword_Ready
            Animation                   = DrawSwords
                AnimationName           = MUSpidRdr_TGLB
                AnimationMode           = ONCE
            End
        End

        TransitionState                   = TRANS_SwordToBow_Ready
            Animation                   = DrawBow
                AnimationName           = MUSpidRdr_TGLA
                AnimationMode           = ONCE
            End
        End

        TransitionState                   = TRANS_BowToSword_Selected
            Animation                   = DrawSwords
                AnimationName           = MUSpidRdr_TGLB
                AnimationMode           = ONCE
            End
        End

        TransitionState                   = TRANS_SwordToBow_Selected
            Animation                   = DrawBow
                AnimationName           = MUSpidRdr_TGLA
                AnimationMode           = ONCE
            End
        End
    End

    Draw = W3DScriptedModelDraw DustEffects
        DefaultModelConditionState
          Model = None
        End
        IdleAnimationState
        End
        AnimationState = MOVING WADING
            ParticleSysBone = None FootstepSlash
        End
        AnimationState = MOVING ACCELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING DECELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING
        End
    End



    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side                = Angmar
    EditorSorting       = UNIT
    ThreatLevel         = GLORFINDEL_THREAT_LEVEL
    ThingClass          = CHARACTER_UNIT
    TransportSlotCount  = TRANSPORTSLOTCOUNT_HERO
    BuildCost           = MEDIUM_HERO_COST
    BuildTime           = MEDIUM_HERO_BUILDTIME
    BountyValue         = ELVEN_GLORFINDEL_BOUNTY_VALUE
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG
    DisplayMeleeDamage  = MEDIUM_HERO_DAMAGE
    MaxSimultaneousOfType = 1
    Scale = 1.1


    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY     AngmarMorchantSpeer
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions        = None
        Armor             = MediumHeroArmorMounted
        DamageFX          = NormalDamageFX
    End



    VisionRange           = 300
    ShroudClearingRange   = 400

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    DisplayName               = OBJECT:AngmarMorchant
    RecruitText               = CONTROLBAR:AngmarMorchantRecruit
    ReviveText                = CONTROLBAR:AngmarMorchantRevive
    Hotkey                    = CONTROLBAR:AngmarMorchantHotkey

    CrushableLevel         = 1
    CrusherLevel           = 1
    CrushWeapon            = SpiderRiderCrush

    MinCrushVelocityPercent     = MINCRUSHVELOCITYPERCENT_HERO
    CrushDecelerationPercent    = CRUSHDECELERATIONPERCENT_HERO

    CrushKnockback = 30
    CrushZFactor   = 0.5
    CommandSet        = AngmarMorchantCommandSet_Spider
    CommandPoints     = 0



    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_GlorfindelBody

    AutoResolveArmor
        Armor = AutoResolve_GlorfindelArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_GlorfindelWeapon
    End






    VoiceAttack                              = MorchantVoiceAttack
    VoiceAttackAir                           = MorchantVoiceAttack
    VoiceAttackCharge                        = MorchantVoiceAttack
    VoiceAttackMachine                       = MorchantVoiceAttack
    VoiceAttackStructure                     = MorchantVoiceAttack
    VoiceFear                                = MorchantVoiceFear
    VoiceCreated                             = MorchantVoiceRecruit
    VoiceFullyCreated                        = MorchantVoiceRecruit
    VoiceGuard                               = MorchantVoiceMove
    VoiceMove                                = MorchantVoiceMove
    VoiceMoveToCamp                          = MorchantVoiceMove
    VoiceMoveWhileAttacking                  = MorchantVoiceMove
    VoicePriority                            = 90
    VoiceRetreatToCastle                     = MorchantVoiceMove
    VoiceSelect                              = MorchantVoiceSelect
    VoiceSelectBattle                        = MorchantVoiceSelectinBattle

    SoundAmbient                             = ShelobVoiceSinglesLoop
    SoundImpact                              = ImpactHorse


    UnitSpecificSounds
        VoiceEnterUnitElvenTransportShip     = MorchantVoiceMove
        VoiceGarrison                        = MorchantVoiceMove
        VoiceInitiateCaptureBuilding         = MorchantVoiceMove
    End



    CrowdResponseKey = ElfHero

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
    EvaEventDieOwner        = GlorfindelDie

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Elf Elf_Male Unit Infantry Hero

    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound: ShelobMove            Animation:MUSPIDRDR_SKL.MUSPIDRDR_TRNL     Frames:1 11
        AnimationSound = Sound: ShelobMove            Animation:MUSPIDRDR_SKL.MUSPIDRDR_TRNR     Frames:1 11
        AnimationSound = Sound: ShelobMove            Animation:MUSPIDRDR_SKL.MUSPIDRDR_WLKA     Frames:1 17 33
        AnimationSound = Sound: ShelobMove            Animation:MUSPIDRDR_SKL.MUSPIDRDR_RUNA     Frames:1 5 9
        AnimationSound = Sound: ShelobMove            Animation:MUSPIDRDR_SKL.MUSPIDRDR_GTPA     Frames:1 16
        AnimationSound = Sound: ShelobMove            Animation:MUSPIDRDR_SKL.MUSPIDRDR_ATKA     Frames:0 39
        AnimationSound = Sound: ShelobMove            Animation:MUSPIDRDR_SKL.MUSPIDRDR_ATKB     Frames:0 100
        AnimationSound = Sound: ShelobFootstep        Animation:MUSPIDRDR_SKL.MUSPIDRDR_TRNL     Frames:0 5 10 15
        AnimationSound = Sound: ShelobFootstep        Animation:MUSPIDRDR_SKL.MUSPIDRDR_TRNR     Frames:0 5 10 15
        AnimationSound = Sound: ShelobFootstep        Animation:MUSPIDRDR_SKL.MUSPIDRDR_WLKA     Frames:0 8 16 24 32 40
        AnimationSound = Sound: ShelobFootstep        Animation:MUSPIDRDR_SKL.MUSPIDRDR_RUNA     Frames:0 4 8
        AnimationSound = Sound: ShelobFootstep        Animation:MUSPIDRDR_SKL.MUSPIDRDR_GTPA     Frames: 10 20
        AnimationSound = Sound:BodyFallOrc            Animation:MUSPIDRDR_SKL.MUSPIDRDR_DIEA    Frames:29
        AnimationSound = Sound:BodyFallOrc            Animation:MUSPIDRDR_SKL.MUSPIDRDR_DIEB    Frames:29
        AnimationSound = Sound:BodyFallOrc            Animation:MUSPIDRDR_SKL.MUSPIDRDR_DIEC    Frames:25
        AnimationSound = Sound:BodyFallOrc            Animation:MUSPIDRDR_SKL.MUSPIDRDR_DIED    Frames:25
        AnimationSound = Sound:BodyFallOrc            Animation:MUSPIDRDR_SKL.MUSPIDRDR_LNDA    Frames:7
        AnimationSound = Sound:BodyFallOrc            Animation:MUSPIDRDR_SKL.MUSPIDRDR_LNDB    Frames:7
    End


    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance                = 300
        TauntAndPointUpdateDelay            = 10000
        AddEmotion            =    Doom_Base



        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
         AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base


        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End




    RadarPriority = UNIT
    KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_EACH_OTHER SCORE ARMY_SUMMARY HEAVY_MELEE_HITTER SCARY CAN_CLIMB_WALLS
    PathfindDiameter = 40.0
    CamouflageDetectionMultiplier = 2.0

    Body = RespawnBody ModuleTag_RespawnBody
        MaxHealth                    = MEDIUM_HERO_HEALTH
        PermanentlyKilledByFilter    = NONE
        DodgePercent                 = HERO_DODGE_PERCENT
    End


    Behavior = AutoHealBehavior ModuleTag_GlorfindelHealing
        StartsActive            = Yes
        HealingAmount            = HERO_HEAL_AMOUNT
        HealingDelay            = 1000
        StartHealingDelay        = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat    = Yes
    End


    #include "..\..\..\includes\DefaultInvisibilityUpdate.inc"

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    #include "..\..\..\includes\CaptureBuilding.inc"







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_MearasEnabler
        SpecialPowerTemplate            = SpecialAbilityToggleberegondWeapon
        TriggeredBy                     = Upgrade_Level_1
        ObeyRechageOnTrigger            = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_MearasStarter
         SpecialPowerTemplate           = SpecialAbilityToggleberegondWeapon
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = Yes
         AvailableAtStart               = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Mearas
         SpecialPowerTemplate           = SpecialAbilityToggleberegondWeapon
         MountedTemplate                = AngmarMorchant
         SynchronizeTimerOnSpecialPower = SpecialAbilityWildShelobPoisonedStinger SpecialAbilityAragornBladeMaster SpecialAbilityKingofDunharg SpecialAbilityAngmarGunstlingDuellant SpecialAbilityArkaneGeheimnisse SpecialAbilityIsengardSharkuManEaterGrab
         UnpackTime                     = OBJECT_TOGGLE_TIME
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End







    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate
        SpecialPowerTemplate     = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack = No
        StartsPaused             = No
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura
        StartsActive     = Yes
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff1
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura2
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_2
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff2
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura3
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_3
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff3
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura4
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_4
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff4
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura5
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_5
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff5
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura6
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_6
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff6
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura7
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_7
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff7
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura8
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_8
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff8
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura9
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_9
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff9
        ObjectFilter     = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura10
        StartsActive     = No
        TriggeredBy      = Upgrade_Level_10
        RefreshDelay     = 2000
        Range            = WITCHKING_DREADVISAGE_EFFECT_RADIUS
        TargetEnemy      = Yes
        AntiCategory     = LEADERSHIP BUFF STRUCTURE INNATE_ARMOR
        BonusName        = MorchantDebuff10
        ObjectFilter     = ANY +HERO -INFANTRY -CAVALRY -STRUCTURE -BASE_FOUNDATION -HORDE
    End


    Behavior = SpecialPowerModule ModuleTag_EyeStarter
        SpecialPowerTemplate        = SpecialAbilityEyeOfSauronAntiCategory
        UpdateModuleStartsAttack    = No
        AntiCategory                = LEADERSHIP BUFF STUN STRUCTURE INNATE_ARMOR
        AttributeModifierAffects    = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION  -HERO -HORDE
        AttributeModifier           = EyeOfSauronAntiCategory
        AttributeModifierRange      = 150.0
        StartsPaused                = No
    End







    Behavior = FireWeaponUpdate FireWeaponUpdateModuleTag
        FireWeaponNugget
            WeaponName = MorchantBannzirkelEffect
            FireDelay = 0
            OneShot = No
        End
        HeroModeTrigger = Yes
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BannzirkelEnabler
        SpecialPowerTemplate       = SpecialAbilityKingofDunharg
        TriggeredBy                = Upgrade_Level_5
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_BannzirkelStarter
        SpecialPowerTemplate       = SpecialAbilityKingofDunharg
        UpdateModuleStartsAttack   = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_BannzirkelUpdate
        SpecialPowerTemplate       = SpecialAbilityKingofDunharg
        UnpackingVariation         = 1
        UnpackTime                 = 1800
        PackTime                   = 1600
        AwardXPForTriggering       = 0
        HeroAttributeModifier      = MorchantBannzirkelDebuff
        HeroEffectDuration         = 30000
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ArkanEnabler
        SpecialPowerTemplate       = SpecialAbilityArkaneGeheimnisse
        TriggeredBy                = Upgrade_Level_10
        ObeyRechageOnTrigger       = Yes
    End

    Behavior = OCLSpecialPower ModuleTag_OCLSpecialPowerArkan
        SpecialPowerTemplate       = SpecialAbilityArkaneGeheimnisse
        OCL                        = OCL_MorchantSchwarzeMagie

        CreateLocation             = CREATE_AT_LOCATION
        StartsPaused               = Yes
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SchattenwanderungEnabler
        SpecialPowerTemplate    = SpecialAbilityAngmarGunstlingDuellant
        TriggeredBy             = Upgrade_Level_7
        ObeyRechageOnTrigger    = Yes
    End

    Behavior = WeaponModeSpecialPowerUpdate ModuleTag_SchattenwanderungPowerUpdate
        SpecialPowerTemplate    = SpecialAbilityAngmarGunstlingDuellant
        Duration                = 30000
        AttributeModifier       = MorchantBonus
        LockWeaponSlot          = SECONDARY
        StartsPaused            = Yes
    End

    Behavior = MonitorConditionUpdate ModuleTag_CommandSetSwapperWanderung
        ModelConditionFlags      = WEAPONLOCK_SECONDARY
        ModelConditionCommandSet = AngmarMorchantCommandSet_SchattenModule
    End

    Behavior = SpecialPowerModule ModuleTag_TeleportStarter
        SpecialPowerTemplate     = SpecialAbilityMorchantHeroBlink
        UpdateModuleStartsAttack = Yes
        TriggerFX                = FX_BlinkMorchant
        StartsPaused             = No
    End

    Behavior = TeleportSpecialAbilityUpdate ModuleTag_TeleportUpdate
        SpecialPowerTemplate     = SpecialAbilityMorchantHeroBlink
        UnpackingVariation       = 1
        UnpackTime               = 100
        PackTime                 = 100
        ApproachRequiresLOS      = No
        BusyForDuration          = 100
        DestinationWeaponName    = CreateaHeroBlinkDestination.
    End




    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ManEaterEnabler
        SpecialPowerTemplate        = SpecialAbilityIsengardSharkuManEaterGrab
        TriggeredBy                 = Upgrade_Level_7
        ObeyRechageOnTrigger        = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_SpecialPowerModuleGrabStarter
        SpecialPowerTemplate        = SpecialAbilityIsengardSharkuManEaterGrab
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = Yes
        InitiateSound               = SharkuManeaterStartMS
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WeaponFireSpecialAbilityUpdateGrab
        SpecialPowerTemplate        = SpecialAbilityIsengardSharkuManEaterGrab
        SkipContinue                = Yes
        UnpackTime                  = 933

        StartAbilityRange           = 8.0

        SpecialWeapon               = IsengardSharkuManEaterGrab
        ChainedButton               = Command_SpecialAbilityIsengardSharkuManEaterFlingPassenger
        CustomAnimAndDuration       = AnimState:EATING AnimTime:3300

        TriggerAttributeModifier    = SharkuManEater
        AttributeModifierDuration   = 20000
        TriggerSound                = SharkuManEaterEatingMS
        BusyForDuration             = 2000
    End

    Behavior = PlayerHealSpecialPower ModuleTag_SpecialPowerModuleFlingPassengerStarter
        SpecialPowerTemplate        = SpecialAbilityIsengardSharkuManEaterDrop
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = No
        HealAmount                  = 1.0
        HealAsPercent               = Yes
        HealAffects                 = HERO
        HealRadius                  = 0.0
        HealFX                      = FX_SpellHealUnitHealBuff
    End

    Behavior = FlingPassengerSpecialAbilityUpdate ModuleTag_FlingPassengerSpecialAbilityUpdate
        SpecialPowerTemplate         = SpecialAbilityIsengardSharkuManEaterDrop
        UnpackTime                   = 1250
        FlingPassengerVelocity       = X:0 Y:0 Z:0
        FlingPassengerLandingWarhead = IsengardSharkuManEaterWarhead
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_PoisonedStingerEnabler
        SpecialPowerTemplate     = SpecialAbilityWildShelobPoisonedStinger
        TriggeredBy              = Upgrade_Level_6
        ObeyRechageOnTrigger     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_PoisonedStingerStarter
        SpecialPowerTemplate     = SpecialAbilityWildShelobPoisonedStinger
        UpdateModuleStartsAttack = Yes
        StartsPaused             = Yes
        InitiateSound            = ShelobVoxPoisonStinger
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_PoisonedStingerUpdate
        SpecialPowerTemplate     = SpecialAbilityWildShelobPoisonedStinger
        SkipContinue             = Yes
        UnpackTime               = 250
        PreparationTime          = 500
        MustFinishAbility        = Yes
        AwardXPForTriggering     = 0
        StartAbilityRange        = 15.0
        SpecialWeapon            = WildShelobPoisonedStinger
        WhichSpecialWeapon       = 1
    End




    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        CanAttackWhileContained    = Yes
    End


    LocomotorSet
        Locomotor = TestWallScalingHordeLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_MOUNTED_MED_MEMBER_SPEED
    End


    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 2000
    End


    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes           = ALL
        SinkDelay            = 5000
        SinkRate             = 10.0
        DestructionDelay     = 1800
        Sound                = INITIAL MorchantVoiceDie
    End



    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End





    Behavior = PassiveAreaEffectBehavior ModuleTag_SplashOfHealingWater_Ahh
        UpgradeRequired      = Upgrade_TestBuilding_2
        EffectRadius         = 150
        PingDelay            = 2000
        HealPercentPerSecond = 3%
        AllowFilter          = ANY +INFANTRY +CAVALRY +HERO -MACHINE +MONSTER -IMMOBILE +DOZER
        NonStackable         = Yes
        HealFX               = FX_SpellHealUnitBuffAngmarCaliz
    End

    Behavior = FireWeaponUpdate ModuleTag_WeaponFiring
        FireWeaponNugget
            WeaponName = MorchantMachtHKModifierWeapon
            Offset = X:0 Y:0 Z:0
            FireDelay = 0
            OneShot = No
        End
    End





    Behavior = AISpecialPowerUpdate GlorfindelToggleMountedAI
        CommandButtonName = Command_MountHorseGlorfindel
        SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_MOUNTED
    End

    Behavior = AISpecialPowerUpdate BladeOfPurityAI
        CommandButtonName = Command_SpecialAbilityGlorfindelBladeOfPurity
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate WindRiderAI
        CommandButtonName = Command_SpecialAbilityGlorfindelWindRider
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate StarLightAI
        CommandButtonName = Command_GlorfindelStarlight
        SpecialPowerAIType = AI_SPECIAL_POWER_HEAL_AOE
    End

    Behavior = AISpecialPowerUpdate ThunderboltAI
        CommandButtonName = Command_GlorfindelHopeLight
        SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
    End


    Geometry            = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryHeight        = 25
    GeometryIsSmall        = Yes
    Shadow                = SHADOW_DECAL
    ShadowSizeX            = 20
    ShadowSizeY            = 20
    ShadowTexture        = ShadowI
End

Object AngmarMorchant_Kopie



    SelectPortrait = HPMorchant

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_Glorfindel

    Draw = W3DScriptedModelDraw ModuleTag_DRAW

     RandomTexture = kumorquant_gntl.tga  0 chhw_sm_gear_02.tga

    DefaultModelConditionState
      Model = kumorch_skn
      ParticleSysBone = NONE Predator FollowBone:Yes Persist:SPAWN PersistID:100
      ParticleSysBone = NONE Predator FollowBone:Yes Persist:HOLD PersistID:100
    End

    ModelConditionState = COMING_OUT_OF_FACTORY
      Model = kumorch_skn
      ParticleSysBone = NONE Predator FollowBone:Yes Persist:SPAWN PersistID:100
      ParticleSysBone = NONE Predator FollowBone:Yes Persist:HOLD PersistID:100
    End


    IdleAnimationState
        Animation = TNTC
            AnimationName        = EUMthlnd_SKL.EUMthlnd_TNTC
            AnimationMode        = ONCE
            AnimationPriority    = 30
            AnimationBlendTime    = 15
        End
        Animation = TNTA
            AnimationName        = EUMthlnd_SKL.EUMthlnd_TNTA
            AnimationMode        = ONCE
            AnimationPriority    = 10
            AnimationBlendTime    = 5
        End
        Animation = IDLA
            AnimationName        = EUMthlnd_SKL.EUMthlnd_IDLB
            AnimationMode        = ONCE
            AnimationPriority    = 30
            AnimationBlendTime    = 15
        End
        Animation = IDLB
            AnimationName        = EUMthlnd_SKL.EUMthlnd_IDLC
            AnimationMode        = ONCE
            AnimationPriority    = 10
            AnimationBlendTime    = 15
        End
        Animation = IDLC
            AnimationName        = EUMthlnd_SKL.EUMthlnd_IDLD
            AnimationMode        = ONCE
            AnimationBlendTime    = 15
        End
        Animation = IDLC
            AnimationName        = EUMthlnd_SKL.EUMthlnd_IDLE
            AnimationMode        = ONCE
            AnimationBlendTime    = 10
        End
        StateName = Bored
    BeginScript
        Prev = CurDrawablePrevAnimationState()
        if Prev == "STATE_Planted"    then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end

    EndScript
    End


    AnimationState                        = PASSENGER
        Animation                        = Grabbed
            AnimationName                = EUMthlnd_SKL.EUMthlnd_FLYA
            AnimationMode                = LOOP
        End
    End

    AnimationState                        = FREEFALL
        StateName                        = STATE_Falling
        Animation                        = Falling
            AnimationName                = EUMthlnd_SKL.EUMthlnd_FLYA
            AnimationMode                = LOOP
            AnimationBlendTime            = 10
        End
    End





    AnimationState = ALTERNATE_FORMATION FIRING_OR_PREATTACK_A
         Animation = ATKA
            AnimationName        = EUMthlnd_SKL.EUMthlnd_ATKA
            AnimationMode        = LOOP
            UseWeaponTiming        = Yes
        End
         Animation = ATKC
            AnimationName        = EUMthlnd_SKL.EUMthlnd_ATKC
            AnimationMode        = LOOP
            UseWeaponTiming        = Yes
        End
    End

    AnimationState = ALTERNATE_FORMATION FIRING_OR_PREATTACK_A WEAPONSTATE_CLOSE_RANGE
         Animation = ATKA
            AnimationName        = EUMthlnd_SKL.EUMthlnd_ATKA
            AnimationMode        = LOOP
            UseWeaponTiming        = Yes
        End
         Animation = ATKC
            AnimationName        = EUMthlnd_SKL.EUMthlnd_ATKC
            AnimationMode        = LOOP
            UseWeaponTiming        = Yes
        End
        StateName = PikeUp
    End

    AnimationState = ALTERNATE_FORMATION MOVING BACKING_UP
        Animation = Moving_Back
            AnimationName = EUMthlnd_SKL.EUMthlnd_BAKA
            AnimationMode = LOOP
        End
    End

    AnimationState = ALTERNATE_FORMATION MOVING
         Animation = ATKC
            AnimationName        = EUMthlnd_SKL.EUMthlnd_RUNB
            AnimationMode        = LOOP
        End
    End

    AnimationState                        = DYING SPLATTED
         Animation                        = Splat
            AnimationName                = EUMthlnd_SKL.EUMthlnd_LNDA
            AnimationMode                = ONCE
        End
    End

    AnimationState    = DYING BURNINGDEATH
        Animation
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEA
            AnimationMode = ONCE
            AnimationBlendTime = 10
        End
        Animation
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEB
            AnimationMode = ONCE
            AnimationBlendTime = 10
        End
        Animation
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEC
            AnimationMode = ONCE
            AnimationBlendTime = 10
        End
    End


     AnimationState = ALTERNATE_FORMATION DYING AFLAME
        Animation = Flaming_Death
            AnimationName = EUMthlnd_SKL.EUMthlnd_MFDA
            AnimationMode = ONCE
        End
    End

    AnimationState =  ALTERNATE_FORMATION DYING
        Animation = Dying_1
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEA
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
        Animation = Dying_2
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEB
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
        Animation = Dying_3
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEC
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
    End


     AnimationState = ALTERNATE_FORMATION PORCUPINE
         Animation = ATKC
            AnimationName        = EUMthlnd_SKL.EUMthlnd_PLTB
            AnimationMode        = LOOP
        End
        StateName = STATE_Planted
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev ~= "STATE_Planted"    and Prev ~= "Trans_Up_To_Down" then CurDrawableSetTransitionAnimState("Trans_Up_To_Down") return end
        EndScript
    End



     AnimationState = ALTERNATE_FORMATION
         Animation = ATKC
            AnimationName        = EUMthlnd_SKL.EUMthlnd_IDLA
            AnimationMode        = LOOP
        End
    End







    AnimationState = STUNNED_FLAILING
        Animation
            AnimationName = EUMthlnd_SKL.EUMthlnd_FLYA
            AnimationMode = LOOP
        End
   End



     AnimationState = DYING AFLAME
        Animation = Flaming_Death
            AnimationName = EUMthlnd_SKL.EUMthlnd_MFDA
            AnimationMode = ONCE
        End
    End

    AnimationState = DYING EMOTION_ALERT
        Animation = Dying_1
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEA
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
        Animation = Dying_2
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEB
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
        Animation = Dying_3
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEC
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
    End

    AnimationState = DYING
        Animation = Dying_1
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEA
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
        Animation = Dying_2
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEB
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
        Animation = Dying_3
            AnimationName = EUMthlnd_SKL.EUMthlnd_DIEC
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
    End

        AnimationState                        = BURNINGDEATH
            Animation
                AnimationName                = EUMthlnd_SKL.EUMthlnd_MFDA
                AnimationMode                = LOOP
                Distance                    = 110
            End
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = EUMthlnd_SKL.EUMthlnd_IDLA
                AnimationMode                = LOOP
            End
        End


    AnimationState = STUNNED_STANDING_UP
        Animation
            AnimationName = EUMthlnd_SKL.EUMthlnd_GTPA
            AnimationMode = ONCE
        End
    End

    AnimationState                        = STUNNED
        Animation
            AnimationName                = EUMthlnd_SKL.EUMthlnd_LNDA
            AnimationMode                = ONCE
        End
    End


    AnimationState  = COMING_OUT_OF_FACTORY
        Animation = Being_Built
            AnimationName        = EUMthlnd_SKL.EUMthlnd_RUNA
            AnimationMode        = LOOP
            AnimationBlendTime    = 0
        End
    End


    AnimationState = MOVING FIRING_OR_PREATTACK_A
        Animation = TrotAndFire
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUNC
            AnimationMode = LOOP
        End
        Animation = TrotAndFire2
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUND
            AnimationMode = LOOP
        End
        Flags = RANDOMSTART

    End


    AnimationState = MOVING BACKING_UP
        Animation = Moving_Back
            AnimationName = EUMthlnd_SKL.EUMthlnd_BAKA
            AnimationMode = LOOP
        End
    End

    AnimationState = MOVING EMOTION_AFRAID
        Animation = Moving_1
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUNE
            AnimationMode = LOOP
        End
        Flags = MAINTAIN_FRAME_ACROSS_STATES
        ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = MOVING EMOTION_ALERT
        Animation = TrotAndFire
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUNC
            AnimationMode = LOOP
        End
        Animation = TrotAndFire2
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUND
            AnimationMode = LOOP
        End
        Flags = MAINTAIN_FRAME_ACROSS_STATES
        ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = MOVING ATTACKING
        Animation = TrotAndFire
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUNC
            AnimationMode = LOOP
        End
        Animation = TrotAndFire2
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUND
            AnimationMode = LOOP
        End
        Flags = MAINTAIN_FRAME_ACROSS_STATES
        ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = MOVING ENGAGED
        Animation = TrotAndFire
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUNC
            AnimationMode = LOOP
        End
        Animation = TrotAndFire2
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUND
            AnimationMode = LOOP
        End
        Flags = MAINTAIN_FRAME_ACROSS_STATES
        ParticleSysBone = None InfantryDustTrails
    End

    AnimationState = MOVING
        Animation = TrotAndFire
            AnimationName = EUMthlnd_SKL.EUMthlnd_RUNA
            AnimationMode = LOOP
        End




        ParticleSysBone = None InfantryDustTrails
    End




    AnimationState =  FIRING_OR_PREATTACK_A
        Animation = KickSinceWeAreMelee
            AnimationName        = EUMthlnd_SKL.EUMthlnd_ATKA
            AnimationMode        = ONCE
            UseWeaponTiming        = Yes
        End
        Animation = KickSinceWeAreMelee
            AnimationName        = EUMthlnd_SKL.EUMthlnd_ATKB
            AnimationMode        = ONCE
            UseWeaponTiming        = Yes
        End
        Animation = KickSinceWeAreMelee
            AnimationName        = EUMthlnd_SKL.EUMthlnd_ATKC
            AnimationMode        = ONCE
            UseWeaponTiming        = Yes
        End
    End

    AnimationState =  FIRING_OR_PREATTACK_A WEAPONLOCK_SECONDARY
        Animation = KickSinceWeAreMelee
            AnimationName        = EUMthlnd_SKL.EUMthlnd_ATKA
            AnimationMode        = ONCE
            UseWeaponTiming        = Yes
        End
    End

    AnimationState =  FIRING_OR_PREATTACK_B
        Animation = TNTB
            AnimationName        = EUMthlnd_SKL.EUMthlnd_ATKA
            AnimationMode        = ONCE
            UseWeaponTiming        = Yes
        End
    End




    AnimationState                            = WAR_CHANT
        Animation                            = Chant
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_CHRA
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
        Animation                            = Chant
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_CHRB
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
        Animation                            = Chant
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_CHRC
            AnimationMode = ONCE
            AnimationBlendTime            = 15
        End
        Flags                                = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
    End


    AnimationState                            = EMOTION_CELEBRATING
        Animation                            = CHRA
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_CHRA
            AnimationMode                    = ONCE
            AnimationBlendTime                = 10
        End
        Animation                            = CHRB
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_CHRB
            AnimationMode                    = ONCE
            AnimationBlendTime                = 10
        End
        Animation                            = TNTA
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_CHRC
            AnimationMode                    = ONCE
            AnimationBlendTime                = 10
        End
        Flags                = RESTART_ANIM_WHEN_COMPLETE
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Planted"    then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
        EndScript
    End

    AnimationState                            = EMOTION_TAUNTING
        Animation                            = TNTC
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_TNTC
            AnimationMode                    = ONCE
        End
        Animation                            = TNTA
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_TNTA
            AnimationMode                    = ONCE
        End
        Animation                            = TNTB
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_TNTB
            AnimationMode                    = ONCE
        End
        Flags                                = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Planted"    then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
        EndScript
    End

    AnimationState                            = EMOTION_POINTING
        Animation                            = Pointing1
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_PNTA
            AnimationMode                    = ONCE
        End
        Animation                            = Pointing1
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_TNTC
            AnimationMode                    = ONCE
        End
        Flags                                = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Planted"    then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
        EndScript
    End

    AnimationState                            = EMOTION_ALERT
        Animation                            = ALERT
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_IDLA
            AnimationMode                    = LOOP
        End
        Flags                                = RESTART_ANIM_WHEN_COMPLETE MAINTAIN_FRAME_ACROSS_STATES2
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Planted"    then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
        EndScript
    End

    AnimationState                            = ATTACKING
        Animation                            = ALERT
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_IDLA
            AnimationMode                    = LOOP
        End
        Flags                                = RESTART_ANIM_WHEN_COMPLETE MAINTAIN_FRAME_ACROSS_STATES2
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Planted"    then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
        EndScript
    End

    AnimationState                            = ENGAGED
        Animation                            = ALERT
            AnimationName                    = EUMthlnd_SKL.EUMthlnd_IDLA
            AnimationMode                    = LOOP
        End
        Flags                                = RESTART_ANIM_WHEN_COMPLETE MAINTAIN_FRAME_ACROSS_STATES2
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Planted"    then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
        EndScript
    End


    AnimationState                        = RAISING_FLAG
        Animation                        = CHRA
            AnimationName                = EUMthlnd_SKL.EUMthlnd_CHRA
            AnimationMode                = ONCE
            AnimationSpeedFactorRange    = 0.9 1.1
        End
        Animation                        = CHRB
            AnimationName                = EUMthlnd_SKL.EUMthlnd_CHRB
            AnimationMode                = ONCE
            AnimationSpeedFactorRange    = 0.9 1.1
        End
        Flags                            = RESTART_ANIM_WHEN_COMPLETE
    End


    AnimationState           = SPECIAL_WEAPON_ONE
        Animation            = FEAR
            AnimationName    = EUMthlnd_SKL.EUMthlnd_CINA
            AnimationMode    = ONCE
        End
    End

    AnimationState           = USER_2
        Animation            = FEAR
            AnimationName    = EUMthlnd_SKL.EUMthlnd_CINA
            AnimationMode    = ONCE
        End
    End

        AnimationState                = PACKING_TYPE_1
            StateName                = Dominate
            Animation
                AnimationName        = EUMthlnd_SKL.EUMthlnd_TNTC
                AnimationMode        = ONCE
                AnimationBlendTime  = 5
            End
            FXEvent    = Frame:6    Name: FX_SarumanDominateAtSelf
        End

    AnimationState = SELECTED
        Animation                = Selected_Loop
            AnimationName        = EUMthlnd_SKL.EUMthlnd_ATNB
            AnimationMode        = LOOP
            AnimationBlendTime    = 10
        End
        StateName                = Selected
        BeginScript
            Prev = CurDrawablePrevAnimationState()
            if Prev == "STATE_Planted"    then CurDrawableSetTransitionAnimState("Trans_Down_To_Up") return end
            if Prev == "Bored" then CurDrawableSetTransitionAnimState("TRANS_BS_Normal") end
        EndScript
        Flags = RESTART_ANIM_WHEN_COMPLETE
    End




    TransitionState = Trans_Down_To_Up
        Animation = Transition
            AnimationName = EUMthlnd_SKL.EUMthlnd_PLTC
            AnimationMode = ONCE
        End
    End

    TransitionState = Trans_Up_To_Down
        Animation = Transition
            AnimationName = EUMthlnd_SKL.EUMthlnd_PLTA
            AnimationMode = ONCE
        End
    End

    TransitionState = TRANS_BS_Normal
        Animation = Transition
            AnimationName                = EUMthlnd_SKL.EUMthlnd_ATNA
            AnimationMode                = ONCE
            AnimationBlendTime            = 10
            AnimationMustCompleteBlend    = Yes
        End
    End



 End



    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    #include "..\..\..\includes\StunDrawModuleSmall.inc"


    Side                = Angmar
    EditorSorting       = UNIT
    ThreatLevel         = GLORFINDEL_THREAT_LEVEL
    ThingClass          = CHARACTER_UNIT
    TransportSlotCount  = TRANSPORTSLOTCOUNT_HERO
    BuildCost           = MEDIUM_HERO_COST
    BuildTime           = MEDIUM_HERO_BUILDTIME
    BountyValue         = ELVEN_GLORFINDEL_BOUNTY_VALUE
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG
    DisplayMeleeDamage  = MEDIUM_HERO_DAMAGE
    MaxSimultaneousOfType = 4
    Scale = 1.1


    WeaponSet
        Conditions        = None
        Weapon            = PRIMARY       AngmarMorchantSpeer
    End


    ArmorSet
        Conditions        = None
        Armor             = MediumHeroArmor
        DamageFX          = NormalDamageFX
    End


    VisionRange           = 300
    ShroudClearingRange   = 400

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    DisplayName               = OBJECT:AngmarMorchant
    RecruitText               = CONTROLBAR:AngmarMorchantRecruit
    ReviveText                = CONTROLBAR:AngmarMorchantRevive
    Hotkey                    = CONTROLBAR:AngmarMorchantHotkey

    CrusherLevel = 0
    CrushableLevel = 2

    CommandSet        = AngmarMorchantCommandSet_Kopie
    CommandPoints     = 0


    CrowdResponseKey = ElfHero

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
    EvaEventDieOwner        = GlorfindelDie

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key = Humanoid_Male Elf Elf_Male Unit Infantry Hero

    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:BodyFallOrc            Animation:EUMthlnd_SKL.EUMthlnd_DIEC    Frames:56
        AnimationSound = Sound:BodyFallOrc            Animation:EUMthlnd_SKL.EUMthlnd_DTHA    Frames:23
        AnimationSound = Sound:BodyFallOrc            Animation:EUMthlnd_SKL.EUMthlnd_DTHB    Frames:34
        AnimationSound = Sound:BodyFallOrc            Animation:EUMthlnd_SKL.EUMthlnd_LNDD    Frames:2
        AnimationSound = Sound:BodyFallOrc            Animation:EUMTHLND_SKL.EUMTHLND_LNDA    Frames:6
        AnimationSound = Sound:BodyFallGeneric1       Animation:EUMTHLND_SKL.EUMTHLND_DIEA    Frames:50
        AnimationSound = Sound:BodyFallGeneric1       Animation:EUMTHLND_SKL.EUMTHLND_DIEB    Frames:75
        AnimationSound = Sound:BodyFallGeneric1       Animation:EUMTHLND_SKL.EUMTHLND_DIEC    Frames:53
    End


    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance                = 300
        TauntAndPointUpdateDelay            = 10000
        AddEmotion            =    Doom_Base



        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
         AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base


        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End




    RadarPriority = UNIT
    KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_EACH_OTHER SCORE ARMY_SUMMARY HEAVY_MELEE_HITTER SCARY
    PathfindDiameter = 40.0
    CamouflageDetectionMultiplier = 2.0

    Body = RespawnBody ModuleTag_RespawnBody
        MaxHealth                    = MEDIUM_HERO_HEALTH
        PermanentlyKilledByFilter    = NONE
        DodgePercent                 = HERO_DODGE_PERCENT
    End


    Behavior = AutoHealBehavior ModuleTag_GlorfindelHealing
        StartsActive            = Yes
        HealingAmount            = HERO_HEAL_AMOUNT
        HealingDelay            = 1000
        StartHealingDelay        = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat    = Yes
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End



    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate        = 500
        CanAttackWhileContained    = Yes
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_ELVEN_FAST_MEMBER_SPEED
    End



    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 2000
    End


    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL
        FadeDelay = 0
        FadeTime = 1000
        DestructionDelay = 1000
        FX       = INITIAL FX_GiantSpiderDie
        Sound    = INITIAL SpellGenericUnsummonFasterMS
        Weapon   = FINAL MorchantKopieDeathWeapon
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End


    Geometry            = CYLINDER
    GeometryMajorRadius = 8.0
    GeometryHeight        = 25
    GeometryIsSmall        = Yes
    Shadow                = SHADOW_DECAL
    ShadowSizeX            = 20
    ShadowSizeY            = 20
    ShadowTexture        = ShadowI
End


