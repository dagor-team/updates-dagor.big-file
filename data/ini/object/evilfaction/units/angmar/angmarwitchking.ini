Object AngmarWitchking_mod

    SelectPortrait = HPAngWitchKingNew
    ButtonImage    = HIAngWitchKingNew

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_LeaderHero

    Draw = W3DScriptedModelDraw ModuleTag_01

        DefaultModelConditionState
            Model           = kuanghk_skn
            Skeleton        = MUWchKng_SKL
        End

        ModelConditionState = WEAPONSET_HERO_MODE
			ParticleSysBone = NONE AnnatarAuraFlare FOLLOWBONE:YES
            ParticleSysBone = B_SWORD SchattenklingeHK FollowBone:Yes
        End

        IdleAnimationState
            StateName                = Idle
            Animation
                AnimationName       = MUWchKng_IDLC
                AnimationPriority    = 1
                AnimationBlendTime    = 15
                AnimationMode       = ONCE
            End
            Animation
                AnimationName       = MUWchKng_IDLD
                AnimationPriority = 1
                AnimationBlendTime    = 15
                AnimationMode       = ONCE
            End
            Animation
                AnimationName       = MUWchKng_IDLE
                AnimationPriority = 1
                AnimationBlendTime    = 15
                AnimationMode       = ONCE
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle") end
            EndScript
        End






        AnimationState        = PASSENGER MOUNTED
            Animation           = grabbed
                AnimationName       = KUKngMount_SKL.KUKngMount_GBDA
                AnimationMode       = LOOP
                AnimationSpeedFactorRange = 0.8 0.8

            End
            Flags               = RANDOMSTART
        End


        AnimationState        = FREEFALL MOUNTED
            Animation           = freefall
                AnimationName       = KUKngMount_SKL.KUKngMount_FLYA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED_FLAILING MOUNTED
            Animation           = JustDie
                AnimationName       = KUKngMount_SKL.KUKngMount_FLYA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState                =    DYING SPLATTED MOUNTED
            Animation                =    splatted
                AnimationName        =    KUKngMount_SKL.KUKngMount_LNDA
                AnimationMode        =    ONCE
            End
        End

        AnimationState                =    BURNINGDEATH MOUNTED DYING
            Animation
                AnimationName        =    KUKngMount_SKL.KUKngMount_DIEA
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationSpeedFactorRange = 0.8 0.8
            End
        End

        AnimationState                = DYING MOUNTED
            Animation
                AnimationName       = KUKngMount_SKL.KUKngMount_DIEA
                AnimationMode       = ONCE
                AnimationSpeedFactorRange = 0.8 0.8
            End
        End

        AnimationState        = STUNNED_STANDING_UP MOUNTED
            Animation           = StandUp
                AnimationName       = KUKngMount_SKL.KUKngMount_GTPA
                AnimationMode       = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState        = STUNNED MOUNTED
            Animation           = Land
                AnimationName       = KUKngMount_SKL.KUKngMount_LNDA
                AnimationMode       = ONCE
            End
        End

        AnimationState        = MOVING FIRING_OR_PREATTACK_A MOUNTED
            ShareAnimation        = Yes
            Animation           = TrotAndFire
                AnimationName       = KUKngMount_SKL.KUKngMount_RUNB
                AnimationMode       = LOOP
                Distance            = 70
            End
            Flags               = RANDOMSTART
        End

        AnimationState                =    TURN_LEFT_HIGH_SPEED MOUNTED
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_RUNA
                AnimationMode        =    LOOP
                AnimationBlendTime    =    10
            End
        End

        AnimationState                =    TURN_RIGHT_HIGH_SPEED MOUNTED
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_RUNA
                AnimationMode        =    LOOP
                AnimationBlendTime    =    10
            End
        End

        AnimationState                =    MOVING BACKING_UP MOUNTED
            Animation                =    BackingUp
                AnimationName        =    KUKngMount_SKL.KUKngMount_BAKA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState        = MOVING TURN_LEFT MOUNTED
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_TRNL
                AnimationMode        =    LOOP
            End
        End

        AnimationState        = MOVING TURN_RIGHT MOUNTED
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_TRNR
                AnimationMode        =    LOOP
            End
        End

        AnimationState            = MOVING ACCELERATE MOUNTED
            Animation           = Accelerate
                AnimationName   = KUKngMount_SKL.KUKngMount_ACCL
                AnimationMode   = ONCE
                AnimationSpeedFactorRange = 1.3 1.3
            End
        End

        AnimationState            = MOVING DECELERATE MOUNTED
            Animation           = Decelerate
                AnimationName   = KUKngMount_SKL.KUKngMount_DECL
                AnimationMode   = ONCE
                AnimationSpeedFactorRange = 1.0 1.0
            End
        End

        AnimationState        = MOVING MOUNTED
            ShareAnimation        = Yes
            Animation           = RunA
                AnimationName       = KUKngMount_SKL.KUKngMount_RUNA
                AnimationMode       = LOOP
            End
        End


        AnimationState        = FIRING_OR_PREATTACK_A MOUNTED
            Animation           = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_ATKA
                AnimationMode       = ONCE
            End
            Animation           = ATKB
                AnimationName       = KUKngMount_SKL.KUKngMount_ATKB
                AnimationMode       = ONCE
            End
        End


        AnimationState        = SPECIAL_WEAPON_ONE MOUNTED
            Animation             = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_SPCA
                AnimationMode       = ONCE
            End
        End

        AnimationState        = SPECIAL_WEAPON_TWO MOUNTED
            Animation             = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode       = ONCE
            End
        End

        AnimationState        = USER_1 MOUNTED
            StateName        = Attacking
            Animation             = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode       = ONCE
            End
            ParticleSysBone  = "BIP01 SPINE1" AngHKSanctumCharge FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSanctumCharge02 FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSanctumCharge04 FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSmokeGlow FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSmoke4 FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKFlareSmoke FollowBone:Yes
        End




        AnimationState = HIT_REACTION HIT_LEVEL_1 MOUNTED
            Animation = Hit_Level_1_a
                AnimationName = KUKngMount_SKL.KUKngMount_HFMA
                AnimationMode = ONCE
            End
        End



        AnimationState                    = EMOTION_TAUNTING MOUNTED
            ShareAnimation                = Yes
            Animation                    = Taunting
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = ONCE
            End
            Animation                    = Taunting
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode            = ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = EMOTION_POINTING MOUNTED
            Animation                    = Pointing1
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = EMOTION_CELEBRATING MOUNTED
            ShareAnimation                = Yes
            Animation                    = CHRA
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = ONCE
            End
            Animation                    = CHRB
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode            = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = EMOTION_ALERT MOUNTED
            Animation                    = IDLA
                AnimationName            = KUKngMount_SKL.KUKngMount_IDLA
                AnimationMode            = LOOP
                AnimationBlendTime  = 15
            End
        End

        AnimationState                    = RAISING_FLAG MOUNTED
            ShareAnimation                = Yes
            Animation                    = CHRA
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = ONCE
                AnimationSpeedFactorRange        = 0.9 1.1
            End
            Animation                    = CHRB
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode            = ONCE
                AnimationSpeedFactorRange        = 0.9 1.1
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                =    SELECTED MOUNTED
            StateName                =    State_Selected
            Animation                =    AtAttention
                AnimationName        =    KUKngMount_SKL.KUKngMount_ATNB
                AnimationMode        =    Loop
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_To_Selected") end
            EndScript
        End

        AnimationState = MOUNTED
            StateName            = Idle
            Animation           = IdleB
                AnimationName       = KUKngMount_SKL.KUKngMount_IDLB
                AnimationMode       = Loop
                AnimationBlendTime  = 15
                AnimationPriority   = 10
            End
            Animation           = IdleC
                AnimationName       = KUKngMount_SKL.KUKngMount_IDLC
                AnimationMode       = Loop
                AnimationBlendTime  = 15
                AnimationPriority   = 5
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "State_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
            EndScript
        End


        TransitionState                    =    TRANS_Idle_to_Selected
            Animation                    =    ATNA
                AnimationName            =    KUKngMount_SKL.KUKngMount_ATNA
                AnimationMode            =    ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
        End


        TransitionState                    =    TRANS_Selected_to_Idle
            Animation                    =    ATNC
                AnimationName            =    KUKngMount_SKL.KUKngMount_ATNC
                AnimationMode            =    ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Flags                        = START_FRAME_LAST
        End



        AnimationState        = USER_1
            StateName        = Attacking
            Animation             = SPCC
                AnimationName       = MUWchKng_CHRA
                AnimationMode       = ONCE
            End
            ParticleSysBone  = NONE AngHKSanctumCharge FollowBone:Yes
            ParticleSysBone  = NONE AngHKSanctumCharge02 FollowBone:Yes
            ParticleSysBone  = NONE AngHKSanctumCharge04 FollowBone:Yes
            ParticleSysBone  = NONE AngHKSmokeGlow FollowBone:Yes
            ParticleSysBone  = NONE AngHKSmoke4 FollowBone:Yes
            ParticleSysBone  = NONE AngHKFlareSmoke FollowBone:Yes
        End



        AnimationState        = DYING BURNINGDEATH
            Animation           = DIEA
                AnimationName     = MUWchKng_DIEB
                AnimationMode     = ONCE
                AnimationBlendTime = 10
            End
        End
        AnimationState        = DYING
            Animation           = DIEA
                AnimationName     = MUWchKng_DIEB
                AnimationMode     = ONCE
            End
        End

        AnimationState        = BURNINGDEATH
            Animation           = DIEA
                AnimationName     = MUWchKng_MFDA
                AnimationMode     = LOOP
                Distance          = 60
            End
        End


        AnimationState = FREEFALL
            Animation
                AnimationName = MUWchKng_FLYA
                AnimationMode = LOOP
            End
            Flags = RANDOMSTART
        End

        AnimationState = STUNNED_FLAILING
            Animation
                AnimationName = MUWchKng_FLYA
                AnimationMode = LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
            Flags = RANDOMSTART
        End

        AnimationState = STUNNED_STANDING_UP
            Animation
                AnimationName = MUWchKng_GTPB
                AnimationMode = ONCE
            End
        End

        AnimationState            = STUNNED
            Animation           = LNDA
                AnimationName   = MUWchKng_LNDB
                AnimationMode   = ONCE
            End
        End


        AnimationState         =  FIRING_OR_PREATTACK_A WEAPONSET_HERO_MODE
            Animation             = ATA1
                AnimationName         = MUWchKng_ATKA
                AnimationMode         = ONCE
                UseWeaponTiming            = Yes
            End
            Animation             = ATB1
                AnimationName         = MUWchKng_ATKB
                AnimationMode         = ONCE
                UseWeaponTiming            = Yes
            End
        End


        AnimationState        = SPECIAL_WEAPON_THREE
            StateName        = Attacking
            Animation             = ATA1
                AnimationName         = MUWchKng_SPCA
                AnimationMode         = ONCE
            End
        End


        AnimationState        = SPECIAL_WEAPON_ONE
            Animation
                AnimationName         = MUWchKng_ATKA
                AnimationMode         = ONCE
            End
            ParticleSysBone = B_SWORD GiftSchwertHK FollowBone:Yes
        End


        AnimationState        = SPECIAL_WEAPON_TWO
            Animation
                AnimationName         = MUWchKng_LVLA
                AnimationMode         = ONCE
            End
        End



        AnimationState        =  FIRING_OR_PREATTACK_A
            Animation             = ATA1
                AnimationName         = MUWchKng_ATKC
                AnimationMode         = ONCE
                UseWeaponTiming            = Yes
            End
            Animation             = ATB1
                AnimationName         = MUWchKng_ATKD
                AnimationMode         = ONCE
                UseWeaponTiming            = Yes
            End
        End

        AnimationState        =  FIRING_OR_PREATTACK_B
            Animation             = ATA1
                AnimationName         = MUWchKng_ATKC
                AnimationMode         = ONCE
                UseWeaponTiming            = Yes
            End
            Animation             = ATB1
                AnimationName         = MUWchKng_ATKD
                AnimationMode         = ONCE
                UseWeaponTiming            = Yes
            End
        End

        AnimationState        =  FIRING_OR_PREATTACK_C
            Animation             = ATA1
                AnimationName         = MUWchKng_ATKC
                AnimationMode         = ONCE
                UseWeaponTiming            = Yes
            End
            Animation             = ATB1
                AnimationName         = MUWchKng_ATKD
                AnimationMode         = ONCE
                UseWeaponTiming            = Yes
            End
        End

        AnimationState        =  FIRING_OR_PREATTACK_D
            Animation             = ATA1
                AnimationName         = MUWchKng_ATKC
                AnimationMode         = ONCE
                UseWeaponTiming            = Yes
            End
            Animation             = ATB1
                AnimationName         = MUWchKng_ATKD
                AnimationMode         = ONCE
                UseWeaponTiming            = Yes
            End
        End



        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            Animation           = RUNB
                AnimationName     = MUWchKng_ATRA
                AnimationMode     = LOOP
            End
            Flags = RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState        = BETWEEN_FIRING_SHOTS_A
            Animation           = ALERT_1
                AnimationName     = MUWchKng_IDLC
                AnimationMode     = ONCE
                AnimationBlendTime        = 10
            End
        End

        AnimationState        = MOVING
            Animation           = RUNB
                AnimationName     = MUWchKng_RUNB
                AnimationMode     = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState = LEVELED
            Animation = Hit_Level_1_a
                AnimationName = MUWchKng_LVLA
                AnimationMode = ONCE
            End
        End


        AnimationState = HIT_REACTION HIT_LEVEL_1
            Animation = Hit_Level_1_a
                AnimationName = MUWchKng_HITA
                AnimationMode = ONCE
            End
        End

        AnimationState        = EMOTION_ALERT
            Animation           = ALERT_1
                AnimationName     = MUWchKng_IDLC
                AnimationMode     = ONCE
            End
            Flags               = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState = RAISING_FLAG
            Animation
                AnimationName = MUWchKng_CHRA
                AnimationMode = LOOP
            End
        End

        AnimationState = SELECTED
            Animation
                AnimationName = MUWchKng_ATNB
                AnimationMode = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
            EndScript
        End

        TransitionState       = TRANS_IdleToSelected
            Animation           = ATNA
                AnimationName     = MUWchKng_ATNA
                AnimationMode     = ONCE
            End
        End

        TransitionState       = TRANS_SelectedToIdle
            Animation           = ATNA
                AnimationName     = MUWchKng_ATNC
                AnimationMode     = ONCE
            End
            Flags = START_FRAME_LAST
        End

    End



    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    Draw = W3DScriptedModelDraw DustEffects
        DefaultModelConditionState
          Model = None
        End
        IdleAnimationState
        End
        AnimationState = MOVING WADING MOUNTED
            ParticleSysBone = None FootstepSlash
        End
        AnimationState = MOVING ACCELERATE MOUNTED
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING DECELERATE MOUNTED
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING MOUNTED
        End
    End



    Side                = Angmar
    EditorSorting        = UNIT
    ThreatLevel            = WITCHKING_THREAT_LEVEL
    BuildCost            = WITCHKINGDAG_COST
    BuildTime            = SILMARIL_HERO_BUILDTIME
    TransportSlotCount    = TRANSPORTSLOTCOUNT_HERO
    ShockwaveResistance               = SHOCKWAVE_RESISTANCE_STRONG
    CommandSet            = AngmarWitchKingmodCommandSet
    CommandPoints        = 0
    RecruitText        = CONTROLBAR:AngmarWitchKingRecruit
    ReviveText        = CONTROLBAR:AngmarWitchKingRevive
    Hotkey            = CONTROLBAR:AngmarWitchKingHotkey
    MaxSimultaneousOfType = 1
    VisionRange            = ANGMAR_WITCHKING_VISION_RANGE
    ShroudClearingRange         = ANGMAR_WITCHKING_SHROUD_RANGE
    MaxVisionBonusPercent        = 200%
    VisionBonusTestRadius        = 100
    VisionBonusPercentPerFoot    = 2.0%
    DisplayMeleeDamage = WITCHKINGDAG_DAMAGE

    DisplayName            = OBJECT:MordorWitchKing

    CrushableLevel           = 3
    MountedCrusherLevel      = 1
    MountedCrushableLevel    = 3
    CrushWeapon              = AngmarWitchkingCrush

    MinCrushVelocityPercent     = MINCRUSHVELOCITYPERCENT_HERO
    CrushDecelerationPercent    = CRUSHDECELERATIONPERCENT_HERO

    RamPower            = 30
    RamZMult            = 0.5
    Scale               = 1.6

    WeaponSet
        Weapon               = PRIMARY        AngmarWitchKingMaceEdain
        AutoChooseSources    = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions           = WEAPONSET_HERO_MODE
        Weapon               = PRIMARY        AngmarWitchkingSchattenklinge
        AutoChooseSources    = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
        Weapon               = SECONDARY      AngmarWitchkingSchattenklingeagainstSturctures
        OnlyAgainst          = SECONDARY      STRUCTURE BLOCKING_GATE
    End


    ArmorSet
        Conditions      = None
        Armor           = StrongHeroArmor
        DamageFX        = None
    End

    ArmorSet
        Conditions      = MOUNTED
        Armor           = StrongHeroArmorMounted
        DamageFX        = None
    End



    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_AngmarWitchKingBody

    AutoResolveArmor
        Armor = AutoResolve_AngmarWitchKingArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_AngmarWitchKingWeapon
    End





    VoiceAttack                = AngWitchkingVoiceAttack
    VoiceAttackCharge          = AngWitchkingVoiceAttackCharge
    VoiceAttackMachine         = AngWitchkingVoiceAttack
    VoiceAttackStructure       = AngWitchkingVoiceAttackBuilding
    VoiceCreated               = AngWitchkingVoiceSalute
    VoiceFullyCreated          = AngWitchkingVoiceSalute
    VoiceMove                  = AngWitchkingVoiceMove
    VoiceMoveToCamp            = AngWitchkingVoiceMoveCamp
    VoiceMoveWhileAttacking    = AngWitchkingVoiceDisengage
    VoicePriority              = 95
    VoiceRetreatToCastle       = AngWitchkingVoiceRetreat
    VoiceSelect                = AngWitchkingVoiceSelect
    VoiceSelectBattle          = AngWitchkingVoiceSelectBattle
    VoiceGuard                 = AngWitchkingVoiceGarrison
    VoiceFear                  = AngWitchkingVoiceHelpMe

    SoundImpact                = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitEvilMenTransportShip   = AngWitchkingVoiceMoveShip
        VoiceGarrison                        = AngWitchkingVoiceGarrison
        VoiceInitiateCaptureBuilding         = AngWitchkingVoiceCaptureBuilding
        VoiceSpecialAbilityCurseEnemy        = AngWitchkingVoiceModeHrWitchking
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
    MaxUpdateRangeCap = 800
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:BodyFallSoldier            Animation:MUWCHKNG_SKL.MUWCHKNG_DIEA    Frames:67
        AnimationSound = Sound:BodyFallSoldier            Animation:MUWCHKNG_SKL.MUWCHKNG_DIEB    Frames:122
        AnimationSound = Sound:BodyFallSoldier            Animation:MUWCHKNG_SKL.MUWCHKNG_LNDA    Frames:4
        AnimationSound = Sound:BodyFallSoldier            Animation:MUWCHKNG_SKL.MUWCHKNG_LNDB    Frames:4
        AnimationSound = Sound:HorseMoveFootsteps         Animation:KUKngMount_SKL.KUKngMount_ACCL    Frames:15 32
        AnimationSound = Sound:HorseMoveFootsteps         Animation:KUKngMount_SKL.KUKngMount_RUNA    Frames:0
        AnimationSound = Sound:HorseMoveFootsteps         Animation:KUKngMount_SKL.KUKngMount_TNL1    Frames:0
        AnimationSound = Sound:HorseMoveFootsteps         Animation:KUKngMount_SKL.KUKngMount_TNR1    Frames:0

        AnimationSound = Sound:HorseWhinny                Animation:KUKngMount_SKL.KUKngMount_IDLC    Frames:3

        AnimationSound = Sound:BodyFallSoldier            Animation:KUKngMount_SKL.KUKngMount_LNDA    Frames:3 10
        AnimationSound = Sound:HorseDieForHero            Animation:KUKngMount_SKL.KUKngMount_LNDA    Frames:2
        AnimationSound = Sound:HorseDieForHero            Animation:KUKngMount_SKL.KUKngMount_DIEA    Frames:0
        AnimationSound = Sound:BodyFallGenericNoArmor     Animation:KUKngMount_SKL.KUKngMount_DIEA    Frames:6
        AnimationSound = Sound:BodyFallSoldier            Animation:KUKngMount_SKL.KUKngMount_DIEA    Frames:45
    End

   #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    EvaEventDieOwner        = AngmarWitchkingDie


    RadarPriority = UNIT
    ThingClass = CHARACTER_UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS SCORE HERO GRAB_AND_DROP INFANTRY ARMY_SUMMARY HEAVY_MELEE_HITTER

    Body = RespawnBody ModuleTag_02
        CheerRadius               = EMOTION_CHEER_RADIUS
        MaxHealth                 = WITCHKINGDAG_HEALTH
        MaxHealthDamaged          = 2000
        DodgePercent              = HERO_DODGE_PERCENT
        PermanentlyKilledByFilter = NONE
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                    = DYING
        DeathAnimationTime           = 5133
        RespawnAnim                  = LEVELED
        RespawnAnimationTime         = 2000
        AutoRespawnAtObjectFilter    = NONE +CASTLE_KEEP
        ButtonImage                  = HIAngWitchKingNew
        RespawnAsTemplate            = AngmarWitchking_mod

        RespawnRules =    AutoSpawn:No           Cost:WITCHKINGDAG_COST       Time:SILMARIL_HERO_RESPAWNTIME        Health:100%
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    Behavior = AutoHealBehavior ModuleTag_LurtzHealing
        StartsActive            = Yes
        HealingAmount           = HERO_HEAL_AMOUNT
        HealingDelay            = 1000
        StartHealingDelay       = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat   = Yes
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle    = Yes ATTACK_BUILDINGS
        BurningDeathTime              = BURNINGDEATH_DURATION_INFANTRY
        AILuaEventsList               = AngmarHexenkonigFunctions
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_GOOD_HERO_SPEED
    End

    LocomotorSet
        Locomotor = HeroHorseLocomotor
        Condition = SET_MOUNTED
        Speed     = NORMAL_CAVALRY_FAST_MEMBER_SPEED
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 2533
    End

    Behavior = SquishCollide ModuleTag_06

    End


    Behavior = SlowDeathBehavior ModuleTag_08
        DeathTypes = ALL
        SinkDelay = 3000
        SinkRate = 0.80
        DestructionDelay = 12000
        Sound = INITIAL AngWitchkingVoiceDie
    End

      Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 2000
        HitReactionLifeTimer2 = 2000
        HitReactionLifeTimer3 = 2000

        HitReactionThreshold1 = 0.0
        HitReactionThreshold2 = 25.0
        HitReactionThreshold3 = 50.0
    End

    #include "..\..\..\includes\CaptureBuilding.inc"





    Behavior = CitadelSlaughterHordeContain ModuleTag_SlaughterMe
        PassengerFilter              = NONE +TheDroppedRing
        ObjectStatusOfContained      = UNSELECTABLE ENCLOSED
        ContainMax                   = 1
        AllowEnemiesInside           = No
        AllowAlliesInside            = Yes
        AllowNeutralInside           = No
        AllowOwnPlayerInsideOverride = Yes
        EnterSound                   = AngmarWitchking_RingReturned
        EntryOffset                  = X:0.0 Y:0.0 Z:0.0
        EntryPosition                = X:0.0 Y:0.0 Z:0.0
        ExitOffset                   = X:0.0 Y:0.0 Z:0.0
        StatusForRingEntry           = HOLDING_THE_RING
        UpgradeForRingEntry          = Upgrade_RingHero Upgrade_FortressRingHero
        ObjectToDestroyForRingEntry  = NONE +TheDroppedRing
        FXForRingEntry               = FX_OneRingFlare
    End

    Behavior = PickupStuffUpdate ModuleTag_PickupStuffUpdate
        SkirmishAIOnly      = Yes
        StuffToPickUp       = NONE +TheDroppedRing
        ScanRange           = 3000
        ScanIntervalSeconds = 0.5
    End

    Behavior = ModelConditionUpgrade ModulTag_RingHeroMC
        TriggeredBy         = Upgrade_RingHero Upgrade_FortressRingHero
        RequiresAllTriggers = Yes
        AddConditionFlags   = ONE_RING
    End

    Behavior = SpecialPowerModule ModuleTag_GeprufteStarter
         SpecialPowerTemplate           = SpecialAbilityGandalfGeprufte
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Geprufte
         SpecialPowerTemplate           = SpecialAbilityGandalfGeprufte
         MountedTemplate                = AngmarWitchking_modRing
         SynchronizeTimerOnSpecialPower = SpecialAbilityKnifeFighter SpecialAbilityCirdanRingNarya SpecialAbilityCurseEnemyAngmar SpecialAbilityFortressMachtdesHK SpecialAbilityBlitzendeKlingen SpecialAbilityWordOfPower2
         UnpackTime                     = OBJECT_TOGGLE_TIME
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End

    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy                     = Upgrade_RingHero
        GetUpgradeCommandButtonName     = Command_SpecialAbilityGandalfGeprufte
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FactionLeaderLeadershipStart
        SpecialPowerTemplate    = SpecialAbilityFakeLeadership3
    End

    Behavior = SpecialPowerModule ModuleTag_FactionLeaderLeadershipUpdate
        SpecialPowerTemplate        = SpecialAbilityFakeLeadership3
        UpdateModuleStartsAttack    = No
        StartsPaused                = No
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_FactionLeaderLeadership
        StartsActive     = Yes
        BonusName        = FactionLeaderGlobalLeadership
        RefreshDelay     = 2000
        Range            = 625
        ObjectFilter     = ANGMAR_LEADERSHIP_UNITS_OBF
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_UnheilLeadership
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        TriggeredBy               = Upgrade_Level_1
    End

    Behavior = SpecialPowerModule ModuleTag_UnheilUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = Yes
        StartsPaused              = Yes
    End

    Behavior = ReflectDamage ModuleTag_ReflectDamage
        DamageTypesToReflect      = +CRUSH +SLASH +HERO +URUK +SPECIALIST
        ReflectDamagePercentage   = 30%
        MinimumDamageToReflect    = 0.2
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SchattenklingeEnabler
        SpecialPowerTemplate    = SpecialAbilityAngmarWitchkingSchattenklinge
        TriggeredBy             = Upgrade_Level_4
        ObeyRechageOnTrigger    = Yes
        RequiresAllTriggers     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_SchattenklingeStarter
        SpecialPowerTemplate    = SpecialAbilityAngmarWitchkingSchattenklinge
        StartsPaused            = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_SchattenklingeUpdate
        SpecialPowerTemplate    = SpecialAbilityAngmarWitchkingSchattenklinge
        HeroAttributeModifier   = HKFeuerSchwertBonusSpell
        HeroEffectDuration      = 30000
        UnpackTime              = 1
        TriggerSound            = FurstderVampireMS
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_GrausamEnabler
        SpecialPowerTemplate         = SpecialAbilityGrausamWitchking
        TriggeredBy                  = Upgrade_Level_7
        ObeyRechageOnTrigger         = Yes
        RequiresAllTriggers          = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_GrausamStarter
        SpecialPowerTemplate         = SpecialAbilityGrausamWitchking
        StartsPaused                 = Yes
        UpdateModuleStartsAttack     = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_GrausamWeaponFireUpdate
        SpecialPowerTemplate         = SpecialAbilityGrausamWitchking
        WhichSpecialWeapon           = 2
        SkipContinue                 = Yes
        FreezeAfterTriggerDuration   = 100
        UnpackTime                   = 700
        PreparationTime              = 1
        PackTime                     = 100
        AwardXPForTriggering         = 0
        StartAbilityRange            = 270
        SpecialWeapon                = GrausamerAnsturmWeapon
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_WordEnabler
        SpecialPowerTemplate = SpecialAbilityWordOfPower2
        TriggeredBy          = Upgrade_Level_10
        RequiresAllTriggers  = Yes
        ObeyRechageOnTrigger = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_WordStarter
        SpecialPowerTemplate      = SpecialAbilityWordOfPower2
        UpdateModuleStartsAttack  = Yes
        StartsPaused              = Yes

    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WordWeaponFireUpdate
        SpecialPowerTemplate      = SpecialAbilityWordOfPower2
        WhichSpecialWeapon        = 3
        SkipContinue              = Yes
        UnpackTime                = 1700
        PackTime                  = 1
        FreezeAfterTriggerDuration = 2500
        AwardXPForTriggering      = 0
        StartAbilityRange         = 280.0
        SpecialWeapon             = HaloAngmars
    End

    Behavior = AutoAbilityBehavior ModuleTag_WoPAutoAbility
	SpecialAbility		= SpecialAbilityWordOfPower2
	ForbiddenStatus 	= INSIDE_GARRISON
	MaxScanRange		= GANDALF_WORD_OF_POWER_RANGE
	Query			= 40 ALL ENEMIES -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL -FS_BASE_DEFENSE
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BlackRiderDreadVisage
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy = Upgrade_Level_1
    End
    Behavior = SpecialPowerModule ModuleTag_BlackRiderDreadVisageUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = Yes
        StartsPaused = No
    End
    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisage
        StartsActive      = Yes
        BonusName         = GenericDebuff
        TriggeredBy       = Upgrade_Level_1
        RefreshDelay      = 2000
        Range             = 200
        TargetEnemy       = Yes
        AntiCategory      = LEADERSHIP STRUCTURE
        ObjectFilter      = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End

    Behavior = RadiateFearUpdate ModuleTag_DreadVisageFear
        InitiallyActive                     = Yes
        TriggeredBy                         = Upgrade_Level_1
        WhichSpecialPower                   = 1
        GenerateTerror                      = No
        GenerateFear                        = Yes
        EmotionPulseRadius                  = ANGMAR_WITCHKING_DREADWRATH_EFFECT_RADIUS
        EmotionPulseInterval                = 1000
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_WitchkingMorgulBlade
        SpecialPowerTemplate    = SpecialAbilityWitchkingMorgulBlade
        TriggeredBy 		= Upgrade_Level_3
        ObeyRechageOnTrigger    = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_WitchkingMorgulBladeStarter
        SpecialPowerTemplate        = SpecialAbilityWitchkingMorgulBlade
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = Yes
        InitiateSound               = AngWitchkingVoiceModeMorgulCorruption
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WitchkingMorgulBladeUpdate
        SpecialPowerTemplate    = SpecialAbilityWitchkingMorgulBlade
        SkipContinue            = Yes

        UnpackTime              = 250
        PreparationTime         = 1
        PersistentPrepTime      = 500
        PackTime                = 100
        WhichSpecialWeapon      = 1

        AwardXPForTriggering    = 0
        StartAbilityRange       = 15.0
        MustFinishAbility       = Yes

        SpecialWeapon           = AngmarWitchkingMorgulBlade
    End

    Behavior = AutoAbilityBehavior ModuleTag_MorgulBladeAutoAbility
        SpecialAbility   = SpecialAbilityWitchkingMorgulBlade
        ForbiddenStatus  = INSIDE_GARRISON
        AllowSelf        = No
        Query            = 1 MORGULBLADE_OBJECT_FILTER
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ScreechUnPause
        SpecialPowerTemplate          = SpecialAbilityScreech
        TriggeredBy                   = Upgrade_Level_1
        ObeyRechageOnTrigger          = Yes
        RequiresAllTriggers           = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_Screech
        SpecialPowerTemplate          = SpecialAbilityScreech
        UpdateModuleStartsAttack      = Yes
        TriggerFX                     = FX_FearBlast
        StartsPaused                  = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_TerribleFuryUpdate
        SpecialPowerTemplate          = SpecialAbilityScreech
        UnpackTime                    = 0
        TriggerSound                  = SauronTerribleFury
        TriggerModelCondition         = ModelConditionState:SPECIAL_POWER_2
        TriggerModelConditionDuration = 35
        UnpackTime                    = 2000
        Instant                       = Yes
        EffectRange                   = 250
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_HOFTWEnabler
        SpecialPowerTemplate          = SpecialAbilityCurseEnemy
        TriggeredBy                   = Upgrade_AngmarHexerdesZwielichtsTrigger Upgrade_AngmarStructureWitcherBuild
        ObeyRechageOnTrigger          = Yes
        RequiresAllTriggers           = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_HOFTW
        SpecialPowerTemplate          = SpecialAbilityCurseEnemy
        StartsPaused                  = Yes
        UpdateModuleStartsAttack      = Yes

    End

    Behavior = CurseSpecialPower ModuleTag_HOFTWUPdate
        SpecialPowerTemplate          = SpecialAbilityCurseEnemy
        CursePercentage               = 100.0%
        StartAbilityRange             = 200.0
        CursedFX                      = FX_SarumanDominateTargets
        TriggerFX                     = FX_CreateaHeroCurse
        TriggerModelCondition         = ModelConditionState:SPECIAL_POWER_1
        TriggerModelConditionDuration = 35
        UnpackTime                    = 2000
        PreparationTime               = 1000
        FreezeAfterTriggerDuration    = 2500
    End







    Behavior                       = OCLSpecialPower ModuleTag_MagieAngmarsOCLSpecialPower
       SpecialPowerTemplate        = SpecialAbilityVerdorbeneMagieAngmars
       OCL                         = OCL_MorgothsDamonSummoning
       CreateLocation              = CREATE_AT_LOCATION
       StartsPaused                = No
    End





    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ToggleMountedWitchkingEnabler
        SpecialPowerTemplate         = SpecialAbilityToggleMountedWitchkingSauronsDiener
        TriggeredBy                  = Upgrade_Level_2
        ObeyRechageOnTrigger         = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_ToggleMountedWitchkingStarter
         SpecialPowerTemplate        = SpecialAbilityToggleMountedWitchkingSauronsDiener
         UpdateModuleStartsAttack    = Yes
         StartsPaused                = Yes
         AvailableAtStart            = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_ToggleMountedWitchkingSauronsDiener
         SpecialPowerTemplate        = SpecialAbilityToggleMountedWitchkingSauronsDiener
         MountedTemplate             = AngmarWitchking_Mounted
         SynchronizeTimerOnSpecialPower = SpecialAbilityScreech SpecialAbilityWitchkingMorgulBlade SpecialAbilityCurseEnemy SpecialAbilityVerdorbeneMagieAngmars SpecialAbilityWordOfPower SpecialAbilityGrausamWitchking SpecialAbilityAngmarWitchkingSchattenklinge SpecialAbilityWordOfPower2
         UnpackTime                  = ANGMAR_MOUNT_TIME
         PreparationTime             = 0
         PackTime                    = 0
         OpacityTarget               = .0
         AwardXPForTriggering        = 0
         IgnoreFacingCheck           = Yes
    End





    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End


    Behavior = AISpecialPowerUpdate ToggleMountedAI
        CommandButtonName = Command_MountHorseBlackRider
        SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_MOUNTED
    End

    Behavior = AISpecialPowerUpdate AragornBladeMasterAI
        CommandButtonName = Command_SpecialAbilityAngmarWitchkingSchattenklinge
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate MightyRageAI
        CommandButtonName = Command_SpecialAbilityGrausamerAnsturm
        SpecialPowerAIType = AI_SPECIAL_POWER_HEAL_AOE
        SpecialPowerRadius = 200.0
    End

    Behavior = AISpecialPowerUpdate GandalfWordOfPowerAI
        CommandButtonName = Command_HaloAngmarsWitchKingAddon
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
        SpecialPowerRadius = 250
    End

    Geometry            = CYLINDER
    GeometryMajorRadius = 9.0
    GeometryHeight      = 30.0
    GeometryIsSmall     = Yes

    Shadow              = SHADOW_DECAL
    ShadowSizeX         = 19
    ShadowSizeY         = 19
    ShadowTexture       = ShadowI
End


ChildObject AngmarWitchking AngmarWitchking_mod
      MaxSimultaneousOfType = 1
End

Object AngmarWitchking_modRing

    SelectPortrait = KUWitchKingPortrait
    ButtonImage    = WOR_WKingAng

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_LeaderHero

    Draw = W3DScriptedModelDraw ModuleTag_01


        RandomTexture = ku_witchkingring.tga  0 ku_witchking.tga

        DefaultModelConditionState
            Model           = kuanghk_skn
            Skeleton        = MUWchKng_SKL
            ParticleSysBone = None BlackRiderFlare FXTrigger:NONE Persist:SPAWN PersistID:100
        End

        ModelConditionState = WEAPONSET_HERO_MODE
            ParticleSysBone = None BlackRiderFlare FXTrigger:NONE Persist:SPAWN PersistID:100
            ParticleSysBone = B_SWORD SchattenklingeHK FollowBone:Yes
        End


        IdleAnimationState
            StateName                = Idle
            Animation
                AnimationName       = MUWchKng_IDLC
                AnimationPriority    = 1
                AnimationBlendTime    = 15
                AnimationMode       = ONCE
            End
            Animation
                AnimationName       = MUWchKng_IDLD
                AnimationPriority = 1
                AnimationBlendTime    = 15
                AnimationMode       = ONCE
            End
            Animation
                AnimationName       = MUWchKng_IDLE
                AnimationPriority = 1
                AnimationBlendTime    = 15
                AnimationMode       = ONCE
            End
            Flags                =    RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle") end
            EndScript
        End






        AnimationState        = PASSENGER MOUNTED
            Animation           = grabbed
                AnimationName       = KUKngMount_SKL.KUKngMount_GBDA
                AnimationMode       = LOOP
                AnimationSpeedFactorRange = 0.8 0.8

            End
            Flags               = RANDOMSTART
        End


        AnimationState        = FREEFALL MOUNTED
            Animation           = freefall
                AnimationName       = KUKngMount_SKL.KUKngMount_FLYA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED_FLAILING MOUNTED
            Animation           = JustDie
                AnimationName       = KUKngMount_SKL.KUKngMount_FLYA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState                =    DYING SPLATTED MOUNTED
            Animation                =    splatted
                AnimationName        =    KUKngMount_SKL.KUKngMount_LNDA
                AnimationMode        =    ONCE
            End
        End

        AnimationState                =    BURNINGDEATH MOUNTED DYING
            Animation
                AnimationName        =    KUKngMount_SKL.KUKngMount_DIEA
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationSpeedFactorRange = 0.8 0.8
            End
        End

        AnimationState                = DYING MOUNTED
            Animation
                AnimationName       = KUKngMount_SKL.KUKngMount_DIEA
                AnimationMode       = ONCE
                AnimationSpeedFactorRange = 0.8 0.8
            End
        End

        AnimationState        = STUNNED_STANDING_UP MOUNTED
            Animation           = StandUp
                AnimationName       = KUKngMount_SKL.KUKngMount_GTPA
                AnimationMode       = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState        = STUNNED MOUNTED
            Animation           = Land
                AnimationName       = KUKngMount_SKL.KUKngMount_LNDA
                AnimationMode       = ONCE
            End
        End

        AnimationState        = MOVING FIRING_OR_PREATTACK_A MOUNTED
            ShareAnimation        = Yes
            Animation           = TrotAndFire
                AnimationName       = KUKngMount_SKL.KUKngMount_RUNB
                AnimationMode       = LOOP
                Distance            = 70
            End
            Flags               = RANDOMSTART
        End

        AnimationState                =    TURN_LEFT_HIGH_SPEED MOUNTED
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_RUNA
                AnimationMode        =    LOOP
                AnimationBlendTime    =    10
            End
        End

        AnimationState                =    TURN_RIGHT_HIGH_SPEED MOUNTED
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_RUNA
                AnimationMode        =    LOOP
                AnimationBlendTime    =    10
            End
        End

        AnimationState                =    MOVING BACKING_UP MOUNTED
            Animation                =    BackingUp
                AnimationName        =    KUKngMount_SKL.KUKngMount_BAKA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState        = MOVING TURN_LEFT MOUNTED
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_TRNL
                AnimationMode        =    LOOP
            End
        End

        AnimationState        = MOVING TURN_RIGHT MOUNTED
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_TRNR
                AnimationMode        =    LOOP
            End
        End

        AnimationState            = MOVING ACCELERATE MOUNTED
            Animation           = Accelerate
                AnimationName   = KUKngMount_SKL.KUKngMount_ACCL
                AnimationMode   = ONCE
                AnimationSpeedFactorRange = 1.3 1.3
            End
        End

        AnimationState            = MOVING DECELERATE MOUNTED
            Animation           = Decelerate
                AnimationName   = KUKngMount_SKL.KUKngMount_DECL
                AnimationMode   = ONCE
                AnimationSpeedFactorRange = 1.0 1.0
            End
        End

        AnimationState        = MOVING MOUNTED
            ShareAnimation        = Yes
            Animation           = RunA
                AnimationName       = KUKngMount_SKL.KUKngMount_RUNA
                AnimationMode       = LOOP
            End
        End


        AnimationState        = FIRING_OR_PREATTACK_A MOUNTED
            Animation           = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_ATKA
                AnimationMode       = ONCE
            End
            Animation           = ATKB
                AnimationName       = KUKngMount_SKL.KUKngMount_ATKB
                AnimationMode       = ONCE
            End

        End


        AnimationState        = SPECIAL_WEAPON_ONE MOUNTED
            Animation             = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_SPCA
                AnimationMode       = ONCE
            End
        End

        AnimationState        = SPECIAL_WEAPON_TWO MOUNTED
            Animation             = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode       = ONCE
            End
        End

        AnimationState        = USER_1 MOUNTED
            StateName        = Attacking
            Animation             = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode       = ONCE
            End
            ParticleSysBone  = "BIP01 SPINE1" AngHKSanctumCharge FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSanctumCharge02 FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSanctumCharge04 FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSmokeGlow FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSmoke4 FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKFlareSmoke FollowBone:Yes
        End




        AnimationState = HIT_REACTION HIT_LEVEL_1 MOUNTED
            Animation = Hit_Level_1_a
                AnimationName = KUKngMount_SKL.KUKngMount_HFMA
                AnimationMode = ONCE
            End
        End



        AnimationState                    = EMOTION_TAUNTING MOUNTED
            ShareAnimation                = Yes
            Animation                    = Taunting
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = ONCE
            End
            Animation                    = Taunting
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode            = ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = EMOTION_POINTING MOUNTED
            Animation                    = Pointing1
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = EMOTION_CELEBRATING MOUNTED
            ShareAnimation                = Yes
            Animation                    = CHRA
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = ONCE
            End
            Animation                    = CHRB
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode            = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = EMOTION_ALERT MOUNTED
            Animation                    = IDLA
                AnimationName            = KUKngMount_SKL.KUKngMount_IDLA
                AnimationMode            = LOOP
                AnimationBlendTime  = 15
            End
        End

        AnimationState                    = RAISING_FLAG MOUNTED
            ShareAnimation                = Yes
            Animation                    = CHRA
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = ONCE
                AnimationSpeedFactorRange        = 0.9 1.1
            End

            Animation                    = CHRB
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode            = ONCE
                AnimationSpeedFactorRange        = 0.9 1.1
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                =    SELECTED MOUNTED
            StateName                =    State_Selected
            Animation                =    AtAttention
                AnimationName        =    KUKngMount_SKL.KUKngMount_ATNB
                AnimationMode        =    Loop
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_To_Selected") end
            EndScript
        End

        AnimationState = MOUNTED
            StateName            = Idle
            Animation           = IdleB
                AnimationName       = KUKngMount_SKL.KUKngMount_IDLB
                AnimationMode       = Loop
                AnimationBlendTime  = 15
                AnimationPriority   = 10
            End
            Animation           = IdleC
                AnimationName       = KUKngMount_SKL.KUKngMount_IDLC
                AnimationMode       = Loop
                AnimationBlendTime  = 15
                AnimationPriority   = 5
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "State_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
            EndScript
        End


        TransitionState                    =    TRANS_Idle_to_Selected
            Animation                    =    ATNA
                AnimationName            =    KUKngMount_SKL.KUKngMount_ATNA
                AnimationMode            =    ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
        End


        TransitionState                    =    TRANS_Selected_to_Idle
            Animation                    =    ATNC
                AnimationName            =    KUKngMount_SKL.KUKngMount_ATNC
                AnimationMode            =    ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Flags                        = START_FRAME_LAST
        End



        AnimationState        = USER_1
            StateName        = Attacking
            Animation             = SPCC
                AnimationName       = MUWchKng_CHRA
                AnimationMode       = ONCE
            End
            ParticleSysBone  = NONE AngHKSanctumCharge FollowBone:Yes
            ParticleSysBone  = NONE AngHKSanctumCharge02 FollowBone:Yes
            ParticleSysBone  = NONE AngHKSanctumCharge04 FollowBone:Yes
            ParticleSysBone  = NONE AngHKSmokeGlow FollowBone:Yes
            ParticleSysBone  = NONE AngHKSmoke4 FollowBone:Yes
            ParticleSysBone  = NONE AngHKFlareSmoke FollowBone:Yes
        End



        AnimationState        = DYING BURNINGDEATH
            Animation           = DIEA
                AnimationName     = MUWchKng_DIEB
                AnimationMode     = ONCE
                AnimationBlendTime = 10
            End
        End
        AnimationState        = DYING
            Animation           = DIEA
                AnimationName     = MUWchKng_DIEB
                AnimationMode     = ONCE
            End
        End

        AnimationState        = BURNINGDEATH
            Animation           = DIEA
                AnimationName     = MUWchKng_MFDA
                AnimationMode     = LOOP
                Distance          = 60
            End
        End


        AnimationState = FREEFALL
            Animation
                AnimationName = MUWchKng_FLYA
                AnimationMode = LOOP
            End
            Flags = RANDOMSTART
        End

        AnimationState = STUNNED_FLAILING
            Animation
                AnimationName = MUWchKng_FLYA
                AnimationMode = LOOP
                AnimationSpeedFactorRange    = 0.4 0.6
            End
            Flags = RANDOMSTART
        End

        AnimationState = STUNNED_STANDING_UP
            Animation
                AnimationName = MUWchKng_GTPB
                AnimationMode = ONCE
            End
        End

        AnimationState            = STUNNED
            Animation           = LNDA
                AnimationName   = MUWchKng_LNDB
                AnimationMode   = ONCE
            End
        End


        AnimationState         =  FIRING_OR_PREATTACK_A WEAPONSET_HERO_MODE
            Animation             = ATA1
                AnimationName         = MUWchKng_ATKA
                AnimationMode         = ONCE
                UseWeaponTiming            = Yes
            End
            Animation             = ATB1
                AnimationName         = MUWchKng_ATKB
                AnimationMode         = ONCE
                UseWeaponTiming            = Yes
            End
        End


        AnimationState        = SPECIAL_WEAPON_THREE
            StateName        = Attacking
            Animation             = ATA1
                AnimationName         = MUWchKng_SPCA
                AnimationMode         = ONCE
            End
        End


        AnimationState        = SPECIAL_WEAPON_ONE
            Animation
                AnimationName         = MUWchKng_ATKA
                AnimationMode         = ONCE
            End
            ParticleSysBone = B_SWORD GiftSchwertHK FollowBone:Yes
        End


        AnimationState        = SPECIAL_WEAPON_TWO
            Animation
                AnimationName         = MUWchKng_LVLA
                AnimationMode         = ONCE
            End
        End



        AnimationState        =  FIRING_OR_PREATTACK_A
            Animation             = ATA1
                AnimationName         = MUWchKng_ATKC
                AnimationMode         = ONCE
                UseWeaponTiming            = Yes
            End
            Animation             = ATB1
                AnimationName         = MUWchKng_ATKD
                AnimationMode         = ONCE
                UseWeaponTiming            = Yes
            End
        End

        AnimationState        =  FIRING_OR_PREATTACK_B
            Animation             = ATA1
                AnimationName         = MUWchKng_ATKC
                AnimationMode         = ONCE
                UseWeaponTiming            = Yes
            End
            Animation             = ATB1
                AnimationName         = MUWchKng_ATKD
                AnimationMode         = ONCE
                UseWeaponTiming            = Yes
            End
        End

        AnimationState        =  FIRING_OR_PREATTACK_C
            Animation             = ATA1
                AnimationName         = MUWchKng_ATKC
                AnimationMode         = ONCE
                UseWeaponTiming            = Yes
            End
            Animation             = ATB1
                AnimationName         = MUWchKng_ATKD
                AnimationMode         = ONCE
                UseWeaponTiming            = Yes
            End
        End

        AnimationState        =  FIRING_OR_PREATTACK_D
            Animation             = ATA1
                AnimationName         = MUWchKng_ATKC
                AnimationMode         = ONCE
                UseWeaponTiming            = Yes
            End
            Animation             = ATB1
                AnimationName         = MUWchKng_ATKD
                AnimationMode         = ONCE
                UseWeaponTiming            = Yes
            End
        End



        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            Animation           = RUNB
                AnimationName     = MUWchKng_ATRA
                AnimationMode     = LOOP
            End
            Flags = RESTART_ANIM_WHEN_COMPLETE
        End


        AnimationState        = BETWEEN_FIRING_SHOTS_A
            Animation           = ALERT_1
                AnimationName     = MUWchKng_IDLC
                AnimationMode     = ONCE
                AnimationBlendTime        = 10
            End
        End

        AnimationState        = MOVING
            Animation           = RUNB
                AnimationName     = MUWchKng_RUNB
                AnimationMode     = LOOP
            End
            Flags               = RANDOMSTART
        End


        AnimationState = LEVELED
            Animation = Hit_Level_1_a
                AnimationName = MUWchKng_LVLA
                AnimationMode = ONCE
            End
        End


        AnimationState = HIT_REACTION HIT_LEVEL_1
            Animation = Hit_Level_1_a
                AnimationName = MUWchKng_HITA
                AnimationMode = ONCE
            End
        End

        AnimationState        = EMOTION_ALERT
            Animation           = ALERT_1
                AnimationName     = MUWchKng_IDLC
                AnimationMode     = ONCE
            End
            Flags               = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState = RAISING_FLAG
            Animation
                AnimationName = MUWchKng_CHRA
                AnimationMode = LOOP
            End
        End

        AnimationState = SELECTED
            Animation
                AnimationName = MUWchKng_ATNB
                AnimationMode = LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
            EndScript
        End

        TransitionState       = TRANS_IdleToSelected
            Animation           = ATNA
                AnimationName     = MUWchKng_ATNA
                AnimationMode     = ONCE
            End
        End

        TransitionState       = TRANS_SelectedToIdle
            Animation           = ATNA
                AnimationName     = MUWchKng_ATNC
                AnimationMode     = ONCE
            End
            Flags = START_FRAME_LAST
        End

    End

    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End


    Side                = Angmar
    EditorSorting        = UNIT
    ThreatLevel            = WITCHKING_THREAT_LEVEL
    BuildCost            = WITCHKINGDAG_COST
    BuildTime            = SILMARIL_HERO_BUILDTIME
    TransportSlotCount    = TRANSPORTSLOTCOUNT_HERO
    CommandSet            = AngmarWitchKingmodCommandSet_OneRing
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG
    CommandPoints        = 0
    RecruitText        = CONTROLBAR:AngmarWitchKingRecruit
    ReviveText        = CONTROLBAR:AngmarWitchKingRevive
    Hotkey            = CONTROLBAR:AngmarWitchKingHotkey
    MaxSimultaneousOfType = 1
    VisionRange            = ANGMAR_WITCHKING_VISION_RANGE
    ShroudClearingRange         = ANGMAR_WITCHKING_SHROUD_RANGE
    MaxVisionBonusPercent        = 200%
    VisionBonusTestRadius        = 100
    VisionBonusPercentPerFoot    = 2.0%
    DisplayMeleeDamage = WITCHKINGDAG_DAMAGE

    DisplayName            = OBJECT:MordorWitchKing


    CrushableLevel             = 4
    MountedCrusherLevel        = 1
    MountedCrushableLevel      = 4
    CrushWeapon                = AngmarWitchkingCrush

    MinCrushVelocityPercent    = MINCRUSHVELOCITYPERCENT_HERO
    CrushDecelerationPercent   = CRUSHDECELERATIONPERCENT_HERO

    RamPower            = 30
    RamZMult            = 0.5
    Scale                 = 1.6

    WeaponSet
        Weapon               = PRIMARY        AngmarWitchKingMaceEdainSilmaril
        AutoChooseSources    = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    WeaponSet
        Conditions           = WEAPONSET_HERO_MODE
        Weapon               = PRIMARY        AngmarWitchkingSchattenklingeRing
        AutoChooseSources    = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
        Weapon               = SECONDARY      AngmarWitchkingSchattenklingeagainstSturcturesRing
        OnlyAgainst          = SECONDARY      STRUCTURE BLOCKING_GATE
    End



    ArmorSet
        Conditions      = None
        Armor           = SilmarilHeroArmor
        DamageFX        = None
    End

    ArmorSet
        Conditions      = MOUNTED
        Armor           = SilmarilHeroMountedArmor
        DamageFX        = None
    End



    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_AngmarWitchKingBody

    AutoResolveArmor
        Armor = AutoResolve_AngmarWitchKingArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_AngmarWitchKingWeapon
    End





    VoiceAttack                = AngWitchkingVoiceAttack
    VoiceAttackCharge            = AngWitchkingVoiceAttackCharge
    VoiceAttackMachine            = AngWitchkingVoiceAttack
    VoiceAttackStructure            = AngWitchkingVoiceAttackBuilding
    VoiceCreated                = SH_ForAngmar
    VoiceFullyCreated             = SH_ForAngmar
    VoiceMove                = AngWitchkingVoiceMove
    VoiceMoveToCamp                = AngWitchkingVoiceMoveCamp
    VoiceMoveWhileAttacking            = AngWitchkingVoiceDisengage
    VoicePriority                = 95
    VoiceRetreatToCastle            = AngWitchkingVoiceRetreat
    VoiceSelect                = AngWitchkingVoiceSelect
    VoiceSelectBattle             = AngWitchkingVoiceSelectBattle
    VoiceGuard                = AngWitchkingVoiceGarrison
    VoiceFear                = AngWitchkingVoiceHelpMe

    SoundImpact                = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitEvilMenTransportShip    = AngWitchkingVoiceMoveShip
        VoiceGarrison                = AngWitchkingVoiceGarrison
        VoiceInitiateCaptureBuilding        = AngWitchkingVoiceCaptureBuilding
        VoiceSpecialAbilityCurseEnemy        = AngWitchkingVoiceModeHrWitchking
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
    MaxUpdateRangeCap = 800
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:BodyFallSoldier            Animation:MUWCHKNG_SKL.MUWCHKNG_DIEA    Frames:67
        AnimationSound = Sound:BodyFallSoldier            Animation:MUWCHKNG_SKL.MUWCHKNG_DIEB    Frames:122
        AnimationSound = Sound:BodyFallSoldier            Animation:MUWCHKNG_SKL.MUWCHKNG_LNDA    Frames:4
        AnimationSound = Sound:BodyFallSoldier            Animation:MUWCHKNG_SKL.MUWCHKNG_LNDB    Frames:4
        AnimationSound = Sound:HorseMoveFootsteps         Animation:KUKngMount_SKL.KUKngMount_ACCL    Frames:15 32
        AnimationSound = Sound:HorseMoveFootsteps         Animation:KUKngMount_SKL.KUKngMount_RUNA    Frames:0
        AnimationSound = Sound:HorseMoveFootsteps         Animation:KUKngMount_SKL.KUKngMount_TNL1    Frames:0
        AnimationSound = Sound:HorseMoveFootsteps         Animation:KUKngMount_SKL.KUKngMount_TNR1    Frames:0

        AnimationSound = Sound:HorseWhinny                Animation:KUKngMount_SKL.KUKngMount_IDLC    Frames:3

        AnimationSound = Sound:BodyFallSoldier            Animation:KUKngMount_SKL.KUKngMount_LNDA    Frames:3 10
        AnimationSound = Sound:HorseDieForHero            Animation:KUKngMount_SKL.KUKngMount_LNDA    Frames:2
        AnimationSound = Sound:HorseDieForHero            Animation:KUKngMount_SKL.KUKngMount_DIEA    Frames:0
        AnimationSound = Sound:BodyFallGenericNoArmor     Animation:KUKngMount_SKL.KUKngMount_DIEA    Frames:6
        AnimationSound = Sound:BodyFallSoldier            Animation:KUKngMount_SKL.KUKngMount_DIEA    Frames:45
    End

   #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    EvaEventDieOwner        = AngmarWitchkingDie



    RadarPriority    = UNIT
    ThingClass = CHARACTER_UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS SCORE HERO GRAB_AND_DROP INFANTRY ARMY_SUMMARY HEAVY_MELEE_HITTER

    Body = RespawnBody ModuleTag_02
        CheerRadius               = EMOTION_CHEER_RADIUS
        MaxHealth                 = WITCHKINGDAG_HEALTH
        MaxHealthDamaged          = 2000
        DodgePercent              = HERO_DODGE_PERCENT
        PermanentlyKilledByFilter = NONE
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                  = DYING
        DeathAnimationTime         = 5133
        RespawnAnim                = LEVELED
        RespawnAnimationTime       = 2000
        AutoRespawnAtObjectFilter  = NONE +CASTLE_KEEP
        ButtonImage                = WOR_WKingAng
        RespawnAsTemplate          = AngmarWitchking_mod

        RespawnRules =    AutoSpawn:No           Cost:WITCHKINGDAG_COST       Time:SILMARIL_HERO_RESPAWNTIME        Health:100%
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End

    Behavior = AutoHealBehavior ModuleTag_LurtzHealing
        StartsActive            = Yes
        HealingAmount            = HERO_HEAL_AMOUNT
        HealingDelay            = 1000
        StartHealingDelay        = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat    = Yes
    End

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle    = Yes ATTACK_BUILDINGS
        BurningDeathTime              = BURNINGDEATH_DURATION_INFANTRY
        AILuaEventsList               = AngmarHexenkonigFunctions
    End

    LocomotorSet
        Locomotor = HeroHumanLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_GOOD_HERO_SPEED
    End

    LocomotorSet
        Locomotor = HeroHorseLocomotor
        Condition = SET_MOUNTED
        Speed     = NORMAL_CAVALRY_FAST_MEMBER_SPEED
    End


    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        ShockStandingTime = 2533
    End

    Behavior = SquishCollide ModuleTag_06

    End


    Behavior = SlowDeathBehavior ModuleTag_08
        DeathTypes = ALL
        SinkDelay = 3000
        SinkRate = 0.80
        DestructionDelay = 12000
        Sound = INITIAL AngWitchkingVoiceDie
    End

      Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 2000
        HitReactionLifeTimer2 = 2000
        HitReactionLifeTimer3 = 2000

        HitReactionThreshold1 = 0.0
        HitReactionThreshold2 = 25.0
        HitReactionThreshold3 = 50.0
    End

    #include "..\..\..\includes\CaptureBuilding.inc"





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SilmarilHeroLeadershipStart
        SpecialPowerTemplate    = SpecialAbilityFakeLeadership3
    End

    Behavior = SpecialPowerModule ModuleTag_SilmarilHeroLeadershipUpdate
        SpecialPowerTemplate        = SpecialAbilityFakeLeadership3
        UpdateModuleStartsAttack    = No
        StartsPaused                = No
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_SilmarilHeroLeadership
        StartsActive     = Yes
        BonusName        = SilmarilHeroGlobalLeadership
        RefreshDelay     = 2000
        Range            = 1250
        ObjectFilter     = ALL -HERO -MACHINE -SHIP -DOZER -STRUCTURE ALLIES
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_UnheilLeadership
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        TriggeredBy               = Upgrade_Level_1
    End

    Behavior = SpecialPowerModule ModuleTag_UnheilUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = Yes
        StartsPaused              = Yes
    End

    Behavior = ReflectDamage ModuleTag_ReflectDamage
        DamageTypesToReflect      = +CRUSH +SLASH +HERO +URUK +SPECIALIST
        ReflectDamagePercentage   = 60%
        MinimumDamageToReflect    = 0.2
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SchattenklingeEnabler
        SpecialPowerTemplate    = SpecialAbilityAngmarWitchkingSchattenklinge
        TriggeredBy             = Upgrade_Level_4
        ObeyRechageOnTrigger    = Yes
        RequiresAllTriggers     = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_SchattenklingeStarter
        SpecialPowerTemplate    = SpecialAbilityAngmarWitchkingSchattenklinge
        StartsPaused            = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_SchattenklingeUpdate
        SpecialPowerTemplate    = SpecialAbilityAngmarWitchkingSchattenklinge
        HeroAttributeModifier   = HKFeuerSchwertBonusSpell
        HeroEffectDuration      = 30000
        UnpackTime              = 1
        TriggerSound            = FurstderVampireMS
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_GrausamEnabler
        SpecialPowerTemplate         = SpecialAbilityGrausamWitchking
        TriggeredBy                  = Upgrade_Level_7
        ObeyRechageOnTrigger         = Yes
        RequiresAllTriggers          = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_GrausamStarter
        SpecialPowerTemplate         = SpecialAbilityGrausamWitchking
        StartsPaused                 = Yes
        UpdateModuleStartsAttack     = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_GrausamWeaponFireUpdate
        SpecialPowerTemplate         = SpecialAbilityGrausamWitchking
        WhichSpecialWeapon           = 2
        SkipContinue                 = Yes
        FreezeAfterTriggerDuration   = 100
        UnpackTime                   = 700
        PreparationTime              = 1
        PackTime                     = 100
        AwardXPForTriggering         = 0
        StartAbilityRange            = 270
        SpecialWeapon                = GrausamerAnsturmWeapon
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_WordEnabler
        SpecialPowerTemplate = SpecialAbilityWordOfPower2
        TriggeredBy          = Upgrade_Level_10
        RequiresAllTriggers  = Yes
        ObeyRechageOnTrigger = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_WordStarter
        SpecialPowerTemplate      = SpecialAbilityWordOfPower2
        UpdateModuleStartsAttack  = Yes
        StartsPaused              = Yes

    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WordWeaponFireUpdate
        SpecialPowerTemplate      = SpecialAbilityWordOfPower2
        WhichSpecialWeapon        = 3
        SkipContinue              = Yes
        UnpackTime                = 1700
        PackTime                  = 1
        FreezeAfterTriggerDuration = 2500
        AwardXPForTriggering      = 0
        StartAbilityRange         = 80.0
        SpecialWeapon             = HaloAngmars
    End

    Behavior = AutoAbilityBehavior ModuleTag_WoPAutoAbility
	SpecialAbility		= SpecialAbilityWordOfPower2
	ForbiddenStatus 	= INSIDE_GARRISON
	MaxScanRange		= GANDALF_WORD_OF_POWER_RANGE
	Query			= 40 ALL ENEMIES -WALL_UPGRADE -WALL_HUB -WALL_SEGMENT -DEFENSIVE_WALL -FS_BASE_DEFENSE
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_BlackRiderDreadVisage
        SpecialPowerTemplate = SpecialAbilityFakeLeadership
        TriggeredBy = Upgrade_Level_1
    End
    Behavior = SpecialPowerModule ModuleTag_BlackRiderDreadVisageUpdate
        SpecialPowerTemplate      = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack  = Yes
        StartsPaused = No
    End
    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisage
        StartsActive      = Yes
        BonusName         = GenericDebuff
        TriggeredBy       = Upgrade_Level_1
        RefreshDelay      = 2000
        Range             = 200
        TargetEnemy       = Yes
        AntiCategory      = LEADERSHIP STRUCTURE
        ObjectFilter      = ANY +INFANTRY +CAVALRY -STRUCTURE -BASE_FOUNDATION -HERO -HORDE
    End


    Behavior = RadiateFearUpdate ModuleTag_DreadVisageFear
        InitiallyActive                     = Yes
        TriggeredBy                         = Upgrade_Level_1
        WhichSpecialPower                   = 1
        GenerateTerror                      = No
        GenerateFear                        = Yes
        EmotionPulseRadius                  = ANGMAR_WITCHKING_DREADWRATH_EFFECT_RADIUS
        EmotionPulseInterval                = 1000
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_WitchkingMorgulBlade
        SpecialPowerTemplate = SpecialAbilityWitchkingMorgulBlade
        TriggeredBy = Upgrade_Level_3
        ObeyRechageOnTrigger        = Yes
    End
    Behavior = SpecialPowerModule ModuleTag_WitchkingMorgulBladeStarter
        SpecialPowerTemplate        = SpecialAbilityWitchkingMorgulBlade
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = Yes
        InitiateSound                = AngWitchkingVoiceModeMorgulCorruption
    End
    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WitchkingMorgulBladeUpdate
        SpecialPowerTemplate    = SpecialAbilityWitchkingMorgulBlade
        SkipContinue            = Yes

        UnpackTime                = 250
        PreparationTime            = 1
        PersistentPrepTime        = 500
        PackTime                = 100
        WhichSpecialWeapon        = 1

        AwardXPForTriggering    = 0
        StartAbilityRange        = 15.0
        MustFinishAbility     = Yes

        SpecialWeapon            = AngmarWitchkingMorgulBlade
    End
    Behavior = AutoAbilityBehavior ModuleTag_MorgulBladeAutoAbility
        SpecialAbility    = SpecialAbilityWitchkingMorgulBlade
        ForbiddenStatus = INSIDE_GARRISON
        AllowSelf        = No
        Query            = 1 MORGULBLADE_OBJECT_FILTER
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ScreechUnPause
        SpecialPowerTemplate          = SpecialAbilityScreech
        TriggeredBy                   = Upgrade_Level_1
        ObeyRechageOnTrigger          = Yes
        RequiresAllTriggers           = Yes
    End
    Behavior = SpecialPowerModule ModuleTag_Screech
        SpecialPowerTemplate          = SpecialAbilityScreech
        UpdateModuleStartsAttack      = Yes
        TriggerFX                     = FX_FearBlast
        StartsPaused                  = Yes
    End
    Behavior = SpecialAbilityUpdate ModuleTag_TerribleFuryUpdate
        SpecialPowerTemplate          = SpecialAbilityScreech
        UnpackTime                    = 0
        TriggerSound                  = SauronTerribleFury
        TriggerModelCondition         = ModelConditionState:SPECIAL_POWER_2
        TriggerModelConditionDuration = 35
        UnpackTime                    = 2000
        Instant                       = Yes
        EffectRange                   = 250
    End






    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_HOFTWEnabler
        SpecialPowerTemplate          = SpecialAbilityCurseEnemy
        TriggeredBy                   = Upgrade_AngmarHexerdesZwielichtsTrigger Upgrade_AngmarStructureWitcherBuild
        ObeyRechageOnTrigger          = Yes
        RequiresAllTriggers           = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_HOFTW
        SpecialPowerTemplate          = SpecialAbilityCurseEnemy
        StartsPaused                  = Yes
        UpdateModuleStartsAttack      = Yes

    End

    Behavior = CurseSpecialPower ModuleTag_HOFTWUPdate
        SpecialPowerTemplate          = SpecialAbilityCurseEnemy
        CursePercentage               = 100.0%
        StartAbilityRange             = 200.0
        CursedFX                      = FX_SarumanDominateTargets
        TriggerFX                     = FX_CreateaHeroCurse
        TriggerModelCondition         = ModelConditionState:SPECIAL_POWER_1
        TriggerModelConditionDuration = 35
        UnpackTime                    = 2000
        PreparationTime               = 1000
        FreezeAfterTriggerDuration    = 2500
    End







    Behavior                       = OCLSpecialPower ModuleTag_MagieAngmarsOCLSpecialPower
       SpecialPowerTemplate        = SpecialAbilityVerdorbeneMagieAngmars
       OCL                         = OCL_MorgothsDamonSummoning
       CreateLocation              = CREATE_AT_LOCATION
       StartsPaused                = No
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ToggleMountedWitchkingEnabler
        SpecialPowerTemplate         = SpecialAbilityToggleMountedWitchkingSauronsDiener
        TriggeredBy                  = Upgrade_Level_1
        ObeyRechageOnTrigger         = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_ToggleMountedWitchkingStarter
         SpecialPowerTemplate        = SpecialAbilityToggleMountedWitchkingSauronsDiener
         UpdateModuleStartsAttack    = Yes
         StartsPaused                = Yes
         AvailableAtStart            = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_ToggleMountedWitchkingSauronsDiener
         SpecialPowerTemplate        = SpecialAbilityToggleMountedWitchkingSauronsDiener
         MountedTemplate             = AngmarWitchking_MountedRing
         SynchronizeTimerOnSpecialPower = SpecialAbilityScreech SpecialAbilityWitchkingMorgulBlade SpecialAbilityCurseEnemy SpecialAbilityVerdorbeneMagieAngmars SpecialAbilityWordOfPower SpecialAbilityGrausamWitchking SpecialAbilityAngmarWitchkingSchattenklinge SpecialAbilityWordOfPower2
         UnpackTime                  = ANGMAR_MOUNT_TIME
         PreparationTime             = 0
         PackTime                    = 0
         OpacityTarget               = .0
         AwardXPForTriggering        = 0
         IgnoreFacingCheck           = Yes
    End






    Behavior = FireWeaponUpdate ModuleTag_WeaponFiring
        FireWeaponNugget
            WeaponName = AngmarWitchkingRingauswirkungWeapon
            Offset = X:0 Y:0 Z:0
            FireDelay = 0
            OneShot = No
        End
    End

    Behavior = ObjectCreationUpgrade CreateTheSnow
        TriggeredBy       = Upgrade_Level_1
        Delay             = 0.0
        ThingToSpawn      = SnowRainObject_HK
        FadeInTime        = 0
    End

    Behavior = FXListDie ModuleTag_AnnounceWeLostTheRing
            DeathFX             = GandalfAnnounceFortressDeathLostRingFX
    End

    Behavior = CreateObjectDie ModuleTag_DropTheRing
        CreationList            = OCL_TheOneRing
    End

    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End

    Behavior = RemoveUpgradeUpgrade ModuleTag_RemoveSilmaril
        TriggeredBy                   = Upgrade_AllFactionUpgrade
        UpgradeToRemove               = Upgrade_FortressRingHero Upgrade_RingHero
        RemoveFromAllPlayerObjects    = Yes
        SuppressEvaEventForRemoval    = Yes
    End





    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End


    Behavior = AISpecialPowerUpdate ToggleMountedAI
        CommandButtonName = Command_MountHorseBlackRider
        SpecialPowerAIType = AI_SPECIAL_POWER_TOGGLE_MOUNTED
    End

    Behavior = AISpecialPowerUpdate AragornBladeMasterAI
        CommandButtonName = Command_SpecialAbilityAngmarWitchkingSchattenklinge
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate MightyRageAI
        CommandButtonName = Command_SpecialAbilityGrausamerAnsturm
        SpecialPowerAIType = AI_SPECIAL_POWER_HEAL_AOE
        SpecialPowerRadius = 200.0
    End

    Behavior = AISpecialPowerUpdate GandalfWordOfPowerAI
        CommandButtonName = Command_HaloAngmarsWitchKingAddon
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
        SpecialPowerRadius = 250
    End

    Behavior = AISpecialPowerUpdate SummonPalace_AI
        CommandButtonName  = Command_VerdorbeneMagieAngmars
        SpecialPowerAIType = AI_SPECIAL_POWER_TARGETAOE_SUMMON
        SpecialPowerRadius = 30.0
    End

    Geometry            = CYLINDER
    GeometryMajorRadius = 9.0
    GeometryHeight      = 30.0
    GeometryIsSmall     = Yes

    Shadow              = SHADOW_DECAL
    ShadowSizeX         = 19
    ShadowSizeY         = 19
    ShadowTexture       = ShadowI

End

ChildObject AngmarWitchking_Mounted AngmarWitchking_mod

    Draw = W3DScriptedModelDraw ModuleTag_01

        DefaultModelConditionState
            Model           = kuhk_hrs
        End

        ModelConditionState = WEAPONSET_HERO_MODE
            ParticleSysBone = B_SWORD SchattenklingeHK FollowBone:Yes
        End


        AnimationState        = PASSENGER
            Animation           = grabbed
                AnimationName       = KUKngMount_SKL.KUKngMount_GBDA
                AnimationMode       = LOOP
                AnimationSpeedFactorRange = 0.8 0.8

            End
            Flags               = RANDOMSTART
        End


        AnimationState        = FREEFALL
            Animation           = freefall
                AnimationName       = KUKngMount_SKL.KUKngMount_FLYA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED_FLAILING
            Animation           = JustDie
                AnimationName       = KUKngMount_SKL.KUKngMount_FLYA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState                =    DYING SPLATTED
            Animation                =    splatted
                AnimationName        =    KUKngMount_SKL.KUKngMount_LNDA
                AnimationMode        =    ONCE
            End
        End

        AnimationState                =    BURNINGDEATH DYING
            Animation
                AnimationName        =    KUKngMount_SKL.KUKngMount_DIEA
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationSpeedFactorRange = 0.8 0.8
            End
        End


        AnimationState                = DYING
            Animation
                AnimationName       = KUKngMount_SKL.KUKngMount_DIEA
                AnimationMode       = ONCE
                AnimationSpeedFactorRange = 0.8 0.8
            End
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = StandUp
                AnimationName       = KUKngMount_SKL.KUKngMount_GTPA
                AnimationMode       = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState        = STUNNED
            Animation           = Land
                AnimationName       = KUKngMount_SKL.KUKngMount_LNDA
                AnimationMode       = ONCE
            End
        End

        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = TrotAndFire
                AnimationName       = KUKngMount_SKL.KUKngMount_RUNB
                AnimationMode       = LOOP
                Distance            = 70
            End
            Flags               = RANDOMSTART
        End

        AnimationState                =    TURN_LEFT_HIGH_SPEED
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_RUNA
                AnimationMode        =    LOOP
                AnimationBlendTime    =    10
            End
        End

        AnimationState                =    TURN_RIGHT_HIGH_SPEED
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_RUNA
                AnimationMode        =    LOOP
                AnimationBlendTime    =    10
            End
        End



        AnimationState                =    MOVING BACKING_UP
            Animation                =    BackingUp
                AnimationName        =    KUKngMount_SKL.KUKngMount_BAKA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState        = MOVING TURN_LEFT
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_TRNL
                AnimationMode        =    LOOP
            End
        End

        AnimationState        = MOVING TURN_RIGHT
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_TRNR
                AnimationMode        =    LOOP
            End
        End

        AnimationState            = MOVING ACCELERATE
            Animation           = Accelerate
                AnimationName   = KUKngMount_SKL.KUKngMount_ACCL
                AnimationMode   = ONCE
                AnimationSpeedFactorRange = 1.3 1.3
            End
        End

        AnimationState            = MOVING DECELERATE
            Animation           = Decelerate
                AnimationName   = KUKngMount_SKL.KUKngMount_DECL
                AnimationMode   = ONCE
                AnimationSpeedFactorRange = 1.0 1.0
            End
        End

        AnimationState        = MOVING
            ShareAnimation        = Yes
            Animation           = RunA
                AnimationName       = KUKngMount_SKL.KUKngMount_RUNA
                AnimationMode       = LOOP
            End
        End


        AnimationState        = FIRING_OR_PREATTACK_A
            Animation           = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_ATKA
                AnimationMode       = ONCE
            End
            Animation           = ATKB
                AnimationName       = KUKngMount_SKL.KUKngMount_ATKB
                AnimationMode       = ONCE
            End

        End


        AnimationState        = SPECIAL_WEAPON_ONE
            Animation             = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_SPCA
                AnimationMode       = ONCE
            End
        End

        AnimationState        = SPECIAL_WEAPON_TWO
            Animation             = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode       = ONCE
            End
        End

        AnimationState        = USER_1
            StateName        = Attacking
            Animation             = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode       = ONCE
            End
            ParticleSysBone  = "BIP01 SPINE1" AngHKSanctumCharge FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSanctumCharge02 FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSanctumCharge04 FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSmokeGlow FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSmoke4 FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKFlareSmoke FollowBone:Yes
        End




        AnimationState = HIT_REACTION HIT_LEVEL_1
            Animation = Hit_Level_1_a
                AnimationName = KUKngMount_SKL.KUKngMount_HFMA
                AnimationMode = ONCE
            End
        End



        AnimationState                    = EMOTION_TAUNTING
            ShareAnimation                = Yes
            Animation                    = Taunting
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = ONCE
            End
            Animation                    = Taunting
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode            = ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = EMOTION_POINTING
            Animation                    = Pointing1
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = EMOTION_CELEBRATING
            ShareAnimation                = Yes
            Animation                    = CHRA
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = ONCE
            End
            Animation                    = CHRB
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode            = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = EMOTION_ALERT
            Animation                    = IDLA
                AnimationName            = KUKngMount_SKL.KUKngMount_IDLA
                AnimationMode            = LOOP
                AnimationBlendTime  = 15
            End
        End

        AnimationState                    = RAISING_FLAG
            ShareAnimation                = Yes
            Animation                    = CHRA
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = ONCE
                AnimationSpeedFactorRange        = 0.9 1.1
            End
            Animation                    = CHRB
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode            = ONCE
                AnimationSpeedFactorRange        = 0.9 1.1
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                =    SELECTED
            StateName                =    State_Selected
            Animation                =    AtAttention
                AnimationName        =    KUKngMount_SKL.KUKngMount_ATNB
                AnimationMode        =    Loop
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_To_Selected") end
            EndScript
        End

        IdleAnimationState
            StateName                = Idle
            Animation           = IdleB
                AnimationName       = KUKngMount_SKL.KUKngMount_IDLB
                AnimationMode       = Loop
                AnimationBlendTime  = 15
                AnimationPriority   = 10
            End
            Animation           = IdleC
                AnimationName       = KUKngMount_SKL.KUKngMount_IDLC
                AnimationMode       = Loop
                AnimationBlendTime  = 15
                AnimationPriority   = 5
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "State_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
            EndScript
        End


        TransitionState                    =    TRANS_Idle_to_Selected
            Animation                    =    ATNA
                AnimationName            =    KUKngMount_SKL.KUKngMount_ATNA
                AnimationMode            =    ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
        End


        TransitionState                    =    TRANS_Selected_to_Idle
            Animation                    =    ATNC
                AnimationName            =    KUKngMount_SKL.KUKngMount_ATNC
                AnimationMode            =    ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Flags                        = START_FRAME_LAST
        End
        AnimationState        = PASSENGER MOUNTED
            Animation           = grabbed
                AnimationName       = KUKngMount_SKL.KUKngMount_GBDA
                AnimationMode       = LOOP
                AnimationSpeedFactorRange = 0.8 0.8

            End
            Flags               = RANDOMSTART
        End


        AnimationState        = FREEFALL MOUNTED
            Animation           = freefall
                AnimationName       = KUKngMount_SKL.KUKngMount_FLYA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED_FLAILING MOUNTED
            Animation           = JustDie
                AnimationName       = KUKngMount_SKL.KUKngMount_FLYA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState                =    DYING SPLATTED MOUNTED
            Animation                =    splatted
                AnimationName        =    KUKngMount_SKL.KUKngMount_LNDA
                AnimationMode        =    ONCE
            End
        End

        AnimationState                =    BURNINGDEATH MOUNTED DYING
            Animation
                AnimationName        =    KUKngMount_SKL.KUKngMount_DIEA
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationSpeedFactorRange = 0.8 0.8
            End
        End

        AnimationState                = DYING MOUNTED
            Animation
                AnimationName       = KUKngMount_SKL.KUKngMount_DIEA
                AnimationMode       = ONCE
                AnimationSpeedFactorRange = 0.8 0.8
            End
        End

        AnimationState        = STUNNED_STANDING_UP MOUNTED
            Animation           = StandUp
                AnimationName       = KUKngMount_SKL.KUKngMount_GTPA
                AnimationMode       = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState        = STUNNED MOUNTED
            Animation           = Land
                AnimationName       = KUKngMount_SKL.KUKngMount_LNDA
                AnimationMode       = ONCE
            End
        End

        AnimationState        = MOVING FIRING_OR_PREATTACK_A MOUNTED
            ShareAnimation        = Yes
            Animation           = TrotAndFire
                AnimationName       = KUKngMount_SKL.KUKngMount_RUNB
                AnimationMode       = LOOP
                Distance            = 70
            End
            Flags               = RANDOMSTART
        End

        AnimationState                =    TURN_LEFT_HIGH_SPEED MOUNTED
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_RUNA
                AnimationMode        =    LOOP
                AnimationBlendTime    =    10
            End
        End

        AnimationState                =    TURN_RIGHT_HIGH_SPEED MOUNTED
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_RUNA
                AnimationMode        =    LOOP
                AnimationBlendTime    =    10
            End
        End

        AnimationState                =    MOVING BACKING_UP MOUNTED
            Animation                =    BackingUp
                AnimationName        =    KUKngMount_SKL.KUKngMount_BAKA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState        = MOVING TURN_LEFT MOUNTED
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_TRNL
                AnimationMode        =    LOOP
            End
        End

        AnimationState        = MOVING TURN_RIGHT MOUNTED
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_TRNR
                AnimationMode        =    LOOP
            End
        End

        AnimationState            = MOVING ACCELERATE MOUNTED
            Animation           = Accelerate
                AnimationName   = KUKngMount_SKL.KUKngMount_ACCL
                AnimationMode   = ONCE
                AnimationSpeedFactorRange = 1.3 1.3
            End
        End

        AnimationState            = MOVING DECELERATE MOUNTED
            Animation           = Decelerate
                AnimationName   = KUKngMount_SKL.KUKngMount_DECL
                AnimationMode   = ONCE
                AnimationSpeedFactorRange = 1.0 1.0
            End
        End

        AnimationState        = MOVING MOUNTED
            ShareAnimation        = Yes
            Animation           = RunA
                AnimationName       = KUKngMount_SKL.KUKngMount_RUNA
                AnimationMode       = LOOP
            End
        End


        AnimationState        = FIRING_OR_PREATTACK_A MOUNTED
            Animation           = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_ATKA
                AnimationMode       = ONCE
            End
            Animation           = ATKB
                AnimationName       = KUKngMount_SKL.KUKngMount_ATKB
                AnimationMode       = ONCE
            End

        End



        AnimationState        = SPECIAL_WEAPON_ONE MOUNTED
            Animation             = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_SPCA
                AnimationMode       = ONCE
            End
        End

        AnimationState        = SPECIAL_WEAPON_TWO MOUNTED
            Animation             = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode       = ONCE
            End
        End

        AnimationState        = USER_1 MOUNTED
            StateName        = Attacking
            Animation             = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode       = ONCE
            End
            ParticleSysBone  = "BIP01 SPINE1" AngHKSanctumCharge FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSanctumCharge02 FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSanctumCharge04 FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSmokeGlow FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSmoke4 FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKFlareSmoke FollowBone:Yes
        End




        AnimationState = HIT_REACTION HIT_LEVEL_1 MOUNTED
            Animation = Hit_Level_1_a

                AnimationName = KUKngMount_SKL.KUKngMount_HFMA
                AnimationMode = ONCE
            End
        End



        AnimationState                    = EMOTION_TAUNTING MOUNTED
            ShareAnimation                = Yes
            Animation                    = Taunting
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = ONCE
            End
            Animation                    = Taunting
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode            = ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = EMOTION_POINTING MOUNTED
            Animation                    = Pointing1
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = EMOTION_CELEBRATING MOUNTED
            ShareAnimation                = Yes
            Animation                    = CHRA
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = ONCE
            End
            Animation                    = CHRB
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode            = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = EMOTION_ALERT MOUNTED
            Animation                    = IDLA
                AnimationName            = KUKngMount_SKL.KUKngMount_IDLA
                AnimationMode            = LOOP
                AnimationBlendTime  = 15
            End
        End

        AnimationState                    = RAISING_FLAG MOUNTED
            ShareAnimation                = Yes
            Animation                    = CHRA
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = ONCE
                AnimationSpeedFactorRange        = 0.9 1.1
            End
            Animation                    = CHRB
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode            = ONCE
                AnimationSpeedFactorRange        = 0.9 1.1
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                =    SELECTED MOUNTED
            StateName                =    State_Selected
            Animation                =    AtAttention
                AnimationName        =    KUKngMount_SKL.KUKngMount_ATNB
                AnimationMode        =    Loop
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_To_Selected") end
            EndScript
        End

        AnimationState = MOUNTED
            StateName            = Idle
            Animation           = IdleB
                AnimationName       = KUKngMount_SKL.KUKngMount_IDLB
                AnimationMode       = Loop
                AnimationBlendTime  = 15
                AnimationPriority   = 10
            End
            Animation           = IdleC
                AnimationName       = KUKngMount_SKL.KUKngMount_IDLC
                AnimationMode       = Loop
                AnimationBlendTime  = 15
                AnimationPriority   = 5
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "State_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
            EndScript
        End

    End


    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    Draw = W3DScriptedModelDraw DustEffects
        DefaultModelConditionState
          Model = None
        End
        IdleAnimationState
        End
        AnimationState = MOVING WADING
            ParticleSysBone = None FootstepSlash
        End
        AnimationState = MOVING ACCELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING DECELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING
        End
    End

    ArmorSet
        Conditions      = MOUNTED
        Armor           = EdainNazgulArmorMounted
        DamageFX        = None
    End


    CrusherLevel               = 1
    CrushableLevel             = 3
    CrushWeapon                = AngmarWitchkingCrush

    MinCrushVelocityPercent     = MINCRUSHVELOCITYPERCENT_HERO
    CrushDecelerationPercent    = CRUSHDECELERATIONPERCENT_HERO

    RamPower                   = 30
    RamZMult                   = 0.5
    Scale                      = 1.05

    LocomotorSet
        Locomotor = HeroHorseLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_CAVALRY_FAST_MEMBER_SPEED
    End

    Behavior = ModelConditionUpgrade ModulTag_Mounted
        TriggeredBy                  = Upgrade_Level_1
        AddConditionFlags            = MOUNTED
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ToggleMountedWitchkingEnabler
        SpecialPowerTemplate         = SpecialAbilityToggleMountedWitchkingSauronsDiener
        TriggeredBy                  = Upgrade_Level_1
        ObeyRechageOnTrigger         = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_ToggleMountedWitchkingStarter
         SpecialPowerTemplate        = SpecialAbilityToggleMountedWitchkingSauronsDiener
         UpdateModuleStartsAttack    = Yes
         StartsPaused                = Yes
         AvailableAtStart            = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_ToggleMountedWitchkingSauronsDiener
         SpecialPowerTemplate        = SpecialAbilityToggleMountedWitchkingSauronsDiener
         MountedTemplate             = AngmarWitchking_mod
         SynchronizeTimerOnSpecialPower = SpecialAbilityScreech SpecialAbilityWitchkingMorgulBlade SpecialAbilityCurseEnemy SpecialAbilityVerdorbeneMagieAngmars SpecialAbilityWordOfPower SpecialAbilityGrausamWitchking SpecialAbilityAngmarWitchkingSchattenklinge SpecialAbilityWordOfPower2
         UnpackTime                  = ANGMAR_MOUNT_TIME
         PreparationTime             = 0
         PackTime                    = 0
         OpacityTarget               = .0
         AwardXPForTriggering        = 0
         IgnoreFacingCheck           = Yes
    End

End


ChildObject AngmarWitchking_MountedRing AngmarWitchking_modRing

    Draw = W3DScriptedModelDraw ModuleTag_01

        RandomTexture = ku_witchkingring.tga  0 ku_witchking.tga

        DefaultModelConditionState
            Model           = kuhk_hrs

            ParticleSysBone = None BlackRiderFlare FXTrigger:NONE Persist:SPAWN PersistID:100
        End

        ModelConditionState = WEAPONSET_HERO_MODE

            ParticleSysBone = None BlackRiderFlare FXTrigger:NONE Persist:SPAWN PersistID:100
            ParticleSysBone = SWORDBONE SchattenklingeHK FollowBone:Yes
        End



        AnimationState        = PASSENGER
            Animation           = grabbed
                AnimationName       = KUKngMount_SKL.KUKngMount_GBDA
                AnimationMode       = LOOP
                AnimationSpeedFactorRange = 0.8 0.8

            End
            Flags               = RANDOMSTART
        End


        AnimationState        = FREEFALL
            Animation           = freefall
                AnimationName       = KUKngMount_SKL.KUKngMount_FLYA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED_FLAILING
            Animation           = JustDie
                AnimationName       = KUKngMount_SKL.KUKngMount_FLYA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState                =    DYING SPLATTED
            Animation                =    splatted
                AnimationName        =    KUKngMount_SKL.KUKngMount_LNDA
                AnimationMode        =    ONCE
            End
        End

        AnimationState                =    BURNINGDEATH DYING
            Animation
                AnimationName        =    KUKngMount_SKL.KUKngMount_DIEA
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationSpeedFactorRange = 0.8 0.8
            End
        End


        AnimationState                = DYING
            Animation
                AnimationName       = KUKngMount_SKL.KUKngMount_DIEA
                AnimationMode       = ONCE
                AnimationSpeedFactorRange = 0.8 0.8
            End
        End

        AnimationState        = STUNNED_STANDING_UP
            Animation           = StandUp
                AnimationName       = KUKngMount_SKL.KUKngMount_GTPA
                AnimationMode       = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState        = STUNNED
            Animation           = Land
                AnimationName       = KUKngMount_SKL.KUKngMount_LNDA
                AnimationMode       = ONCE
            End
        End

        AnimationState        = MOVING FIRING_OR_PREATTACK_A
            ShareAnimation        = Yes
            Animation           = TrotAndFire
                AnimationName       = KUKngMount_SKL.KUKngMount_RUNB
                AnimationMode       = LOOP
                Distance            = 70
            End
            Flags               = RANDOMSTART
        End

        AnimationState                =    TURN_LEFT_HIGH_SPEED
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_RUNA
                AnimationMode        =    LOOP
                AnimationBlendTime    =    10
            End
        End

        AnimationState                =    TURN_RIGHT_HIGH_SPEED
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_RUNA
                AnimationMode        =    LOOP
                AnimationBlendTime    =    10
            End
        End



        AnimationState                =    MOVING BACKING_UP
            Animation                =    BackingUp
                AnimationName        =    KUKngMount_SKL.KUKngMount_BAKA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState        = MOVING TURN_LEFT
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_TRNL
                AnimationMode        =    LOOP
            End
        End

        AnimationState        = MOVING TURN_RIGHT
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_TRNR
                AnimationMode        =    LOOP
            End
        End

        AnimationState            = MOVING ACCELERATE
            Animation           = Accelerate
                AnimationName   = KUKngMount_SKL.KUKngMount_ACCL
                AnimationMode   = ONCE
                AnimationSpeedFactorRange = 1.3 1.3
            End
        End

        AnimationState            = MOVING DECELERATE
            Animation           = Decelerate
                AnimationName   = KUKngMount_SKL.KUKngMount_DECL
                AnimationMode   = ONCE
                AnimationSpeedFactorRange = 1.0 1.0
            End
        End

        AnimationState        = MOVING
            ShareAnimation        = Yes
            Animation           = RunA
                AnimationName       = KUKngMount_SKL.KUKngMount_RUNA
                AnimationMode       = LOOP
            End
        End


        AnimationState        = FIRING_OR_PREATTACK_A
            Animation           = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_ATKA
                AnimationMode       = ONCE
            End
            Animation           = ATKB
                AnimationName       = KUKngMount_SKL.KUKngMount_ATKB
                AnimationMode       = ONCE
            End

        End


        AnimationState        = SPECIAL_WEAPON_ONE
            Animation             = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_SPCA
                AnimationMode       = ONCE
            End
        End

        AnimationState        = SPECIAL_WEAPON_TWO
            Animation             = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode       = ONCE
            End
        End

        AnimationState        = USER_1
            StateName        = Attacking
            Animation             = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode       = ONCE
            End
            ParticleSysBone  = "BIP01 SPINE1" AngHKSanctumCharge FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSanctumCharge02 FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSanctumCharge04 FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSmokeGlow FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSmoke4 FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKFlareSmoke FollowBone:Yes
        End




        AnimationState = HIT_REACTION HIT_LEVEL_1
            Animation = Hit_Level_1_a
                AnimationName = KUKngMount_SKL.KUKngMount_HFMA
                AnimationMode = ONCE
            End
        End



        AnimationState                    = EMOTION_TAUNTING
            ShareAnimation                = Yes
            Animation                    = Taunting
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = ONCE
            End
            Animation                    = Taunting
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode            = ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = EMOTION_POINTING
            Animation                    = Pointing1
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = EMOTION_CELEBRATING
            ShareAnimation                = Yes
            Animation                    = CHRA
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = ONCE
            End
            Animation                    = CHRB
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode            = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = EMOTION_ALERT
            Animation                    = IDLA
                AnimationName            = KUKngMount_SKL.KUKngMount_IDLA
                AnimationMode            = LOOP
                AnimationBlendTime  = 15
            End
        End

        AnimationState                    = RAISING_FLAG
            ShareAnimation                = Yes
            Animation                    = CHRA
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = ONCE
                AnimationSpeedFactorRange        = 0.9 1.1
            End
            Animation                    = CHRB
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode            = ONCE
                AnimationSpeedFactorRange        = 0.9 1.1
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                =    SELECTED
            StateName                =    State_Selected
            Animation                =    AtAttention
                AnimationName        =    KUKngMount_SKL.KUKngMount_ATNB
                AnimationMode        =    Loop
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_To_Selected") end
            EndScript
        End

        IdleAnimationState
            StateName                = Idle
            Animation           = IdleB
                AnimationName       = KUKngMount_SKL.KUKngMount_IDLB
                AnimationMode       = Loop
                AnimationBlendTime  = 15
                AnimationPriority   = 10
            End
            Animation           = IdleC
                AnimationName       = KUKngMount_SKL.KUKngMount_IDLC
                AnimationMode       = Loop
                AnimationBlendTime  = 15
                AnimationPriority   = 5
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "State_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
            EndScript
        End


        TransitionState                    =    TRANS_Idle_to_Selected
            Animation                    =    ATNA
                AnimationName            =    KUKngMount_SKL.KUKngMount_ATNA
                AnimationMode            =    ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
        End


        TransitionState                    =    TRANS_Selected_to_Idle
            Animation                    =    ATNC
                AnimationName            =    KUKngMount_SKL.KUKngMount_ATNC
                AnimationMode            =    ONCE
                AnimationSpeedFactorRange = 0.8 1.2
            End
            Flags                        = START_FRAME_LAST
        End
        AnimationState        = PASSENGER MOUNTED
            Animation           = grabbed
                AnimationName       = KUKngMount_SKL.KUKngMount_GBDA
                AnimationMode       = LOOP
                AnimationSpeedFactorRange = 0.8 0.8

            End
            Flags               = RANDOMSTART
        End


        AnimationState        = FREEFALL MOUNTED
            Animation           = freefall
                AnimationName       = KUKngMount_SKL.KUKngMount_FLYA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState        = STUNNED_FLAILING MOUNTED
            Animation           = JustDie
                AnimationName       = KUKngMount_SKL.KUKngMount_FLYA
                AnimationMode       = LOOP
            End
            Flags               = RANDOMSTART
        End

        AnimationState                =    DYING SPLATTED MOUNTED
            Animation                =    splatted
                AnimationName        =    KUKngMount_SKL.KUKngMount_LNDA
                AnimationMode        =    ONCE
            End
        End

        AnimationState                =    BURNINGDEATH MOUNTED DYING
            Animation
                AnimationName        =    KUKngMount_SKL.KUKngMount_DIEA
                AnimationMode        =    ONCE
                AnimationBlendTime    =    10
                AnimationSpeedFactorRange = 0.8 0.8
            End
        End

        AnimationState                = DYING MOUNTED
            Animation
                AnimationName       = KUKngMount_SKL.KUKngMount_DIEA
                AnimationMode       = ONCE
                AnimationSpeedFactorRange = 0.8 0.8
            End
        End

        AnimationState        = STUNNED_STANDING_UP MOUNTED
            Animation           = StandUp
                AnimationName       = KUKngMount_SKL.KUKngMount_GTPA
                AnimationMode       = ONCE
                AnimationSpeedFactorRange = 1.5 1.5
            End
        End

        AnimationState        = STUNNED MOUNTED
            Animation           = Land
                AnimationName       = KUKngMount_SKL.KUKngMount_LNDA
                AnimationMode       = ONCE
            End
        End

        AnimationState        = MOVING FIRING_OR_PREATTACK_A MOUNTED
            ShareAnimation        = Yes
            Animation           = TrotAndFire
                AnimationName       = KUKngMount_SKL.KUKngMount_RUNB
                AnimationMode       = LOOP
                Distance            = 70
            End
            Flags               = RANDOMSTART
        End

        AnimationState                =    TURN_LEFT_HIGH_SPEED MOUNTED
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_RUNA
                AnimationMode        =    LOOP
                AnimationBlendTime    =    10
            End
        End

        AnimationState                =    TURN_RIGHT_HIGH_SPEED MOUNTED
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_RUNA
                AnimationMode        =    LOOP
                AnimationBlendTime    =    10
            End
        End

        AnimationState                =    MOVING BACKING_UP MOUNTED
            Animation                =    BackingUp
                AnimationName        =    KUKngMount_SKL.KUKngMount_BAKA
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
        End

        AnimationState        = MOVING TURN_LEFT MOUNTED
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_TRNL
                AnimationMode        =    LOOP
            End
        End

        AnimationState        = MOVING TURN_RIGHT MOUNTED
            Animation                =    TurnLeft
                AnimationName        =    KUKngMount_SKL.KUKngMount_TRNR
                AnimationMode        =    LOOP
            End
        End

        AnimationState            = MOVING ACCELERATE MOUNTED
            Animation           = Accelerate
                AnimationName   = KUKngMount_SKL.KUKngMount_ACCL
                AnimationMode   = ONCE
                AnimationSpeedFactorRange = 1.3 1.3
            End
        End

        AnimationState            = MOVING DECELERATE MOUNTED
            Animation           = Decelerate
                AnimationName   = KUKngMount_SKL.KUKngMount_DECL
                AnimationMode   = ONCE
                AnimationSpeedFactorRange = 1.0 1.0
            End
        End

        AnimationState        = MOVING MOUNTED
            ShareAnimation        = Yes
            Animation           = RunA
                AnimationName       = KUKngMount_SKL.KUKngMount_RUNA
                AnimationMode       = LOOP
            End
        End


        AnimationState        = FIRING_OR_PREATTACK_A MOUNTED
            Animation           = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_ATKA
                AnimationMode       = ONCE
            End
            Animation           = ATKB
                AnimationName       = KUKngMount_SKL.KUKngMount_ATKB
                AnimationMode       = ONCE
            End

        End


        AnimationState        = SPECIAL_WEAPON_ONE MOUNTED
            Animation             = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_SPCA
                AnimationMode       = ONCE
            End
        End

        AnimationState        = SPECIAL_WEAPON_TWO MOUNTED
            Animation             = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode       = ONCE
            End
        End

        AnimationState        = USER_1 MOUNTED
            StateName        = Attacking
            Animation             = ATKA
                AnimationName       = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode       = ONCE
            End
            ParticleSysBone  = "BIP01 SPINE1" AngHKSanctumCharge FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSanctumCharge02 FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSanctumCharge04 FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSmokeGlow FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKSmoke4 FollowBone:Yes
            ParticleSysBone  = "BIP01 SPINE1" AngHKFlareSmoke FollowBone:Yes
        End




        AnimationState = HIT_REACTION HIT_LEVEL_1 MOUNTED
            Animation = Hit_Level_1_a

                AnimationName = KUKngMount_SKL.KUKngMount_HFMA
                AnimationMode = ONCE
            End
        End



        AnimationState                    = EMOTION_TAUNTING MOUNTED
            ShareAnimation                = Yes
            Animation                    = Taunting
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = ONCE
            End
            Animation                    = Taunting
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode            = ONCE
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = EMOTION_POINTING MOUNTED
            Animation                    = Pointing1
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = LOOP
            End
        End

        AnimationState                    = EMOTION_CELEBRATING MOUNTED
            ShareAnimation                = Yes
            Animation                    = CHRA
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = ONCE
            End
            Animation                    = CHRB
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode            = ONCE
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                    = EMOTION_ALERT MOUNTED
            Animation                    = IDLA
                AnimationName            = KUKngMount_SKL.KUKngMount_IDLA
                AnimationMode            = LOOP
                AnimationBlendTime  = 15
            End
        End

        AnimationState                    = RAISING_FLAG MOUNTED
            ShareAnimation                = Yes
            Animation                    = CHRA
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRA
                AnimationMode            = ONCE
                AnimationSpeedFactorRange        = 0.9 1.1
            End
            Animation                    = CHRB
                AnimationName            = KUKngMount_SKL.KUKngMount_CHRB
                AnimationMode            = ONCE
                AnimationSpeedFactorRange        = 0.9 1.1
            End
            Flags                        = RESTART_ANIM_WHEN_COMPLETE
        End

        AnimationState                =    SELECTED MOUNTED
            StateName                =    State_Selected
            Animation                =    AtAttention
                AnimationName        =    KUKngMount_SKL.KUKngMount_ATNB
                AnimationMode        =    Loop
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_To_Selected") end
            EndScript
        End

        AnimationState = MOUNTED
            StateName            = Idle
            Animation           = IdleB
                AnimationName       = KUKngMount_SKL.KUKngMount_IDLB
                AnimationMode       = Loop
                AnimationBlendTime  = 15
                AnimationPriority   = 10
            End
            Animation           = IdleC
                AnimationName       = KUKngMount_SKL.KUKngMount_IDLC
                AnimationMode       = Loop
                AnimationBlendTime  = 15
                AnimationPriority   = 5
            End
            Flags                        = RANDOMSTART RESTART_ANIM_WHEN_COMPLETE
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "State_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_To_Idle") end
            EndScript
        End


    End



    Draw = W3DScriptedModelDraw Icon
        ModelConditionState = NONE
            Model           = bbox
        End
    End

    Draw = W3DScriptedModelDraw DustEffects
        DefaultModelConditionState
          Model = None
        End
        IdleAnimationState
        End
        AnimationState = MOVING WADING
            ParticleSysBone = None FootstepSlash
        End
        AnimationState = MOVING ACCELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING DECELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOVING
        End
    End

    ArmorSet
        Conditions      = MOUNTED
        Armor           = SilmarilHeroMountedArmor
        DamageFX        = None
    End


    CrusherLevel               = 1
    CrushableLevel             = 4
    CrushWeapon                = AngmarWitchkingCrush

    MinCrushVelocityPercent     = MINCRUSHVELOCITYPERCENT_HERO
    CrushDecelerationPercent    = CRUSHDECELERATIONPERCENT_HERO

    RamPower                   = 30
    RamZMult                   = 0.5
    Scale                      = 1.05

    LocomotorSet
        Locomotor = HeroHorseLocomotor
        Condition = SET_NORMAL
        Speed     = NORMAL_CAVALRY_FAST_MEMBER_SPEED
    End

    ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG

    Behavior = ModelConditionUpgrade ModulTag_Mounted
        TriggeredBy                  = Upgrade_Level_1
        AddConditionFlags            = MOUNTED
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ToggleMountedWitchkingEnabler
        SpecialPowerTemplate         = SpecialAbilityToggleMountedWitchkingSauronsDiener
        TriggeredBy                  = Upgrade_Level_1
        ObeyRechageOnTrigger         = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_ToggleMountedWitchkingStarter
         SpecialPowerTemplate        = SpecialAbilityToggleMountedWitchkingSauronsDiener
         UpdateModuleStartsAttack    = Yes
         StartsPaused                = Yes
         AvailableAtStart            = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_ToggleMountedWitchkingSauronsDiener
         SpecialPowerTemplate        = SpecialAbilityToggleMountedWitchkingSauronsDiener
         MountedTemplate             = AngmarWitchking_modRing
         SynchronizeTimerOnSpecialPower = SpecialAbilityScreech SpecialAbilityWitchkingMorgulBlade SpecialAbilityCurseEnemy SpecialAbilityVerdorbeneMagieAngmars SpecialAbilityWordOfPower SpecialAbilityGrausamWitchking SpecialAbilityAngmarWitchkingSchattenklinge SpecialAbilityWordOfPower2
         UnpackTime                  = ANGMAR_MOUNT_TIME
         PreparationTime             = 0
         PackTime                    = 0
         OpacityTarget               = .0
         AwardXPForTriggering        = 0
         IgnoreFacingCheck           = Yes
    End
End

ChildObject AngmarWitchking_mod_RingHero AngmarWitchking_mod
End

ChildObject AngmarWitchking_forCarnDum AngmarWitchking_mod

    Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
        LevelToGrant = 10
    End

    Scale                 = 1.6

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ToggleMountedWitchkingEnabler
        SpecialPowerTemplate         = SpecialAbilityToggleMountedWitchkingSauronsDiener
        TriggeredBy                  = Upgrade_Level_1
        ObeyRechageOnTrigger         = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_ToggleMountedWitchkingStarter
         SpecialPowerTemplate        = SpecialAbilityToggleMountedWitchkingSauronsDiener
         UpdateModuleStartsAttack    = Yes
         StartsPaused                = Yes
         AvailableAtStart            = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_ToggleMountedWitchkingSauronsDiener
         SpecialPowerTemplate        = SpecialAbilityToggleMountedWitchkingSauronsDiener
         MountedTemplate             = AngmarWitchking_Mounted_forCarnDum
         SynchronizeTimerOnSpecialPower = SpecialAbilityScreech SpecialAbilityWitchkingMorgulBlade SpecialAbilityCurseEnemy SpecialAbilityVerdorbeneMagieAngmars SpecialAbilityWordOfPower SpecialAbilityGrausamWitchking SpecialAbilityAngmarWitchkingSchattenklinge SpecialAbilityWordOfPower2
         UnpackTime                  = ANGMAR_MOUNT_TIME
         PreparationTime             = 0
         PackTime                    = 0
         OpacityTarget               = .0
         AwardXPForTriggering        = 0
         IgnoreFacingCheck           = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_GeprufteStarter
         SpecialPowerTemplate           = SpecialAbilityGandalfGeprufte
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Geprufte
         SpecialPowerTemplate           = SpecialAbilityGandalfGeprufte
         MountedTemplate                = AngmarWitchking_modRing_forCarnDum
         SynchronizeTimerOnSpecialPower = SpecialAbilityScreech SpecialAbilityWitchkingMorgulBlade SpecialAbilityCurseEnemy SpecialAbilityVerdorbeneMagieAngmars SpecialAbilityWordOfPower SpecialAbilityGrausamWitchking SpecialAbilityAngmarWitchkingSchattenklinge SpecialAbilityWordOfPower2
         UnpackTime                     = ANGMAR_MOUNT_TIME
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End

    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy                     = Upgrade_RingHero
        GetUpgradeCommandButtonName     = Command_SpecialAbilityGandalfGeprufte
    End
End

ChildObject AngmarWitchking_modRing_forCarnDum AngmarWitchking_modRing

    Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
        LevelToGrant = 10
    End

    Scale                 = 1.6

    ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ToggleMountedWitchkingEnabler
        SpecialPowerTemplate         = SpecialAbilityToggleMountedWitchkingSauronsDiener
        TriggeredBy                  = Upgrade_Level_1
        ObeyRechageOnTrigger         = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_ToggleMountedWitchkingStarter
         SpecialPowerTemplate        = SpecialAbilityToggleMountedWitchkingSauronsDiener
         UpdateModuleStartsAttack    = Yes
         StartsPaused                = Yes
         AvailableAtStart            = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_ToggleMountedWitchkingSauronsDiener
         SpecialPowerTemplate        = SpecialAbilityToggleMountedWitchkingSauronsDiener
         MountedTemplate             = AngmarWitchking_MountedRing_forCarnDum
         SynchronizeTimerOnSpecialPower = SpecialAbilityScreech SpecialAbilityWitchkingMorgulBlade SpecialAbilityCurseEnemy SpecialAbilityVerdorbeneMagieAngmars SpecialAbilityWordOfPower SpecialAbilityGrausamWitchking SpecialAbilityAngmarWitchkingSchattenklinge SpecialAbilityWordOfPower2
         UnpackTime                  = ANGMAR_MOUNT_TIME
         PreparationTime             = 0
         PackTime                    = 0
         OpacityTarget               = .0
         AwardXPForTriggering        = 0
         IgnoreFacingCheck           = Yes
    End
End

ChildObject AngmarWitchking_Mounted_forCarnDum AngmarWitchking_Mounted

    Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
        LevelToGrant = 10
    End

    Scale                      = 1.05

    Behavior = ModelConditionUpgrade ModulTag_Mounted
        TriggeredBy                  = Upgrade_Level_1
        AddConditionFlags            = MOUNTED
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ToggleMountedWitchkingEnabler
        SpecialPowerTemplate         = SpecialAbilityToggleMountedWitchkingSauronsDiener
        TriggeredBy                  = Upgrade_Level_1
        ObeyRechageOnTrigger         = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_ToggleMountedWitchkingStarter
         SpecialPowerTemplate        = SpecialAbilityToggleMountedWitchkingSauronsDiener
         UpdateModuleStartsAttack    = Yes
         StartsPaused                = Yes
         AvailableAtStart            = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_ToggleMountedWitchkingSauronsDiener
         SpecialPowerTemplate        = SpecialAbilityToggleMountedWitchkingSauronsDiener
         MountedTemplate             = AngmarWitchking_forCarnDum
         SynchronizeTimerOnSpecialPower = SpecialAbilityScreech SpecialAbilityWitchkingMorgulBlade SpecialAbilityCurseEnemy SpecialAbilityVerdorbeneMagieAngmars SpecialAbilityWordOfPower SpecialAbilityGrausamWitchking SpecialAbilityAngmarWitchkingSchattenklinge SpecialAbilityWordOfPower2
         UnpackTime                  = ANGMAR_MOUNT_TIME
         PreparationTime             = 0
         PackTime                    = 0
         OpacityTarget               = .0
         AwardXPForTriggering        = 0
         IgnoreFacingCheck           = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_GeprufteStarter
         SpecialPowerTemplate           = SpecialAbilityGandalfGeprufte
         UpdateModuleStartsAttack       = Yes
         StartsPaused                   = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_Geprufte
         SpecialPowerTemplate           = SpecialAbilityGandalfGeprufte
         MountedTemplate                = AngmarWitchking_modRing_forCarnDum
         SynchronizeTimerOnSpecialPower = SpecialAbilityScreech SpecialAbilityWitchkingMorgulBlade SpecialAbilityCurseEnemy SpecialAbilityVerdorbeneMagieAngmars SpecialAbilityWordOfPower SpecialAbilityGrausamWitchking SpecialAbilityAngmarWitchkingSchattenklinge SpecialAbilityWordOfPower2
         UnpackTime                     = ANGMAR_MOUNT_TIME
         PreparationTime                = 0
         PackTime                       = 0
         OpacityTarget                  = .0
         AwardXPForTriggering           = 0
         IgnoreFacingCheck              = Yes
    End

    Behavior = DoCommandUpgrade Module_DoCommandUpgrade
        TriggeredBy                     = Upgrade_RingHero
        GetUpgradeCommandButtonName     = Command_SpecialAbilityGandalfGeprufte
    End
End

ChildObject AngmarWitchking_MountedRing_forCarnDum AngmarWitchking_MountedRing

    Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
        LevelToGrant = 10
    End

    Scale           = 1.05

    Behavior = ModelConditionUpgrade ModulTag_Mounted
        TriggeredBy                  = Upgrade_Level_1
        AddConditionFlags            = MOUNTED
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ToggleMountedWitchkingEnabler
        SpecialPowerTemplate         = SpecialAbilityToggleMountedWitchkingSauronsDiener
        TriggeredBy                  = Upgrade_Level_1
        ObeyRechageOnTrigger         = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_ToggleMountedWitchkingStarter
         SpecialPowerTemplate        = SpecialAbilityToggleMountedWitchkingSauronsDiener
         UpdateModuleStartsAttack    = Yes
         StartsPaused                = Yes
         AvailableAtStart            = No
    End

    Behavior = ToggleMountedSpecialAbilityUpdate ModuleTag_ToggleMountedWitchkingSauronsDiener
         SpecialPowerTemplate        = SpecialAbilityToggleMountedWitchkingSauronsDiener
         MountedTemplate             = AngmarWitchking_modRing_forCarnDum
         SynchronizeTimerOnSpecialPower = SpecialAbilityScreech SpecialAbilityWitchkingMorgulBlade SpecialAbilityCurseEnemy SpecialAbilityVerdorbeneMagieAngmars SpecialAbilityWordOfPower SpecialAbilityGrausamWitchking SpecialAbilityAngmarWitchkingSchattenklinge SpecialAbilityWordOfPower2
         UnpackTime                  = ANGMAR_MOUNT_TIME
         PreparationTime             = 0
         PackTime                    = 0
         OpacityTarget               = .0
         AwardXPForTriggering        = 0
         IgnoreFacingCheck           = Yes
    End

    ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG
End

