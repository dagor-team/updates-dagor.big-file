Object AngmarRogash_mod

    ButtonImage       = HIRogashnew
    SelectPortrait    = HPRogash

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_SupportHero

    Draw = W3DScriptedModelDraw ModuleTag_01
        WadingParticleSys = EntRipples
        OkToChangeModelColor = Yes
        ExtraPublicBone = Trunk
        ShowShadowWhileContained = Yes
        StaticModelLODMode = Yes

        DefaultModelConditionState
            Model = KURogash_SKN
            Skeleton            = KURogash_SKL
        End

       ModelConditionState  = USER_8
            Model = KURogash_SKN
            Skeleton            = KURogash_SKL
       End

        AnimationState        =  ABOUT_TO_HIT
        StateName            = State_AboutToHitGround
            Animation           = Leap
                AnimationName     = KURogash_LEPC
                AnimationMode     = ONCE

            End
        End

        AnimationState        =  ABOUT_TO_HIT SELECTED
        StateName            = State_AboutToHitGround
            Animation           = Leap
                AnimationName     = KURogash_LEPC
                AnimationMode     = ONCE

            End
        End


        AnimationState = STUNNED_FLAILING
            Animation
                AnimationName = KURogash_FLYA
                AnimationMode = LOOP
            End
        End

        AnimationState = DYING SPLATTED DEATH_1
            Animation
                AnimationName = KURogash_LNDA
                AnimationMode = ONCE
            End
        End


        AnimationState = DYING DEATH_1
            Animation
                AnimationName = KURogash_DIEA
                AnimationMode = ONCE
            End
            ParticleSysBone = B_PELVIS TrollSplatDust
            ParticleSysBone = BAT_HEAD TrollSplatDust
        End

        AnimationState = DYING DEATH_2
            Animation
                AnimationName = KURogash_IDLA
                AnimationMode = ONCE
            End
        End


        AnimationState = DYING
            Animation
                AnimationName     =  KURogash_DIEA
                AnimationMode     = ONCE
            End
        End



        AnimationState = STUNNED_FLAILING
            Animation
                AnimationName = KURogash_FLYA
                AnimationMode = LOOP
            End
        End

        AnimationState                = STUNNED_STANDING_UP
            Animation
                AnimationName        = KURogash_GTPA
                AnimationMode        = ONCE
            End
        End

        AnimationState                = STUNNED
            Animation
                AnimationName = KURogash_LNDA
                AnimationMode = ONCE
            End
            ParticleSysBone = B_PELVIS TrollSplatDust2
            ParticleSysBone = BAT_HEAD TrollSplatDust2
        End

        AnimationState                        = PARALYZED
            Animation
                AnimationName                = KURogash_IDLB
                AnimationMode                = LOOP
            End
        End


        AnimationState = FIRING_OR_PREATTACK_A
            Animation
                AnimationName = KURogash_ATKC
                AnimationMode = ONCE
                UseWeaponTiming        = Yes
            End
            Animation
                AnimationName = KURogash_ATKA
                AnimationMode = ONCE
                UseWeaponTiming        = Yes
            End
            Animation
                AnimationName = KURogash_ATKB
                AnimationMode = ONCE
                UseWeaponTiming        = Yes
            End
        End



        AnimationState            = SPECIAL_WEAPON_TWO UNPACKING
            Animation            = GettingReadyToLeap
                AnimationName    = KURogash_LEPA
                AnimationMode   = ONCE
            End
        End


        AnimationState        = THROWN_PROJECTILE
            Animation           = LEPB
                AnimationName     = KURogash_LEPB
                AnimationMode     = ONCE

            End
        End


        IdleAnimationState
            StateName                = STATE_Idle
            Animation
                AnimationName = KURogash_IDLB
                AnimationMode = ONCE
                AnimationPriority = 30

            End
            Animation
                AnimationName = KURogash_IDLC
                AnimationMode = ONCE
                AnimationPriority = 30

            End
            Animation
                AnimationName = KURogash_IDLE
                AnimationMode = ONCE
                AnimationBlendTime = 10
                AnimationPriority = 5
            End
            Animation
                AnimationName = KURogash_IDLD
                AnimationMode = ONCE
                AnimationBlendTime = 10
                AnimationPriority = 10
            End
            Flags = RESTART_ANIM_WHEN_COMPLETE

            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "State_AboutToHitGround" then CurDrawableSetTransitionAnimState("TRANS_AboutToHitGround_To_Idle") end
            EndScript
        End



        AnimationState = TURN_LEFT
            Animation = Moving
                AnimationName = KURogash_TRNL
                AnimationMode = LOOP
                AnimationBlendTime = 10
            End
            ParticleSysBone = None InfantryDustTrails
        End

        AnimationState = TURN_RIGHT
            Animation = Moving
                AnimationName = KURogash_TRNR
                AnimationMode = LOOP
                AnimationBlendTime = 10
            End
            ParticleSysBone = None InfantryDustTrails
        End



        AnimationState                = MOVING PANICKING
            Animation                = RUNM
                AnimationName        =  KURogash_MFDA
                AnimationMode        = LOOP
            End
            Flags                    = RANDOMSTART
        End


        AnimationState = MOVING
            Animation
                AnimationName = KURogash_RUNA
                AnimationMode = LOOP
                Distance    = 60

            End
            Flags               = RANDOMSTART
            ParticleSysBone     = None InfantryDustTrails
            FXEvent    = Frame:5 FireWhenSkipped Name:FX_TrollRightFootStep
            FXEvent    = Frame:17 FireWhenSkipped Name:FX_TrollLeftFootStep
        End

        AnimationState                =    MOVING ATTACKING
            Animation                =    RUNB
                AnimationName        =    KURogash_RUNB
                AnimationMode        =    LOOP
            End
            Flags                    =    RANDOMSTART
            ParticleSysBone     = None InfantryDustTrails
            FXEvent    = Frame:5 FireWhenSkipped Name:FX_TrollRightFootStep
            FXEvent    = Frame:17 FireWhenSkipped Name:FX_TrollLeftFootStep
        End


        AnimationState = ENGAGED
            Animation
                AnimationName = KURogash_IDLA
                AnimationMode = LOOP
            End
        End


        AnimationState = DESTROYED_WEAPON
            Animation
                AnimationName = KURogash_ATKA
                AnimationMode = ONCE
            End
        End



        AnimationState = JUST_BUILT
            Animation
                AnimationName = KURogash_RUNA
                AnimationMode = ONCE
                AnimationBlendTime = 0
                AnimationSpeedFactorRange = 0.9 0.9
            End
        End



        AnimationState = HIT_REACTION
            Animation
                AnimationName = KURogash_HITC
                AnimationMode = ONCE
            End
        End

        TransitionState                    =    TRANS_Idle_to_Selected
            Animation                    =    ATNA
                AnimationName            =    KURogash_ATNA
                AnimationMode            =    ONCE
            End
        End

        TransitionState                    =    TRANS_Selected_To_Idle
            Animation                    =    ATNC
                AnimationName            =    KURogash_ATNC
                AnimationMode            =    ONCE
            End
        End



        TransitionState       = TRANS_TO_USER_1
            Animation
                AnimationName     = KURogash_ATNC
                AnimationMode     = ONCE
            End
        End
        TransitionState       = TRANS_IdleToSelected
            Animation           = ATNA
                AnimationName     = KURogash_ATNA
                AnimationMode     = ONCE
                AnimationSpeedFactorRange = 0.9 1.0

            End
        End
        TransitionState        = TRANS_SelectedToIdle
            Animation            = ATNB
                AnimationName    = KURogash_ATNB
                AnimationMode    = ONCE
                AnimationSpeedFactorRange = 0.9 1.0
            End
        End
        TransitionState = TRANS_AboutToHitGround_To_Idle
            Animation
                AnimationName = KURogash_LEPC
                AnimationMode = ONCE

            End
            Flags = MAINTAIN_FRAME_ACROSS_STATES
        End


        AnimationState            = SPECIAL_POWER_1
            Animation
                AnimationName     = KURogash_SPCA
                AnimationMode     = ONCE
            End
        End

        AnimationState            = SPECIAL_WEAPON_TWO
            Animation
                AnimationName     = KURogash_SPCA
                AnimationMode     = ONCE
                AnimationBlendTime = 20
            End
           FXEvent          = Frame:30 Name:FX_FearBlast
        End

        AnimationState            = SPECIAL_POWER_2
            Animation
                AnimationName     = KURogash_SPCC
                AnimationMode     = ONCE
            End
        End




        AnimationState = EMOTION_CELEBRATING
            Animation
                AnimationName    =    KURogash_CHRA
                AnimationMode    =    LOOP
            End
        End

        AnimationState                    = EMOTION_TAUNTING
            Animation
                AnimationName            = KURogash_TNTA
                AnimationMode            = ONCE
                AnimationPriority        = 2
            End
            Animation                    = Taunting3
                AnimationName            = KURogash_CHRA
                AnimationMode            = ONCE
                AnimationPriority        = 1
            End
        End


        AnimationState                = LEVELED
            Animation                = LevelUp
                AnimationName        = KURogash_LVLA
                AnimationMode        = ONCE
            End
        End

        AnimationState = RAISING_FLAG
            Animation
                AnimationName = KURogash_CHRA
                AnimationMode = ONCE
            End
        End

        AnimationState                =    SELECTED
            StateName                =    Selected
            SimilarRestart            =   Yes
            Animation                =    ATNB
                AnimationName        =    KURogash_ATNB
                AnimationMode        =    LOOP
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
            EndScript
        End



    End

    Draw = W3DScriptedModelDraw DustEffects
        DefaultModelConditionState
          Model = None
        End
        IdleAnimationState
        End
        AnimationState =  MOVING WADING
            ParticleSysBone = None FootstepSlash
        End
        AnimationState = MOVING ACCELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState =  MOVING ACCELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOUNTED MOVING
        End
    End



    #include "..\..\..\includes\StunDrawModuleLarge.inc"




    Side = Angmar
    EditorSorting = UNIT
    ThreatLevel = ROGASH_THREAT_LEVEL
    TransportSlotCount = TRANSPORTSLOTCOUNT_HERO
    BuildCost           = ROGASHDAG_COST
    BuildTime           = MEDIUM_HERO_BUILDTIME
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG
    MaxSimultaneousOfType = 1
    Scale = 1.10
    DisplayMeleeDamage = STRONG_HERO_DAMAGE

    WeaponSet
        Conditions              = None
        Weapon                = PRIMARY  RogashWarMace
        AutoChooseSources      = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions      = None
        Armor           = EdainmolokrogashArmor
        DamageFX        = NormalDamageFX
    End

    ArmorSet
        Conditions      = PLAYER_UPGRADE
        Armor           = VeryStrongHeroArmor
        DamageFX        = NormalDamageFX
    End

    VisionRange = VISION_STANDARD_MELEE
    ShroudClearingRange = SHROUD_CLEAR_HERO

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%

    BountyValue    = ANGMAR_ROGASH_BOUNTY_VALUE
    DisplayName    = OBJECT:AngmarRogash
    RecruitText    = CONTROLBAR:AngmarRogashRecruit
    ReviveText     = CONTROLBAR:AngmarRogashRevive
    Hotkey         = CONTROLBAR:AngmarRogashHotkey
    CrushableLevel = 2
    CrusherLevel   = 2
    CrushWeapon    = MollokCrush

    CrushKnockback     = 40
    CrushZFactor     = 1.0
    CommandSet  = AngmarRogashModCommandSet
    CommandPoints = 0



    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_RogashBody

    AutoResolveArmor
        Armor = AutoResolve_RogashArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_RogashWeapon
    End



    VoiceAttack                = RogashVoiceAttack
    VoiceAttackCharge            = RogashVoiceAttackCharge
    VoiceAttackMachine            = RogashVoiceAttack
    VoiceAttackStructure            = RogashVoiceAttackBuilding
    VoiceGuard                = RogashVoiceMove
    VoiceMove                = RogashVoiceMove
    VoiceMoveToCamp                = RogashVoiceMove
    VoiceMoveWhileAttacking            = RogashVoiceAttackCharge
    VoicePriority                = 90
    VoiceSelect                = RogashVoiceSelect
    VoiceSelectBattle            = RogashVoiceSelectBattle
    VoiceFear                = RogashVoiceHelpMe
    VoiceRetreatToCastle            = RogashVoiceRetreat
    VoiceMoveWhileAttacking            = RogashVoiceDisengage

    SoundImpact                = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitEvilMenTransportShip    = RogashVoiceMoveShip
        VoiceGarrison                = RogashVoiceMove
        VoiceInitiateCaptureBuilding        = RogashVoiceCaptureBuilding
    End

       #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    EvaEventDieOwner        = AngmarRogashDie

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:ImpactTrollGrabsOrc         Animation:KURogash_SKL.KURogash_GRBA    Frames:6
        AnimationSound = Sound:MordorTrollCreated         Animation:KURogash_SKL.KURogash_WLKC    Frames:66
        AnimationSound = Sound:TrollBodyfall             Animation:KURogash_SKL.KURogash_LNDA    Frames:3 21
        AnimationSound = Sound:TrollBodyfall             Animation:KURogash_SKL.KURogash_DIEA    Frames:31
        AnimationSound = Sound:TrollBodyfall             Animation:KURogash_SKL.KURogash_DIEB    Frames:85
        AnimationSound = Sound:MordorTrollIdleA         Animation:KURogash_SKL.KURogash_IDLA    Frames:13
        AnimationSound = Sound:TrollTreeShakeYell         Animation:KURogash_SKL.KURogash_GRBC    Frames:26
        AnimationSound = Sound:MordorTrollIdleB         Animation:KURogash_SKL.KURogash_IDLB    Frames:7
        AnimationSound = Sound:MordorTrollIdleE         Animation:KURogash_SKL.KURogash_IDLE    Frames:6
        AnimationSound = Sound:MordorTrollIdleF         Animation:KURogash_SKL.KURogash_IDLF    Frames:31
        AnimationSound = Sound:MordorTrollIdleG         Animation:KURogash_SKL.KURogash_IDLG    Frames:76
        AnimationSound = Sound:TrollFootstep             Animation:KURogash_SKL.KURogash_RUNA    Frames:4 17
        AnimationSound = Sound:TrollFootstep             Animation:KURogash_SKL.KURogash_WLKB    Frames:0 22
        AnimationSound = Sound:TrollFootstep             Animation:KURogash_SKL.KURogash_WLKC    Frames:14 29 44 59
        AnimationSound = Sound:TrollFootstep             Animation:KURogash_SKL.KURogash_TRNL    Frames:15 29
        AnimationSound = Sound:TrollFootstep             Animation:KURogash_SKL.KURogash_TRNR    Frames:15 29
        AnimationSound = Sound:TrollFootstep             Animation:KURogash_SKL.KURogash_GTPA    Frames:12 80 97
        AnimationSound = Sound:TrollFootstepRampage         Animation:KURogash_SKL.KURogash_MFDA    Frames:4 17 29 42
        AnimationSound = Sound:TrollFootstepRampage         Animation:KURogash_SKL.KURogash_RCTD    Frames:6 66
        AnimationSound = Sound:TrollFootstepRampage         Animation:KURogash_SKL.KURogash_RPGC    Frames:37 43 61 77 93 100 116 123 139 149
        AnimationSound = Sound:TrollTreeSwingLight         Animation:KURogash_SKL.KURogash_IDLE    Frames:51
        AnimationSound = Sound:TrollTreeSwingLight         Animation:KURogash_SKL.KURogash_RCTB    Frames:16
        AnimationSound = Sound:TrollTreeSwingLight         Animation:KURogash_SKL.KURogash_MFDA    Frames:5 22
        AnimationSound = Sound:TrollTreeSwingLight         Animation:KURogash_SKL.KURogash_RPGC    Frames:28 54 89 114
        AnimationSound = Sound:TrollTreeSwingLight         Animation:KURogash_SKL.KURogash_RCTC    Frames:5
        AnimationSound = Sound:TrollTreeSwingLight         Animation:KURogash_SKL.KURogash_RCTD    Frames:29
        AnimationSound = Sound:TrollTreeSwingLight         Animation:KURogash_SKL.KURogash_RCTE    Frames:72
        AnimationSound = Sound:TrollTreeSwingLight         Animation:KURogash_SKL.KURogash_GRBA    Frames:6
        AnimationSound = Sound:TrollIdleRubHeadVox         Animation:KURogash_SKL.KURogash_RCTB    Frames:3
        AnimationSound = Sound:TrollGetupShakeHeadVox         Animation:KURogash_SKL.KURogash_GTPA    Frames:31
        AnimationSound = Sound:ImpactTrollTreeLight         Animation:KURogash_SKL.KURogash_IDLE    Frames:53
        AnimationSound = Sound:TrollRoar             Animation:KURogash_SKL.KURogash_GTPA    Frames:105
        AnimationSound = Sound:TrollRoar             Animation:KURogash_SKL.KURogash_HITA    Frames:21
        AnimationSound = Sound:TrollRoar             Animation:KURogash_SKL.KURogash_HITB    Frames:10
        AnimationSound = Sound:TrollRoar             Animation:KURogash_SKL.KURogash_HITC    Frames:13
        AnimationSound = Sound:TrollRoar             Animation:KURogash_SKL.KURogash_HITE    Frames:10
        AnimationSound = Sound:TrollRoar             Animation:KURogash_SKL.KURogash_RCTC    Frames:6
        AnimationSound = Sound:TrollRoar             Animation:KURogash_SKL.KURogash_RCTD    Frames:30
        AnimationSound = Sound:TrollRoar             Animation:KURogash_SKL.KURogash_RCTE    Frames:53
        AnimationSound = Sound:TrollRoar             Animation:KURogash_SKL.KURogash_RPGC    Frames:1 33 58 92 117
    End

    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key                            = Troll
    End



    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER SCARY  PATH_THROUGH_INFANTRY  SCORE THROWN_OBJECT HERO ARMY_SUMMARY ATTACK_NEEDS_LINE_OF_SIGHT HEAVY_MELEE_HITTER
    PathfindDiameter = 40.0

    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius             = EMOTION_CHEER_RADIUS
        MaxHealth                 = ROGASHDAG_HEALTH
        PermanentlyKilledByFilter    = NONE
		DodgePercent        = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                = DYING
        DeathFX                = FX_AngmarRogashDieToRespawn
        DeathAnimationTime        = 4100
        InitialSpawnFX            = FX_RogashInitialSpawn
        RespawnAnim                = LEVELED
        RespawnFX                = FX_AngmarRogashRespawn
        RespawnAnimationTime        = 2000
        AutoRespawnAtObjectFilter    = NONE +CASTLE_KEEP
        ButtonImage                = HIRogashnew

        RespawnRules =    AutoSpawn:No           Cost:ROGASHDAG_COST       Time:MEDIUM_HERO_RESPAWNTIME        Health:100%
	End

    Behavior = AutoHealBehavior ModuleTag_RogashHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 2000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
            StanceTemplate = Hero
        End

    #include "..\..\..\includes\CaptureBuilding.inc"

    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle   = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate          = 500
        HoldGroundCloseRangeDistance = 60
        AILuaEventsList              = AngmarRogashFunctions
    End

    LocomotorSet
        Locomotor                    = TrollLocomotor
        Condition                    = SET_NORMAL
        Speed                        = TROLL_SPEED
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult = 1.0
        AllowBouncing = No
        ShockStunnedTimeLow        = 1400
        ShockStunnedTimeHigh    = 2400
        ShockStandingTime        = 2600
    End


    Behavior = SlowDeathBehavior ModuleTag_05
        DeathTypes = ALL -KNOCKBACK -FADED
        SinkDelay = 1000
        SinkRate = 0.80
        DestructionDelay = 12000
        Sound = INITIAL RogashVoiceDie
        DeathFlags = DEATH_1
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = SlowDeathBehavior ModuleTag_07

        DeathTypes = NONE +KNOCKBACK
        SinkDelay = 1000
        SinkRate = 0.80
        DestructionDelay = 12000
    End







    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ScreechUnPause
        SpecialPowerTemplate        = SpecialAbilityScreech
        TriggeredBy                 = Upgrade_Level_3
        ObeyRechageOnTrigger        = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_Screech
        SpecialPowerTemplate        = SpecialAbilityScreech
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_ScreechUpdate
        SpecialPowerTemplate        = SpecialAbilityScreech
        UnpackTime                  = 1
        AwardXPForTriggering        = 0
        TriggerSound                = TrollRoar
        EffectRange                 = 200
        PreparationTime             = 1
        PackTime                    = 3000
        CustomAnimAndDuration       = AnimState:SPECIAL_WEAPON_TWO AnimTime:3000
    End




    Behavior = BezierProjectileBehavior ModuleTag_08
        FirstHeight         = 75
        SecondHeight        = 35
        FirstPercentIndent  = 20%
        SecondPercentIndent = 70%
        TumbleRandomly    = Yes
        CrushStyle        = Yes
        BounceCount       = 0
        FinalStuckTime    = 1200
        GroundHitFX       = FX_RogashLeapLand
        GroundHitWeapon   = RogashLeapWarhead
        PreLandingStateTime = 200
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_LeapEnabler
        SpecialPowerTemplate = SpecialAbilityRogashLeap
        TriggeredBy = Upgrade_Level_4
    End

    Behavior = SpecialPowerModule ModuleTag_LeapStarter
        SpecialPowerTemplate        = SpecialAbilityRogashLeap
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = Yes
        InitiateSound               = TrollRoar
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_LeapUpdate
        SpecialPowerTemplate    = SpecialAbilityRogashLeap
        UnpackTime              = 500
        PackTime                = 1834
        AwardXPForTriggering    = 0
        MustFinishAbility       = Yes
        StartAbilityRange       = 100.0
        SpecialWeapon           = RogashLeap
        BusyForDuration         = 10000
        WhichSpecialWeapon      = 2
        TriggerSound            = RogashVoiceModeLeap
    End



    Behavior = SpecialPowerModule ModuleTag_DominateTrollPower
        SpecialPowerTemplate          = SpecialAbilityRogashDominateTroll
        UpdateModuleStartsAttack      = Yes
    End

    Behavior = DominateEnemySpecialPower ModuleTag_DominateTrollUpdate
        SpecialPowerTemplate         = SpecialAbilityRogashDominateTroll
        StartAbilityRange            = 100
        DominatedFX                  = FX_SarumanDominateAtSelf
        TriggerFX                    = FX_SarumanDominateTrigger
        PermanentlyConvert           = Yes
        AttributeModifierAffects     = ROGASH_DOMINATE_OBJECT_FILTER ENEMIES NEUTRAL
        TriggerSound                 = RogashVoiceModeDominateTroll

        TriggerModelCondition            = ModelConditionState:SPECIAL_POWER_1
        TriggerModelConditionDuration    = 20
        UnpackTime                       = 2300
    End

    Behavior = AutoAbilityBehavior ModuleTag_DominateTrollAutoAbility

	SpecialAbility	= SpecialAbilityRogashDominateTroll

	ForbiddenStatus = INSIDE_GARRISON

	MaxScanRange	= 100
	Query		= 1 ROGASH_DOMINATE_OBJECT_FILTER ENEMIES NEUTRAL
    End


    Behavior = RadiateFearUpdate ModuleTag_GoldenArrowDaylightUpdate
        EmotionPulseRadius             = 200
        EmotionPulseInterval           = 3000
        GenerateFear                   = Yes
        InitiallyActive                = Yes
        VictimFilter                   = ALL ENEMIES
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_RageoftheNorthEnabler
        SpecialPowerTemplate         = SpecialAbilityRageoftheNorth
        TriggeredBy                  = Upgrade_Level_10
    End

      Behavior = SpecialPowerModule ModuleTag_ARageoftheNorthStarter
        SpecialPowerTemplate        = SpecialAbilityRageoftheNorth
        StartsPaused                = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_RageoftheNorthUpdate
        SpecialPowerTemplate        = SpecialAbilityRageoftheNorth
        HeroAttributeModifier       = AngmarRageoftheNorth2
        HeroEffectDuration          = 30000
        TriggerSound                = RogashVoiceModeRageofthenorth

        TriggerModelCondition           = ModelConditionState:SPECIAL_POWER_2
        TriggerModelConditionDuration   = 20
        UnpackTime                      = 200
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership
        SpecialPowerTemplate           = SpecialAbilityFakeLeadership
        TriggeredBy                    = Upgrade_Level_7
    End

    Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate
        SpecialPowerTemplate           = SpecialAbilityFakeLeadership
        UpdateModuleStartsAttack       = Yes
        StartsPaused                   = No
    End

    Behavior = AttributeModifierAuraUpdate ModuleTag_Leadership2
        StartsActive                   = No
        BonusName                      = RogashModLeadership
        TriggeredBy                    = Upgrade_Level_7
        RefreshDelay                   = 2000
        Range                          = 99999
        AntiCategory                   = BUFF
        ObjectFilter                   = NONE +AngmarHillTrollHorde +AngmarSnowTrollHorde +AngmarSnowTrollEdain +AngmarHillTrollEdain -STRUCTURE -BASE_FOUNDATION -HERO ALLIES
    End

    Behavior = ArmorUpgrade ArmorUpgradeModuleTag
        TriggeredBy = Upgrade_Level_7
    End

    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance        =    300
         TauntAndPointUpdateDelay    =    1000

        AddEmotion            =    Doom_Base



        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
         AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base


        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
     End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 2200
        HitReactionLifeTimer2 = 15
        HitReactionLifeTimer3 = 10

        HitReactionThreshold1 = 1.0
        HitReactionThreshold2 = 2500.0
        HitReactionThreshold3 = 5000.0
    End


    Behavior = ObjectCreationUpgrade ModuleTag_IamAI4
        TriggeredBy  = Upgrade_EasyAISinglePlayer Upgrade_EasyAIMultiPlayer Upgrade_MediumAISinglePlayer Upgrade_MediumAIMultiPlayer Upgrade_HardAISinglePlayer Upgrade_HardAIMultiPlayer Upgrade_BrutalAISinglePlayer Upgrade_BrutalAIMultiPlayer
        Delay        = 320000
        GrantUpgrade = Upgrade_TestBuilding_2
    End





    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate DominateAI
        CommandButtonName = Command_RogashDominateTroll
        SpecialPowerAIType = AI_SPECIAL_POWER_DOMINATE_TROLL
        SpecialPowerRadius = 50
    End

    Behavior = AISpecialPowerUpdate ScreechAI
        CommandButtonName = Command_SpecialAbilityRogashScreech
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate RageOfTheNorthAI
        CommandButtonName = Command_SpecialAbilityRageoftheNorth
        SpecialPowerAIType = AI_SPECIAL_POWER_CHARGE
    End

    Behavior = AISpecialPowerUpdate RogashLeapAttackAI
        CommandButtonName = Command_RogashLeap
        SpecialPowerAIType = AI_SPECIAL_POWER_RANGED_AOE_ATTACK
        SpecialPowerRadius = 135
    End


    Geometry = CYLINDER
    GeometryMajorRadius = 16.0
    GeometryMinorRadius = 16.0
    GeometryHeight = 40.0
    GeometryIsSmall = No
    HealthBoxHeightOffset = 20
  Shadow = SHADOW_DECAL
  ShadowSizeX = 19
  ShadowSizeY = 19
  ShadowTexture = ShadowI
End

ChildObject AngmarRogash AngmarRogash_mod
      EquivalentTo = AngmarRogash_mod
End

ChildObject AngmarRogash_Summoned AngmarRogash_mod
    IsTrainable = No
    CommandPoints = 0

    KindOf = +SUMMONED

    Behavior = ExperienceLevelCreate ModuleTag_MPLevelBonus
        LevelToGrant = 8
    End

    Behavior = LifetimeUpdate ModuleTag_LifetimeUpdate
        MinLifetime      = 180000
        MaxLifetime      = 180000
        DeathType        = FADED
    End

    Behavior = SlowDeathBehavior ModuleTag_FadeDeath
        DeathTypes = NONE +FADED
        FadeDelay = 0
        FadeTime = 2500
        DestructionDelay = 2500
        Sound = INITIAL SpellGenericUnsummonFasterMS
        DeathFlags = DEATH_2
    End
End


Object AngmarRogash_New


    ButtonImage    = HIRogashnew
    SelectPortrait    = HPRogash

    DescriptionStrategic = CONTROLBAR:LW_ToolTip_SupportHero

    Draw = W3DScriptedModelDraw ModuleTag_01
        WadingParticleSys = EntRipples
        OkToChangeModelColor = No
        ExtraPublicBone = Trunk
        ShowShadowWhileContained = Yes

        RandomTexture = chtl_ht_07.tga 0 chtl_ht_05.tga

        DefaultModelConditionState
            Model = CHTL_HT_U_SKN
            Skeleton = CHTL_HT_U_SKL
        End





AnimationState        = STUNNED_FLAILING
    StateName           = STATE_Sword
    Animation
        AnimationName     = CHTL_HT_U_FLYA
        AnimationMode     = LOOP
    End
    Flags               = RANDOMSTART
End


AnimationState        = DYING SPLATTED
    StateName           = STATE_Sword
    Animation
        AnimationName     = CHTL_HT_U_LNDA
        AnimationMode     = ONCE
    End
End

AnimationState        = DYING
    StateName           = STATE_Sword
    Animation
        AnimationName     = CHTL_HT_U_DIEA
        AnimationMode     = ONCE
    End

End




AnimationState        = STUNNED_STANDING_UP
    StateName           = STATE_Sword
    Animation
        AnimationName     = CHTL_HT_U_GTPA
        AnimationMode     = ONCE
        AnimationSpeedFactorRange = 1.5 1.5
    End
End

AnimationState        = STUNNED
    StateName           = STATE_Sword
    Animation           = GUHero_LNDA
        AnimationName     = CHTL_HT_U_LNDA
        AnimationMode     = ONCE
    End
End





AnimationState                = PACKING_TYPE_1
    StateName                = Curse
    Animation
        AnimationName        = CHTL_HT_U_CHRA
        AnimationMode        = ONCE
    End
End


AnimationState                = PACKING_TYPE_3
    StateName                = Curse
    Animation
        AnimationName        = CHTL_HT_U_CHRA
        AnimationMode        = ONCE
    End
End






        AnimationState            = MOVING
            StateName           = STATE_RunningSword
            Flags               = RANDOMSTART
            Animation
                AnimationName   = CHTL_HT_U_RUNA

                AnimationSpeedFactorRange = 0.85 0.85

            End
            ParticleSysBone     = None InfantryDustTrails
            FXEvent    = Frame:5 FireWhenSkipped Name:FX_TrollRightFootStep
            FXEvent    = Frame:17 FireWhenSkipped Name:FX_TrollLeftFootStep
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
            EndScript
        End




















        AnimationState                = FIRING_OR_PREATTACK_A
            Animation = ATKA
                AnimationName        = CHTL_HT_U_ATKA
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
            End
        End

        AnimationState                = FIRING_OR_PREATTACK_B
            Animation = ATKB
                AnimationName        = CHTL_HT_U_ATKB
                AnimationMode        = ONCE
                UseWeaponTiming        = Yes
            End
        End




        AnimationState = HIT_REACTION
            Animation = Sword_HITA
                AnimationName = CHTL_HT_U_HITA
                AnimationMode = ONCE
            End

            BeginScript
                PrevAnim = CurDrawablePrevAnimation()
                if PrevAnim == "Foot_IDLB"
                then
                    return "Sword_HITB"
                end
            EndScript
        End


        AnimationState                = SPECIAL_POWER_1
            StateName                = STATE_ready
            Animation = TNTA
                AnimationName        = CHTL_HT_U_TNTA
                AnimationMode        = ONCE
            End
            Animation = TNTB
                AnimationName        = CHTL_HT_U_TNTB
                AnimationMode        = ONCE
            End
        End

        AnimationState          =    SPECIAL_WEAPON_TWO
            StateName          =    Attacking
            Animation
                AnimationName =    CHTL_HT_U_SPCE
                AnimationMode =    ONCE
            End
        End


        AnimationState            = SPECIAL_WEAPON_ONE
            Animation
                AnimationName     = CHTL_HT_U_TNTA
                AnimationMode     = ONCE
                AnimationBlendTime = 20
            End
           FXEvent          = Frame:10 Name:FX_FearBlast
        End

        AnimationState          =    SPECIAL_WEAPON_THREE
            StateName          =    Attacking
            Animation          =    StaffLaser
                AnimationName =    CHTL_HT_U_TNTA
                AnimationMode =    ONCE
            End
        End


        AnimationState          =    SPECIAL_WEAPON_FOUR
            StateName          =    Attacking
            Animation
                AnimationName =    CHTL_HT_U_TNTA
                AnimationMode =    ONCE
            End
            FrameForPristineBonePositions    = 44

        End

        AnimationState          =    SPECIAL_WEAPON_FIVE
            StateName          =    Attacking
            Animation
                AnimationName =    CHTL_HT_U_TNTA
                AnimationMode =    ONCE
            End
        End


        AnimationState          =    PACKING_TYPE_2
            Animation
                AnimationName =    CHTL_HT_U_TNTA
                AnimationMode =    LOOP
            End
        End


        AnimationState                = LEVELED
            Animation                = LevelUp
                AnimationName        = CHTL_HT_U_CHRA
                AnimationMode        = ONCE
            End
        End



        AnimationState                =    EMOTION_CELEBRATING
            Animation CHRA
                AnimationName        =    CHTL_HT_U_CHRA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End



        AnimationState                =    RAISING_FLAG
            Animation CHRA
                AnimationName        =    CHTL_HT_U_CHRA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End



        AnimationState                =    EMOTION_TAUNTING
            Animation CHRA
                AnimationName        =    CHTL_HT_U_TNTA
                AnimationMode        =    ONCE
            End
            Flags                    =    RESTART_ANIM_WHEN_COMPLETE
        End






        AnimationState                = ENGAGED
            StateName                = STATE_ready
            Animation
                AnimationName        = CHTL_HT_U_IDLA
                AnimationMode        = ONCE
            End
        End

        AnimationState                = BETWEEN_FIRING_SHOTS_A
            StateName                = STATE_ready
            Animation
                AnimationName        = CHTL_HT_U_IDLA
                AnimationMode        = ONCE
            End
        End





        AnimationState = SELECTED
            StateName                = STATE_Selected_Sword
            Animation                = Selected_Loop
                AnimationName        = CHTL_HT_U_ATNB
                AnimationMode        = LOOP
                AnimationBlendTime    = 10
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Idle_Sword" then CurDrawableSetTransitionAnimState("TRANS_BoredToSelectedSword") end
            EndScript
            Flags = RESTART_ANIM_WHEN_COMPLETE
        End


        IdleAnimationState
            StateName                    = STATE_Idle_Sword
            Animation = Foot_IDLA
                AnimationName       = CHTL_HT_U_IDLA
                AnimationMode       = ONCE
                AnimationPriority   = 35
            End
            Animation = Foot_IDLB
                AnimationName       = CHTL_HT_U_IDLB
                AnimationMode       = ONCE
                AnimationPriority   = 10
            End
            Animation = Foot_IDLD
                AnimationName       = CHTL_HT_U_IBFA
                AnimationMode       = ONCE
                AnimationPriority   = 10
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "STATE_Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoredSword")end
                if Prev == "State_AboutToHitGround" then CurDrawableSetTransitionAnimState("TRANS_AboutToHitGround_To_Idle")end
            EndScript
        End













        TransitionState = TRANS_BoredToSelectedSword
            Animation = ANTD
                AnimationName    = CHTL_HT_U_ATNA
                AnimationMode    = ONCE
            End
        End

        TransitionState = TRANS_SelectedToBoredSword
            Animation            = ATNF
                AnimationName    = CHTL_HT_U_ATNC
                AnimationMode    = ONCE
            End
        End

    End




    Draw = W3DScriptedModelDraw DustEffects
        DefaultModelConditionState
          Model = None
        End
        IdleAnimationState
        End
        AnimationState =  MOVING WADING
            ParticleSysBone = None FootstepSlash
        End
        AnimationState = MOVING ACCELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState =  MOVING ACCELERATE
            ParticleSysBone = None GenericSiegeTrailDust
        End
        AnimationState = MOUNTED MOVING
        End
    End


    Behavior = SubObjectsUpgrade ModuleTag_MakingTheMollok
        TriggeredBy       = Upgrade_AllFactionUpgrade
        HideSubObjects    = BARREL BOOT_04 BOOT_03 BOOT_02 GNLT_05 GNLT_06 GNLT_07 GNLT_08 SHIELD_2OG SHLD_01 SHLD_02 SHIELD_1OG GNLT_09 HLMT_03 HLMT_07 HLMT_06 HLMT_05 HLMT_04 CHEST_01 CHEST_02 GNLT_01 GNLT_02 GNLT_03 GNLT_04 HLMT_01 HLMT_02 SLDR_01 SLDR_02 SLDR_03 SLDR_04 SLDR_05 TROLLHAMMER PAXE_01 TROLLTREE CLUB_01 HMR_04 HMR_02 TROLLMACE TROLLSWORD
    End



    Side = Wild
    EditorSorting = UNIT
    ThreatLevel = GOBLIN_KING_THREAT_LEVEL
    ThingClass = CHARACTER_UNIT
    TransportSlotCount = TRANSPORTSLOTCOUNT_HERO
    BuildCost           = ROGASHDAG_COST
    BuildTime           = MEDIUM_HERO_BUILDTIME
    ShockwaveResistance = SHOCKWAVE_RESISTANCE_STRONG
    MaxSimultaneousOfType = 1
    DisplayMeleeDamage = ROGASHDAG_DAMAGE
    Scale = 1.1


    WeaponSet
        Conditions            = None
        Weapon                = PRIMARY    RogashWarMace
        AutoChooseSources     = PRIMARY    FROM_PLAYER FROM_SCRIPT FROM_AI
        Weapon                = SECONDARY  RogashWarMace
        OnlyAgainst           = SECONDARY  STRUCTURE BLOCKING_GATE
    End



    ArmorSet
        Conditions      = None
        Armor           = MediumHeroArmorMounted
        DamageFX        = NormalDamageFX
    End


    VisionRange = VISION_STANDARD_MELEE
    ShroudClearingRange = SHROUD_CLEAR_HERO

    MaxVisionBonusPercent = 300%
    VisionBonusTestRadius = 200
    VisionBonusPercentPerFoot = 1.0%
    BountyValue    = ANGMAR_ROGASH_BOUNTY_VALUE
    DisplayName    = OBJECT:AngmarRogash
    RecruitText    = CONTROLBAR:AngmarRogashRecruit
    ReviveText     = CONTROLBAR:AngmarRogashRevive
    Hotkey         = CONTROLBAR:AngmarRogashHotkey
    CrusherLevel   = 1
    CrushableLevel = 2
    CrushWeapon    = RogashCrush
    UseCrushAttack = No
    RamPower       = 20
    RamZMult       = 0.5
    CrushKnockback = 30
    CrushZFactor   = 1.0
    CommandSet  = AngmarRogashModCommandSet

    CommandPoints = 0



    AutoResolveUnitType = AutoResolveUnit_Hero
    AutoResolveCombatChain = AutoResolve_HeroCombatChain

    AutoResolveBody = AutoResolve_RogashBody

    AutoResolveArmor
        Armor = AutoResolve_RogashArmor
    End

    AutoResolveWeapon
        Weapon = AutoResolve_RogashWeapon
    End






    VoiceAttack                = RogashVoiceAttack
    VoiceAttackCharge            = RogashVoiceAttackCharge
    VoiceAttackMachine            = RogashVoiceAttack
    VoiceAttackStructure            = RogashVoiceAttackBuilding
    VoiceCreated                = RogashVoiceSalute
    VoiceFullyCreated            = RogashVoiceSalute
    VoiceGuard                = RogashVoiceMove
    VoiceMove                = RogashVoiceMove
    VoiceMoveToCamp                = RogashVoiceMove
    VoiceMoveWhileAttacking            = RogashVoiceAttackCharge
    VoicePriority                = 90
    VoiceSelect                = RogashVoiceSelect
    VoiceSelectBattle            = RogashVoiceSelectBattle
    VoiceFear                = RogashVoiceHelpMe
    VoiceRetreatToCastle            = RogashVoiceRetreat
    VoiceMoveWhileAttacking            = RogashVoiceDisengage

    SoundImpact                = ImpactHorse

    UnitSpecificSounds
        VoiceEnterUnitEvilMenTransportShip    = RogashVoiceMoveShip
        VoiceGarrison                = RogashVoiceMove
        VoiceInitiateCaptureBuilding        = RogashVoiceCaptureBuilding
    End

       #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    EvaEventDieOwner        = AngmarRogashDie



    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:TrollBodyfall             Animation:CHTL_HT_U_SKL.CHTL_HT_U_LNDA    Frames:3 21
        AnimationSound = Sound:TrollBodyfall             Animation:CHTL_HT_U_SKL.CHTL_HT_U_DIEA    Frames:31
        AnimationSound = Sound:MordorTrollIdleA          Animation:CHTL_HT_U_SKL.CHTL_HT_U_IDLA    Frames:13
        AnimationSound = Sound:MordorTrollIdleB          Animation:CHTL_HT_U_SKL.CHTL_HT_U_IDLB    Frames:7
        AnimationSound = Sound:MordorTrollIdleB          Animation:CHTL_HT_U_SKL.CHTL_HT_U_ATNA    Frames:7
        AnimationSound = Sound:TrollFootstep             Animation:CHTL_HT_U_SKL.CHTL_HT_U_RUNA    Frames:4 17
        AnimationSound = Sound:TrollFootstep             Animation:CHTL_HT_U_SKL.CHTL_HT_U_TRNL    Frames:15 29
        AnimationSound = Sound:TrollFootstep             Animation:CHTL_HT_U_SKL.CHTL_HT_U_TRNR    Frames:15 29
        AnimationSound = Sound:TrollFootstep             Animation:CHTL_HT_U_SKL.CHTL_HT_U_GTPA    Frames:12 80 97
        AnimationSound = Sound:TrollGetupShakeHeadVox    Animation:CHTL_HT_U_SKL.CHTL_HT_U_GTPA    Frames:31
        AnimationSound = Sound:TrollRoar                 Animation:CHTL_HT_U_SKL.CHTL_HT_U_GTPA    Frames:105
        AnimationSound = Sound:TrollRoar                 Animation:CHTL_HT_U_SKL.CHTL_HT_U_HITA    Frames:21
    End


    Behavior = LargeGroupAudioUpdate ModuleTag_LGAU
        Key                            = Troll
    End





    Behavior = EmotionTrackerUpdate    Module_EmotionTracker
        TauntAndPointDistance                = 200
        TauntAndPointUpdateDelay            = 10000
        PointAt                                = ANY +HERO
        AddEmotion            =    Doom_Base



        AddEmotion            =    Point_Base
        AddEmotion            =    Taunt_Base
         AddEmotion            =    CheerIdle_Base
        AddEmotion            =    CheerBusy_Base


        AddEmotion            =    Alert_Base
        AddEmotion            =    CheerForAboutToCrush_Base
    End

    RadarPriority = UNIT
    KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS MONSTER ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_EACH_OTHER SCORE ARMY_SUMMARY HEAVY_MELEE_HITTER
    PathfindDiameter = 40.0


    Body = RespawnBody ModuleTag_RespawnBody
        CheerRadius             = EMOTION_CHEER_RADIUS
        MaxHealth                 = ROGASHDAG_HEALTH
        PermanentlyKilledByFilter    = NONE
		DodgePercent        = HERO_DODGE_PERCENT
    End

    Behavior = RespawnUpdate ModuleTag_RespawnUpdate
        DeathAnim                = DYING
        DeathAnimationTime        = 4100
        RespawnAnim                = LEVELED
        RespawnAnimationTime        = 2000
        AutoRespawnAtObjectFilter    = NONE +CASTLE_KEEP
        ButtonImage                = HIRogashnew
		
        RespawnRules =                AutoSpawn:No    Cost:ROGASHDAG_COST        Time:MEDIUM_HERO_RESPAWNTIME        Health:100%
   End

    Behavior = AutoHealBehavior ModuleTag_GoblinKingHealing
        StartsActive = Yes
        HealingAmount = HERO_HEAL_AMOUNT
        HealingDelay = 2000
        StartHealingDelay = HERO_HEAL_DELAY
        HealOnlyIfNotInCombat = Yes
    End





    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_ScreechUnPause
        SpecialPowerTemplate        = SpecialAbilityScreech
        TriggeredBy                 = Upgrade_Level_3
        ObeyRechageOnTrigger        = Yes
    End

    Behavior = SpecialPowerModule ModuleTag_Screech
        SpecialPowerTemplate        = SpecialAbilityScreech
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_ScreechUpdate
        SpecialPowerTemplate        = SpecialAbilityScreech
        UnpackTime                  = 1
        AwardXPForTriggering        = 0
        TriggerSound                = TrollRoar
        EffectRange                 = 200
        PreparationTime             = 1
        PackTime                    = 3000
        CustomAnimAndDuration       = AnimState:SPECIAL_WEAPON_ONE AnimTime:3000
    End




    Behavior = BezierProjectileBehavior ModuleTag_08
        FirstHeight         = 75
        SecondHeight        = 35
        FirstPercentIndent  = 20%
        SecondPercentIndent = 70%
        TumbleRandomly    = Yes
        CrushStyle        = Yes
        BounceCount       = 0
        FinalStuckTime    = 1200
        GroundHitFX       = FX_RogashLeapLand
        GroundHitWeapon   = RogashLeapWarhead
        PreLandingStateTime = 200
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_LeapEnabler
        SpecialPowerTemplate = SpecialAbilityRogashLeap
        TriggeredBy = Upgrade_Level_5
    End

    Behavior = SpecialPowerModule ModuleTag_LeapStarter
        SpecialPowerTemplate        = SpecialAbilityRogashLeap
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = Yes
        InitiateSound               = TrollRoar
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_LeapUpdate
        SpecialPowerTemplate    = SpecialAbilityRogashLeap
        UnpackTime              = 500
        PackTime                = 1834
        AwardXPForTriggering    = 0
        MustFinishAbility       = Yes
        StartAbilityRange       = 100.0
        SpecialWeapon           = RogashLeap
        BusyForDuration         = 4000
        WhichSpecialWeapon      = 2
        TriggerSound            = RogashVoiceModeLeap
    End




    Behavior = SpecialPowerModule ModuleTag_DominateTrollPower
        SpecialPowerTemplate            = SpecialAbilityRogashDominateTroll
        UpdateModuleStartsAttack        = Yes
    End

    Behavior = DominateEnemySpecialPower ModuleTag_DominateTrollUpdate
        SpecialPowerTemplate      = SpecialAbilityRogashDominateTroll
        StartAbilityRange         = 100
        DominatedFX               = FX_SarumanDominateAtSelf
        TriggerFX                 = FX_SarumanDominateTrigger
        PermanentlyConvert        = Yes
        AttributeModifierAffects  = ROGASH_DOMINATE_OBJECT_FILTER ENEMIES NEUTRAL
        TriggerSound              = RogashVoiceModeDominateTroll

        TriggerModelCondition            = ModelConditionState:SPECIAL_POWER_1
        TriggerModelConditionDuration    = 20
        UnpackTime                       = 2300
    End

    Behavior = AutoAbilityBehavior ModuleTag_DominateTrollAutoAbility

	SpecialAbility	= SpecialAbilityRogashDominateTroll

	ForbiddenStatus = INSIDE_GARRISON

	MaxScanRange	= 100
	Query		= 1 ROGASH_DOMINATE_OBJECT_FILTER ENEMIES NEUTRAL
    End

    Behavior = RadiateFearUpdate ModuleTag_GoldenArrowDaylightUpdate
        EmotionPulseRadius          = 200
        EmotionPulseInterval        = 1000
        GenerateFear                = Yes
        InitiallyActive             = Yes
        VictimFilter                = ALL ENEMIES
    End



    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_RageoftheNorthEnabler
        SpecialPowerTemplate         = SpecialAbilityRageoftheNorth
        TriggeredBy                  = Upgrade_Level_10
    End

      Behavior = SpecialPowerModule ModuleTag_ARageoftheNorthStarter
        SpecialPowerTemplate        = SpecialAbilityRageoftheNorth
        StartsPaused                = Yes
    End

    Behavior = HeroModeSpecialAbilityUpdate ModuleTag_RageoftheNorthUpdate
        SpecialPowerTemplate        = SpecialAbilityRageoftheNorth
        HeroAttributeModifier       = AngmarRageoftheNorth
        HeroEffectDuration          = 30000
        TriggerSound                = RogashVoiceModeRageofthenorth

        TriggerModelCondition           = ModelConditionState:SPECIAL_POWER_2
        TriggerModelConditionDuration   = 20
        UnpackTime                      = 200
    End



    Behavior = BoredUpdate BoredModuleTagOne
        ScanDelayTime    = 15000
        ScanDistance    = 70
        BoredFilter        = NONE +MordorMountainTroll +MordorCaveTroll +MordorAttackTroll
        SpecialPowerTemplate = SpecialAbilityMountainTrollBored
    End

    Behavior = AutoPickUpUpdate AutoPickUpForTastyOrcs
        ScanDelayTime        = 40000
        ScanDistance        = 200
        EatObjectEntry        = MyHealth:20% TargetHealth:100% Filter:NONE +ORC
        RunFromButton        = Yes
        RunFromButtonNumber = 3
    End




    Behavior = GrabPassengerSpecialPower ModuleTag_20
        SpecialPowerTemplate        = SpecialAbilityGrabPassenger
        UpdateModuleStartsAttack    = Yes
        AllowTree                    = Yes
        InitiateFX                    = FX_TrollGrabInitiate
    End

    Behavior = SpecialAbilityUpdate ModuleTag_21
        SpecialPowerTemplate    = SpecialAbilityGrabPassenger
        StartAbilityRange       = 8.0



        UnpackTime              = 300
        PreparationTime         = 1
        PersistentPrepTime      = 630
        PackTime                = 1000

        GrabPassengerAnimAndDuration   = AnimState:EATING AnimTime:3000 TriggerTime:1400

        AwardXPForTriggering    = 0

        RejectedConditions        = WEAPON_TOGGLE
    End


    Behavior = SpecialPowerModule ModuleTag_SpecialPowerModuleDropTreeStarter
        SpecialPowerTemplate        = SpecialAbilityTrollDropTree
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = No
    End
    Behavior = FlingPassengerSpecialAbilityUpdate ModuleTag_FlingPassengerSpecialAbilityUpdate
        SpecialPowerTemplate        = SpecialAbilityTrollDropTree
        UnpackTime                    = 1900
        PackTime                    = 1000
        CustomAnimAndDuration        = AnimState:SPECIAL_WEAPON_TWO AnimTime:2967
    End

    Behavior = TransportContain ModuleTag_09
        ObjectStatusOfContained = UNSELECTABLE
        PassengerFilter            = ANY +CLUB +ORC
        ManualPickUpFilter        = ANY +CLUB -ORC
        Slots                    = 1
        ShowPips                = No
        AllowEnemiesInside        = Yes
        AllowNeutralInside        = Yes
        AllowAlliesInside        = Yes
        DamagePercentToUnits    = 0%

        TypeOneForWeaponSet        = CLUB
        TypeOneForWeaponState    = CLUB

        PassengerBonePrefix = PassengerBone:Trunk       KindOf:CLUB
        PassengerBonePrefix = PassengerBone:Trunk        KindOf:INFANTRY

        EjectPassengersOnDeath = No
    End


    Behavior = SpecialPowerModule ModuleTag_MordorMtTrollBoredAbility
        SpecialPowerTemplate      = SpecialAbilityMountainTrollBored
        UpdateModuleStartsAttack  = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_MordorMtTrollBored
        SpecialPowerTemplate    = SpecialAbilityMountainTrollBored

        UnpackTime              = 800
        PackTime                = 1200
        AwardXPForTriggering    = 0

        StartAbilityRange        = 12.0

        SpecialWeapon            = MordorMtTrollBored
        WhichSpecialWeapon        = 1
        RejectedConditions        = WEAPON_TOGGLE
    End



     Behavior LifetimeUpdate LifetimeTag
        WaitForWakeUp    =    Yes
    End


    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End



    #include "..\..\..\includes\CaptureBuilding.inc"


    Behavior = AIUpdateInterface ModuleTag_03
        AutoAcquireEnemiesWhenIdle   = Yes ATTACK_BUILDINGS
        MoodAttackCheckRate          = 500
        HoldGroundCloseRangeDistance = 60
        AILuaEventsList              = AngmarRogashFunctions
    End

    LocomotorSet
        Locomotor                    = TrollLocomotor
        Condition                    = SET_NORMAL
        Speed                        = 65
    End

    Behavior = PhysicsBehavior ModuleTag_04
        GravityMult                    = 0.0
        ShockStandingTime            = 4600
        FirstHeight                    = 0
        SecondHeight                = 0
    End

    Behavior = SlowDeathBehavior ModuleTag_50
        DeathTypes                    = ALL -FADED
        DestructionDelay            = 35000
        DecayBeginTime                = 3000
        SinkDelay                    = 10000
        SinkRate                    = 0.64
        Sound                        = INITIAL TrollDie
        ProbabilityModifier            = 50
        DeathFlags                    = DEATH_1
    End

    Behavior = SlowDeathBehavior ModuleTag_51
        DeathTypes                    = ALL -FADED
        DestructionDelay            = 35000
        DecayBeginTime                = 4000
        SinkDelay                    = 11000
        SinkRate                    = 0.64
        Sound                        = INITIAL TrollDie
        ProbabilityModifier            = 50
        DeathFlags                    = DEATH_2
    End

    Behavior = SquishCollide ModuleTag_06

    End

    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End

    Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
        HitReactionLifeTimer1 = 1500
        HitReactionLifeTimer2 = 3000
        HitReactionLifeTimer3 = 2000

        HitReactionThreshold1 = 0.0
        HitReactionThreshold2 = 50.0
        HitReactionThreshold3 = 200.0
    End

    Behavior = ClickReactionBehavior ClickBehaviorModuleTag
        ClickReactionTimer = 600
        ReactionFrames1 = 15
        ReactionFrames2 = 7
        ReactionFrames3 = 7
        ReactionFrames4 = 15
        ReactionFrames5 = 18
    End






    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
        CommandButtonName = Command_SetStanceBattle
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
        CommandButtonName = Command_SetStanceAggressive
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
    End

    Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
        CommandButtonName = Command_SetStanceHoldGround
        SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
    End

    Behavior = AISpecialPowerUpdate DominateAI
        CommandButtonName = Command_RogashDominateTroll
        SpecialPowerAIType = AI_SPECIAL_POWER_DOMINATE_TROLL
        SpecialPowerRadius = 50
    End

    Behavior = AISpecialPowerUpdate ScreechAI
        CommandButtonName = Command_SpecialAbilityRogashScreech
        SpecialPowerAIType = AI_SPECIAL_POWER_BASIC_SELF_BUFF
    End

    Behavior = AISpecialPowerUpdate RageOfTheNorthAI
        CommandButtonName = Command_SpecialAbilityRageoftheNorth
        SpecialPowerAIType = AI_SPECIAL_POWER_CHARGE
    End

    Behavior = AISpecialPowerUpdate RogashLeapAttackAI
        CommandButtonName = Command_RogashLeap
        SpecialPowerAIType = AI_SPECIAL_POWER_RANGED_AOE_ATTACK
        SpecialPowerRadius = 135
    End

    Geometry                          = CYLINDER
    GeometryMajorRadius               = 22
    GeometryHeight                    = 42.0
    GeometryIsSmall                   = No
    Shadow                            = SHADOW_VOLUME_NON_SELF_2
End

