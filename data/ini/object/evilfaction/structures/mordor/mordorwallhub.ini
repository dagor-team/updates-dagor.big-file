Object DolguldurCastleWallSegment


      SelectPortrait = BPIWall

    Draw = W3DScriptedModelDraw ModuleTag_Draw
        OkToChangeModelColor  = Yes
        UseStandardModelNames = Yes

        DefaultModelConditionState
            Model                = mbwalln
        End

        ModelConditionState = SNOW BUILD_PLACEMENT_CURSOR
            Model                = mbwalln
            Texture                = dolgolgate.tga dolgolgate_sn.tga
        End

        ModelConditionState = BUILD_PLACEMENT_CURSOR
            Model                = mbwalln
        End

        IdleAnimationState
            BeginScript
                CurDrawableShowSubObject("ModuleTag_DrawFloor")
            EndScript
        End


        ModelConditionState            = SNOW AWAITING_CONSTRUCTION
            Model                = mbwalln_a
            Texture                = dolgolgate.tga dolgolgate_sn.tga
        End

        ModelConditionState            = AWAITING_CONSTRUCTION
            Model                = mbwalln_a
        End

        AnimationState                = AWAITING_CONSTRUCTION
            Animation            = mbwalln_abld
                AnimationName        = mbwalln_askl.mbwalln_abld
                AnimationMode        = MANUAL
                AnimationBlendTime    = 0
            End
            Flags                = START_FRAME_FIRST
            BeginScript
                CurDrawableHideSubObject("ModuleTag_DrawFloor")
            EndScript
        End

        ModelConditionState            = UPGRADE_NUMENOR_STONEWORK ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Model                = mbwalln_a

        End

        ModelConditionState = SNOW ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Model                = mbwalln_a
            Texture                = dolgolgate.tga dolgolgate_sn.tga
        End

        ModelConditionState            = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Model                = mbwalln_a
            ParticleSysBone            = NONE WallConstructDust FollowBone:Yes
        End

        AnimationState                = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Animation            = mbwalln_abld
                AnimationName        = mbwalln_askl.mbwalln_abld
                AnimationMode        = MANUAL
                AnimationBlendTime    = 0
            End
            Flags                = START_FRAME_FIRST
            StateName            = BeingConstructed
            BeginScript
                CurDrawablePlaySound("GondorBarracksBeginConstruction")
            EndScript
        End


        ModelConditionState            = DAMAGED
            Model                = mbwalln_d1
        End

        AnimationState = DAMAGED
            Animation            = DamagedAnimation
                AnimationName        = mbwalln_d1.mbwalln_d1
                AnimationMode        = ONCE
               End
            EnteringStateFX            = FX_WallDamaged
        End

        ModelConditionState            = REALLYDAMAGED
            Model                = mbwalln_d2
        End

        AnimationState                = REALLYDAMAGED
                  Animation            = RubbleAnimation
                AnimationName        = mbwalln_d2.mbwalln_d2
                AnimationMode        = ONCE
            End
            EnteringStateFX            = FX_WallDamaged
        End

        ModelConditionState            = COLLAPSING
            Model                = mbwalln_d2
        End

        AnimationState                = COLLAPSING
                  Animation            = RubbleAnimation
                AnimationName        = mbwalln_d2.mbwalln_d2
                AnimationMode        = ONCE
              End
              ParticleSysBone              NONE WallDestructionDust
            EnteringStateFX            = FX_StructureMediumCollapse
        End

        ModelConditionState            = RUBBLE
            Model                = None
        End

        AnimationState                = RUBBLE
            BeginScript
                CurDrawableHideSubObject("ModuleTag_DrawFloor")
            EndScript
        End

        ModelConditionState            = POST_RUBBLE
            Model                = None
        End

        AnimationState                = POST_RUBBLE
        End

        ModelConditionState            = POST_COLLAPSE
            Model                = None
        End

        AnimationState                = POST_COLLAPSE
        End

        ModelConditionState            = UPGRADE_NUMENOR_STONEWORK
            Model                = mbwalln

        End

        ModelConditionState            = SNOW
            Model                = mbwalln
            Texture              = dolgolgate.tga dolgolgate_sn.tga
        End
    End


    Draw = W3DScriptedModelDraw ModuleTag_DrawMorgulSorcery
        OkToChangeModelColor    = Yes

        DefaultModelConditionState
            Model    = None
        End

        ModelConditionState    = UPGRADE_NUMENOR_STONEWORK
            Model = mbwalln_sor
        End
    End


    Draw = W3DScriptedModelDraw ModuleTag_DrawMM

        DefaultModelConditionState
            Model    = None
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_4
            Model           = bbox
            Shadow                      = SHADOW_ALPHA_DECAL_DYNAMIC
            ShadowSizeX                 = 80
            ShadowSizeY                 = 80
            ShadowTexture               = EXBlight
            ShadowOpacityStart          = 0
            ShadowOpacityFadeInTime     = 1000
            ShadowOpacityPeak           = 240
            ShadowOpacityFadeOutTime    = 1000
            ShadowOpacityEnd            = 0
            ShadowOverrideLODVisibility = Yes
        End

    End

    Draw = W3DScriptedModelDraw ModuleTag_Draw_Rubble
        OkToChangeModelColor            = Yes
        UseStandardModelNames            = Yes
        DefaultModelConditionState
            Model                = None
        End

        ModelConditionState            = COLLAPSING
            Model                = GBWall_Rubble
        End

        ModelConditionState            = RUBBLE

            Model                = GBWall_Rubble
        End

        ModelConditionState            = POST_RUBBLE
            Model                = GBWall_Rubble
        End

        ModelConditionState            = POST_COLLAPSE
            Model                = None
        End
    End




    DisplayName         = OBJECT:IsengardCastleWallSegment
    Side                = Mordor
    EditorSorting       = STRUCTURE
    ThreatLevel         = 1.0
    BuildCost           = ISENGARD_CASTLE_WALLSEGMENT_BUILDCOST
    BuildTime           = ISENGARD_CASTLE_WALLSEGMENT_BUILDTIME
    VisionRange         = 160.0
    ShroudClearingRange = 160
    CommandSet          = DolguldurWallUpgradeNodeCommandSet

    ArmorSet
        Conditions        = None
        Armor             = IsenWallArmor
    End



    #include "..\..\..\Includes\StandardBuildingEvaEvents.inc"

    VoiceSelect                        = Gui_PlotSelect2
    VoiceSelectUnderConstruction    = BuildingEvilVoiceSelectUnderConstruction

    SoundOnDamaged                    = BuildingLightDamageStone
    SoundOnReallyDamaged            = BuildingHeavyDamageStone

    UnitSpecificSounds
        UnderConstruction        = WallConstructionLoop

        UnderRepairFromRubble    = WallConstructionLoop
    End

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_PlayCollapseSound
        ModelCondition = REQUIRED:RUBBLE Sound:BuildingSink
    End

    CampnessValue = CAMPNESS_WALL


    RadarPriority       = STRUCTURE
    KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE WALL_SEGMENT SCALEABLE_WALL MADE_OF_STONE
    ThreatBreakdown ThreatBreakdown_ModuleTag
        AIKindOf = WALL
    End


    KeepSelectableWhenDead    = Yes

    Behavior            = GettingBuiltBehavior ModuleTag_04
        SelfBuildingLoop            = WallConstructionLoop
        SelfRepairFromDamageLoop    = NoSound
        SelfRepairFromRubbleLoop    = WallConstructionLoop
        UseSpawnTimerWithoutWorker         = Yes
        SpawnTimer    = DEFAULT_STRUCTURE_HEALDELAY
        RebuildTimeSeconds            = ISENGARD_CASTLE_WALLSEGMENT_BUILDTIME
    End

    Body                = StructureBody ModuleTag_05
        MaxHealth                = 2000
        MaxHealthDamaged         = 1000
        MaxHealthReallyDamaged   = 500
    End



    Behavior = KeepObjectDie ModuleTag_IWantRubble
        DeathTypes            = ALL -SUICIDED
    End
    Behavior            = SlowDeathBehavior ModuleTag_SlowDeath
        DeathTypes            = NONE +SUICIDED
        DestructionDelay = 5000
    End



    Behavior = ReplaceSelfUpgrade ModuleTag_Replace_With_Hub
        ReplaceWith = DolguldurCastleWallHub
        TriggeredBy = Upgrade_DolguldurWallHub
        ConflictsWith = Upgrade_DolguldurWallRegularGate Upgrade_DolguldurWallTower Upgrade_DolguldurWallCatapult
    End

    Behavior = ReplaceSelfUpgrade ModuleTag_Replace_With_Gate
        ReplaceWith = DolguldurCastleWallGate
        TriggeredBy = Upgrade_DolguldurWallRegularGate
        ConflictsWith = Upgrade_DolguldurWallHub Upgrade_DolguldurWallTower Upgrade_DolguldurWallCatapult
    End

    Behavior = ReplaceSelfUpgrade ModuleTag_Replace_With_Tower
        ReplaceWith = DolguldurCastleWallTower
        TriggeredBy = Upgrade_DolguldurWallTower
        ConflictsWith = Upgrade_DolguldurWallHub Upgrade_DolguldurWallRegularGate Upgrade_DolguldurWallCatapult
    End

    Behavior = ReplaceSelfUpgrade ModuleTag_Replace_With_Catapult
        ReplaceWith = DolguldurCastleWallCatapult
        TriggeredBy = Upgrade_DolguldurWallCatapult
        ConflictsWith = Upgrade_DolguldurWallHub Upgrade_DolguldurWallRegularGate Upgrade_DolguldurWallTower
    End


    Behavior = ProductionUpdate ModuleTag_RequiredForUpgradeProduction
    End





    Geometry              = BOX
    GeometryMajorRadius   = 5.0
    GeometryMinorRadius   = 20.0
    GeometryHeight        = 40.0
    GeometryIsSmall       = No







    Shadow                = SHADOW_VOLUME
    BuildCompletion     = PLACED_BY_PLAYER
End



Object DolguldurCastleWallHub



      SelectPortrait  =  BRDolgulWallhub

    Draw = W3DScriptedModelDraw ModuleTag_Draw
        OkToChangeModelColor  = Yes
        UseStandardModelNames = Yes

        DefaultModelConditionState
            Model                = mbwlhub
        End


        ModelConditionState            = SNOW AWAITING_CONSTRUCTION
            Model                = mbwlhub_a
            Texture                = dolgolgate.tga dolgolgate_sn.tga
        End

        ModelConditionState            = AWAITING_CONSTRUCTION
            Model                = mbwlhub_a
        End

        AnimationState                = AWAITING_CONSTRUCTION
            Animation            = mbwlhub_abld
                AnimationName        = mbwlhub_askl.mbwlhub_abld
                AnimationMode        = MANUAL
                AnimationBlendTime    = 0
            End
            Flags                = START_FRAME_FIRST
        End

        ModelConditionState            = UPGRADE_NUMENOR_STONEWORK ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Model                = mbwlhub_a

        End

        ModelConditionState            = SNOW ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Model                = mbwlhub_a
            Texture                = dolgolgate.tga dolgolgate_sn.tga
        End

        ModelConditionState            = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Model                = mbwlhub_a
        End

        AnimationState                = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Animation            = mbwlhub_abld
                AnimationName        = mbwlhub_askl.mbwlhub_abld
                AnimationMode        = MANUAL
                AnimationBlendTime    = 0
            End
            Flags                = START_FRAME_FIRST
            StateName            = BeingConstructed
            ParticleSysBone            = NONE WallConstructDust FollowBone:Yes
            BeginScript
                CurDrawablePlaySound("GondorBarracksBeginConstruction")
            EndScript
        End



        ModelConditionState            = DAMAGED
            Model                = mbwlhub_d1
        End

        AnimationState                = DAMAGED
            EnteringStateFX            = FX_BuildingDamaged
        End

        ModelConditionState            = REALLYDAMAGED
            Model                = mbwlhub_d2
        End

        AnimationState                = REALLYDAMAGED
                  Animation            = RubbleAnimation
                AnimationName        = mbwlhub_d2.mbwlhub_d2
                AnimationMode        = ONCE
              End
            EnteringStateFX            = FX_BuildingReallyDamaged
        End

        ModelConditionState            = COLLAPSING
            Model                = mbwlhub_d3
        End

        AnimationState                = COLLAPSING
                  Animation            = RubbleAnimation
                AnimationName        = mbwlhub_d3.mbwlhub_d3
                AnimationMode        = ONCE
              End
              EnteringStateFX            = FX_StructureMediumCollapse
              ParticleSysBone              NONE HubDestructionDust
        End

        ModelConditionState            = DYING
            Model                = mbwlhub_d3
        End

        AnimationState                = DYING
                  Animation            = RubbleAnimation
                AnimationName        = mbwlhub_d3.mbwlhub_d3
                AnimationMode        = ONCE
              End
              EnteringStateFX            = FX_StructureMediumCollapse
              ParticleSysBone              NONE HubDestructionDust
        End

        ModelConditionState            = RUBBLE
            Model                = None

        End

        AnimationState                = RUBBLE
        End

        ModelConditionState            = POST_RUBBLE
            Model                = NONE
        End

        AnimationState                = POST_RUBBLE
        End

        ModelConditionState            = POST_COLLAPSE
            Model                = None
        End

        AnimationState                = POST_COLLAPSE
        End

        ModelConditionState = UPGRADE_NUMENOR_STONEWORK
            Model    = mbwlhub

        End

        ModelConditionState = SNOW
            Model = mbwlhub
            Texture    = dolgolgate.tga dolgolgate_sn.tga
        End

    End


    Draw = W3DScriptedModelDraw ModuleTag_DrawMorgulSorcery
        OkToChangeModelColor    = Yes

        DefaultModelConditionState
            Model    = None
        End

        ModelConditionState    = UPGRADE_NUMENOR_STONEWORK
            Model = mbwlhub_sor
        End
    End


    Draw = W3DScriptedModelDraw ModuleTag_DrawMM

        DefaultModelConditionState
            Model    = None
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_4
            Model           = bbox
            Shadow                      = SHADOW_ALPHA_DECAL_DYNAMIC
            ShadowSizeX                 = 90
            ShadowSizeY                 = 90
            ShadowTexture               = EXBlight
            ShadowOpacityStart          = 0
            ShadowOpacityFadeInTime     = 1000
            ShadowOpacityPeak           = 240
            ShadowOpacityFadeOutTime    = 1000
            ShadowOpacityEnd            = 0
            ShadowOverrideLODVisibility = Yes
        End

    End


    RadarPriority       = STRUCTURE
    DisplayName         = OBJECT:IsengardCastleWallHub
    Side                = Mordor
    EditorSorting       = STRUCTURE
    ThreatLevel = 1.0

    BuildCost           = ISENGARD_CASTLE_WALLHUB_BUILDCOST
    BuildTime           = ISENGARD_CASTLE_WALLHUB_BUILDTIME
    VisionRange         = 160.0
    ShroudClearingRange = 160

    CommandSet = DolguldurCastleWallHubCommandSet


    ArmorSet
        Conditions        = None
        Armor             = IsenWallArmor
        DamageFX          = None
    End


    #include "..\..\..\Includes\StandardBuildingEvaEvents.inc"

    VoiceSelect                        = NeutralWallHubSelect
    VoiceSelectUnderConstruction    = BuildingEvilVoiceSelectUnderConstruction

    SoundOnDamaged                    = BuildingLightDamageStone
    SoundOnReallyDamaged            = BuildingHeavyDamageStone

    UnitSpecificSounds
        UnderConstruction        = BuildingConstructionLoop

        UnderRepairFromRubble    = BuildingConstructionLoop
    End

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_PlayCollapseSound
        ModelCondition = REQUIRED:COLLAPSING     Sound:BuildingSink
    End

    CampnessValue = CAMPNESS_WALL


    RadarPriority       = STRUCTURE
    KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE WALL_HUB MADE_OF_STONE WALL_UPGRADE
    ThreatBreakdown ThreatBreakdown_ModuleTag
        AIKindOf = WALL
    End

    Behavior            = GettingBuiltBehavior ModuleTag_04
        UseSpawnTimerWithoutWorker         = Yes
           SpawnTimer    = DEFAULT_STRUCTURE_HEALDELAY

        SelfRepairFromDamageLoop  = WallConstructionLoop
        SelfRepairFromRubbleLoop  = BuildingConstructionLoop
    End

    Body                = StructureBody ModuleTag_05
        MaxHealth                = 3500
        MaxHealthDamaged         = 1500
        MaxHealthReallyDamaged   = 700
    End


    Behavior                = SlowDeathBehavior ModuleTag_SlowDeath
        DeathTypes            = ALL
        DestructionDelay    = 5000

    End

    Behavior = WallHubBehavior ModuleTag_WALL_HUB

        Options = OPTION_ONE
        MaxBuildoutDistance = DEFAULT_FORTRESS_WALL_EFFECTIVE_RADIUS
        StaggeredBuildFactor = STANDARD_WALL_STAGGERED_BUILD_FACTOR

        SegmentTemplateName = DolguldurCastleWallSegment
        SegmentTemplateName = DolguldurCastleWallSegment
        SegmentTemplateName = DolguldurCastleWallSegment
        SegmentTemplateName = DolguldurCastleWallSegment
        SegmentTemplateName = DolguldurCastleWallSegment
        SegmentTemplateName = DolguldurCastleWallSegment
        SegmentTemplateName = DolguldurCastleWallSegment
        SegmentTemplateName = DolguldurCastleWallSegment
        SegmentTemplateName = DolguldurCastleWallHub

        BuilderRadius = 20

        HubCapTemplateName = DolguldurCastleWallHub
        DefaultSegmentTemplateName = DolguldurCastleWallSegment

        CliffCapTemplateName = DolguldurWallCliffCap




    End


    Behavior = TerrainResourceBehavior ModuleTag_NewMoneyDeadSpot
        Radius            = 60
        MaxIncome        = 0
        IncomeInterval    = 999999
        HighPriority    = Yes
        Visible = No
    End





    Geometry              = CYLINDER
    GeometryMajorRadius   = 20.0
    GeometryMinorRadius   = 20.0
    GeometryHeight        = 70.0
    GeometryIsSmall       = No

    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 5.0
    GeometryMinorRadius   = 20.0
    GeometryHeight        = 40.0
    GeometryIsSmall       = No

    Shadow                = SHADOW_VOLUME
    BuildCompletion      = PLACED_BY_PLAYER

    GeometryContactPoint = X:-21        Y:22        Z:0        Repair
    GeometryContactPoint = X:23        Y:-20        Z:0        Repair
    GeometryContactPoint = X:5.576        Y:44.987    Z:0
    GeometryContactPoint = X:-38.348    Y:-42.113    Z:0
    GeometryContactPoint = X:-28.448    Y:-0.003    Z:75.14        Swoop
End



Object DolguldurCastleWallGate

 SelectPortrait = DolGuldurGateWallNew


    Draw = W3DScriptedModelDraw ModuleTag_Draw
        OkToChangeModelColor  = Yes
        UseStandardModelNames = Yes
        StaticModelLODMode    = Yes

        DefaultModelConditionState
             Model            = mbwlgte
         End


        ModelConditionState        = SNOW AWAITING_CONSTRUCTION
            Model            = mbwlgte
            Texture            = dolgolgate.tga dolgolgate_sn.tga
        End



        ModelConditionState        = DAMAGED
            Model            = mbwlgte_d1
        End

        ModelConditionState        = REALLYDAMAGED
            Model            = mbwlgte_d2
        End

        ModelConditionState        = COLLAPSING DOOR_1_OPENING
            Model            = mbwlgte_d3o
        End

        AnimationState            = COLLAPSING DOOR_1_OPENING
                  Animation        = RubbleAnimation
                AnimationName    = mbwlgte_d3o.mbwlgte_d3o
                AnimationMode    = ONCE
              End
        End

        ModelConditionState        = COLLAPSING
            Model            = mbwlgte_d3
        End

        AnimationState            = COLLAPSING
                  Animation        = RubbleAnimation
                AnimationName    = mbwlgte_d3.mbwlgte_d3
                AnimationMode    = ONCE
              End
        End

        ModelConditionState        = DYING
            Model            = mbwlgte_d3
        End

        AnimationState            = DYING
                  Animation        = RubbleAnimation
                AnimationName    = mbwlgte_d3.mbwlgte_d3
                AnimationMode    = ONCE
              End
              EnteringStateFX        = FX_StructureMediumCollapse
              ParticleSysBone        NONE HubDestructionDust

        End


        ModelConditionState        = RUBBLE
            Model            = None
        End

        ModelConditionState        = POST_RUBBLE
            Model            = NONE
            ParticleSysBone        NONE SmokeBuildingMediumRubble
        End

        AnimationState            = POST_RUBBLE
        End

        ModelConditionState        = POST_COLLAPSE
            Model            = None
            ParticleSysBone        NONE SmokeBuildingMediumRubble
        End

        AnimationState            = POST_COLLAPSE
        End


        AnimationState            = DOOR_1_OPENING
            Flags             = START_FRAME_LAST
            StateName         = Door_Open
            Animation        = Death
                AnimationName    = mbwlgte_skl.mbwlgte_opn
                AnimationMode    = ONCE
                AnimationBlendTime = 160
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Door_Close" then CurDrawableSetTransitionAnimState("TRANS_Closed_To_Open") end
            EndScript
        End

        TransitionState            = TRANS_Closed_To_Open
            Animation        = Open
                AnimationName    = mbwlgte_skl.mbwlgte_op
                AnimationMode    = ONCE
                AnimationBlendTime = 160
            End
        End

        AnimationState            = DOOR_1_CLOSING
            Flags             = START_FRAME_LAST
            StateName         = Door_Close
            Animation        = Death
                AnimationName    = mbwlgte_skl.mbwlgte_cls
                AnimationMode    = ONCE
                AnimationBlendTime = 160
            End
            BeginScript
                Prev = CurDrawablePrevAnimationState()
                if Prev == "Door_Open" then CurDrawableSetTransitionAnimState("TRANS_Open_To_Closed") end
            EndScript
        End

        TransitionState            = TRANS_Open_To_Closed
            Animation        = Open
                AnimationName    = mbwlgte_skl.mbwlgte_cl
                AnimationMode    = ONCE
                AnimationBlendTime = 160
            End
        End

        ModelConditionState        = UPGRADE_NUMENOR_STONEWORK
            Model            = mbwlgte

        End

        ModelConditionState        = SNOW
            Model            = mbwlgte
            Texture            = dolgolgate.tga dolgolgate_sn.tga
        End

     End


    Draw = W3DScriptedModelDraw ModuleTag_DrawMorgulSorcery
        OkToChangeModelColor    = Yes

        DefaultModelConditionState
            Model    = None
        End

        ModelConditionState    = UPGRADE_NUMENOR_STONEWORK
            Model = mbwlgte_sor
        End
    End


    Draw = W3DScriptedModelDraw ModuleTag_DrawMM

        DefaultModelConditionState
            Model    = None
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_4
            Model           = bbox
            Shadow                      = SHADOW_ALPHA_DECAL_DYNAMIC
            ShadowSizeX                 = 160
            ShadowSizeY                 = 160
            ShadowTexture               = EXBlight
            ShadowOpacityStart          = 0
            ShadowOpacityFadeInTime     = 1000
            ShadowOpacityPeak           = 240
            ShadowOpacityFadeOutTime    = 1000
            ShadowOpacityEnd            = 0
            ShadowOverrideLODVisibility = Yes
        End

    End

    PlacementViewAngle  = 180



   DisplayName         = OBJECT:DolGoldurMainGate
   Side                = Mordor
   EditorSorting       = STRUCTURE
   ThreatLevel = 1.0

   BuildCost           = ISENGARD_CASTLE_WALLGATE_BUILDCOST
   BuildTime           = ISENGARD_CASTLE_WALLGATE_BUILDTIME
   VisionRange         = 160.0
   ShroudClearingRange = 160

   CommandSet            = CastleGateCommandSet

    ArmorSet
        Conditions        = None
        Armor             = IsenWallArmor
    End



    #include "..\..\..\Includes\StandardBuildingEvaEvents.inc"

    VoiceSelect                        = GateSelect
    VoiceSelectUnderConstruction    = BuildingEvilVoiceSelectUnderConstruction

     SoundOnDamaged                    = BuildingLightDamageStone
     SoundOnReallyDamaged            = BuildingHeavyDamageStone

    UnitSpecificSounds
        UnderConstruction        = BuildingConstructionLoop

        UnderRepairFromRubble    = BuildingConstructionLoop
    End





    CampnessValue = CAMPNESS_WALL


   RadarPriority       = STRUCTURE
   KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE WALL_UPGRADE MADE_OF_STONE BLOCKING_GATE WALL_GATE

    Behavior            = GettingBuiltBehavior ModuleTag_04
        SelfBuildingLoop            = WallConstructionLoop
        SelfRepairFromDamageLoop    = NoSound
        SelfRepairFromRubbleLoop    = WallConstructionLoop
        SpawnTimer                    = -1.0
        RebuildTimeSeconds            = ISENGARD_CASTLE_WALLGATE_BUILDTIME
    End

    Body                = StructureBody ModuleTag_05
        MaxHealth                = 2500
        MaxHealthDamaged        = 1000
        MaxHealthReallyDamaged    = 500
    End

    Behavior            = SlowDeathBehavior ModuleTag_SlowDeath
        DeathTypes            = ALL
        DestructionDelay = 5000
    End

    Behavior = KeepObjectDie ModuleTag_IWantRubble
    End

    Behavior = GateOpenAndCloseBehavior ModuleTag_GATE
        ResetTimeInMilliseconds       = 3000
        OpenByDefault                 = No
        PercentOpenForPathing         = 50
        SoundOpeningGateLoop          = GateOpenStart
        SoundClosingGateLoop          = GateCloseStart
        SoundFinishedOpeningGate      = GateOpenEnd
        SoundFinishedClosingGate      = GateCloseEnd
        TimeBeforePlayingOpenSound    = 9500
        TimeBeforePlayingClosedSound  = 9500
    End

    Behavior = FakePathfindPortalBehaviour ModuleTag_FAKEPATHFIND
        AllowEnemies            = No
        AllowNonSkirmishAIUnits    = No
    End

    Behavior = AIGateUpdate ModuleTage_AIGateUpdate
        TriggerWidthX             = 200.0
        TriggerWidthY             = 100.0
    End




    GeometryIsSmall                = No


    Geometry              = BOX
    GeometryMajorRadius   = 10.0
    GeometryMinorRadius   = 10.0
    GeometryHeight        = 75
    GeometryOffset        = X:0 Y:50 Z:0


    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 10.0
    GeometryMinorRadius   = 10.0
    GeometryHeight        = 75
    GeometryOffset        = X:0 Y:-50 Z:0


    AdditionalGeometry    = BOX
    GeometryName          = "Closed"
    GeometryMajorRadius   = 9.0
    GeometryMinorRadius   = 50.0
    GeometryHeight        = 50


    AdditionalGeometry    = BOX
    GeometryName          = "OpenLeft"
    GeometryMajorRadius   = 9.0
    GeometryMinorRadius   = 10.0
    GeometryHeight        = 40
    GeometryOffset        = X:0 Y:-30 Z:0


    AdditionalGeometry    = BOX
    GeometryName          = "OpenRight"
    GeometryMajorRadius   = 9.0
    GeometryMinorRadius   = 10.0
    GeometryHeight        = 40
    GeometryOffset        = X:0 Y:30 Z:0


    GeometryContactPoint = X:0    Y:50 Z:75
    GeometryContactPoint = X:0    Y:50 Z:10
    GeometryContactPoint = X:0    Y:-50 Z:10
    GeometryContactPoint = X:0    Y:-50 Z:75


    Shadow                = SHADOW_VOLUME
    BuildCompletion     = PLACED_BY_PLAYER
End





Object DolguldurWallCliffCap


    SelectPortrait      =  BPIWall


    Draw = W3DScriptedModelDraw ModuleTag_Draw
        OkToChangeModelColor  = Yes
        UseStandardModelNames = Yes

        DefaultModelConditionState
            Model                = mbwalln
        End

        ModelConditionState = SNOW BUILD_PLACEMENT_CURSOR
            Model                = mbwalln
            Texture                = dolgolgate.tga dolgolgate_sn.tga
        End

        ModelConditionState = BUILD_PLACEMENT_CURSOR
            Model                = mbwalln
        End

        IdleAnimationState
            BeginScript
                CurDrawableShowSubObject("ModuleTag_DrawFloor")
            EndScript
        End


        ModelConditionState            = SNOW AWAITING_CONSTRUCTION
            Model                = mbwalln_a
            Texture                = dolgolgate.tga dolgolgate_sn.tga
        End

        ModelConditionState            = AWAITING_CONSTRUCTION
            Model                = mbwalln_a
        End

        AnimationState                = AWAITING_CONSTRUCTION
            Animation            = mbwalln_abld
                AnimationName        = mbwalln_askl.mbwalln_abld
                AnimationMode        = MANUAL
                AnimationBlendTime    = 0
            End
            Flags                = START_FRAME_FIRST
            BeginScript
                CurDrawableHideSubObject("ModuleTag_DrawFloor")
            EndScript
        End

        ModelConditionState            = UPGRADE_NUMENOR_STONEWORK ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Model                = mbwalln_a

        End

        ModelConditionState = SNOW ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Model                = mbwalln_a
            Texture                = dolgolgate.tga dolgolgate_sn.tga
        End

        ModelConditionState            = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Model                = mbwalln_a
            ParticleSysBone            = NONE WallConstructDust FollowBone:Yes
        End

        AnimationState                = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Animation            = mbwalln_abld
                AnimationName        = mbwalln_askl.mbwalln_abld
                AnimationMode        = MANUAL
                AnimationBlendTime    = 0
            End
            Flags                = START_FRAME_FIRST
            StateName            = BeingConstructed
            BeginScript
                CurDrawablePlaySound("GondorBarracksBeginConstruction")
            EndScript
        End


        ModelConditionState            = DAMAGED
            Model                = mbwalln_d1
        End

        AnimationState = DAMAGED
            Animation            = DamagedAnimation
                AnimationName        = mbwalln_d1.mbwalln_d1
                AnimationMode        = ONCE
               End
            EnteringStateFX            = FX_WallDamaged
        End

        ModelConditionState            = REALLYDAMAGED
            Model                = mbwalln_d2
        End

        AnimationState                = REALLYDAMAGED
                  Animation            = RubbleAnimation
                AnimationName        = mbwalln_d2.mbwalln_d2
                AnimationMode        = ONCE
            End
            EnteringStateFX            = FX_WallDamaged
        End

        ModelConditionState            = COLLAPSING
            Model                = mbwalln_d2
        End

        AnimationState                = COLLAPSING
                  Animation            = RubbleAnimation
                AnimationName        = mbwalln_d2.mbwalln_d2
                AnimationMode        = ONCE
              End
              ParticleSysBone              NONE WallDestructionDust
            EnteringStateFX            = FX_StructureMediumCollapse
        End

        ModelConditionState            = RUBBLE
            Model                = None
        End

        AnimationState                = RUBBLE
            BeginScript
                CurDrawableHideSubObject("ModuleTag_DrawFloor")
            EndScript
        End

        ModelConditionState            = POST_RUBBLE
            Model                = None
        End

        AnimationState                = POST_RUBBLE
        End

        ModelConditionState            = POST_COLLAPSE
            Model                = None
        End

        AnimationState                = POST_COLLAPSE
        End

        ModelConditionState            = UPGRADE_NUMENOR_STONEWORK
            Model                = mbwalln

        End

        ModelConditionState            = SNOW
            Model                = mbwalln
            Texture              = dolgolgate.tga dolgolgate_sn.tga
        End
    End


    Draw = W3DScriptedModelDraw ModuleTag_DrawMorgulSorcery
        OkToChangeModelColor    = Yes

        DefaultModelConditionState
            Model    = None
        End

        ModelConditionState    = UPGRADE_NUMENOR_STONEWORK
            Model = mbwalln_sor
        End
    End


    Draw = W3DScriptedModelDraw ModuleTag_DrawMM

        DefaultModelConditionState
            Model    = None
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_4
            Model           = bbox
            Shadow                      = SHADOW_ALPHA_DECAL_DYNAMIC
            ShadowSizeX                 = 80
            ShadowSizeY                 = 80
            ShadowTexture               = EXBlight
            ShadowOpacityStart          = 0
            ShadowOpacityFadeInTime     = 1000
            ShadowOpacityPeak           = 240
            ShadowOpacityFadeOutTime    = 1000
            ShadowOpacityEnd            = 0
            ShadowOverrideLODVisibility = Yes
        End

    End

    Draw = W3DScriptedModelDraw ModuleTag_Draw_Rubble
        OkToChangeModelColor            = Yes
        UseStandardModelNames            = Yes
        DefaultModelConditionState
            Model                = None
        End

        ModelConditionState            = COLLAPSING
            Model                = GBWall_Rubble
        End

        ModelConditionState            = RUBBLE

            Model                = GBWall_Rubble
        End

        ModelConditionState            = POST_RUBBLE
            Model                = GBWall_Rubble
        End

        ModelConditionState            = POST_COLLAPSE
            Model                = None
        End
    End



    DisplayName         = OBJECT:ElvenCastleWallSegment
    Side                = Mordor
    EditorSorting       = STRUCTURE
    ThreatLevel            = 1.0

    CommandSet            = ElvenWallCliffCapCommandSet

    ArmorSet
        Conditions        = None
        Armor             = IsenWallArmor
    End

    BuildCost           = ISENGARD_CASTLE_WALLSEGMENT_BUILDCOST
    BuildTime           = ISENGARD_CASTLE_WALLSEGMENT_BUILDTIME
    VisionRange         = MEN_WALLSEGMENT_SMALL_VISION_RANGE
    ShroudClearingRange = MEN_WALLSEGMENT_SMALL_SHROUD_CLEAR



    #include "..\..\..\Includes\StandardBuildingEvaEvents.inc"

    VoiceSelectUnderConstruction    = BuildingEvilVoiceSelectUnderConstruction

    SoundOnDamaged                    = BuildingLightDamageStone
    SoundOnReallyDamaged            = BuildingHeavyDamageStone

    UnitSpecificSounds
        UnderConstruction        = WallConstructionLoop

        UnderRepairFromRubble    = WallConstructionLoop
    End

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_PlayCollapseSound
        ModelCondition = REQUIRED:RUBBLE Sound:BuildingSink
    End

    CampnessValue = CAMPNESS_WALL


    RadarPriority       = STRUCTURE
    KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE DEFENSIVE_WALL MADE_OF_STONE CAN_CAST_REFLECTIONS
    ThreatBreakdown ThreatBreakdown_ModuleTag
        AIKindOf = WALL
    End


    Behavior            = GettingBuiltBehavior ModuleTag_04
        SelfBuildingLoop            = WallConstructionLoop
        SelfRepairFromDamageLoop    = NoSound
        SelfRepairFromRubbleLoop    = WallConstructionLoop
        UseSpawnTimerWithoutWorker  = Yes
        SpawnTimer                  = DEFAULT_STRUCTURE_HEALDELAY
        RebuildTimeSeconds          = ISENGARD_CASTLE_WALLSEGMENT_BUILDTIME
    End

    Body                = StructureBody ModuleTag_05
        MaxHealth                = 2000
        MaxHealthDamaged         = 1000
        MaxHealthReallyDamaged   = 500
    End






    Behavior = KeepObjectDie ModuleTag_IWantRubble
        DeathTypes            = ALL -SUICIDED
    End
    Behavior            = SlowDeathBehavior ModuleTag_SlowDeath
        DeathTypes            = NONE +SUICIDED
        DestructionDelay = 5000
    End





    Geometry                  = BOX
    GeometryMajorRadius       = 10.0
    GeometryMinorRadius       = 40.0
    GeometryHeight            = 80
    GeometryIsSmall            = No
    GeometryOffset            = X:0 Y:-20 Z:-40

  Shadow                = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End




Object DolguldurCastleWallTower


      SelectPortrait = BPMBattleTower

    Draw = W3DScriptedModelDraw ModuleTag_Draw
        OkToChangeModelColor  = Yes
        UseStandardModelNames = Yes

        ExtraPublicBone                = Arrow_01
        ExtraPublicBone                = Arrow_02
        ExtraPublicBone                = Arrow_03
        ExtraPublicBone                = Arrow_04
        ExtraPublicBone                = Arrow_05
        ExtraPublicBone                = Arrow_06
        ExtraPublicBone                = Arrow_07
        ExtraPublicBone                = Arrow_08


        DefaultModelConditionState
            Model                = mbwalltwrn
            WeaponLaunchBone        = PRIMARY ARROW_
        End


        ModelConditionState            = DAMAGED
            Model                = mbwalltwrn_D1
        End

        AnimationState                = DAMAGED
            Animation            = DamagedAnimation
                AnimationName        = mbwalltwrn_D1.mbwalltwrn_D1
                AnimationMode        = ONCE
             End
        End

        ModelConditionState            = REALLYDAMAGED
            Model                = mbwalltwrn_D2
        End

        AnimationState                = REALLYDAMAGED
            Animation            = DamagedAnimation
                AnimationName        = mbwalltwrn_D2.mbwalltwrn_D2
                AnimationMode        = ONCE
             End
        End

        ModelConditionState            = COLLAPSING
            Model                = mbwalltwrn_D3
        End

        AnimationState                = COLLAPSING
            Animation            = RubbleAnimation
                AnimationName        = mbwalltwrn_D3.mbwalltwrn_D3
                AnimationMode        = ONCE
            End
            EnteringStateFX            = FX_StructureMediumCollapse
        End

        ModelConditionState            = DYING
            Model                = mbwalltwrn_D3
        End

        AnimationState = DYING
            Animation            = RubbleAnimation
                AnimationName        = mbwalltwrn_D3.mbwalltwrn_D3
                AnimationMode        = ONCE
            End
            EnteringStateFX            = FX_StructureMediumCollapse
        End

        ModelConditionState            = RUBBLE
            Model                = None
            ParticleSysBone            SmokeLarge01 SmokeBuildingLarge
        End

        AnimationState                = RUBBLE
        End

        ModelConditionState            = POST_RUBBLE
            Model                = None
            ParticleSysBone            NONE SmokeBuildingMediumRubble
        End
        ModelConditionState            = POST_COLLAPSE
            Model                = None
            ParticleSysBone            NONE SmokeBuildingMediumRubble
        End

        ModelConditionState            = UPGRADE_NUMENOR_STONEWORK
            Model                = mbwalltwrn

        End

        ModelConditionState            = SNOW
            Model                = mbwalltwrn
            Texture                = dolgolgate.tga dolgolgate_sn.tga
        End

    End


    Draw = W3DScriptedModelDraw ModuleTag_DrawMorgulSorcery
        OkToChangeModelColor    = Yes

        DefaultModelConditionState
            Model    = None
        End

        ModelConditionState    = UPGRADE_NUMENOR_STONEWORK
            Model = mbwalln_sor
        End
    End


    Draw = W3DScriptedModelDraw ModuleTag_DrawMM

        DefaultModelConditionState
            Model    = None
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_4
            Model           = bbox
            Shadow                      = SHADOW_ALPHA_DECAL_DYNAMIC
            ShadowSizeX                 = 80
            ShadowSizeY                 = 80
            ShadowTexture               = EXBlight
            ShadowOpacityStart          = 0
            ShadowOpacityFadeInTime     = 1000
            ShadowOpacityPeak           = 240
            ShadowOpacityFadeOutTime    = 1000
            ShadowOpacityEnd            = 0
            ShadowOverrideLODVisibility = Yes
        End

    End


    DisplayName         = OBJECT:MordorBattleTower
    Side                = Mordor
    EditorSorting       = STRUCTURE
    ThreatLevel            = 1.0
    ThreatBreakdown ModuleTag_DetailedThreat
        AIKindOf = WALL
    End

    BuildCost           = DWARVEN_WALLTOWER_SMALL_BUILDCOST
    BuildTime           = DWARVEN_WALLTOWER_SMALL_BUILDTIME
    VisionRange         = DWARVEN_WALLTOWER_SMALL_VISION_RANGE
    ShroudClearingRange = DWARVEN_WALLTOWER_SMALL_SHROUD_CLEAR

    CommandSet    = SellableCommandSet



    #include "..\..\..\Includes\StandardBuildingEvaEvents.inc"

    VoiceSelect                        = MenWallTowerSelect
    VoiceSelectUnderConstruction    = BuildingEvilVoiceSelectUnderConstruction

    SoundOnDamaged                    = BuildingLightDamageStone
    SoundOnReallyDamaged            = BuildingHeavyDamageStone

    UnitSpecificSounds
        UnderConstruction        = WallConstructionLoop

        UnderRepairFromRubble    = WallConstructionLoop
    End

    CampnessValue = CAMPNESS_WALL


    RadarPriority       = STRUCTURE
    KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE MADE_OF_STONE CAN_ATTACK IGNORE_FOR_VICTORY WALL_UPGRADE

    Behavior                        = GettingBuiltBehavior ModuleTag_04
        UseSpawnTimerWithoutWorker         = Yes
        SpawnTimer    = DEFAULT_STRUCTURE_HEALDELAY
        RebuildTimeSeconds            = 30
        SelfBuildingLoop            = WallConstructionLoop
        SelfRepairFromDamageLoop     = WallConstructionLoop
        SelfRepairFromRubbleLoop    = WallConstructionLoop
    End

    ArmorSet
        Conditions        = None
        Armor             = IsenWallArmor
    End

    WeaponSet
        Conditions            = None
        Weapon                = PRIMARY EvilStructureBow
        AutoChooseSources    = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    Behavior = AIUpdateInterface ModuleTag_SoWeCanUseWeapon
         AutoAcquireEnemiesWhenIdle    = Yes
         MoodAttackCheckRate            = 250
     End

    Body = StructureBody ModuleTag_05
        MaxHealth = DWARVEN_WALLTOWER_SMALL_HEALTH
    End

    Behavior            = SlowDeathBehavior ModuleTag_SlowDeath
        DeathTypes            = ALL
        DestructionDelay    = 5000
    End




    GeometryIsSmall       = No

    Geometry              = BOX
    GeometryMajorRadius   = 15.0
    GeometryMinorRadius   = 15.0
    GeometryHeight        = 40.0

    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 10.0
    GeometryMinorRadius   = 10.0
    GeometryHeight        = 50.0
    GeometryOffset          = X:0 Y:0 Z:40

    AdditionalGeometry    = BOX
    GeometryMajorRadius   = 8.0
    GeometryMinorRadius   = 20.0
    GeometryHeight        = 40.0
    GeometryIsSmall       = No
    Shadow                = SHADOW_VOLUME
    BuildCompletion     = PLACED_BY_PLAYER
End






Object DolguldurCastleWallCatapult



  SelectPortrait  =  UPMordor_CatapultNew

    Draw = W3DScriptedModelDraw ModuleTag_Draw
        OkToChangeModelColor  = Yes
        UseStandardModelNames = Yes

        DefaultModelConditionState
            Model                = mbwallcatn
        End

        WallBoundsMesh = P1

        IdleAnimationState
        End


        ModelConditionState            = DAMAGED
            Model                = mbwallcatn_d1
        End

        AnimationState                = DAMAGED
            EnteringStateFX            = FX_BuildingDamaged
        End

        ModelConditionState            = REALLYDAMAGED
            Model                = mbwallcatn_d2
        End

        AnimationState                = REALLYDAMAGED
            EnteringStateFX            = FX_BuildingReallyDamaged
            Animation            = RubbleAnimation
                AnimationName        = mbwallcatn_d2.mbwallcatn_d2
                AnimationMode        = ONCE
              End
        End

        ModelConditionState            = RUBBLE
            Model                = mbwallcatn_d3
            ParticleSysBone            SmokeLarge01 SmokeBuildingLarge
        End

        AnimationState                = RUBBLE
            EnteringStateFX            = FX_StructureMediumCollapse
            Animation            = RubbleAnimation
                AnimationName        = mbwallcatn_d3.mbwallcatn_d3
                AnimationMode        = ONCE
              End
        End

        ModelConditionState            = POST_RUBBLE
            Model                = None
        End

        ModelConditionState            = POST_COLLAPSE
            Model                = None
        End

        ModelConditionState            = UPGRADE_NUMENOR_STONEWORK
            Model                = mbwallcatn

        End

        ModelConditionState            = SNOW
            Model                = mbwallcatn
            Texture                = dolgolgate.tga dolgolgate_sn.tga
        End

    End
    Draw = W3DScriptedModelDraw ModuleTag_DrawMorgulSorcery
        OkToChangeModelColor    = Yes

        DefaultModelConditionState
            Model    = None
        End

        ModelConditionState    = UPGRADE_NUMENOR_STONEWORK
            Model = mbwlhub_sor
        End
    End


    Draw = W3DScriptedModelDraw ModuleTag_DrawMM

        DefaultModelConditionState
            Model    = None
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_4
            Model           = bbox
            Shadow                      = SHADOW_ALPHA_DECAL_DYNAMIC
            ShadowSizeX                 = 90
            ShadowSizeY                 = 90
            ShadowTexture               = EXBlight
            ShadowOpacityStart          = 0
            ShadowOpacityFadeInTime     = 1000
            ShadowOpacityPeak           = 240
            ShadowOpacityFadeOutTime    = 1000
            ShadowOpacityEnd            = 0
            ShadowOverrideLODVisibility = Yes
        End

    End



    DisplayName         = OBJECT:DwarvenCastleWallCatapultSmall
    Side                = Mordor
    EditorSorting       = STRUCTURE
    ThreatLevel = 1.0

    BuildCost           = 1200
    BuildTime           = DWARVEN_WALLCATAPULT_SMALL_BUILDTIME
    VisionRange         = DWARVEN_WALLCATAPULT_SMALL_VISION_RANGE
    ShroudClearingRange = DWARVEN_WALLCATAPULT_SMALL_SHROUD_CLEAR

    ArmorSet
        Conditions        = None
        Armor             = IsenWallArmor
    End



    #include "..\..\..\Includes\StandardBuildingEvaEvents.inc"

    VoiceSelect                        = DwarvenCatapultExpansionSelect
    VoiceSelectUnderConstruction    = BuildingEvilVoiceSelectUnderConstruction

    SoundOnDamaged                    = BuildingLightDamageStone
    SoundOnReallyDamaged            = BuildingHeavyDamageStone

    UnitSpecificSounds
        UnderConstruction        = WallConstructionLoop

        UnderRepairFromRubble    = WallConstructionLoop
    End

    CampnessValue = CAMPNESS_WALL


    RadarPriority       = STRUCTURE
    KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE MADE_OF_STONE IGNORE_FOR_VICTORY WALL_UPGRADE

    Behavior                        = GettingBuiltBehavior ModuleTag_04
        UseSpawnTimerWithoutWorker         = Yes
        SpawnTimer    = DEFAULT_STRUCTURE_HEALDELAY
        RebuildTimeSeconds            = 30
        SelfBuildingLoop            = WallConstructionLoop
        SelfRepairFromDamageLoop     = NoSound
        SelfRepairFromRubbleLoop    = WallConstructionLoop
    End

    Body                = StructureBody ModuleTag_05
        MaxHealth                = 3000
        MaxHealthDamaged        = 1250
        MaxHealthReallyDamaged    = 500
    End




    Behavior = ProductionUpdate ProductionUpdateModuleTag
    End
    Behavior = GrantUpgradeCreate ModuleTag_ActLikeAnOldUpgrade
        UpgradeToGrant = Upgrade_TrebuchetTurret
        GiveOnBuildComplete = Yes
    End
    Behavior = CommandSetUpgrade ModueTag_TrebCommandSet
        TriggeredBy            = Upgrade_TrebuchetTurret
        ConflictsWith        = Upgrade_HasWallTrebuchet
        CommandSet            = DolguldurUpgradeCommandSetBuyNewCatapult
    End
    Behavior = CommandSetUpgrade ModueTag_TrebCommandSet3
        TriggeredBy            = Upgrade_HasWallTrebuchet Upgrade_TrebuchetTurret
        CommandSet            = SellableCommandSet
        RequiresAllTriggers    = Yes
    End
    Behavior = ObjectCreationUpgrade MakeTheFreeTreb
        TriggeredBy          = Upgrade_TrebuchetTurret
        Delay                = 0.0

        RemoveUpgrade        = Upgrade_WallTrebuchetButtonEnable
        GrantUpgrade         = Upgrade_HasWallTrebuchet
        DestroyWhenSold      = Yes
        DeathAnimAndDuration = AnimState:DEATH_2 AnimTime:999999
        Offset               = X:0.0 Y:0.0 Z:60.0
    End
    Behavior = ObjectCreationUpgrade MakeTheFreeTreb2
        TriggeredBy          = Upgrade_HasWallTrebuchet
        ConflictsWith        = Upgrade_OpenGarrison Upgrade_PosternGate
        Delay                = 0.0

        RemoveUpgrade        = Upgrade_WallTrebuchetButtonEnable
        ThingToSpawn         = MordorFortressCatapult
        Offset               = X:0.0 Y:0.0 Z:60.0
        FadeInTime           = 600
    End
    Behavior = SlaveWatcherBehavior WatchTheTreb
        RemoveUpgrade        = Upgrade_HasWallTrebuchet
        GrantUpgrade         = Upgrade_WallTrebuchetButtonEnable
        ShareUpgrades        = Yes
    End

    Behavior                 = SlowDeathBehavior ModuleTag_SlowDeath
        DeathTypes           = ALL
        DestructionDelay     = 5000
    End

    Behavior = StructureCollapseUpdate ModuleTag_StructureCollapseUpdate
        MinCollapseDelay            = 000
        MaxCollapseDelay            = 000
        CollapseDamping             = .5
        MaxShudder                  = 0.6
        MinBurstDelay               = 250
        MaxBurstDelay               = 800
        BigBurstFrequency           = 4
        FXList                      = INITIAL   FX_StructureMediumCollapse
        FXList                      = ALMOST_FINAL  FX_StructureAlmostCollapse
        DestroyObjectWhenDone       = Yes
        CollapseHeight              = 89
    End

    GeometryIsSmall                    = No

    AdditionalGeometry    = CYLINDER
    GeometryMajorRadius    = 25.0
    GeometryHeight        = 60.0

    Shadow            = SHADOW_VOLUME
    BuildCompletion        = PLACED_BY_PLAYER
End

