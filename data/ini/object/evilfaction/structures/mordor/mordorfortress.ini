Object MordorFortressCenterGeneric

    SelectPortrait = BPMFortress

    Draw = W3DScriptedModelDraw ModuleTag_01

        DefaultModelConditionState
              Model = None
        End

        ModelConditionState = WORLD_BUILDER
            Model = NBasePin
        End
    End

    Side             = Mordor
    EditorSorting    = STRUCTURE
    KindOf           = IMMOBILE BASE_FOUNDATION CASTLE_CENTER

    Behavior = CastleBehavior ModuleTag_castle
        FilterValidOwnedEntries = ANY +STRUCTURE +WALK_ON_TOP_OF_WALL +BASE_FOUNDATION +TACTICAL_MARKER
    End
End


Object MordorFortressExpansionPadCorner

    SelectPortrait = BPMFortress_BuildPlot

    Draw = W3DFloorDraw DrawFloorBase
        ModelName = MBFoundation
    End

    Draw = W3DScriptedModelDraw ModuleTag_DrawMain
        DefaultModelConditionState
            Model = WBFoundationP
        End

        ModelConditionState = CONSTRUCTION_COMPLETE
            Model = None
        End
    End

    DisplayName         = OBJECT:MordorBuildingFoundation
    Side                = Mordor
    EditorSorting       = STRUCTURE
    ThreatLevel         = 1.0
    BuildCost           = 1
    BuildTime           = 5.0
    VisionRange         = 0.0
    ShroudClearingRange = 0

    CommandSet          = MordorFortressExpansionPadCornerCommandSet

    VoiceSelect            = Gui_PlotSelect2

    KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION UNATTACKABLE MP_COUNT_FOR_VICTORY NO_COLLIDE DO_NOT_CLASSIFY EXPANSION_PAD

    Behavior        = FoundationAIUpdate ModuleTag_foundationAI
        BuildVariation    = 2
    End

    Behavior = CommandSetUpgrade ModuleTag_GarnisonCommandSet
        TriggeredBy       = Upgrade_GarnisonCirithUngols
        CommandSet        = MordorFortressExpansionPadCornerCommandSet_CirithUngol
    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
    End

    Body                = ImmortalBody ModuleTag_05
        MaxHealth         = DEFAULT_FORTRESS_HEALTH
    End

    Geometry                = BOX
    GeometryMajorRadius        = 5.0
    GeometryMinorRadius        = 5.0
    GeometryHeight            = 0.8
    GeometryIsSmall            = No
    Shadow                    = SHADOW_VOLUME
    BuildCompletion            = PLACED_BY_PLAYER
End


Object MordorFortressCitadel

Draw = W3DFloorDraw ModuleTag_DrawFortressFloor
    ModelName				= FL_MORDOR
    StartHidden 				= No
    HideIfModelConditions		= AWAITING_CONSTRUCTION
    HideIfModelConditions		= PARTIALLY_CONSTRUCTED
    ForceToBack 				= Yes
    FloorFadeRateOnObjectDeath  = -0.01
End

    SelectPortrait = BPMFortress

    Draw = W3DScriptedModelDraw ModuleTag_Draw
        ExtraPublicBone         = ARROW_01
        ExtraPublicBone         = ARROW_02
        ExtraPublicBone         = ARROW_03
        ExtraPublicBone         = ARROW_04
        ExtraPublicBone         = ARROW_05
        ExtraPublicBone         = ARROW_06
        ExtraPublicBone         = ARROW_07
        ExtraPublicBone         = ARROW_08
        ExtraPublicBone         = ARROW_09
        ExtraPublicBone         = ARROW_10
        ExtraPublicBone         = ARROW_11
        ExtraPublicBone         = ARROW_12
        ExtraPublicBone         = ARROW_13
        ExtraPublicBone         = ARROW_14
        ExtraPublicBone         = ARROW_15
        ExtraPublicBone         = ARROW_16
        ExtraPublicBone         = ARROW_17
        ExtraPublicBone         = ARROW_18
        ExtraPublicBone         = ARROW_19
        ExtraPublicBone         = ARROW_20
        ExtraPublicBone         = ARROW_21
        ExtraPublicBone         = ARROW_22
        ExtraPublicBone         = ARROW_23
        ExtraPublicBone         = ARROW_24
        ExtraPublicBone         = ARROW_25
        ExtraPublicBone         = ARROW_26
        ExtraPublicBone         = ARROW_27
        ExtraPublicBone         = ARROW_28
        ExtraPublicBone         = ARROW_29
        ExtraPublicBone         = ARROW_30
        ExtraPublicBone         = ARROW_31
        ExtraPublicBone         = ARROW_32

        OkToChangeModelColor    = Yes
        UseStandardModelNames    = Yes
        StaticModelLODMode        = Yes

        DefaultModelConditionState
            Model                = MBFortress
            WeaponLaunchBone    = PRIMARY ARROW_
            WeaponLaunchBone    = SECONDARY EYEBONE02
        End

        AnimationState = BUILD_PLACEMENT_CURSOR
            BeginScript
                   CurDrawableHideSubObject("MBFDPYRES")
                   CurDrawableHideSubObject("MBFDPFG")
                   CurDrawableHideSubObject("MBFDPF")
            EndScript
        End


        AnimationState = PHANTOM_STRUCTURE
            BeginScript
                   CurDrawableHideSubObject("MBFDPYRES")
                   CurDrawableHideSubObject("MBFDPFG")
                   CurDrawableHideSubObject("MBFDPF")
            EndScript
        End

        ModelConditionState = DAMAGED
            Model        = MBFortress
            Texture        = MBFortress.tga MBFortress_D.tga
        End

        AnimationState    = DAMAGED
            EnteringStateFX    = FX_FortressDamaged
        End

        ModelConditionState = REALLYDAMAGED
            Model        = MBFortress_D2
        End

        AnimationState    = REALLYDAMAGED
            Animation    = Fortress_ReallyDamaged
                AnimationName        = MBFortress_D2S.MBFortress_D2A
                AnimationMode        = ONCE
            End
            EnteringStateFX    = FX_FortressReallyDamaged
        End

        ModelConditionState = RUBBLE
            Model        = MBFortress_D3
        End

        AnimationState    = RUBBLE
            Animation    = Fortress_Rubble
                AnimationName        = MBFortress_D3S.MBFortress_D3A
                AnimationMode        = ONCE
            End
            EnteringStateFX    = FX_FortressCollapse
        End


        ModelConditionState = SNOW
            Model = MBFortress
            Texture    = MBFortress.tga MBFortress_snow.tga
        End
    End

    Draw = W3DScriptedModelDraw ModuleTag_DrawFireArrows
        OkToChangeModelColor    = Yes
        StaticModelLODMode        = Yes

        DefaultModelConditionState
            Model    = None
        End

        IdleAnimationState
            StateName = NoTower
        End


        ModelConditionState      = FORTRESS_IMPROVEMENT_1 DAMAGED USER_1
            Model        = MBFFArrows_A
            Texture        = MBFortress.tga MBFortress_D.tga
        End

        ModelConditionState      = FORTRESS_IMPROVEMENT_1 REALLYDAMAGED USER_1
            Model        = MBFFArrows_A
            Texture        = MBFortress.tga MBFortress_D.tga
        End


        ModelConditionState = FORTRESS_IMPROVEMENT_1 USER_1
            Model    = MBFFArrows_A
        End

        AnimationState = FORTRESS_IMPROVEMENT_1 USER_1
            Animation                    = UpAndStill
                AnimationName                = MBFFArrows_ASK.MBFFArrows_ABL
                AnimationMode                = ONCE
                AnimationSpeedFactorRange    = 5.0 5.0
            End
        End


        ModelConditionState = FORTRESS_IMPROVEMENT_1 DAMAGED
            Model = MBFFArrows_D1
            ParticleSysBone     = glowBone01 SmokeDwfFort FollowBone:Yes
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_1 REALLYDAMAGED
            Model = MBFFArrows_D2
            ParticleSysBone     = glowBone01 SmokeDwfFort FollowBone:Yes
        End

        AnimationState    = FORTRESS_IMPROVEMENT_1 REALLYDAMAGED
            Animation    = MBFFArrows_ReallyDamaged
                AnimationName        = MBFFArrows_D2S.MBFFArrows_D2A
                AnimationMode        = ONCE
            End
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_1 RUBBLE
            Model = MBFFArrows_D3
        End

        AnimationState    = FORTRESS_IMPROVEMENT_1 RUBBLE
            Animation    = MBFFArrows_Rubble
                AnimationName        = MBFFArrows_D3S.MBFFArrows_D3A
                AnimationMode        = ONCE
            End
        End

        ModelConditionState = SNOW FORTRESS_IMPROVEMENT_1
            Model = MBFFArrows
            Texture    = MBFortress.tga MBFortress_snow.tga
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_1
            Model           = MBFFArrows
            ParticleSysBone     = glowBone01 SmokeDwfFort FollowBone:Yes
        End
    End

    Draw = W3DScriptedModelDraw ModuleTag_DrawMorgulSorcery
        OkToChangeModelColor    = Yes

        DefaultModelConditionState
            Model    = None
        End

        ModelConditionState    = FORTRESS_IMPROVEMENT_2
            Model = MBFSorcery
        End
    End

    Draw = W3DScriptedModelDraw ModuleTag_DrawMagmaCauldrons
        OkToChangeModelColor    = Yes
        StaticModelLODMode        = Yes

        DefaultModelConditionState
            Model    = None
        End


        ModelConditionState      = FORTRESS_IMPROVEMENT_3 DAMAGED USER_2
            Model        = MBFMCauld_A
            Texture        = MBFortress.tga MBFortress_D.tga
        End

        ModelConditionState      = FORTRESS_IMPROVEMENT_3 REALLYDAMAGED USER_2
            Model        = MBFMCauld_A
            Texture        = MBFortress.tga MBFortress_D.tga
        End


        ModelConditionState = FORTRESS_IMPROVEMENT_3 USER_2 SNOW
            Model           = MBFMCauld_A
            Texture    = MBFortress.tga MBFortress_snow.tga
        End
        ModelConditionState = FORTRESS_IMPROVEMENT_3 USER_2
            Model           = MBFMCauld_A
        End

        AnimationState = FORTRESS_IMPROVEMENT_3    USER_2
            Animation                    = RiseUp
                AnimationName            = MBFMCauld_ASKL.MBFMCauld_ABLD
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 5.0 5.0
            End
        End


        ModelConditionState = FORTRESS_IMPROVEMENT_3 DAMAGED
            Model = MBFMCauld
            Texture = MBFortress.tga MBFortress_D.tga
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_3 REALLYDAMAGED
            Model = MBFMCauld_D2
        End

        AnimationState    = FORTRESS_IMPROVEMENT_3 REALLYDAMAGED
            Animation    = MBFMCauld_ReallyDamaged
                AnimationName        = MBFMCauld_D2.MBFMCauld_D2
                AnimationMode        = ONCE
            End
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_3 RUBBLE
            Model = MBFMCauld_D3
        End

        AnimationState    = FORTRESS_IMPROVEMENT_3 RUBBLE
            Animation    = MBFMCauld_Rubble
                AnimationName        = MBFMCauld_D3.MBFMCauld_D3
                AnimationMode        = ONCE
            End
        End

        ModelConditionState = SNOW FORTRESS_IMPROVEMENT_3
            Model = MBFMCauld
            Texture    = MBFortress.tga MBFortress_snow.tga
        End


        ModelConditionState = FORTRESS_IMPROVEMENT_3
            Model = MBFMCauld
        End
    End


    Draw = W3DScriptedModelDraw ModuleTag_DrawMagmaCauldronsGuy
        AttachToBoneInAnotherModule = PositionBone
        OkToChangeModelColor    = Yes

        DefaultModelConditionState
            Model    = None
        End

        IdleAnimationState
            StateName = NoTower
        End


        ModelConditionState = FORTRESS_IMPROVEMENT_3 USER_2
            Model        = None
        End

        ModelConditionState        = FORTRESS_IMPROVEMENT_3 RUBBLE
            Model        = NONE
        End


        AnimationState            = SPECIAL_WEAPON_ONE UNPACKING FORTRESS_IMPROVEMENT_3
            Animation            = Pouring
                AnimationName    = MBFMCauld_SKL.MBFMCauld_ATKA
                AnimationMode   = ONCE
            End
            EnteringStateFX    = FX_MagmaCauldronAttack

            ParticleSysBone = MAGMABONE02 MordorFortSpray FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE03 MordorFortSpray FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE04 MordorFortSpray FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE05 MordorFortSpray FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE06 MordorFortSpray FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE07 MordorFortSpray FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE08 MordorFortSpray FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE01 MordorFortSpray FOLLOWBONE:Yes

            ParticleSysBone = MAGMABONE02 MordorFortSpray02 FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE03 MordorFortSpray02 FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE04 MordorFortSpray02 FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE05 MordorFortSpray02 FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE06 MordorFortSpray02 FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE07 MordorFortSpray02 FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE08 MordorFortSpray02 FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE01 MordorFortSpray02 FOLLOWBONE:Yes

            ParticleSysBone = MAGMABONE02 MenFortressSteam FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE03 MenFortressSteam FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE04 MenFortressSteam FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE05 MenFortressSteam FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE06 MenFortressSteam FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE07 MenFortressSteam FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE08 MenFortressSteam FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE01 MenFortressSteam FOLLOWBONE:Yes

            ParticleSysBone = MAGMABONE02 MordorFortProxy FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE03 MordorFortProxy FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE04 MordorFortProxy FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE05 MordorFortProxy FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE06 MordorFortProxy FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE07 MordorFortProxy FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE08 MordorFortProxy FOLLOWBONE:Yes
            ParticleSysBone = MAGMABONE01 MordorFortProxy FOLLOWBONE:Yes
        End

        ModelConditionState = FORTRESS_IMPROVEMENT_3
            Model = MBFMCauld_SKN
        End

        AnimationState = FORTRESS_IMPROVEMENT_3
            Animation            = Idle
                AnimationName    = MBFMCauld_SKL.MBFMCauld_IDLA
                AnimationMode   = LOOP
            End
        End
    End


    Draw = W3DScriptedModelDraw ModuleTag_DrawGorgorothSpire
        OkToChangeModelColor    = Yes
        StaticModelLODMode        = Yes

        DefaultModelConditionState
            Model    = None
            WeaponLaunchBone    = SECONDARY EYEBONE
        End

        IdleAnimationState
            StateName    = NoTower
        End


        ModelConditionState = UPGRADE_FORTRESS_MONUMENT USER_3 DAMAGED
            Model       = MBFEWEye_A
            Texture        = MBFortress.tga MBFortress_D.tga
        End
        ModelConditionState = UPGRADE_FORTRESS_MONUMENT USER_3 REALLYDAMAGED
            Model       = MBFEWEye_A
            Texture        = MBFortress.tga MBFortress_D.tga
        End
        ModelConditionState = UPGRADE_FORTRESS_MONUMENT USER_3 SNOW
            Model           = MBFEWEye_A
            Texture    = MBFortress.tga MBFortress_snow.tga
        End
        ModelConditionState = UPGRADE_FORTRESS_MONUMENT USER_3
            Model           = MBFEWEye_A
        End

        AnimationState = UPGRADE_FORTRESS_MONUMENT USER_3
            Animation                    = RiseUp
                AnimationName            = MBFEWEye_ASKL.MBFEWEye_ABLD
                AnimationMode            = ONCE
                AnimationSpeedFactorRange = 5.0 5.0
            End
        End


        ModelConditionState = UPGRADE_FORTRESS_MONUMENT UNPACKING
            Model    = MBFEWEye
            ParticleSysBone  = EYEBONE GorSpireCharge FollowBone:Yes
            ParticleSysBone  = EYEBONE GorSpireCharge02 FollowBone:Yes
            ParticleSysBone  = EYEBONE GorSpireCharge03 FollowBone:Yes
        End


        ModelConditionState = UPGRADE_FORTRESS_MONUMENT DAMAGED
            Model = MBFEWEye
            Texture = MBFortress.tga MBFortress_D.tga
        End

        ModelConditionState = UPGRADE_FORTRESS_MONUMENT REALLYDAMAGED
            Model = MBFEWEye_D2
        End
        AnimationState    = UPGRADE_FORTRESS_MONUMENT REALLYDAMAGED
            Animation    = GorgorothSpire_ReallyDamaged
                AnimationName        = MBFEWEye_D2.MBFEWEye_D2
                AnimationMode        = ONCE
            End
        End

        ModelConditionState = UPGRADE_FORTRESS_MONUMENT RUBBLE
            Model = MBFEWEye_D3
        End

        AnimationState    = UPGRADE_FORTRESS_MONUMENT RUBBLE
            Animation    = GorgorothSpire_ReallyDamaged
               AnimationName        = MBFEWEye_D3SKL.MBFEWEye_D3AN
                AnimationMode        = ONCE
            End
        End


        ModelConditionState = SNOW UPGRADE_FORTRESS_MONUMENT
            Model = MBFEWEye
            Texture    = MBFortress.tga MBFortress_snow.tga
        End


        ModelConditionState = UPGRADE_FORTRESS_MONUMENT
            Model = MBFEWEye
        End
    End


    Draw = W3DScriptedModelDraw ModuleTag_DrawWolken

        DefaultModelConditionState
            Model                = None
        End

        ModelConditionState   = FORTRESS_IMPROVEMENT_5
            Model             = None
            ParticleSysBone = NONE DolGuldurTowerStormClouds FollowBone:Yes
            ParticleSysBone = NONE DolGuldurTowerStormFlashes FollowBone:Yes
        End
    End


    Draw = W3DScriptedModelDraw ModuleTag_DrawDunkleSeite

        DefaultModelConditionState
            Model                = None
        End

        ModelConditionState   = FORTRESS_IMPROVEMENT_8
            Model             = None
            ParticleSysBone   = NONE OneRingGaladrielStructureSchleier1
            ParticleSysBone   = NONE OneRingGaladrielStructureSchleier2
        End
    End

    Draw = W3DFloorDraw ModuleTag_DrawFloor
          ModelName = MBFortress_Bib
          WeatherTexture SNOWY MBFortress_snow.tga
    End

    PlacementViewAngle  = -45

    DisplayName	= OBJECT:MordorFortress
    Description	= OBJECT:MordorFortressDescription

    Side		= Mordor
    EditorSorting       = STRUCTURE
    ThreatLevel		= 1.0
    CommandPointBonus	= MAIN_FORTRESS_COMMAND_POINT
    MaxSimultaneousOfType = NEW_FORTRESS_RATIO

    CommandSet	= MordorFortressCommandSet

    Behavior = CommandSetUpgrade ModuleTag_Fortress_AI
        TriggeredBy       = Upgrade_ObjectUnderAIControl
        CommandSet        = MordorFortressCommandSet_AI
    End

    BuildCost           = MORDOR_FORTRESS_BUILDCOST
    BuildTime           = DEFAULT_FORTRESS_BUILDTIME
    BountyValue         = MORDOR_FORTRESS_BOUNTY_VALUE
    VisionRange         = DEFAULT_FORTRESS_VISION_RANGE
    ShroudClearingRange = DEFAULT_FORTRESS_SHROUD_CLEAR

    WeaponSet
        Weapon            = PRIMARY EvilFortressArrowTowerBow
        AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    End

    ArmorSet
        Conditions = None
        Armor      = DefaultFortressArmor
    End

    #include "..\..\..\Includes\StandardBuildingEvaEvents.inc"

    EvaEventDieOwner             = EvaFortressDie

    VoiceSelect                  = MordorFortressSelect
    VoiceSelectUnderConstruction = BuildingEvilVoiceSelectUnderConstruction

    SoundOnDamaged               = BuildingLightDamageStone
    SoundOnReallyDamaged         = BuildingHeavyDamageStone

    UnitSpecificSounds
        UnderConstruction        = BuildingBigConstructionLoop
        UnderRepairFromRubble    = BuildingBigConstructionLoop
    End

    ClientBehavior = AnimationSoundClientBehavior ModuleTag_AnimAudioBehavior
        MaxUpdateRangeCap = 800
        AnimationSound = Sound:UpgradeMordorFortressGorgonothSpire    Animation:MBFEWEye_ASKL.MBFEWEye_ABLD    Frames:980
    End

    CampnessValue = CAMPNESS_FORTRESS

    RadarPriority	= STRUCTURE
    KindOf	= PRELOAD COMMANDCENTER VITAL_FOR_BASE_SURVIVAL STRUCTURE IMMOBILE CASTLE_KEEP MP_COUNT_FOR_VICTORY SELECTABLE FS_FACTORY AUTO_RALLYPOINT MADE_OF_WOOD SCORE DOZER_FACTORY

    Behavior	= GettingBuiltBehavior GetBuiltBehaviorTag
        WorkerName    = MordorWorkerNoSelect
        SpawnTimer    = DEFAULT_STRUCTURE_HEALDELAY
    End

    Behavior = CastleMemberBehavior ModuleTag_CMB
    End

    Body	= StructureBody ModuleTag_05
        MaxHealth                     = DEFAULT_FORTRESS_HEALTH
        MaxHealthDamaged              = DEFAULT_FORTRESS_HEALTH_DAMAGED
        MaxHealthReallyDamaged        = DEFAULT_FORTRESS_HEALTH_REALLY_DAMAGED
    End

    Behavior                  = StructureCollapseUpdate ModuleTag_06
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_FortressCollapse
        DestroyObjectWhenDone   = Yes
        CollapseHeight          = 120
    End

	#include "..\..\..\..\includes\FortressAIHeroRespawnUpgrade_SEE.inc"

    Behavior = QueueProductionExitUpdate QueueProductionModuleTag
        UnitCreatePoint            = X:46.0 Y:0.0 Z:0.0
        NaturalRallyPoint        = X:159.0 Y:0.0 Z:0.0
        ExitDelay                = STANDARD_HERO_EXIT_DELAY
    End

    Behavior = AIUpdateInterface ModuleTag_AI
        AILuaEventsList                = FortressFunctions
        AutoAcquireEnemiesWhenIdle     = Yes
        MoodAttackCheckRate            = 250
    End

    Behavior = CitadelSlaughterHordeContain ModuleTag_SlaughterMe
	PassengerFilter			= GENERIC_FACTION_SLAUGHTERABLE
	ObjectStatusOfContained		= UNSELECTABLE ENCLOSED
	CashBackPercent			= 200%
	ContainMax			= 99
	AllowEnemiesInside		= No
	AllowAlliesInside		= No
 	AllowNeutralInside		= No
 	AllowOwnPlayerInsideOverride	= Yes
	EnterSound			= GUI_RingReturned
	EntryOffset			= X:125.0 Y:0.0 Z:0.0
	EntryPosition			= X:30.0 Y:0.0 Z:0.0
	ExitOffset			= X:125.0 Y:0.0 Z:0.0
     End

	#include "..\..\..\FortressRingFunc.inc"

    Behavior = CastleUpgrade ModuleTag_PassOutFlamingMunitionsUpgrade
        TriggeredBy    = Upgrade_MordorFortressFireArrowsTrigger
        Upgrade        = Upgrade_EvilFortressFlamingMunitions
    End

    Behavior = StatusBitsUpgrade ModuleTag_FakeOut
        TriggeredBy    = Upgrade_EvilFortressFlamingMunitions
    End

    Behavior = ModelConditionUpgrade ModuleTag_ShowMunitions
        TriggeredBy              = Upgrade_EvilFortressFlamingMunitions
        AddConditionFlags        = FORTRESS_IMPROVEMENT_1
        AddTempConditionFlag     = ModelConditionState:USER_1
        TempConditionTime        = 7.0
        Permanent                = Yes
    End

    Behavior = AudioLoopUpgrade ModuleTag_FlamingMunitionsBuildLoop
        TriggeredBy         = Upgrade_EvilFortressFlamingMunitions
        SoundToPlay         = BuildingConstructionLoop
        KillOnDeath         = Yes
        KillAfterMS         = 4000
    End

    Behavior = CastleUpgrade ModuleTag_PassOutNumenorStoneworkUpgrade
        TriggeredBy	= Upgrade_StreitmachtMinasMorguls
        Upgrade		= Upgrade_MordorFortressMorgulSorcery
    End
    Behavior = AttributeModifierAuraUpdate ModuleTag_DreadVisageAura
        StartsActive         = No
        RefreshDelay         = 2000
        TriggeredBy          = Upgrade_MordorFortressMorgulSorcery
        Range                = 350
        TargetEnemy          = Yes
        AntiCategory         = LEADERSHIP BUFF
        BonusName            = GenericDebuff
        ObjectFilter         = ANY +INFANTRY +CAVALRY +MACHINE -STRUCTURE -BASE_FOUNDATION +HERO +HORDE
    End
    Behavior = RadiateFearUpdate ModuleTag_DreadVisageFear
        InitiallyActive		= No
        TriggeredBy		= Upgrade_MordorFortressMorgulSorcery
        WhichSpecialPower	= 1
        GenerateTerror		= No
        GenerateFear		= Yes
        EmotionPulseRadius	= 350
        EmotionPulseInterval	= 1000
    End

	Behavior = AttributeModifierUpgrade ModuleTag_MorgulSorceryReinforced
		TriggeredBy		= Upgrade_MordorFortressMorgulSorcery
		AttributeModifier	= MorgulSorceryKeep_Bonus
	End

    Behavior = ModelConditionUpgrade ModuleTag_ShowMorgulSorcery
        TriggeredBy              = Upgrade_MordorFortressMorgulSorcery
        AddConditionFlags        = FORTRESS_IMPROVEMENT_2
        Permanent                = Yes
    End

    Behavior = ModelConditionUpgrade ModuleTag_ShowDolGuldurs
        TriggeredBy              = Upgrade_SchreckenDolGuldurs
        AddConditionFlags        = FORTRESS_IMPROVEMENT_5
        Permanent                = Yes
    End

    Behavior = ObjectCreationUpgrade CreateTheEffecktSound
        TriggeredBy              = Upgrade_SchreckenDolGuldurs
        Delay                    = 0.0
        ThingToSpawn             = DolGuldurRumbleSoundPing
        FadeInTime               = 200
    End

    Behavior = DamageFieldUpdate ModuleTag_RazorSpinesWeapon
        Radius               = 350
        ObjectFilter         = ALL ENEMIES
        RequiredUpgrade      = Upgrade_SchreckenDolGuldurs

        FireWeaponNugget
            WeaponName       = DolGuldurGiftBasicWeapon
            FireDelay        = 0
            OneShot          = No
        End
    End

    Behavior = AttributeModifierUpgrade ModuleTag_MurderOfCrowsBonus
        AttributeModifier    = IsengardFortressMurderOfCrows_Bonus
        TriggeredBy          = Upgrade_GarnisonCirithUngols
    End


    Behavior = ModelConditionUpgrade ModuleTag_ShowDunklerSchleier
        TriggeredBy             = Upgrade_RaiseShield
        AddConditionFlags       = FORTRESS_IMPROVEMENT_8
        Permanent               = Yes
    End

    Behavior = ObjectCreationUpgrade CreateTheEffecktSchleier
        TriggeredBy             = Upgrade_RaiseShield
        Delay                   = 0.0
        ThingToSpawn            = MordorDunklerSchleierEffeckt
        FadeInTime              = 200
    End

    Behavior = CostModifierUpgrade ModuleTag_CostModifier
        LabelForPalantirString = GUI:HERO_DISCOUNT
        StartsActive      = No
        TriggeredBy       = Upgrade_MordorFortressDoomPyres
        ObjectFilter      = ANY +HERO
        Percentage        = -20%
    End

    Behavior = ObjectCreationUpgrade CreateTheDiscount
        TriggeredBy        = Upgrade_MordorFortressDoomPyres
        Delay              = 0.0
        ThingToSpawn       = DiscountHeroObjectMordor
        FadeInTime         = 100
    End


    Behavior = SubObjectsUpgrade ModuleTag_HidePyres
        TriggeredBy            = Upgrade_StructureLevel1
        HideSubObjects        = MBFDPyres MBFDPyres1 MBFDPF MBFDPFG
    End

    Behavior = SubObjectsUpgrade ModuleTag_ShowPyres
        TriggeredBy            = Upgrade_MordorFortressDoomPyres
        ShowSubObjects        = MBFDPyres MBFDPyres1 MBFDPF MBFDPFG
    End


    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_CauldronsEnabler
        SpecialPowerTemplate      = SpecialAbilityMordorFortressMagmaCauldrons
        TriggeredBy               = Upgrade_MordorFortressMagmaCauldrons
    End

    Behavior = SpecialPowerModule ModuleTag_CauldronStarter
        SpecialPowerTemplate      = SpecialAbilityMordorFortressMagmaCauldrons
        UpdateModuleStartsAttack  = Yes
        StartsPaused              = Yes
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_CauldronWeaponFireUpdate
        SpecialPowerTemplate    = SpecialAbilityMordorFortressMagmaCauldrons
        WhichSpecialWeapon      = 1
        UnpackTime              = 5200
        PackTime                = 4600
        SpecialWeapon           = MordorFortressMagmaCauldronsWeapon
    End

    Behavior = ModelConditionUpgrade ModuleTag_ShowTheCauldrons
        TriggeredBy              = Upgrade_MordorFortressMagmaCauldrons
        AddConditionFlags        = FORTRESS_IMPROVEMENT_3
        AddTempConditionFlag     = ModelConditionState:USER_2
        TempConditionTime        = 7.0
        Permanent                = Yes
    End

    Behavior = AudioLoopUpgrade ModuleTag_MagmaCauldronsBuildLoop
        TriggeredBy            = Upgrade_MordorFortressMagmaCauldrons
        SoundToPlay            = BuildingConstructionLoop
        KillOnDeath            = Yes
        KillAfterMS            = 5800
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_SpireEnabler
        SpecialPowerTemplate    = SpecialAbilityGorgorothSpireFireball
        TriggeredBy             = Upgrade_MordorFortressGorgorothSpire Upgrade_StreitmachtMinasMorguls Upgrade_SchreckenDolGuldurs Upgrade_GarnisonCirithUngols
        RequiresAllTriggers     = Yes
    End

    Behavior = AudioLoopUpgrade ModuleTag_GorgorothSpireBuildLoop
        TriggeredBy             = Upgrade_MordorFortressGorgorothSpire
        SoundToPlay             = BuildingBigConstructionLoop
        KillOnDeath             = Yes
        KillAfterMS             = 5200
    End

    Behavior = SpecialPowerModule ModuleTag_SpireStarter
        SpecialPowerTemplate      = SpecialAbilityGorgorothSpireFireball
        UpdateModuleStartsAttack  = Yes
        StartsPaused              = Yes
        InitiateSound             = GorgorothSpireFireballBuildUpMS
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_SpireWeaponFireUpdate
        SpecialPowerTemplate      = SpecialAbilityGorgorothSpireFireball
        WhichSpecialWeapon        = 2
        UnpackTime                = 3000
        PackTime                  = 1500
        SpecialWeapon             = MordorGorgorothSpireWeapon
        TriggerSound              = GorgorothSpireFireballLaunchMS
    End

   Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityLightningBehavior
	SpecialAbility		= SpecialAbilityGorgorothSpireFireball
	Query			= 30 ANY ENEMIES +INFANTRY +CAVALRY +STRUCTURE
	Query			= 3 ANY ENEMIES +STRUCTURE
	MaxScanRange		= MORDOR_GORGOROTHSPIRE_ROCK_RANGE
   End

    Behavior = ModelConditionUpgrade ModuleTag_ShowTheSpire
        TriggeredBy                = Upgrade_MordorFortressGorgorothSpire
        AddConditionFlags          = UPGRADE_FORTRESS_MONUMENT
        AddTempConditionFlag       = ModelConditionState:USER_3
        TempConditionTime          = 9.0
        Permanent                  = Yes
    End

    Behavior = GeometryUpgrade TowerGeom
        TriggeredBy            = Upgrade_MordorFortressGorgorothSpire
        ShowGeometry           = HighTowerGeom
    End

    Behavior = ObjectCreationUpgrade CreateTheMoat
        TriggeredBy        = Upgrade_MordorFortressLavaMoat
        Delay            = 0.0
        ThingToSpawn    = MordorFortressLavaMoat
        DestroyWhenSold    = Yes
        FadeInTime        = 600
    End

    Behavior = UnpauseSpecialPowerUpgrade ModuleTag_OCLKriegEnabler
       SpecialPowerTemplate        = SpecialAbilitySturmaufdieFreienVolker
        TriggeredBy                = Upgrade_StreitmachtMinasMorguls
       ObeyRechageOnTrigger        = Yes
    End

    Behavior = OCLSpecialPower  ModuleTag_OCLKrieg
       SpecialPowerTemplate        = SpecialAbilitySturmaufdieFreienVolker
       OCL                         = OCL_SturmaufGondorPing
       CreateLocation              = CREATE_AT_LOCATION
       StartsPaused                = Yes
    End

    Behavior = SpecialAbilityUpdate ModuleTag_OCLKriegUpdate
        SpecialPowerTemplate       = SpecialAbilitySturmaufdieFreienVolker
        UnpackTime                 = 1
        PreparationTime            = 3
        PackTime                   = 2096
        AwardXPForTriggering       = 0
        FreezeAfterTriggerDuration = 0
    End

    Behavior = AutoDepositUpdate AutoDepositModuleTag
        DepositTiming           = GENERIC_KEEP_MONEY_TIME
        DepositAmount           = GENERIC_KEEP_MONEY_AMOUNT
        InitialCaptureBonus     = 0
    End

    Behavior = TerrainResourceBehavior ModuleTag_NewMoneyDeadSpot
        Radius          = GENERIC_KEEP_MONEY_RANGE
        MaxIncome       = 0
        IncomeInterval  = 999999
        HighPriority    = Yes
    End
	
    Behavior = SpecialPowerModule ModuleTag_Starter
        SpecialPowerTemplate      = SpecialAbilityMorgulFortressBuildPlot
        UpdateModuleStartsAttack  = Yes
        StartsPaused              = No
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WeaponFireUpdate
        SpecialPowerTemplate      = SpecialAbilityMorgulFortressBuildPlot
        WhichSpecialWeapon        = 2
        UnpackTime                = 1000
        PackTime                  = 500
        SpecialWeapon             = MorgulFortressWeapon
        TriggerSound              = MorgulFortressSound
    End

    Behavior = AISpecialPowerUpdate MordorMagmacauldronAI
		CommandButtonName = Command_FireWeaponMordorFortressMagmaCauldrons
		SpecialPowerAIType = AI_SPELLBOOK_ARMY_BREAKER
		SpecialPowerRadius = 200
    End

    Behavior = AISpecialPowerUpdate GorgorothspireAI
		CommandButtonName  = Command_FireWeaponMordorFortressSpireFireball
		SpecialPowerAIType = AI_SPELLBOOK_ARMY_BREAKER
		SpecialPowerRadius = MORDOR_GORGOROTHSPIRE_ROCK_RANGE
		SpecialPowerRange  = 600
    End

    Behavior = ObjectCreationUpgrade ModuleTag_IamAI1
        TriggeredBy  = Upgrade_EasyAISinglePlayer Upgrade_EasyAIMultiPlayer Upgrade_MediumAISinglePlayer Upgrade_MediumAIMultiPlayer Upgrade_HardAISinglePlayer Upgrade_HardAIMultiPlayer Upgrade_BrutalAISinglePlayer Upgrade_BrutalAIMultiPlayer
        Delay        = 350000
        GrantUpgrade = Upgrade_MordorFortressDoomPyres
    End

    Behavior = ObjectCreationUpgrade ModuleTag_IamAI2
        TriggeredBy  = Upgrade_EasyAISinglePlayer Upgrade_EasyAIMultiPlayer Upgrade_MediumAISinglePlayer Upgrade_MediumAIMultiPlayer Upgrade_HardAISinglePlayer Upgrade_HardAIMultiPlayer Upgrade_BrutalAISinglePlayer Upgrade_BrutalAIMultiPlayer
        Delay        = 500000
        GrantUpgrade = Upgrade_MordorFortressLavaMoat
    End

    Behavior = ObjectCreationUpgrade ModuleTag_IamAI3
        TriggeredBy  = Upgrade_EasyAISinglePlayer Upgrade_EasyAIMultiPlayer Upgrade_MediumAISinglePlayer Upgrade_MediumAIMultiPlayer Upgrade_HardAISinglePlayer Upgrade_HardAIMultiPlayer Upgrade_BrutalAISinglePlayer Upgrade_BrutalAIMultiPlayer
        Delay        = 650000
        GrantUpgrade = Upgrade_MordorFortressFireArrowsTrigger
    End

    Behavior = ObjectCreationUpgrade ModuleTag_IamAI4
        TriggeredBy  = Upgrade_EasyAISinglePlayer Upgrade_EasyAIMultiPlayer Upgrade_MediumAISinglePlayer Upgrade_MediumAIMultiPlayer Upgrade_HardAISinglePlayer Upgrade_HardAIMultiPlayer Upgrade_BrutalAISinglePlayer Upgrade_BrutalAIMultiPlayer
        Delay        = 8000000
        GrantUpgrade = Upgrade_MordorFortressMagmaCauldrons
    End

    Behavior = ObjectCreationUpgrade ModuleTag_IamAI5
        TriggeredBy  = Upgrade_EasyAISinglePlayer Upgrade_EasyAIMultiPlayer Upgrade_MediumAISinglePlayer Upgrade_MediumAIMultiPlayer Upgrade_HardAISinglePlayer Upgrade_HardAIMultiPlayer Upgrade_BrutalAISinglePlayer Upgrade_BrutalAIMultiPlayer
        Delay        = 1000000
        GrantUpgrade = Upgrade_MordorFortressGorgorothSpire
    End

    Geometry                  = BOX
    GeometryName              = Geom_Orig
    GeometryMajorRadius       = 50.0
    GeometryMinorRadius       = 50.0
    GeometryHeight            = 50.0
    GeometryOffset            = X:5 Y:0 Z:0


    AdditionalGeometry        = BOX
    GeometryName              = Geom_V2
    GeometryMajorRadius       = 10.0
    GeometryMinorRadius       = 13.0
    GeometryHeight            = 140.0
    GeometryOffset            = X:40 Y:-42 Z:0

    AdditionalGeometry        = BOX
    GeometryName              = Geom_V2
    GeometryMajorRadius       = 10.0
    GeometryMinorRadius       = 13.0
    GeometryHeight            = 140.0
    GeometryOffset            = X:-40 Y:42 Z:0

    AdditionalGeometry        = BOX
    GeometryName              = Geom_V2
    GeometryMajorRadius       = 10.0
    GeometryMinorRadius       = 13.0
    GeometryHeight            = 140.0
    GeometryOffset            = X:40 Y:42 Z:0

    AdditionalGeometry        = BOX
    GeometryName              = Geom_V2
    GeometryMajorRadius       = 10.0
    GeometryMinorRadius       = 13.0
    GeometryHeight            = 140.0
    GeometryOffset            = X:-40 Y:-42 Z:0

    AdditionalGeometry        = BOX
    GeometryMajorRadius       = 26.0
    GeometryMinorRadius       = 20.0
    GeometryHeight            = 22.0
    GeometryOffset            = X:85 Y:0 Z:0

    AdditionalGeometry        = BOX
    GeometryName              = HighTowerGeom
    GeometryMajorRadius       = 12
    GeometryMinorRadius       = 12
    GeometryHeight            = 150
    GeometryOffset            = X:0 Y:0 Z:0
    GeometryUsedForHealthBox  = No

    GeometryIsSmall           = No
    Shadow                    = SHADOW_VOLUME
    BuildCompletion           = PLACED_BY_PLAYER

    GeometryContactPoint = X:-58           Y:58           Z:0          Repair
    GeometryContactPoint = X:58            Y:-58          Z:0          Repair
    GeometryContactPoint = X:47.546        Y:36.435       Z:0
    GeometryContactPoint = X:-32.763       Y:-46.121      Z:0
    GeometryContactPoint = X:0             Y:0            Z:180        Swoop
End


Object MordorFortress

    SelectPortrait = BPMFortress

    Draw    = W3DScriptedModelDraw ModuleTag_01

        OkToChangeModelColor    = Yes
        StaticModelLODMode      = Yes

        DefaultModelConditionState
            Model           = None
        End

        IdleAnimationState
        End

        ModelConditionState = WORLD_BUILDER
            Model    = MBFortress
        End

        ModelConditionState = BUILD_PLACEMENT_CURSOR
            Model    = None
        End


        ModelConditionState =  PHANTOM_STRUCTURE
            Model    = MBFortress
        End

        AnimationState = BUILD_PLACEMENT_CURSOR
            BeginScript
                   CurDrawableHideSubObject("MBFDPYRES")
                   CurDrawableHideSubObject("MBFDPFG")
                   CurDrawableHideSubObject("MBFDPF")
            EndScript
        End


        AnimationState = PHANTOM_STRUCTURE
            BeginScript
                   CurDrawableHideSubObject("MBFDPYRES")
                   CurDrawableHideSubObject("MBFDPFG")
                   CurDrawableHideSubObject("MBFDPF")
            EndScript
        End

        ModelConditionState = RUBBLE
            Model        = MBFortress_D3
        End

        AnimationState    = RUBBLE
            Animation    = Fortress_Rubble
                AnimationName        = MBFortress_D3S.MBFortress_D3A
                AnimationMode        = ONCE
            End
            EnteringStateFX    = FX_FortressCollapse
        End


        ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED SNOW
            Model               = MBFortress_A
            Texture    = MBFortress.tga MBFortress_snow.tga
        End
        ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Model               = MBFortress_A
        End
        AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
            Animation           = MBFortress_A
                AnimationName     = MBFortress_ASK.MBFortress_ABL
                AnimationMode     = MANUAL
            End
            ParticleSysBone   = NONE BuildingContructDustCastlesB
            ParticleSysBone   = NONE FortressMordor
            Flags                = START_FRAME_FIRST
            StateName            = BeingConstructed
            BeginScript
                CurDrawablePlaySound("GondorBarracksBeginConstruction")
            EndScript
        End
    End

      ArmorSet
        Conditions        = None
          Armor             = DefaultFortressArmor
      End

    Side                = Mordor
    EditorSorting       = STRUCTURE
    MaxSimultaneousOfType = NEW_FORTRESS_RATIO
    PlacementViewAngle = -45

    BuildCost           = MORDOR_FORTRESS_BUILDCOST
    BuildTime           = DEFAULT_FORTRESS_BUILDTIME

    DisplayName            = OBJECT:MordorFortress



    #include "..\..\..\Includes\StandardBuildingEvaEvents.inc"

    VoiceFullyCreated               = EVA:FortressComplete-Builder
    VoiceSelect                     = MordorFortressSelect
    VoiceSelectUnderConstruction    = BuildingEvilVoiceSelectUnderConstruction

     SoundOnDamaged                 = BuildingLightDamageStone
     SoundOnReallyDamaged           = BuildingHeavyDamageStone

    UnitSpecificSounds
        UnderConstruction           = BuildingBigConstructionLoop
        UnderRepairFromRubble       = BuildingBigConstructionLoop
    End

    ClientBehavior = ModelConditionAudioLoopClientBehavior ModuleTag_PlayCollapseSound
        ModelCondition = REQUIRED:RUBBLE Sound:BuildingSink
    End




    AutoResolveUnitType = AutoResolveUnit_Fortress

        AutoResolveBody = AutoResolve_MordorFortressBody

        AutoResolveArmor
            Armor = AutoResolve_MordorFortressArmor
        End

        AutoResolveWeapon
            Weapon = AutoResolve_MordorFortressWeapon
        End



    RadarPriority       = STRUCTURE
    KindOf              = STRUCTURE SELECTABLE IMMOBILE BASE_FOUNDATION MP_COUNT_FOR_VICTORY BASE_SITE CAN_SEE_THROUGH_STRUCTURE LIVING_WORLD_BUILDING_MIRROR

    Body                        = StructureBody ModuleTag_05
        MaxHealth                     = DEFAULT_FORTRESS_HEALTH
    End

    Behavior = CastleBehavior ModuleTag_castle
        CastleToUnpackForFaction    = Mordor Fortress_Mordor
        CastleToUnpackForFaction    = Men    Fortress_Mordor
        CastleToUnpackForFaction    = Arnor  Fortress_Mordor
        CastleToUnpackForFaction    = Rohan  Fortress_Mordor
        CastleToUnpackForFaction    = Elves  Fortress_Mordor
        CastleToUnpackForFaction    = Imladris Fortress_Mordor
        CastleToUnpackForFaction    = Dwarves Fortress_Mordor
        CastleToUnpackForFaction    = Isengard Fortress_Mordor
        CastleToUnpackForFaction    = Wild   Fortress_Mordor
        CastleToUnpackForFaction    = Angmar Fortress_Mordor

        FilterValidOwnedEntries     = ANY +STRUCTURE +WALK_ON_TOP_OF_WALL +BASE_FOUNDATION +TACTICAL_MARKER

        MaxCastleRadius             = 130.0
        InstantUnpack               = Yes
        KeepDeathKillsEverything    = Yes

        EvaEnemyCastleSightedEvent  = EnemyFortressSighted
    End

    Behavior                  = StructureCollapseUpdate ModuleTag_06
        MinCollapseDelay        = 000
        MaxCollapseDelay        = 000
        CollapseDamping         = .5
        MaxShudder              = 0.6
        MinBurstDelay           = 250
        MaxBurstDelay           = 800
        BigBurstFrequency       = 4
        FXList                  = INITIAL   FX_FortressCollapse

        DestroyObjectWhenDone    = Yes
        CollapseHeight            = 120
    End

    Behavior    = GettingBuiltBehavior ModuleTag_GettingBuiltBehavior
        WorkerName    = MordorWorkerNoSelect
        SpawnTimer    = DEFAULT_STRUCTURE_HEALDELAY
    End

    Behavior = AIUpdateInterface ModuleTag_AI
        AILuaEventsList                = FortressFunctions
    End


    Geometry                = BOX
    GeometryName            = Geom_Orig
      GeometryMajorRadius        = 65.0
    GeometryMinorRadius        = 65.0
    GeometryHeight            = 50.0
    GeometryOffset            = X:5 Y:0 Z:0


    AdditionalGeometry        = BOX
    GeometryName            = Plots
    GeometryMajorRadius        = 10.0
    GeometryMinorRadius        = 10.0
    GeometryHeight            = 0.8
    GeometryOffset            = X:91.15 Y:-81.15 Z:0

    AdditionalGeometry        = BOX
    GeometryName            = Plots
    GeometryMajorRadius        = 10.0
    GeometryMinorRadius        = 10.0
    GeometryHeight            = 0.8
    GeometryOffset            = X:0 Y:-114.48 Z:0

    AdditionalGeometry        = BOX
    GeometryName            = Plots
    GeometryMajorRadius        = 10.0
    GeometryMinorRadius        = 10.0
    GeometryHeight            = 0.8
    GeometryOffset            = X:-81.15 Y:-81.15 Z:0

    AdditionalGeometry        = BOX
    GeometryName            = Plots
    GeometryMajorRadius        = 10.0
    GeometryMinorRadius        = 10.0
    GeometryHeight            = 0.8
    GeometryOffset            = X:-114.48 Y:0 Z:0

    AdditionalGeometry        = BOX
    GeometryName            = Plots
    GeometryMajorRadius        = 10.0
    GeometryMinorRadius        = 10.0
    GeometryHeight            = 0.8
    GeometryOffset            = X:-81.15 Y:91.15 Z:0

    AdditionalGeometry        = BOX
    GeometryName            = Plots
    GeometryMajorRadius        = 10.0
    GeometryMinorRadius        = 10.0
    GeometryHeight            = 0.8
    GeometryOffset            = X:0 Y:114.48 Z:0

    AdditionalGeometry        = BOX
    GeometryName            = Plots
    GeometryMajorRadius        = 10.0
    GeometryMinorRadius        = 10.0
    GeometryHeight            = 0.8
    GeometryOffset            = X:91.15 Y:91.15 Z:0


    AdditionalGeometry        = BOX
    GeometryMajorRadius        = 26.0
     GeometryMinorRadius        = 20.0
     GeometryHeight            = 22.0
    GeometryOffset            = X:85 Y:0 Z:0

    GeometryIsSmall         = No
    Shadow                    = SHADOW_VOLUME

    GeometryContactPoint = X:-65    Y:65        Z:0            Repair
    GeometryContactPoint = X:65        Y:-65    Z:0            Repair
    GeometryContactPoint = X:47.546        Y:36.435    Z:0
    GeometryContactPoint = X:-32.763    Y:-46.121    Z:0
    GeometryContactPoint = X:26.753        Y:26.753    Z:67.933    Swoop
End


Object MordorFortressLavaMoat

    Draw    = W3DScriptedModelDraw ModuleTag_01
        OkToChangeModelColor    = Yes

        DefaultModelConditionState
            Model               = MBFLavaMoat
        End
    End

    ArmorSet
        Conditions        = None
          Armor           = NoArmor
      End

    Side                = Mordor
    EditorSorting       = STRUCTURE
    BuildTime           = 10.0


    #include "..\..\..\Includes\StandardBuildingEvaEvents.inc"
    CampnessValue = 0


    RadarPriority       = STRUCTURE
    KindOf              = STRUCTURE IMMOBILE NOT_AUTOACQUIRABLE UNATTACKABLE BASE_SITE CAN_SEE_THROUGH_STRUCTURE

    Body = HighlanderBody ModuleTag_02
        MaxHealth      = 1.0
    End

    Behavior = SlavedUpdate ModuleTag_Slave
        DieOnMastersDeath = Yes
    End

    Geometry                = BOX
    GeometryMajorRadius     = 82
    GeometryMinorRadius     = 82
    GeometryHeight          = 10

    GeometryIsSmall         = No
    Shadow                  = SHADOW_VOLUME
End


ChildObject MordorFortress_Celduin_1 MordorFortress

    Behavior = CastleBehavior ModuleTag_castle
        CastleToUnpackForFaction    = Mordor Fortress_Mordor
        CastleToUnpackForFaction    = Isengard Fortress_Mordor
        CastleToUnpackForFaction    = Men Fortress_Mordor
        CastleToUnpackForFaction    = Elves Fortress_Mordor
        CastleToUnpackForFaction    = Dwarves Fortress_Mordor
        CastleToUnpackForFaction    = Wild Fortress_Mordor

        FilterValidOwnedEntries     = ANY +STRUCTURE +WALK_ON_TOP_OF_WALL +BASE_FOUNDATION +TACTICAL_MARKER
        MaxCastleRadius             = 130.0
        FadeTime                    = 2.0
        InstantUnpack               = Yes
        KeepDeathKillsEverything    = Yes
        EvaEnemyCastleSightedEvent  = EnemyFortressSighted
        PreBuiltList                = MordorWallCatapultExpansion -2
        PreBuiltList                = MordorWallCatapultExpansion -2
        PreBuiltList                = MordorWallCatapultExpansion -2
        PreBuiltList                = MordorWallCatapultExpansion -2
    End
End
